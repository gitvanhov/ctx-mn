!function(t){var i={};function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)e.d(n,o,function(i){return t[i]}.bind(null,o));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=11)}({0:function(t,i,e){"use strict";t.exports=o,t.exports.default=o;var n=e(10);function o(t,i){if(!(this instanceof o))return new o(t,i);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&this._initFormat(i),this.clear()}function r(t,i,e){if(!e)return i.indexOf(t);for(var n=0;n<i.length;n++)if(e(t,i[n]))return n;return-1}function s(t,i){a(t,0,t.children.length,i,t)}function a(t,i,e,n,o){o||(o=f(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var r,s=i;s<e;s++)r=t.children[s],h(o,t.leaf?n(r):r);return o}function h(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function u(t,i){return t.minX-i.minX}function p(t,i){return t.minY-i.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function _(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function d(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,i,e,o,r){for(var s,a=[i,e];a.length;)(e=a.pop())-(i=a.pop())<=o||(s=i+Math.ceil((e-i)/o/2)*o,n(t,s,i,e,r),a.push(i,s,s,e))}o.prototype={all:function(){return this._all(this.data,[])},search:function(t){var i=this.data,e=[],n=this.toBBox;if(!d(t,i))return e;for(var o,r,s,a,h=[];i;){for(o=0,r=i.children.length;o<r;o++)s=i.children[o],d(t,a=i.leaf?n(s):s)&&(i.leaf?e.push(s):_(t,a)?this._all(s,e):h.push(s));i=h.pop()}return e},collides:function(t){var i=this.data,e=this.toBBox;if(!d(t,i))return!1;for(var n,o,r,s,a=[];i;){for(n=0,o=i.children.length;n<o;n++)if(r=i.children[n],d(t,s=i.leaf?e(r):r)){if(i.leaf||_(t,s))return!0;a.push(r)}i=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,e=t.length;i<e;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=f([]),this},remove:function(t,i){if(!t)return this;for(var e,n,o,s,a=this.data,h=this.toBBox(t),u=[],p=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],e=p.pop(),s=!0),a.leaf&&-1!==(o=r(t,a.children,i)))return a.children.splice(o,1),u.push(a),this._condense(u),this;s||a.leaf||!_(a,h)?n?(e++,a=n.children[e],s=!1):a=null:(u.push(a),p.push(e),e=0,n=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:p,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,i){for(var e=[];t;)t.leaf?i.push.apply(i,t.children):e.push.apply(e,t.children),t=e.pop();return i},_build:function(t,i,e,n){var o,r=e-i+1,a=this._maxEntries;if(r<=a)return s(o=f(t.slice(i,e+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(r)/Math.log(a)),a=Math.ceil(r/Math.pow(a,n-1))),(o=f([])).leaf=!1,o.height=n;var h,u,p,l,c=Math.ceil(r/a),_=c*Math.ceil(Math.sqrt(a));for(v(t,i,e,_,this.compareMinX),h=i;h<=e;h+=_)for(v(t,h,p=Math.min(h+_-1,e),c,this.compareMinY),u=h;u<=p;u+=c)l=Math.min(u+c-1,p),o.children.push(this._build(t,u,l,n-1));return s(o,this.toBBox),o},_chooseSubtree:function(t,i,e,n){for(var o,r,s,a,h,u,p,c,_,d;n.push(i),!i.leaf&&n.length-1!==e;){for(p=c=1/0,o=0,r=i.children.length;o<r;o++)h=l(s=i.children[o]),_=t,d=s,(u=(Math.max(d.maxX,_.maxX)-Math.min(d.minX,_.minX))*(Math.max(d.maxY,_.maxY)-Math.min(d.minY,_.minY))-h)<c?(c=u,p=h<p?h:p,a=s):u===c&&h<p&&(p=h,a=s);i=a||i.children[0]}return i},_insert:function(t,i,e){var n=this.toBBox,o=e?t:n(t),r=[],s=this._chooseSubtree(o,this.data,i,r);for(s.children.push(t),h(s,o);i>=0&&r[i].children.length>this._maxEntries;)this._split(r,i),i--;this._adjustParentBBoxes(o,r,i)},_split:function(t,i){var e=t[i],n=e.children.length,o=this._minEntries;this._chooseSplitAxis(e,o,n);var r=this._chooseSplitIndex(e,o,n),a=f(e.children.splice(r,e.children.length-r));a.height=e.height,a.leaf=e.leaf,s(e,this.toBBox),s(a,this.toBBox),i?t[i-1].children.push(a):this._splitRoot(e,a)},_splitRoot:function(t,i){this.data=f([t,i]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,i,e){var n,o,r,s,h,u,p,c,_,d,f,v,g,y;for(u=p=1/0,n=i;n<=e-i;n++)o=a(t,0,n,this.toBBox),r=a(t,n,e,this.toBBox),_=o,d=r,f=void 0,v=void 0,g=void 0,y=void 0,f=Math.max(_.minX,d.minX),v=Math.max(_.minY,d.minY),g=Math.min(_.maxX,d.maxX),y=Math.min(_.maxY,d.maxY),s=Math.max(0,g-f)*Math.max(0,y-v),h=l(o)+l(r),s<u?(u=s,c=n,p=h<p?h:p):s===u&&h<p&&(p=h,c=n);return c},_chooseSplitAxis:function(t,i,e){var n=t.leaf?this.compareMinX:u,o=t.leaf?this.compareMinY:p;this._allDistMargin(t,i,e,n)<this._allDistMargin(t,i,e,o)&&t.children.sort(n)},_allDistMargin:function(t,i,e,n){t.children.sort(n);var o,r,s=this.toBBox,u=a(t,0,i,s),p=a(t,e-i,e,s),l=c(u)+c(p);for(o=i;o<e-i;o++)r=t.children[o],h(u,t.leaf?s(r):r),l+=c(u);for(o=e-i-1;o>=i;o--)r=t.children[o],h(p,t.leaf?s(r):r),l+=c(p);return l},_adjustParentBBoxes:function(t,i,e){for(var n=e;n>=0;n--)h(i[n],t)},_condense:function(t){for(var i,e=t.length-1;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():s(t[e],this.toBBox)},_initFormat:function(t){var i=["return a"," - b",";"];this.compareMinX=new Function("a","b",i.join(t[0])),this.compareMinY=new Function("a","b",i.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},10:function(t,i,e){t.exports=function(){"use strict";function t(t,i,e){var n=t[i];t[i]=t[e],t[e]=n}function i(t,i){return t<i?-1:t>i?1:0}return function(e,n,o,r,s){!function i(e,n,o,r,s){for(;r>o;){if(r-o>600){var a=r-o+1,h=n-o+1,u=Math.log(a),p=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*p*(a-p)/a)*(h-a/2<0?-1:1),c=Math.max(o,Math.floor(n-h*p/a+l)),_=Math.min(r,Math.floor(n+(a-h)*p/a+l));i(e,n,c,_,s)}var d=e[n],f=o,v=r;for(t(e,o,n),s(e[r],d)>0&&t(e,o,r);f<v;){for(t(e,f,v),f++,v--;s(e[f],d)<0;)f++;for(;s(e[v],d)>0;)v--}0===s(e[o],d)?t(e,o,v):t(e,++v,r),v<=n&&(o=v+1),n<=v&&(r=v-1)}}(e,n,o||0,r||e.length-1,s||i)}}()},11:function(t,i,e){"use strict";function n(){return function(){throw new Error("Unimplemented abstract method.")}()}e.r(i);var o=0;function r(t){return t.ol_uid||(t.ol_uid=String(++o))}var s="5.3.0",a=function(t){function i(i){var e="Assertion failed. See https://openlayers.org/en/"+("latest"===s?s:"v"+s.split("-")[0])+"/doc/errors/#"+i+" for details.";t.call(this,e),this.code=i,this.name="AssertionError",this.message=e}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(Error),h={ADD:"add",REMOVE:"remove"},u="propertychange",p="function"==typeof Object.assign?Object.assign:function(t,i){var e=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),o=1,r=arguments.length;o<r;++o){var s=e[o];if(null!=s)for(var a in s)s.hasOwnProperty(a)&&(n[a]=s[a])}return n};function l(t){for(var i in t)delete t[i]}function c(t){var i;for(i in t)return!1;return!i}function _(t,i,e,n){for(var o,r=0,s=t.length;r<s;++r)if((o=t[r]).listener===i&&o.bindTo===e)return n&&(o.deleteIndex=r),o}function d(t,i){var e=f(t);return e?e[i]:void 0}function f(t,i){var e=t.ol_lm;return!e&&i&&(e=t.ol_lm={}),e}function v(t,i){var e=d(t,i);if(e){for(var n=0,o=e.length;n<o;++n)t.removeEventListener(i,e[n].boundListener),l(e[n]);e.length=0;var r=f(t);r&&(delete r[i],0===Object.keys(r).length&&function(t){delete t.ol_lm}(t))}}function g(t,i,e,n,o){var r=f(t,!0),s=r[i];s||(s=r[i]=[]);var a=_(s,e,n,!1);return a?o||(a.callOnce=!1):(a={bindTo:n,callOnce:!!o,listener:e,target:t,type:i},t.addEventListener(i,function(t){var i=function(i){var e=t.listener,n=t.bindTo||t.target;return t.callOnce&&E(t),e.call(n,i)};return t.boundListener=i,i}(a)),s.push(a)),a}function y(t,i,e,n){return g(t,i,e,n,!0)}function m(t,i,e,n){var o=d(t,i);if(o){var r=_(o,e,n,!0);r&&E(r)}}function E(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var i=d(t.target,t.type);if(i){var e="deleteIndex"in t?t.deleteIndex:i.indexOf(t);-1!==e&&i.splice(e,1),0===i.length&&v(t.target,t.type)}l(t)}}var T=function(){this.disposed_=!1};T.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},T.prototype.disposeInternal=function(){};var C=T;function R(){return!0}function I(){return!1}function w(){}var M=function(t){this.propagationStopped,this.type=t,this.target=null};function O(t){t.stopPropagation()}M.prototype.preventDefault=function(){this.propagationStopped=!0},M.prototype.stopPropagation=function(){this.propagationStopped=!0};var b=M,P=function(t){function i(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.addEventListener=function(t,i){var e=this.listeners_[t];e||(e=this.listeners_[t]=[]),-1===e.indexOf(i)&&e.push(i)},i.prototype.dispatchEvent=function(t){var i="string"==typeof t?new b(t):t,e=i.type;i.target=this;var n,o=this.listeners_[e];if(o){e in this.dispatching_||(this.dispatching_[e]=0,this.pendingRemovals_[e]=0),++this.dispatching_[e];for(var r=0,s=o.length;r<s;++r)if(!1===o[r].call(this,i)||i.propagationStopped){n=!1;break}if(--this.dispatching_[e],0===this.dispatching_[e]){var a=this.pendingRemovals_[e];for(delete this.pendingRemovals_[e];a--;)this.removeEventListener(e,w);delete this.dispatching_[e]}return n}},i.prototype.disposeInternal=function(){!function(t){var i=f(t);if(i)for(var e in i)v(t,e)}(this)},i.prototype.getListeners=function(t){return this.listeners_[t]},i.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},i.prototype.removeEventListener=function(t,i){var e=this.listeners_[t];if(e){var n=e.indexOf(i);t in this.pendingRemovals_?(e[n]=w,++this.pendingRemovals_[t]):(e.splice(n,1),0===e.length&&delete this.listeners_[t])}},i}(C),A={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"};var L=function(t){function i(){t.call(this),this.revision_=0}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.changed=function(){++this.revision_,this.dispatchEvent(A.CHANGE)},i.prototype.getRevision=function(){return this.revision_},i.prototype.on=function(t,i){if(Array.isArray(t)){for(var e=t.length,n=new Array(e),o=0;o<e;++o)n[o]=g(this,t[o],i);return n}return g(this,t,i)},i.prototype.once=function(t,i){if(Array.isArray(t)){for(var e=t.length,n=new Array(e),o=0;o<e;++o)n[o]=y(this,t[o],i);return n}return y(this,t,i)},i.prototype.un=function(t,i){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)m(this,t[e],i);else m(this,t,i)},i}(P),D=function(t){function i(i,e,n){t.call(this,i),this.key=e,this.oldValue=n}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(b),F={};function N(t){return F.hasOwnProperty(t)?F[t]:F[t]="change:"+t}var G=function(t){function i(i){t.call(this),r(this),this.values_={},void 0!==i&&this.setProperties(i)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.get=function(t){var i;return this.values_.hasOwnProperty(t)&&(i=this.values_[t]),i},i.prototype.getKeys=function(){return Object.keys(this.values_)},i.prototype.getProperties=function(){return p({},this.values_)},i.prototype.notify=function(t,i){var e;e=N(t),this.dispatchEvent(new D(e,t,i)),e=u,this.dispatchEvent(new D(e,t,i))},i.prototype.set=function(t,i,e){if(e)this.values_[t]=i;else{var n=this.values_[t];this.values_[t]=i,n!==i&&this.notify(t,n)}},i.prototype.setProperties=function(t,i){for(var e in t)this.set(e,t[e],i)},i.prototype.unset=function(t,i){if(t in this.values_){var e=this.values_[t];delete this.values_[t],i||this.notify(t,e)}},i}(L),K="length",Z=function(t){function i(i,e){t.call(this,i),this.element=e}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(b),z=function(t){function i(i,e){t.call(this);var n=e||{};if(this.unique_=!!n.unique,this.array_=i||[],this.unique_)for(var o=0,r=this.array_.length;o<r;++o)this.assertUnique_(this.array_[o],o);this.updateLength_()}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},i.prototype.extend=function(t){for(var i=0,e=t.length;i<e;++i)this.push(t[i]);return this},i.prototype.forEach=function(t){for(var i=this.array_,e=0,n=i.length;e<n;++e)t(i[e],e,i)},i.prototype.getArray=function(){return this.array_},i.prototype.item=function(t){return this.array_[t]},i.prototype.getLength=function(){return this.get(K)},i.prototype.insertAt=function(t,i){this.unique_&&this.assertUnique_(i),this.array_.splice(t,0,i),this.updateLength_(),this.dispatchEvent(new Z(h.ADD,i))},i.prototype.pop=function(){return this.removeAt(this.getLength()-1)},i.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var i=this.getLength();return this.insertAt(i,t),this.getLength()},i.prototype.remove=function(t){for(var i=this.array_,e=0,n=i.length;e<n;++e)if(i[e]===t)return this.removeAt(e)},i.prototype.removeAt=function(t){var i=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Z(h.REMOVE,i)),i},i.prototype.setAt=function(t,i){var e=this.getLength();if(t<e){this.unique_&&this.assertUnique_(i,t);var n=this.array_[t];this.array_[t]=i,this.dispatchEvent(new Z(h.REMOVE,n)),this.dispatchEvent(new Z(h.ADD,i))}else{for(var o=e;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,i)}},i.prototype.updateLength_=function(){this.set(K,this.array_.length)},i.prototype.assertUnique_=function(t,i){for(var e=0,n=this.array_.length;e<n;++e)if(this.array_[e]===t&&e!==i)throw new a(58)},i}(G),U=function(t){function i(i,e,n){t.call(this,i),this.map=e,this.frameState=void 0!==n?n:null}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(b),x=function(t){function i(i,e,n,o,r){t.call(this,i,e,r),this.originalEvent=n,this.pixel=e.getEventPixel(n),this.coordinate=e.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==o&&o}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},i.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},i}(U),j="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",V=-1!==j.indexOf("firefox"),B=-1!==j.indexOf("safari")&&-1==j.indexOf("chrom"),Y=-1!==j.indexOf("webkit")&&-1==j.indexOf("edge"),H=-1!==j.indexOf("macintosh"),W=window.devicePixelRatio||1,X=function(){var t=!1;try{t=!!document.createElement("canvas").getContext("2d").setLineDash}catch(t){}return t}(),q=(navigator,"ontouchstart"in window),Q="PointerEvent"in window,$=!!navigator.msPointerEnabled,J={SINGLECLICK:"singleclick",CLICK:A.CLICK,DBLCLICK:A.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},k=function(t){function i(i,e,n,o,r){t.call(this,i,e,n.originalEvent,o,r),this.pointerEvent=n}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(x),S={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},tt=function(t,i){this.dispatcher=t,this.mapping_=i};tt.prototype.getEvents=function(){return Object.keys(this.mapping_)},tt.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};var it=tt,et=1,nt="mouse";function ot(t){if(!this.isEventSimulatedFromTouch_(t)){et.toString()in this.pointerMap&&this.cancel(t);var i=ut(t,this.dispatcher);this.pointerMap[et.toString()]=t,this.dispatcher.down(i,t)}}function rt(t){if(!this.isEventSimulatedFromTouch_(t)){var i=ut(t,this.dispatcher);this.dispatcher.move(i,t)}}function st(t){if(!this.isEventSimulatedFromTouch_(t)){var i=this.pointerMap[et.toString()];if(i&&i.button===t.button){var e=ut(t,this.dispatcher);this.dispatcher.up(e,t),this.cleanupMouse()}}}function at(t){if(!this.isEventSimulatedFromTouch_(t)){var i=ut(t,this.dispatcher);this.dispatcher.enterOver(i,t)}}function ht(t){if(!this.isEventSimulatedFromTouch_(t)){var i=ut(t,this.dispatcher);this.dispatcher.leaveOut(i,t)}}function ut(t,i){var e=i.cloneEvent(t,t),n=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),n()},e.pointerId=et,e.isPrimary=!0,e.pointerType=nt,e}var pt=function(t){function i(i){var e={mousedown:ot,mousemove:rt,mouseup:st,mouseover:at,mouseout:ht};t.call(this,i,e),this.pointerMap=i.pointerMap,this.lastTouches=[]}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.isEventSimulatedFromTouch_=function(t){for(var i=this.lastTouches,e=t.clientX,n=t.clientY,o=0,r=i.length,s=void 0;o<r&&(s=i[o]);o++){var a=Math.abs(e-s[0]),h=Math.abs(n-s[1]);if(a<=25&&h<=25)return!0}return!1},i.prototype.cancel=function(t){var i=ut(t,this.dispatcher);this.dispatcher.cancel(i,t),this.cleanupMouse()},i.prototype.cleanupMouse=function(){delete this.pointerMap[et.toString()]},i}(it),lt=["","unavailable","touch","pen","mouse"];function ct(t){this.pointerMap[t.pointerId.toString()]=t;var i=this.prepareEvent_(t);this.dispatcher.down(i,t)}function _t(t){var i=this.prepareEvent_(t);this.dispatcher.move(i,t)}function dt(t){var i=this.prepareEvent_(t);this.dispatcher.up(i,t),this.cleanup(t.pointerId)}function ft(t){var i=this.prepareEvent_(t);this.dispatcher.leaveOut(i,t)}function vt(t){var i=this.prepareEvent_(t);this.dispatcher.enterOver(i,t)}function gt(t){var i=this.prepareEvent_(t);this.dispatcher.cancel(i,t),this.cleanup(t.pointerId)}function yt(t){var i=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(i)}function mt(t){var i=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(i)}var Et=function(t){function i(i){var e={MSPointerDown:ct,MSPointerMove:_t,MSPointerUp:dt,MSPointerOut:ft,MSPointerOver:vt,MSPointerCancel:gt,MSGotPointerCapture:mt,MSLostPointerCapture:yt};t.call(this,i,e),this.pointerMap=i.pointerMap}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.prepareEvent_=function(t){var i=t;return"number"==typeof t.pointerType&&((i=this.dispatcher.cloneEvent(t,t)).pointerType=lt[t.pointerType]),i},i.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},i}(it);function Tt(t){this.dispatcher.fireNativeEvent(t)}function Ct(t){this.dispatcher.fireNativeEvent(t)}function Rt(t){this.dispatcher.fireNativeEvent(t)}function It(t){this.dispatcher.fireNativeEvent(t)}function wt(t){this.dispatcher.fireNativeEvent(t)}function Mt(t){this.dispatcher.fireNativeEvent(t)}function Ot(t){this.dispatcher.fireNativeEvent(t)}function bt(t){this.dispatcher.fireNativeEvent(t)}var Pt=function(t){function i(i){var e={pointerdown:Tt,pointermove:Ct,pointerup:Rt,pointerout:It,pointerover:wt,pointercancel:Mt,gotpointercapture:bt,lostpointercapture:Ot};t.call(this,i,e)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(it),At=!1,Lt=function(t){function i(i,e,n){t.call(this,i),this.originalEvent=e;var o=n||{};this.buttons=function(t){var i;if(t.buttons||At)i=t.buttons;else switch(t.which){case 1:i=1;break;case 2:i=4;break;case 3:i=2;break;default:i=0}return i}(o),this.pressure=function(t,i){var e=0;e=t.pressure?t.pressure:i?.5:0;return e}(o,this.buttons),this.bubbles="bubbles"in o&&o.bubbles,this.cancelable="cancelable"in o&&o.cancelable,this.view="view"in o?o.view:null,this.detail="detail"in o?o.detail:null,this.screenX="screenX"in o?o.screenX:0,this.screenY="screenY"in o?o.screenY:0,this.clientX="clientX"in o?o.clientX:0,this.clientY="clientY"in o?o.clientY:0,this.ctrlKey="ctrlKey"in o&&o.ctrlKey,this.altKey="altKey"in o&&o.altKey,this.shiftKey="shiftKey"in o&&o.shiftKey,this.metaKey="metaKey"in o&&o.metaKey,this.button="button"in o?o.button:0,this.relatedTarget="relatedTarget"in o?o.relatedTarget:null,this.pointerId="pointerId"in o?o.pointerId:0,this.width="width"in o?o.width:0,this.height="height"in o?o.height:0,this.tiltX="tiltX"in o?o.tiltX:0,this.tiltY="tiltY"in o?o.tiltY:0,this.pointerType="pointerType"in o?o.pointerType:"",this.hwTimestamp="hwTimestamp"in o?o.hwTimestamp:0,this.isPrimary="isPrimary"in o&&o.isPrimary,e.preventDefault&&(this.preventDefault=function(){e.preventDefault()})}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(b);!function(){try{var t=new MouseEvent("click",{buttons:1});At=1===t.buttons}catch(t){}}();var Dt=Lt;function Ft(t,i){return t>i?1:t<i?-1:0}function Nt(t,i,e){var n,o=t.length;if(t[0]<=i)return 0;if(i<=t[o-1])return o-1;if(e>0){for(n=1;n<o;++n)if(t[n]<i)return n-1}else if(e<0){for(n=1;n<o;++n)if(t[n]<=i)return n}else for(n=1;n<o;++n){if(t[n]==i)return n;if(t[n]<i)return t[n-1]-i<i-t[n]?n-1:n}return o-1}function Gt(t,i,e){for(;i<e;){var n=t[i];t[i]=t[e],t[e]=n,++i,--e}}function Kt(t,i){for(var e=Array.isArray(i)?i:[i],n=e.length,o=0;o<n;o++)t[t.length]=e[o]}function Zt(t,i){var e=t.length;if(e!==i.length)return!1;for(var n=0;n<e;n++)if(t[n]!==i[n])return!1;return!0}function zt(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function Ut(t){this.processTouches_(t,this.moveOverOut_)}function xt(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function jt(t){this.processTouches_(t,this.cancelOut_)}var Vt=function(t){function i(i,e){var n={touchstart:zt,touchmove:Ut,touchend:xt,touchcancel:jt};t.call(this,i,n),this.pointerMap=i.pointerMap,this.mouseSource=e,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_,this.dedupTimeout_=2500}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},i.prototype.setPrimaryTouch_=function(t){var i=Object.keys(this.pointerMap).length;(0===i||1===i&&et.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},i.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},i.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},i.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},i.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},i.prototype.touchToPointer_=function(t,i){var e=this.dispatcher.cloneEvent(t,i);return e.pointerId=i.identifier+2,e.bubbles=!0,e.cancelable=!0,e.detail=this.clickCount_,e.button=0,e.buttons=1,e.width=i.radiusX||0,e.height=i.radiusY||0,e.pressure=i.force||.5,e.isPrimary=this.isPrimaryTouch_(i),e.pointerType="touch",e.clientX=i.clientX,e.clientY=i.clientY,e.screenX=i.screenX,e.screenY=i.screenY,e},i.prototype.processTouches_=function(t,i){var e=Array.prototype.slice.call(t.changedTouches),n=e.length;function o(){t.preventDefault()}for(var r=0;r<n;++r){var s=this.touchToPointer_(t,e[r]);s.preventDefault=o,i.call(this,t,s)}},i.prototype.findTouch_=function(t,i){for(var e=t.length,n=0;n<e;n++){if(t[n].identifier===i)return!0}return!1},i.prototype.vacuumTouches_=function(t){var i=t.touches,e=Object.keys(this.pointerMap),n=e.length;if(n>=i.length){for(var o=[],r=0;r<n;++r){var s=Number(e[r]),a=this.pointerMap[s];s==et||this.findTouch_(i,s-2)||o.push(a.out)}for(var h=0;h<o.length;++h)this.cancelOut_(t,o[h])}},i.prototype.overDown_=function(t,i){this.pointerMap[i.pointerId]={target:i.target,out:i,outTarget:i.target},this.dispatcher.over(i,t),this.dispatcher.enter(i,t),this.dispatcher.down(i,t)},i.prototype.moveOverOut_=function(t,i){var e=i,n=this.pointerMap[e.pointerId];if(n){var o=n.out,r=n.outTarget;this.dispatcher.move(e,t),o&&r!==e.target&&(o.relatedTarget=e.target,e.relatedTarget=r,o.target=r,e.target?(this.dispatcher.leaveOut(o,t),this.dispatcher.enterOver(e,t)):(e.target=r,e.relatedTarget=null,this.cancelOut_(t,e))),n.out=e,n.outTarget=e.target}},i.prototype.upOut_=function(t,i){this.dispatcher.up(i,t),this.dispatcher.out(i,t),this.dispatcher.leave(i,t),this.cleanUpPointer_(i)},i.prototype.cancelOut_=function(t,i){this.dispatcher.cancel(i,t),this.dispatcher.out(i,t),this.dispatcher.leave(i,t),this.cleanUpPointer_(i)},i.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},i.prototype.dedupSynthMouse_=function(t){var i=this.mouseSource.lastTouches,e=t.changedTouches[0];if(this.isPrimaryTouch_(e)){var n=[e.clientX,e.clientY];i.push(n),setTimeout(function(){var t,e,o;e=n,o=(t=i).indexOf(e),o>-1&&t.splice(o,1)},this.dedupTimeout_)}},i}(it),Bt=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],Yt=function(t){function i(i){t.call(this),this.element_=i,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.registerSources=function(){if(Q)this.registerSource("native",new Pt(this));else if($)this.registerSource("ms",new Et(this));else{var t=new pt(this);this.registerSource("mouse",t),q&&this.registerSource("touch",new Vt(this,t))}this.register_()},i.prototype.registerSource=function(t,i){var e=i,n=e.getEvents();n&&(n.forEach(function(t){var i=e.getHandlerForEvent(t);i&&(this.eventMap_[t]=i.bind(e))}.bind(this)),this.eventSourceList_.push(e))},i.prototype.register_=function(){for(var t=this.eventSourceList_.length,i=0;i<t;i++){var e=this.eventSourceList_[i];this.addEvents_(e.getEvents())}},i.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,i=0;i<t;i++){var e=this.eventSourceList_[i];this.removeEvents_(e.getEvents())}},i.prototype.eventHandler_=function(t){var i=t.type,e=this.eventMap_[i];e&&e(t)},i.prototype.addEvents_=function(t){t.forEach(function(t){g(this.element_,t,this.eventHandler_,this)}.bind(this))},i.prototype.removeEvents_=function(t){t.forEach(function(t){m(this.element_,t,this.eventHandler_,this)}.bind(this))},i.prototype.cloneEvent=function(t,i){for(var e={},n=0,o=Bt.length;n<o;n++){var r=Bt[n][0];e[r]=t[r]||i[r]||Bt[n][1]}return e},i.prototype.down=function(t,i){this.fireEvent(S.POINTERDOWN,t,i)},i.prototype.move=function(t,i){this.fireEvent(S.POINTERMOVE,t,i)},i.prototype.up=function(t,i){this.fireEvent(S.POINTERUP,t,i)},i.prototype.enter=function(t,i){t.bubbles=!1,this.fireEvent(S.POINTERENTER,t,i)},i.prototype.leave=function(t,i){t.bubbles=!1,this.fireEvent(S.POINTERLEAVE,t,i)},i.prototype.over=function(t,i){t.bubbles=!0,this.fireEvent(S.POINTEROVER,t,i)},i.prototype.out=function(t,i){t.bubbles=!0,this.fireEvent(S.POINTEROUT,t,i)},i.prototype.cancel=function(t,i){this.fireEvent(S.POINTERCANCEL,t,i)},i.prototype.leaveOut=function(t,i){this.out(t,i),this.contains_(t.target,t.relatedTarget)||this.leave(t,i)},i.prototype.enterOver=function(t,i){this.over(t,i),this.contains_(t.target,t.relatedTarget)||this.enter(t,i)},i.prototype.contains_=function(t,i){return!(!t||!i)&&t.contains(i)},i.prototype.makeEvent=function(t,i,e){return new Dt(t,e,i)},i.prototype.fireEvent=function(t,i,e){var n=this.makeEvent(t,i,e);this.dispatchEvent(n)},i.prototype.fireNativeEvent=function(t){var i=this.makeEvent(t.type,t,t);this.dispatchEvent(i)},i.prototype.wrapMouseEvent=function(t,i){return this.makeEvent(t,ut(i,this),i)},i.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},i}(P),Ht=function(t){function i(i,e){t.call(this),this.map_=i,this.clickTimeoutId_,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e?e*W:W,this.down_=null;var n=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new Yt(n),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=g(this.pointerEventHandler_,S.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=g(this.pointerEventHandler_,S.POINTERMOVE,this.relayEvent_,this)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.emulateClick_=function(t){var i=new k(J.CLICK,this.map_,t);this.dispatchEvent(i),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new k(J.DBLCLICK,this.map_,t),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var i=new k(J.SINGLECLICK,this.map_,t);this.dispatchEvent(i)}.bind(this),250)},i.prototype.updateActivePointers_=function(t){var i=t;i.type==J.POINTERUP||i.type==J.POINTERCANCEL?delete this.trackedTouches_[i.pointerId]:i.type==J.POINTERDOWN&&(this.trackedTouches_[i.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},i.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var i=new k(J.POINTERUP,this.map_,t);this.dispatchEvent(i),i.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(E),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},i.prototype.isMouseActionButton_=function(t){return 0===t.button},i.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var i=new k(J.POINTERDOWN,this.map_,t);this.dispatchEvent(i),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new Yt(document),this.dragListenerKeys_.push(g(this.documentPointerEventHandler_,J.POINTERMOVE,this.handlePointerMove_,this),g(this.documentPointerEventHandler_,J.POINTERUP,this.handlePointerUp_,this),g(this.pointerEventHandler_,J.POINTERCANCEL,this.handlePointerUp_,this)))},i.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var i=new k(J.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(i)}t.preventDefault()},i.prototype.relayEvent_=function(t){var i=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new k(t.type,this.map_,t,i))},i.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},i.prototype.disposeInternal=function(){this.relayedListenerKey_&&(E(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(E(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(E),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),t.prototype.disposeInternal.call(this)},i}(P),Wt="postrender",Xt="movestart",qt="moveend",Qt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},$t="postcompose",Jt="precompose",kt="render",St="rendercomplete",ti={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5};function ii(t,i){if(!t)throw new a(i)}var ei=function(t,i){this.priorityFunction_=t,this.keyFunction_=i,this.elements_=[],this.priorities_=[],this.queuedElements_={}};ei.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,l(this.queuedElements_)},ei.prototype.dequeue=function(){var t=this.elements_,i=this.priorities_,e=t[0];1==t.length?(t.length=0,i.length=0):(t[0]=t.pop(),i[0]=i.pop(),this.siftUp_(0));var n=this.keyFunction_(e);return delete this.queuedElements_[n],e},ei.prototype.enqueue=function(t){ii(!(this.keyFunction_(t)in this.queuedElements_),31);var i=this.priorityFunction_(t);return i!=1/0&&(this.elements_.push(t),this.priorities_.push(i),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},ei.prototype.getCount=function(){return this.elements_.length},ei.prototype.getLeftChildIndex_=function(t){return 2*t+1},ei.prototype.getRightChildIndex_=function(t){return 2*t+2},ei.prototype.getParentIndex_=function(t){return t-1>>1},ei.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},ei.prototype.isEmpty=function(){return 0===this.elements_.length},ei.prototype.isKeyQueued=function(t){return t in this.queuedElements_},ei.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},ei.prototype.siftUp_=function(t){for(var i=this.elements_,e=this.priorities_,n=i.length,o=i[t],r=e[t],s=t;t<n>>1;){var a=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),u=h<n&&e[h]<e[a]?h:a;i[t]=i[u],e[t]=e[u],t=u}i[t]=o,e[t]=r,this.siftDown_(s,t)},ei.prototype.siftDown_=function(t,i){for(var e=this.elements_,n=this.priorities_,o=e[i],r=n[i];i>t;){var s=this.getParentIndex_(i);if(!(n[s]>r))break;e[i]=e[s],n[i]=n[s],i=s}e[i]=o,n[i]=r},ei.prototype.reprioritize=function(){var t,i,e,n=this.priorityFunction_,o=this.elements_,r=this.priorities_,s=0,a=o.length;for(i=0;i<a;++i)(e=n(t=o[i]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(r[s]=e,o[s++]=t);o.length=s,r.length=s,this.heapify_()};var ni=function(t){function i(i,e){t.call(this,function(t){return i.apply(null,t)},function(t){return t[0].getKey()}),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.enqueue=function(i){var e=t.prototype.enqueue.call(this,i);e&&g(i[0],A.CHANGE,this.handleTileChange,this);return e},i.prototype.getTilesLoading=function(){return this.tilesLoading_},i.prototype.handleTileChange=function(t){var i=t.target,e=i.getState();if(e===ti.LOADED||e===ti.ERROR||e===ti.EMPTY||e===ti.ABORT){m(i,A.CHANGE,this.handleTileChange,this);var n=i.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},i.prototype.loadMoreTiles=function(t,i){for(var e,n,o,r=0,s=!1;this.tilesLoading_<t&&r<i&&this.getCount()>0;)o=(n=this.dequeue()[0]).getKey(),(e=n.getState())===ti.ABORT?s=!0:e!==ti.IDLE||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++r,n.load());0===r&&s&&this.tileChangeCallback_()},i}(ei),oi=42,ri=256;function si(t,i,e){return Math.min(Math.max(t,i),e)}var ai="cosh"in Math?Math.cosh:function(t){var i=Math.exp(t);return(i+1/i)/2};function hi(t,i,e,n,o,r){var s=o-e,a=r-n;if(0!==s||0!==a){var h=((t-e)*s+(i-n)*a)/(s*s+a*a);h>1?(e=o,n=r):h>0&&(e+=s*h,n+=a*h)}return ui(t,i,e,n)}function ui(t,i,e,n){var o=e-t,r=n-i;return o*o+r*r}function pi(t){return t*Math.PI/180}function li(t,i){var e=t%i;return e*i<0?e+i:e}function ci(t,i,e){return t+e*(i-t)}function _i(t){return function(i){return i?[si(i[0],t[0],t[2]),si(i[1],t[1],t[3])]:void 0}}function di(t){return t}function fi(t){return function(i,e,n){if(void 0!==i){var o=Nt(t,i,n);o=si(o+e,0,t.length-1);var r=Math.floor(o);if(o!=r&&r<t.length-1){var s=t[r]/t[r+1];return t[r]/Math.pow(s,o-r)}return t[r]}}}function vi(t,i,e){return function(n,o,r){if(void 0!==n){var s=-r/2+.5,a=Math.floor(Math.log(i/n)/Math.log(t)+s),h=Math.max(a+o,0);return void 0!==e&&(h=Math.min(h,e)),i/Math.pow(t,h)}}}function gi(t,i){return void 0!==t?0:void 0}function yi(t,i){return void 0!==t?t+i:void 0}function mi(t){var i=2*Math.PI/t;return function(t,e){return void 0!==t?t=Math.floor((t+e)/i+.5)*i:void 0}}function Ei(t){var i=t||pi(5);return function(t,e){return void 0!==t?Math.abs(t+e)<=i?0:t+e:void 0}}var Ti=0,Ci=1,Ri="center",Ii="resolution",wi="rotation";function Mi(t,i){return t[0]+=i[0],t[1]+=i[1],t}function Oi(t,i){for(var e=!0,n=t.length-1;n>=0;--n)if(t[n]!=i[n]){e=!1;break}return e}function bi(t,i){var e=Math.cos(i),n=Math.sin(i),o=t[0]*e-t[1]*n,r=t[1]*e+t[0]*n;return t[0]=o,t[1]=r,t}function Pi(t,i){return t[0]*=i,t[1]*=i,t}function Ai(t){return Math.pow(t,3)}function Li(t){return 1-Ai(1-t)}function Di(t){return 3*t*t-2*t*t*t}function Fi(t){return t}var Ni={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Gi={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Ki(t){for(var i=Yi(),e=0,n=t.length;e<n;++e)Qi(i,t[e]);return i}function Zi(t,i,e){return e?(e[0]=t[0]-i,e[1]=t[1]-i,e[2]=t[2]+i,e[3]=t[3]+i,e):[t[0]-i,t[1]-i,t[2]+i,t[3]+i]}function zi(t,i){return i?(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i):t.slice()}function Ui(t,i,e){var n,o;return(n=i<t[0]?t[0]-i:t[2]<i?i-t[2]:0)*n+(o=e<t[1]?t[1]-e:t[3]<e?e-t[3]:0)*o}function xi(t,i){return Vi(t,i[0],i[1])}function ji(t,i){return t[0]<=i[0]&&i[2]<=t[2]&&t[1]<=i[1]&&i[3]<=t[3]}function Vi(t,i,e){return t[0]<=i&&i<=t[2]&&t[1]<=e&&e<=t[3]}function Bi(t,i){var e=t[0],n=t[1],o=t[2],r=t[3],s=i[0],a=i[1],h=Gi.UNKNOWN;return s<e?h|=Gi.LEFT:s>o&&(h|=Gi.RIGHT),a<n?h|=Gi.BELOW:a>r&&(h|=Gi.ABOVE),h===Gi.UNKNOWN&&(h=Gi.INTERSECTING),h}function Yi(){return[1/0,1/0,-1/0,-1/0]}function Hi(t,i,e,n,o){return o?(o[0]=t,o[1]=i,o[2]=e,o[3]=n,o):[t,i,e,n]}function Wi(t){return Hi(1/0,1/0,-1/0,-1/0,t)}function Xi(t,i){return t[0]==i[0]&&t[2]==i[2]&&t[1]==i[1]&&t[3]==i[3]}function qi(t,i){return i[0]<t[0]&&(t[0]=i[0]),i[2]>t[2]&&(t[2]=i[2]),i[1]<t[1]&&(t[1]=i[1]),i[3]>t[3]&&(t[3]=i[3]),t}function Qi(t,i){i[0]<t[0]&&(t[0]=i[0]),i[0]>t[2]&&(t[2]=i[0]),i[1]<t[1]&&(t[1]=i[1]),i[1]>t[3]&&(t[3]=i[1])}function $i(t,i){for(var e=0,n=i.length;e<n;++e)Qi(t,i[e]);return t}function Ji(t,i,e,n,o){for(;e<n;e+=o)ki(t,i[e],i[e+1]);return t}function ki(t,i,e){t[0]=Math.min(t[0],i),t[1]=Math.min(t[1],e),t[2]=Math.max(t[2],i),t[3]=Math.max(t[3],e)}function Si(t){var i=0;return le(t)||(i=ue(t)*re(t)),i}function te(t){return[t[0],t[1]]}function ie(t){return[t[2],t[1]]}function ee(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function ne(t,i){var e;return i===Ni.BOTTOM_LEFT?e=te(t):i===Ni.BOTTOM_RIGHT?e=ie(t):i===Ni.TOP_LEFT?e=ae(t):i===Ni.TOP_RIGHT?e=he(t):ii(!1,13),e}function oe(t,i,e,n,o){var r=i*n[0]/2,s=i*n[1]/2,a=Math.cos(e),h=Math.sin(e),u=r*a,p=r*h,l=s*a,c=s*h,_=t[0],d=t[1],f=_-u+c,v=_-u-c,g=_+u-c,y=_+u+c,m=d-p-l,E=d-p+l,T=d+p+l,C=d+p-l;return Hi(Math.min(f,v,g,y),Math.min(m,E,T,C),Math.max(f,v,g,y),Math.max(m,E,T,C),o)}function re(t){return t[3]-t[1]}function se(t,i,e){var n=e||[1/0,1/0,-1/0,-1/0];return pe(t,i)?(t[0]>i[0]?n[0]=t[0]:n[0]=i[0],t[1]>i[1]?n[1]=t[1]:n[1]=i[1],t[2]<i[2]?n[2]=t[2]:n[2]=i[2],t[3]<i[3]?n[3]=t[3]:n[3]=i[3]):Wi(n),n}function ae(t){return[t[0],t[3]]}function he(t){return[t[2],t[3]]}function ue(t){return t[2]-t[0]}function pe(t,i){return t[0]<=i[2]&&t[2]>=i[0]&&t[1]<=i[3]&&t[3]>=i[1]}function le(t){return t[2]<t[0]||t[3]<t[1]}var ce={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},_e={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};function de(t,i,e,n,o,r){for(var s=r||[],a=0,h=i;h<e;h+=n){var u=t[h],p=t[h+1];s[a++]=o[0]*u+o[2]*p+o[4],s[a++]=o[1]*u+o[3]*p+o[5]}return r&&s.length!=a&&(s.length=a),s}
/**
 * @license
 * Latitude/longitude spherical geodesy formulae taken from
 * http://www.movable-type.co.uk/scripts/latlong.html
 * Licensed under CC-BY-3.0.
 */
var fe=6371008.8;function ve(t,i,e){var n=e||fe,o=pi(t[1]),r=pi(i[1]),s=(r-o)/2,a=pi(i[0]-t[0])/2,h=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(o)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}var ge={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},ye={};ye[ge.DEGREES]=2*Math.PI*6370997/360,ye[ge.FEET]=.3048,ye[ge.METERS]=1,ye[ge.USFEET]=1200/3937;var me=ge,Ee=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};Ee.prototype.canWrapX=function(){return this.canWrapX_},Ee.prototype.getCode=function(){return this.code_},Ee.prototype.getExtent=function(){return this.extent_},Ee.prototype.getUnits=function(){return this.units_},Ee.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||ye[this.units_]},Ee.prototype.getWorldExtent=function(){return this.worldExtent_},Ee.prototype.getAxisOrientation=function(){return this.axisOrientation_},Ee.prototype.isGlobal=function(){return this.global_},Ee.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},Ee.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},Ee.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},Ee.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},Ee.prototype.setWorldExtent=function(t){this.worldExtent_=t},Ee.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},Ee.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var Te=Ee,Ce=6378137,Re=Math.PI*Ce,Ie=[-Re,-Re,Re,Re],we=[-180,-85,180,85],Me=function(t){function i(i){t.call(this,{code:i,units:me.METERS,extent:Ie,global:!0,worldExtent:we,getPointResolution:function(t,i){return t/ai(i[1]/Ce)}})}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(Te),Oe=[new Me("EPSG:3857"),new Me("EPSG:102100"),new Me("EPSG:102113"),new Me("EPSG:900913"),new Me("urn:ogc:def:crs:EPSG:6.18:3:3857"),new Me("urn:ogc:def:crs:EPSG::3857"),new Me("http://www.opengis.net/gml/srs/epsg.xml#3857")];function be(t,i,e){var n=t.length,o=e>1?e:2,r=i;void 0===r&&(r=o>2?t.slice():new Array(n));for(var s=Re,a=0;a<n;a+=o){r[a]=s*t[a]/180;var h=Ce*Math.log(Math.tan(Math.PI*(t[a+1]+90)/360));h>s?h=s:h<-s&&(h=-s),r[a+1]=h}return r}function Pe(t,i,e){var n=t.length,o=e>1?e:2,r=i;void 0===r&&(r=o>2?t.slice():new Array(n));for(var s=0;s<n;s+=o)r[s]=180*t[s]/Re,r[s+1]=360*Math.atan(Math.exp(t[s+1]/Ce))/Math.PI-90;return r}var Ae=[-180,-90,180,90],Le=6378137*Math.PI/180,De=function(t){function i(i,e){t.call(this,{code:i,units:me.DEGREES,extent:Ae,axisOrientation:e,global:!0,metersPerUnit:Le,worldExtent:Ae})}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(Te),Fe=[new De("CRS:84"),new De("EPSG:4326","neu"),new De("urn:ogc:def:crs:EPSG::4326","neu"),new De("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new De("urn:ogc:def:crs:OGC:1.3:CRS84"),new De("urn:ogc:def:crs:OGC:2:84"),new De("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new De("urn:x-ogc:def:crs:EPSG:4326","neu")],Ne={};var Ge,Ke,Ze,ze={};function Ue(t,i,e){var n=t.getCode(),o=i.getCode();n in ze||(ze[n]={}),ze[n][o]=e}function xe(t,i,e){var n;if(void 0!==i){for(var o=0,r=t.length;o<r;++o)i[o]=t[o];n=i}else n=t.slice();return n}function je(t,i,e){if(void 0!==i&&t!==i){for(var n=0,o=t.length;n<o;++n)i[n]=t[n];t=i}return t}function Ve(t){!function(t,i){Ne[t]=i}(t.getCode(),t),Ue(t,t,xe)}function Be(t){return"string"==typeof t?Ne[t]||null:t||null}function Ye(t,i,e,n){var o,r=(t=Be(t)).getPointResolutionFunc();if(r)o=r(i,e);else if(t.getUnits()==me.DEGREES&&!n||n==me.DEGREES)o=i;else{var s=qe(t,Be("EPSG:4326")),a=[e[0]-i/2,e[1],e[0]+i/2,e[1],e[0],e[1]-i/2,e[0],e[1]+i/2];o=(ve((a=s(a,a,2)).slice(0,2),a.slice(2,4))+ve(a.slice(4,6),a.slice(6,8)))/2;var h=n?ye[n]:t.getMetersPerUnit();void 0!==h&&(o/=h)}return o}function He(t){!function(t){t.forEach(Ve)}(t),t.forEach(function(i){t.forEach(function(t){i!==t&&Ue(i,t,xe)})})}function We(t,i){return t?"string"==typeof t?Be(t):t:Be(i)}function Xe(t,i){if(t===i)return!0;var e=t.getUnits()===i.getUnits();return t.getCode()===i.getCode()?e:qe(t,i)===xe&&e}function qe(t,i){var e=function(t,i){var e;return t in ze&&i in ze[t]&&(e=ze[t][i]),e}(t.getCode(),i.getCode());return e||(e=je),e}function Qe(t,i){return qe(Be(t),Be(i))}function $e(t,i,e){return Qe(i,e)(t,void 0,t.length)}He(Oe),He(Fe),Ge=Oe,Ke=be,Ze=Pe,Fe.forEach(function(t){Ge.forEach(function(i){Ue(t,i,Ke),Ue(i,t,Ze)})});var Je=new Array(6);function ke(t){return tn(t,1,0,0,1,0,0)}function Se(t,i){var e=t[0],n=t[1],o=t[2],r=t[3],s=t[4],a=t[5],h=i[0],u=i[1],p=i[2],l=i[3],c=i[4],_=i[5];return t[0]=e*h+o*u,t[1]=n*h+r*u,t[2]=e*p+o*l,t[3]=n*p+r*l,t[4]=e*c+o*_+s,t[5]=n*c+r*_+a,t}function tn(t,i,e,n,o,r,s){return t[0]=i,t[1]=e,t[2]=n,t[3]=o,t[4]=r,t[5]=s,t}function en(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t}function nn(t,i){var e=i[0],n=i[1];return i[0]=t[0]*e+t[2]*n+t[4],i[1]=t[1]*e+t[3]*n+t[5],i}function on(t,i,e){return Se(t,tn(Je,i,0,0,e,0,0))}function rn(t,i,e){return Se(t,tn(Je,1,0,0,1,i,e))}function sn(t,i,e,n,o,r,s,a){var h=Math.sin(r),u=Math.cos(r);return t[0]=n*u,t[1]=o*h,t[2]=-n*h,t[3]=o*u,t[4]=s*n*u-a*n*h+i,t[5]=s*o*h+a*o*u+e,t}var an=[1,0,0,1,0,0];function hn(t){var i;return t==_e.XY?i=2:t==_e.XYZ||t==_e.XYM?i=3:t==_e.XYZM&&(i=4),i}var un=function(t){function i(){t.call(this),this.layout=_e.XY,this.stride=2,this.flatCoordinates=null}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.computeExtent=function(t){return i=this.flatCoordinates,e=0,n=this.flatCoordinates.length,o=this.stride,Ji(Wi(t),i,e,n,o);var i,e,n,o},i.prototype.getCoordinates=function(){return n()},i.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},i.prototype.getFlatCoordinates=function(){return this.flatCoordinates},i.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},i.prototype.getLayout=function(){return this.layout},i.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(l(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var i=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(i))return this.simplifiedGeometryCache[i];var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[i]=e,e):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},i.prototype.getSimplifiedGeometryInternal=function(t){return this},i.prototype.getStride=function(){return this.stride},i.prototype.setFlatCoordinates=function(t,i){this.stride=hn(t),this.layout=t,this.flatCoordinates=i},i.prototype.setCoordinates=function(t,i){n()},i.prototype.setLayout=function(t,i,e){var n;if(t)n=hn(t);else{for(var o=0;o<e;++o){if(0===i.length)return this.layout=_e.XY,void(this.stride=2);i=i[0]}t=function(t){var i;2==t?i=_e.XY:3==t?i=_e.XYZ:4==t&&(i=_e.XYZM);return i}(n=i.length)}this.layout=t,this.stride=n},i.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},i.prototype.rotate=function(t,i){var e=this.getFlatCoordinates();if(e){var n=this.getStride();!function(t,i,e,n,o,r,s){for(var a=s||[],h=Math.cos(o),u=Math.sin(o),p=r[0],l=r[1],c=0,_=i;_<e;_+=n){var d=t[_]-p,f=t[_+1]-l;a[c++]=p+d*h-f*u,a[c++]=l+d*u+f*h;for(var v=_+2;v<_+n;++v)a[c++]=t[v]}s&&a.length!=c&&(a.length=c)}(e,0,e.length,n,t,i,e),this.changed()}},i.prototype.scale=function(t,i,e){var n=i;void 0===n&&(n=t);var o=e;o||(o=ee(this.getExtent()));var r=this.getFlatCoordinates();if(r){var s=this.getStride();!function(t,i,e,n,o,r,s,a){for(var h=a||[],u=s[0],p=s[1],l=0,c=i;c<e;c+=n){var _=t[c]-u,d=t[c+1]-p;h[l++]=u+o*_,h[l++]=p+r*d;for(var f=c+2;f<c+n;++f)h[l++]=t[f]}a&&h.length!=l&&(h.length=l)}(r,0,r.length,s,t,n,o,r),this.changed()}},i.prototype.translate=function(t,i){var e=this.getFlatCoordinates();if(e){var n=this.getStride();!function(t,i,e,n,o,r,s){for(var a=s||[],h=0,u=i;u<e;u+=n){a[h++]=t[u]+o,a[h++]=t[u+1]+r;for(var p=u+2;p<u+n;++p)a[h++]=t[p]}s&&a.length!=h&&(a.length=h)}(e,0,e.length,n,t,i,e),this.changed()}},i}(function(t){function i(){t.call(this),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.clone=function(){return n()},i.prototype.closestPointXY=function(t,i,e,o){return n()},i.prototype.containsXY=function(t,i){return!1},i.prototype.getClosestPoint=function(t,i){var e=i||[NaN,NaN];return this.closestPointXY(t[0],t[1],e,1/0),e},i.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},i.prototype.computeExtent=function(t){return n()},i.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,i){return i?(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i):t}(this.extent_,t)},i.prototype.rotate=function(t,i){n()},i.prototype.scale=function(t,i,e){n()},i.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},i.prototype.getSimplifiedGeometry=function(t){return n()},i.prototype.getType=function(){return n()},i.prototype.applyTransform=function(t){n()},i.prototype.intersectsExtent=function(t){return n()},i.prototype.translate=function(t,i){n()},i.prototype.transform=function(t,i){var e=Be(t),n=e.getUnits()==me.TILE_PIXELS?function(t,n,o){var r=e.getExtent(),s=e.getWorldExtent(),a=re(s)/re(r);return sn(an,s[0],s[3],a,-a,0,0,0),de(t,0,t.length,o,an,n),Qe(e,i)(t,n,o)}:Qe(e,i);return this.applyTransform(n),this},i}(G));function pn(t,i,e,n){for(var o=0,r=t[e-n],s=t[e-n+1];i<e;i+=n){var a=t[i],h=t[i+1];o+=s*a-r*h,r=a,s=h}return o/2}function ln(t,i,e,n){for(var o=0,r=0,s=e.length;r<s;++r){var a=e[r];o+=pn(t,i,a,n),i=a}return o}function cn(t,i,e,n,o,r,s){var a,h=t[i],u=t[i+1],p=t[e]-h,l=t[e+1]-u;if(0===p&&0===l)a=i;else{var c=((o-h)*p+(r-u)*l)/(p*p+l*l);if(c>1)a=e;else{if(c>0){for(var _=0;_<n;++_)s[_]=ci(t[i+_],t[e+_],c);return void(s.length=n)}a=i}}for(var d=0;d<n;++d)s[d]=t[a+d];s.length=n}function _n(t,i,e,n,o){var r=t[i],s=t[i+1];for(i+=n;i<e;i+=n){var a=t[i],h=t[i+1],u=ui(r,s,a,h);u>o&&(o=u),r=a,s=h}return o}function dn(t,i,e,n,o){for(var r=0,s=e.length;r<s;++r){var a=e[r];o=_n(t,i,a,n,o),i=a}return o}function fn(t,i,e,n,o,r,s,a,h,u,p){if(i==e)return u;var l,c;if(0===o){if((c=ui(s,a,t[i],t[i+1]))<u){for(l=0;l<n;++l)h[l]=t[i+l];return h.length=n,c}return u}for(var _=p||[NaN,NaN],d=i+n;d<e;)if(cn(t,d-n,d,n,s,a,_),(c=ui(s,a,_[0],_[1]))<u){for(u=c,l=0;l<n;++l)h[l]=_[l];h.length=n,d+=n}else d+=n*Math.max((Math.sqrt(c)-Math.sqrt(u))/o|0,1);if(r&&(cn(t,e-n,i,n,s,a,_),(c=ui(s,a,_[0],_[1]))<u)){for(u=c,l=0;l<n;++l)h[l]=_[l];h.length=n}return u}function vn(t,i,e,n,o,r,s,a,h,u,p){for(var l=p||[NaN,NaN],c=0,_=e.length;c<_;++c){var d=e[c];u=fn(t,i,d,n,o,r,s,a,h,u,l),i=d}return u}function gn(t,i,e,n){for(var o=0,r=e.length;o<r;++o)for(var s=e[o],a=0;a<n;++a)t[i++]=s[a];return i}function yn(t,i,e,n,o){for(var r=o||[],s=0,a=0,h=e.length;a<h;++a){var u=gn(t,i,e[a],n);r[s++]=u,i=u}return r.length=s,r}function mn(t,i,e,n,o){for(var r=void 0!==o?o:[],s=0,a=i;a<e;a+=n)r[s++]=t.slice(a,a+n);return r.length=s,r}function En(t,i,e,n,o){for(var r=void 0!==o?o:[],s=0,a=0,h=e.length;a<h;++a){var u=e[a];r[s++]=mn(t,i,u,n,r[s]),i=u}return r.length=s,r}function Tn(t,i,e,n,o){for(var r=void 0!==o?o:[],s=0,a=0,h=e.length;a<h;++a){var u=e[a];r[s++]=En(t,i,u,n,r[s]),i=u[u.length-1]}return r.length=s,r}function Cn(t,i,e,n,o,r,s){var a=(e-i)/n;if(a<3){for(;i<e;i+=n)r[s++]=t[i],r[s++]=t[i+1];return s}var h=new Array(a);h[0]=1,h[a-1]=1;for(var u=[i,e-n],p=0;u.length>0;){for(var l=u.pop(),c=u.pop(),_=0,d=t[c],f=t[c+1],v=t[l],g=t[l+1],y=c+n;y<l;y+=n){var m=hi(t[y],t[y+1],d,f,v,g);m>_&&(p=y,_=m)}_>o&&(h[(p-i)/n]=1,c+n<p&&u.push(c,p),p+n<l&&u.push(p,l))}for(var E=0;E<a;++E)h[E]&&(r[s++]=t[i+E*n],r[s++]=t[i+E*n+1]);return s}function Rn(t,i){return i*Math.round(t/i)}function In(t,i,e,n,o,r,s){if(i==e)return s;var a,h,u=Rn(t[i],o),p=Rn(t[i+1],o);i+=n,r[s++]=u,r[s++]=p;do{if(a=Rn(t[i],o),h=Rn(t[i+1],o),(i+=n)==e)return r[s++]=a,r[s++]=h,s}while(a==u&&h==p);for(;i<e;){var l=Rn(t[i],o),c=Rn(t[i+1],o);if(i+=n,l!=a||c!=h){var _=a-u,d=h-p,f=l-u,v=c-p;_*v==d*f&&(_<0&&f<_||_==f||_>0&&f>_)&&(d<0&&v<d||d==v||d>0&&v>d)?(a=l,h=c):(r[s++]=a,r[s++]=h,u=a,p=h,a=l,h=c)}}return r[s++]=a,r[s++]=h,s}function wn(t,i,e,n,o,r,s,a){for(var h=0,u=e.length;h<u;++h){var p=e[h];s=In(t,i,p,n,o,r,s),a.push(s),i=p}return s}var Mn=function(t){function i(i,e){t.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(i[0])?this.setCoordinates(i,e):this.setFlatCoordinates(e,i)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.clone=function(){return new i(this.flatCoordinates.slice(),this.layout)},i.prototype.closestPointXY=function(t,i,e,n){return n<Ui(this.getExtent(),t,i)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_n(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),fn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,i,e,n))},i.prototype.getArea=function(){return pn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},i.prototype.getCoordinates=function(){return mn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},i.prototype.getSimplifiedGeometryInternal=function(t){var e=[];return e.length=Cn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new i(e,_e.XY)},i.prototype.getType=function(){return ce.LINEAR_RING},i.prototype.intersectsExtent=function(t){return!1},i.prototype.setCoordinates=function(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=gn(this.flatCoordinates,0,t,this.stride),this.changed()},i}(un),On=function(t){function i(i,e){t.call(this),this.setCoordinates(i,e)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.clone=function(){return new i(this.flatCoordinates.slice(),this.layout)},i.prototype.closestPointXY=function(t,i,e,n){var o=this.flatCoordinates,r=ui(t,i,o[0],o[1]);if(r<n){for(var s=this.stride,a=0;a<s;++a)e[a]=o[a];return e.length=s,r}return n},i.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},i.prototype.computeExtent=function(t){return i=this.flatCoordinates,e=t,n=i[0],o=i[1],Hi(n,o,n,o,e);var i,e,n,o},i.prototype.getType=function(){return ce.POINT},i.prototype.intersectsExtent=function(t){return Vi(t,this.flatCoordinates[0],this.flatCoordinates[1])},i.prototype.setCoordinates=function(t,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,i,e,n){for(var o=0,r=e.length;o<r;++o)t[i++]=e[o];return i}(this.flatCoordinates,0,t,this.stride),this.changed()},i}(un);function bn(t,i,e,n,o){return!function(t,i,e){var n;return(n=i.call(e,te(t)))?n:(n=i.call(e,ie(t)))?n:(n=i.call(e,he(t)))?n:(n=i.call(e,ae(t)))||!1}(o,function(o){return!Pn(t,i,e,n,o[0],o[1])})}function Pn(t,i,e,n,o,r){for(var s=0,a=t[e-n],h=t[e-n+1];i<e;i+=n){var u=t[i],p=t[i+1];h<=r?p>r&&(u-a)*(r-h)-(o-a)*(p-h)>0&&s++:p<=r&&(u-a)*(r-h)-(o-a)*(p-h)<0&&s--,a=u,h=p}return 0!==s}function An(t,i,e,n,o,r){if(0===e.length)return!1;if(!Pn(t,i,e[0],n,o,r))return!1;for(var s=1,a=e.length;s<a;++s)if(Pn(t,e[s-1],e[s],n,o,r))return!1;return!0}function Ln(t,i,e,n,o,r,s){for(var a,h,u,p,l,c,_,d=o[r+1],f=[],v=0,g=e.length;v<g;++v){var y=e[v];for(p=t[y-n],c=t[y-n+1],a=i;a<y;a+=n)l=t[a],_=t[a+1],(d<=c&&_<=d||c<=d&&d<=_)&&(u=(d-c)/(_-c)*(l-p)+p,f.push(u)),p=l,c=_}var m=NaN,E=-1/0;for(f.sort(Ft),p=f[0],a=1,h=f.length;a<h;++a){l=f[a];var T=Math.abs(l-p);T>E&&An(t,i,e,n,u=(p+l)/2,d)&&(m=u,E=T),p=l}return isNaN(m)&&(m=o[r]),s?(s.push(m,d,E),s):[m,d,E]}function Dn(t,i,e,n,o){var r=Ji([1/0,1/0,-1/0,-1/0],t,i,e,n);return!!pe(o,r)&&(!!ji(o,r)||(r[0]>=o[0]&&r[2]<=o[2]||(r[1]>=o[1]&&r[3]<=o[3]||function(t,i,e,n,o,r){for(var s,a=[t[i],t[i+1]],h=[];i+n<e;i+=n){if(h[0]=t[i+n],h[1]=t[i+n+1],s=o.call(r,a,h))return s;a[0]=h[0],a[1]=h[1]}return!1}(t,i,e,n,function(t,i){return function(t,i,e){var n=!1,o=Bi(t,i),r=Bi(t,e);if(o===Gi.INTERSECTING||r===Gi.INTERSECTING)n=!0;else{var s,a,h=t[0],u=t[1],p=t[2],l=t[3],c=i[0],_=i[1],d=e[0],f=e[1],v=(f-_)/(d-c);r&Gi.ABOVE&&!(o&Gi.ABOVE)&&(n=(s=d-(f-l)/v)>=h&&s<=p),n||!(r&Gi.RIGHT)||o&Gi.RIGHT||(n=(a=f-(d-p)*v)>=u&&a<=l),n||!(r&Gi.BELOW)||o&Gi.BELOW||(n=(s=d-(f-u)/v)>=h&&s<=p),n||!(r&Gi.LEFT)||o&Gi.LEFT||(n=(a=f-(d-h)*v)>=u&&a<=l)}return n}(o,t,i)}))))}function Fn(t,i,e,n,o){if(!function(t,i,e,n,o){return!!(Dn(t,i,e,n,o)||Pn(t,i,e,n,o[0],o[1])||Pn(t,i,e,n,o[0],o[3])||Pn(t,i,e,n,o[2],o[1])||Pn(t,i,e,n,o[2],o[3]))}(t,i,e[0],n,o))return!1;if(1===e.length)return!0;for(var r=1,s=e.length;r<s;++r)if(bn(t,e[r-1],e[r],n,o)&&!Dn(t,e[r-1],e[r],n,o))return!1;return!0}function Nn(t,i,e,n){for(;i<e-n;){for(var o=0;o<n;++o){var r=t[i+o];t[i+o]=t[e-n+o],t[e-n+o]=r}i+=n,e-=n}}function Gn(t,i,e,n){for(var o=0,r=t[e-n],s=t[e-n+1];i<e;i+=n){var a=t[i],h=t[i+1];o+=(a-r)*(h+s),r=a,s=h}return o>0}function Kn(t,i,e,n,o){for(var r=void 0!==o&&o,s=0,a=e.length;s<a;++s){var h=e[s],u=Gn(t,i,h,n);if(0===s){if(r&&u||!r&&!u)return!1}else if(r&&!u||!r&&u)return!1;i=h}return!0}function Zn(t,i,e,n,o){for(var r=void 0!==o&&o,s=0,a=e.length;s<a;++s){var h=e[s],u=Gn(t,i,h,n);(0===s?r&&u||!r&&!u:r&&!u||!r&&u)&&Nn(t,i,h,n),i=h}return i}var zn=function(t){function i(i,e,n){t.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,i),this.ends_=n):this.setCoordinates(i,e)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.appendLinearRing=function(t){this.flatCoordinates?Kt(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},i.prototype.clone=function(){return new i(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},i.prototype.closestPointXY=function(t,i,e,n){return n<Ui(this.getExtent(),t,i)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(dn(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),vn(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,e,n))},i.prototype.containsXY=function(t,i){return An(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,i)},i.prototype.getArea=function(){return ln(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},i.prototype.getCoordinates=function(t){var i;return void 0!==t?Zn(i=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):i=this.flatCoordinates,En(i,0,this.ends_,this.stride)},i.prototype.getEnds=function(){return this.ends_},i.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=ee(this.getExtent());this.flatInteriorPoint_=Ln(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},i.prototype.getInteriorPoint=function(){return new On(this.getFlatInteriorPoint(),_e.XYM)},i.prototype.getLinearRingCount=function(){return this.ends_.length},i.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Mn(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},i.prototype.getLinearRings=function(){for(var t=this.layout,i=this.flatCoordinates,e=this.ends_,n=[],o=0,r=0,s=e.length;r<s;++r){var a=e[r],h=new Mn(i.slice(o,a),t);n.push(h),o=a}return n},i.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Kn(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Zn(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},i.prototype.getSimplifiedGeometryInternal=function(t){var e=[],n=[];return e.length=wn(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new i(e,_e.XY,n)},i.prototype.getType=function(){return ce.POLYGON},i.prototype.intersectsExtent=function(t){return Fn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},i.prototype.setCoordinates=function(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var e=yn(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===e.length?0:e[e.length-1],this.changed()},i}(un),Un=zn;function xn(t){var i=t[0],e=t[1],n=t[2],o=t[3],r=[i,e,i,o,n,o,n,e,i,e];return new zn(r,_e.XY,[r.length])}var jn=0;function Vn(t,i){setTimeout(function(){t(i)},0)}function Bn(t){return!(t.sourceCenter&&t.targetCenter&&!Oi(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var Yn=function(t){function i(i){t.call(this);var e=p({},i);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=We(e.projection,"EPSG:3857"),this.applyOptions_(e)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.applyOptions_=function(t){var i={};i[Ri]=void 0!==t.center?t.center:null;var e=function(t){var i,e,n,o=void 0!==t.minZoom?t.minZoom:jn,r=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var a=t.resolutions;e=a[o],n=void 0!==a[r]?a[r]:a[a.length-1],i=fi(a)}else{var h=We(t.projection,"EPSG:3857"),u=h.getExtent(),p=u?Math.max(ue(u),re(u)):360*ye[me.DEGREES]/h.getMetersPerUnit(),l=p/ri/Math.pow(2,jn),c=l/Math.pow(2,28-jn);void 0!==(e=t.maxResolution)?o=0:e=l/Math.pow(s,o),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?e/Math.pow(s,r):l/Math.pow(s,r):c),r=o+Math.floor(Math.log(e/n)/Math.log(s)),n=e/Math.pow(s,r-o),i=vi(s,e,r-o)}return{constraint:i,maxResolution:e,minResolution:n,minZoom:o,zoomFactor:s}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var n=function(t){return void 0!==t.extent?_i(t.extent):di}(t),o=e.constraint,r=function(t){if(void 0===t.enableRotation||t.enableRotation){var i=t.constrainRotation;return void 0===i||!0===i?Ei():!1===i?yi:"number"==typeof i?mi(i):yi}return gi}(t);this.constraints_={center:n,resolution:o,rotation:r},void 0!==t.resolution?i[Ii]=t.resolution:void 0!==t.zoom&&(i[Ii]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(i[Ii]=si(Number(this.getResolution()||i[Ii]),this.minResolution_,this.maxResolution_))),i[wi]=void 0!==t.rotation?t.rotation:0,this.setProperties(i),this.options_=t},i.prototype.getUpdatedOptions_=function(t){var i=p({},this.options_);return void 0!==i.resolution?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenter(),i.rotation=this.getRotation(),p({},i,t)},i.prototype.animate=function(t){var i,e=arguments,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(i=arguments[n-1],--n),!this.isDef()){var o=arguments[n-1];return o.center&&this.setCenter(o.center),void 0!==o.zoom&&this.setZoom(o.zoom),void 0!==o.rotation&&this.setRotation(o.rotation),void(i&&Vn(i,!0))}for(var r=Date.now(),s=this.getCenter().slice(),a=this.getResolution(),h=this.getRotation(),u=[],p=0;p<n;++p){var l=e[p],c={start:r,complete:!1,anchor:l.anchor,duration:void 0!==l.duration?l.duration:1e3,easing:l.easing||Di};if(l.center&&(c.sourceCenter=s,c.targetCenter=l.center,s=c.targetCenter),void 0!==l.zoom?(c.sourceResolution=a,c.targetResolution=this.constrainResolution(this.maxResolution_,l.zoom-this.minZoom_,0),a=c.targetResolution):l.resolution&&(c.sourceResolution=a,c.targetResolution=l.resolution,a=c.targetResolution),void 0!==l.rotation){c.sourceRotation=h;var _=li(l.rotation-h+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=h+_,h=c.targetRotation}c.callback=i,Bn(c)?c.complete=!0:r+=c.duration,u.push(c)}this.animations_.push(u),this.setHint(Ti,1),this.updateAnimations_()},i.prototype.getAnimating=function(){return this.hints_[Ti]>0},i.prototype.getInteracting=function(){return this.hints_[Ci]>0},i.prototype.cancelAnimations=function(){this.setHint(Ti,-this.hints_[Ti]);for(var t=0,i=this.animations_.length;t<i;++t){var e=this.animations_[t];e[0].callback&&Vn(e[0].callback,!1)}this.animations_.length=0},i.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),i=!1,e=this.animations_.length-1;e>=0;--e){for(var n=this.animations_[e],o=!0,r=0,s=n.length;r<s;++r){var a=n[r];if(!a.complete){var h=t-a.start,u=a.duration>0?h/a.duration:1;u>=1?(a.complete=!0,u=1):o=!1;var p=a.easing(u);if(a.sourceCenter){var l=a.sourceCenter[0],c=a.sourceCenter[1],_=l+p*(a.targetCenter[0]-l),d=c+p*(a.targetCenter[1]-c);this.set(Ri,[_,d])}if(a.sourceResolution&&a.targetResolution){var f=1===p?a.targetResolution:a.sourceResolution+p*(a.targetResolution-a.sourceResolution);a.anchor&&this.set(Ri,this.calculateCenterZoom(f,a.anchor)),this.set(Ii,f)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var v=1===p?li(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+p*(a.targetRotation-a.sourceRotation);a.anchor&&this.set(Ri,this.calculateCenterRotate(v,a.anchor)),this.set(wi,v)}if(i=!0,!a.complete)break}}if(o){this.animations_[e]=null,this.setHint(Ti,-1);var g=n[0].callback;g&&Vn(g,!0)}}this.animations_=this.animations_.filter(Boolean),i&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},i.prototype.calculateCenterRotate=function(t,i){var e,n=this.getCenter();return void 0!==n&&(bi(e=[n[0]-i[0],n[1]-i[1]],t-this.getRotation()),Mi(e,i)),e},i.prototype.calculateCenterZoom=function(t,i){var e,n=this.getCenter(),o=this.getResolution();void 0!==n&&void 0!==o&&(e=[i[0]-t*(i[0]-n[0])/o,i[1]-t*(i[1]-n[1])/o]);return e},i.prototype.getSizeFromViewport_=function(){var t=[100,100],i='.ol-viewport[data-view="'+r(this)+'"]',e=document.querySelector(i);if(e){var n=getComputedStyle(e);t[0]=parseInt(n.width,10),t[1]=parseInt(n.height,10)}return t},i.prototype.constrainCenter=function(t){return this.constraints_.center(t)},i.prototype.constrainResolution=function(t,i,e){var n=i||0,o=e||0;return this.constraints_.resolution(t,n,o)},i.prototype.constrainRotation=function(t,i){var e=i||0;return this.constraints_.rotation(t,e)},i.prototype.getCenter=function(){return this.get(Ri)},i.prototype.getConstraints=function(){return this.constraints_},i.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},i.prototype.calculateExtent=function(t){var i=t||this.getSizeFromViewport_(),e=this.getCenter();ii(e,1);var n=this.getResolution();ii(void 0!==n,2);var o=this.getRotation();return ii(void 0!==o,3),oe(e,n,o,i)},i.prototype.getMaxResolution=function(){return this.maxResolution_},i.prototype.getMinResolution=function(){return this.minResolution_},i.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},i.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},i.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},i.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},i.prototype.getProjection=function(){return this.projection_},i.prototype.getResolution=function(){return this.get(Ii)},i.prototype.getResolutions=function(){return this.resolutions_},i.prototype.getResolutionForExtent=function(t,i){var e=i||this.getSizeFromViewport_(),n=ue(t)/e[0],o=re(t)/e[1];return Math.max(n,o)},i.prototype.getResolutionForValueFunction=function(t){var i=t||2,e=this.maxResolution_,n=this.minResolution_,o=Math.log(e/n)/Math.log(i);return function(t){return e/Math.pow(i,t*o)}},i.prototype.getRotation=function(){return this.get(wi)},i.prototype.getValueForResolutionFunction=function(t){var i=t||2,e=this.maxResolution_,n=this.minResolution_,o=Math.log(e/n)/Math.log(i);return function(t){return Math.log(e/t)/Math.log(i)/o}},i.prototype.getState=function(t){var i=this.getCenter(),e=this.getProjection(),n=this.getResolution(),o=n/t,r=this.getRotation();return{center:[Math.round(i[0]/o)*o,Math.round(i[1]/o)*o],projection:void 0!==e?e:null,resolution:n,rotation:r,zoom:this.getZoom()}},i.prototype.getZoom=function(){var t,i=this.getResolution();return void 0!==i&&(t=this.getZoomForResolution(i)),t},i.prototype.getZoomForResolution=function(t){var i,e,n=this.minZoom_||0;if(this.resolutions_){var o=Nt(this.resolutions_,t,1);n=o,i=this.resolutions_[o],e=o==this.resolutions_.length-1?2:i/this.resolutions_[o+1]}else i=this.maxResolution_,e=this.zoomFactor_;return n+Math.log(i/t)/Math.log(e)},i.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},i.prototype.fit=function(t,i){var e,n=i||{},o=n.size;o||(o=this.getSizeFromViewport_()),ii(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?(ii(!le(t),25),e=xn(t)):t.getType()===ce.CIRCLE?(e=xn(t=t.getExtent())).rotate(this.getRotation(),ee(t)):e=t;var r,s=void 0!==n.padding?n.padding:[0,0,0,0],a=void 0===n.constrainResolution||n.constrainResolution,h=void 0!==n.nearest&&n.nearest;r=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.constrainResolution(this.maxResolution_,n.maxZoom-this.minZoom_,0):0;for(var u=e.getFlatCoordinates(),p=this.getRotation(),l=Math.cos(-p),c=Math.sin(-p),_=1/0,d=1/0,f=-1/0,v=-1/0,g=e.getStride(),y=0,m=u.length;y<m;y+=g){var E=u[y]*l-u[y+1]*c,T=u[y]*c+u[y+1]*l;_=Math.min(_,E),d=Math.min(d,T),f=Math.max(f,E),v=Math.max(v,T)}var C=this.getResolutionForExtent([_,d,f,v],[o[0]-s[1]-s[3],o[1]-s[0]-s[2]]);if(C=isNaN(C)?r:Math.max(C,r),a){var R=this.constrainResolution(C,0,0);!h&&R<C&&(R=this.constrainResolution(R,-1,0)),C=R}c=-c;var I=(_+f)/2,M=(d+v)/2,O=[(I+=(s[1]-s[3])/2*C)*l-(M+=(s[0]-s[2])/2*C)*c,M*l+I*c],b=n.callback?n.callback:w;void 0!==n.duration?this.animate({resolution:C,center:O,duration:n.duration,easing:n.easing},b):(this.setResolution(C),this.setCenter(O),Vn(b,!0))},i.prototype.centerOn=function(t,i,e){var n=this.getRotation(),o=Math.cos(-n),r=Math.sin(-n),s=t[0]*o-t[1]*r,a=t[1]*o+t[0]*r,h=this.getResolution(),u=(s+=(i[0]/2-e[0])*h)*o-(a+=(e[1]-i[1]/2)*h)*(r=-r),p=a*o+s*r;this.setCenter([u,p])},i.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},i.prototype.rotate=function(t,i){if(void 0!==i){var e=this.calculateCenterRotate(t,i);this.setCenter(e)}this.setRotation(t)},i.prototype.setCenter=function(t){this.set(Ri,t),this.getAnimating()&&this.cancelAnimations()},i.prototype.setHint=function(t,i){return this.hints_[t]+=i,this.changed(),this.hints_[t]},i.prototype.setResolution=function(t){this.set(Ii,t),this.getAnimating()&&this.cancelAnimations()},i.prototype.setRotation=function(t){this.set(wi,t),this.getAnimating()&&this.cancelAnimations()},i.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},i}(G);function Hn(t,i){var e=document.createElement("canvas");return t&&(e.width=t),i&&(e.height=i),e.getContext("2d")}function Wn(t,i){var e=i.parentNode;e&&e.replaceChild(t,i)}function Xn(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var qn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"},Qn=function(t){function i(i){t.call(this);var e=p({},i);e[qn.OPACITY]=void 0!==i.opacity?i.opacity:1,e[qn.VISIBLE]=void 0===i.visible||i.visible,e[qn.Z_INDEX]=i.zIndex,e[qn.MAX_RESOLUTION]=void 0!==i.maxResolution?i.maxResolution:1/0,e[qn.MIN_RESOLUTION]=void 0!==i.minResolution?i.minResolution:0,this.setProperties(e),this.state_=null,this.type}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.getType=function(){return this.type},i.prototype.getLayerState=function(){var t=this.state_||{layer:this,managed:!0};return t.opacity=si(this.getOpacity(),0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=this.getZIndex()||0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),this.state_=t,t},i.prototype.getLayersArray=function(t){return n()},i.prototype.getLayerStatesArray=function(t){return n()},i.prototype.getExtent=function(){return this.get(qn.EXTENT)},i.prototype.getMaxResolution=function(){return this.get(qn.MAX_RESOLUTION)},i.prototype.getMinResolution=function(){return this.get(qn.MIN_RESOLUTION)},i.prototype.getOpacity=function(){return this.get(qn.OPACITY)},i.prototype.getSourceState=function(){return n()},i.prototype.getVisible=function(){return this.get(qn.VISIBLE)},i.prototype.getZIndex=function(){return this.get(qn.Z_INDEX)},i.prototype.setExtent=function(t){this.set(qn.EXTENT,t)},i.prototype.setMaxResolution=function(t){this.set(qn.MAX_RESOLUTION,t)},i.prototype.setMinResolution=function(t){this.set(qn.MIN_RESOLUTION,t)},i.prototype.setOpacity=function(t){this.set(qn.OPACITY,t)},i.prototype.setVisible=function(t){this.set(qn.VISIBLE,t)},i.prototype.setZIndex=function(t){this.set(qn.Z_INDEX,t)},i}(G),$n={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},Jn={LAYERS:"layers"},kn=function(t){function i(i){var e=i||{},n=p({},e);delete n.layers;var o=e.layers;t.call(this,n),this.layersListenerKeys_=[],this.listenerKeys_={},g(this,N(Jn.LAYERS),this.handleLayersChanged_,this),o?Array.isArray(o)?o=new z(o.slice(),{unique:!0}):ii("function"==typeof o.getArray,43):o=new z(void 0,{unique:!0}),this.setLayers(o)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.handleLayerChange_=function(){this.changed()},i.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(E),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var i in this.layersListenerKeys_.push(g(t,h.ADD,this.handleLayersAdd_,this),g(t,h.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[i].forEach(E);l(this.listenerKeys_);for(var e=t.getArray(),n=0,o=e.length;n<o;n++){var s=e[n];this.listenerKeys_[r(s)]=[g(s,u,this.handleLayerChange_,this),g(s,A.CHANGE,this.handleLayerChange_,this)]}this.changed()},i.prototype.handleLayersAdd_=function(t){var i=t.element;this.listenerKeys_[r(i)]=[g(i,u,this.handleLayerChange_,this),g(i,A.CHANGE,this.handleLayerChange_,this)],this.changed()},i.prototype.handleLayersRemove_=function(t){var i=r(t.element);this.listenerKeys_[i].forEach(E),delete this.listenerKeys_[i],this.changed()},i.prototype.getLayers=function(){return this.get(Jn.LAYERS)},i.prototype.setLayers=function(t){this.set(Jn.LAYERS,t)},i.prototype.getLayersArray=function(t){var i=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(i)}),i},i.prototype.getLayerStatesArray=function(t){var i=void 0!==t?t:[],e=i.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(i)});for(var n=this.getLayerState(),o=e,r=i.length;o<r;o++){var s=i[o];s.opacity*=n.opacity,s.visible=s.visible&&n.visible,s.maxResolution=Math.min(s.maxResolution,n.maxResolution),s.minResolution=Math.max(s.minResolution,n.minResolution),void 0!==n.extent&&(void 0!==s.extent?s.extent=se(s.extent,n.extent):s.extent=n.extent)}return i},i.prototype.getSourceState=function(){return $n.READY},i}(Qn);function Sn(t,i){return Array.isArray(t)?t:(void 0===i?i=[t,t]:i[0]=i[1]=t,i)}var to=function(t){function i(i){t.call(this);var e=function(t){var i=null;void 0!==t.keyboardEventTarget&&(i="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var e,n,o,r={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new kn({layers:t.layers});r[Qt.LAYERGROUP]=s,r[Qt.TARGET]=t.target,r[Qt.VIEW]=void 0!==t.view?t.view:new Yn,void 0!==t.controls&&(Array.isArray(t.controls)?e=new z(t.controls.slice()):(ii("function"==typeof t.controls.getArray,47),e=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new z(t.interactions.slice()):(ii("function"==typeof t.interactions.getArray,48),n=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?o=new z(t.overlays.slice()):(ii("function"==typeof t.overlays.getArray,49),o=t.overlays):o=new z;return{controls:e,interactions:n,keyboardEventTarget:i,overlays:o,values:r}}(i);this.maxTilesLoading_=void 0!==i.maxTilesLoading?i.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==i.loadTilesWhileAnimating&&i.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==i.loadTilesWhileInteracting&&i.loadTilesWhileInteracting,this.pixelRatio_=void 0!==i.pixelRatio?i.pixelRatio:W,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+(q?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var n=[A.CLICK,A.DBLCLICK,A.MOUSEDOWN,A.TOUCHSTART,A.MSPOINTERDOWN,J.POINTERDOWN,A.MOUSEWHEEL,A.WHEEL],o=0,r=n.length;o<r;++o)g(this.overlayContainerStopEvent_,n[o],O);for(var s in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new Ht(this,i.moveTolerance),J)g(this.mapBrowserEventHandler_,J[s],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=e.keyboardEventTarget,this.keyHandlerKeys_=null,g(this.viewport_,A.CONTEXTMENU,this.handleBrowserEvent,this),g(this.viewport_,A.WHEEL,this.handleBrowserEvent,this),g(this.viewport_,A.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=e.controls||new z,this.interactions=e.interactions||new z,this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new ni(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},g(this,N(Qt.LAYERGROUP),this.handleLayerGroupChanged_,this),g(this,N(Qt.VIEW),this.handleViewChanged_,this),g(this,N(Qt.SIZE),this.handleSizeChanged_,this),g(this,N(Qt.TARGET),this.handleTargetChanged_,this),this.setProperties(e.values),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),g(this.controls,h.ADD,function(t){t.element.setMap(this)},this),g(this.controls,h.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),g(this.interactions,h.ADD,function(t){t.element.setMap(this)},this),g(this.interactions,h.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),g(this.overlays_,h.ADD,function(t){this.addOverlayInternal_(t.element)},this),g(this.overlays_,h.REMOVE,function(t){var i=t.element.getId();void 0!==i&&delete this.overlayIdIndex_[i.toString()],t.element.setMap(null)},this)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},i.prototype.addControl=function(t){this.getControls().push(t)},i.prototype.addInteraction=function(t){this.getInteractions().push(t)},i.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},i.prototype.addOverlay=function(t){this.getOverlays().push(t)},i.prototype.addOverlayInternal_=function(t){var i=t.getId();void 0!==i&&(this.overlayIdIndex_[i.toString()]=t),t.setMap(this)},i.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),m(this.viewport_,A.CONTEXTMENU,this.handleBrowserEvent,this),m(this.viewport_,A.WHEEL,this.handleBrowserEvent,this),m(this.viewport_,A.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(A.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},i.prototype.forEachFeatureAtPixel=function(t,i,e){if(this.frameState_){var n=this.getCoordinateFromPixel(t),o=void 0!==(e=void 0!==e?e:{}).hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,r=void 0!==e.layerFilter?e.layerFilter:R;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,o,i,null,r,null)}},i.prototype.getFeaturesAtPixel=function(t,i){var e=null;return this.forEachFeatureAtPixel(t,function(t){e||(e=[]),e.push(t)},i),e},i.prototype.forEachLayerAtPixel=function(t,i,e){if(this.frameState_){var n=e||{},o=void 0!==n.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,r=n.layerFilter||R;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,o,i,null,r,null)}},i.prototype.hasFeatureAtPixel=function(t,i){if(!this.frameState_)return!1;var e=this.getCoordinateFromPixel(t),n=void 0!==(i=void 0!==i?i:{}).layerFilter?i.layerFilter:R,o=void 0!==i.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(e,this.frameState_,o,n,null)},i.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},i.prototype.getEventPixel=function(t){var i=this.viewport_.getBoundingClientRect(),e="changedTouches"in t?t.changedTouches[0]:t;return[e.clientX-i.left,e.clientY-i.top]},i.prototype.getTarget=function(){return this.get(Qt.TARGET)},i.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},i.prototype.getCoordinateFromPixel=function(t){var i=this.frameState_;return i?nn(i.pixelToCoordinateTransform,t.slice()):null},i.prototype.getControls=function(){return this.controls},i.prototype.getOverlays=function(){return this.overlays_},i.prototype.getOverlayById=function(t){var i=this.overlayIdIndex_[t.toString()];return void 0!==i?i:null},i.prototype.getInteractions=function(){return this.interactions},i.prototype.getLayerGroup=function(){return this.get(Qt.LAYERGROUP)},i.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},i.prototype.getPixelFromCoordinate=function(t){var i=this.frameState_;return i?nn(i.coordinateToPixelTransform,t.slice(0,2)):null},i.prototype.getRenderer=function(){return this.renderer_},i.prototype.getSize=function(){return this.get(Qt.SIZE)},i.prototype.getView=function(){return this.get(Qt.VIEW)},i.prototype.getViewport=function(){return this.viewport_},i.prototype.getOverlayContainer=function(){return this.overlayContainer_},i.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},i.prototype.getTilePriority=function(t,i,e,n){var o=this.frameState_;if(!(o&&i in o.wantedTiles))return 1/0;if(!o.wantedTiles[i][t.getKey()])return 1/0;var r=e[0]-o.focus[0],s=e[1]-o.focus[1];return 65536*Math.log(n)+Math.sqrt(r*r+s*s)/n},i.prototype.handleBrowserEvent=function(t,i){var e=i||t.type,n=new x(e,this,t);this.handleMapBrowserEvent(n)},i.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var i=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var e=i.length-1;e>=0;e--){var n=i[e];if(n.getActive())if(!n.handleEvent(t))break}}},i.prototype.handlePostRender=function(){var t=this.frameState_,i=this.tileQueue_;if(!i.isEmpty()){var e=this.maxTilesLoading_,n=e;if(t){var o=t.viewHints;o[Ti]&&(e=this.loadTilesWhileAnimating_?8:0,n=2),o[Ci]&&(e=this.loadTilesWhileInteracting_?8:0,n=2)}i.getTilesLoading()<e&&(i.reprioritize(),i.loadMoreTiles(e,n))}!t||!this.hasListener(St)||t.animate||this.tileQueue_.getTilesLoading()||function t(i){for(var e=0,n=i.length;e<n;++e){var o=i[e];if("function"==typeof o.getLayers)return t(o.getLayers().getArray());var r=o.getSource();if(r&&r.loading)return!0}return!1}(this.getLayers().getArray())||this.renderer_.dispatchRenderEvent(St,t);for(var r=this.postRenderFunctions_,s=0,a=r.length;s<a;++s)r[s](this,t);r.length=0},i.prototype.handleSizeChanged_=function(){this.render()},i.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var i=0,e=this.keyHandlerKeys_.length;i<e;++i)E(this.keyHandlerKeys_[i]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[g(n,A.KEYDOWN,this.handleBrowserEvent,this),g(n,A.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),addEventListener(A.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),Xn(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(A.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},i.prototype.handleTileChange_=function(){this.render()},i.prototype.handleViewPropertyChanged_=function(){this.render()},i.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(E(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(E(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",r(t)),this.viewPropertyListenerKey_=g(t,u,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=g(t,A.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},i.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(E),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[g(t,u,this.render,this),g(t,A.CHANGE,this.render,this)]),this.render()},i.prototype.isRendered=function(){return!!this.frameState_},i.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},i.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},i.prototype.removeControl=function(t){return this.getControls().remove(t)},i.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},i.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},i.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},i.prototype.renderFrame_=function(t){var i,e=this.getSize(),n=this.getView(),o=[1/0,1/0,-1/0,-1/0],s=this.frameState_,a=null;if(void 0!==e&&function(t){return t[0]>0&&t[1]>0}(e)&&n&&n.isDef()){for(var h=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=this.getLayerGroup().getLayerStatesArray(),p={},l=0,c=u.length;l<c;++l)p[r(u[l].layer)]=u[l];i=n.getState(this.pixelRatio_),a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:o,focus:this.focus_?this.focus_:i.center,index:this.frameIndex_++,layerStates:p,layerStatesArray:u,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:i,viewHints:h,wantedTiles:{}}}if(a&&(a.extent=oe(i.center,i.resolution,i.rotation,a.size,o)),this.frameState_=a,this.renderer_.renderFrame(a),a){if(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s)(!this.previousExtent_||!le(this.previousExtent_)&&!Xi(a.extent,this.previousExtent_))&&(this.dispatchEvent(new U(Xt,this,s)),this.previousExtent_=Wi(this.previousExtent_));this.previousExtent_&&!a.viewHints[Ti]&&!a.viewHints[Ci]&&!Xi(a.extent,this.previousExtent_)&&(this.dispatchEvent(new U(qt,this,a)),zi(a.extent,this.previousExtent_))}this.dispatchEvent(new U(Wt,this,a)),setTimeout(this.handlePostRender.bind(this),0)},i.prototype.setLayerGroup=function(t){this.set(Qt.LAYERGROUP,t)},i.prototype.setSize=function(t){this.set(Qt.SIZE,t)},i.prototype.setTarget=function(t){this.set(Qt.TARGET,t)},i.prototype.setView=function(t){this.set(Qt.VIEW,t)},i.prototype.skipFeature=function(t){this.skippedFeatureUids_[r(t)]=!0,this.render()},i.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var i=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth)])}else this.setSize(void 0)},i.prototype.unskipFeature=function(t){delete this.skippedFeatureUids_[r(t)],this.render()},i}(G);var io,eo,no=function(t){function i(i){t.call(this),this.element=i.element?i.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=i.render?i.render:w,i.target&&this.setTarget(i.target)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.disposeInternal=function(){Xn(this.element),t.prototype.disposeInternal.call(this)},i.prototype.getMap=function(){return this.map_},i.prototype.setMap=function(t){this.map_&&Xn(this.element);for(var i=0,e=this.listenerKeys.length;i<e;++i)E(this.listenerKeys[i]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==w&&this.listenerKeys.push(g(t,Wt,this.render,this)),t.render())},i.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},i}(G),oo="ol-hidden",ro="ol-unselectable",so="ol-control",ao="ol-collapsed",ho=(eo={},function(t){if(io||(io=document.createElement("div").style),!(t in eo)){io.font=t;var i=io.fontFamily;if(io.font="",!i)return null;eo[t]=i.split(/,\s?/)}return eo[t]});function uo(t,i){return t.visible&&i>=t.minResolution&&i<t.maxResolution}var po=function(t){function i(i){var e=p({},i);delete e.source,t.call(this,e),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,i.map&&this.setMap(i.map),g(this,N(qn.SOURCE),this.handleSourcePropertyChange_,this);var n=i.source?i.source:null;this.setSource(n)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.getLayersArray=function(t){var i=t||[];return i.push(this),i},i.prototype.getLayerStatesArray=function(t){var i=t||[];return i.push(this.getLayerState()),i},i.prototype.getSource=function(){return this.get(qn.SOURCE)||null},i.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():$n.UNDEFINED},i.prototype.handleSourceChange_=function(){this.changed()},i.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(E(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=g(t,A.CHANGE,this.handleSourceChange_,this)),this.changed()},i.prototype.setMap=function(t){this.mapPrecomposeKey_&&(E(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(E(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=g(t,Jt,function(t){var i=t,e=this.getLayerState();e.managed=!1,void 0===this.getZIndex()&&(e.zIndex=1/0),i.frameState.layerStatesArray.push(e),i.frameState.layerStates[r(this)]=e},this),this.mapRenderKey_=g(this,A.CHANGE,t.render,t),this.changed())},i.prototype.setSource=function(t){this.set(qn.SOURCE,t)},i}(Qn);function lo(t){this.updateElement_(t.frameState)}var co=function(t){function i(i){var e=i||{};t.call(this,{element:document.createElement("div"),render:e.render||lo,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.overrideCollapsible_=void 0!==e.collapsible,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);var n=void 0!==e.className?e.className:"ol-attribution",o=void 0!==e.tipLabel?e.tipLabel:"Attributions",r=void 0!==e.collapseLabel?e.collapseLabel:"»";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r):this.collapseLabel_=r;var s=void 0!==e.label?e.label:"i";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;var a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=o,h.appendChild(a),g(h,A.CLICK,this.handleClick_,this);var u=n+" "+ro+" "+so+(this.collapsed_&&this.collapsible_?" "+ao:"")+(this.collapsible_?"":" ol-uncollapsible"),p=this.element;p.className=u,p.appendChild(this.ulElement_),p.appendChild(h),this.renderedAttributions_=[],this.renderedVisible_=!0}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.collectSourceAttributions_=function(t){for(var i={},e=[],n=t.layerStatesArray,o=t.viewState.resolution,r=0,s=n.length;r<s;++r){var a=n[r];if(uo(a,o)){var h=a.layer.getSource();if(h){var u=h.getAttributions();if(u){var p=u(t);if(p)if(this.overrideCollapsible_||!1!==h.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(p))for(var l=0,c=p.length;l<c;++l)p[l]in i||(e.push(p[l]),i[p[l]]=!0);else p in i||(e.push(p),i[p]=!0)}}}}return e},i.prototype.updateElement_=function(t){if(t){var i=this.collectSourceAttributions_(t),e=i.length>0;if(this.renderedVisible_!=e&&(this.element.style.display=e?"":"none",this.renderedVisible_=e),!Zt(i,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(var n=0,o=i.length;n<o;++n){var r=document.createElement("li");r.innerHTML=i[n],this.ulElement_.appendChild(r)}this.renderedAttributions_=i}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},i.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},i.prototype.handleToggle_=function(){this.element.classList.toggle(ao),this.collapsed_?Wn(this.collapseLabel_,this.label_):Wn(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},i.prototype.getCollapsible=function(){return this.collapsible_},i.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},i.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},i.prototype.getCollapsed=function(){return this.collapsed_},i}(no);function _o(t){var i=t.frameState;if(i){var e=i.viewState.rotation;if(e!=this.rotation_){var n="rotate("+e+"rad)";if(this.autoHide_){var o=this.element.classList.contains(oo);o||0!==e?o&&0!==e&&this.element.classList.remove(oo):this.element.classList.add(oo)}this.label_.style.msTransform=n,this.label_.style.webkitTransform=n,this.label_.style.transform=n}this.rotation_=e}}var fo=function(t){function i(i){var e=i||{};t.call(this,{element:document.createElement("div"),render:e.render||_o,target:e.target});var n=void 0!==e.className?e.className:"ol-rotate",o=void 0!==e.label?e.label:"⇧";this.label_=null,"string"==typeof o?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=o):(this.label_=o,this.label_.classList.add("ol-compass"));var r=e.tipLabel?e.tipLabel:"Reset rotation",s=document.createElement("button");s.className=n+"-reset",s.setAttribute("type","button"),s.title=r,s.appendChild(this.label_),g(s,A.CLICK,this.handleClick_,this);var a=n+" "+ro+" "+so,h=this.element;h.className=a,h.appendChild(s),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(oo)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},i.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:Li}):t.setRotation(0))},i}(no),vo=function(t){function i(i){var e=i||{};t.call(this,{element:document.createElement("div"),target:e.target});var n=void 0!==e.className?e.className:"ol-zoom",o=void 0!==e.delta?e.delta:1,r=void 0!==e.zoomInLabel?e.zoomInLabel:"+",s=void 0!==e.zoomOutLabel?e.zoomOutLabel:"−",a=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",h=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=n+"-in",u.setAttribute("type","button"),u.title=a,u.appendChild("string"==typeof r?document.createTextNode(r):r),g(u,A.CLICK,this.handleClick_.bind(this,o));var p=document.createElement("button");p.className=n+"-out",p.setAttribute("type","button"),p.title=h,p.appendChild("string"==typeof s?document.createTextNode(s):s),g(p,A.CLICK,this.handleClick_.bind(this,-o));var l=n+" "+ro+" "+so,c=this.element;c.className=l,c.appendChild(u),c.appendChild(p),this.duration_=void 0!==e.duration?e.duration:250}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.handleClick_=function(t,i){i.preventDefault(),this.zoomByDelta_(t)},i.prototype.zoomByDelta_=function(t){var i=this.getMap().getView();if(i){var e=i.getResolution();if(e){var n=i.constrainResolution(e,t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:n,duration:this.duration_,easing:Li})):i.setResolution(n)}}},i}(no);var go=function(t,i,e){this.decay_=t,this.minVelocity_=i,this.delay_=e,this.points_=[],this.angle_=0,this.initialVelocity_=0};go.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},go.prototype.update=function(t,i){this.points_.push(t,i,Date.now())},go.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;for(var e=i-3;e>0&&this.points_[e+2]>t;)e-=3;var n=this.points_[i+2]-this.points_[e+2];if(n<1e3/60)return!1;var o=this.points_[i]-this.points_[e],r=this.points_[i+1]-this.points_[e+1];return this.angle_=Math.atan2(r,o),this.initialVelocity_=Math.sqrt(o*o+r*r)/n,this.initialVelocity_>this.minVelocity_},go.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},go.prototype.getAngle=function(){return this.angle_};var yo=go,mo="active";function Eo(t,i,e,n){i=t.constrainRotation(i,0),To(t,i,e,n)}function To(t,i,e,n){if(void 0!==i){var o=t.getRotation(),r=t.getCenter();void 0!==o&&r&&n>0?t.animate({rotation:i,anchor:e,duration:n,easing:Li}):t.rotate(i,e)}}function Co(t,i,e,n){var o=t.getResolution(),r=t.constrainResolution(o,i,0);if(void 0!==r){var s=t.getResolutions();r=si(r,t.getMinResolution()||s[s.length-1],t.getMaxResolution()||s[0])}if(e&&void 0!==r&&r!==o){var a=t.getCenter(),h=t.calculateCenterZoom(r,e);h=t.constrainCenter(h),e=[(r*a[0]-o*h[0])/(r-o),(r*a[1]-o*h[1])/(r-o)]}Ro(t,r,e,n)}function Ro(t,i,e,n){if(i){var o=t.getResolution(),r=t.getCenter();if(void 0!==o&&r&&i!==o&&n)t.animate({resolution:i,anchor:e,duration:n,easing:Li});else{if(e){var s=t.calculateCenterZoom(i,e);t.setCenter(s)}t.setResolution(i)}}}var Io=function(t){function i(i){t.call(this),i.handleEvent&&(this.handleEvent=i.handleEvent),this.map_=null,this.setActive(!0)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.getActive=function(){return this.get(mo)},i.prototype.getMap=function(){return this.map_},i.prototype.handleEvent=function(t){return!0},i.prototype.setActive=function(t){this.set(mo,t)},i.prototype.setMap=function(t){this.map_=t},i}(G);function wo(t){var i=!1;if(t.type==J.DBLCLICK){var e=t.originalEvent,n=t.map,o=t.coordinate,r=e.shiftKey?-this.delta_:this.delta_;Co(n.getView(),r,o,this.duration_),t.preventDefault(),i=!0}return!i}var Mo=function(t){function i(i){t.call(this,{handleEvent:wo});var e=i||{};this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:250}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(Io),Oo=function(t){var i=t.originalEvent;return i.altKey&&!(i.metaKey||i.ctrlKey)&&i.shiftKey},bo=function(t){return t.target.getTargetElement()===document.activeElement},Po=R,Ao=function(t){var i=t.originalEvent;return 0==i.button&&!(Y&&H&&i.ctrlKey)},Lo=function(t){var i=t.originalEvent;return!i.altKey&&!(i.metaKey||i.ctrlKey)&&!i.shiftKey},Do=function(t){var i=t.originalEvent;return!i.altKey&&!(i.metaKey||i.ctrlKey)&&i.shiftKey},Fo=function(t){var i=t.originalEvent.target.tagName;return"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i},No=function(t){var i=t.pointerEvent;return ii(void 0!==i,56),"mouse"==i.pointerType};function Go(t){for(var i=t.length,e=0,n=0,o=0;o<i;o++)e+=t[o].clientX,n+=t[o].clientY;return[e/i,n/i]}var Ko=function(t){function i(i){var e=i||{};t.call(this,e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.handleDownEvent=function(t){return!1},i.prototype.handleDragEvent=function(t){},i.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var i=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==J.POINTERDRAG)this.handleDragEvent(t);else if(t.type==J.POINTERUP){var e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==J.POINTERDOWN){var n=this.handleDownEvent(t);n&&t.preventDefault(),this.handlingDownUpSequence=n,i=this.stopDown(n)}else t.type==J.POINTERMOVE&&this.handleMoveEvent(t);return!i},i.prototype.handleMoveEvent=function(t){},i.prototype.handleUpEvent=function(t){return!1},i.prototype.stopDown=function(t){return t},i.prototype.updateTrackedPointers_=function(t){if(function(t){var i=t.type;return i===J.POINTERDOWN||i===J.POINTERDRAG||i===J.POINTERUP}(t)){var i=t.pointerEvent,e=i.pointerId.toString();t.type==J.POINTERUP?delete this.trackedPointers_[e]:t.type==J.POINTERDOWN?this.trackedPointers_[e]=i:e in this.trackedPointers_&&(this.trackedPointers_[e]=i),this.targetPointers=function(t){var i=[];for(var e in t)i.push(t[e]);return i}(this.trackedPointers_)}},i}(Io),Zo=function(t){function i(i){t.call(this,{stopDown:I});var e=i||{};this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1,this.condition_=e.condition?e.condition:Lo,this.noKinetic_=!1}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().setHint(Ci,1));var i=this.targetPointers,e=Go(i);if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(e[0],e[1]),this.lastCentroid){var n=this.lastCentroid[0]-e[0],o=e[1]-this.lastCentroid[1],r=t.map.getView(),s=[n,o];Pi(s,r.getResolution()),bi(s,r.getRotation()),Mi(s,r.getCenter()),s=r.constrainCenter(s),r.setCenter(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=e,this.lastPointersCount_=i.length},i.prototype.handleUpEvent=function(t){var i=t.map,e=i.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),r=e.getCenter(),s=i.getPixelFromCoordinate(r),a=i.getCoordinateFromPixel([s[0]-n*Math.cos(o),s[1]-n*Math.sin(o)]);e.animate({center:e.constrainCenter(a),duration:500,easing:Li})}return this.panning_&&(this.panning_=!1,e.setHint(Ci,-1)),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},i.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},i}(Ko),zo=function(t){function i(i){var e=i||{};t.call(this,{stopDown:I}),this.condition_=e.condition?e.condition:Oo,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.handleDragEvent=function(t){if(No(t)){var i=t.map,e=i.getView();if(e.getConstraints().rotation!==gi){var n=i.getSize(),o=t.pixel,r=Math.atan2(n[1]/2-o[1],o[0]-n[0]/2);if(void 0!==this.lastAngle_){var s=r-this.lastAngle_,a=e.getRotation();To(e,a-s)}this.lastAngle_=r}}},i.prototype.handleUpEvent=function(t){if(!No(t))return!0;var i=t.map.getView();i.setHint(Ci,-1);var e=i.getRotation();return Eo(i,e,void 0,this.duration_),!1},i.prototype.handleDownEvent=function(t){return!!No(t)&&(!(!Ao(t)||!this.condition_(t))&&(t.map.getView().setHint(Ci,1),this.lastAngle_=void 0,!0))},i}(Ko),Uo=function(t){function i(i){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+i,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.disposeInternal=function(){this.setMap(null)},i.prototype.render_=function(){var t=this.startPixel_,i=this.endPixel_,e=this.element_.style;e.left=Math.min(t[0],i[0])+"px",e.top=Math.min(t[1],i[1])+"px",e.width=Math.abs(i[0]-t[0])+"px",e.height=Math.abs(i[1]-t[1])+"px"},i.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var i=this.element_.style;i.left=i.top=i.width=i.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},i.prototype.setPixels=function(t,i){this.startPixel_=t,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()},i.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,i=this.endPixel_,e=[t,[t[0],i[1]],i,[i[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);e[4]=e[0].slice(),this.geometry_?this.geometry_.setCoordinates([e]):this.geometry_=new Un([e])},i.prototype.getGeometry=function(){return this.geometry_},i}(C),xo="boxstart",jo="boxdrag",Vo="boxend",Bo=function(t){function i(i,e,n){t.call(this,i),this.coordinate=e,this.mapBrowserEvent=n}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(b);function Yo(){var t,i,e=this.getMap(),n=e.getView(),o=e.getSize(),r=this.getGeometry().getExtent();if(this.out_){var s=n.calculateExtent(o),a=(t=[e.getPixelFromCoordinate(te(r)),e.getPixelFromCoordinate(he(r))],$i(Wi(i),t));!function(t,i){var e=(t[2]-t[0])/2*(i-1),n=(t[3]-t[1])/2*(i-1);t[0]-=e,t[2]+=e,t[1]-=n,t[3]+=n}(s,1/n.getResolutionForExtent(a,o)),r=s}var h=n.constrainResolution(n.getResolutionForExtent(r,o)),u=ee(r);u=n.constrainCenter(u),n.animate({resolution:h,center:u,duration:this.duration_,easing:Li})}var Ho=function(t){function i(i){var e=i||{},n=e.condition?e.condition:Do;t.call(this,{condition:n,className:e.className||"ol-dragzoom",onBoxEnd:Yo}),this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(function(t){function i(i){t.call(this);var e=i||{};this.box_=new Uo(e.className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,this.onBoxEnd_=e.onBoxEnd?e.onBoxEnd:w,this.startPixel_=null,this.condition_=e.condition?e.condition:Po,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.defaultBoxEndCondition=function(t,i,e){var n=e[0]-i[0],o=e[1]-i[1];return n*n+o*o>=this.minArea_},i.prototype.getGeometry=function(){return this.box_.getGeometry()},i.prototype.handleDragEvent=function(t){No(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Bo(jo,t.coordinate,t)))},i.prototype.handleUpEvent=function(t){return!No(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new Bo(Vo,t.coordinate,t))),!1)},i.prototype.handleDownEvent=function(t){return!!No(t)&&(!(!Ao(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Bo(xo,t.coordinate,t)),!0))},i}(Ko)),Wo={LEFT:37,UP:38,RIGHT:39,DOWN:40};function Xo(t){var i=!1;if(t.type==A.KEYDOWN){var e=t.originalEvent.keyCode;if(this.condition_(t)&&(e==Wo.DOWN||e==Wo.LEFT||e==Wo.RIGHT||e==Wo.UP)){var n=t.map.getView(),o=n.getResolution()*this.pixelDelta_,r=0,s=0;e==Wo.DOWN?s=-o:e==Wo.LEFT?r=-o:e==Wo.RIGHT?r=o:s=o;var a=[r,s];bi(a,n.getRotation()),function(t,i,e){var n=t.getCenter();if(n){var o=t.constrainCenter([n[0]+i[0],n[1]+i[1]]);e?t.animate({duration:e,easing:Fi,center:o}):t.setCenter(o)}}(n,a,this.duration_),t.preventDefault(),i=!0}}return!i}var qo=function(t){function i(i){t.call(this,{handleEvent:Xo});var e=i||{};this.defaultCondition_=function(t){return Lo(t)&&Fo(t)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(Io);function Qo(t){var i=!1;if(t.type==A.KEYDOWN||t.type==A.KEYPRESS){var e=t.originalEvent.charCode;if(this.condition_(t)&&(e=="+".charCodeAt(0)||e=="-".charCodeAt(0))){var n=t.map,o=e=="+".charCodeAt(0)?this.delta_:-this.delta_;Co(n.getView(),o,void 0,this.duration_),t.preventDefault(),i=!0}}return!i}var $o=function(t){function i(i){t.call(this,{handleEvent:Qo});var e=i||{};this.condition_=e.condition?e.condition:Fo,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(Io),Jo="trackpad",ko="wheel",So=function(t){function i(i){var e=i||{};t.call(this,e),this.delta_=0,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=e.constrainResolution||!1,this.condition_=e.condition?e.condition:Po,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(Ci,-1)},i.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var i=t.type;if(i!==A.WHEEL&&i!==A.MOUSEWHEEL)return!0;t.preventDefault();var e,n=t.map,o=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==A.WHEEL?(e=o.deltaY,V&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=W),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)):t.type==A.MOUSEWHEEL&&(e=-o.wheelDeltaY,B&&(e/=3)),0===e)return!1;var r=Date.now();if(void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?Jo:ko),this.mode_===Jo){var s=n.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):s.setHint(Ci,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var a=s.getResolution()*Math.pow(2,e/this.trackpadDeltaPerZoom_),h=s.getMinResolution(),u=s.getMaxResolution(),p=0;if(a<h?(a=Math.max(a,h/this.trackpadZoomBuffer_),p=1):a>u&&(a=Math.min(a,u*this.trackpadZoomBuffer_),p=-1),this.lastAnchor_){var l=s.calculateCenterZoom(a,this.lastAnchor_);s.setCenter(s.constrainCenter(l))}return s.setResolution(a),0===p&&this.constrainResolution_&&s.animate({resolution:s.constrainResolution(a,e>0?-1:1),easing:Li,anchor:this.lastAnchor_,duration:this.duration_}),p>0?s.animate({resolution:h,easing:Li,anchor:this.lastAnchor_,duration:500}):p<0&&s.animate({resolution:u,easing:Li,anchor:this.lastAnchor_,duration:500}),this.startTime_=r,!1}this.delta_+=e;var c=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),c),!1},i.prototype.handleWheelZoom_=function(t){var i=t.getView();i.getAnimating()&&i.cancelAnimations();Co(i,-si(this.delta_,-1,1),this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},i.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},i}(Io),tr=function(t){function i(i){var e=i||{},n=e;n.stopDown||(n.stopDown=I),t.call(this,n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.handleDragEvent=function(t){var i=0,e=this.targetPointers[0],n=this.targetPointers[1],o=Math.atan2(n.clientY-e.clientY,n.clientX-e.clientX);if(void 0!==this.lastAngle_){var r=o-this.lastAngle_;this.rotationDelta_+=r,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=r}this.lastAngle_=o;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==gi){var h=s.getViewport().getBoundingClientRect(),u=Go(this.targetPointers);if(u[0]-=h.left,u[1]-=h.top,this.anchor_=s.getCoordinateFromPixel(u),this.rotating_){var p=a.getRotation();s.render(),To(a,p+i,this.anchor_)}}},i.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var i=t.map.getView();if(i.setHint(Ci,-1),this.rotating_){var e=i.getRotation();Eo(i,e,this.anchor_,this.duration_)}return!1}return!0},i.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var i=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().setHint(Ci,1),!0}return!1},i}(Ko),ir=function(t){function i(i){var e=i||{},n=e;n.stopDown||(n.stopDown=I),t.call(this,n),this.constrainResolution_=e.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.handleDragEvent=function(t){var i=1,e=this.targetPointers[0],n=this.targetPointers[1],o=e.clientX-n.clientX,r=e.clientY-n.clientY,s=Math.sqrt(o*o+r*r);void 0!==this.lastDistance_&&(i=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,h=a.getView(),u=h.getResolution(),p=h.getMaxResolution(),l=h.getMinResolution(),c=u*i;c>p?(i=p/u,c=p):c<l&&(i=l/u,c=l),1!=i&&(this.lastScaleDelta_=i);var _=a.getViewport().getBoundingClientRect(),d=Go(this.targetPointers);d[0]-=_.left,d[1]-=_.top,this.anchor_=a.getCoordinateFromPixel(d),a.render(),Ro(h,c,this.anchor_)},i.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var i=t.map.getView();i.setHint(Ci,-1);var e=i.getResolution();if(this.constrainResolution_||e<i.getMinResolution()||e>i.getMaxResolution()){var n=this.lastScaleDelta_-1;!function(t,i,e,n,o){i=t.constrainResolution(i,0,o),Ro(t,i,e,n)}(i,e,this.anchor_,this.duration_,n)}return!1}return!0},i.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var i=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().setHint(Ci,1),!0}return!1},i}(Ko);var er=.5,nr={IDLE:0,LOADING:1,LOADED:2,ERROR:3},or=function(t){function i(i,e,n,o,r){var s=void 0!==r?nr.IDLE:nr.LOADED;t.call(this,i,e,n,s),this.loader_=void 0!==r?r:null,this.canvas_=o,this.error_=null}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.getError=function(){return this.error_},i.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=nr.ERROR):this.state=nr.LOADED,this.changed()},i.prototype.load=function(){this.state==nr.IDLE&&(this.state=nr.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},i.prototype.getImage=function(){return this.canvas_},i}(function(t){function i(i,e,n,o){t.call(this),this.extent=i,this.pixelRatio_=n,this.resolution=e,this.state=o}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.changed=function(){this.dispatchEvent(A.CHANGE)},i.prototype.getExtent=function(){return this.extent},i.prototype.getImage=function(){return n()},i.prototype.getPixelRatio=function(){return this.pixelRatio_},i.prototype.getResolution=function(){return this.resolution},i.prototype.getState=function(){return this.state},i.prototype.load=function(){n()},i}(P)),rr={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"},sr="image",ar=function(t){function i(i,e,n,o,r){t.call(this,i),this.vectorContext=e,this.frameState=n,this.context=o,this.glContext=r}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(b),hr=function(t){function i(i){t.call(this),this.highWaterMark=void 0!==i?i:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},i.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(A.CLEAR)},i.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},i.prototype.forEach=function(t,i){for(var e=this.oldest_;e;)t.call(i,e.value_,e.key_,this),e=e.newer},i.prototype.get=function(t){var i=this.entries_[t];return ii(void 0!==i,15),i===this.newest_?i.value_:(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i,i.value_)},i.prototype.remove=function(t){var i=this.entries_[t];return ii(void 0!==i,15),i===this.newest_?(this.newest_=i.older,this.newest_&&(this.newest_.newer=null)):i===this.oldest_?(this.oldest_=i.newer,this.oldest_&&(this.oldest_.older=null)):(i.newer.older=i.older,i.older.newer=i.newer),delete this.entries_[t],--this.count_,i.value_},i.prototype.getCount=function(){return this.count_},i.prototype.getKeys=function(){var t,i=new Array(this.count_),e=0;for(t=this.newest_;t;t=t.older)i[e++]=t.key_;return i},i.prototype.getValues=function(){var t,i=new Array(this.count_),e=0;for(t=this.newest_;t;t=t.older)i[e++]=t.value_;return i},i.prototype.peekLast=function(){return this.oldest_.value_},i.prototype.peekLastKey=function(){return this.oldest_.key_},i.prototype.peekFirstKey=function(){return this.newest_.key_},i.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},i.prototype.replace=function(t,i){this.get(t),this.entries_[t].value_=i},i.prototype.set=function(t,i){ii(!(t in this.entries_),16);var e={key_:t,newer:null,older:this.newest_,value_:i};this.newest_?this.newest_.newer=e:this.oldest_=e,this.newest_=e,this.entries_[t]=e,++this.count_},i.prototype.setSize=function(t){this.highWaterMark=t},i.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},i}(P),ur=[0,0,0,1],pr=[],lr=[0,0,0,1],cr=[0,0,0,0],_r=new hr,dr={},fr=null,vr={},gr=function(){var t,i,e=60,n=dr,o="32px ",r=["monospace","serif"],s=r.length,a="wmytzilWMYTZIL@#/&?$%10";function h(t){for(var e=yr(),n=100;n<=700;n+=300){for(var h=n+" ",u=!0,p=0;p<s;++p){var l=r[p];if(e.font=h+o+l,i=e.measureText(a).width,t!=l){e.font=h+o+t+","+l;var c=e.measureText(a).width;u=u&&c!=i}}if(u)return!0}return!1}function u(){var i=!0;for(var o in n)n[o]<e&&(h(o)?(n[o]=e,l(vr),fr=null,_r.clear()):(++n[o],i=!1));i&&(clearInterval(t),t=void 0)}return function(i){var o=ho(i);if(o)for(var r=0,s=o.length;r<s;++r){var a=o[r];a in n||(n[a]=e,h(a)||(n[a]=0,void 0===t&&(t=setInterval(u,32))))}}}();function yr(){return fr||(fr=Hn(1,1)),fr}var mr,Er,Tr=(Er=vr,function(t){var i=Er[t];return null==i&&(mr||((mr=document.createElement("span")).textContent="M",mr.style.margin=mr.style.padding="0 !important",mr.style.position="absolute !important",mr.style.left="-99999px !important"),mr.style.font=t,document.body.appendChild(mr),i=Er[t]=mr.offsetHeight,document.body.removeChild(mr)),i});function Cr(t,i){var e=yr();return t!=e.font&&(e.font=t),e.measureText(i).width}function Rr(t,i,e,n){0!==i&&(t.translate(e,n),t.rotate(i),t.translate(-e,-n))}var Ir=[1,0,0,1,0,0];function wr(t,i,e,n,o,r,s,a,h,u,p){var l;1!=e&&(l=t.globalAlpha,t.globalAlpha=l*e),i&&t.setTransform.apply(t,i),t.drawImage(n,o,r,s,a,h,u,s*p,a*p),l&&(t.globalAlpha=l),i&&t.setTransform.apply(t,Ir)}var Mr=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Or=/^([a-z]*)$/i;function br(t){return"string"==typeof t?t:Ar(t)}!function(){var t={},i=0}();function Pr(t){return t[0]=si(t[0]+.5|0,0,255),t[1]=si(t[1]+.5|0,0,255),t[2]=si(t[2]+.5|0,0,255),t[3]=si(t[3],0,1),t}function Ar(t){var i=t[0];i!=(0|i)&&(i=i+.5|0);var e=t[1];e!=(0|e)&&(e=e+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+i+","+e+","+n+","+(void 0===t[3]?1:t[3])+")"}function Lr(t){return Array.isArray(t)?Ar(t):t}var Dr=function(){};Dr.prototype.drawCustom=function(t,i,e){},Dr.prototype.drawGeometry=function(t){},Dr.prototype.setStyle=function(t){},Dr.prototype.drawCircle=function(t,i){},Dr.prototype.drawFeature=function(t,i){},Dr.prototype.drawGeometryCollection=function(t,i){},Dr.prototype.drawLineString=function(t,i){},Dr.prototype.drawMultiLineString=function(t,i){},Dr.prototype.drawMultiPoint=function(t,i){},Dr.prototype.drawMultiPolygon=function(t,i){},Dr.prototype.drawPoint=function(t,i){},Dr.prototype.drawPolygon=function(t,i){},Dr.prototype.drawText=function(t,i){},Dr.prototype.setFillStrokeStyle=function(t,i){},Dr.prototype.setImageStyle=function(t,i){},Dr.prototype.setTextStyle=function(t,i){};var Fr=Dr,Nr=function(t){function i(i,e,n,o,r){t.call(this),this.context_=i,this.pixelRatio_=e,this.extent_=n,this.transform_=o,this.viewRotation_=r,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.drawImages_=function(t,i,e,n){if(this.image_){var o=de(t,i,e,2,this.transform_,this.pixelCoordinates_),r=this.context_,s=this.tmpLocalTransform_,a=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=a*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var u=0,p=o.length;u<p;u+=2){var l=o[u]-this.imageAnchorX_,c=o[u+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_){var _=l+this.imageAnchorX_,d=c+this.imageAnchorY_;sn(s,_,d,this.imageScale_,this.imageScale_,h,-_,-d),r.setTransform.apply(r,s)}r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,l,c,this.imageWidth_,this.imageHeight_)}0===h&&1==this.imageScale_||r.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(r.globalAlpha=a)}},i.prototype.drawText_=function(t,i,e,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=de(t,i,e,n,this.transform_,this.pixelCoordinates_),r=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);i<e;i+=n){var a=o[i]+this.textOffsetX_,h=o[i+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_){var u=sn(this.tmpLocalTransform_,a,h,this.textScale_,this.textScale_,s,-a,-h);r.setTransform.apply(r,u)}this.textStrokeState_&&r.strokeText(this.text_,a,h),this.textFillState_&&r.fillText(this.text_,a,h)}0===s&&1==this.textScale_||r.setTransform(1,0,0,1,0,0)}},i.prototype.moveToLineTo_=function(t,i,e,n,o){var r=this.context_,s=de(t,i,e,n,this.transform_,this.pixelCoordinates_);r.moveTo(s[0],s[1]);var a=s.length;o&&(a-=2);for(var h=2;h<a;h+=2)r.lineTo(s[h],s[h+1]);return o&&r.closePath(),e},i.prototype.drawRings_=function(t,i,e,n){for(var o=0,r=e.length;o<r;++o)i=this.moveToLineTo_(t,i,e[o],n,!0);return i},i.prototype.drawCircle=function(t){if(pe(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=function(t,i,e){var n=t.getFlatCoordinates();if(n){var o=t.getStride();return de(n,0,n.length,o,i,e)}return null}(t,this.transform_,this.pixelCoordinates_),e=i[2]-i[0],n=i[3]-i[1],o=Math.sqrt(e*e+n*n),r=this.context_;r.beginPath(),r.arc(i[0],i[1],o,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},i.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},i.prototype.drawGeometry=function(t){switch(t.getType()){case ce.POINT:this.drawPoint(t);break;case ce.LINE_STRING:this.drawLineString(t);break;case ce.POLYGON:this.drawPolygon(t);break;case ce.MULTI_POINT:this.drawMultiPoint(t);break;case ce.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case ce.MULTI_POLYGON:this.drawMultiPolygon(t);break;case ce.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case ce.CIRCLE:this.drawCircle(t)}},i.prototype.drawFeature=function(t,i){var e=i.getGeometryFunction()(t);e&&pe(this.extent_,e.getExtent())&&(this.setStyle(i),this.drawGeometry(e))},i.prototype.drawGeometryCollection=function(t){for(var i=t.getGeometriesArray(),e=0,n=i.length;e<n;++e)this.drawGeometry(i[e])},i.prototype.drawPoint=function(t){var i=t.getFlatCoordinates(),e=t.getStride();this.image_&&this.drawImages_(i,0,i.length,e),""!==this.text_&&this.drawText_(i,0,i.length,e)},i.prototype.drawMultiPoint=function(t){var i=t.getFlatCoordinates(),e=t.getStride();this.image_&&this.drawImages_(i,0,i.length,e),""!==this.text_&&this.drawText_(i,0,i.length,e)},i.prototype.drawLineString=function(t){if(pe(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,e=t.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(e,0,e.length,t.getStride(),!1),i.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},i.prototype.drawMultiLineString=function(t){var i=t.getExtent();if(pe(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getFlatCoordinates(),o=0,r=t.getEnds(),s=t.getStride();e.beginPath();for(var a=0,h=r.length;a<h;++a)o=this.moveToLineTo_(n,o,r[a],s,!1);e.stroke()}if(""!==this.text_){var u=t.getFlatMidpoints();this.drawText_(u,0,u.length,2)}}},i.prototype.drawPolygon=function(t){if(pe(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_;i.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(""!==this.text_){var e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}},i.prototype.drawMultiPolygon=function(t){if(pe(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_,e=t.getOrientedFlatCoordinates(),n=0,o=t.getEndss(),r=t.getStride();i.beginPath();for(var s=0,a=o.length;s<a;++s){var h=o[s];n=this.drawRings_(e,n,h,r)}this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(""!==this.text_){var u=t.getFlatInteriorPoints();this.drawText_(u,0,u.length,2)}}},i.prototype.setContextFillState_=function(t){var i=this.context_,e=this.contextFillState_;e?e.fillStyle!=t.fillStyle&&(e.fillStyle=i.fillStyle=t.fillStyle):(i.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},i.prototype.setContextStrokeState_=function(t){var i=this.context_,e=this.contextStrokeState_;e?(e.lineCap!=t.lineCap&&(e.lineCap=i.lineCap=t.lineCap),X&&(Zt(e.lineDash,t.lineDash)||i.setLineDash(e.lineDash=t.lineDash),e.lineDashOffset!=t.lineDashOffset&&(e.lineDashOffset=i.lineDashOffset=t.lineDashOffset)),e.lineJoin!=t.lineJoin&&(e.lineJoin=i.lineJoin=t.lineJoin),e.lineWidth!=t.lineWidth&&(e.lineWidth=i.lineWidth=t.lineWidth),e.miterLimit!=t.miterLimit&&(e.miterLimit=i.miterLimit=t.miterLimit),e.strokeStyle!=t.strokeStyle&&(e.strokeStyle=i.strokeStyle=t.strokeStyle)):(i.lineCap=t.lineCap,X&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.lineWidth=t.lineWidth,i.miterLimit=t.miterLimit,i.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},i.prototype.setContextTextState_=function(t){var i=this.context_,e=this.contextTextState_,n=t.textAlign?t.textAlign:"center";e?(e.font!=t.font&&(e.font=i.font=t.font),e.textAlign!=n&&(e.textAlign=i.textAlign=n),e.textBaseline!=t.textBaseline&&(e.textBaseline=i.textBaseline=t.textBaseline)):(i.font=t.font,i.textAlign=n,i.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},i.prototype.setFillStrokeStyle=function(t,i){if(t){var e=t.getColor();this.fillState_={fillStyle:Lr(e||ur)}}else this.fillState_=null;if(i){var n=i.getColor(),o=i.getLineCap(),r=i.getLineDash(),s=i.getLineDashOffset(),a=i.getLineJoin(),h=i.getWidth(),u=i.getMiterLimit();this.strokeState_={lineCap:void 0!==o?o:"round",lineDash:r||pr,lineDashOffset:s||0,lineJoin:void 0!==a?a:"round",lineWidth:this.pixelRatio_*(void 0!==h?h:1),miterLimit:void 0!==u?u:10,strokeStyle:Lr(n||lr)}}else this.strokeState_=null},i.prototype.setImageStyle=function(t){if(t){var i=t.getAnchor(),e=t.getImage(1),n=t.getOrigin(),o=t.getSize();this.imageAnchorX_=i[0],this.imageAnchorY_=i[1],this.imageHeight_=o[1],this.image_=e,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=o[0]}else this.image_=null},i.prototype.setTextStyle=function(t){if(t){var i=t.getFill();if(i){var e=i.getColor();this.textFillState_={fillStyle:Lr(e||ur)}}else this.textFillState_=null;var n=t.getStroke();if(n){var o=n.getColor(),r=n.getLineCap(),s=n.getLineDash(),a=n.getLineDashOffset(),h=n.getLineJoin(),u=n.getWidth(),p=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==r?r:"round",lineDash:s||pr,lineDashOffset:a||0,lineJoin:void 0!==h?h:"round",lineWidth:void 0!==u?u:1,miterLimit:void 0!==p?p:10,strokeStyle:Lr(o||lr)}}else this.textStrokeState_=null;var l=t.getFont(),c=t.getOffsetX(),_=t.getOffsetY(),d=t.getRotateWithView(),f=t.getRotation(),v=t.getScale(),g=t.getText(),y=t.getTextAlign(),m=t.getTextBaseline();this.textState_={font:void 0!==l?l:"10px sans-serif",textAlign:void 0!==y?y:"center",textBaseline:void 0!==m?m:"middle"},this.text_=void 0!==g?g:"",this.textOffsetX_=void 0!==c?this.pixelRatio_*c:0,this.textOffsetY_=void 0!==_?this.pixelRatio_*_:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==f?f:0,this.textScale_=this.pixelRatio_*(void 0!==v?v:1)}else this.text_=""},i}(Fr),Gr=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function Kr(t,i,e){return i+":"+t+":"+(e?br(e):"null")}Gr.prototype.clear=function(){this.cache_={},this.cacheSize_=0},Gr.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t=0;for(var i in this.cache_){var e=this.cache_[i];0!=(3&t++)||e.hasListener()||(delete this.cache_[i],--this.cacheSize_)}}},Gr.prototype.get=function(t,i,e){var n=Kr(t,i,e);return n in this.cache_?this.cache_[n]:null},Gr.prototype.set=function(t,i,e,n){var o=Kr(t,i,e);this.cache_[o]=n,++this.cacheSize_},Gr.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};var Zr=new Gr;function zr(t,i){Zr.expire()}function Ur(t,i){return t.zIndex-i.zIndex}var xr=[],jr=function(t){function i(i){t.call(this,i);var e=i.getViewport();this.context_=Hn(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=ro,e.insertBefore(this.canvas_,e.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=[1,0,0,1,0,0]}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.dispatchRenderEvent=function(t,i){var e=this.getMap(),n=this.context_;if(e.hasListener(t)){var o=i.extent,r=i.pixelRatio,s=i.viewState.rotation,a=this.getTransform(i),h=new Nr(n,r,o,a,s),u=new ar(t,h,i,n,null);e.dispatchEvent(u)}},i.prototype.getTransform=function(t){var i=t.viewState,e=this.canvas_.width/2,n=this.canvas_.height/2,o=t.pixelRatio/i.resolution,r=-o,s=-i.rotation,a=-i.center[0],h=-i.center[1];return sn(this.transform_,e,n,o,r,s,a,h)},i.prototype.renderFrame=function(t){if(t){var i=this.context_,e=t.pixelRatio,n=Math.round(t.size[0]*e),o=Math.round(t.size[1]*e);this.canvas_.width!=n||this.canvas_.height!=o?(this.canvas_.width=n,this.canvas_.height=o):i.clearRect(0,0,n,o);var r=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchRenderEvent(Jt,t);var s=t.layerStatesArray;!function(t,i){var e,n=t.length,o=Array(t.length);for(e=0;e<n;e++)o[e]={index:e,value:t[e]};for(o.sort(function(t,e){return i(t.value,e.value)||t.index-e.index}),e=0;e<t.length;e++)t[e]=o[e].value}(s,Ur),r&&(i.save(),Rr(i,r,n/2,o/2));var a,h,u=t.viewState.resolution;for(a=0,h=s.length;a<h;++a){var p=s[a],l=p.layer,c=this.getLayerRenderer(l);uo(p,u)&&p.sourceState==$n.READY&&(c.prepareFrame(t,p)&&c.composeFrame(t,p,i))}r&&i.restore(),this.dispatchRenderEvent($t,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},i.prototype.forEachLayerAtPixel=function(t,i,e,n,o,r,s){var a,h,u=i.viewState.resolution,p=i.layerStatesArray,l=p.length,c=nn(i.pixelToCoordinateTransform,t.slice());for(h=l-1;h>=0;--h){var _=p[h],d=_.layer;if(uo(_,u)&&r.call(s,d))if(a=this.getLayerRenderer(d).forEachLayerAtCoordinate(c,i,e,n,o))return a}},i.prototype.registerLayerRenderers=function(i){t.prototype.registerLayerRenderers.call(this,i);for(var e=0,n=i.length;e<n;++e){var o=i[e];r=o,xr.indexOf(r)>=0||xr.push(o)}var r},i}(function(t){function i(i){t.call(this),this.map_=i,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.dispatchRenderEvent=function(t,i){n()},i.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},i.prototype.calculateMatrices2D=function(t){var i=t.viewState,e=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;sn(e,t.size[0]/2,t.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),function(t){var i,e=(i=t)[0]*i[3]-i[1]*i[2];ii(0!==e,32);var n=t[0],o=t[1],r=t[2],s=t[3],a=t[4],h=t[5];t[0]=s/e,t[1]=-o/e,t[2]=-r/e,t[3]=n/e,t[4]=(r*h-s*a)/e,t[5]=-(n*h-o*a)/e}(en(n,e))},i.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},i.prototype.forEachFeatureAtCoordinate=function(t,i,e,n,o,s,a){var h,u=i.viewState,p=u.resolution;function l(t,e){var s=i.layerStates[r(e)].managed;if(!(r(t)in i.skippedFeatureUids)||s)return n.call(o,t,s?e:null)}var c=u.projection,_=t;if(c.canWrapX()){var d=c.getExtent(),f=ue(d),v=t[0];if(v<d[0]||v>d[2])_=[v+f*Math.ceil((d[0]-v)/f),t[1]]}var g,y=i.layerStatesArray;for(g=y.length-1;g>=0;--g){var m=y[g],E=m.layer;if(uo(m,p)&&s.call(a,E)){var T=this.getLayerRenderer(E),C=E.getSource();if(C&&(h=T.forEachFeatureAtCoordinate(C.getWrapX()?_:t,i,e,l)),h)return h}}},i.prototype.forEachLayerAtPixel=function(t,i,e,o,r,s,a){return n()},i.prototype.hasFeatureAtCoordinate=function(t,i,e,n,o){return void 0!==this.forEachFeatureAtCoordinate(t,i,e,R,this,n,o)},i.prototype.getLayerRenderer=function(t){var i=r(t);if(i in this.layerRenderers_)return this.layerRenderers_[i];for(var e,n=0,o=this.layerRendererConstructors_.length;n<o;++n){var s=this.layerRendererConstructors_[n];if(s.handles(t)){e=s.create(this,t);break}}if(!e)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[i]=e,this.layerRendererListeners_[i]=g(e,A.CHANGE,this.handleLayerRendererChange_,this),e},i.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},i.prototype.getLayerRenderers=function(){return this.layerRenderers_},i.prototype.getMap=function(){return this.map_},i.prototype.handleLayerRendererChange_=function(){this.map_.render()},i.prototype.removeLayerRendererByKey_=function(t){var i=this.layerRenderers_[t];return delete this.layerRenderers_[t],E(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],i},i.prototype.removeUnusedLayerRenderers_=function(t,i){for(var e in this.layerRenderers_)i&&e in i.layerStates||this.removeLayerRendererByKey_(e).dispose()},i.prototype.renderFrame=function(t){n()},i.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(zr)},i.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var i in this.layerRenderers_)if(!(i in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},i}(C)),Vr=function(t){function i(i){t.call(this,i),this.renderedResolution,this.transform_=[1,0,0,1,0,0]}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.clip=function(t,i,e){var n=i.pixelRatio,o=i.size[0]*n,r=i.size[1]*n,s=i.viewState.rotation,a=ae(e),h=he(e),u=ie(e),p=te(e);nn(i.coordinateToPixelTransform,a),nn(i.coordinateToPixelTransform,h),nn(i.coordinateToPixelTransform,u),nn(i.coordinateToPixelTransform,p),t.save(),Rr(t,-s,o/2,r/2),t.beginPath(),t.moveTo(a[0]*n,a[1]*n),t.lineTo(h[0]*n,h[1]*n),t.lineTo(u[0]*n,u[1]*n),t.lineTo(p[0]*n,p[1]*n),t.clip(),Rr(t,s,o/2,r/2)},i.prototype.dispatchComposeEvent_=function(t,i,e,n){var o=this.getLayer();if(o.hasListener(t)){var r=e.size[0]*e.pixelRatio,s=e.size[1]*e.pixelRatio,a=e.viewState.rotation;Rr(i,-a,r/2,s/2);var h=void 0!==n?n:this.getTransform(e,0),u=new Nr(i,e.pixelRatio,e.extent,h,e.viewState.rotation),p=new ar(t,u,e,i,null);o.dispatchEvent(p),Rr(i,a,r/2,s/2)}},i.prototype.forEachLayerAtCoordinate=function(t,i,e,n,o){return this.forEachFeatureAtCoordinate(t,i,e,R)?n.call(o,this.getLayer(),null):void 0},i.prototype.postCompose=function(t,i,e,n){this.dispatchComposeEvent_($t,t,i,n)},i.prototype.preCompose=function(t,i,e){this.dispatchComposeEvent_(Jt,t,i,e)},i.prototype.dispatchRenderEvent=function(t,i,e){this.dispatchComposeEvent_(kt,t,i,e)},i.prototype.getTransform=function(t,i){var e=t.viewState,n=t.pixelRatio,o=n*t.size[0]/2,r=n*t.size[1]/2,s=n/e.resolution,a=-s,h=-e.rotation,u=-e.center[0]+i,p=-e.center[1];return sn(this.transform_,o,r,s,a,h,u,p)},i.prototype.composeFrame=function(t,i,e){n()},i.prototype.prepareFrame=function(t,i){return n()},i}(function(t){function i(i){t.call(this),this.layer_=i}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.createLoadedTileFinder=function(t,i,e){return function(n,o){return t.forEachLoadedTile(i,n,o,function(t){e[n]||(e[n]={}),e[n][t.tileCoord.toString()]=t})}},i.prototype.forEachFeatureAtCoordinate=function(t,i,e,n){},i.prototype.getLayer=function(){return this.layer_},i.prototype.handleImageChange_=function(t){t.target.getState()===nr.LOADED&&this.renderIfReadyAndVisible()},i.prototype.hasFeatureAtCoordinate=function(t,i){return!1},i.prototype.loadImage=function(t){var i=t.getState();return i!=nr.LOADED&&i!=nr.ERROR&&g(t,A.CHANGE,this.handleImageChange_,this),i==nr.IDLE&&(t.load(),i=t.getState()),i==nr.LOADED},i.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==$n.READY&&this.changed()},i.prototype.scheduleExpireCache=function(t,i){if(i.canExpireCache()){var e=function(t,i,e){var n=r(t);n in e.usedTiles&&t.expireCache(e.viewState.projection,e.usedTiles[n])}.bind(null,i);t.postRenderFunctions.push(e)}},i.prototype.updateUsedTiles=function(t,i,e,n){var o=r(i),s=e.toString();o in t?s in t[o]?t[o][s].extend(n):t[o][s]=n:(t[o]={},t[o][s]=n)},i.prototype.manageTilePyramid=function(t,i,e,n,o,s,a,h,u,p){var l=r(i);l in t.wantedTiles||(t.wantedTiles[l]={});var c,_,d,f,v,g,y=t.wantedTiles[l],m=t.tileQueue;for(g=e.getMinZoom();g<=a;++g)for(_=e.getTileRangeForExtentAndZ(s,g,_),d=e.getResolution(g),f=_.minX;f<=_.maxX;++f)for(v=_.minY;v<=_.maxY;++v)a-g<=h?((c=i.getTile(g,f,v,n,o)).getState()==ti.IDLE&&(y[c.getKey()]=!0,m.isKeyQueued(c.getKey())||m.enqueue([c,l,e.getTileCoordCenter(c.tileCoord),d])),void 0!==u&&u.call(p,c)):i.useTile(g,f,v,o)},i}(L)),Br=function(t){function i(i){t.call(this,i),this.coordinateToCanvasPixelTransform=[1,0,0,1,0,0],this.hitCanvasContext_=null}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.composeFrame=function(t,i,e){this.preCompose(e,t);var n=this.getImage();if(n){var o=i.extent,r=void 0!==o&&!ji(o,t.extent)&&pe(o,t.extent);r&&this.clip(e,t,o);var s=this.getImageTransform(),a=e.globalAlpha;e.globalAlpha=i.opacity;var h=s[4],u=s[5],p=n.width*s[0],l=n.height*s[3];p>=.5&&l>=.5&&e.drawImage(n,0,0,+n.width,+n.height,Math.round(h),Math.round(u),Math.round(p),Math.round(l)),e.globalAlpha=a,r&&e.restore()}this.postCompose(e,t,i)},i.prototype.getImage=function(){return n()},i.prototype.getImageTransform=function(){return n()},i.prototype.forEachLayerAtCoordinate=function(t,i,e,n,o){if(this.getImage()){var r=nn(this.coordinateToCanvasPixelTransform,t.slice());Pi(r,i.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=Hn(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),r[0],r[1],1,1,0,0,1,1);var s=this.hitCanvasContext_.getImageData(0,0,1,1).data;return s[3]>0?n.call(o,this.getLayer(),s):void 0}},i}(Vr),Yr=function(t){function i(e){if(t.call(this,e),this.image_=null,this.imageTransform_=[1,0,0,1,0,0],this.skippedFeatures_=[],this.vectorRenderer_=null,e.getType()===rr.VECTOR)for(var n=0,o=xr.length;n<o;++n){var r=xr[n];if(r!==i&&r.handles(e)){this.vectorRenderer_=new r(e);break}}}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},i.prototype.getImage=function(){return this.image_?this.image_.getImage():null},i.prototype.getImageTransform=function(){return this.imageTransform_},i.prototype.prepareFrame=function(t,i){var e,n=t.pixelRatio,o=t.size,r=t.viewState,s=r.center,a=r.resolution,h=this.getLayer().getSource(),u=t.viewHints,l=this.vectorRenderer_,c=t.extent;if(l||void 0===i.extent||(c=se(c,i.extent)),!u[Ti]&&!u[Ci]&&!le(c)){var _=r.projection,d=this.skippedFeatures_;if(l){var f=l.context,v=p({},t,{size:[ue(c)/a,re(c)/a],viewState:p({},t.viewState,{rotation:0})}),g=Object.keys(v.skippedFeatureUids).sort();e=new or(c,a,n,f.canvas,function(t){!l.prepareFrame(v,i)||!l.replayGroupChanged&&Zt(d,g)||(f.canvas.width=v.size[0]*n,f.canvas.height=v.size[1]*n,l.compose(f,v,i),d=g,t())})}else e=h.getImage(c,a,n,_);e&&this.loadImage(e)&&(this.image_=e,this.skippedFeatures_=d)}if(this.image_){var y=(e=this.image_).getExtent(),m=e.getResolution(),E=e.getPixelRatio(),T=n*m/(a*E),C=sn(this.imageTransform_,n*o[0]/2,n*o[1]/2,T,T,0,E*(y[0]-s[0])/m,E*(s[1]-y[3])/m);sn(this.coordinateToCanvasPixelTransform,n*o[0]/2-C[4],n*o[1]/2-C[5],n/a,-n/a,0,-s[0],-s[1]),this.renderedResolution=m*n/E}return!!this.image_},i.prototype.forEachFeatureAtCoordinate=function(i,e,n,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(i,e,n,o):t.prototype.forEachFeatureAtCoordinate.call(this,i,e,n,o)},i}(Br);Yr.handles=function(t){return t.getType()===rr.IMAGE||t.getType()===rr.VECTOR&&t.getRenderMode()===sr},Yr.create=function(t,i){return new Yr(i)};var Hr=Yr,Wr=function(t,i,e,n){this.minX=t,this.maxX=i,this.minY=e,this.maxY=n};function Xr(t,i,e,n,o){return void 0!==o?(o.minX=t,o.maxX=i,o.minY=e,o.maxY=n,o):new Wr(t,i,e,n)}Wr.prototype.contains=function(t){return this.containsXY(t[1],t[2])},Wr.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},Wr.prototype.containsXY=function(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY},Wr.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},Wr.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},Wr.prototype.getHeight=function(){return this.maxY-this.minY+1},Wr.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},Wr.prototype.getWidth=function(){return this.maxX-this.minX+1},Wr.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY};var qr=Wr,Qr=function(t){function i(i,e){t.call(this,i),this.context=e?null:Hn(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new qr(0,0,0,0),this.imageTransform_=[1,0,0,1,0,0],this.zDirection=0}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.isDrawableTile_=function(t){var i=this.getLayer(),e=t.getState(),n=i.getUseInterimTilesOnError();return e==ti.LOADED||e==ti.EMPTY||e==ti.ERROR&&!n},i.prototype.getTile=function(t,i,e,n,o){var r=this.getLayer(),s=r.getSource().getTile(t,i,e,n,o);return s.getState()==ti.ERROR&&(r.getUseInterimTilesOnError()?r.getPreload()>0&&(this.newTiles_=!0):s.setState(ti.LOADED)),this.isDrawableTile_(s)||(s=s.getInterimTile()),s},i.prototype.prepareFrame=function(t,i){var e=t.pixelRatio,n=t.size,o=t.viewState,s=o.projection,a=o.resolution,h=o.center,u=this.getLayer(),p=u.getSource(),l=p.getRevision(),c=p.getTileGridForProjection(s),_=c.getZForResolution(a,this.zDirection),d=c.getResolution(_),f=Math.round(a/d)||1,v=t.extent;if(void 0!==i.extent&&(v=se(v,i.extent)),le(v))return!1;var g=c.getTileRangeForExtentAndZ(v,_),y=c.getTileRangeExtent(_,g),m=p.getTilePixelRatio(e),E={};E[_]={};var T,C,R,I=this.createLoadedTileFinder(p,s,E),w=t.viewHints,M=w[Ti]||w[Ci],O=this.tmpExtent,b=this.tmpTileRange_;for(this.newTiles_=!1,C=g.minX;C<=g.maxX;++C)for(R=g.minY;R<=g.maxY;++R)if(!(Date.now()-t.time>16&&M)){if(T=this.getTile(_,C,R,e,s),this.isDrawableTile_(T)){var P=r(this);if(T.getState()==ti.LOADED){E[_][T.tileCoord.toString()]=T;var A=T.inTransition(P);this.newTiles_||!A&&-1!==this.renderedTiles.indexOf(T)||(this.newTiles_=!0)}if(1===T.getAlpha(P,t.time))continue}var L=c.getTileCoordChildTileRange(T.tileCoord,b,O),D=!1;L&&(D=I(_+1,L)),D||c.forEachTileCoordParentTileRange(T.tileCoord,I,null,b,O)}var F=d*e/m*f;if(!(this.renderedResolution&&Date.now()-t.time>16&&M)&&(this.newTiles_||!this.renderedExtent_||!ji(this.renderedExtent_,v)||this.renderedRevision!=l||f!=this.oversampling_||!M&&F!=this.renderedResolution)){var N=this.context;if(N){var G=p.getTilePixelSize(_,e,s),K=Math.round(g.getWidth()*G[0]/f),Z=Math.round(g.getHeight()*G[1]/f),z=N.canvas;z.width!=K||z.height!=Z?(this.oversampling_=f,z.width=K,z.height=Z):(this.renderedExtent_&&!Xi(y,this.renderedExtent_)&&N.clearRect(0,0,K,Z),f=this.oversampling_)}this.renderedTiles.length=0;var U,x,j,V,B,Y,H,W,X,q,Q=Object.keys(E).map(Number);for(Q.sort(function(t,i){return t===_?1:i===_?-1:t>i?1:t<i?-1:0}),V=0,B=Q.length;V<B;++V)for(var $ in j=Q[V],x=p.getTilePixelSize(j,e,s),U=c.getResolution(j)/d,H=m*p.getGutterForProjection(s),W=E[j])T=W[$],C=((Y=c.getTileCoordExtent(T.getTileCoord(),O))[0]-y[0])/d*m/f,R=(y[3]-Y[3])/d*m/f,X=x[0]*U/f,q=x[1]*U/f,this.drawTileImage(T,t,i,C,R,X,q,H,_===j),this.renderedTiles.push(T);this.renderedRevision=l,this.renderedResolution=d*e/m*f,this.renderedExtent_=y}var J=this.renderedResolution/a,k=sn(this.imageTransform_,e*n[0]/2,e*n[1]/2,J,J,0,(this.renderedExtent_[0]-h[0])/this.renderedResolution*e,(h[1]-this.renderedExtent_[3])/this.renderedResolution*e);return sn(this.coordinateToCanvasPixelTransform,e*n[0]/2-k[4],e*n[1]/2-k[5],e/a,-e/a,0,-h[0],-h[1]),this.updateUsedTiles(t.usedTiles,p,_,g),this.manageTilePyramid(t,p,c,e,s,v,_,u.getPreload()),this.scheduleExpireCache(t,p),this.renderedTiles.length>0},i.prototype.drawTileImage=function(t,i,e,n,o,s,a,h,u){var p=this.getTileImage(t);if(p){var l=r(this),c=u?t.getAlpha(l,i.time):1,_=this.getLayer().getSource();1!==c||_.getOpaque(i.viewState.projection)||this.context.clearRect(n,o,s,a);var d=c!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(p,h,h,p.width-2*h,p.height-2*h,n,o,s,a),d&&this.context.restore(),1!==c?i.animate=!0:u&&t.endTransition(l)}},i.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},i.prototype.getImageTransform=function(){return this.imageTransform_},i.prototype.getTileImage=function(t){return t.getImage()},i}(Br);Qr.handles=function(t){return t.getType()===rr.TILE},Qr.create=function(t,i){return new Qr(i)},Qr.prototype.getLayer;var $r=Qr,Jr=e(0),kr=e.n(Jr),Sr=function(){};Sr.prototype.getReplay=function(t,i){return n()},Sr.prototype.isEmpty=function(){return n()},Sr.prototype.addDeclutter=function(t){return n()};var ts=Sr,is={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function es(t,i,e,n){for(var o=t[i],r=t[i+1],s=0,a=i+n;a<e;a+=n){var h=t[a],u=t[a+1];s+=Math.sqrt((h-o)*(h-o)+(u-r)*(u-r)),o=h,r=u}return s}function ns(t,i,e,n,o,r,s,a){for(var h,u,p,l=[],c=t[i]>t[e-n],_=o.length,d=t[i],f=t[i+1],v=t[i+=n],g=t[i+1],y=0,m=Math.sqrt(Math.pow(v-d,2)+Math.pow(g-f,2)),E="",T=0,C=0;C<_;++C){u=c?_-C-1:C;var R=o.charAt(u),I=r(E=c?R+E:E+R)-T;T+=I;for(var w=s+I/2;i<e-n&&y+m<w;)d=v,f=g,v=t[i+=n],g=t[i+1],y+=m,m=Math.sqrt(Math.pow(v-d,2)+Math.pow(g-f,2));var M=w-y,O=Math.atan2(g-f,v-d);if(c&&(O+=O>0?-Math.PI:Math.PI),void 0!==p){var b=O-p;if(b+=b>Math.PI?-2*Math.PI:b<-Math.PI?2*Math.PI:0,Math.abs(b)>a)return null}var P=M/m,A=ci(d,v,P),L=ci(f,g,P);p==O?(c&&(h[0]=A,h[1]=L,h[2]=I/2),h[4]=E):(T=I,h=[A,L,I/2,O,E=R],c?l.unshift(h):l.push(h),p=O),s+=I}return l}var os={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},rs=[os.FILL],ss=[os.STROKE],as=[os.BEGIN_PATH],hs=[os.CLOSE_PATH],us=os,ps=[is.POLYGON,is.CIRCLE,is.LINE_STRING,is.IMAGE,is.TEXT,is.DEFAULT],ls={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},cs=[1/0,1/0,-1/0,-1/0],_s=[1,0,0,1,0,0],ds=function(t){function i(i,e,n,o,r,s){t.call(this),this.declutterTree=s,this.tolerance=i,this.maxExtent=e,this.overlaps=r,this.pixelRatio=o,this.maxLineWidth=0,this.resolution=n,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.replayTextBackground_=function(t,i,e,n,o,r,s){t.beginPath(),t.moveTo.apply(t,i),t.lineTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,o),t.lineTo.apply(t,i),r&&(this.alignFill_=r[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},i.prototype.replayImage_=function(t,i,e,n,o,r,s,a,h,u,p,l,c,_,d,f,v,g){var y=v||g;i-=o*=c,e-=r*=c;var m,E,T,C,R=d+u>n.width?n.width-u:d,I=a+p>n.height?n.height-p:a,w=f[3]+R*c+f[1],M=f[0]+I*c+f[2],O=i-f[3],b=e-f[0];(y||0!==l)&&(m=[O,b],E=[O+w,b],T=[O+w,b+M],C=[O,b+M]);var P=null;if(0!==l){var A=i+o,L=e+r;P=sn(_s,A,L,1,1,l,-A,-L),Wi(cs),Qi(cs,nn(_s,m)),Qi(cs,nn(_s,E)),Qi(cs,nn(_s,T)),Qi(cs,nn(_s,C))}else Hi(O,b,O+w,b+M,cs);var D=t.canvas,F=g?g[2]*c/2:0,N=cs[0]-F<=D.width&&cs[2]+F>=0&&cs[1]-F<=D.height&&cs[3]+F>=0;if(_&&(i=Math.round(i),e=Math.round(e)),s){if(!N&&1==s[4])return;qi(s,cs);var G=N?[t,P?P.slice(0):null,h,n,u,p,R,I,i,e,c]:null;G&&y&&G.push(v,g,m,E,T,C),s.push(G)}else N&&(y&&this.replayTextBackground_(t,m,E,T,C,v,g),wr(t,P,h,n,u,p,R,I,i,e,c))},i.prototype.applyPixelRatio=function(t){var i=this.pixelRatio;return 1==i?t:t.map(function(t){return t*i})},i.prototype.appendFlatCoordinates=function(t,i,e,n,o,r){var s=this.coordinates.length,a=this.getBufferedMaxExtent();r&&(i+=n);var h,u,p,l=[t[i],t[i+1]],c=[NaN,NaN],_=!0;for(h=i+n;h<e;h+=n)c[0]=t[h],c[1]=t[h+1],(p=Bi(a,c))!==u?(_&&(this.coordinates[s++]=l[0],this.coordinates[s++]=l[1]),this.coordinates[s++]=c[0],this.coordinates[s++]=c[1],_=!1):p===Gi.INTERSECTING?(this.coordinates[s++]=c[0],this.coordinates[s++]=c[1],_=!1):_=!0,l[0]=c[0],l[1]=c[1],u=p;return(o&&_||h===i+n)&&(this.coordinates[s++]=l[0],this.coordinates[s++]=l[1]),s},i.prototype.drawCustomCoordinates_=function(t,i,e,n,o){for(var r=0,s=e.length;r<s;++r){var a=e[r],h=this.appendFlatCoordinates(t,i,a,n,!1,!1);o.push(h),i=a}return i},i.prototype.drawCustom=function(t,i,e){this.beginGeometry(t,i);var n,o,r,s,a,h=t.getType(),u=t.getStride(),p=this.coordinates.length;if(h==ce.MULTI_POLYGON){n=(t=t).getOrientedFlatCoordinates(),s=[];var l=t.getEndss();a=0;for(var c=0,_=l.length;c<_;++c){var d=[];a=this.drawCustomCoordinates_(n,a,l[c],u,d),s.push(d)}this.instructions.push([us.CUSTOM,p,s,t,e,Tn])}else h==ce.POLYGON||h==ce.MULTI_LINE_STRING?(r=[],n=h==ce.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(n,0,t.getEnds(),u,r),this.instructions.push([us.CUSTOM,p,r,t,e,En])):h==ce.LINE_STRING||h==ce.MULTI_POINT?(n=t.getFlatCoordinates(),o=this.appendFlatCoordinates(n,0,n.length,u,!1,!1),this.instructions.push([us.CUSTOM,p,o,t,e,mn])):h==ce.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),o=this.coordinates.length,this.instructions.push([us.CUSTOM,p,o,t,e]));this.endGeometry(t,i)},i.prototype.beginGeometry=function(t,i){this.beginGeometryInstruction1_=[us.BEGIN_GEOMETRY,i,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[us.BEGIN_GEOMETRY,i,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},i.prototype.finish=function(){},i.prototype.fill_=function(t){if(this.alignFill_){var i=nn(this.renderedTransform_,[0,0]),e=512*this.pixelRatio;t.translate(i[0]%e,i[1]%e),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,Ir)},i.prototype.setStrokeStyle_=function(t,i){t.strokeStyle=i[1],t.lineWidth=i[2],t.lineCap=i[3],t.lineJoin=i[4],t.miterLimit=i[5],X&&(t.lineDashOffset=i[7],t.setLineDash(i[6]))},i.prototype.renderDeclutter_=function(t,i){if(t&&t.length>5){var e=t[4];if(1==e||e==t.length-5){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:i};if(!this.declutterTree.collides(n)){this.declutterTree.insert(n);for(var o=5,r=t.length;o<r;++o){var s=t[o];s&&(s.length>11&&this.replayTextBackground_(s[0],s[13],s[14],s[15],s[16],s[11],s[12]),wr.apply(void 0,s))}}t.length=5,Wi(t)}}},i.prototype.replay_=function(t,i,e,n,o,s,a){var h;this.pixelCoordinates_&&Zt(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=de(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),en(this.renderedTransform_,i));for(var u,p,l,_,d,f,v,g,y,m,E,T,C=!c(e),R=0,I=n.length,w=0,M=0,O=0,b=null,P=null,A=this.coordinateCache_,L=this.viewRotation_,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:L},F=this.instructions!=n||this.overlaps?0:200;R<I;){var N=n[R];switch(N[0]){case us.BEGIN_GEOMETRY:m=N[1],C&&e[r(m)]||!m.getGeometry()?R=N[2]:void 0===a||pe(a,m.getGeometry().getExtent())?++R:R=N[2]+1;break;case us.BEGIN_PATH:M>F&&(this.fill_(t),M=0),O>F&&(t.stroke(),O=0),M||O||(t.beginPath(),_=d=NaN),++R;break;case us.CIRCLE:var G=h[w=N[1]],K=h[w+1],Z=h[w+2]-G,z=h[w+3]-K,U=Math.sqrt(Z*Z+z*z);t.moveTo(G+U,K),t.arc(G,K,U,0,2*Math.PI,!0),++R;break;case us.CLOSE_PATH:t.closePath(),++R;break;case us.CUSTOM:w=N[1],u=N[2];var x=N[3],j=N[4],V=6==N.length?N[5]:void 0;D.geometry=x,D.feature=m,R in A||(A[R]=[]);var B=A[R];V?V(h,w,u,2,B):(B[0]=h[w],B[1]=h[w+1],B.length=2),j(B,D),++R;break;case us.DRAW_IMAGE:w=N[1],u=N[2],y=N[3],p=N[4],l=N[5],g=s?null:N[6];var Y=N[7],H=N[8],W=N[9],X=N[10],q=N[11],Q=N[12],$=N[13],J=N[14],k=void 0,S=void 0,tt=void 0;for(N.length>16?(k=N[15],S=N[16],tt=N[17]):(k=cr,S=tt=!1),q&&(Q+=L);w<u;w+=2)this.replayImage_(t,h[w],h[w+1],y,p,l,g,Y,H,W,X,Q,$,o,J,k,S?b:null,tt?P:null);this.renderDeclutter_(g,m),++R;break;case us.DRAW_CHARS:var it=N[1],et=N[2],nt=N[3];g=s?null:N[4];var ot=N[5],rt=N[6],st=N[7],at=N[8],ht=N[9],ut=N[10],pt=N[11],lt=N[12],ct=N[13],_t=N[14],dt=es(h,it,et,2),ft=at(lt);if(ot||ft<=dt){var vt=this.textStates[ct].textAlign,gt=ns(h,it,et,2,lt,at,(dt-ft)*ls[vt],st);if(gt){var yt=void 0,mt=void 0,Et=void 0,Tt=void 0,Ct=void 0;if(ut)for(yt=0,mt=gt.length;yt<mt;++yt)Et=(Ct=gt[yt])[4],Tt=this.getImage(Et,ct,"",ut),p=Ct[2]+pt,l=nt*Tt.height+2*(.5-nt)*pt-ht,this.replayImage_(t,Ct[0],Ct[1],Tt,p,l,g,Tt.height,1,0,0,Ct[3],_t,!1,Tt.width,cr,null,null);if(rt)for(yt=0,mt=gt.length;yt<mt;++yt)Et=(Ct=gt[yt])[4],Tt=this.getImage(Et,ct,rt,""),p=Ct[2],l=nt*Tt.height-ht,this.replayImage_(t,Ct[0],Ct[1],Tt,p,l,g,Tt.height,1,0,0,Ct[3],_t,!1,Tt.width,cr,null,null)}}this.renderDeclutter_(g,m),++R;break;case us.END_GEOMETRY:if(void 0!==s){var Rt=s(m=N[1]);if(Rt)return Rt}++R;break;case us.FILL:F?M++:this.fill_(t),++R;break;case us.MOVE_TO_LINE_TO:for(w=N[1],u=N[2],E=h[w],v=(T=h[w+1])+.5|0,(f=E+.5|0)===_&&v===d||(t.moveTo(E,T),_=f,d=v),w+=2;w<u;w+=2)f=(E=h[w])+.5|0,v=(T=h[w+1])+.5|0,w!=u-2&&f===_&&v===d||(t.lineTo(E,T),_=f,d=v);++R;break;case us.SET_FILL_STYLE:b=N,this.alignFill_=N[2],M&&(this.fill_(t),M=0,O&&(t.stroke(),O=0)),t.fillStyle=N[1],++R;break;case us.SET_STROKE_STYLE:P=N,O&&(t.stroke(),O=0),this.setStrokeStyle_(t,N),++R;break;case us.STROKE:F?O++:t.stroke(),++R;break;default:++R}}M&&this.fill_(t),O&&t.stroke()},i.prototype.replay=function(t,i,e,n,o){this.viewRotation_=e,this.replay_(t,i,n,this.instructions,o,void 0,void 0)},i.prototype.replayHitDetection=function(t,i,e,n,o,r){return this.viewRotation_=e,this.replay_(t,i,n,this.hitDetectionInstructions,!0,o,r)},i.prototype.reverseHitDetectionInstructions=function(){var t,i=this.hitDetectionInstructions;i.reverse();var e,n,o=i.length,r=-1;for(t=0;t<o;++t)(n=(e=i[t])[0])==us.END_GEOMETRY?r=t:n==us.BEGIN_GEOMETRY&&(e[2]=t,Gt(this.hitDetectionInstructions,r,t),r=-1)},i.prototype.setFillStrokeStyle=function(t,i){var e=this.state;if(t){var n=t.getColor();e.fillStyle=Lr(n||ur)}else e.fillStyle=void 0;if(i){var o=i.getColor();e.strokeStyle=Lr(o||lr);var r=i.getLineCap();e.lineCap=void 0!==r?r:"round";var s=i.getLineDash();e.lineDash=s?s.slice():pr;var a=i.getLineDashOffset();e.lineDashOffset=a||0;var h=i.getLineJoin();e.lineJoin=void 0!==h?h:"round";var u=i.getWidth();e.lineWidth=void 0!==u?u:1;var p=i.getMiterLimit();e.miterLimit=void 0!==p?p:10,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0},i.prototype.createFill=function(t,i){var e=t.fillStyle,n=[us.SET_FILL_STYLE,e];return"string"!=typeof e&&n.push(!0),n},i.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},i.prototype.createStroke=function(t){return[us.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},i.prototype.updateFillStyle=function(t,i,e){var n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(i.call(this,t,e)),t.currentFillStyle=n)},i.prototype.updateStrokeStyle=function(t,i){var e=t.strokeStyle,n=t.lineCap,o=t.lineDash,r=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=e||t.currentLineCap!=n||o!=t.currentLineDash&&!Zt(t.currentLineDash,o)||t.currentLineDashOffset!=r||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(void 0!==e&&i.call(this,t),t.currentStrokeStyle=e,t.currentLineCap=n,t.currentLineDash=o,t.currentLineDashOffset=r,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=h)},i.prototype.endGeometry=function(t,i){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[us.END_GEOMETRY,i];this.instructions.push(e),this.hitDetectionInstructions.push(e)},i.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=zi(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Zi(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},i}(Fr),fs=function(t){function i(i,e,n,o,r,s){t.call(this,i,e,n,o,r,s),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.drawCoordinates_=function(t,i,e,n){return this.appendFlatCoordinates(t,i,e,n,!1,!1)},i.prototype.drawPoint=function(t,i){if(this.image_){this.beginGeometry(t,i);var e=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(e,0,e.length,n);this.instructions.push([us.DRAW_IMAGE,o,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([us.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,i)}},i.prototype.drawMultiPoint=function(t,i){if(this.image_){this.beginGeometry(t,i);var e=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(e,0,e.length,n);this.instructions.push([us.DRAW_IMAGE,o,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([us.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,i)}},i.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0},i.prototype.setImageStyle=function(t,i){var e=t.getAnchor(),n=t.getSize(),o=t.getHitDetectionImage(1),r=t.getImage(1),s=t.getOrigin();this.anchorX_=e[0],this.anchorY_=e[1],this.declutterGroup_=i,this.hitDetectionImage_=o,this.image_=r,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=n[0]},i}(ds),vs=function(t){function i(i,e,n,o,r,s){t.call(this,i,e,n,o,r,s)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.drawFlatCoordinates_=function(t,i,e,n){var o=this.coordinates.length,r=this.appendFlatCoordinates(t,i,e,n,!1,!1),s=[us.MOVE_TO_LINE_TO,o,r];return this.instructions.push(s),this.hitDetectionInstructions.push(s),e},i.prototype.drawLineString=function(t,i){var e=this.state,n=e.strokeStyle,o=e.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([us.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],as);var r=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(r,0,r.length,s),this.hitDetectionInstructions.push(ss),this.endGeometry(t,i)}},i.prototype.drawMultiLineString=function(t,i){var e=this.state,n=e.strokeStyle,o=e.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([us.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],as);for(var r=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),h=0,u=0,p=r.length;u<p;++u)h=this.drawFlatCoordinates_(s,h,r[u],a);this.hitDetectionInstructions.push(ss),this.endGeometry(t,i)}},i.prototype.finish=function(){var t=this.state;null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(ss),this.reverseHitDetectionInstructions(),this.state=null},i.prototype.applyStroke=function(i){null!=i.lastStroke&&i.lastStroke!=this.coordinates.length&&(this.instructions.push(ss),i.lastStroke=this.coordinates.length),i.lastStroke=0,t.prototype.applyStroke.call(this,i),this.instructions.push(as)},i}(ds),gs=function(t){function i(i,e,n,o,r,s){t.call(this,i,e,n,o,r,s)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.drawFlatCoordinatess_=function(t,i,e,n){var o=this.state,r=void 0!==o.fillStyle,s=null!=o.strokeStyle,a=e.length;this.instructions.push(as),this.hitDetectionInstructions.push(as);for(var h=0;h<a;++h){var u=e[h],p=this.coordinates.length,l=this.appendFlatCoordinates(t,i,u,n,!0,!s),c=[us.MOVE_TO_LINE_TO,p,l];this.instructions.push(c),this.hitDetectionInstructions.push(c),s&&(this.instructions.push(hs),this.hitDetectionInstructions.push(hs)),i=u}return r&&(this.instructions.push(rs),this.hitDetectionInstructions.push(rs)),s&&(this.instructions.push(ss),this.hitDetectionInstructions.push(ss)),i},i.prototype.drawCircle=function(t,i){var e=this.state,n=e.fillStyle,o=e.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(t),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([us.SET_FILL_STYLE,br(ur)]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([us.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);var r=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(r,0,r.length,s,!1,!1);var h=[us.CIRCLE,a];this.instructions.push(as,h),this.hitDetectionInstructions.push(as,h),this.hitDetectionInstructions.push(rs),void 0!==e.fillStyle&&this.instructions.push(rs),void 0!==e.strokeStyle&&(this.instructions.push(ss),this.hitDetectionInstructions.push(ss)),this.endGeometry(t,i)}},i.prototype.drawPolygon=function(t,i){var e=this.state,n=e.fillStyle,o=e.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(t),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([us.SET_FILL_STYLE,br(ur)]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([us.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);var r=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,r,a),this.endGeometry(t,i)}},i.prototype.drawMultiPolygon=function(t,i){var e=this.state,n=e.fillStyle,o=e.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(t),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([us.SET_FILL_STYLE,br(ur)]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([us.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);for(var r=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),h=0,u=0,p=r.length;u<p;++u)h=this.drawFlatCoordinatess_(s,h,r[u],a);this.endGeometry(t,i)}},i.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var i=this.coordinates,e=0,n=i.length;e<n;++e)i[e]=Rn(i[e],t)},i.prototype.setFillStrokeStyles_=function(t){var i=this.state;void 0!==i.fillStyle&&this.updateFillStyle(i,this.createFill,t),void 0!==i.strokeStyle&&this.updateStrokeStyle(i,this.applyStroke)},i}(ds);function ys(t,i,e,n,o){var r,s,a,h,u,p,l,c,_,d=e,f=e,v=0,g=0,y=e;for(r=e;r<n;r+=o){var m=i[r],E=i[r+1];void 0!==h&&(c=m-h,_=E-u,a=Math.sqrt(c*c+_*_),void 0!==p&&(g+=s,Math.acos((p*c+l*_)/(s*a))>t&&(g>v&&(v=g,d=y,f=r),g=0,y=r-o)),s=a,p=c,l=_),h=m,u=E}return(g+=a)>v?[y,r]:[d,f]}var ms="line";var Es={Circle:gs,Default:ds,Image:fs,LineString:vs,Polygon:gs,Text:function(t){function i(i,e,n,o,r,s){t.call(this,i,e,n,o,r,s),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},_r.prune()}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.drawText=function(t,i){var e=this.textFillState_,n=this.textStrokeState_,o=this.textState_;if(""!==this.text_&&o&&(e||n)){var r,s,a=this.coordinates.length,h=t.getType(),u=null,p=2,l=2;if(o.placement===ms){if(!pe(this.getBufferedMaxExtent(),t.getExtent()))return;var c;if(u=t.getFlatCoordinates(),l=t.getStride(),h==ce.LINE_STRING)c=[u.length];else if(h==ce.MULTI_LINE_STRING)c=t.getEnds();else if(h==ce.POLYGON)c=t.getEnds().slice(0,1);else if(h==ce.MULTI_POLYGON){var _=t.getEndss();for(c=[],r=0,s=_.length;r<s;++r)c.push(_[r][0])}this.beginGeometry(t,i);for(var d,f=o.textAlign,v=0,g=0,y=c.length;g<y;++g){if(null==f){var m=ys(o.maxAngle,u,v,c[g],l);v=m[0],d=m[1]}else d=c[g];for(r=v;r<d;r+=l)this.coordinates.push(u[r],u[r+1]);p=this.coordinates.length,v=c[g],this.drawChars_(a,p,this.declutterGroup_),a=p}this.endGeometry(t,i)}else{var E=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),T=E.width/this.pixelRatio;switch(h){case ce.POINT:case ce.MULTI_POINT:p=(u=t.getFlatCoordinates()).length;break;case ce.LINE_STRING:u=t.getFlatMidpoint();break;case ce.CIRCLE:u=t.getCenter();break;case ce.MULTI_LINE_STRING:p=(u=t.getFlatMidpoints()).length;break;case ce.POLYGON:if(u=t.getFlatInteriorPoint(),!o.overflow&&u[2]/this.resolution<T)return;l=3;break;case ce.MULTI_POLYGON:var C=t.getFlatInteriorPoints();for(u=[],r=0,s=C.length;r<s;r+=3)(o.overflow||C[r+2]/this.resolution>=T)&&u.push(C[r],C[r+1]);if(0==(p=u.length))return}p=this.appendFlatCoordinates(u,0,p,l,!1,!1),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,i),this.drawTextImage_(E,a,p),this.endGeometry(t,i)}}},i.prototype.getImage=function(t,i,e,n){var o,r=n+i+t+e+this.pixelRatio;if(!_r.containsKey(r)){var s=n?this.strokeStates[n]||this.textStrokeState_:null,a=e?this.fillStates[e]||this.textFillState_:null,h=this.textStates[i]||this.textState_,u=this.pixelRatio,p=h.scale*u,l=ls[h.textAlign||"center"],c=n&&s.lineWidth?s.lineWidth:0,_=t.split("\n"),d=_.length,f=[],v=function(t,i,e){for(var n=i.length,o=0,r=0;r<n;++r){var s=Cr(t,i[r]);o=Math.max(o,s),e.push(s)}return o}(h.font,_,f),g=Tr(h.font),y=g*d,m=v+c,E=Hn(Math.ceil(m*p),Math.ceil((y+c)*p));o=E.canvas,_r.set(r,o),1!=p&&E.scale(p,p),E.font=h.font,n&&(E.strokeStyle=s.strokeStyle,E.lineWidth=c,E.lineCap=s.lineCap,E.lineJoin=s.lineJoin,E.miterLimit=s.miterLimit,X&&s.lineDash.length&&(E.setLineDash(s.lineDash),E.lineDashOffset=s.lineDashOffset)),e&&(E.fillStyle=a.fillStyle),E.textBaseline="middle",E.textAlign="center";var T,C=.5-l,R=l*o.width/p+C*c;if(n)for(T=0;T<d;++T)E.strokeText(_[T],R+C*f[T],.5*(c+g)+T*g);if(e)for(T=0;T<d;++T)E.fillText(_[T],R+C*f[T],.5*(c+g)+T*g)}return _r.get(r)},i.prototype.drawTextImage_=function(t,i,e){var n=this.textState_,o=this.textStrokeState_,r=this.pixelRatio,s=ls[n.textAlign||"center"],a=ls[n.textBaseline],h=o&&o.lineWidth?o.lineWidth:0,u=s*t.width/r+2*(.5-s)*h,p=a*t.height/r+2*(.5-a)*h;this.instructions.push([us.DRAW_IMAGE,i,e,t,(u-this.textOffsetX_)*r,(p-this.textOffsetY_)*r,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,t.width,n.padding==cr?cr:n.padding.map(function(t){return t*r}),!!n.backgroundFill,!!n.backgroundStroke]),this.hitDetectionInstructions.push([us.DRAW_IMAGE,i,e,t,(u-this.textOffsetX_)*r,(p-this.textOffsetY_)*r,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/r,t.width,n.padding,!!n.backgroundFill,!!n.backgroundStroke])},i.prototype.drawChars_=function(t,i,e){var n=this.textStrokeState_,o=this.textState_,r=this.textFillState_,s=this.strokeKey_;n&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:n.strokeStyle,lineCap:n.lineCap,lineDashOffset:n.lineDashOffset,lineWidth:n.lineWidth,lineJoin:n.lineJoin,miterLimit:n.miterLimit,lineDash:n.lineDash}));var a=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:o.font,textAlign:o.textAlign||"center",scale:o.scale});var h=this.fillKey_;r&&(h in this.fillStates||(this.fillStates[h]={fillStyle:r.fillStyle}));var u=this.pixelRatio,p=ls[o.textBaseline],l=this.textOffsetY_*u,c=this.text_,_=o.font,d=o.scale,f=n?n.lineWidth*d/2:0,v=this.widths_[_];v||(this.widths_[_]=v={}),this.instructions.push([us.DRAW_CHARS,t,i,p,e,o.overflow,h,o.maxAngle,function(t){var i=v[t];return i||(i=v[t]=Cr(_,t)),i*d*u},l,s,f*u,c,a,1]),this.hitDetectionInstructions.push([us.DRAW_CHARS,t,i,p,e,o.overflow,h,o.maxAngle,function(t){var i=v[t];return i||(i=v[t]=Cr(_,t)),i*d},l,s,f,c,a,1/u])},i.prototype.setTextStyle=function(t,i){var e,n,o;if(t){this.declutterGroup_=i;var s=t.getFill();s?((n=this.textFillState_)||(n=this.textFillState_={}),n.fillStyle=Lr(s.getColor()||ur)):n=this.textFillState_=null;var a=t.getStroke();if(a){(o=this.textStrokeState_)||(o=this.textStrokeState_={});var h=a.getLineDash(),u=a.getLineDashOffset(),p=a.getWidth(),l=a.getMiterLimit();o.lineCap=a.getLineCap()||"round",o.lineDash=h?h.slice():pr,o.lineDashOffset=void 0===u?0:u,o.lineJoin=a.getLineJoin()||"round",o.lineWidth=void 0===p?1:p,o.miterLimit=void 0===l?10:l,o.strokeStyle=Lr(a.getColor()||lr)}else o=this.textStrokeState_=null;e=this.textState_;var c=t.getFont()||"10px sans-serif";gr(c);var _=t.getScale();e.overflow=t.getOverflow(),e.font=c,e.maxAngle=t.getMaxAngle(),e.placement=t.getPlacement(),e.textAlign=t.getTextAlign(),e.textBaseline=t.getTextBaseline()||"middle",e.backgroundFill=t.getBackgroundFill(),e.backgroundStroke=t.getBackgroundStroke(),e.padding=t.getPadding()||cr,e.scale=void 0===_?1:_;var d=t.getOffsetX(),f=t.getOffsetY(),v=t.getRotateWithView(),g=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===d?0:d,this.textOffsetY_=void 0===f?0:f,this.textRotateWithView_=void 0!==v&&v,this.textRotation_=void 0===g?0:g,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:r(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=e.font+e.scale+(e.textAlign||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+r(n.fillStyle):""}else this.text_=""},i}(ds)},Ts=function(t){function i(i,e,n,o,r,s,a){t.call(this),this.declutterTree_=s,this.declutterGroup_=null,this.tolerance_=i,this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=o,this.resolution_=n,this.renderBuffer_=a,this.replaysByZIndex_={},this.hitDetectionContext_=Hn(1,1),this.hitDetectionTransform_=[1,0,0,1,0,0]}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.addDeclutter=function(t){var i=null;return this.declutterTree_&&(t?(i=this.declutterGroup_)[4]++:(i=this.declutterGroup_=[1/0,1/0,-1/0,-1/0]).push(1)),i},i.prototype.clip=function(t,i){var e=this.getClipCoords(i);t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[2],e[3]),t.lineTo(e[4],e[5]),t.lineTo(e[6],e[7]),t.clip()},i.prototype.hasReplays=function(t){for(var i in this.replaysByZIndex_)for(var e=this.replaysByZIndex_[i],n=0,o=t.length;n<o;++n)if(t[n]in e)return!0;return!1},i.prototype.finish=function(){for(var t in this.replaysByZIndex_){var i=this.replaysByZIndex_[t];for(var e in i)i[e].finish()}},i.prototype.forEachFeatureAtCoordinate=function(t,i,e,n,o,r,s){var a,h=2*(n=Math.round(n))+1,u=sn(this.hitDetectionTransform_,n+.5,n+.5,1/i,-1/i,-e,-t[0],-t[1]),p=this.hitDetectionContext_;p.canvas.width!==h||p.canvas.height!==h?(p.canvas.width=h,p.canvas.height=h):p.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&(Qi(a=[1/0,1/0,-1/0,-1/0],t),Zi(a,i*(this.renderBuffer_+n),a));var l,c,_=function(t){if(void 0!==Cs[t])return Cs[t];for(var i=2*t+1,e=new Array(i),n=0;n<i;n++)e[n]=new Array(i);var o=t,r=0,s=0;for(;o>=r;)Rs(e,t+o,t+r),Rs(e,t+r,t+o),Rs(e,t-r,t+o),Rs(e,t-o,t+r),Rs(e,t-o,t-r),Rs(e,t-r,t-o),Rs(e,t+r,t-o),Rs(e,t+o,t-r),2*((s+=1+2*++r)-o)+1>0&&(s+=1-2*(o-=1));return Cs[t]=e,e}(n);function d(t){for(var i=p.getImageData(0,0,h,h).data,e=0;e<h;e++)for(var n=0;n<h;n++)if(_[e][n]&&i[4*(n*h+e)+3]>0){var o=void 0;return(!l||c!=is.IMAGE&&c!=is.TEXT||-1!==l.indexOf(t))&&(o=r(t)),o||void p.clearRect(0,0,h,h)}}this.declutterTree_&&(l=this.declutterTree_.all().map(function(t){return t.value}));var f,v,g,y,m,E=Object.keys(this.replaysByZIndex_).map(Number);for(E.sort(Ft),f=E.length-1;f>=0;--f){var T=E[f].toString();for(g=this.replaysByZIndex_[T],v=ps.length-1;v>=0;--v)if(void 0!==(y=g[c=ps[v]]))if(!s||c!=is.IMAGE&&c!=is.TEXT){if(m=y.replayHitDetection(p,u,e,o,d,a))return m}else{var C=s[T];C?C.push(y,u.slice(0)):s[T]=[y,u.slice(0)]}}},i.prototype.getClipCoords=function(t){var i=this.maxExtent_,e=i[0],n=i[1],o=i[2],r=i[3],s=[e,n,e,r,o,r,o,n];return de(s,0,8,2,t,s),s},i.prototype.getReplay=function(t,i){var e=void 0!==t?t.toString():"0",n=this.replaysByZIndex_[e];void 0===n&&(n={},this.replaysByZIndex_[e]=n);var o=n[i];void 0===o&&(o=new(0,Es[i])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),n[i]=o);return o},i.prototype.getReplays=function(){return this.replaysByZIndex_},i.prototype.isEmpty=function(){return c(this.replaysByZIndex_)},i.prototype.replay=function(t,i,e,n,o,r,s){var a=Object.keys(this.replaysByZIndex_).map(Number);a.sort(Ft),t.save(),this.clip(t,i);var h,u,p,l,c,_,d=r||ps;for(h=0,u=a.length;h<u;++h){var f=a[h].toString();for(c=this.replaysByZIndex_[f],p=0,l=d.length;p<l;++p){var v=d[p];if(_=c[v],void 0!==_)if(!s||v!=is.IMAGE&&v!=is.TEXT)_.replay(t,i,e,n,o);else{var g=s[f];g?g.push(_,i.slice(0)):s[f]=[_,i.slice(0)]}}}t.restore()},i}(ts),Cs={0:[[!0]]};function Rs(t,i,e){var n,o=Math.floor(t.length/2);if(i>=o)for(n=o;n<i;n++)t[n][e]=!0;else if(i<o)for(n=i+1;n<o;n++)t[n][e]=!0}var Is=Ts,ws=.5,Ms={Point:function(t,i,e,n){var o=e.getImage();if(o){if(o.getImageState()!=nr.LOADED)return;var r=t.getReplay(e.getZIndex(),is.IMAGE);r.setImageStyle(o,t.addDeclutter(!1)),r.drawPoint(i,n)}var s=e.getText();if(s){var a=t.getReplay(e.getZIndex(),is.TEXT);a.setTextStyle(s,t.addDeclutter(!!o)),a.drawText(i,n)}},LineString:function(t,i,e,n){var o=e.getStroke();if(o){var r=t.getReplay(e.getZIndex(),is.LINE_STRING);r.setFillStrokeStyle(null,o),r.drawLineString(i,n)}var s=e.getText();if(s){var a=t.getReplay(e.getZIndex(),is.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(i,n)}},Polygon:function(t,i,e,n){var o=e.getFill(),r=e.getStroke();if(o||r){var s=t.getReplay(e.getZIndex(),is.POLYGON);s.setFillStrokeStyle(o,r),s.drawPolygon(i,n)}var a=e.getText();if(a){var h=t.getReplay(e.getZIndex(),is.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(i,n)}},MultiPoint:function(t,i,e,n){var o=e.getImage();if(o){if(o.getImageState()!=nr.LOADED)return;var r=t.getReplay(e.getZIndex(),is.IMAGE);r.setImageStyle(o,t.addDeclutter(!1)),r.drawMultiPoint(i,n)}var s=e.getText();if(s){var a=t.getReplay(e.getZIndex(),is.TEXT);a.setTextStyle(s,t.addDeclutter(!!o)),a.drawText(i,n)}},MultiLineString:function(t,i,e,n){var o=e.getStroke();if(o){var r=t.getReplay(e.getZIndex(),is.LINE_STRING);r.setFillStrokeStyle(null,o),r.drawMultiLineString(i,n)}var s=e.getText();if(s){var a=t.getReplay(e.getZIndex(),is.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(i,n)}},MultiPolygon:function(t,i,e,n){var o=e.getFill(),r=e.getStroke();if(r||o){var s=t.getReplay(e.getZIndex(),is.POLYGON);s.setFillStrokeStyle(o,r),s.drawMultiPolygon(i,n)}var a=e.getText();if(a){var h=t.getReplay(e.getZIndex(),is.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(i,n)}},GeometryCollection:function(t,i,e,n){var o,r,s=i.getGeometriesArray();for(o=0,r=s.length;o<r;++o){var a=Ms[s[o].getType()];a(t,s[o],e,n)}},Circle:function(t,i,e,n){var o=e.getFill(),r=e.getStroke();if(o||r){var s=t.getReplay(e.getZIndex(),is.CIRCLE);s.setFillStrokeStyle(o,r),s.drawCircle(i,n)}var a=e.getText();if(a){var h=t.getReplay(e.getZIndex(),is.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(i,n)}}};function Os(t,i){return parseInt(r(t),10)-parseInt(r(i),10)}function bs(t,i){var e=Ps(t,i);return e*e}function Ps(t,i){return ws*t/i}function As(t,i,e,n,o,r){var s=!1,a=e.getImage();if(a){var h=a.getImageState();h==nr.LOADED||h==nr.ERROR?a.unlistenImageChange(o,r):(h==nr.IDLE&&a.load(),h=a.getImageState(),a.listenImageChange(o,r),s=!0)}return function(t,i,e,n){var o=e.getGeometryFunction()(i);if(!o)return;var r=o.getSimplifiedGeometry(n);if(e.getRenderer())!function t(i,e,n,o){if(e.getType()==ce.GEOMETRY_COLLECTION){for(var r=e.getGeometries(),s=0,a=r.length;s<a;++s)t(i,r[s],n,o);return}var h=i.getReplay(n.getZIndex(),is.DEFAULT);h.drawCustom(e,o,n.getRenderer())}(t,r,e,i);else{var s=Ms[r.getType()];s(t,r,e,i)}}(t,i,e,n),s}var Ls=function(t){function i(i){t.call(this,i),this.declutterTree_=i.getDeclutter()?kr()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=Hn(),g(_r,A.CLEAR,this.handleFontsChanged_,this)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.disposeInternal=function(){m(_r,A.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},i.prototype.compose=function(t,i,e){var n=i.extent,o=i.pixelRatio,r=e.managed?i.skippedFeatureUids:{},s=i.viewState,a=s.projection,h=s.rotation,u=a.getExtent(),p=this.getLayer().getSource(),l=this.getTransform(i,0),c=e.extent,_=void 0!==c;_&&this.clip(t,i,c);var d=this.replayGroup_;if(d&&!d.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var f,v=this.getLayer(),g=0,y=0,m=1!==e.opacity,E=v.hasListener(kt);if(m||E){var T=t.canvas.width,C=t.canvas.height;if(h){var R=Math.round(Math.sqrt(T*T+C*C));g=(R-T)/2,y=(R-C)/2,T=C=R}this.context.canvas.width=T,this.context.canvas.height=C,f=this.context}else f=t;var I=f.globalAlpha;m||(f.globalAlpha=e.opacity),f!=t&&f.translate(g,y);var w=i.viewHints,M=!(w[Ti]||w[Ci]),O=i.size[0]*o,b=i.size[1]*o;if(Rr(f,-h,O/2,b/2),d.replay(f,l,h,r,M),p.getWrapX()&&a.canWrapX()&&!ji(u,n)){for(var P,A=n[0],L=ue(u),D=0;A<u[0];)P=L*--D,l=this.getTransform(i,P),d.replay(f,l,h,r,M),A+=L;for(D=0,A=n[2];A>u[2];)P=L*++D,l=this.getTransform(i,P),d.replay(f,l,h,r,M),A-=L}if(Rr(f,h,O/2,b/2),E&&this.dispatchRenderEvent(f,i,l),f!=t){if(m){var F=t.globalAlpha;t.globalAlpha=e.opacity,t.drawImage(f.canvas,-g,-y),t.globalAlpha=F}else t.drawImage(f.canvas,-g,-y);f.translate(-g,-y)}m||(f.globalAlpha=I)}_&&t.restore()},i.prototype.composeFrame=function(t,i,e){var n=this.getTransform(t,0);this.preCompose(e,t,n),this.compose(e,t,i),this.postCompose(e,t,i,n)},i.prototype.forEachFeatureAtCoordinate=function(t,i,e,n,o){if(this.replayGroup_){var s=i.viewState.resolution,a=i.viewState.rotation,h=this.getLayer(),u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,s,a,e,{},function(t){var i=r(t);if(!(i in u))return u[i]=!0,n.call(o,t,h)},null)}},i.prototype.handleFontsChanged_=function(t){var i=this.getLayer();i.getVisible()&&this.replayGroup_&&i.changed()},i.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},i.prototype.prepareFrame=function(t,i){var e=this.getLayer(),n=e.getSource(),o=t.viewHints[Ti],r=t.viewHints[Ci],s=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(!this.dirty_&&!s&&o||!a&&r)return!0;var h=t.extent,u=t.viewState,p=u.projection,l=u.resolution,c=t.pixelRatio,_=e.getRevision(),d=e.getRenderBuffer(),f=e.getRenderOrder();void 0===f&&(f=Os);var v=Zi(h,d*l),g=u.projection.getExtent();if(n.getWrapX()&&u.projection.canWrapX()&&!ji(g,t.extent)){var y=ue(g),m=Math.max(ue(v)/2,y);v[0]=g[0]-m,v[2]=g[2]+m}if(!this.dirty_&&this.renderedResolution_==l&&this.renderedRevision_==_&&this.renderedRenderOrder_==f&&ji(this.renderedExtent_,v))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var E=new Is(Ps(l,c),v,l,c,n.getOverlaps(),this.declutterTree_,e.getRenderBuffer());n.loadFeatures(v,l,p);var T=function(t){var i,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(i=n(t,l)),i){var o=this.renderFeature(t,l,c,i,E);this.dirty_=this.dirty_||o}}.bind(this);if(f){var C=[];n.forEachFeatureInExtent(v,function(t){C.push(t)}),C.sort(f);for(var R=0,I=C.length;R<I;++R)T(C[R])}else n.forEachFeatureInExtent(v,T);return E.finish(),this.renderedResolution_=l,this.renderedRevision_=_,this.renderedRenderOrder_=f,this.renderedExtent_=v,this.replayGroup_=E,this.replayGroupChanged=!0,!0},i.prototype.renderFeature=function(t,i,e,n,o){if(!n)return!1;var r=!1;if(Array.isArray(n))for(var s=0,a=n.length;s<a;++s)r=As(o,t,n[s],bs(i,e),this.handleStyleImageChange_,this)||r;else r=As(o,t,n,bs(i,e),this.handleStyleImageChange_,this);return r},i}(Vr);Ls.handles=function(t){return t.getType()===rr.VECTOR},Ls.create=function(t,i){return new Ls(i)};var Ds=Ls,Fs={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"},Ns={image:[is.POLYGON,is.CIRCLE,is.LINE_STRING,is.IMAGE,is.TEXT],hybrid:[is.POLYGON,is.LINE_STRING]},Gs={image:[is.DEFAULT],hybrid:[is.IMAGE,is.TEXT,is.DEFAULT],vector:ps},Ks=function(t){function i(i){t.call(this,i,!0),this.declutterTree_=i.getDeclutter()?kr()(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=[1,0,0,1,0,0];var e=i.getRenderMode();this.zDirection=e===Fs.VECTOR?1:0,e!==Fs.VECTOR&&(this.context=Hn()),g(_r,A.CLEAR,this.handleFontsChanged_,this)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.disposeInternal=function(){m(_r,A.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},i.prototype.getTile=function(i,e,n,o,r){var s=t.prototype.getTile.call(this,i,e,n,o,r);return s.getState()===ti.LOADED&&(this.createReplayGroup_(s,o,r),this.context&&this.renderTileImage_(s,o,r)),s},i.prototype.getTileImage=function(t){var i=this.getLayer();return t.getImage(i)},i.prototype.prepareFrame=function(i,e){var n=this.getLayer().getRevision();return this.renderedLayerRevision_!=n&&(this.renderedTiles.length=0),this.renderedLayerRevision_=n,t.prototype.prepareFrame.call(this,i,e)},i.prototype.createReplayGroup_=function(t,i,e){var n=this,o=this.getLayer(),r=o.getRevision(),s=o.getRenderOrder()||null,a=t.getReplayState(o);if(a.dirty||a.renderedRevision!=r||a.renderedRenderOrder!=s){for(var h=o.getSource(),u=h.getTileGrid(),p=h.getTileGridForProjection(e).getResolution(t.tileCoord[0]),l=t.extent,c=function(r,c){var _=t.getTile(t.tileKeys[r]);if(_.getState()==ti.LOADED){var d=_.tileCoord,f=u.getTileCoordExtent(d),v=se(l,f),g=Xi(f,v)?null:Zi(v,o.getRenderBuffer()*p,n.tmpExtent),y=_.getProjection(),m=!1;Xe(e,y)||(m=!0,_.setProjection(e)),a.dirty=!1;var E=new Is(0,v,p,i,h.getOverlaps(),n.declutterTree_,o.getRenderBuffer()),T=bs(p,i),C=function(t){var i,e=t.getStyleFunction()||o.getStyleFunction();if(e&&(i=e(t,p)),i){var n=this.renderFeature(t,T,i,E);this.dirty_=this.dirty_||n,a.dirty=a.dirty||n}},R=_.getFeatures();s&&s!==a.renderedRenderOrder&&R.sort(s);for(var I=0,w=R.length;I<w;++I){var M=R[I];m&&(y.getUnits()==me.TILE_PIXELS&&(y.setWorldExtent(f),y.setExtent(_.getExtent())),M.getGeometry().transform(y,e)),g&&!pe(g,M.getGeometry().getExtent())||C.call(n,M)}E.finish(),_.setReplayGroup(o,t.tileCoord.toString(),E)}},_=0,d=t.tileKeys.length;_<d;++_)c(_);a.renderedRevision=r,a.renderedRenderOrder=s}},i.prototype.forEachFeatureAtCoordinate=function(t,i,e,n,o){var s=i.viewState.resolution,a=i.viewState.rotation;e=null==e?0:e;var h,u,p,l,c=this.getLayer(),_={},d=this.renderedTiles;for(p=0,l=d.length;p<l;++p){var f=d[p];if(xi(h=Zi(f.extent,e*s,h),t))for(var v=0,g=f.tileKeys.length;v<g;++v){var y=f.getTile(f.tileKeys[v]);if(y.getState()==ti.LOADED){var m=y.getReplayGroup(c,f.tileCoord.toString());u=u||m.forEachFeatureAtCoordinate(t,s,a,e,{},function(t){var i=r(t);if(!(i in _))return _[i]=!0,n.call(o,t,c)},null)}}}return u},i.prototype.getReplayTransform_=function(t,i){var e=this.getLayer().getSource().getTileGrid(),n=t.tileCoord,o=e.getResolution(n[0]),r=i.viewState,s=i.pixelRatio,a=r.resolution/s,h=e.getTileCoordExtent(n,this.tmpExtent),u=r.center,p=ae(h),l=i.size,c=Math.round(s*l[0]/2),_=Math.round(s*l[1]/2);return sn(this.tmpTransform_,c,_,o/a,o/a,r.rotation,(p[0]-u[0])/o,(u[1]-p[1])/o)},i.prototype.handleFontsChanged_=function(t){var i=this.getLayer();i.getVisible()&&void 0!==this.renderedLayerRevision_&&i.changed()},i.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},i.prototype.postCompose=function(i,e,n){var o=this.getLayer(),r=o.getRenderMode();if(r!=Fs.IMAGE){var s,a,h=o.getDeclutter()?{}:null,u=o.getSource(),p=Gs[r],l=e.pixelRatio,c=e.viewState.rotation,_=e.size;c&&Rr(i,-c,s=Math.round(l*_[0]/2),a=Math.round(l*_[1]/2)),h&&this.declutterTree_.clear();for(var d=e.viewHints,f=!(d[Ti]||d[Ci]),v=this.renderedTiles,g=u.getTileGridForProjection(e.viewState.projection),y=[],m=[],E=v.length-1;E>=0;--E){var T=v[E];if(T.getState()!=ti.ABORT)for(var C=T.tileCoord,R=g.getTileCoordExtent(C,this.tmpExtent)[0]-T.extent[0],I=void 0,w=0,M=T.tileKeys.length;w<M;++w){var O=T.getTile(T.tileKeys[w]);if(O.getState()==ti.LOADED){var b=O.getReplayGroup(o,C.toString());if(b&&b.hasReplays(p)){I||(I=this.getTransform(e,R));var P=O.tileCoord[0],A=b.getClipCoords(I);i.save(),i.globalAlpha=n.opacity;for(var L=0,D=y.length;L<D;++L){var F=y[L];P<m[L]&&(i.beginPath(),i.moveTo(A[0],A[1]),i.lineTo(A[2],A[3]),i.lineTo(A[4],A[5]),i.lineTo(A[6],A[7]),i.moveTo(F[6],F[7]),i.lineTo(F[4],F[5]),i.lineTo(F[2],F[3]),i.lineTo(F[0],F[1]),i.clip())}b.replay(i,I,c,{},f,p,h),i.restore(),y.push(A),m.push(P)}}}}h&&function(t,i,e,n){for(var o=Object.keys(t).map(Number).sort(Ft),r={},s=0,a=o.length;s<a;++s)for(var h=t[o[s].toString()],u=0,p=h.length;u<p;){var l=h[u++],c=h[u++];l.replay(i,c,e,r,n)}}(h,i,c,f),c&&Rr(i,c,s,a)}t.prototype.postCompose.call(this,i,e,n)},i.prototype.renderFeature=function(t,i,e,n){if(!e)return!1;var o=!1;if(Array.isArray(e))for(var r=0,s=e.length;r<s;++r)o=As(n,t,e[r],i,this.handleStyleImageChange_,this)||o;else o=As(n,t,e,i,this.handleStyleImageChange_,this);return o},i.prototype.renderTileImage_=function(t,i,e){var n=this.getLayer(),o=t.getReplayState(n),r=n.getRevision(),s=Ns[n.getRenderMode()];if(s&&o.renderedTileRevision!==r){o.renderedTileRevision=r;var a=t.wrappedTileCoord,h=a[0],u=n.getSource(),p=u.getTileGridForProjection(e),l=p.getResolution(h),c=t.getContext(n),_=u.getTilePixelSize(h,i,e);c.canvas.width=_[0],c.canvas.height=_[1];for(var d=p.getTileCoordExtent(a,this.tmpExtent),f=0,v=t.tileKeys.length;f<v;++f){var g=t.getTile(t.tileKeys[f]);if(g.getState()==ti.LOADED){var y=i/l,m=ke(this.tmpTransform_);on(m,y,-y),rn(m,-d[0],-d[3]),g.getReplayGroup(n,t.tileCoord.toString()).replay(c,m,0,{},!0,s)}}}},i}($r);Ks.handles=function(t){return t.getType()===rr.VECTOR_TILE},Ks.create=function(t,i){return new Ks(i)};var Zs=Ks,zs=function(t){function i(i){(i=p({},i)).controls||(i.controls=function(t){var i=t||{},e=new z;return(void 0===i.zoom||i.zoom)&&e.push(new vo(i.zoomOptions)),(void 0===i.rotate||i.rotate)&&e.push(new fo(i.rotateOptions)),(void 0===i.attribution||i.attribution)&&e.push(new co(i.attributionOptions)),e}()),i.interactions||(i.interactions=function(t){var i=t||{},e=new z,n=new yo(-.005,.05,100);return(void 0===i.altShiftDragRotate||i.altShiftDragRotate)&&e.push(new zo),(void 0===i.doubleClickZoom||i.doubleClickZoom)&&e.push(new Mo({delta:i.zoomDelta,duration:i.zoomDuration})),(void 0===i.dragPan||i.dragPan)&&e.push(new Zo({condition:i.onFocusOnly?bo:void 0,kinetic:n})),(void 0===i.pinchRotate||i.pinchRotate)&&e.push(new tr),(void 0===i.pinchZoom||i.pinchZoom)&&e.push(new ir({constrainResolution:i.constrainResolution,duration:i.zoomDuration})),(void 0===i.keyboard||i.keyboard)&&(e.push(new qo),e.push(new $o({delta:i.zoomDelta,duration:i.zoomDuration}))),(void 0===i.mouseWheelZoom||i.mouseWheelZoom)&&e.push(new So({condition:i.onFocusOnly?bo:void 0,constrainResolution:i.constrainResolution,duration:i.zoomDuration})),(void 0===i.shiftDragZoom||i.shiftDragZoom)&&e.push(new Ho({duration:i.zoomDuration})),e}()),t.call(this,i)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.createRenderer=function(){var t=new jr(this);return t.registerLayerRenderers([Hr,$r,Ds,Zs]),t},i}(to),Us=0;function xs(t,i){setTimeout(function(){t(i)},0)}function js(t){return!(t.sourceCenter&&t.targetCenter&&!Oi(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var Vs=function(t){function i(i){t.call(this);var e=p({},i);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=We(e.projection,"EPSG:3857"),this.applyOptions_(e)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.applyOptions_=function(t){var i={};i[Ri]=void 0!==t.center?t.center:null;var e=function(t){var i,e,n,o=void 0!==t.minZoom?t.minZoom:Us,r=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var a=t.resolutions;e=a[o],n=void 0!==a[r]?a[r]:a[a.length-1],i=fi(a)}else{var h=We(t.projection,"EPSG:3857"),u=h.getExtent(),p=u?Math.max(ue(u),re(u)):360*ye[me.DEGREES]/h.getMetersPerUnit(),l=p/ri/Math.pow(2,Us),c=l/Math.pow(2,28-Us);void 0!==(e=t.maxResolution)?o=0:e=l/Math.pow(s,o),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?e/Math.pow(s,r):l/Math.pow(s,r):c),r=o+Math.floor(Math.log(e/n)/Math.log(s)),n=e/Math.pow(s,r-o),i=vi(s,e,r-o)}return{constraint:i,maxResolution:e,minResolution:n,minZoom:o,zoomFactor:s}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var n=function(t){return void 0!==t.extent?_i(t.extent):di}(t),o=e.constraint,r=function(t){if(void 0===t.enableRotation||t.enableRotation){var i=t.constrainRotation;return void 0===i||!0===i?Ei():!1===i?yi:"number"==typeof i?mi(i):yi}return gi}(t);this.constraints_={center:n,resolution:o,rotation:r},void 0!==t.resolution?i[Ii]=t.resolution:void 0!==t.zoom&&(i[Ii]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(i[Ii]=si(Number(this.getResolution()||i[Ii]),this.minResolution_,this.maxResolution_))),i[wi]=void 0!==t.rotation?t.rotation:0,this.setProperties(i),this.options_=t},i.prototype.getUpdatedOptions_=function(t){var i=p({},this.options_);return void 0!==i.resolution?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenter(),i.rotation=this.getRotation(),p({},i,t)},i.prototype.animate=function(t){var i,e=arguments,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(i=arguments[n-1],--n),!this.isDef()){var o=arguments[n-1];return o.center&&this.setCenter(o.center),void 0!==o.zoom&&this.setZoom(o.zoom),void 0!==o.rotation&&this.setRotation(o.rotation),void(i&&xs(i,!0))}for(var r=Date.now(),s=this.getCenter().slice(),a=this.getResolution(),h=this.getRotation(),u=[],p=0;p<n;++p){var l=e[p],c={start:r,complete:!1,anchor:l.anchor,duration:void 0!==l.duration?l.duration:1e3,easing:l.easing||Di};if(l.center&&(c.sourceCenter=s,c.targetCenter=l.center,s=c.targetCenter),void 0!==l.zoom?(c.sourceResolution=a,c.targetResolution=this.constrainResolution(this.maxResolution_,l.zoom-this.minZoom_,0),a=c.targetResolution):l.resolution&&(c.sourceResolution=a,c.targetResolution=l.resolution,a=c.targetResolution),void 0!==l.rotation){c.sourceRotation=h;var _=li(l.rotation-h+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=h+_,h=c.targetRotation}c.callback=i,js(c)?c.complete=!0:r+=c.duration,u.push(c)}this.animations_.push(u),this.setHint(Ti,1),this.updateAnimations_()},i.prototype.getAnimating=function(){return this.hints_[Ti]>0},i.prototype.getInteracting=function(){return this.hints_[Ci]>0},i.prototype.cancelAnimations=function(){this.setHint(Ti,-this.hints_[Ti]);for(var t=0,i=this.animations_.length;t<i;++t){var e=this.animations_[t];e[0].callback&&xs(e[0].callback,!1)}this.animations_.length=0},i.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),i=!1,e=this.animations_.length-1;e>=0;--e){for(var n=this.animations_[e],o=!0,r=0,s=n.length;r<s;++r){var a=n[r];if(!a.complete){var h=t-a.start,u=a.duration>0?h/a.duration:1;u>=1?(a.complete=!0,u=1):o=!1;var p=a.easing(u);if(a.sourceCenter){var l=a.sourceCenter[0],c=a.sourceCenter[1],_=l+p*(a.targetCenter[0]-l),d=c+p*(a.targetCenter[1]-c);this.set(Ri,[_,d])}if(a.sourceResolution&&a.targetResolution){var f=1===p?a.targetResolution:a.sourceResolution+p*(a.targetResolution-a.sourceResolution);a.anchor&&this.set(Ri,this.calculateCenterZoom(f,a.anchor)),this.set(Ii,f)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var v=1===p?li(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+p*(a.targetRotation-a.sourceRotation);a.anchor&&this.set(Ri,this.calculateCenterRotate(v,a.anchor)),this.set(wi,v)}if(i=!0,!a.complete)break}}if(o){this.animations_[e]=null,this.setHint(Ti,-1);var g=n[0].callback;g&&xs(g,!0)}}this.animations_=this.animations_.filter(Boolean),i&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},i.prototype.calculateCenterRotate=function(t,i){var e,n=this.getCenter();return void 0!==n&&(bi(e=[n[0]-i[0],n[1]-i[1]],t-this.getRotation()),Mi(e,i)),e},i.prototype.calculateCenterZoom=function(t,i){var e,n=this.getCenter(),o=this.getResolution();void 0!==n&&void 0!==o&&(e=[i[0]-t*(i[0]-n[0])/o,i[1]-t*(i[1]-n[1])/o]);return e},i.prototype.getSizeFromViewport_=function(){var t=[100,100],i='.ol-viewport[data-view="'+r(this)+'"]',e=document.querySelector(i);if(e){var n=getComputedStyle(e);t[0]=parseInt(n.width,10),t[1]=parseInt(n.height,10)}return t},i.prototype.constrainCenter=function(t){return this.constraints_.center(t)},i.prototype.constrainResolution=function(t,i,e){var n=i||0,o=e||0;return this.constraints_.resolution(t,n,o)},i.prototype.constrainRotation=function(t,i){var e=i||0;return this.constraints_.rotation(t,e)},i.prototype.getCenter=function(){return this.get(Ri)},i.prototype.getConstraints=function(){return this.constraints_},i.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},i.prototype.calculateExtent=function(t){var i=t||this.getSizeFromViewport_(),e=this.getCenter();ii(e,1);var n=this.getResolution();ii(void 0!==n,2);var o=this.getRotation();return ii(void 0!==o,3),oe(e,n,o,i)},i.prototype.getMaxResolution=function(){return this.maxResolution_},i.prototype.getMinResolution=function(){return this.minResolution_},i.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},i.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},i.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},i.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},i.prototype.getProjection=function(){return this.projection_},i.prototype.getResolution=function(){return this.get(Ii)},i.prototype.getResolutions=function(){return this.resolutions_},i.prototype.getResolutionForExtent=function(t,i){var e=i||this.getSizeFromViewport_(),n=ue(t)/e[0],o=re(t)/e[1];return Math.max(n,o)},i.prototype.getResolutionForValueFunction=function(t){var i=t||2,e=this.maxResolution_,n=this.minResolution_,o=Math.log(e/n)/Math.log(i);return function(t){return e/Math.pow(i,t*o)}},i.prototype.getRotation=function(){return this.get(wi)},i.prototype.getValueForResolutionFunction=function(t){var i=t||2,e=this.maxResolution_,n=this.minResolution_,o=Math.log(e/n)/Math.log(i);return function(t){return Math.log(e/t)/Math.log(i)/o}},i.prototype.getState=function(t){var i=this.getCenter(),e=this.getProjection(),n=this.getResolution(),o=n/t,r=this.getRotation();return{center:[Math.round(i[0]/o)*o,Math.round(i[1]/o)*o],projection:void 0!==e?e:null,resolution:n,rotation:r,zoom:this.getZoom()}},i.prototype.getZoom=function(){var t,i=this.getResolution();return void 0!==i&&(t=this.getZoomForResolution(i)),t},i.prototype.getZoomForResolution=function(t){var i,e,n=this.minZoom_||0;if(this.resolutions_){var o=Nt(this.resolutions_,t,1);n=o,i=this.resolutions_[o],e=o==this.resolutions_.length-1?2:i/this.resolutions_[o+1]}else i=this.maxResolution_,e=this.zoomFactor_;return n+Math.log(i/t)/Math.log(e)},i.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},i.prototype.fit=function(t,i){var e,n=i||{},o=n.size;o||(o=this.getSizeFromViewport_()),ii(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?(ii(!le(t),25),e=xn(t)):t.getType()===ce.CIRCLE?(e=xn(t=t.getExtent())).rotate(this.getRotation(),ee(t)):e=t;var r,s=void 0!==n.padding?n.padding:[0,0,0,0],a=void 0===n.constrainResolution||n.constrainResolution,h=void 0!==n.nearest&&n.nearest;r=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.constrainResolution(this.maxResolution_,n.maxZoom-this.minZoom_,0):0;for(var u=e.getFlatCoordinates(),p=this.getRotation(),l=Math.cos(-p),c=Math.sin(-p),_=1/0,d=1/0,f=-1/0,v=-1/0,g=e.getStride(),y=0,m=u.length;y<m;y+=g){var E=u[y]*l-u[y+1]*c,T=u[y]*c+u[y+1]*l;_=Math.min(_,E),d=Math.min(d,T),f=Math.max(f,E),v=Math.max(v,T)}var C=this.getResolutionForExtent([_,d,f,v],[o[0]-s[1]-s[3],o[1]-s[0]-s[2]]);if(C=isNaN(C)?r:Math.max(C,r),a){var R=this.constrainResolution(C,0,0);!h&&R<C&&(R=this.constrainResolution(R,-1,0)),C=R}c=-c;var I=(_+f)/2,M=(d+v)/2,O=[(I+=(s[1]-s[3])/2*C)*l-(M+=(s[0]-s[2])/2*C)*c,M*l+I*c],b=n.callback?n.callback:w;void 0!==n.duration?this.animate({resolution:C,center:O,duration:n.duration,easing:n.easing},b):(this.setResolution(C),this.setCenter(O),xs(b,!0))},i.prototype.centerOn=function(t,i,e){var n=this.getRotation(),o=Math.cos(-n),r=Math.sin(-n),s=t[0]*o-t[1]*r,a=t[1]*o+t[0]*r,h=this.getResolution(),u=(s+=(i[0]/2-e[0])*h)*o-(a+=(e[1]-i[1]/2)*h)*(r=-r),p=a*o+s*r;this.setCenter([u,p])},i.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},i.prototype.rotate=function(t,i){if(void 0!==i){var e=this.calculateCenterRotate(t,i);this.setCenter(e)}this.setRotation(t)},i.prototype.setCenter=function(t){this.set(Ri,t),this.getAnimating()&&this.cancelAnimations()},i.prototype.setHint=function(t,i){return this.hints_[t]+=i,this.changed(),this.hints_[t]},i.prototype.setResolution=function(t){this.set(Ii,t),this.getAnimating()&&this.cancelAnimations()},i.prototype.setRotation=function(t){this.set(wi,t),this.getAnimating()&&this.cancelAnimations()},i.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},i}(G),Bs=function(t){function i(i,e,n){t.call(this);var o=n||{};this.tileCoord=i,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===o.transition?250:o.transition,this.transitionStarts_={}}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.changed=function(){this.dispatchEvent(A.CHANGE)},i.prototype.getKey=function(){return this.key+"/"+this.tileCoord},i.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==ti.LOADED)return t;t=t.interimTile}while(t);return this},i.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,i=this;do{if(t.getState()==ti.LOADED){t.interimTile=null;break}t.getState()==ti.LOADING?i=t:t.getState()==ti.IDLE?i.interimTile=t.interimTile:i=t,t=i.interimTile}while(t)}},i.prototype.getTileCoord=function(){return this.tileCoord},i.prototype.getState=function(){return this.state},i.prototype.setState=function(t){this.state=t,this.changed()},i.prototype.load=function(){},i.prototype.getAlpha=function(t,i){if(!this.transition_)return 1;var e=this.transitionStarts_[t];if(e){if(-1===e)return 1}else e=i,this.transitionStarts_[t]=e;var n=i-e+1e3/60;return n>=this.transition_?1:Ai(n/this.transition_)},i.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},i.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},i}(P);function Ys(){var t=Hn(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var Hs=function(t){function i(i,e,n,o,r,s){t.call(this,i,e,s),this.crossOrigin_=o,this.src_=n,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.imageListenerKeys_=null,this.tileLoadFunction_=r}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.disposeInternal=function(){this.state==ti.LOADING&&(this.unlistenImage_(),this.image_=Ys()),this.interimTile&&this.interimTile.dispose(),this.state=ti.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},i.prototype.getImage=function(){return this.image_},i.prototype.getKey=function(){return this.src_},i.prototype.handleImageError_=function(){this.state=ti.ERROR,this.unlistenImage_(),this.image_=Ys(),this.changed()},i.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=ti.LOADED:this.state=ti.EMPTY,this.unlistenImage_(),this.changed()},i.prototype.load=function(){this.state==ti.ERROR&&(this.state=ti.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ti.IDLE&&(this.state=ti.LOADING,this.changed(),this.imageListenerKeys_=[y(this.image_,A.ERROR,this.handleImageError_,this),y(this.image_,A.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},i.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(E),this.imageListenerKeys_=null},i}(Bs);function Ws(t,i,e,n){return void 0!==n?(n[0]=t,n[1]=i,n[2]=e,n):[t,i,e]}function Xs(t,i,e){return t+"/"+i+"/"+e}function qs(t){return Xs(t[0],t[1],t[2])}var Qs=function(t){function i(i){t.call(this,i)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.expireCache=function(t){for(;this.canExpireCache();){var i=this.peekLast(),e=i.tileCoord[0].toString();if(e in t&&t[e].contains(i.tileCoord))break;this.pop().dispose()}},i.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=function(t){return t.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(i){i.tileCoord[0]!==t&&(this.remove(qs(i.tileCoord)),i.dispose())},this)}},i}(hr);function $s(t,i,e,n){var o=e-t,r=n-i,s=Math.sqrt(o*o+r*r);return[Math.round(e+o/s),Math.round(n+r/s)]}function Js(t,i,e,n,o,r,s,a,h,u,p){var l=Hn(Math.round(e*t),Math.round(e*i));if(0===h.length)return l.canvas;l.scale(e,e);var c=[1/0,1/0,-1/0,-1/0];h.forEach(function(t,i,e){qi(c,t.extent)});var _=ue(c),d=re(c),f=Hn(Math.round(e*_/n),Math.round(e*d/n)),v=e/n;h.forEach(function(t,i,e){var n=t.extent[0]-c[0],o=-(t.extent[3]-c[3]),r=ue(t.extent),s=re(t.extent);f.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,n*v,o*v,r*v,s*v)});var g=ae(s);return a.getTriangles().forEach(function(t,i,o){var s=t.source,a=t.target,h=s[0][0],u=s[0][1],p=s[1][0],_=s[1][1],d=s[2][0],v=s[2][1],y=(a[0][0]-g[0])/r,m=-(a[0][1]-g[1])/r,E=(a[1][0]-g[0])/r,T=-(a[1][1]-g[1])/r,C=(a[2][0]-g[0])/r,R=-(a[2][1]-g[1])/r,I=h,w=u;h=0,u=0;var M=function(t){for(var i=t.length,e=0;e<i;e++){for(var n=e,o=Math.abs(t[e][e]),r=e+1;r<i;r++){var s=Math.abs(t[r][e]);s>o&&(o=s,n=r)}if(0===o)return null;var a=t[n];t[n]=t[e],t[e]=a;for(var h=e+1;h<i;h++)for(var u=-t[h][e]/t[e][e],p=e;p<i+1;p++)e==p?t[h][p]=0:t[h][p]+=u*t[e][p]}for(var l=new Array(i),c=i-1;c>=0;c--){l[c]=t[c][i]/t[c][c];for(var _=c-1;_>=0;_--)t[_][i]-=t[_][c]*l[c]}return l}([[p-=I,_-=w,0,0,E-y],[d-=I,v-=w,0,0,C-y],[0,0,p,_,T-m],[0,0,d,v,R-m]]);if(M){l.save(),l.beginPath();var O=(y+E+C)/3,b=(m+T+R)/3,P=$s(O,b,y,m),A=$s(O,b,E,T),L=$s(O,b,C,R);l.moveTo(A[0],A[1]),l.lineTo(P[0],P[1]),l.lineTo(L[0],L[1]),l.clip(),l.transform(M[0],M[2],M[1],M[3],y,m),l.translate(c[0]-I,c[3]-w),l.scale(n/e,-n/e),l.drawImage(f.canvas,0,0),l.restore()}}),p&&(l.save(),l.strokeStyle="black",l.lineWidth=1,a.getTriangles().forEach(function(t,i,e){var n=t.target,o=(n[0][0]-g[0])/r,s=-(n[0][1]-g[1])/r,a=(n[1][0]-g[0])/r,h=-(n[1][1]-g[1])/r,u=(n[2][0]-g[0])/r,p=-(n[2][1]-g[1])/r;l.beginPath(),l.moveTo(a,h),l.lineTo(o,s),l.lineTo(u,p),l.closePath(),l.stroke()}),l.restore()),l.canvas}var ks=function(t,i,e,n,o){this.sourceProj_=t,this.targetProj_=i;var r={},s=Qe(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var i=t[0]+"/"+t[1];return r[i]||(r[i]=s(t)),r[i]},this.maxSourceExtent_=n,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&ue(n)==ue(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ue(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ue(this.targetProj_.getExtent()):null;var a=ae(e),h=he(e),u=ie(e),p=te(e),l=this.transformInv_(a),c=this.transformInv_(h),_=this.transformInv_(u),d=this.transformInv_(p);if(this.addQuad_(a,h,u,p,l,c,_,d,10),this.wrapsXInSource_){var f=1/0;this.triangles_.forEach(function(t,i,e){f=Math.min(f,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-f>this.sourceWorldWidth_/2){var i=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];i[0][0]-f>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-f>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-f>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);var e=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-e<this.sourceWorldWidth_/2&&(t.source=i)}}.bind(this))}r={}};ks.prototype.addTriangle_=function(t,i,e,n,o,r){this.triangles_.push({source:[n,o,r],target:[t,i,e]})},ks.prototype.addQuad_=function(t,i,e,n,o,r,s,a,h){var u=Ki([o,r,s,a]),p=this.sourceWorldWidth_?ue(u)/this.sourceWorldWidth_:null,l=this.sourceWorldWidth_,c=this.sourceProj_.canWrapX()&&p>.5&&p<1,_=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_)_=ue(Ki([t,i,e,n]))/this.targetWorldWidth_>.25||_;!c&&this.sourceProj_.isGlobal()&&p&&(_=p>.25||_)}if(_||!this.maxSourceExtent_||pe(u,this.maxSourceExtent_)){if(!(_||isFinite(o[0])&&isFinite(o[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1]))){if(!(h>0))return;_=!0}if(h>0){if(!_){var d,f=[(t[0]+e[0])/2,(t[1]+e[1])/2],v=this.transformInv_(f);if(c)d=(li(o[0],l)+li(s[0],l))/2-li(v[0],l);else d=(o[0]+s[0])/2-v[0];var g=(o[1]+s[1])/2-v[1];_=d*d+g*g>this.errorThresholdSquared_}if(_){if(Math.abs(t[0]-e[0])<=Math.abs(t[1]-e[1])){var y=[(i[0]+e[0])/2,(i[1]+e[1])/2],m=this.transformInv_(y),E=[(n[0]+t[0])/2,(n[1]+t[1])/2],T=this.transformInv_(E);this.addQuad_(t,i,y,E,o,r,m,T,h-1),this.addQuad_(E,y,e,n,T,m,s,a,h-1)}else{var C=[(t[0]+i[0])/2,(t[1]+i[1])/2],R=this.transformInv_(C),I=[(e[0]+n[0])/2,(e[1]+n[1])/2],w=this.transformInv_(I);this.addQuad_(t,C,I,n,o,R,w,a,h-1),this.addQuad_(C,i,e,I,R,r,s,w,h-1)}return}}if(c){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,e,n,o,s,a),this.addTriangle_(t,i,e,o,r,s)}},ks.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(i,e,n){var o=i.source;Qi(t,o[0]),Qi(t,o[1]),Qi(t,o[2])}),t},ks.prototype.getTriangles=function(){return this.triangles_};var Ss=ks,ta=function(t){function i(i,e,n,o,r,s,a,h,u,p,l){t.call(this,r,ti.IDLE),this.renderEdges_=void 0!==l&&l,this.pixelRatio_=a,this.gutter_=h,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=o,this.wrappedTileCoord_=s||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var c=o.getTileCoordExtent(this.wrappedTileCoord_),_=this.targetTileGrid_.getExtent(),d=this.sourceTileGrid_.getExtent(),f=_?se(c,_):c;if(0!==Si(f)){var v=i.getExtent();v&&(d=d?se(d,v):v);var g=o.getResolution(this.wrappedTileCoord_[0]),y=function(t,i,e,n){var o=$e(e,i,t),r=Ye(i,n,e),s=i.getMetersPerUnit();void 0!==s&&(r*=s);var a=t.getMetersPerUnit();void 0!==a&&(r/=a);var h=t.getExtent();if(!h||xi(h,o)){var u=Ye(t,r,o)/r;isFinite(u)&&u>0&&(r/=u)}return r}(i,n,ee(f),g);if(!isFinite(y)||y<=0)this.state=ti.EMPTY;else{var m=void 0!==p?p:er;if(this.triangulation_=new Ss(i,n,f,d,y*m),0!==this.triangulation_.getTriangles().length){this.sourceZ_=e.getZForResolution(y);var E=this.triangulation_.calculateSourceExtent();if(d&&(i.canWrapX()?(E[1]=si(E[1],d[1],d[3]),E[3]=si(E[3],d[1],d[3])):E=se(E,d)),Si(E)){for(var T=e.getTileRangeForExtentAndZ(E,this.sourceZ_),C=T.minX;C<=T.maxX;C++)for(var R=T.minY;R<=T.maxY;R++){var I=u(this.sourceZ_,C,R,a);I&&this.sourceTiles_.push(I)}0===this.sourceTiles_.length&&(this.state=ti.EMPTY)}else this.state=ti.EMPTY}else this.state=ti.EMPTY}}else this.state=ti.EMPTY}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.disposeInternal=function(){this.state==ti.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},i.prototype.getImage=function(){return this.canvas_},i.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(i,e,n){i&&i.getState()==ti.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(i.tileCoord),image:i.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=ti.ERROR;else{var i=this.wrappedTileCoord_[0],e=this.targetTileGrid_.getTileSize(i),n="number"==typeof e?e:e[0],o="number"==typeof e?e:e[1],r=this.targetTileGrid_.getResolution(i),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Js(n,o,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),r,a,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=ti.LOADED}this.changed()},i.prototype.load=function(){if(this.state==ti.IDLE){this.state=ti.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(i,e,n){var o=i.getState();if(o==ti.IDLE||o==ti.LOADING){t++;var r=g(i,A.CHANGE,function(e){var n=i.getState();n!=ti.LOADED&&n!=ti.ERROR&&n!=ti.EMPTY||(E(r),0===--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}.bind(this)),this.sourceTiles_.forEach(function(t,i,e){t.getState()==ti.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},i.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(E),this.sourcesListenerKeys_=null},i}(Bs);function ia(t,i){var e=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,r=/\{-y\}/g;return function(s,a,h){return s?t.replace(e,s[0].toString()).replace(n,s[1].toString()).replace(o,function(){return(-s[2]-1).toString()}).replace(r,function(){var t=s[0],e=i.getFullTileRange(t);return ii(e,55),(e.getHeight()+s[2]).toString()}):void 0}}function ea(t,i){for(var e=t.length,n=new Array(e),o=0;o<e;++o)n[o]=ia(t[o],i);return function(t){if(1===t.length)return t[0];return function(i,e,n){if(i){var o=function(t){return(t[1]<<t[0])+t[2]}(i),r=li(o,t.length);return t[r](i,e,n)}}}(n)}function na(t,i,e){}function oa(t){return t?Array.isArray(t)?function(i){return t}:"function"==typeof t?t:function(i){return[t]}:null}var ra=function(t){function i(i){t.call(this),this.projection_=Be(i.projection),this.attributions_=oa(i.attributions),this.attributionsCollapsible_=void 0===i.attributionsCollapsible||i.attributionsCollapsible,this.loading=!1,this.state_=void 0!==i.state?i.state:$n.READY,this.wrapX_=void 0!==i.wrapX&&i.wrapX}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.getAttributions=function(){return this.attributions_},i.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},i.prototype.getProjection=function(){return this.projection_},i.prototype.getResolutions=function(){return n()},i.prototype.getState=function(){return this.state_},i.prototype.getWrapX=function(){return this.wrapX_},i.prototype.refresh=function(){this.changed()},i.prototype.setAttributions=function(t){this.attributions_=oa(t),this.changed()},i.prototype.setState=function(t){this.state_=t,this.changed()},i}(G),sa=[0,0,0],aa=function(t){var i,e,n,o;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,ii((i=this.resolutions_,e=!0,n=function(t,i){return i-t}||Ft,i.every(function(t,o){if(0===o)return!0;var r=n(i[o-1],t);return!(r>0||e&&0===r)})),17),!t.origins)for(var r=0,s=this.resolutions_.length-1;r<s;++r)if(o){if(this.resolutions_[r]/this.resolutions_[r+1]!==o){o=void 0;break}}else o=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=o,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,ii(this.origins_.length==this.resolutions_.length,20));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=ae(a)),ii(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,ii(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:ri,ii(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,i){return new qr(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):a&&this.calculateTileRanges_(a)};aa.prototype.forEachTileCoord=function(t,i,e){for(var n=this.getTileRangeForExtentAndZ(t,i),o=n.minX,r=n.maxX;o<=r;++o)for(var s=n.minY,a=n.maxY;s<=a;++s)e([i,o,s])},aa.prototype.forEachTileCoordParentTileRange=function(t,i,e,n,o){var r,s,a,h=null,u=t[0]-1;for(2===this.zoomFactor_?(s=t[1],a=t[2]):h=this.getTileCoordExtent(t,o);u>=this.minZoom;){if(r=2===this.zoomFactor_?Xr(s=Math.floor(s/2),s,a=Math.floor(a/2),a,n):this.getTileRangeForExtentAndZ(h,u,n),i.call(e,u,r))return!0;--u}return!1},aa.prototype.getExtent=function(){return this.extent_},aa.prototype.getMaxZoom=function(){return this.maxZoom},aa.prototype.getMinZoom=function(){return this.minZoom},aa.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},aa.prototype.getResolution=function(t){return this.resolutions_[t]},aa.prototype.getResolutions=function(){return this.resolutions_},aa.prototype.getTileCoordChildTileRange=function(t,i,e){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],o=2*t[2];return Xr(n,n+1,o,o+1,i)}var r=this.getTileCoordExtent(t,e);return this.getTileRangeForExtentAndZ(r,t[0]+1,i)}return null},aa.prototype.getTileRangeExtent=function(t,i,e){var n=this.getOrigin(t),o=this.getResolution(t),r=Sn(this.getTileSize(t),this.tmpSize_),s=n[0]+i.minX*r[0]*o,a=n[0]+(i.maxX+1)*r[0]*o;return Hi(s,n[1]+i.minY*r[1]*o,a,n[1]+(i.maxY+1)*r[1]*o,e)},aa.prototype.getTileRangeForExtentAndZ=function(t,i,e){var n=sa;this.getTileCoordForXYAndZ_(t[0],t[1],i,!1,n);var o=n[1],r=n[2];return this.getTileCoordForXYAndZ_(t[2],t[3],i,!0,n),Xr(o,n[1],r,n[2],e)},aa.prototype.getTileCoordCenter=function(t){var i=this.getOrigin(t[0]),e=this.getResolution(t[0]),n=Sn(this.getTileSize(t[0]),this.tmpSize_);return[i[0]+(t[1]+.5)*n[0]*e,i[1]+(t[2]+.5)*n[1]*e]},aa.prototype.getTileCoordExtent=function(t,i){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=Sn(this.getTileSize(t[0]),this.tmpSize_),r=e[0]+t[1]*o[0]*n,s=e[1]+t[2]*o[1]*n;return Hi(r,s,r+o[0]*n,s+o[1]*n,i)},aa.prototype.getTileCoordForCoordAndResolution=function(t,i,e){return this.getTileCoordForXYAndResolution_(t[0],t[1],i,!1,e)},aa.prototype.getTileCoordForXYAndResolution_=function(t,i,e,n,o){var r=this.getZForResolution(e),s=e/this.getResolution(r),a=this.getOrigin(r),h=Sn(this.getTileSize(r),this.tmpSize_),u=n?.5:0,p=n?0:.5,l=Math.floor((t-a[0])/e+u),c=Math.floor((i-a[1])/e+p),_=s*l/h[0],d=s*c/h[1];return n?(_=Math.ceil(_)-1,d=Math.ceil(d)-1):(_=Math.floor(_),d=Math.floor(d)),Ws(r,_,d,o)},aa.prototype.getTileCoordForXYAndZ_=function(t,i,e,n,o){var r=this.getOrigin(e),s=this.getResolution(e),a=Sn(this.getTileSize(e),this.tmpSize_),h=n?.5:0,u=n?0:.5,p=Math.floor((t-r[0])/s+h),l=Math.floor((i-r[1])/s+u),c=p/a[0],_=l/a[1];return n?(c=Math.ceil(c)-1,_=Math.ceil(_)-1):(c=Math.floor(c),_=Math.floor(_)),Ws(e,c,_,o)},aa.prototype.getTileCoordForCoordAndZ=function(t,i,e){return this.getTileCoordForXYAndZ_(t[0],t[1],i,!1,e)},aa.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},aa.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},aa.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},aa.prototype.getZForResolution=function(t,i){return si(Nt(this.resolutions_,t,i||0),this.minZoom,this.maxZoom)},aa.prototype.calculateTileRanges_=function(t){for(var i=this.resolutions_.length,e=new Array(i),n=this.minZoom;n<i;++n)e[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=e};var ha=aa;function ua(t){var i=t.getDefaultTileGrid();return i||(i=function(t,i,e,n){return function(t,i,e,n){var o=void 0!==n?n:Ni.TOP_LEFT,r=pa(t,i,e);return new ha({extent:t,origin:ne(t,o),resolutions:r,tileSize:e})}(la(t),i,e,n)}(t),t.setDefaultTileGrid(i)),i}function pa(t,i,e){for(var n=void 0!==i?i:oi,o=re(t),r=ue(t),s=Sn(void 0!==e?e:ri),a=Math.max(r/s[0],o/s[1]),h=n+1,u=new Array(h),p=0;p<h;++p)u[p]=a/Math.pow(2,p);return u}function la(t){var i=(t=Be(t)).getExtent();if(!i){var e=180*ye[me.DEGREES]/t.getMetersPerUnit();i=Hi(-e,-e,e,e)}return i}var ca=function(t){function i(i){t.call(this,{attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,projection:i.projection,state:i.state,wrapX:i.wrapX}),this.opaque_=void 0!==i.opaque&&i.opaque,this.tilePixelRatio_=void 0!==i.tilePixelRatio?i.tilePixelRatio:1,this.tileGrid=void 0!==i.tileGrid?i.tileGrid:null,this.tileCache=new Qs(i.cacheSize),this.tmpSize=[0,0],this.key_=i.key||"",this.tileOptions={transition:i.transition}}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},i.prototype.expireCache=function(t,i){var e=this.getTileCacheForProjection(t);e&&e.expireCache(i)},i.prototype.forEachLoadedTile=function(t,i,e,n){var o=this.getTileCacheForProjection(t);if(!o)return!1;for(var r,s,a,h=!0,u=e.minX;u<=e.maxX;++u)for(var p=e.minY;p<=e.maxY;++p)s=Xs(i,u,p),a=!1,o.containsKey(s)&&(a=(r=o.get(s)).getState()===ti.LOADED)&&(a=!1!==n(r)),a||(h=!1);return h},i.prototype.getGutterForProjection=function(t){return 0},i.prototype.getKey=function(){return this.key_},i.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},i.prototype.getOpaque=function(t){return this.opaque_},i.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},i.prototype.getTile=function(t,i,e,o,r){return n()},i.prototype.getTileGrid=function(){return this.tileGrid},i.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:ua(t)},i.prototype.getTileCacheForProjection=function(t){var i=this.getProjection();return i&&!Xe(i,t)?null:this.tileCache},i.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},i.prototype.getTilePixelSize=function(t,i,e){var n,o,r,s=this.getTileGridForProjection(e),a=this.getTilePixelRatio(i),h=Sn(s.getTileSize(t),this.tmpSize);return 1==a?h:(n=h,o=a,void 0===(r=this.tmpSize)&&(r=[0,0]),r[0]=n[0]*o+.5|0,r[1]=n[1]*o+.5|0,r)},i.prototype.getTileCoordForTileUrlFunction=function(t,i){var e=void 0!==i?i:this.getProjection(),n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=function(t,i,e){var n=i[0],o=t.getTileCoordCenter(i),r=la(e);if(xi(r,o))return i;var s=ue(r),a=Math.ceil((r[0]-o[0])/s);return o[0]+=s*a,t.getTileCoordForCoordAndZ(o,n)}(n,t,e)),function(t,i){var e=t[0],n=t[1],o=t[2];if(i.getMinZoom()>e||e>i.getMaxZoom())return!1;var r,s=i.getExtent();return!(r=s?i.getTileRangeForExtentAndZ(s,e):i.getFullTileRange(e))||r.containsXY(n,o)}(t,n)?t:null},i.prototype.refresh=function(){this.tileCache.clear(),this.changed()},i.prototype.useTile=function(t,i,e,n){},i}(ra),_a=function(t){function i(i,e){t.call(this,i),this.tile=e}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(b),da="tileloadstart",fa="tileloadend",va="tileloaderror";function ga(t,i){t.getImage().src=i}var ya='&#169; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',ma=function(t){function i(i){var e,n=i||{};e=void 0!==n.attributions?n.attributions:[ya];var o=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",r=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";t.call(this,{attributions:e,cacheSize:n.cacheSize,crossOrigin:o,opaque:void 0===n.opaque||n.opaque,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,url:r,wrapX:n.wrapX,attributionsCollapsible:!1})}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(function(t){function i(i){var e=i||{},n=void 0!==e.projection?e.projection:"EPSG:3857",o=void 0!==e.tileGrid?e.tileGrid:function(t){var i=t||{},e=i.extent||Be("EPSG:3857").getExtent(),n={extent:e,minZoom:i.minZoom,tileSize:i.tileSize,resolutions:pa(e,i.maxZoom,i.tileSize)};return new ha(n)}({extent:la(n),maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,opaque:e.opaque,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible})}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(function(t){function i(i){t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction?i.tileLoadFunction:ga,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:i.wrapX,transition:i.transition,key:i.key,attributionsCollapsible:i.attributionsCollapsible}),this.crossOrigin=void 0!==i.crossOrigin?i.crossOrigin:null,this.tileClass=void 0!==i.tileClass?i.tileClass:Hs,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=i.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},i.prototype.expireCache=function(t,i){var e=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==e?i:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[n];o.expireCache(o==e?i:{})}},i.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Xe(this.getProjection(),t)?0:this.getGutter()},i.prototype.getGutter=function(){return 0},i.prototype.getOpaque=function(i){return!(this.getProjection()&&i&&!Xe(this.getProjection(),i))&&t.prototype.getOpaque.call(this,i)},i.prototype.getTileGridForProjection=function(t){var i=this.getProjection();if(!this.tileGrid||i&&!Xe(i,t)){var e=r(t);return e in this.tileGridForProjection||(this.tileGridForProjection[e]=ua(t)),this.tileGridForProjection[e]}return this.tileGrid},i.prototype.getTileCacheForProjection=function(t){var i=this.getProjection();if(!i||Xe(i,t))return this.tileCache;var e=r(t);return e in this.tileCacheForProjection||(this.tileCacheForProjection[e]=new Qs(this.tileCache.highWaterMark)),this.tileCacheForProjection[e]},i.prototype.createTile_=function(t,i,e,n,o,r){var s=[t,i,e],a=this.getTileCoordForTileUrlFunction(s,o),h=a?this.tileUrlFunction(a,n,o):void 0,u=new this.tileClass(s,void 0!==h?ti.IDLE:ti.EMPTY,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=r,g(u,A.CHANGE,this.handleTileChange,this),u},i.prototype.getTile=function(t,i,e,n,o){var r=this.getProjection();if(r&&o&&!Xe(r,o)){var s,a=this.getTileCacheForProjection(o),h=[t,i,e],u=qs(h);a.containsKey(u)&&(s=a.get(u));var p=this.getKey();if(s&&s.key==p)return s;var l=this.getTileGridForProjection(r),c=this.getTileGridForProjection(o),_=this.getTileCoordForTileUrlFunction(h,o),d=new ta(r,l,o,c,h,_,this.getTilePixelRatio(n),this.getGutter(),function(t,i,e,n){return this.getTileInternal(t,i,e,n,r)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return d.key=p,s?(d.interimTile=s,d.refreshInterimChain(),a.replace(u,d)):a.set(u,d),d}return this.getTileInternal(t,i,e,n,r||o)},i.prototype.getTileInternal=function(t,i,e,n,o){var r=null,s=Xs(t,i,e),a=this.getKey();if(this.tileCache.containsKey(s)){if((r=this.tileCache.get(s)).key!=a){var h=r;r=this.createTile_(t,i,e,n,o,a),h.getState()==ti.IDLE?r.interimTile=h.interimTile:r.interimTile=h,r.refreshInterimChain(),this.tileCache.replace(s,r)}}else r=this.createTile_(t,i,e,n,o,a),this.tileCache.set(s,r);return r},i.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var i in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[i].clear();this.changed()}},i.prototype.setTileGridForProjection=function(t,i){var e=Be(t);if(e){var n=r(e);n in this.tileGridForProjection||(this.tileGridForProjection[n]=i)}},i}(function(t){function i(i){t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tilePixelRatio:i.tilePixelRatio,wrapX:i.wrapX,transition:i.transition,key:i.key,attributionsCollapsible:i.attributionsCollapsible}),this.generateTileUrlFunction_=!i.tileUrlFunction,this.tileLoadFunction=i.tileLoadFunction,this.tileUrlFunction=i.tileUrlFunction?i.tileUrlFunction.bind(this):na,this.urls=null,i.urls?this.setUrls(i.urls):i.url&&this.setUrl(i.url),i.tileUrlFunction&&this.setTileUrlFunction(i.tileUrlFunction,this.key_),this.tileLoadingKeys_={}}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},i.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},i.prototype.getUrls=function(){return this.urls},i.prototype.handleTileChange=function(t){var i,e=t.target,n=r(e),o=e.getState();o==ti.LOADING?(this.tileLoadingKeys_[n]=!0,i=da):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],i=o==ti.ERROR?va:o==ti.LOADED||o==ti.ABORT?fa:void 0),null!=i&&this.dispatchEvent(new _a(i,e))},i.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},i.prototype.setTileUrlFunction=function(t,i){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==i?this.setKey(i):this.changed()},i.prototype.setUrl=function(t){var i=this.urls=function(t){var i=[],e=/\{([a-z])-([a-z])\}/.exec(t);if(e){var n,o=e[1].charCodeAt(0),r=e[2].charCodeAt(0);for(n=o;n<=r;++n)i.push(t.replace(e[0],String.fromCharCode(n)));return i}if(e=e=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(e[2],10),a=parseInt(e[1],10);a<=s;a++)i.push(t.replace(e[0],a.toString()));return i}return i.push(t),i}(t);this.setUrls(i)},i.prototype.setUrls=function(t){this.urls=t;var i=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(ea(t,this.tileGrid),i):this.setKey(i)},i.prototype.useTile=function(t,i,e){var n=Xs(t,i,e);this.tileCache.containsKey(n)&&this.tileCache.get(n)},i}(ca)))),Ea="preload",Ta="useInterimTilesOnError",Ca=function(t){function i(i){var e=i||{},n=p({},e);delete n.preload,delete n.useInterimTilesOnError,t.call(this,n),this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),this.type=rr.TILE}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.getPreload=function(){return this.get(Ea)},i.prototype.setPreload=function(t){this.set(Ea,t)},i.prototype.getUseInterimTilesOnError=function(){return this.get(Ta)},i.prototype.setUseInterimTilesOnError=function(t){this.set(Ta,t)},i}(po);Ca.prototype.getSource;new zs({target:"map",layers:[new Ca({source:new ma})],view:new Vs({center:[0,0],zoom:4})})}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JidXNoL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9xdWlja3NlbGVjdC9xdWlja3NlbGVjdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvdXRpbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvQXNzZXJ0aW9uRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL0NvbGxlY3Rpb25FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL09iamVjdEV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvb2JqLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL0Rpc3Bvc2FibGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2Z1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL0V2ZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvVGFyZ2V0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvRXZlbnRUeXBlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9PYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9PYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL0NvbGxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL01hcEV2ZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9NYXBCcm93c2VyRXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2hhcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlclBvaW50ZXJFdmVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcG9pbnRlci9FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3BvaW50ZXIvRXZlbnRTb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3BvaW50ZXIvTW91c2VTb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3BvaW50ZXIvTXNTb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3BvaW50ZXIvTmF0aXZlU291cmNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9wb2ludGVyL1BvaW50ZXJFdmVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvYXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3BvaW50ZXIvVG91Y2hTb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3BvaW50ZXIvUG9pbnRlckV2ZW50SGFuZGxlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50SGFuZGxlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvTWFwRXZlbnRUeXBlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9NYXBQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0V2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvVGlsZVN0YXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9hc3NlcnRzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zdHJ1Y3RzL1ByaW9yaXR5UXVldWUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL1RpbGVRdWV1ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQvY29tbW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9tYXRoLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9jZW50ZXJjb25zdHJhaW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZXNvbHV0aW9uY29uc3RyYWludC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcm90YXRpb25jb25zdHJhaW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9WaWV3SGludC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvVmlld1Byb3BlcnR5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9jb29yZGluYXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9lYXNpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2V4dGVudC9Db3JuZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2V4dGVudC9SZWxhdGlvbnNoaXAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2V4dGVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9HZW9tZXRyeVR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vR2VvbWV0cnlMYXlvdXQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC90cmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3NwaGVyZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcHJvai9Vbml0cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcHJvai9Qcm9qZWN0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL2Vwc2czODU3LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL2Vwc2c0MzI2LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL3Byb2plY3Rpb25zLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL3RyYW5zZm9ybXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ouanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9HZW9tZXRyeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9TaW1wbGVHZW9tZXRyeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2FyZWEuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9jbG9zZXN0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvZGVmbGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2luZmxhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9zaW1wbGlmeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9MaW5lYXJSaW5nLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL1BvaW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvY29udGFpbnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9pbnRlcmlvcnBvaW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvaW50ZXJzZWN0c2V4dGVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3NlZ21lbnRzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvcmV2ZXJzZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L29yaWVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9Qb2x5Z29uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9WaWV3LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9kb20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL1Byb3BlcnR5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9CYXNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvU3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL0dyb3VwLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zaXplLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9QbHVnZ2FibGVNYXAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2NvbnRyb2wvQ29udHJvbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvY3NzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9MYXllci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9BdHRyaWJ1dGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9Sb3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2NvbnRyb2wvWm9vbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvS2luZXRpYy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy9jb25kaXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BvaW50ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdQYW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9Cb3guanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdCb3guanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdab29tLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvS2V5Q29kZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9QaW5jaFpvb20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlcHJvai9jb21tb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL0ltYWdlU3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL0ltYWdlQ2FudmFzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9JbWFnZUJhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL0xheWVyVHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvVmVjdG9yUmVuZGVyVHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0V2ZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zdHJ1Y3RzL0xSVUNhY2hlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvY2FudmFzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9jb2xvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvY29sb3JsaWtlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvVmVjdG9yQ29udGV4dC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9JbW1lZGlhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3N0eWxlL0ljb25JbWFnZUNhY2hlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9NYXAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL2NhbnZhcy9NYXAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL2NhbnZhcy9MYXllci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL2NhbnZhcy9JbnRlcm1lZGlhdGVDYW52YXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL2NhbnZhcy9JbWFnZUxheWVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9UaWxlUmFuZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL2NhbnZhcy9UaWxlTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9SZXBsYXlHcm91cC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL1JlcGxheVR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9sZW5ndGguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC90ZXh0cGF0aC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9JbnN0cnVjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL3JlcGxheS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9SZXBsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9jYW52YXMvSW1hZ2VSZXBsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9jYW52YXMvTGluZVN0cmluZ1JlcGxheS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9Qb2x5Z29uUmVwbGF5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvc3RyYWlnaHRjaHVuay5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvc3R5bGUvVGV4dFBsYWNlbWVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9UZXh0UmVwbGF5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvY2FudmFzL1JlcGxheUdyb3VwLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci92ZWN0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL2NhbnZhcy9WZWN0b3JMYXllci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvVmVjdG9yVGlsZVJlbmRlclR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL2NhbnZhcy9WZWN0b3JUaWxlTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL21hcC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC91dGlsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvdmlldy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvVGlsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2VUaWxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC90aWxlY29vcmQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL1RpbGVDYWNoZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZXByb2ovVHJpYW5ndWxhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qL1RpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3RpbGV1cmxmdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1NvdXJjZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQvVGlsZUdyaWQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3RpbGVncmlkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVGlsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1RpbGVFdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9UaWxlSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9PU00uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9YWVouanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9VcmxUaWxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9UaWxlUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL1RpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJyYnVzaCIsImRlZmF1bHQiLCJxdWlja3NlbGVjdCIsIm1heEVudHJpZXMiLCJmb3JtYXQiLCJ0aGlzIiwiX21heEVudHJpZXMiLCJNYXRoIiwibWF4IiwiX21pbkVudHJpZXMiLCJjZWlsIiwiX2luaXRGb3JtYXQiLCJjbGVhciIsImZpbmRJdGVtIiwiaXRlbSIsIml0ZW1zIiwiZXF1YWxzRm4iLCJpbmRleE9mIiwibGVuZ3RoIiwiY2FsY0JCb3giLCJub2RlIiwidG9CQm94IiwiZGlzdEJCb3giLCJjaGlsZHJlbiIsImsiLCJkZXN0Tm9kZSIsImNyZWF0ZU5vZGUiLCJtaW5YIiwiSW5maW5pdHkiLCJtaW5ZIiwibWF4WCIsIm1heFkiLCJjaGlsZCIsImV4dGVuZCIsImxlYWYiLCJhIiwiYiIsIm1pbiIsImNvbXBhcmVOb2RlTWluWCIsImNvbXBhcmVOb2RlTWluWSIsImJib3hBcmVhIiwiYmJveE1hcmdpbiIsImNvbnRhaW5zIiwiaW50ZXJzZWN0cyIsImhlaWdodCIsIm11bHRpU2VsZWN0IiwiYXJyIiwibGVmdCIsInJpZ2h0IiwiY29tcGFyZSIsIm1pZCIsInN0YWNrIiwicG9wIiwicHVzaCIsImFsbCIsIl9hbGwiLCJkYXRhIiwic2VhcmNoIiwiYmJveCIsInJlc3VsdCIsImxlbiIsImNoaWxkQkJveCIsIm5vZGVzVG9TZWFyY2giLCJjb2xsaWRlcyIsImxvYWQiLCJpbnNlcnQiLCJfYnVpbGQiLCJzbGljZSIsIl9zcGxpdFJvb3QiLCJ0bXBOb2RlIiwiX2luc2VydCIsInJlbW92ZSIsInBhcmVudCIsImluZGV4IiwiZ29pbmdVcCIsInBhdGgiLCJpbmRleGVzIiwic3BsaWNlIiwiX2NvbmRlbnNlIiwiY29tcGFyZU1pblgiLCJjb21wYXJlTWluWSIsInRvSlNPTiIsImZyb21KU09OIiwiYXBwbHkiLCJOIiwiTSIsImxvZyIsInBvdyIsImoiLCJyaWdodDIiLCJyaWdodDMiLCJOMiIsIk4xIiwic3FydCIsIl9jaG9vc2VTdWJ0cmVlIiwibGV2ZWwiLCJ0YXJnZXROb2RlIiwiYXJlYSIsImVubGFyZ2VtZW50IiwibWluQXJlYSIsIm1pbkVubGFyZ2VtZW50IiwiaXNOb2RlIiwiaW5zZXJ0UGF0aCIsIl9zcGxpdCIsIl9hZGp1c3RQYXJlbnRCQm94ZXMiLCJfY2hvb3NlU3BsaXRBeGlzIiwic3BsaXRJbmRleCIsIl9jaG9vc2VTcGxpdEluZGV4IiwibmV3Tm9kZSIsImJib3gxIiwiYmJveDIiLCJvdmVybGFwIiwibWluT3ZlcmxhcCIsIl9hbGxEaXN0TWFyZ2luIiwic29ydCIsImxlZnRCQm94IiwicmlnaHRCQm94IiwibWFyZ2luIiwic2libGluZ3MiLCJjb21wYXJlQXJyIiwiRnVuY3Rpb24iLCJqb2luIiwic3dhcCIsInRtcCIsImRlZmF1bHRDb21wYXJlIiwicXVpY2tzZWxlY3RTdGVwIiwieiIsImV4cCIsInNkIiwibmV3TGVmdCIsImZsb29yIiwibmV3UmlnaHQiLCJmYWN0b3J5IiwidXRpbF9hYnN0cmFjdCIsIkVycm9yIiwidWlkQ291bnRlcl8iLCJnZXRVaWQiLCJvYmoiLCJvbF91aWQiLCJTdHJpbmciLCJWRVJTSU9OIiwib2xfQXNzZXJ0aW9uRXJyb3IiLCJBc3NlcnRpb25FcnJvciIsImNvZGUiLCJtZXNzYWdlIiwic3BsaXQiLCJfX3Byb3RvX18iLCJjb25zdHJ1Y3RvciIsIkNvbGxlY3Rpb25FdmVudFR5cGUiLCJBREQiLCJSRU1PVkUiLCJPYmplY3RFdmVudFR5cGUiLCJvYmpfYXNzaWduIiwiYXNzaWduIiwidGFyZ2V0IiwidmFyX3NvdXJjZXMiLCJhcmd1bWVudHMkMSIsImFyZ3VtZW50cyIsIlR5cGVFcnJvciIsIm91dHB1dCIsImlpIiwic291cmNlIiwib2JqX2NsZWFyIiwib2JqX2lzRW1wdHkiLCJmaW5kTGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJsaXN0ZW5lciIsIm9wdF90aGlzIiwib3B0X3NldERlbGV0ZUluZGV4IiwibGlzdGVuZXJPYmoiLCJiaW5kVG8iLCJkZWxldGVJbmRleCIsImdldExpc3RlbmVycyIsInR5cGUiLCJsaXN0ZW5lck1hcCIsImdldExpc3RlbmVyTWFwIiwidW5kZWZpbmVkIiwib3B0X2NyZWF0ZSIsIm9sX2xtIiwicmVtb3ZlTGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImJvdW5kTGlzdGVuZXIiLCJrZXlzIiwicmVtb3ZlTGlzdGVuZXJNYXAiLCJsaXN0ZW4iLCJvcHRfb25jZSIsImNhbGxPbmNlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInVubGlzdGVuQnlLZXkiLCJiaW5kTGlzdGVuZXIiLCJsaXN0ZW5PbmNlIiwidW5saXN0ZW4iLCJEaXNwb3NhYmxlX0Rpc3Bvc2FibGUiLCJkaXNwb3NlZF8iLCJkaXNwb3NlIiwiZGlzcG9zZUludGVybmFsIiwib2xfRGlzcG9zYWJsZSIsIlRSVUUiLCJGQUxTRSIsIlZPSUQiLCJFdmVudCIsInByb3BhZ2F0aW9uU3RvcHBlZCIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZXZlbnRzX0V2ZW50IiwiZXZlbnRzX1RhcmdldCIsIkRpc3Bvc2FibGUiLCJUYXJnZXQiLCJwZW5kaW5nUmVtb3ZhbHNfIiwiZGlzcGF0Y2hpbmdfIiwibGlzdGVuZXJzXyIsImRpc3BhdGNoRXZlbnQiLCJldmVudCIsInByb3BhZ2F0ZSIsInBlbmRpbmdSZW1vdmFscyIsInVubGlzdGVuQWxsIiwiaGFzTGlzdGVuZXIiLCJvcHRfdHlwZSIsIkV2ZW50VHlwZSIsIkNIQU5HRSIsIkNMRUFSIiwiQ09OVEVYVE1FTlUiLCJDTElDSyIsIkRCTENMSUNLIiwiRFJBR0VOVEVSIiwiRFJBR09WRVIiLCJEUk9QIiwiRVJST1IiLCJLRVlET1dOIiwiS0VZUFJFU1MiLCJMT0FEIiwiTU9VU0VET1dOIiwiTU9VU0VNT1ZFIiwiTU9VU0VPVVQiLCJNT1VTRVVQIiwiTU9VU0VXSEVFTCIsIk1TUE9JTlRFUkRPV04iLCJSRVNJWkUiLCJUT1VDSFNUQVJUIiwiVE9VQ0hNT1ZFIiwiVE9VQ0hFTkQiLCJXSEVFTCIsIm9sX09ic2VydmFibGUiLCJFdmVudFRhcmdldCIsIk9ic2VydmFibGUiLCJyZXZpc2lvbl8iLCJjaGFuZ2VkIiwiZ2V0UmV2aXNpb24iLCJvbiIsIkFycmF5IiwiaXNBcnJheSIsIm9uY2UiLCJ1biIsIk9iamVjdEV2ZW50Iiwib2xkVmFsdWUiLCJjaGFuZ2VFdmVudFR5cGVDYWNoZSIsImdldENoYW5nZUV2ZW50VHlwZSIsIm9sX09iamVjdCIsIkJhc2VPYmplY3QiLCJvcHRfdmFsdWVzIiwidmFsdWVzXyIsInNldFByb3BlcnRpZXMiLCJnZXRLZXlzIiwiZ2V0UHJvcGVydGllcyIsIm5vdGlmeSIsImV2ZW50VHlwZSIsInNldCIsIm9wdF9zaWxlbnQiLCJ2YWx1ZXMiLCJ1bnNldCIsIlByb3BlcnR5IiwiQ29sbGVjdGlvbkV2ZW50Iiwib3B0X2VsZW1lbnQiLCJlbGVtZW50Iiwib2xfQ29sbGVjdGlvbiIsIkNvbGxlY3Rpb24iLCJvcHRfYXJyYXkiLCJvcHRfb3B0aW9ucyIsIm9wdGlvbnMiLCJ1bmlxdWVfIiwidW5pcXVlIiwiYXJyYXlfIiwiYXNzZXJ0VW5pcXVlXyIsInVwZGF0ZUxlbmd0aF8iLCJnZXRMZW5ndGgiLCJmb3JFYWNoIiwiZiIsImFycmF5IiwiZ2V0QXJyYXkiLCJpbnNlcnRBdCIsImVsZW0iLCJyZW1vdmVBdCIsInByZXYiLCJzZXRBdCIsIm9wdF9leGNlcHQiLCJvbF9NYXBFdmVudCIsIk1hcEV2ZW50IiwibWFwIiwib3B0X2ZyYW1lU3RhdGUiLCJmcmFtZVN0YXRlIiwib2xfTWFwQnJvd3NlckV2ZW50IiwiTWFwQnJvd3NlckV2ZW50IiwiYnJvd3NlckV2ZW50Iiwib3B0X2RyYWdnaW5nIiwib3JpZ2luYWxFdmVudCIsInBpeGVsIiwiZ2V0RXZlbnRQaXhlbCIsImNvb3JkaW5hdGUiLCJnZXRDb29yZGluYXRlRnJvbVBpeGVsIiwiZHJhZ2dpbmciLCJ1YSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiRklSRUZPWCIsIlNBRkFSSSIsIldFQktJVCIsIk1BQyIsIkRFVklDRV9QSVhFTF9SQVRJTyIsIndpbmRvdyIsImRldmljZVBpeGVsUmF0aW8iLCJDQU5WQVNfTElORV9EQVNIIiwiaGFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiZ2V0Q29udGV4dCIsInNldExpbmVEYXNoIiwiZSIsIlRPVUNIIiwiUE9JTlRFUiIsIk1TUE9JTlRFUiIsIk1hcEJyb3dzZXJFdmVudFR5cGUiLCJTSU5HTEVDTElDSyIsIlBPSU5URVJEUkFHIiwiUE9JTlRFUk1PVkUiLCJQT0lOVEVSRE9XTiIsIlBPSU5URVJVUCIsIlBPSU5URVJPVkVSIiwiUE9JTlRFUk9VVCIsIlBPSU5URVJFTlRFUiIsIlBPSU5URVJMRUFWRSIsIlBPSU5URVJDQU5DRUwiLCJvbF9NYXBCcm93c2VyUG9pbnRlckV2ZW50IiwiTWFwQnJvd3NlclBvaW50ZXJFdmVudCIsInBvaW50ZXJFdmVudCIsInBvaW50ZXJfRXZlbnRUeXBlIiwiRXZlbnRTb3VyY2VfRXZlbnRTb3VyY2UiLCJkaXNwYXRjaGVyIiwibWFwcGluZyIsIm1hcHBpbmdfIiwiZ2V0RXZlbnRzIiwiZ2V0SGFuZGxlckZvckV2ZW50IiwicG9pbnRlcl9FdmVudFNvdXJjZSIsIlBPSU5URVJfSUQiLCJQT0lOVEVSX1RZUEUiLCJtb3VzZWRvd24iLCJpbkV2ZW50IiwiaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaF8iLCJ0b1N0cmluZyIsInBvaW50ZXJNYXAiLCJjYW5jZWwiLCJwcmVwYXJlRXZlbnQiLCJkb3duIiwibW91c2Vtb3ZlIiwibW92ZSIsIm1vdXNldXAiLCJidXR0b24iLCJ1cCIsImNsZWFudXBNb3VzZSIsIm1vdXNlb3ZlciIsImVudGVyT3ZlciIsIm1vdXNlb3V0IiwibGVhdmVPdXQiLCJjbG9uZUV2ZW50IiwicGQiLCJwb2ludGVySWQiLCJpc1ByaW1hcnkiLCJwb2ludGVyVHlwZSIsInBvaW50ZXJfTW91c2VTb3VyY2UiLCJFdmVudFNvdXJjZSIsIk1vdXNlU291cmNlIiwibGFzdFRvdWNoZXMiLCJsdHMiLCJ4IiwiY2xpZW50WCIsInkiLCJjbGllbnRZIiwiZHgiLCJhYnMiLCJkeSIsIlBPSU5URVJfVFlQRVMiLCJtc1BvaW50ZXJEb3duIiwicHJlcGFyZUV2ZW50XyIsIm1zUG9pbnRlck1vdmUiLCJtc1BvaW50ZXJVcCIsImNsZWFudXAiLCJtc1BvaW50ZXJPdXQiLCJtc1BvaW50ZXJPdmVyIiwibXNQb2ludGVyQ2FuY2VsIiwibXNMb3N0UG9pbnRlckNhcHR1cmUiLCJtYWtlRXZlbnQiLCJtc0dvdFBvaW50ZXJDYXB0dXJlIiwicG9pbnRlcl9Nc1NvdXJjZSIsIk1zU291cmNlIiwiTVNQb2ludGVyRG93biIsIk1TUG9pbnRlck1vdmUiLCJNU1BvaW50ZXJVcCIsIk1TUG9pbnRlck91dCIsIk1TUG9pbnRlck92ZXIiLCJNU1BvaW50ZXJDYW5jZWwiLCJNU0dvdFBvaW50ZXJDYXB0dXJlIiwiTVNMb3N0UG9pbnRlckNhcHR1cmUiLCJwb2ludGVyRG93biIsImZpcmVOYXRpdmVFdmVudCIsInBvaW50ZXJNb3ZlIiwicG9pbnRlclVwIiwicG9pbnRlck91dCIsInBvaW50ZXJPdmVyIiwicG9pbnRlckNhbmNlbCIsImxvc3RQb2ludGVyQ2FwdHVyZSIsImdvdFBvaW50ZXJDYXB0dXJlIiwicG9pbnRlcl9OYXRpdmVTb3VyY2UiLCJOYXRpdmVTb3VyY2UiLCJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcm91dCIsInBvaW50ZXJvdmVyIiwicG9pbnRlcmNhbmNlbCIsImdvdHBvaW50ZXJjYXB0dXJlIiwibG9zdHBvaW50ZXJjYXB0dXJlIiwiSEFTX0JVVFRPTlMiLCJQb2ludGVyRXZlbnQiLCJfRXZlbnQiLCJvcHRfZXZlbnREaWN0IiwiZXZlbnREaWN0IiwiYnV0dG9ucyIsIndoaWNoIiwiZ2V0QnV0dG9ucyIsInByZXNzdXJlIiwiZ2V0UHJlc3N1cmUiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsInZpZXciLCJkZXRhaWwiLCJzY3JlZW5YIiwic2NyZWVuWSIsImN0cmxLZXkiLCJhbHRLZXkiLCJzaGlmdEtleSIsIm1ldGFLZXkiLCJyZWxhdGVkVGFyZ2V0Iiwid2lkdGgiLCJ0aWx0WCIsInRpbHRZIiwiaHdUaW1lc3RhbXAiLCJldiIsIk1vdXNlRXZlbnQiLCJwb2ludGVyX1BvaW50ZXJFdmVudCIsIm51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24iLCJsaW5lYXJGaW5kTmVhcmVzdCIsImRpcmVjdGlvbiIsInJldmVyc2VTdWJBcnJheSIsImJlZ2luIiwiZW5kIiwiZXh0ZW5zaW9uIiwiZXF1YWxzIiwiYXJyMSIsImFycjIiLCJsZW4xIiwidG91Y2hzdGFydCIsInZhY3V1bVRvdWNoZXNfIiwic2V0UHJpbWFyeVRvdWNoXyIsImNoYW5nZWRUb3VjaGVzIiwiZGVkdXBTeW50aE1vdXNlXyIsImNsaWNrQ291bnRfIiwicHJvY2Vzc1RvdWNoZXNfIiwib3ZlckRvd25fIiwidG91Y2htb3ZlIiwibW92ZU92ZXJPdXRfIiwidG91Y2hlbmQiLCJ1cE91dF8iLCJ0b3VjaGNhbmNlbCIsImNhbmNlbE91dF8iLCJwb2ludGVyX1RvdWNoU291cmNlIiwiVG91Y2hTb3VyY2UiLCJtb3VzZVNvdXJjZSIsImZpcnN0VG91Y2hJZF8iLCJyZXNldElkXyIsImRlZHVwVGltZW91dF8iLCJpc1ByaW1hcnlUb3VjaF8iLCJpblRvdWNoIiwiaWRlbnRpZmllciIsImNvdW50IiwiY2FuY2VsUmVzZXRDbGlja0NvdW50XyIsInJlbW92ZVByaW1hcnlQb2ludGVyXyIsImluUG9pbnRlciIsInJlc2V0Q2xpY2tDb3VudF8iLCJzZXRUaW1lb3V0IiwicmVzZXRDbGlja0NvdW50SGFuZGxlcl8iLCJjbGVhclRpbWVvdXQiLCJ0b3VjaFRvUG9pbnRlcl8iLCJyYWRpdXNYIiwicmFkaXVzWSIsImZvcmNlIiwiaW5GdW5jdGlvbiIsInRvdWNoZXMiLCJwb2ludGVyIiwiZmluZFRvdWNoXyIsInRvdWNoTGlzdCIsInNlYXJjaElkIiwiTnVtYmVyIiwib3V0IiwiaSQxIiwib3V0VGFyZ2V0Iiwib3ZlciIsImVudGVyIiwib3V0RXZlbnQiLCJsZWF2ZSIsImNsZWFuVXBQb2ludGVyXyIsImx0IiwiQ0xPTkVfUFJPUFMiLCJwb2ludGVyX1BvaW50ZXJFdmVudEhhbmRsZXIiLCJQb2ludGVyRXZlbnRIYW5kbGVyIiwiZWxlbWVudF8iLCJldmVudE1hcF8iLCJldmVudFNvdXJjZUxpc3RfIiwicmVnaXN0ZXJTb3VyY2VzIiwicmVnaXN0ZXJTb3VyY2UiLCJyZWdpc3Rlcl8iLCJuZXdFdmVudHMiLCJoYW5kbGVyIiwiZXZlbnRTb3VyY2UiLCJhZGRFdmVudHNfIiwidW5yZWdpc3Rlcl8iLCJyZW1vdmVFdmVudHNfIiwiZXZlbnRIYW5kbGVyXyIsImV2ZW50cyIsImV2ZW50TmFtZSIsImV2ZW50Q29weSIsImZpcmVFdmVudCIsImNvbnRhaW5zXyIsImNvbnRhaW5lciIsImNvbnRhaW5lZCIsImluVHlwZSIsIndyYXBNb3VzZUV2ZW50Iiwib2xfTWFwQnJvd3NlckV2ZW50SGFuZGxlciIsIk1hcEJyb3dzZXJFdmVudEhhbmRsZXIiLCJtb3ZlVG9sZXJhbmNlIiwibWFwXyIsImNsaWNrVGltZW91dElkXyIsImRyYWdnaW5nXyIsImRyYWdMaXN0ZW5lcktleXNfIiwibW92ZVRvbGVyYW5jZV8iLCJkb3duXyIsImdldFZpZXdwb3J0IiwiYWN0aXZlUG9pbnRlcnNfIiwidHJhY2tlZFRvdWNoZXNfIiwicG9pbnRlckV2ZW50SGFuZGxlcl8iLCJkb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfIiwicG9pbnRlcmRvd25MaXN0ZW5lcktleV8iLCJoYW5kbGVQb2ludGVyRG93bl8iLCJyZWxheWVkTGlzdGVuZXJLZXlfIiwicmVsYXlFdmVudF8iLCJlbXVsYXRlQ2xpY2tfIiwibmV3RXZlbnQiLCJ1cGRhdGVBY3RpdmVQb2ludGVyc18iLCJoYW5kbGVQb2ludGVyVXBfIiwiaXNNb3VzZUFjdGlvbkJ1dHRvbl8iLCJoYW5kbGVQb2ludGVyTW92ZV8iLCJpc01vdmluZ18iLCJNYXBFdmVudFR5cGUiLCJNYXBQcm9wZXJ0eSIsIkxBWUVSR1JPVVAiLCJTSVpFIiwiVEFSR0VUIiwiVklFVyIsInJlbmRlcl9FdmVudFR5cGUiLCJUaWxlU3RhdGUiLCJJRExFIiwiTE9BRElORyIsIkxPQURFRCIsIkVNUFRZIiwiQUJPUlQiLCJhc3NlcnQiLCJhc3NlcnRpb24iLCJlcnJvckNvZGUiLCJQcmlvcml0eVF1ZXVlX1ByaW9yaXR5UXVldWUiLCJwcmlvcml0eUZ1bmN0aW9uIiwia2V5RnVuY3Rpb24iLCJwcmlvcml0eUZ1bmN0aW9uXyIsImtleUZ1bmN0aW9uXyIsImVsZW1lbnRzXyIsInByaW9yaXRpZXNfIiwicXVldWVkRWxlbWVudHNfIiwiZGVxdWV1ZSIsImVsZW1lbnRzIiwicHJpb3JpdGllcyIsInNpZnRVcF8iLCJlbGVtZW50S2V5IiwiZW5xdWV1ZSIsInByaW9yaXR5Iiwic2lmdERvd25fIiwiZ2V0Q291bnQiLCJnZXRMZWZ0Q2hpbGRJbmRleF8iLCJnZXRSaWdodENoaWxkSW5kZXhfIiwiZ2V0UGFyZW50SW5kZXhfIiwiaGVhcGlmeV8iLCJpc0VtcHR5IiwiaXNLZXlRdWV1ZWQiLCJpc1F1ZXVlZCIsInN0YXJ0SW5kZXgiLCJsSW5kZXgiLCJySW5kZXgiLCJzbWFsbGVyQ2hpbGRJbmRleCIsInBhcmVudEluZGV4IiwicmVwcmlvcml0aXplIiwib2xfVGlsZVF1ZXVlIiwiUHJpb3JpdHlRdWV1ZSIsIlRpbGVRdWV1ZSIsInRpbGVQcmlvcml0eUZ1bmN0aW9uIiwidGlsZUNoYW5nZUNhbGxiYWNrIiwiZ2V0S2V5IiwidGlsZUNoYW5nZUNhbGxiYWNrXyIsInRpbGVzTG9hZGluZ18iLCJ0aWxlc0xvYWRpbmdLZXlzXyIsImFkZGVkIiwiaGFuZGxlVGlsZUNoYW5nZSIsImdldFRpbGVzTG9hZGluZyIsInRpbGUiLCJzdGF0ZSIsImdldFN0YXRlIiwidGlsZUtleSIsImxvYWRNb3JlVGlsZXMiLCJtYXhUb3RhbExvYWRpbmciLCJtYXhOZXdMb2FkcyIsIm5ld0xvYWRzIiwiYWJvcnRlZFRpbGVzIiwiREVGQVVMVF9NQVhfWk9PTSIsIkRFRkFVTFRfVElMRV9TSVpFIiwiY2xhbXAiLCJjb3NoIiwic3F1YXJlZFNlZ21lbnREaXN0YW5jZSIsIngxIiwieTEiLCJ4MiIsInkyIiwibWF0aF9zcXVhcmVkRGlzdGFuY2UiLCJ0b1JhZGlhbnMiLCJhbmdsZUluRGVncmVlcyIsIlBJIiwibW9kdWxvIiwibGVycCIsImNyZWF0ZUV4dGVudCIsImV4dGVudCIsImNlbnRlciIsIm5vbmUiLCJjcmVhdGVTbmFwVG9SZXNvbHV0aW9ucyIsInJlc29sdXRpb25zIiwicmVzb2x1dGlvbiIsImRlbHRhIiwicG93ZXIiLCJjcmVhdGVTbmFwVG9Qb3dlciIsIm1heFJlc29sdXRpb24iLCJvcHRfbWF4TGV2ZWwiLCJvZmZzZXQiLCJvbGRMZXZlbCIsIm5ld0xldmVsIiwiZGlzYWJsZSIsInJvdGF0aW9uIiwicm90YXRpb25jb25zdHJhaW50X25vbmUiLCJjcmVhdGVTbmFwVG9OIiwidGhldGEiLCJjcmVhdGVTbmFwVG9aZXJvIiwib3B0X3RvbGVyYW5jZSIsInRvbGVyYW5jZSIsIlZpZXdIaW50IiwiVmlld1Byb3BlcnR5IiwiYWRkIiwiY29vcmRpbmF0ZV9lcXVhbHMiLCJjb29yZGluYXRlMSIsImNvb3JkaW5hdGUyIiwiY29vcmRpbmF0ZV9yb3RhdGUiLCJhbmdsZSIsImNvc0FuZ2xlIiwiY29zIiwic2luQW5nbGUiLCJzaW4iLCJjb29yZGluYXRlX3NjYWxlIiwic2NhbGUiLCJlYXNlSW4iLCJlYXNlT3V0IiwiaW5BbmRPdXQiLCJsaW5lYXIiLCJDb3JuZXIiLCJCT1RUT01fTEVGVCIsIkJPVFRPTV9SSUdIVCIsIlRPUF9MRUZUIiwiVE9QX1JJR0hUIiwiUmVsYXRpb25zaGlwIiwiVU5LTk9XTiIsIklOVEVSU0VDVElORyIsIkFCT1ZFIiwiUklHSFQiLCJCRUxPVyIsIkxFRlQiLCJib3VuZGluZ0V4dGVudCIsImNvb3JkaW5hdGVzIiwiY3JlYXRlRW1wdHkiLCJleHRlbmRDb29yZGluYXRlIiwiYnVmZmVyIiwib3B0X2V4dGVudCIsImV4dGVudF9jbG9uZSIsImNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSIsImNvbnRhaW5zQ29vcmRpbmF0ZSIsImV4dGVudF9jb250YWluc1hZIiwiY29udGFpbnNFeHRlbnQiLCJleHRlbnQxIiwiZXh0ZW50MiIsImNvb3JkaW5hdGVSZWxhdGlvbnNoaXAiLCJyZWxhdGlvbnNoaXAiLCJjcmVhdGVPclVwZGF0ZSIsImNyZWF0ZU9yVXBkYXRlRW1wdHkiLCJleHRlbnRfZXF1YWxzIiwiZXh0ZW50X2V4dGVuZCIsImV4dGVuZENvb3JkaW5hdGVzIiwiZXh0ZW5kRmxhdENvb3JkaW5hdGVzIiwiZmxhdENvb3JkaW5hdGVzIiwic3RyaWRlIiwiZXh0ZW5kWFkiLCJleHRlbnRfZ2V0QXJlYSIsImV4dGVudF9pc0VtcHR5IiwiZ2V0V2lkdGgiLCJnZXRIZWlnaHQiLCJnZXRCb3R0b21MZWZ0IiwiZ2V0Qm90dG9tUmlnaHQiLCJleHRlbnRfZ2V0Q2VudGVyIiwiZ2V0Q29ybmVyIiwiY29ybmVyIiwiZ2V0VG9wTGVmdCIsImdldFRvcFJpZ2h0IiwiZ2V0Rm9yVmlld0FuZFNpemUiLCJzaXplIiwiY29zUm90YXRpb24iLCJzaW5Sb3RhdGlvbiIsInhDb3MiLCJ4U2luIiwieUNvcyIsInlTaW4iLCJ4MCIsIngzIiwieTAiLCJ5MyIsImdldEludGVyc2VjdGlvbiIsImludGVyc2VjdGlvbiIsImV4dGVudF9pbnRlcnNlY3RzIiwiR2VvbWV0cnlUeXBlIiwiUE9JTlQiLCJMSU5FX1NUUklORyIsIkxJTkVBUl9SSU5HIiwiUE9MWUdPTiIsIk1VTFRJX1BPSU5UIiwiTVVMVElfTElORV9TVFJJTkciLCJNVUxUSV9QT0xZR09OIiwiR0VPTUVUUllfQ09MTEVDVElPTiIsIkNJUkNMRSIsIkdlb21ldHJ5TGF5b3V0IiwiWFkiLCJYWVoiLCJYWU0iLCJYWVpNIiwidHJhbnNmb3JtMkQiLCJ0cmFuc2Zvcm0iLCJvcHRfZGVzdCIsImRlc3QiLCJERUZBVUxUX1JBRElVUyIsImdldERpc3RhbmNlIiwiYzEiLCJjMiIsIm9wdF9yYWRpdXMiLCJyYWRpdXMiLCJsYXQxIiwibGF0MiIsImRlbHRhTGF0QnkyIiwiZGVsdGFMb25CeTIiLCJhdGFuMiIsIlVuaXRzIiwiREVHUkVFUyIsIkZFRVQiLCJNRVRFUlMiLCJQSVhFTFMiLCJUSUxFX1BJWEVMUyIsIlVTRkVFVCIsIk1FVEVSU19QRVJfVU5JVCIsInByb2pfVW5pdHMiLCJQcm9qZWN0aW9uX1Byb2plY3Rpb24iLCJjb2RlXyIsInVuaXRzXyIsImV4dGVudF8iLCJ3b3JsZEV4dGVudF8iLCJ3b3JsZEV4dGVudCIsImF4aXNPcmllbnRhdGlvbl8iLCJheGlzT3JpZW50YXRpb24iLCJnbG9iYWxfIiwiZ2xvYmFsIiwiY2FuV3JhcFhfIiwiZ2V0UG9pbnRSZXNvbHV0aW9uRnVuY18iLCJnZXRQb2ludFJlc29sdXRpb24iLCJkZWZhdWx0VGlsZUdyaWRfIiwibWV0ZXJzUGVyVW5pdF8iLCJtZXRlcnNQZXJVbml0IiwiY2FuV3JhcFgiLCJnZXRDb2RlIiwiZ2V0RXh0ZW50IiwiZ2V0VW5pdHMiLCJnZXRNZXRlcnNQZXJVbml0IiwiZ2V0V29ybGRFeHRlbnQiLCJnZXRBeGlzT3JpZW50YXRpb24iLCJpc0dsb2JhbCIsInNldEdsb2JhbCIsImdldERlZmF1bHRUaWxlR3JpZCIsInNldERlZmF1bHRUaWxlR3JpZCIsInRpbGVHcmlkIiwic2V0RXh0ZW50Iiwic2V0V29ybGRFeHRlbnQiLCJzZXRHZXRQb2ludFJlc29sdXRpb24iLCJmdW5jIiwiZ2V0UG9pbnRSZXNvbHV0aW9uRnVuYyIsInByb2pfUHJvamVjdGlvbiIsIlJBRElVUyIsIkhBTEZfU0laRSIsIkVYVEVOVCIsIldPUkxEX0VYVEVOVCIsImVwc2czODU3X0VQU0czODU3UHJvamVjdGlvbiIsIlByb2plY3Rpb24iLCJFUFNHMzg1N1Byb2plY3Rpb24iLCJ1bml0cyIsInBvaW50IiwiUFJPSkVDVElPTlMiLCJmcm9tRVBTRzQzMjYiLCJpbnB1dCIsIm9wdF9vdXRwdXQiLCJvcHRfZGltZW5zaW9uIiwiZGltZW5zaW9uIiwiaGFsZlNpemUiLCJ0YW4iLCJlcHNnMzg1N190b0VQU0c0MzI2IiwiYXRhbiIsImVwc2c0MzI2X0VYVEVOVCIsImVwc2c0MzI2X01FVEVSU19QRVJfVU5JVCIsImVwc2c0MzI2X0VQU0c0MzI2UHJvamVjdGlvbiIsIkVQU0c0MzI2UHJvamVjdGlvbiIsIm9wdF9heGlzT3JpZW50YXRpb24iLCJlcHNnNDMyNl9QUk9KRUNUSU9OUyIsInByb2plY3Rpb25zX2NhY2hlIiwicHJvamVjdGlvbnMyIiwiZm9yd2FyZFRyYW5zZm9ybSIsImludmVyc2VUcmFuc2Zvcm0iLCJ0cmFuc2Zvcm1zIiwidHJhbnNmb3Jtc19hZGQiLCJkZXN0aW5hdGlvbiIsInRyYW5zZm9ybUZuIiwic291cmNlQ29kZSIsImRlc3RpbmF0aW9uQ29kZSIsImNsb25lVHJhbnNmb3JtIiwiaWRlbnRpdHlUcmFuc2Zvcm0iLCJhZGRQcm9qZWN0aW9uIiwicHJvamVjdGlvbiIsInByb2plY3Rpb25zX2FkZCIsInByb2pfZ2V0IiwicHJvamVjdGlvbkxpa2UiLCJvcHRfdW5pdHMiLCJwb2ludFJlc29sdXRpb24iLCJ0b0VQU0c0MzI2IiwiZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zIiwidmVydGljZXMiLCJhZGRFcXVpdmFsZW50UHJvamVjdGlvbnMiLCJwcm9qZWN0aW9ucyIsImFkZFByb2plY3Rpb25zIiwiY3JlYXRlUHJvamVjdGlvbiIsImRlZmF1bHRDb2RlIiwiZXF1aXZhbGVudCIsInByb2plY3Rpb24xIiwicHJvamVjdGlvbjIiLCJlcXVhbFVuaXRzIiwic291cmNlUHJvamVjdGlvbiIsImRlc3RpbmF0aW9uUHJvamVjdGlvbiIsInRyYW5zZm9ybUZ1bmMiLCJ0cmFuc2Zvcm1zX2dldCIsInByb2pfZ2V0VHJhbnNmb3JtIiwicHJval90cmFuc2Zvcm0iLCJ0bXBfIiwidHJhbnNmb3JtX3Jlc2V0IiwidHJhbnNmb3JtX3NldCIsIm11bHRpcGx5IiwidHJhbnNmb3JtMSIsInRyYW5zZm9ybTIiLCJhMSIsImIxIiwiZDEiLCJlMSIsImYxIiwiYTIiLCJiMiIsImQyIiwiZTIiLCJmMiIsInNldEZyb21BcnJheSIsIm9sX3RyYW5zZm9ybV9zY2FsZSIsIm9sX3RyYW5zZm9ybV90cmFuc2xhdGUiLCJ0cmFuc2Zvcm1fY29tcG9zZSIsImR4MSIsImR5MSIsInN4Iiwic3kiLCJkeDIiLCJkeTIiLCJ0bXBUcmFuc2Zvcm0iLCJnZXRTdHJpZGVGb3JMYXlvdXQiLCJsYXlvdXQiLCJnZW9tX1NpbXBsZUdlb21ldHJ5IiwiR2VvbWV0cnkiLCJTaW1wbGVHZW9tZXRyeSIsImNvbXB1dGVFeHRlbnQiLCJnZXRDb29yZGluYXRlcyIsImdldEZpcnN0Q29vcmRpbmF0ZSIsImdldEZsYXRDb29yZGluYXRlcyIsImdldExhc3RDb29yZGluYXRlIiwiZ2V0TGF5b3V0IiwiZ2V0U2ltcGxpZmllZEdlb21ldHJ5Iiwic3F1YXJlZFRvbGVyYW5jZSIsInNpbXBsaWZpZWRHZW9tZXRyeVJldmlzaW9uIiwic2ltcGxpZmllZEdlb21ldHJ5Q2FjaGUiLCJzaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlIiwic2ltcGxpZmllZEdlb21ldHJ5IiwiZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwiLCJnZXRTdHJpZGUiLCJzZXRGbGF0Q29vcmRpbmF0ZXMiLCJzZXRDb29yZGluYXRlcyIsIm9wdF9sYXlvdXQiLCJzZXRMYXlvdXQiLCJuZXN0aW5nIiwiZ2V0TGF5b3V0Rm9yU3RyaWRlIiwiYXBwbHlUcmFuc2Zvcm0iLCJyb3RhdGUiLCJhbmNob3IiLCJhbmNob3JYIiwiYW5jaG9yWSIsImRlbHRhWCIsImRlbHRhWSIsInRyYW5zZm9ybV9yb3RhdGUiLCJvcHRfc3kiLCJvcHRfYW5jaG9yIiwidHJhbnNmb3JtX3NjYWxlIiwidHJhbnNsYXRlIiwidHJhbnNmb3JtX3RyYW5zbGF0ZSIsImV4dGVudFJldmlzaW9uXyIsImNsb25lIiwiY2xvc2VzdFBvaW50WFkiLCJjbG9zZXN0UG9pbnQiLCJtaW5TcXVhcmVkRGlzdGFuY2UiLCJjb250YWluc1hZIiwiZ2V0Q2xvc2VzdFBvaW50Iiwib3B0X2Nsb3Nlc3RQb2ludCIsIk5hTiIsImludGVyc2VjdHNDb29yZGluYXRlIiwicmV0dXJuT3JVcGRhdGUiLCJzaW1wbGlmeSIsImdldFR5cGUiLCJpbnRlcnNlY3RzRXh0ZW50Iiwic291cmNlUHJvaiIsImluQ29vcmRpbmF0ZXMiLCJvdXRDb29yZGluYXRlcyIsInBpeGVsRXh0ZW50IiwicHJvamVjdGVkRXh0ZW50IiwiYXJlYV9saW5lYXJSaW5nIiwidHdpY2VBcmVhIiwiYXJlYV9saW5lYXJSaW5ncyIsImVuZHMiLCJhc3NpZ25DbG9zZXN0Iiwib2Zmc2V0MSIsIm9mZnNldDIiLCJtYXhTcXVhcmVkRGVsdGEiLCJzcXVhcmVkRGVsdGEiLCJhcnJheU1heFNxdWFyZWREZWx0YSIsImFzc2lnbkNsb3Nlc3RQb2ludCIsIm1heERlbHRhIiwiaXNSaW5nIiwib3B0X3RtcFBvaW50Iiwic3F1YXJlZERpc3RhbmNlIiwidG1wUG9pbnQiLCJhc3NpZ25DbG9zZXN0QXJyYXlQb2ludCIsImRlZmxhdGVDb29yZGluYXRlcyIsImRlZmxhdGVDb29yZGluYXRlc0FycmF5IiwiY29vcmRpbmF0ZXNzIiwib3B0X2VuZHMiLCJqaiIsImluZmxhdGVDb29yZGluYXRlcyIsIm9wdF9jb29yZGluYXRlcyIsImluZmxhdGVDb29yZGluYXRlc0FycmF5Iiwib3B0X2Nvb3JkaW5hdGVzcyIsImluZmxhdGVNdWx0aUNvb3JkaW5hdGVzQXJyYXkiLCJlbmRzcyIsIm9wdF9jb29yZGluYXRlc3NzIiwiY29vcmRpbmF0ZXNzcyIsImRvdWdsYXNQZXVja2VyIiwic2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyIsInNpbXBsaWZpZWRPZmZzZXQiLCJtYXJrZXJzIiwibGFzdCIsImZpcnN0IiwibWF4U3F1YXJlZERpc3RhbmNlIiwic25hcCIsInJvdW5kIiwicXVhbnRpemUiLCJxdWFudGl6ZUFycmF5Iiwic2ltcGxpZmllZEVuZHMiLCJnZW9tX0xpbmVhclJpbmciLCJMaW5lYXJSaW5nIiwibWF4RGVsdGFfIiwibWF4RGVsdGFSZXZpc2lvbl8iLCJnZXRBcmVhIiwiZ2VvbV9Qb2ludCIsIlBvaW50IiwiZGVmbGF0ZUNvb3JkaW5hdGUiLCJsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQiLCJjYWxsYmFjayIsInZhbCIsImZvckVhY2hDb3JuZXIiLCJsaW5lYXJSaW5nQ29udGFpbnNYWSIsInduIiwibGluZWFyUmluZ3NDb250YWluc1hZIiwiZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkiLCJmbGF0Q2VudGVycyIsImZsYXRDZW50ZXJzT2Zmc2V0IiwiaW50ZXJzZWN0aW9ucyIsInJyIiwicG9pbnRYIiwibWF4U2VnbWVudExlbmd0aCIsInNlZ21lbnRMZW5ndGgiLCJpc05hTiIsImludGVyc2VjdHNMaW5lU3RyaW5nIiwiY29vcmRpbmF0ZXNFeHRlbnQiLCJyZXQiLCJwb2ludDEiLCJwb2ludDIiLCJzdGFydCIsInN0YXJ0UmVsIiwiZW5kUmVsIiwic3RhcnRYIiwic3RhcnRZIiwiZW5kWCIsImVuZFkiLCJzbG9wZSIsImludGVyc2VjdHNTZWdtZW50IiwiaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheSIsImludGVyc2VjdHNMaW5lYXJSaW5nIiwicmV2ZXJzZV9jb29yZGluYXRlcyIsImxpbmVhclJpbmdJc0Nsb2Nrd2lzZSIsImVkZ2UiLCJsaW5lYXJSaW5nSXNPcmllbnRlZCIsIm9wdF9yaWdodCIsImlzQ2xvY2t3aXNlIiwib3JpZW50TGluZWFyUmluZ3MiLCJQb2x5Z29uX1BvbHlnb24iLCJQb2x5Z29uIiwiZW5kc18iLCJmbGF0SW50ZXJpb3JQb2ludFJldmlzaW9uXyIsImZsYXRJbnRlcmlvclBvaW50XyIsIm9yaWVudGVkUmV2aXNpb25fIiwib3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfIiwiYXBwZW5kTGluZWFyUmluZyIsImxpbmVhclJpbmciLCJnZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcyIsImdldEVuZHMiLCJnZXRGbGF0SW50ZXJpb3JQb2ludCIsImZsYXRDZW50ZXIiLCJnZXRJbnRlcmlvclBvaW50IiwiZ2V0TGluZWFyUmluZ0NvdW50IiwiZ2V0TGluZWFyUmluZyIsImdldExpbmVhclJpbmdzIiwibGluZWFyUmluZ3MiLCJnZW9tX1BvbHlnb24iLCJmcm9tRXh0ZW50IiwiREVGQVVMVF9NSU5fWk9PTSIsImFuaW1hdGlvbkNhbGxiYWNrIiwicmV0dXJuVmFsdWUiLCJpc05vb3BBbmltYXRpb24iLCJhbmltYXRpb24iLCJzb3VyY2VDZW50ZXIiLCJ0YXJnZXRDZW50ZXIiLCJzb3VyY2VSZXNvbHV0aW9uIiwidGFyZ2V0UmVzb2x1dGlvbiIsInNvdXJjZVJvdGF0aW9uIiwidGFyZ2V0Um90YXRpb24iLCJvbF9WaWV3IiwiVmlldyIsImhpbnRzXyIsImFuaW1hdGlvbnNfIiwidXBkYXRlQW5pbWF0aW9uS2V5XyIsInVwZGF0ZUFuaW1hdGlvbnNfIiwicHJvamVjdGlvbl8iLCJhcHBseU9wdGlvbnNfIiwicHJvcGVydGllcyIsInJlc29sdXRpb25Db25zdHJhaW50SW5mbyIsInJlc29sdXRpb25Db25zdHJhaW50IiwibWluUmVzb2x1dGlvbiIsIm1pblpvb20iLCJtYXhab29tIiwiem9vbUZhY3RvciIsImRlZmF1bHRNYXhSZXNvbHV0aW9uIiwiZGVmYXVsdE1pblJlc29sdXRpb24iLCJjb25zdHJhaW50IiwiY3JlYXRlUmVzb2x1dGlvbkNvbnN0cmFpbnQiLCJtYXhSZXNvbHV0aW9uXyIsIm1pblJlc29sdXRpb25fIiwiem9vbUZhY3Rvcl8iLCJyZXNvbHV0aW9uc18iLCJtaW5ab29tXyIsImNlbnRlckNvbnN0cmFpbnQiLCJjcmVhdGVDZW50ZXJDb25zdHJhaW50Iiwicm90YXRpb25Db25zdHJhaW50IiwiZW5hYmxlUm90YXRpb24iLCJjb25zdHJhaW5Sb3RhdGlvbiIsImNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludCIsImNvbnN0cmFpbnRzXyIsInpvb20iLCJjb25zdHJhaW5SZXNvbHV0aW9uIiwiZ2V0UmVzb2x1dGlvbiIsIm9wdGlvbnNfIiwiZ2V0VXBkYXRlZE9wdGlvbnNfIiwibmV3T3B0aW9ucyIsImdldFpvb20iLCJnZXRDZW50ZXIiLCJnZXRSb3RhdGlvbiIsImFuaW1hdGUiLCJ2YXJfYXJncyIsImFuaW1hdGlvbkNvdW50IiwiaXNEZWYiLCJzZXRDZW50ZXIiLCJzZXRab29tIiwic2V0Um90YXRpb24iLCJEYXRlIiwibm93Iiwic2VyaWVzIiwiY29tcGxldGUiLCJkdXJhdGlvbiIsImVhc2luZyIsInNldEhpbnQiLCJnZXRBbmltYXRpbmciLCJnZXRJbnRlcmFjdGluZyIsImNhbmNlbEFuaW1hdGlvbnMiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsIm1vcmUiLCJzZXJpZXNDb21wbGV0ZSIsImVsYXBzZWQiLCJmcmFjdGlvbiIsInByb2dyZXNzIiwiY2FsY3VsYXRlQ2VudGVyWm9vbSIsImNhbGN1bGF0ZUNlbnRlclJvdGF0ZSIsImZpbHRlciIsIkJvb2xlYW4iLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjdXJyZW50Q2VudGVyIiwiY3VycmVudFJlc29sdXRpb24iLCJnZXRTaXplRnJvbVZpZXdwb3J0XyIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsIm1ldHJpY3MiLCJnZXRDb21wdXRlZFN0eWxlIiwicGFyc2VJbnQiLCJjb25zdHJhaW5DZW50ZXIiLCJvcHRfZGVsdGEiLCJvcHRfZGlyZWN0aW9uIiwiZ2V0Q29uc3RyYWludHMiLCJnZXRIaW50cyIsIm9wdF9oaW50cyIsImNhbGN1bGF0ZUV4dGVudCIsIm9wdF9zaXplIiwiZ2V0TWF4UmVzb2x1dGlvbiIsImdldE1pblJlc29sdXRpb24iLCJnZXRNYXhab29tIiwiZ2V0Wm9vbUZvclJlc29sdXRpb24iLCJzZXRNYXhab29tIiwiZ2V0TWluWm9vbSIsInNldE1pblpvb20iLCJnZXRQcm9qZWN0aW9uIiwiZ2V0UmVzb2x1dGlvbnMiLCJnZXRSZXNvbHV0aW9uRm9yRXh0ZW50IiwieFJlc29sdXRpb24iLCJ5UmVzb2x1dGlvbiIsImdldFJlc29sdXRpb25Gb3JWYWx1ZUZ1bmN0aW9uIiwib3B0X3Bvd2VyIiwiZ2V0VmFsdWVGb3JSZXNvbHV0aW9uRnVuY3Rpb24iLCJwaXhlbFJhdGlvIiwicGl4ZWxSZXNvbHV0aW9uIiwibmVhcmVzdCIsImdldFJlc29sdXRpb25Gb3Jab29tIiwiZml0IiwiZ2VvbWV0cnlPckV4dGVudCIsImdlb21ldHJ5IiwicGFkZGluZyIsImNvb3JkcyIsIm1pblJvdFgiLCJtaW5Sb3RZIiwibWF4Um90WCIsIm1heFJvdFkiLCJyb3RYIiwicm90WSIsImNvbnN0cmFpbmVkUmVzb2x1dGlvbiIsImNlbnRlclJvdFgiLCJjZW50ZXJSb3RZIiwic2V0UmVzb2x1dGlvbiIsImNlbnRlck9uIiwicG9zaXRpb24iLCJjZW50ZXJYIiwiY2VudGVyWSIsImhpbnQiLCJjcmVhdGVDYW52YXNDb250ZXh0MkQiLCJvcHRfd2lkdGgiLCJvcHRfaGVpZ2h0IiwiY2FudmFzIiwicmVwbGFjZU5vZGUiLCJvbGROb2RlIiwicGFyZW50Tm9kZSIsInJlcGxhY2VDaGlsZCIsInJlbW92ZU5vZGUiLCJyZW1vdmVDaGlsZCIsImxheWVyX1Byb3BlcnR5IiwiT1BBQ0lUWSIsIlZJU0lCTEUiLCJaX0lOREVYIiwiTUFYX1JFU09MVVRJT04iLCJNSU5fUkVTT0xVVElPTiIsIlNPVVJDRSIsIkJhc2UiLCJCYXNlTGF5ZXIiLCJvcGFjaXR5IiwidmlzaWJsZSIsInpJbmRleCIsInN0YXRlXyIsImdldExheWVyU3RhdGUiLCJsYXllciIsIm1hbmFnZWQiLCJnZXRPcGFjaXR5Iiwic291cmNlU3RhdGUiLCJnZXRTb3VyY2VTdGF0ZSIsImdldFZpc2libGUiLCJnZXRaSW5kZXgiLCJnZXRMYXllcnNBcnJheSIsImdldExheWVyU3RhdGVzQXJyYXkiLCJvcHRfc3RhdGVzIiwic2V0TWF4UmVzb2x1dGlvbiIsInNldE1pblJlc29sdXRpb24iLCJzZXRPcGFjaXR5Iiwic2V0VmlzaWJsZSIsInNldFpJbmRleCIsInppbmRleCIsIlN0YXRlIiwiVU5ERUZJTkVEIiwiUkVBRFkiLCJHcm91cF9Qcm9wZXJ0eSIsIkxBWUVSUyIsIkdyb3VwIiwiTGF5ZXJHcm91cCIsImJhc2VPcHRpb25zIiwibGF5ZXJzIiwibGF5ZXJzTGlzdGVuZXJLZXlzXyIsImxpc3RlbmVyS2V5c18iLCJoYW5kbGVMYXllcnNDaGFuZ2VkXyIsInNldExheWVycyIsImhhbmRsZUxheWVyQ2hhbmdlXyIsImdldExheWVycyIsImlkIiwiaGFuZGxlTGF5ZXJzQWRkXyIsImhhbmRsZUxheWVyc1JlbW92ZV8iLCJsYXllcnNBcnJheSIsImNvbGxlY3Rpb25FdmVudCIsInN0YXRlcyIsInBvcyIsIm93bkxheWVyU3RhdGUiLCJsYXllclN0YXRlIiwidG9TaXplIiwib2xfUGx1Z2dhYmxlTWFwIiwiUGx1Z2dhYmxlTWFwIiwib3B0aW9uc0ludGVybmFsIiwia2V5Ym9hcmRFdmVudFRhcmdldCIsImdldEVsZW1lbnRCeUlkIiwiY29udHJvbHMiLCJpbnRlcmFjdGlvbnMiLCJvdmVybGF5cyIsImxheWVyR3JvdXAiLCJjcmVhdGVPcHRpb25zSW50ZXJuYWwiLCJtYXhUaWxlc0xvYWRpbmdfIiwibWF4VGlsZXNMb2FkaW5nIiwibG9hZFRpbGVzV2hpbGVBbmltYXRpbmdfIiwibG9hZFRpbGVzV2hpbGVBbmltYXRpbmciLCJsb2FkVGlsZXNXaGlsZUludGVyYWN0aW5nXyIsImxvYWRUaWxlc1doaWxlSW50ZXJhY3RpbmciLCJwaXhlbFJhdGlvXyIsImFuaW1hdGlvbkRlbGF5S2V5XyIsImFuaW1hdGlvbkRlbGF5XyIsInJlbmRlckZyYW1lXyIsImNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtXyIsInBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtXyIsImZyYW1lSW5kZXhfIiwiZnJhbWVTdGF0ZV8iLCJwcmV2aW91c0V4dGVudF8iLCJ2aWV3UHJvcGVydHlMaXN0ZW5lcktleV8iLCJ2aWV3Q2hhbmdlTGlzdGVuZXJLZXlfIiwibGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXyIsInZpZXdwb3J0XyIsImNsYXNzTmFtZSIsInN0eWxlIiwib3ZlcmZsb3ciLCJtc1RvdWNoQWN0aW9uIiwidG91Y2hBY3Rpb24iLCJvdmVybGF5Q29udGFpbmVyXyIsImFwcGVuZENoaWxkIiwib3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8iLCJvdmVybGF5RXZlbnRzIiwibWFwQnJvd3NlckV2ZW50SGFuZGxlcl8iLCJoYW5kbGVNYXBCcm93c2VyRXZlbnQiLCJrZXlib2FyZEV2ZW50VGFyZ2V0XyIsImtleUhhbmRsZXJLZXlzXyIsImhhbmRsZUJyb3dzZXJFdmVudCIsIm92ZXJsYXlzXyIsIm92ZXJsYXlJZEluZGV4XyIsInJlbmRlcmVyXyIsImNyZWF0ZVJlbmRlcmVyIiwiaGFuZGxlUmVzaXplXyIsImZvY3VzXyIsInBvc3RSZW5kZXJGdW5jdGlvbnNfIiwidGlsZVF1ZXVlXyIsImdldFRpbGVQcmlvcml0eSIsImhhbmRsZVRpbGVDaGFuZ2VfIiwic2tpcHBlZEZlYXR1cmVVaWRzXyIsImhhbmRsZUxheWVyR3JvdXBDaGFuZ2VkXyIsImhhbmRsZVZpZXdDaGFuZ2VkXyIsImhhbmRsZVNpemVDaGFuZ2VkXyIsImhhbmRsZVRhcmdldENoYW5nZWRfIiwiY29udHJvbCIsInNldE1hcCIsImludGVyYWN0aW9uIiwiYWRkT3ZlcmxheUludGVybmFsXyIsImdldElkIiwiYWRkQ29udHJvbCIsImdldENvbnRyb2xzIiwiYWRkSW50ZXJhY3Rpb24iLCJnZXRJbnRlcmFjdGlvbnMiLCJhZGRMYXllciIsImdldExheWVyR3JvdXAiLCJhZGRPdmVybGF5Iiwib3ZlcmxheSIsImdldE92ZXJsYXlzIiwic2V0VGFyZ2V0IiwiZm9yRWFjaEZlYXR1cmVBdFBpeGVsIiwiaGl0VG9sZXJhbmNlIiwibGF5ZXJGaWx0ZXIiLCJmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSIsImdldEZlYXR1cmVzQXRQaXhlbCIsImZlYXR1cmVzIiwiZmVhdHVyZSIsImZvckVhY2hMYXllckF0UGl4ZWwiLCJoYXNGZWF0dXJlQXRQaXhlbCIsImhhc0ZlYXR1cmVBdENvb3JkaW5hdGUiLCJnZXRFdmVudENvb3JkaW5hdGUiLCJ2aWV3cG9ydFBvc2l0aW9uIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZXZlbnRQb3NpdGlvbiIsInRvcCIsImdldFRhcmdldCIsImdldFRhcmdldEVsZW1lbnQiLCJwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSIsImdldE92ZXJsYXlCeUlkIiwiZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZSIsImNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtIiwiZ2V0UmVuZGVyZXIiLCJnZXRTaXplIiwiZ2V0VmlldyIsImdldE92ZXJsYXlDb250YWluZXIiLCJnZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50IiwidGlsZVNvdXJjZUtleSIsInRpbGVDZW50ZXIiLCJ0aWxlUmVzb2x1dGlvbiIsIndhbnRlZFRpbGVzIiwiZm9jdXMiLCJtYXBCcm93c2VyRXZlbnQiLCJpbnRlcmFjdGlvbnNBcnJheSIsImdldEFjdGl2ZSIsImhhbmRsZUV2ZW50IiwiaGFuZGxlUG9zdFJlbmRlciIsInRpbGVRdWV1ZSIsImhpbnRzIiwidmlld0hpbnRzIiwiZ2V0TG9hZGluZyIsImdldFNvdXJjZSIsImxvYWRpbmciLCJkaXNwYXRjaFJlbmRlckV2ZW50IiwicG9zdFJlbmRlckZ1bmN0aW9ucyIsInJlbmRlciIsInRhcmdldEVsZW1lbnQiLCJ1cGRhdGVTaXplIiwicmVtb3ZlTGF5ZXJSZW5kZXJlcnMiLCJoYW5kbGVWaWV3UHJvcGVydHlDaGFuZ2VkXyIsInNldEF0dHJpYnV0ZSIsImlzUmVuZGVyZWQiLCJyZW5kZXJTeW5jIiwicmVtb3ZlQ29udHJvbCIsInJlbW92ZUludGVyYWN0aW9uIiwicmVtb3ZlTGF5ZXIiLCJyZW1vdmVPdmVybGF5IiwidGltZSIsInZpZXdTdGF0ZSIsInByZXZpb3VzRnJhbWVTdGF0ZSIsImhhc0FyZWEiLCJsYXllclN0YXRlc0FycmF5IiwibGF5ZXJTdGF0ZXMiLCJza2lwcGVkRmVhdHVyZVVpZHMiLCJ1c2VkVGlsZXMiLCJyZW5kZXJGcmFtZSIsInNldExheWVyR3JvdXAiLCJzZXRTaXplIiwic2V0VmlldyIsInNraXBGZWF0dXJlIiwiY29tcHV0ZWRTdHlsZSIsIm9mZnNldFdpZHRoIiwicGFyc2VGbG9hdCIsIm9mZnNldEhlaWdodCIsInVuc2tpcEZlYXR1cmUiLCJjYWNoZSIsImNvbnRyb2xfQ29udHJvbCIsIkNvbnRyb2wiLCJ0YXJnZXRfIiwibGlzdGVuZXJLZXlzIiwiZ2V0TWFwIiwiQ0xBU1NfSElEREVOIiwiQ0xBU1NfVU5TRUxFQ1RBQkxFIiwiQ0xBU1NfQ09OVFJPTCIsIkNMQVNTX0NPTExBUFNFRCIsImdldEZvbnRGYW1pbGllcyIsImZvbnQiLCJmYW1pbHkiLCJmb250RmFtaWx5IiwidmlzaWJsZUF0UmVzb2x1dGlvbiIsImxheWVyX0xheWVyIiwiTGF5ZXIiLCJtYXBQcmVjb21wb3NlS2V5XyIsIm1hcFJlbmRlcktleV8iLCJzb3VyY2VDaGFuZ2VLZXlfIiwiaGFuZGxlU291cmNlUHJvcGVydHlDaGFuZ2VfIiwic2V0U291cmNlIiwiaGFuZGxlU291cmNlQ2hhbmdlXyIsInJlbmRlckV2ZW50IiwiQXR0cmlidXRpb25fcmVuZGVyIiwibWFwRXZlbnQiLCJ1cGRhdGVFbGVtZW50XyIsImNvbnRyb2xfQXR0cmlidXRpb24iLCJBdHRyaWJ1dGlvbiIsInVsRWxlbWVudF8iLCJjb2xsYXBzZWRfIiwiY29sbGFwc2VkIiwib3ZlcnJpZGVDb2xsYXBzaWJsZV8iLCJjb2xsYXBzaWJsZSIsImNvbGxhcHNpYmxlXyIsInRpcExhYmVsIiwiY29sbGFwc2VMYWJlbCIsImNvbGxhcHNlTGFiZWxfIiwidGV4dENvbnRlbnQiLCJsYWJlbCIsImxhYmVsXyIsImFjdGl2ZUxhYmVsIiwidGl0bGUiLCJoYW5kbGVDbGlja18iLCJjc3NDbGFzc2VzIiwicmVuZGVyZWRBdHRyaWJ1dGlvbnNfIiwicmVuZGVyZWRWaXNpYmxlXyIsImNvbGxlY3RTb3VyY2VBdHRyaWJ1dGlvbnNfIiwibG9va3VwIiwidmlzaWJsZUF0dHJpYnV0aW9ucyIsImF0dHJpYnV0aW9uR2V0dGVyIiwiZ2V0QXR0cmlidXRpb25zIiwiYXR0cmlidXRpb25zIiwiZ2V0QXR0cmlidXRpb25zQ29sbGFwc2libGUiLCJzZXRDb2xsYXBzaWJsZSIsImRpc3BsYXkiLCJsYXN0Q2hpbGQiLCJyZW1vdmVDaGlsZHJlbiIsImlubmVySFRNTCIsImhhbmRsZVRvZ2dsZV8iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJnZXRDb2xsYXBzaWJsZSIsInNldENvbGxhcHNlZCIsImdldENvbGxhcHNlZCIsIlJvdGF0ZV9yZW5kZXIiLCJyb3RhdGlvbl8iLCJhdXRvSGlkZV8iLCJtc1RyYW5zZm9ybSIsIndlYmtpdFRyYW5zZm9ybSIsImNvbnRyb2xfUm90YXRlIiwiUm90YXRlIiwiY2FsbFJlc2V0Tm9ydGhfIiwicmVzZXROb3J0aCIsImR1cmF0aW9uXyIsImF1dG9IaWRlIiwicmVzZXROb3J0aF8iLCJjb250cm9sX1pvb20iLCJab29tIiwiem9vbUluTGFiZWwiLCJ6b29tT3V0TGFiZWwiLCJ6b29tSW5UaXBMYWJlbCIsInpvb21PdXRUaXBMYWJlbCIsImluRWxlbWVudCIsImNyZWF0ZVRleHROb2RlIiwib3V0RWxlbWVudCIsInpvb21CeURlbHRhXyIsIm5ld1Jlc29sdXRpb24iLCJLaW5ldGljIiwiZGVjYXkiLCJtaW5WZWxvY2l0eSIsImRlbGF5IiwiZGVjYXlfIiwibWluVmVsb2NpdHlfIiwiZGVsYXlfIiwicG9pbnRzXyIsImFuZ2xlXyIsImluaXRpYWxWZWxvY2l0eV8iLCJ1cGRhdGUiLCJsYXN0SW5kZXgiLCJmaXJzdEluZGV4IiwiZ2V0QW5nbGUiLCJvbF9LaW5ldGljIiwiaW50ZXJhY3Rpb25fUHJvcGVydHkiLCJJbnRlcmFjdGlvbl9yb3RhdGUiLCJvcHRfZHVyYXRpb24iLCJyb3RhdGVXaXRob3V0Q29uc3RyYWludHMiLCJjdXJyZW50Um90YXRpb24iLCJ6b29tQnlEZWx0YSIsInpvb21XaXRob3V0Q29uc3RyYWludHMiLCJpbnRlcmFjdGlvbl9JbnRlcmFjdGlvbiIsIkludGVyYWN0aW9uIiwic2V0QWN0aXZlIiwiYWN0aXZlIiwiRG91YmxlQ2xpY2tab29tX2hhbmRsZUV2ZW50Iiwic3RvcEV2ZW50IiwiZGVsdGFfIiwiaW50ZXJhY3Rpb25fRG91YmxlQ2xpY2tab29tIiwiRG91YmxlQ2xpY2tab29tIiwiYWx0U2hpZnRLZXlzT25seSIsImNvbmRpdGlvbl9mb2N1cyIsImFjdGl2ZUVsZW1lbnQiLCJhbHdheXMiLCJtb3VzZUFjdGlvbkJ1dHRvbiIsIm5vTW9kaWZpZXJLZXlzIiwic2hpZnRLZXlPbmx5IiwidGFyZ2V0Tm90RWRpdGFibGUiLCJ0YWdOYW1lIiwibW91c2VPbmx5IiwiUG9pbnRlcl9jZW50cm9pZCIsInBvaW50ZXJFdmVudHMiLCJQb2ludGVyIiwiUG9pbnRlckludGVyYWN0aW9uIiwiaGFuZGxlRG93bkV2ZW50IiwiaGFuZGxlRHJhZ0V2ZW50IiwiaGFuZGxlTW92ZUV2ZW50IiwiaGFuZGxlVXBFdmVudCIsInN0b3BEb3duIiwiaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSIsInRyYWNrZWRQb2ludGVyc18iLCJ0YXJnZXRQb2ludGVycyIsInVwZGF0ZVRyYWNrZWRQb2ludGVyc18iLCJoYW5kbGVkVXAiLCJoYW5kbGVkIiwiaXNQb2ludGVyRHJhZ2dpbmdFdmVudCIsImdldFZhbHVlcyIsImludGVyYWN0aW9uX0RyYWdQYW4iLCJEcmFnUGFuIiwia2luZXRpY18iLCJraW5ldGljIiwibGFzdENlbnRyb2lkIiwibGFzdFBvaW50ZXJzQ291bnRfIiwicGFubmluZ18iLCJjb25kaXRpb25fIiwiY29uZGl0aW9uIiwibm9LaW5ldGljXyIsImNlbnRyb2lkIiwiZGlzdGFuY2UiLCJjZW50ZXJweCIsImludGVyYWN0aW9uX0RyYWdSb3RhdGUiLCJEcmFnUm90YXRlIiwibGFzdEFuZ2xlXyIsIkJveCIsIlJlbmRlckJveCIsImdlb21ldHJ5XyIsInN0YXJ0UGl4ZWxfIiwiZW5kUGl4ZWxfIiwicmVuZGVyXyIsInN0YXJ0UGl4ZWwiLCJlbmRQaXhlbCIsInNldFBpeGVscyIsImNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkiLCJnZXRHZW9tZXRyeSIsIkRyYWdCb3hFdmVudFR5cGUiLCJEcmFnQm94RXZlbnQiLCJvbkJveEVuZCIsIm91dF8iLCJtYXBFeHRlbnQiLCJib3hQaXhlbEV4dGVudCIsInNjYWxlRnJvbUNlbnRlciIsImludGVyYWN0aW9uX0RyYWdab29tIiwiRHJhZ0JveCIsIkRyYWdab29tIiwiYm94XyIsIm1pbkFyZWFfIiwib25Cb3hFbmRfIiwiYm94RW5kQ29uZGl0aW9uXyIsImJveEVuZENvbmRpdGlvbiIsImRlZmF1bHRCb3hFbmRDb25kaXRpb24iLCJLZXlDb2RlIiwiVVAiLCJET1dOIiwiS2V5Ym9hcmRQYW5faGFuZGxlRXZlbnQiLCJrZXlDb2RlIiwibWFwVW5pdHNEZWx0YSIsInBpeGVsRGVsdGFfIiwicGFuIiwiaW50ZXJhY3Rpb25fS2V5Ym9hcmRQYW4iLCJLZXlib2FyZFBhbiIsImRlZmF1bHRDb25kaXRpb25fIiwicGl4ZWxEZWx0YSIsIktleWJvYXJkWm9vbV9oYW5kbGVFdmVudCIsImNoYXJDb2RlIiwiY2hhckNvZGVBdCIsImludGVyYWN0aW9uX0tleWJvYXJkWm9vbSIsIktleWJvYXJkWm9vbSIsIk1vZGUiLCJpbnRlcmFjdGlvbl9Nb3VzZVdoZWVsWm9vbSIsIk1vdXNlV2hlZWxab29tIiwidGltZW91dF8iLCJ0aW1lb3V0IiwidXNlQW5jaG9yXyIsInVzZUFuY2hvciIsImNvbnN0cmFpblJlc29sdXRpb25fIiwibGFzdEFuY2hvcl8iLCJzdGFydFRpbWVfIiwidGltZW91dElkXyIsIm1vZGVfIiwidHJhY2twYWRFdmVudEdhcF8iLCJ0cmFja3BhZFRpbWVvdXRJZF8iLCJ0cmFja3BhZERlbHRhUGVyWm9vbV8iLCJ0cmFja3BhZFpvb21CdWZmZXJfIiwiZGVjcmVtZW50SW50ZXJhY3RpbmdIaW50XyIsIndoZWVsRXZlbnQiLCJkZWx0YU1vZGUiLCJXaGVlbEV2ZW50IiwiRE9NX0RFTFRBX1BJWEVMIiwiRE9NX0RFTFRBX0xJTkUiLCJ3aGVlbERlbHRhWSIsInJlYm91bmQiLCJ0aW1lTGVmdCIsImhhbmRsZVdoZWVsWm9vbV8iLCJzZXRNb3VzZUFuY2hvciIsImludGVyYWN0aW9uX1BpbmNoUm90YXRlIiwiUGluY2hSb3RhdGUiLCJwb2ludGVyT3B0aW9ucyIsImFuY2hvcl8iLCJyb3RhdGluZ18iLCJyb3RhdGlvbkRlbHRhXyIsInRocmVzaG9sZF8iLCJ0aHJlc2hvbGQiLCJyb3RhdGlvbkRlbHRhIiwidG91Y2gwIiwidG91Y2gxIiwiaW50ZXJhY3Rpb25fUGluY2hab29tIiwiUGluY2hab29tIiwibGFzdERpc3RhbmNlXyIsImxhc3RTY2FsZURlbHRhXyIsInNjYWxlRGVsdGEiLCJFUlJPUl9USFJFU0hPTEQiLCJJbWFnZVN0YXRlIiwib2xfSW1hZ2VDYW52YXMiLCJJbWFnZUJhc2UiLCJJbWFnZUNhbnZhcyIsIm9wdF9sb2FkZXIiLCJsb2FkZXJfIiwiY2FudmFzXyIsImVycm9yXyIsImdldEVycm9yIiwiaGFuZGxlTG9hZF8iLCJlcnIiLCJnZXRJbWFnZSIsImdldFBpeGVsUmF0aW8iLCJMYXllclR5cGUiLCJJTUFHRSIsIlRJTEUiLCJWRUNUT1JfVElMRSIsIlZFQ1RPUiIsIlZlY3RvclJlbmRlclR5cGUiLCJyZW5kZXJfRXZlbnQiLCJSZW5kZXJFdmVudCIsIm9wdF92ZWN0b3JDb250ZXh0Iiwib3B0X2NvbnRleHQiLCJvcHRfZ2xDb250ZXh0IiwidmVjdG9yQ29udGV4dCIsImNvbnRleHQiLCJnbENvbnRleHQiLCJzdHJ1Y3RzX0xSVUNhY2hlIiwiTFJVQ2FjaGUiLCJvcHRfaGlnaFdhdGVyTWFyayIsImhpZ2hXYXRlck1hcmsiLCJjb3VudF8iLCJlbnRyaWVzXyIsIm9sZGVzdF8iLCJuZXdlc3RfIiwiY2FuRXhwaXJlQ2FjaGUiLCJjb250YWluc0tleSIsImVudHJ5IiwidmFsdWVfIiwia2V5XyIsIm5ld2VyIiwib2xkZXIiLCJwZWVrTGFzdCIsInBlZWtMYXN0S2V5IiwicGVla0ZpcnN0S2V5IiwicmVwbGFjZSIsInBydW5lIiwiZGVmYXVsdEZpbGxTdHlsZSIsImRlZmF1bHRMaW5lRGFzaCIsImRlZmF1bHRTdHJva2VTdHlsZSIsImRlZmF1bHRQYWRkaW5nIiwibGFiZWxDYWNoZSIsImNoZWNrZWRGb250cyIsIm1lYXN1cmVDb250ZXh0IiwidGV4dEhlaWdodHMiLCJjaGVja0ZvbnQiLCJpbnRlcnZhbCIsInJlZmVyZW5jZVdpZHRoIiwicmV0cmllcyIsImNoZWNrZWQiLCJyZWZlcmVuY2VGb250cyIsInRleHQiLCJpc0F2YWlsYWJsZSIsImdldE1lYXN1cmVDb250ZXh0Iiwid2VpZ2h0IiwiZm9udFdlaWdodCIsImF2YWlsYWJsZSIsInJlZmVyZW5jZUZvbnQiLCJtZWFzdXJlVGV4dCIsImNoZWNrIiwiZG9uZSIsImNsZWFySW50ZXJ2YWwiLCJmb250U3BlYyIsImZvbnRGYW1pbGllcyIsInNldEludGVydmFsIiwic3BhbiIsImhlaWdodHMiLCJtZWFzdXJlVGV4dEhlaWdodCIsImJvZHkiLCJtZWFzdXJlVGV4dFdpZHRoIiwicm90YXRlQXRPZmZzZXQiLCJvZmZzZXRYIiwib2Zmc2V0WSIsInJlc2V0VHJhbnNmb3JtIiwiZHJhd0ltYWdlIiwiaW1hZ2UiLCJvcmlnaW5YIiwib3JpZ2luWSIsInciLCJoIiwiYWxwaGEiLCJnbG9iYWxBbHBoYSIsInNldFRyYW5zZm9ybSIsIkhFWF9DT0xPUl9SRV8iLCJOQU1FRF9DT0xPUl9SRV8iLCJhc1N0cmluZyIsImNvbG9yIiwiY29sb3JfdG9TdHJpbmciLCJjYWNoZVNpemUiLCJub3JtYWxpemUiLCJnIiwiYXNDb2xvckxpa2UiLCJWZWN0b3JDb250ZXh0X1ZlY3RvckNvbnRleHQiLCJkcmF3Q3VzdG9tIiwicmVuZGVyZXIiLCJkcmF3R2VvbWV0cnkiLCJzZXRTdHlsZSIsImRyYXdDaXJjbGUiLCJjaXJjbGVHZW9tZXRyeSIsImRyYXdGZWF0dXJlIiwiZHJhd0dlb21ldHJ5Q29sbGVjdGlvbiIsImdlb21ldHJ5Q29sbGVjdGlvbkdlb21ldHJ5IiwiZHJhd0xpbmVTdHJpbmciLCJsaW5lU3RyaW5nR2VvbWV0cnkiLCJkcmF3TXVsdGlMaW5lU3RyaW5nIiwibXVsdGlMaW5lU3RyaW5nR2VvbWV0cnkiLCJkcmF3TXVsdGlQb2ludCIsIm11bHRpUG9pbnRHZW9tZXRyeSIsImRyYXdNdWx0aVBvbHlnb24iLCJtdWx0aVBvbHlnb25HZW9tZXRyeSIsImRyYXdQb2ludCIsInBvaW50R2VvbWV0cnkiLCJkcmF3UG9seWdvbiIsInBvbHlnb25HZW9tZXRyeSIsImRyYXdUZXh0Iiwic2V0RmlsbFN0cm9rZVN0eWxlIiwiZmlsbFN0eWxlIiwic3Ryb2tlU3R5bGUiLCJzZXRJbWFnZVN0eWxlIiwiaW1hZ2VTdHlsZSIsIm9wdF9kZWNsdXR0ZXJHcm91cCIsInNldFRleHRTdHlsZSIsInRleHRTdHlsZSIsInJlbmRlcl9WZWN0b3JDb250ZXh0IiwiSW1tZWRpYXRlIiwiVmVjdG9yQ29udGV4dCIsIkNhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyIiwidmlld1JvdGF0aW9uIiwiY29udGV4dF8iLCJ0cmFuc2Zvcm1fIiwidmlld1JvdGF0aW9uXyIsImNvbnRleHRGaWxsU3RhdGVfIiwiY29udGV4dFN0cm9rZVN0YXRlXyIsImNvbnRleHRUZXh0U3RhdGVfIiwiZmlsbFN0YXRlXyIsInN0cm9rZVN0YXRlXyIsImltYWdlXyIsImltYWdlQW5jaG9yWF8iLCJpbWFnZUFuY2hvcllfIiwiaW1hZ2VIZWlnaHRfIiwiaW1hZ2VPcGFjaXR5XyIsImltYWdlT3JpZ2luWF8iLCJpbWFnZU9yaWdpbllfIiwiaW1hZ2VSb3RhdGVXaXRoVmlld18iLCJpbWFnZVJvdGF0aW9uXyIsImltYWdlU2NhbGVfIiwiaW1hZ2VXaWR0aF8iLCJ0ZXh0XyIsInRleHRPZmZzZXRYXyIsInRleHRPZmZzZXRZXyIsInRleHRSb3RhdGVXaXRoVmlld18iLCJ0ZXh0Um90YXRpb25fIiwidGV4dFNjYWxlXyIsInRleHRGaWxsU3RhdGVfIiwidGV4dFN0cm9rZVN0YXRlXyIsInRleHRTdGF0ZV8iLCJwaXhlbENvb3JkaW5hdGVzXyIsInRtcExvY2FsVHJhbnNmb3JtXyIsImRyYXdJbWFnZXNfIiwicGl4ZWxDb29yZGluYXRlcyIsImxvY2FsVHJhbnNmb3JtIiwiZHJhd1RleHRfIiwic2V0Q29udGV4dEZpbGxTdGF0ZV8iLCJzZXRDb250ZXh0U3Ryb2tlU3RhdGVfIiwic2V0Q29udGV4dFRleHRTdGF0ZV8iLCJzdHJva2VUZXh0IiwiZmlsbFRleHQiLCJtb3ZlVG9MaW5lVG9fIiwiY2xvc2UiLCJtb3ZlVG8iLCJsaW5lVG8iLCJjbG9zZVBhdGgiLCJkcmF3UmluZ3NfIiwic2ltcGxlR2VvbWV0cnkiLCJ0cmFuc2Zvcm1HZW9tMkQiLCJiZWdpblBhdGgiLCJhcmMiLCJmaWxsIiwic3Ryb2tlIiwiZ2V0RmlsbCIsImdldFN0cm9rZSIsImdldFRleHQiLCJnZXRHZW9tZXRyeUZ1bmN0aW9uIiwiZ2VvbWV0cmllcyIsImdldEdlb21ldHJpZXNBcnJheSIsImZsYXRNaWRwb2ludCIsImdldEZsYXRNaWRwb2ludCIsImdlb21ldHJ5RXh0ZW50IiwiZmxhdE1pZHBvaW50cyIsImdldEZsYXRNaWRwb2ludHMiLCJmbGF0SW50ZXJpb3JQb2ludCIsImdldEVuZHNzIiwiZmxhdEludGVyaW9yUG9pbnRzIiwiZ2V0RmxhdEludGVyaW9yUG9pbnRzIiwiZmlsbFN0YXRlIiwiY29udGV4dEZpbGxTdGF0ZSIsInN0cm9rZVN0YXRlIiwiY29udGV4dFN0cm9rZVN0YXRlIiwibGluZUNhcCIsImxpbmVEYXNoIiwibGluZURhc2hPZmZzZXQiLCJsaW5lSm9pbiIsImxpbmVXaWR0aCIsIm1pdGVyTGltaXQiLCJ0ZXh0U3RhdGUiLCJjb250ZXh0VGV4dFN0YXRlIiwidGV4dEFsaWduIiwidGV4dEJhc2VsaW5lIiwiZmlsbFN0eWxlQ29sb3IiLCJnZXRDb2xvciIsInN0cm9rZVN0eWxlQ29sb3IiLCJzdHJva2VTdHlsZUxpbmVDYXAiLCJnZXRMaW5lQ2FwIiwic3Ryb2tlU3R5bGVMaW5lRGFzaCIsImdldExpbmVEYXNoIiwic3Ryb2tlU3R5bGVMaW5lRGFzaE9mZnNldCIsImdldExpbmVEYXNoT2Zmc2V0Iiwic3Ryb2tlU3R5bGVMaW5lSm9pbiIsImdldExpbmVKb2luIiwic3Ryb2tlU3R5bGVXaWR0aCIsInN0cm9rZVN0eWxlTWl0ZXJMaW1pdCIsImdldE1pdGVyTGltaXQiLCJpbWFnZUFuY2hvciIsImdldEFuY2hvciIsImltYWdlSW1hZ2UiLCJpbWFnZU9yaWdpbiIsImdldE9yaWdpbiIsImltYWdlU2l6ZSIsImdldFJvdGF0ZVdpdGhWaWV3IiwiZ2V0U2NhbGUiLCJ0ZXh0RmlsbFN0eWxlIiwidGV4dEZpbGxTdHlsZUNvbG9yIiwidGV4dFN0cm9rZVN0eWxlIiwidGV4dFN0cm9rZVN0eWxlQ29sb3IiLCJ0ZXh0U3Ryb2tlU3R5bGVMaW5lQ2FwIiwidGV4dFN0cm9rZVN0eWxlTGluZURhc2giLCJ0ZXh0U3Ryb2tlU3R5bGVMaW5lRGFzaE9mZnNldCIsInRleHRTdHJva2VTdHlsZUxpbmVKb2luIiwidGV4dFN0cm9rZVN0eWxlV2lkdGgiLCJ0ZXh0U3Ryb2tlU3R5bGVNaXRlckxpbWl0IiwidGV4dEZvbnQiLCJnZXRGb250IiwidGV4dE9mZnNldFgiLCJnZXRPZmZzZXRYIiwidGV4dE9mZnNldFkiLCJnZXRPZmZzZXRZIiwidGV4dFJvdGF0ZVdpdGhWaWV3IiwidGV4dFJvdGF0aW9uIiwidGV4dFNjYWxlIiwidGV4dFRleHQiLCJ0ZXh0VGV4dEFsaWduIiwiZ2V0VGV4dEFsaWduIiwidGV4dFRleHRCYXNlbGluZSIsImdldFRleHRCYXNlbGluZSIsIkljb25JbWFnZUNhY2hlIiwiY2FjaGVfIiwiY2FjaGVTaXplXyIsIm1heENhY2hlU2l6ZV8iLCJzcmMiLCJjcm9zc09yaWdpbiIsImV4cGlyZSIsImljb25JbWFnZSIsIm1heENhY2hlU2l6ZSIsInNoYXJlZCIsImV4cGlyZUljb25DYWNoZSIsInNvcnRCeVpJbmRleCIsInN0YXRlMSIsInN0YXRlMiIsImxheWVyUmVuZGVyZXJDb25zdHJ1Y3RvcnMiLCJjYW52YXNfTWFwIiwiTWFwUmVuZGVyZXIiLCJDYW52YXNNYXBSZW5kZXJlciIsImluc2VydEJlZm9yZSIsImNoaWxkTm9kZXMiLCJnZXRUcmFuc2Zvcm0iLCJjb21wb3NlRXZlbnQiLCJjbGVhclJlY3QiLCJjYWxjdWxhdGVNYXRyaWNlczJEIiwiY29tcGFyZUZuYyIsInN0YWJsZVNvcnQiLCJzYXZlIiwidmlld1Jlc29sdXRpb24iLCJsYXllclJlbmRlcmVyIiwiZ2V0TGF5ZXJSZW5kZXJlciIsInByZXBhcmVGcmFtZSIsImNvbXBvc2VGcmFtZSIsInJlc3RvcmUiLCJzY2hlZHVsZVJlbW92ZVVudXNlZExheWVyUmVuZGVyZXJzIiwic2NoZWR1bGVFeHBpcmVJY29uQ2FjaGUiLCJ0aGlzQXJnIiwidGhpc0FyZzIiLCJudW1MYXllcnMiLCJmb3JFYWNoTGF5ZXJBdENvb3JkaW5hdGUiLCJyZWdpc3RlckxheWVyUmVuZGVyZXJzIiwiY29uc3RydWN0b3JzIiwiY3RvciIsImxheWVyUmVuZGVyZXJzXyIsImxheWVyUmVuZGVyZXJMaXN0ZW5lcnNfIiwibGF5ZXJSZW5kZXJlckNvbnN0cnVjdG9yc18iLCJtYXQiLCJkZXQiLCJpbnZlcnQiLCJyZW1vdmVMYXllclJlbmRlcmVyQnlLZXlfIiwidHJhbnNsYXRlZENvb3JkaW5hdGUiLCJwcm9qZWN0aW9uRXh0ZW50Iiwid29ybGRXaWR0aCIsImdldFdyYXBYIiwibGF5ZXJLZXkiLCJjYW5kaWRhdGUiLCJoYW5kbGVMYXllclJlbmRlcmVyQ2hhbmdlXyIsImdldExheWVyUmVuZGVyZXJCeUtleSIsImdldExheWVyUmVuZGVyZXJzIiwicmVtb3ZlVW51c2VkTGF5ZXJSZW5kZXJlcnNfIiwiY2FudmFzX0xheWVyIiwiTGF5ZXJSZW5kZXJlciIsIkNhbnZhc0xheWVyUmVuZGVyZXIiLCJyZW5kZXJlZFJlc29sdXRpb24iLCJjbGlwIiwidG9wTGVmdCIsInRvcFJpZ2h0IiwiYm90dG9tUmlnaHQiLCJib3R0b21MZWZ0IiwiZGlzcGF0Y2hDb21wb3NlRXZlbnRfIiwib3B0X3RyYW5zZm9ybSIsImdldExheWVyIiwicG9zdENvbXBvc2UiLCJwcmVDb21wb3NlIiwibGF5ZXJfIiwiY3JlYXRlTG9hZGVkVGlsZUZpbmRlciIsInRpbGVzIiwidGlsZVJhbmdlIiwiZm9yRWFjaExvYWRlZFRpbGUiLCJ0aWxlQ29vcmQiLCJoYW5kbGVJbWFnZUNoYW5nZV8iLCJyZW5kZXJJZlJlYWR5QW5kVmlzaWJsZSIsImxvYWRJbWFnZSIsImltYWdlU3RhdGUiLCJzY2hlZHVsZUV4cGlyZUNhY2hlIiwidGlsZVNvdXJjZSIsInBvc3RSZW5kZXJGdW5jdGlvbiIsImV4cGlyZUNhY2hlIiwidXBkYXRlVXNlZFRpbGVzIiwiektleSIsIm1hbmFnZVRpbGVQeXJhbWlkIiwiY3VycmVudFoiLCJwcmVsb2FkIiwib3B0X3RpbGVDYWxsYmFjayIsImdldFRpbGVSYW5nZUZvckV4dGVudEFuZFoiLCJnZXRUaWxlIiwiZ2V0VGlsZUNvb3JkQ2VudGVyIiwidXNlVGlsZSIsIkludGVybWVkaWF0ZUNhbnZhcyIsIkludGVybWVkaWF0ZUNhbnZhc1JlbmRlcmVyIiwiY29vcmRpbmF0ZVRvQ2FudmFzUGl4ZWxUcmFuc2Zvcm0iLCJoaXRDYW52YXNDb250ZXh0XyIsImNsaXBwZWQiLCJpbWFnZVRyYW5zZm9ybSIsImdldEltYWdlVHJhbnNmb3JtIiwiZHciLCJkaCIsImltYWdlRGF0YSIsImdldEltYWdlRGF0YSIsIkltYWdlTGF5ZXJfQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyIiwiQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyIiwiaW1hZ2VMYXllciIsImltYWdlVHJhbnNmb3JtXyIsInNraXBwZWRGZWF0dXJlc18iLCJ2ZWN0b3JSZW5kZXJlcl8iLCJ2aWV3Q2VudGVyIiwiaW1hZ2VTb3VyY2UiLCJ2ZWN0b3JSZW5kZXJlciIsInJlbmRlcmVkRXh0ZW50Iiwic2tpcHBlZEZlYXR1cmVzIiwiaW1hZ2VGcmFtZVN0YXRlIiwibmV3U2tpcHBlZEZlYXR1cmVzIiwicmVwbGF5R3JvdXBDaGFuZ2VkIiwiY29tcG9zZSIsImltYWdlRXh0ZW50IiwiaW1hZ2VSZXNvbHV0aW9uIiwiaW1hZ2VQaXhlbFJhdGlvIiwiZ2V0UmVuZGVyTW9kZSIsIm1hcFJlbmRlcmVyIiwiSW1hZ2VMYXllciIsIlRpbGVSYW5nZSIsIlRpbGVSYW5nZV9jcmVhdGVPclVwZGF0ZSIsImNvbnRhaW5zVGlsZVJhbmdlIiwib2xfVGlsZVJhbmdlIiwiVGlsZUxheWVyX0NhbnZhc1RpbGVMYXllclJlbmRlcmVyIiwiQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIiLCJ0aWxlTGF5ZXIiLCJvcHRfbm9Db250ZXh0Iiwib3ZlcnNhbXBsaW5nXyIsInJlbmRlcmVkRXh0ZW50XyIsInJlbmRlcmVkUmV2aXNpb24iLCJyZW5kZXJlZFRpbGVzIiwibmV3VGlsZXNfIiwidG1wRXh0ZW50IiwidG1wVGlsZVJhbmdlXyIsInpEaXJlY3Rpb24iLCJpc0RyYXdhYmxlVGlsZV8iLCJ0aWxlU3RhdGUiLCJ1c2VJbnRlcmltVGlsZXNPbkVycm9yIiwiZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvciIsImdldFByZWxvYWQiLCJzZXRTdGF0ZSIsImdldEludGVyaW1UaWxlIiwic291cmNlUmV2aXNpb24iLCJnZXRUaWxlR3JpZEZvclByb2plY3Rpb24iLCJnZXRaRm9yUmVzb2x1dGlvbiIsIm92ZXJzYW1wbGluZyIsImdldFRpbGVSYW5nZUV4dGVudCIsInRpbGVQaXhlbFJhdGlvIiwiZ2V0VGlsZVBpeGVsUmF0aW8iLCJ0aWxlc1RvRHJhd0J5WiIsImZpbmRMb2FkZWRUaWxlcyIsImFuaW1hdGluZ09ySW50ZXJhY3RpbmciLCJ0bXBUaWxlUmFuZ2UiLCJ1aWQiLCJpblRyYW5zaXRpb24iLCJnZXRBbHBoYSIsImNoaWxkVGlsZVJhbmdlIiwiZ2V0VGlsZUNvb3JkQ2hpbGRUaWxlUmFuZ2UiLCJjb3ZlcmVkIiwiZm9yRWFjaFRpbGVDb29yZFBhcmVudFRpbGVSYW5nZSIsInRpbGVQaXhlbFNpemUiLCJnZXRUaWxlUGl4ZWxTaXplIiwiY3VycmVudFNjYWxlIiwiY3VycmVudFRpbGVQaXhlbFNpemUiLCJ0aWxlRXh0ZW50IiwidGlsZUd1dHRlciIsInRpbGVzVG9EcmF3IiwienMiLCJ0aWxlQ29vcmRLZXkiLCJnZXRHdXR0ZXJGb3JQcm9qZWN0aW9uIiwiZ2V0VGlsZUNvb3JkRXh0ZW50IiwiZ2V0VGlsZUNvb3JkIiwiZHJhd1RpbGVJbWFnZSIsImd1dHRlciIsInRyYW5zaXRpb24iLCJnZXRUaWxlSW1hZ2UiLCJnZXRPcGFxdWUiLCJhbHBoYUNoYW5nZWQiLCJlbmRUcmFuc2l0aW9uIiwiY2FudmFzX1RpbGVMYXllciIsIlJlcGxheUdyb3VwX1JlcGxheUdyb3VwIiwiZ2V0UmVwbGF5IiwicmVwbGF5VHlwZSIsImFkZERlY2x1dHRlciIsImdyb3VwIiwicmVuZGVyX1JlcGxheUdyb3VwIiwiUmVwbGF5VHlwZSIsIkRFRkFVTFQiLCJURVhUIiwibGluZVN0cmluZ0xlbmd0aCIsImRyYXdUZXh0T25QYXRoIiwibWVhc3VyZSIsInN0YXJ0TSIsIm1heEFuZ2xlIiwicHJldmlvdXNBbmdsZSIsInJldmVyc2UiLCJudW1DaGFycyIsInNlZ21lbnRNIiwiY2h1bmsiLCJjaHVua0xlbmd0aCIsImNoYXIiLCJjaGFyQXQiLCJjaGFyTGVuZ3RoIiwiY2hhck0iLCJzZWdtZW50UG9zIiwiaW50ZXJwb2xhdGUiLCJ1bnNoaWZ0IiwiSW5zdHJ1Y3Rpb24iLCJCRUdJTl9HRU9NRVRSWSIsIkJFR0lOX1BBVEgiLCJDTE9TRV9QQVRIIiwiQ1VTVE9NIiwiRFJBV19DSEFSUyIsIkRSQVdfSU1BR0UiLCJFTkRfR0VPTUVUUlkiLCJGSUxMIiwiTU9WRV9UT19MSU5FX1RPIiwiU0VUX0ZJTExfU1RZTEUiLCJTRVRfU1RST0tFX1NUWUxFIiwiU1RST0tFIiwiSW5zdHJ1Y3Rpb25fZmlsbEluc3RydWN0aW9uIiwiSW5zdHJ1Y3Rpb25fc3Ryb2tlSW5zdHJ1Y3Rpb24iLCJiZWdpblBhdGhJbnN0cnVjdGlvbiIsImNsb3NlUGF0aEluc3RydWN0aW9uIiwiY2FudmFzX0luc3RydWN0aW9uIiwiT1JERVIiLCJURVhUX0FMSUdOIiwibWlkZGxlIiwiaGFuZ2luZyIsImFscGhhYmV0aWMiLCJpZGVvZ3JhcGhpYyIsImJvdHRvbSIsIlJlcGxheV90bXBFeHRlbnQiLCJSZXBsYXlfdG1wVHJhbnNmb3JtIiwiUmVwbGF5IiwiQ2FudmFzUmVwbGF5IiwibWF4RXh0ZW50Iiwib3ZlcmxhcHMiLCJkZWNsdXR0ZXJUcmVlIiwibWF4TGluZVdpZHRoIiwiYWxpZ25GaWxsXyIsImJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjFfIiwiYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMl8iLCJidWZmZXJlZE1heEV4dGVudF8iLCJpbnN0cnVjdGlvbnMiLCJjb29yZGluYXRlQ2FjaGVfIiwicmVuZGVyZWRUcmFuc2Zvcm1fIiwiaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zIiwicmVwbGF5VGV4dEJhY2tncm91bmRfIiwicDEiLCJwMiIsInAzIiwicDQiLCJmaWxsSW5zdHJ1Y3Rpb24iLCJzdHJva2VJbnN0cnVjdGlvbiIsImZpbGxfIiwic2V0U3Ryb2tlU3R5bGVfIiwicmVwbGF5SW1hZ2VfIiwiZGVjbHV0dGVyR3JvdXAiLCJzbmFwVG9QaXhlbCIsImZpbGxTdHJva2UiLCJib3hXIiwiYm94SCIsImJveFgiLCJib3hZIiwic3Ryb2tlUGFkZGluZyIsImRlY2x1dHRlckFyZ3MiLCJhcHBseVBpeGVsUmF0aW8iLCJkYXNoQXJyYXkiLCJkYXNoIiwiYXBwZW5kRmxhdENvb3JkaW5hdGVzIiwiY2xvc2VkIiwic2tpcEZpcnN0IiwibXlFbmQiLCJnZXRCdWZmZXJlZE1heEV4dGVudCIsImxhc3RSZWwiLCJuZXh0UmVsIiwibGFzdENvb3JkIiwibmV4dENvb3JkIiwic2tpcHBlZCIsImRyYXdDdXN0b21Db29yZGluYXRlc18iLCJyZXBsYXlFbmRzIiwicmVwbGF5RW5kIiwiYmVnaW5HZW9tZXRyeSIsInJlcGxheUVuZHNzIiwicmVwbGF5QmVnaW4iLCJteUVuZHMiLCJlbmRHZW9tZXRyeSIsImZpbmlzaCIsIm9yaWdpbiIsInJlcGVhdFNpemUiLCJpbnN0cnVjdGlvbiIsInJlbmRlckRlY2x1dHRlcl8iLCJncm91cENvdW50IiwiYm94IiwiZGVjbHV0dGVyRGF0YSIsInJlcGxheV8iLCJza2lwcGVkRmVhdHVyZXNIYXNoIiwiZmVhdHVyZUNhbGxiYWNrIiwib3B0X2hpdEV4dGVudCIsImRkIiwicHJldlgiLCJwcmV2WSIsInJvdW5kWCIsInJvdW5kWSIsInNraXBGZWF0dXJlcyIsInBlbmRpbmdGaWxsIiwicGVuZGluZ1N0cm9rZSIsImxhc3RGaWxsSW5zdHJ1Y3Rpb24iLCJsYXN0U3Ryb2tlSW5zdHJ1Y3Rpb24iLCJjb29yZGluYXRlQ2FjaGUiLCJiYXRjaFNpemUiLCJmbiIsInJvdGF0ZVdpdGhWaWV3IiwiYmFja2dyb3VuZEZpbGwiLCJiYWNrZ3JvdW5kU3Ryb2tlIiwiYmFzZWxpbmUiLCJmaWxsS2V5Iiwic3Ryb2tlS2V5Iiwic3Ryb2tlV2lkdGgiLCJ0ZXh0S2V5IiwicGF0aExlbmd0aCIsInRleHRMZW5ndGgiLCJ0ZXh0U3RhdGVzIiwicGFydHMiLCJjYyIsImNoYXJzIiwicGFydCIsInJlcGxheSIsInJlcGxheUhpdERldGVjdGlvbiIsIm9wdF9mZWF0dXJlQ2FsbGJhY2siLCJyZXZlcnNlSGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zIiwiY3JlYXRlRmlsbCIsImFwcGx5U3Ryb2tlIiwiY3JlYXRlU3Ryb2tlIiwidXBkYXRlRmlsbFN0eWxlIiwiY3VycmVudEZpbGxTdHlsZSIsInVwZGF0ZVN0cm9rZVN0eWxlIiwiY3VycmVudFN0cm9rZVN0eWxlIiwiY3VycmVudExpbmVDYXAiLCJjdXJyZW50TGluZURhc2giLCJjdXJyZW50TGluZURhc2hPZmZzZXQiLCJjdXJyZW50TGluZUpvaW4iLCJjdXJyZW50TGluZVdpZHRoIiwiY3VycmVudE1pdGVyTGltaXQiLCJlbmRHZW9tZXRyeUluc3RydWN0aW9uIiwiSW1hZ2VSZXBsYXkiLCJDYW52YXNJbWFnZVJlcGxheSIsImRlY2x1dHRlckdyb3VwXyIsImhpdERldGVjdGlvbkltYWdlXyIsImFuY2hvclhfIiwiYW5jaG9yWV8iLCJoZWlnaHRfIiwib3BhY2l0eV8iLCJvcmlnaW5YXyIsIm9yaWdpbllfIiwicm90YXRlV2l0aFZpZXdfIiwic2NhbGVfIiwid2lkdGhfIiwiZHJhd0Nvb3JkaW5hdGVzXyIsIm15QmVnaW4iLCJoaXREZXRlY3Rpb25JbWFnZSIsImdldEhpdERldGVjdGlvbkltYWdlIiwiTGluZVN0cmluZ1JlcGxheSIsIkNhbnZhc0xpbmVTdHJpbmdSZXBsYXkiLCJkcmF3RmxhdENvb3JkaW5hdGVzXyIsIm1vdmVUb0xpbmVUb0luc3RydWN0aW9uIiwibGFzdFN0cm9rZSIsIlBvbHlnb25SZXBsYXlfQ2FudmFzUG9seWdvblJlcGxheSIsIkNhbnZhc1BvbHlnb25SZXBsYXkiLCJkcmF3RmxhdENvb3JkaW5hdGVzc18iLCJudW1FbmRzIiwic2V0RmlsbFN0cm9rZVN0eWxlc18iLCJjaXJjbGVJbnN0cnVjdGlvbiIsIm1hdGNoaW5nQ2h1bmsiLCJtMTIiLCJtMjMiLCJ4MTIiLCJ5MTIiLCJ4MjMiLCJ5MjMiLCJjaHVua1N0YXJ0IiwiY2h1bmtFbmQiLCJjaHVua00iLCJhY29zIiwiVGV4dFBsYWNlbWVudCIsIkJBVENIX0NPTlNUUlVDVE9SUyIsIkNpcmNsZSIsIkRlZmF1bHQiLCJJbWFnZSIsIkxpbmVTdHJpbmciLCJUZXh0IiwiQ2FudmFzVGV4dFJlcGxheSIsImxhYmVsc18iLCJmaWxsU3RhdGVzIiwic3Ryb2tlU3RhdGVzIiwidGV4dEtleV8iLCJmaWxsS2V5XyIsInN0cm9rZUtleV8iLCJ3aWR0aHNfIiwiZ2VvbWV0cnlUeXBlIiwicGxhY2VtZW50IiwiZmxhdEVuZCIsImZsYXRPZmZzZXQiLCJvbyIsInJhbmdlIiwiZHJhd0NoYXJzXyIsImludGVyaW9yUG9pbnRzIiwiZHJhd1RleHRJbWFnZV8iLCJhbGlnbiIsImxpbmVzIiwibnVtTGluZXMiLCJ3aWR0aHMiLCJjdXJyZW50V2lkdGgiLCJtZWFzdXJlVGV4dFdpZHRocyIsImxpbmVIZWlnaHQiLCJyZW5kZXJXaWR0aCIsImxlZnRSaWdodCIsImdldE92ZXJmbG93IiwiZ2V0TWF4QW5nbGUiLCJnZXRQbGFjZW1lbnQiLCJnZXRCYWNrZ3JvdW5kRmlsbCIsImdldEJhY2tncm91bmRTdHJva2UiLCJnZXRQYWRkaW5nIiwiUmVwbGF5R3JvdXBfQ2FudmFzUmVwbGF5R3JvdXAiLCJSZXBsYXlHcm91cCIsIkNhbnZhc1JlcGxheUdyb3VwIiwib3B0X3JlbmRlckJ1ZmZlciIsImRlY2x1dHRlclRyZWVfIiwidG9sZXJhbmNlXyIsIm1heEV4dGVudF8iLCJvdmVybGFwc18iLCJyZXNvbHV0aW9uXyIsInJlbmRlckJ1ZmZlcl8iLCJyZXBsYXlzQnlaSW5kZXhfIiwiaGl0RGV0ZWN0aW9uQ29udGV4dF8iLCJoaXREZXRlY3Rpb25UcmFuc2Zvcm1fIiwiZGVjbHV0dGVyIiwiZmxhdENsaXBDb29yZHMiLCJnZXRDbGlwQ29vcmRzIiwiaGFzUmVwbGF5cyIsInJlcGxheXMiLCJjYW5kaWRhdGVzIiwicmVwbGF5S2V5IiwiZGVjbHV0dGVyUmVwbGF5cyIsImhpdEV4dGVudCIsImNvbnRleHRTaXplIiwiZGVjbHV0dGVyZWRGZWF0dXJlcyIsIm1hc2siLCJjaXJjbGVBcnJheUNhY2hlIiwiYXJyYXlTaXplIiwiZXJyb3IiLCJmaWxsQ2lyY2xlQXJyYXlSb3dUb01pZGRsZSIsImdldENpcmNsZUFycmF5IiwiekluZGV4S2V5IiwiQ29uc3RydWN0b3IiLCJnZXRSZXBsYXlzIiwib3B0X3JlcGxheVR5cGVzIiwib3B0X2RlY2x1dHRlclJlcGxheXMiLCJyZXBsYXlUeXBlcyIsIjAiLCJjYW52YXNfUmVwbGF5R3JvdXAiLCJTSU1QTElGWV9UT0xFUkFOQ0UiLCJHRU9NRVRSWV9SRU5ERVJFUlMiLCJyZXBsYXlHcm91cCIsImdldEltYWdlU3RhdGUiLCJpbWFnZVJlcGxheSIsInRleHRSZXBsYXkiLCJsaW5lU3RyaW5nUmVwbGF5IiwicG9seWdvblJlcGxheSIsIk11bHRpUG9pbnQiLCJNdWx0aUxpbmVTdHJpbmciLCJNdWx0aVBvbHlnb24iLCJHZW9tZXRyeUNvbGxlY3Rpb24iLCJnZW9tZXRyeVJlbmRlcmVyIiwiY2lyY2xlUmVwbGF5IiwiZGVmYXVsdE9yZGVyIiwiZmVhdHVyZTEiLCJmZWF0dXJlMiIsImdldFNxdWFyZWRUb2xlcmFuY2UiLCJnZXRUb2xlcmFuY2UiLCJyZW5kZXJGZWF0dXJlIiwidW5saXN0ZW5JbWFnZUNoYW5nZSIsImxpc3RlbkltYWdlQ2hhbmdlIiwicmVuZGVyR2VvbWV0cnkiLCJnZXRHZW9tZXRyaWVzIiwicmVuZGVyRmVhdHVyZUludGVybmFsIiwiVmVjdG9yTGF5ZXJfQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlciIsIkNhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIiLCJ2ZWN0b3JMYXllciIsImdldERlY2x1dHRlciIsInJidXNoX2RlZmF1bHQiLCJkaXJ0eV8iLCJyZW5kZXJlZFJldmlzaW9uXyIsInJlbmRlcmVkUmVzb2x1dGlvbl8iLCJyZW5kZXJlZFJlbmRlck9yZGVyXyIsInJlcGxheUdyb3VwXyIsImhhbmRsZUZvbnRzQ2hhbmdlZF8iLCJ2ZWN0b3JTb3VyY2UiLCJjbGlwRXh0ZW50IiwicmVwbGF5Q29udGV4dCIsImRyYXdPZmZzZXRYIiwiZHJhd09mZnNldFkiLCJ0cmFuc3BhcmVudExheWVyIiwiaGFzUmVuZGVyTGlzdGVuZXJzIiwiZHJhd1dpZHRoIiwiZHJhd0hlaWdodCIsImRyYXdTaXplIiwid29ybGQiLCJtYWluQ29udGV4dEFscGhhIiwiaGFuZGxlU3R5bGVJbWFnZUNoYW5nZV8iLCJhbmltYXRpbmciLCJpbnRlcmFjdGluZyIsInVwZGF0ZVdoaWxlQW5pbWF0aW5nIiwiZ2V0VXBkYXRlV2hpbGVBbmltYXRpbmciLCJ1cGRhdGVXaGlsZUludGVyYWN0aW5nIiwiZ2V0VXBkYXRlV2hpbGVJbnRlcmFjdGluZyIsImZyYW1lU3RhdGVFeHRlbnQiLCJ2ZWN0b3JMYXllclJldmlzaW9uIiwidmVjdG9yTGF5ZXJSZW5kZXJCdWZmZXIiLCJnZXRSZW5kZXJCdWZmZXIiLCJ2ZWN0b3JMYXllclJlbmRlck9yZGVyIiwiZ2V0UmVuZGVyT3JkZXIiLCJnZXRPdmVybGFwcyIsImxvYWRGZWF0dXJlcyIsInN0eWxlcyIsInN0eWxlRnVuY3Rpb24iLCJnZXRTdHlsZUZ1bmN0aW9uIiwiZGlydHkiLCJmb3JFYWNoRmVhdHVyZUluRXh0ZW50IiwiVmVjdG9yTGF5ZXIiLCJWZWN0b3JUaWxlUmVuZGVyVHlwZSIsIkhZQlJJRCIsIklNQUdFX1JFUExBWVMiLCJoeWJyaWQiLCJWRUNUT1JfUkVQTEFZUyIsInZlY3RvciIsIlZlY3RvclRpbGVMYXllcl9DYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlciIsIkNhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyIiwicmVuZGVyZWRMYXllclJldmlzaW9uXyIsInRtcFRyYW5zZm9ybV8iLCJyZW5kZXJNb2RlIiwiY3JlYXRlUmVwbGF5R3JvdXBfIiwicmVuZGVyVGlsZUltYWdlXyIsImxheWVyUmV2aXNpb24iLCJ0aGlzJDEiLCJyZXZpc2lvbiIsInJlbmRlck9yZGVyIiwicmVwbGF5U3RhdGUiLCJnZXRSZXBsYXlTdGF0ZSIsInJlbmRlcmVkUmVuZGVyT3JkZXIiLCJzb3VyY2VUaWxlR3JpZCIsImdldFRpbGVHcmlkIiwibG9vcCIsInR0Iiwic291cmNlVGlsZSIsInRpbGVLZXlzIiwic291cmNlVGlsZUNvb3JkIiwic291cmNlVGlsZUV4dGVudCIsInNoYXJlZEV4dGVudCIsImJ1ZmZlcmVkRXh0ZW50IiwidGlsZVByb2plY3Rpb24iLCJyZXByb2plY3QiLCJzZXRQcm9qZWN0aW9uIiwiZ2V0RmVhdHVyZXMiLCJzZXRSZXBsYXlHcm91cCIsImZvdW5kIiwiZ2V0UmVwbGF5R3JvdXAiLCJnZXRSZXBsYXlUcmFuc2Zvcm1fIiwicmVuZGVyUmVzb2x1dGlvbiIsImNsaXBzIiwid29ybGRPZmZzZXQiLCJjdXJyZW50Q2xpcCIsInp6IiwicmVwbGF5RGF0YSIsInJlcGxheURlY2x1dHRlciIsInJlbmRlcmVkVGlsZVJldmlzaW9uIiwid3JhcHBlZFRpbGVDb29yZCIsInBpeGVsU2NhbGUiLCJWZWN0b3JUaWxlTGF5ZXIiLCJvbF9tYXAiLCJNYXAiLCJ6b29tT3B0aW9ucyIsInJvdGF0ZU9wdGlvbnMiLCJhdHRyaWJ1dGlvbiIsImF0dHJpYnV0aW9uT3B0aW9ucyIsImRlZmF1bHRzIiwiYWx0U2hpZnREcmFnUm90YXRlIiwiZG91YmxlQ2xpY2tab29tIiwiem9vbURlbHRhIiwiem9vbUR1cmF0aW9uIiwiZHJhZ1BhbiIsIm9uRm9jdXNPbmx5IiwicGluY2hSb3RhdGUiLCJwaW5jaFpvb20iLCJrZXlib2FyZCIsIm1vdXNlV2hlZWxab29tIiwic2hpZnREcmFnWm9vbSIsImludGVyYWN0aW9uX2RlZmF1bHRzIiwidmlld19ERUZBVUxUX01JTl9aT09NIiwidmlld19hbmltYXRpb25DYWxsYmFjayIsInZpZXdfaXNOb29wQW5pbWF0aW9uIiwib2xfdmlldyIsInZpZXdfY3JlYXRlUmVzb2x1dGlvbkNvbnN0cmFpbnQiLCJ2aWV3X2NyZWF0ZUNlbnRlckNvbnN0cmFpbnQiLCJ2aWV3X2NyZWF0ZVJvdGF0aW9uQ29uc3RyYWludCIsIm9sX1RpbGUiLCJUaWxlIiwiaW50ZXJpbVRpbGUiLCJ0cmFuc2l0aW9uXyIsInRyYW5zaXRpb25TdGFydHNfIiwicmVmcmVzaEludGVyaW1DaGFpbiIsImdldEJsYW5rSW1hZ2UiLCJjdHgiLCJmaWxsUmVjdCIsIm9sX0ltYWdlVGlsZSIsIkltYWdlVGlsZSIsInRpbGVMb2FkRnVuY3Rpb24iLCJjcm9zc09yaWdpbl8iLCJzcmNfIiwiaW1hZ2VMaXN0ZW5lcktleXNfIiwidGlsZUxvYWRGdW5jdGlvbl8iLCJ1bmxpc3RlbkltYWdlXyIsImhhbmRsZUltYWdlRXJyb3JfIiwiaGFuZGxlSW1hZ2VMb2FkXyIsIm5hdHVyYWxXaWR0aCIsIm5hdHVyYWxIZWlnaHQiLCJ0aWxlY29vcmRfY3JlYXRlT3JVcGRhdGUiLCJvcHRfdGlsZUNvb3JkIiwiZ2V0S2V5WlhZIiwidGlsZWNvb3JkX2dldEtleSIsIm9sX1RpbGVDYWNoZSIsIlRpbGVDYWNoZSIsInBydW5lRXhjZXB0TmV3ZXN0WiIsImZyb21LZXkiLCJlbmxhcmdlQ2xpcFBvaW50IiwiY2VudHJvaWRYIiwiY2VudHJvaWRZIiwiZFgiLCJkWSIsInJlcHJval9yZW5kZXIiLCJzb3VyY2VFeHRlbnQiLCJ0YXJnZXRFeHRlbnQiLCJ0cmlhbmd1bGF0aW9uIiwic291cmNlcyIsIm9wdF9yZW5kZXJFZGdlcyIsInNvdXJjZURhdGFFeHRlbnQiLCJjYW52YXNXaWR0aEluVW5pdHMiLCJjYW52YXNIZWlnaHRJblVuaXRzIiwic3RpdGNoQ29udGV4dCIsInN0aXRjaFNjYWxlIiwieFBvcyIsInlQb3MiLCJzcmNXaWR0aCIsInNyY0hlaWdodCIsInRhcmdldFRvcExlZnQiLCJnZXRUcmlhbmdsZXMiLCJ0cmlhbmdsZSIsInUwIiwidjAiLCJ1MSIsInYxIiwidTIiLCJ2MiIsInNvdXJjZU51bWVyaWNhbFNoaWZ0WCIsInNvdXJjZU51bWVyaWNhbFNoaWZ0WSIsImFmZmluZUNvZWZzIiwibWF4Um93IiwibWF4RWwiLCJhYnNWYWx1ZSIsImNvZWYiLCJzb2x2ZUxpbmVhclN5c3RlbSIsInAwIiwiVHJpYW5ndWxhdGlvbl9Ucmlhbmd1bGF0aW9uIiwidGFyZ2V0UHJvaiIsIm1heFNvdXJjZUV4dGVudCIsImVycm9yVGhyZXNob2xkIiwic291cmNlUHJval8iLCJ0YXJnZXRQcm9qXyIsInRyYW5zZm9ybUludkNhY2hlIiwidHJhbnNmb3JtSW52IiwidHJhbnNmb3JtSW52XyIsIm1heFNvdXJjZUV4dGVudF8iLCJlcnJvclRocmVzaG9sZFNxdWFyZWRfIiwidHJpYW5nbGVzXyIsIndyYXBzWEluU291cmNlXyIsImNhbldyYXBYSW5Tb3VyY2VfIiwic291cmNlV29ybGRXaWR0aF8iLCJ0YXJnZXRXb3JsZFdpZHRoXyIsImRlc3RpbmF0aW9uVG9wTGVmdCIsImRlc3RpbmF0aW9uVG9wUmlnaHQiLCJkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0IiwiZGVzdGluYXRpb25Cb3R0b21MZWZ0Iiwic291cmNlVG9wTGVmdCIsInNvdXJjZVRvcFJpZ2h0Iiwic291cmNlQm90dG9tUmlnaHQiLCJzb3VyY2VCb3R0b21MZWZ0IiwiYWRkUXVhZF8iLCJsZWZ0Qm91bmQiLCJuZXdUcmlhbmdsZSIsImFkZFRyaWFuZ2xlXyIsImFTcmMiLCJiU3JjIiwiY1NyYyIsImRTcmMiLCJtYXhTdWJkaXZpc2lvbiIsInNvdXJjZVF1YWRFeHRlbnQiLCJzb3VyY2VDb3ZlcmFnZVgiLCJzb3VyY2VXb3JsZFdpZHRoIiwid3JhcHNYIiwibmVlZHNTdWJkaXZpc2lvbiIsImlzRmluaXRlIiwiY2VudGVyU3JjIiwiYmMiLCJiY1NyYyIsImRhIiwiZGFTcmMiLCJhYiIsImFiU3JjIiwiY2QiLCJjZFNyYyIsImNhbGN1bGF0ZVNvdXJjZUV4dGVudCIsInJlcHJval9Ucmlhbmd1bGF0aW9uIiwicmVwcm9qX1RpbGUiLCJSZXByb2pUaWxlIiwidGFyZ2V0VGlsZUdyaWQiLCJnZXRUaWxlRnVuY3Rpb24iLCJvcHRfZXJyb3JUaHJlc2hvbGQiLCJyZW5kZXJFZGdlc18iLCJndXR0ZXJfIiwic291cmNlVGlsZUdyaWRfIiwidGFyZ2V0VGlsZUdyaWRfIiwid3JhcHBlZFRpbGVDb29yZF8iLCJzb3VyY2VUaWxlc18iLCJzb3VyY2VzTGlzdGVuZXJLZXlzXyIsInNvdXJjZVpfIiwibWF4VGFyZ2V0RXh0ZW50IiwibGltaXRlZFRhcmdldEV4dGVudCIsInNvdXJjZVByb2pFeHRlbnQiLCJ0YXJnZXRNZXRlcnNQZXJVbml0Iiwic291cmNlTWV0ZXJzUGVyVW5pdCIsImNvbXBlbnNhdGlvbkZhY3RvciIsImNhbGN1bGF0ZVNvdXJjZVJlc29sdXRpb24iLCJlcnJvclRocmVzaG9sZEluUGl4ZWxzIiwidHJpYW5ndWxhdGlvbl8iLCJzb3VyY2VSYW5nZSIsInNyY1giLCJzcmNZIiwidW5saXN0ZW5Tb3VyY2VzXyIsInJlcHJvamVjdF8iLCJnZXRUaWxlU2l6ZSIsImxlZnRUb0xvYWQiLCJzb3VyY2VMaXN0ZW5LZXkiLCJjcmVhdGVGcm9tVGVtcGxhdGUiLCJ0ZW1wbGF0ZSIsInpSZWdFeCIsInhSZWdFeCIsInlSZWdFeCIsImRhc2hZUmVnRXgiLCJnZXRGdWxsVGlsZVJhbmdlIiwiY3JlYXRlRnJvbVRlbXBsYXRlcyIsInRlbXBsYXRlcyIsInRpbGVVcmxGdW5jdGlvbnMiLCJoYXNoIiwiY3JlYXRlRnJvbVRpbGVVcmxGdW5jdGlvbnMiLCJudWxsVGlsZVVybEZ1bmN0aW9uIiwiYWRhcHRBdHRyaWJ1dGlvbnMiLCJhdHRyaWJ1dGlvbkxpa2UiLCJzb3VyY2VfU291cmNlIiwiU291cmNlIiwiYXR0cmlidXRpb25zXyIsImF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlXyIsImF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlIiwid3JhcFhfIiwid3JhcFgiLCJyZWZyZXNoIiwic2V0QXR0cmlidXRpb25zIiwidG1wVGlsZUNvb3JkIiwiVGlsZUdyaWRfVGlsZUdyaWQiLCJvcHRfc3RyaWN0IiwiZXZlcnkiLCJjdXJyZW50VmFsIiwicmVzIiwib3JpZ2lucyIsIm9yaWdpbl8iLCJvcmlnaW5zXyIsInRpbGVTaXplc18iLCJ0aWxlU2l6ZXMiLCJ0aWxlU2l6ZV8iLCJ0aWxlU2l6ZSIsImZ1bGxUaWxlUmFuZ2VzXyIsInRtcFNpemVfIiwic2l6ZXMiLCJjYWxjdWxhdGVUaWxlUmFuZ2VzXyIsImZvckVhY2hUaWxlQ29vcmQiLCJvcHRfdGlsZVJhbmdlIiwidGlsZUNvb3JkRXh0ZW50IiwiZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyIsImdldFRpbGVDb29yZEZvckNvb3JkQW5kUmVzb2x1dGlvbiIsImdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8iLCJyZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5IiwiYWRqdXN0WCIsImFkanVzdFkiLCJ4RnJvbU9yaWdpbiIsInlGcm9tT3JpZ2luIiwidGlsZUNvb3JkWCIsInRpbGVDb29yZFkiLCJnZXRUaWxlQ29vcmRGb3JDb29yZEFuZFoiLCJnZXRUaWxlQ29vcmRSZXNvbHV0aW9uIiwiZnVsbFRpbGVSYW5nZXMiLCJ0aWxlZ3JpZF9UaWxlR3JpZCIsImdldEZvclByb2plY3Rpb24iLCJvcHRfbWF4Wm9vbSIsIm9wdF90aWxlU2l6ZSIsIm9wdF9jb3JuZXIiLCJyZXNvbHV0aW9uc0Zyb21FeHRlbnQiLCJjcmVhdGVGb3JFeHRlbnQiLCJleHRlbnRGcm9tUHJvamVjdGlvbiIsImNyZWF0ZUZvclByb2plY3Rpb24iLCJoYWxmIiwiVGlsZV9UaWxlU291cmNlIiwiVGlsZVNvdXJjZSIsIm9wYXF1ZV8iLCJvcGFxdWUiLCJ0aWxlUGl4ZWxSYXRpb18iLCJ0aWxlQ2FjaGUiLCJ0bXBTaXplIiwidGlsZU9wdGlvbnMiLCJnZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uIiwibG9hZGVkIiwic2V0S2V5IiwidGhpc1Byb2oiLCJyYXRpbyIsImdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbiIsIm9wdF9wcm9qZWN0aW9uIiwid29ybGRzQXdheSIsIndpdGhpbkV4dGVudEFuZFoiLCJUaWxlU291cmNlRXZlbnQiLCJUaWxlRXZlbnRUeXBlIiwiZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24iLCJpbWFnZVRpbGUiLCJBVFRSSUJVVElPTiIsInNvdXJjZV9PU00iLCJPU00iLCJ1cmwiLCJyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZCIsIlRpbGVJbWFnZSIsInh5ek9wdGlvbnMiLCJncmlkT3B0aW9ucyIsImNyZWF0ZVhZWiIsInRpbGVVcmxGdW5jdGlvbiIsInVybHMiLCJVcmxUaWxlIiwidGlsZUNsYXNzIiwidGlsZUNhY2hlRm9yUHJvamVjdGlvbiIsInRpbGVHcmlkRm9yUHJvamVjdGlvbiIsInJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkXyIsInJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXyIsInVzZWRUaWxlQ2FjaGUiLCJnZXRHdXR0ZXIiLCJwcm9qS2V5IiwiY3JlYXRlVGlsZV8iLCJ1cmxUaWxlQ29vcmQiLCJ0aWxlVXJsIiwibmV3VGlsZSIsImdldFRpbGVJbnRlcm5hbCIsInNldFJlbmRlclJlcHJvamVjdGlvbkVkZ2VzIiwic2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwidGlsZWdyaWQiLCJwcm9qIiwiZ2VuZXJhdGVUaWxlVXJsRnVuY3Rpb25fIiwic2V0VXJscyIsInNldFVybCIsInNldFRpbGVVcmxGdW5jdGlvbiIsInRpbGVMb2FkaW5nS2V5c18iLCJnZXRUaWxlTG9hZEZ1bmN0aW9uIiwiZ2V0VGlsZVVybEZ1bmN0aW9uIiwiZ2V0VXJscyIsInNldFRpbGVMb2FkRnVuY3Rpb24iLCJtYXRjaCIsImV4ZWMiLCJzdGFydENoYXJDb2RlIiwic3RvcENoYXJDb2RlIiwiZnJvbUNoYXJDb2RlIiwic3RvcCIsImV4cGFuZFVybCIsIlRpbGVQcm9wZXJ0eSIsIlRpbGVfVGlsZUxheWVyIiwiVGlsZUxheWVyIiwic2V0UHJlbG9hZCIsInNldFVzZUludGVyaW1UaWxlc09uRXJyb3IiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxP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M0MsSUFTRm8zQyxHQUFTOXhGLFVBQUF5M0MsVUNqSFMsSUFBSWtuQyxHQUFJLENBQ3RCNzBFLE9BQVEsTUFDUnlsQyxPQUFRLENBQ04sSURpSFMsR0NqSEssQ0FDWmxsQyxPQUFRLElBQUk0a0YsTUFHaEJqekUsS0FBTSxJQUFJaWtFLEdBQUssQ0FDYjcyRCxPQUFRLENBQUMsRUFBRyxHQUNadWQsS0FBTSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTEpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJidXNoO1xubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IHJidXNoO1xuXG52YXIgcXVpY2tzZWxlY3QgPSByZXF1aXJlKCdxdWlja3NlbGVjdCcpO1xuXG5mdW5jdGlvbiByYnVzaChtYXhFbnRyaWVzLCBmb3JtYXQpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgcmJ1c2gpKSByZXR1cm4gbmV3IHJidXNoKG1heEVudHJpZXMsIGZvcm1hdCk7XG5cbiAgICAvLyBtYXggZW50cmllcyBpbiBhIG5vZGUgaXMgOSBieSBkZWZhdWx0OyBtaW4gbm9kZSBmaWxsIGlzIDQwJSBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIHRoaXMuX21heEVudHJpZXMgPSBNYXRoLm1heCg0LCBtYXhFbnRyaWVzIHx8IDkpO1xuICAgIHRoaXMuX21pbkVudHJpZXMgPSBNYXRoLm1heCgyLCBNYXRoLmNlaWwodGhpcy5fbWF4RW50cmllcyAqIDAuNCkpO1xuXG4gICAgaWYgKGZvcm1hdCkge1xuICAgICAgICB0aGlzLl9pbml0Rm9ybWF0KGZvcm1hdCk7XG4gICAgfVxuXG4gICAgdGhpcy5jbGVhcigpO1xufVxuXG5yYnVzaC5wcm90b3R5cGUgPSB7XG5cbiAgICBhbGw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FsbCh0aGlzLmRhdGEsIFtdKTtcbiAgICB9LFxuXG4gICAgc2VhcmNoOiBmdW5jdGlvbiAoYmJveCkge1xuXG4gICAgICAgIHZhciBub2RlID0gdGhpcy5kYXRhLFxuICAgICAgICAgICAgcmVzdWx0ID0gW10sXG4gICAgICAgICAgICB0b0JCb3ggPSB0aGlzLnRvQkJveDtcblxuICAgICAgICBpZiAoIWludGVyc2VjdHMoYmJveCwgbm9kZSkpIHJldHVybiByZXN1bHQ7XG5cbiAgICAgICAgdmFyIG5vZGVzVG9TZWFyY2ggPSBbXSxcbiAgICAgICAgICAgIGksIGxlbiwgY2hpbGQsIGNoaWxkQkJveDtcblxuICAgICAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXG4gICAgICAgICAgICAgICAgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIGNoaWxkQkJveCA9IG5vZGUubGVhZiA/IHRvQkJveChjaGlsZCkgOiBjaGlsZDtcblxuICAgICAgICAgICAgICAgIGlmIChpbnRlcnNlY3RzKGJib3gsIGNoaWxkQkJveCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUubGVhZikgcmVzdWx0LnB1c2goY2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjb250YWlucyhiYm94LCBjaGlsZEJCb3gpKSB0aGlzLl9hbGwoY2hpbGQsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Ugbm9kZXNUb1NlYXJjaC5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlID0gbm9kZXNUb1NlYXJjaC5wb3AoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcblxuICAgIGNvbGxpZGVzOiBmdW5jdGlvbiAoYmJveCkge1xuXG4gICAgICAgIHZhciBub2RlID0gdGhpcy5kYXRhLFxuICAgICAgICAgICAgdG9CQm94ID0gdGhpcy50b0JCb3g7XG5cbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzKGJib3gsIG5vZGUpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgdmFyIG5vZGVzVG9TZWFyY2ggPSBbXSxcbiAgICAgICAgICAgIGksIGxlbiwgY2hpbGQsIGNoaWxkQkJveDtcblxuICAgICAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXG4gICAgICAgICAgICAgICAgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIGNoaWxkQkJveCA9IG5vZGUubGVhZiA/IHRvQkJveChjaGlsZCkgOiBjaGlsZDtcblxuICAgICAgICAgICAgICAgIGlmIChpbnRlcnNlY3RzKGJib3gsIGNoaWxkQkJveCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUubGVhZiB8fCBjb250YWlucyhiYm94LCBjaGlsZEJCb3gpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXNUb1NlYXJjaC5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlID0gbm9kZXNUb1NlYXJjaC5wb3AoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgbG9hZDogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYgKCEoZGF0YSAmJiBkYXRhLmxlbmd0aCkpIHJldHVybiB0aGlzO1xuXG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCA8IHRoaXMuX21pbkVudHJpZXMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBkYXRhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnNlcnQoZGF0YVtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlY3Vyc2l2ZWx5IGJ1aWxkIHRoZSB0cmVlIHdpdGggdGhlIGdpdmVuIGRhdGEgZnJvbSBzY3JhdGNoIHVzaW5nIE9NVCBhbGdvcml0aG1cbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLl9idWlsZChkYXRhLnNsaWNlKCksIDAsIGRhdGEubGVuZ3RoIC0gMSwgMCk7XG5cbiAgICAgICAgaWYgKCF0aGlzLmRhdGEuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBzYXZlIGFzIGlzIGlmIHRyZWUgaXMgZW1wdHlcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5vZGU7XG5cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEuaGVpZ2h0ID09PSBub2RlLmhlaWdodCkge1xuICAgICAgICAgICAgLy8gc3BsaXQgcm9vdCBpZiB0cmVlcyBoYXZlIHRoZSBzYW1lIGhlaWdodFxuICAgICAgICAgICAgdGhpcy5fc3BsaXRSb290KHRoaXMuZGF0YSwgbm9kZSk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuaGVpZ2h0IDwgbm9kZS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAvLyBzd2FwIHRyZWVzIGlmIGluc2VydGVkIG9uZSBpcyBiaWdnZXJcbiAgICAgICAgICAgICAgICB2YXIgdG1wTm9kZSA9IHRoaXMuZGF0YTtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBub2RlO1xuICAgICAgICAgICAgICAgIG5vZGUgPSB0bXBOb2RlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpbnNlcnQgdGhlIHNtYWxsIHRyZWUgaW50byB0aGUgbGFyZ2UgdHJlZSBhdCBhcHByb3ByaWF0ZSBsZXZlbFxuICAgICAgICAgICAgdGhpcy5faW5zZXJ0KG5vZGUsIHRoaXMuZGF0YS5oZWlnaHQgLSBub2RlLmhlaWdodCAtIDEsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIGluc2VydDogZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0pIHRoaXMuX2luc2VydChpdGVtLCB0aGlzLmRhdGEuaGVpZ2h0IC0gMSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBjbGVhcjogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRhdGEgPSBjcmVhdGVOb2RlKFtdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIHJlbW92ZTogZnVuY3Rpb24gKGl0ZW0sIGVxdWFsc0ZuKSB7XG4gICAgICAgIGlmICghaXRlbSkgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmRhdGEsXG4gICAgICAgICAgICBiYm94ID0gdGhpcy50b0JCb3goaXRlbSksXG4gICAgICAgICAgICBwYXRoID0gW10sXG4gICAgICAgICAgICBpbmRleGVzID0gW10sXG4gICAgICAgICAgICBpLCBwYXJlbnQsIGluZGV4LCBnb2luZ1VwO1xuXG4gICAgICAgIC8vIGRlcHRoLWZpcnN0IGl0ZXJhdGl2ZSB0cmVlIHRyYXZlcnNhbFxuICAgICAgICB3aGlsZSAobm9kZSB8fCBwYXRoLmxlbmd0aCkge1xuXG4gICAgICAgICAgICBpZiAoIW5vZGUpIHsgLy8gZ28gdXBcbiAgICAgICAgICAgICAgICBub2RlID0gcGF0aC5wb3AoKTtcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgaSA9IGluZGV4ZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZ29pbmdVcCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChub2RlLmxlYWYpIHsgLy8gY2hlY2sgY3VycmVudCBub2RlXG4gICAgICAgICAgICAgICAgaW5kZXggPSBmaW5kSXRlbShpdGVtLCBub2RlLmNoaWxkcmVuLCBlcXVhbHNGbik7XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGl0ZW0gZm91bmQsIHJlbW92ZSB0aGUgaXRlbSBhbmQgY29uZGVuc2UgdHJlZSB1cHdhcmRzXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgcGF0aC5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb25kZW5zZShwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWdvaW5nVXAgJiYgIW5vZGUubGVhZiAmJiBjb250YWlucyhub2RlLCBiYm94KSkgeyAvLyBnbyBkb3duXG4gICAgICAgICAgICAgICAgcGF0aC5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgIGluZGV4ZXMucHVzaChpKTtcbiAgICAgICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBub2RlO1xuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmNoaWxkcmVuWzBdO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmVudCkgeyAvLyBnbyByaWdodFxuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICBub2RlID0gcGFyZW50LmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIGdvaW5nVXAgPSBmYWxzZTtcblxuICAgICAgICAgICAgfSBlbHNlIG5vZGUgPSBudWxsOyAvLyBub3RoaW5nIGZvdW5kXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgdG9CQm94OiBmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXRlbTsgfSxcblxuICAgIGNvbXBhcmVNaW5YOiBjb21wYXJlTm9kZU1pblgsXG4gICAgY29tcGFyZU1pblk6IGNvbXBhcmVOb2RlTWluWSxcblxuICAgIHRvSlNPTjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5kYXRhOyB9LFxuXG4gICAgZnJvbUpTT046IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBfYWxsOiBmdW5jdGlvbiAobm9kZSwgcmVzdWx0KSB7XG4gICAgICAgIHZhciBub2Rlc1RvU2VhcmNoID0gW107XG4gICAgICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5sZWFmKSByZXN1bHQucHVzaC5hcHBseShyZXN1bHQsIG5vZGUuY2hpbGRyZW4pO1xuICAgICAgICAgICAgZWxzZSBub2Rlc1RvU2VhcmNoLnB1c2guYXBwbHkobm9kZXNUb1NlYXJjaCwgbm9kZS5jaGlsZHJlbik7XG5cbiAgICAgICAgICAgIG5vZGUgPSBub2Rlc1RvU2VhcmNoLnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcblxuICAgIF9idWlsZDogZnVuY3Rpb24gKGl0ZW1zLCBsZWZ0LCByaWdodCwgaGVpZ2h0KSB7XG5cbiAgICAgICAgdmFyIE4gPSByaWdodCAtIGxlZnQgKyAxLFxuICAgICAgICAgICAgTSA9IHRoaXMuX21heEVudHJpZXMsXG4gICAgICAgICAgICBub2RlO1xuXG4gICAgICAgIGlmIChOIDw9IE0pIHtcbiAgICAgICAgICAgIC8vIHJlYWNoZWQgbGVhZiBsZXZlbDsgcmV0dXJuIGxlYWZcbiAgICAgICAgICAgIG5vZGUgPSBjcmVhdGVOb2RlKGl0ZW1zLnNsaWNlKGxlZnQsIHJpZ2h0ICsgMSkpO1xuICAgICAgICAgICAgY2FsY0JCb3gobm9kZSwgdGhpcy50b0JCb3gpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWhlaWdodCkge1xuICAgICAgICAgICAgLy8gdGFyZ2V0IGhlaWdodCBvZiB0aGUgYnVsay1sb2FkZWQgdHJlZVxuICAgICAgICAgICAgaGVpZ2h0ID0gTWF0aC5jZWlsKE1hdGgubG9nKE4pIC8gTWF0aC5sb2coTSkpO1xuXG4gICAgICAgICAgICAvLyB0YXJnZXQgbnVtYmVyIG9mIHJvb3QgZW50cmllcyB0byBtYXhpbWl6ZSBzdG9yYWdlIHV0aWxpemF0aW9uXG4gICAgICAgICAgICBNID0gTWF0aC5jZWlsKE4gLyBNYXRoLnBvdyhNLCBoZWlnaHQgLSAxKSk7XG4gICAgICAgIH1cblxuICAgICAgICBub2RlID0gY3JlYXRlTm9kZShbXSk7XG4gICAgICAgIG5vZGUubGVhZiA9IGZhbHNlO1xuICAgICAgICBub2RlLmhlaWdodCA9IGhlaWdodDtcblxuICAgICAgICAvLyBzcGxpdCB0aGUgaXRlbXMgaW50byBNIG1vc3RseSBzcXVhcmUgdGlsZXNcblxuICAgICAgICB2YXIgTjIgPSBNYXRoLmNlaWwoTiAvIE0pLFxuICAgICAgICAgICAgTjEgPSBOMiAqIE1hdGguY2VpbChNYXRoLnNxcnQoTSkpLFxuICAgICAgICAgICAgaSwgaiwgcmlnaHQyLCByaWdodDM7XG5cbiAgICAgICAgbXVsdGlTZWxlY3QoaXRlbXMsIGxlZnQsIHJpZ2h0LCBOMSwgdGhpcy5jb21wYXJlTWluWCk7XG5cbiAgICAgICAgZm9yIChpID0gbGVmdDsgaSA8PSByaWdodDsgaSArPSBOMSkge1xuXG4gICAgICAgICAgICByaWdodDIgPSBNYXRoLm1pbihpICsgTjEgLSAxLCByaWdodCk7XG5cbiAgICAgICAgICAgIG11bHRpU2VsZWN0KGl0ZW1zLCBpLCByaWdodDIsIE4yLCB0aGlzLmNvbXBhcmVNaW5ZKTtcblxuICAgICAgICAgICAgZm9yIChqID0gaTsgaiA8PSByaWdodDI7IGogKz0gTjIpIHtcblxuICAgICAgICAgICAgICAgIHJpZ2h0MyA9IE1hdGgubWluKGogKyBOMiAtIDEsIHJpZ2h0Mik7XG5cbiAgICAgICAgICAgICAgICAvLyBwYWNrIGVhY2ggZW50cnkgcmVjdXJzaXZlbHlcbiAgICAgICAgICAgICAgICBub2RlLmNoaWxkcmVuLnB1c2godGhpcy5fYnVpbGQoaXRlbXMsIGosIHJpZ2h0MywgaGVpZ2h0IC0gMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY2FsY0JCb3gobm9kZSwgdGhpcy50b0JCb3gpO1xuXG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH0sXG5cbiAgICBfY2hvb3NlU3VidHJlZTogZnVuY3Rpb24gKGJib3gsIG5vZGUsIGxldmVsLCBwYXRoKSB7XG5cbiAgICAgICAgdmFyIGksIGxlbiwgY2hpbGQsIHRhcmdldE5vZGUsIGFyZWEsIGVubGFyZ2VtZW50LCBtaW5BcmVhLCBtaW5FbmxhcmdlbWVudDtcblxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgcGF0aC5wdXNoKG5vZGUpO1xuXG4gICAgICAgICAgICBpZiAobm9kZS5sZWFmIHx8IHBhdGgubGVuZ3RoIC0gMSA9PT0gbGV2ZWwpIGJyZWFrO1xuXG4gICAgICAgICAgICBtaW5BcmVhID0gbWluRW5sYXJnZW1lbnQgPSBJbmZpbml0eTtcblxuICAgICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICBhcmVhID0gYmJveEFyZWEoY2hpbGQpO1xuICAgICAgICAgICAgICAgIGVubGFyZ2VtZW50ID0gZW5sYXJnZWRBcmVhKGJib3gsIGNoaWxkKSAtIGFyZWE7XG5cbiAgICAgICAgICAgICAgICAvLyBjaG9vc2UgZW50cnkgd2l0aCB0aGUgbGVhc3QgYXJlYSBlbmxhcmdlbWVudFxuICAgICAgICAgICAgICAgIGlmIChlbmxhcmdlbWVudCA8IG1pbkVubGFyZ2VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIG1pbkVubGFyZ2VtZW50ID0gZW5sYXJnZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIG1pbkFyZWEgPSBhcmVhIDwgbWluQXJlYSA/IGFyZWEgOiBtaW5BcmVhO1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXROb2RlID0gY2hpbGQ7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVubGFyZ2VtZW50ID09PSBtaW5FbmxhcmdlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UgY2hvb3NlIG9uZSB3aXRoIHRoZSBzbWFsbGVzdCBhcmVhXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmVhIDwgbWluQXJlYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWluQXJlYSA9IGFyZWE7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXROb2RlID0gY2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5vZGUgPSB0YXJnZXROb2RlIHx8IG5vZGUuY2hpbGRyZW5bMF07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9LFxuXG4gICAgX2luc2VydDogZnVuY3Rpb24gKGl0ZW0sIGxldmVsLCBpc05vZGUpIHtcblxuICAgICAgICB2YXIgdG9CQm94ID0gdGhpcy50b0JCb3gsXG4gICAgICAgICAgICBiYm94ID0gaXNOb2RlID8gaXRlbSA6IHRvQkJveChpdGVtKSxcbiAgICAgICAgICAgIGluc2VydFBhdGggPSBbXTtcblxuICAgICAgICAvLyBmaW5kIHRoZSBiZXN0IG5vZGUgZm9yIGFjY29tbW9kYXRpbmcgdGhlIGl0ZW0sIHNhdmluZyBhbGwgbm9kZXMgYWxvbmcgdGhlIHBhdGggdG9vXG4gICAgICAgIHZhciBub2RlID0gdGhpcy5fY2hvb3NlU3VidHJlZShiYm94LCB0aGlzLmRhdGEsIGxldmVsLCBpbnNlcnRQYXRoKTtcblxuICAgICAgICAvLyBwdXQgdGhlIGl0ZW0gaW50byB0aGUgbm9kZVxuICAgICAgICBub2RlLmNoaWxkcmVuLnB1c2goaXRlbSk7XG4gICAgICAgIGV4dGVuZChub2RlLCBiYm94KTtcblxuICAgICAgICAvLyBzcGxpdCBvbiBub2RlIG92ZXJmbG93OyBwcm9wYWdhdGUgdXB3YXJkcyBpZiBuZWNlc3NhcnlcbiAgICAgICAgd2hpbGUgKGxldmVsID49IDApIHtcbiAgICAgICAgICAgIGlmIChpbnNlcnRQYXRoW2xldmVsXS5jaGlsZHJlbi5sZW5ndGggPiB0aGlzLl9tYXhFbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3BsaXQoaW5zZXJ0UGF0aCwgbGV2ZWwpO1xuICAgICAgICAgICAgICAgIGxldmVsLS07XG4gICAgICAgICAgICB9IGVsc2UgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGp1c3QgYmJveGVzIGFsb25nIHRoZSBpbnNlcnRpb24gcGF0aFxuICAgICAgICB0aGlzLl9hZGp1c3RQYXJlbnRCQm94ZXMoYmJveCwgaW5zZXJ0UGF0aCwgbGV2ZWwpO1xuICAgIH0sXG5cbiAgICAvLyBzcGxpdCBvdmVyZmxvd2VkIG5vZGUgaW50byB0d29cbiAgICBfc3BsaXQ6IGZ1bmN0aW9uIChpbnNlcnRQYXRoLCBsZXZlbCkge1xuXG4gICAgICAgIHZhciBub2RlID0gaW5zZXJ0UGF0aFtsZXZlbF0sXG4gICAgICAgICAgICBNID0gbm9kZS5jaGlsZHJlbi5sZW5ndGgsXG4gICAgICAgICAgICBtID0gdGhpcy5fbWluRW50cmllcztcblxuICAgICAgICB0aGlzLl9jaG9vc2VTcGxpdEF4aXMobm9kZSwgbSwgTSk7XG5cbiAgICAgICAgdmFyIHNwbGl0SW5kZXggPSB0aGlzLl9jaG9vc2VTcGxpdEluZGV4KG5vZGUsIG0sIE0pO1xuXG4gICAgICAgIHZhciBuZXdOb2RlID0gY3JlYXRlTm9kZShub2RlLmNoaWxkcmVuLnNwbGljZShzcGxpdEluZGV4LCBub2RlLmNoaWxkcmVuLmxlbmd0aCAtIHNwbGl0SW5kZXgpKTtcbiAgICAgICAgbmV3Tm9kZS5oZWlnaHQgPSBub2RlLmhlaWdodDtcbiAgICAgICAgbmV3Tm9kZS5sZWFmID0gbm9kZS5sZWFmO1xuXG4gICAgICAgIGNhbGNCQm94KG5vZGUsIHRoaXMudG9CQm94KTtcbiAgICAgICAgY2FsY0JCb3gobmV3Tm9kZSwgdGhpcy50b0JCb3gpO1xuXG4gICAgICAgIGlmIChsZXZlbCkgaW5zZXJ0UGF0aFtsZXZlbCAtIDFdLmNoaWxkcmVuLnB1c2gobmV3Tm9kZSk7XG4gICAgICAgIGVsc2UgdGhpcy5fc3BsaXRSb290KG5vZGUsIG5ld05vZGUpO1xuICAgIH0sXG5cbiAgICBfc3BsaXRSb290OiBmdW5jdGlvbiAobm9kZSwgbmV3Tm9kZSkge1xuICAgICAgICAvLyBzcGxpdCByb290IG5vZGVcbiAgICAgICAgdGhpcy5kYXRhID0gY3JlYXRlTm9kZShbbm9kZSwgbmV3Tm9kZV0pO1xuICAgICAgICB0aGlzLmRhdGEuaGVpZ2h0ID0gbm9kZS5oZWlnaHQgKyAxO1xuICAgICAgICB0aGlzLmRhdGEubGVhZiA9IGZhbHNlO1xuICAgICAgICBjYWxjQkJveCh0aGlzLmRhdGEsIHRoaXMudG9CQm94KTtcbiAgICB9LFxuXG4gICAgX2Nob29zZVNwbGl0SW5kZXg6IGZ1bmN0aW9uIChub2RlLCBtLCBNKSB7XG5cbiAgICAgICAgdmFyIGksIGJib3gxLCBiYm94Miwgb3ZlcmxhcCwgYXJlYSwgbWluT3ZlcmxhcCwgbWluQXJlYSwgaW5kZXg7XG5cbiAgICAgICAgbWluT3ZlcmxhcCA9IG1pbkFyZWEgPSBJbmZpbml0eTtcblxuICAgICAgICBmb3IgKGkgPSBtOyBpIDw9IE0gLSBtOyBpKyspIHtcbiAgICAgICAgICAgIGJib3gxID0gZGlzdEJCb3gobm9kZSwgMCwgaSwgdGhpcy50b0JCb3gpO1xuICAgICAgICAgICAgYmJveDIgPSBkaXN0QkJveChub2RlLCBpLCBNLCB0aGlzLnRvQkJveCk7XG5cbiAgICAgICAgICAgIG92ZXJsYXAgPSBpbnRlcnNlY3Rpb25BcmVhKGJib3gxLCBiYm94Mik7XG4gICAgICAgICAgICBhcmVhID0gYmJveEFyZWEoYmJveDEpICsgYmJveEFyZWEoYmJveDIpO1xuXG4gICAgICAgICAgICAvLyBjaG9vc2UgZGlzdHJpYnV0aW9uIHdpdGggbWluaW11bSBvdmVybGFwXG4gICAgICAgICAgICBpZiAob3ZlcmxhcCA8IG1pbk92ZXJsYXApIHtcbiAgICAgICAgICAgICAgICBtaW5PdmVybGFwID0gb3ZlcmxhcDtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG5cbiAgICAgICAgICAgICAgICBtaW5BcmVhID0gYXJlYSA8IG1pbkFyZWEgPyBhcmVhIDogbWluQXJlYTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChvdmVybGFwID09PSBtaW5PdmVybGFwKSB7XG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIGNob29zZSBkaXN0cmlidXRpb24gd2l0aCBtaW5pbXVtIGFyZWFcbiAgICAgICAgICAgICAgICBpZiAoYXJlYSA8IG1pbkFyZWEpIHtcbiAgICAgICAgICAgICAgICAgICAgbWluQXJlYSA9IGFyZWE7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfSxcblxuICAgIC8vIHNvcnRzIG5vZGUgY2hpbGRyZW4gYnkgdGhlIGJlc3QgYXhpcyBmb3Igc3BsaXRcbiAgICBfY2hvb3NlU3BsaXRBeGlzOiBmdW5jdGlvbiAobm9kZSwgbSwgTSkge1xuXG4gICAgICAgIHZhciBjb21wYXJlTWluWCA9IG5vZGUubGVhZiA/IHRoaXMuY29tcGFyZU1pblggOiBjb21wYXJlTm9kZU1pblgsXG4gICAgICAgICAgICBjb21wYXJlTWluWSA9IG5vZGUubGVhZiA/IHRoaXMuY29tcGFyZU1pblkgOiBjb21wYXJlTm9kZU1pblksXG4gICAgICAgICAgICB4TWFyZ2luID0gdGhpcy5fYWxsRGlzdE1hcmdpbihub2RlLCBtLCBNLCBjb21wYXJlTWluWCksXG4gICAgICAgICAgICB5TWFyZ2luID0gdGhpcy5fYWxsRGlzdE1hcmdpbihub2RlLCBtLCBNLCBjb21wYXJlTWluWSk7XG5cbiAgICAgICAgLy8gaWYgdG90YWwgZGlzdHJpYnV0aW9ucyBtYXJnaW4gdmFsdWUgaXMgbWluaW1hbCBmb3IgeCwgc29ydCBieSBtaW5YLFxuICAgICAgICAvLyBvdGhlcndpc2UgaXQncyBhbHJlYWR5IHNvcnRlZCBieSBtaW5ZXG4gICAgICAgIGlmICh4TWFyZ2luIDwgeU1hcmdpbikgbm9kZS5jaGlsZHJlbi5zb3J0KGNvbXBhcmVNaW5YKTtcbiAgICB9LFxuXG4gICAgLy8gdG90YWwgbWFyZ2luIG9mIGFsbCBwb3NzaWJsZSBzcGxpdCBkaXN0cmlidXRpb25zIHdoZXJlIGVhY2ggbm9kZSBpcyBhdCBsZWFzdCBtIGZ1bGxcbiAgICBfYWxsRGlzdE1hcmdpbjogZnVuY3Rpb24gKG5vZGUsIG0sIE0sIGNvbXBhcmUpIHtcblxuICAgICAgICBub2RlLmNoaWxkcmVuLnNvcnQoY29tcGFyZSk7XG5cbiAgICAgICAgdmFyIHRvQkJveCA9IHRoaXMudG9CQm94LFxuICAgICAgICAgICAgbGVmdEJCb3ggPSBkaXN0QkJveChub2RlLCAwLCBtLCB0b0JCb3gpLFxuICAgICAgICAgICAgcmlnaHRCQm94ID0gZGlzdEJCb3gobm9kZSwgTSAtIG0sIE0sIHRvQkJveCksXG4gICAgICAgICAgICBtYXJnaW4gPSBiYm94TWFyZ2luKGxlZnRCQm94KSArIGJib3hNYXJnaW4ocmlnaHRCQm94KSxcbiAgICAgICAgICAgIGksIGNoaWxkO1xuXG4gICAgICAgIGZvciAoaSA9IG07IGkgPCBNIC0gbTsgaSsrKSB7XG4gICAgICAgICAgICBjaGlsZCA9IG5vZGUuY2hpbGRyZW5baV07XG4gICAgICAgICAgICBleHRlbmQobGVmdEJCb3gsIG5vZGUubGVhZiA/IHRvQkJveChjaGlsZCkgOiBjaGlsZCk7XG4gICAgICAgICAgICBtYXJnaW4gKz0gYmJveE1hcmdpbihsZWZ0QkJveCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGkgPSBNIC0gbSAtIDE7IGkgPj0gbTsgaS0tKSB7XG4gICAgICAgICAgICBjaGlsZCA9IG5vZGUuY2hpbGRyZW5baV07XG4gICAgICAgICAgICBleHRlbmQocmlnaHRCQm94LCBub2RlLmxlYWYgPyB0b0JCb3goY2hpbGQpIDogY2hpbGQpO1xuICAgICAgICAgICAgbWFyZ2luICs9IGJib3hNYXJnaW4ocmlnaHRCQm94KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXJnaW47XG4gICAgfSxcblxuICAgIF9hZGp1c3RQYXJlbnRCQm94ZXM6IGZ1bmN0aW9uIChiYm94LCBwYXRoLCBsZXZlbCkge1xuICAgICAgICAvLyBhZGp1c3QgYmJveGVzIGFsb25nIHRoZSBnaXZlbiB0cmVlIHBhdGhcbiAgICAgICAgZm9yICh2YXIgaSA9IGxldmVsOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgZXh0ZW5kKHBhdGhbaV0sIGJib3gpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9jb25kZW5zZTogZnVuY3Rpb24gKHBhdGgpIHtcbiAgICAgICAgLy8gZ28gdGhyb3VnaCB0aGUgcGF0aCwgcmVtb3ZpbmcgZW1wdHkgbm9kZXMgYW5kIHVwZGF0aW5nIGJib3hlc1xuICAgICAgICBmb3IgKHZhciBpID0gcGF0aC5sZW5ndGggLSAxLCBzaWJsaW5nczsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGlmIChwYXRoW2ldLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBzaWJsaW5ncyA9IHBhdGhbaSAtIDFdLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICBzaWJsaW5ncy5zcGxpY2Uoc2libGluZ3MuaW5kZXhPZihwYXRoW2ldKSwgMSk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgdGhpcy5jbGVhcigpO1xuXG4gICAgICAgICAgICB9IGVsc2UgY2FsY0JCb3gocGF0aFtpXSwgdGhpcy50b0JCb3gpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9pbml0Rm9ybWF0OiBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICAgIC8vIGRhdGEgZm9ybWF0IChtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZIGFjY2Vzc29ycylcblxuICAgICAgICAvLyB1c2VzIGV2YWwtdHlwZSBmdW5jdGlvbiBjb21waWxhdGlvbiBpbnN0ZWFkIG9mIGp1c3QgYWNjZXB0aW5nIGEgdG9CQm94IGZ1bmN0aW9uXG4gICAgICAgIC8vIGJlY2F1c2UgdGhlIGFsZ29yaXRobXMgYXJlIHZlcnkgc2Vuc2l0aXZlIHRvIHNvcnRpbmcgZnVuY3Rpb25zIHBlcmZvcm1hbmNlLFxuICAgICAgICAvLyBzbyB0aGV5IHNob3VsZCBiZSBkZWFkIHNpbXBsZSBhbmQgd2l0aG91dCBpbm5lciBjYWxsc1xuXG4gICAgICAgIHZhciBjb21wYXJlQXJyID0gWydyZXR1cm4gYScsICcgLSBiJywgJzsnXTtcblxuICAgICAgICB0aGlzLmNvbXBhcmVNaW5YID0gbmV3IEZ1bmN0aW9uKCdhJywgJ2InLCBjb21wYXJlQXJyLmpvaW4oZm9ybWF0WzBdKSk7XG4gICAgICAgIHRoaXMuY29tcGFyZU1pblkgPSBuZXcgRnVuY3Rpb24oJ2EnLCAnYicsIGNvbXBhcmVBcnIuam9pbihmb3JtYXRbMV0pKTtcblxuICAgICAgICB0aGlzLnRvQkJveCA9IG5ldyBGdW5jdGlvbignYScsXG4gICAgICAgICAgICAncmV0dXJuIHttaW5YOiBhJyArIGZvcm1hdFswXSArXG4gICAgICAgICAgICAnLCBtaW5ZOiBhJyArIGZvcm1hdFsxXSArXG4gICAgICAgICAgICAnLCBtYXhYOiBhJyArIGZvcm1hdFsyXSArXG4gICAgICAgICAgICAnLCBtYXhZOiBhJyArIGZvcm1hdFszXSArICd9OycpO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIGZpbmRJdGVtKGl0ZW0sIGl0ZW1zLCBlcXVhbHNGbikge1xuICAgIGlmICghZXF1YWxzRm4pIHJldHVybiBpdGVtcy5pbmRleE9mKGl0ZW0pO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZXF1YWxzRm4oaXRlbSwgaXRlbXNbaV0pKSByZXR1cm4gaTtcbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuXG4vLyBjYWxjdWxhdGUgbm9kZSdzIGJib3ggZnJvbSBiYm94ZXMgb2YgaXRzIGNoaWxkcmVuXG5mdW5jdGlvbiBjYWxjQkJveChub2RlLCB0b0JCb3gpIHtcbiAgICBkaXN0QkJveChub2RlLCAwLCBub2RlLmNoaWxkcmVuLmxlbmd0aCwgdG9CQm94LCBub2RlKTtcbn1cblxuLy8gbWluIGJvdW5kaW5nIHJlY3RhbmdsZSBvZiBub2RlIGNoaWxkcmVuIGZyb20gayB0byBwLTFcbmZ1bmN0aW9uIGRpc3RCQm94KG5vZGUsIGssIHAsIHRvQkJveCwgZGVzdE5vZGUpIHtcbiAgICBpZiAoIWRlc3ROb2RlKSBkZXN0Tm9kZSA9IGNyZWF0ZU5vZGUobnVsbCk7XG4gICAgZGVzdE5vZGUubWluWCA9IEluZmluaXR5O1xuICAgIGRlc3ROb2RlLm1pblkgPSBJbmZpbml0eTtcbiAgICBkZXN0Tm9kZS5tYXhYID0gLUluZmluaXR5O1xuICAgIGRlc3ROb2RlLm1heFkgPSAtSW5maW5pdHk7XG5cbiAgICBmb3IgKHZhciBpID0gaywgY2hpbGQ7IGkgPCBwOyBpKyspIHtcbiAgICAgICAgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2ldO1xuICAgICAgICBleHRlbmQoZGVzdE5vZGUsIG5vZGUubGVhZiA/IHRvQkJveChjaGlsZCkgOiBjaGlsZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlc3ROb2RlO1xufVxuXG5mdW5jdGlvbiBleHRlbmQoYSwgYikge1xuICAgIGEubWluWCA9IE1hdGgubWluKGEubWluWCwgYi5taW5YKTtcbiAgICBhLm1pblkgPSBNYXRoLm1pbihhLm1pblksIGIubWluWSk7XG4gICAgYS5tYXhYID0gTWF0aC5tYXgoYS5tYXhYLCBiLm1heFgpO1xuICAgIGEubWF4WSA9IE1hdGgubWF4KGEubWF4WSwgYi5tYXhZKTtcbiAgICByZXR1cm4gYTtcbn1cblxuZnVuY3Rpb24gY29tcGFyZU5vZGVNaW5YKGEsIGIpIHsgcmV0dXJuIGEubWluWCAtIGIubWluWDsgfVxuZnVuY3Rpb24gY29tcGFyZU5vZGVNaW5ZKGEsIGIpIHsgcmV0dXJuIGEubWluWSAtIGIubWluWTsgfVxuXG5mdW5jdGlvbiBiYm94QXJlYShhKSAgIHsgcmV0dXJuIChhLm1heFggLSBhLm1pblgpICogKGEubWF4WSAtIGEubWluWSk7IH1cbmZ1bmN0aW9uIGJib3hNYXJnaW4oYSkgeyByZXR1cm4gKGEubWF4WCAtIGEubWluWCkgKyAoYS5tYXhZIC0gYS5taW5ZKTsgfVxuXG5mdW5jdGlvbiBlbmxhcmdlZEFyZWEoYSwgYikge1xuICAgIHJldHVybiAoTWF0aC5tYXgoYi5tYXhYLCBhLm1heFgpIC0gTWF0aC5taW4oYi5taW5YLCBhLm1pblgpKSAqXG4gICAgICAgICAgIChNYXRoLm1heChiLm1heFksIGEubWF4WSkgLSBNYXRoLm1pbihiLm1pblksIGEubWluWSkpO1xufVxuXG5mdW5jdGlvbiBpbnRlcnNlY3Rpb25BcmVhKGEsIGIpIHtcbiAgICB2YXIgbWluWCA9IE1hdGgubWF4KGEubWluWCwgYi5taW5YKSxcbiAgICAgICAgbWluWSA9IE1hdGgubWF4KGEubWluWSwgYi5taW5ZKSxcbiAgICAgICAgbWF4WCA9IE1hdGgubWluKGEubWF4WCwgYi5tYXhYKSxcbiAgICAgICAgbWF4WSA9IE1hdGgubWluKGEubWF4WSwgYi5tYXhZKTtcblxuICAgIHJldHVybiBNYXRoLm1heCgwLCBtYXhYIC0gbWluWCkgKlxuICAgICAgICAgICBNYXRoLm1heCgwLCBtYXhZIC0gbWluWSk7XG59XG5cbmZ1bmN0aW9uIGNvbnRhaW5zKGEsIGIpIHtcbiAgICByZXR1cm4gYS5taW5YIDw9IGIubWluWCAmJlxuICAgICAgICAgICBhLm1pblkgPD0gYi5taW5ZICYmXG4gICAgICAgICAgIGIubWF4WCA8PSBhLm1heFggJiZcbiAgICAgICAgICAgYi5tYXhZIDw9IGEubWF4WTtcbn1cblxuZnVuY3Rpb24gaW50ZXJzZWN0cyhhLCBiKSB7XG4gICAgcmV0dXJuIGIubWluWCA8PSBhLm1heFggJiZcbiAgICAgICAgICAgYi5taW5ZIDw9IGEubWF4WSAmJlxuICAgICAgICAgICBiLm1heFggPj0gYS5taW5YICYmXG4gICAgICAgICAgIGIubWF4WSA+PSBhLm1pblk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU5vZGUoY2hpbGRyZW4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW4sXG4gICAgICAgIGhlaWdodDogMSxcbiAgICAgICAgbGVhZjogdHJ1ZSxcbiAgICAgICAgbWluWDogSW5maW5pdHksXG4gICAgICAgIG1pblk6IEluZmluaXR5LFxuICAgICAgICBtYXhYOiAtSW5maW5pdHksXG4gICAgICAgIG1heFk6IC1JbmZpbml0eVxuICAgIH07XG59XG5cbi8vIHNvcnQgYW4gYXJyYXkgc28gdGhhdCBpdGVtcyBjb21lIGluIGdyb3VwcyBvZiBuIHVuc29ydGVkIGl0ZW1zLCB3aXRoIGdyb3VwcyBzb3J0ZWQgYmV0d2VlbiBlYWNoIG90aGVyO1xuLy8gY29tYmluZXMgc2VsZWN0aW9uIGFsZ29yaXRobSB3aXRoIGJpbmFyeSBkaXZpZGUgJiBjb25xdWVyIGFwcHJvYWNoXG5cbmZ1bmN0aW9uIG11bHRpU2VsZWN0KGFyciwgbGVmdCwgcmlnaHQsIG4sIGNvbXBhcmUpIHtcbiAgICB2YXIgc3RhY2sgPSBbbGVmdCwgcmlnaHRdLFxuICAgICAgICBtaWQ7XG5cbiAgICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgICAgIHJpZ2h0ID0gc3RhY2sucG9wKCk7XG4gICAgICAgIGxlZnQgPSBzdGFjay5wb3AoKTtcblxuICAgICAgICBpZiAocmlnaHQgLSBsZWZ0IDw9IG4pIGNvbnRpbnVlO1xuXG4gICAgICAgIG1pZCA9IGxlZnQgKyBNYXRoLmNlaWwoKHJpZ2h0IC0gbGVmdCkgLyBuIC8gMikgKiBuO1xuICAgICAgICBxdWlja3NlbGVjdChhcnIsIG1pZCwgbGVmdCwgcmlnaHQsIGNvbXBhcmUpO1xuXG4gICAgICAgIHN0YWNrLnB1c2gobGVmdCwgbWlkLCBtaWQsIHJpZ2h0KTtcbiAgICB9XG59XG4iLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHR0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG5cdChnbG9iYWwucXVpY2tzZWxlY3QgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIHF1aWNrc2VsZWN0KGFyciwgaywgbGVmdCwgcmlnaHQsIGNvbXBhcmUpIHtcbiAgICBxdWlja3NlbGVjdFN0ZXAoYXJyLCBrLCBsZWZ0IHx8IDAsIHJpZ2h0IHx8IChhcnIubGVuZ3RoIC0gMSksIGNvbXBhcmUgfHwgZGVmYXVsdENvbXBhcmUpO1xufVxuXG5mdW5jdGlvbiBxdWlja3NlbGVjdFN0ZXAoYXJyLCBrLCBsZWZ0LCByaWdodCwgY29tcGFyZSkge1xuXG4gICAgd2hpbGUgKHJpZ2h0ID4gbGVmdCkge1xuICAgICAgICBpZiAocmlnaHQgLSBsZWZ0ID4gNjAwKSB7XG4gICAgICAgICAgICB2YXIgbiA9IHJpZ2h0IC0gbGVmdCArIDE7XG4gICAgICAgICAgICB2YXIgbSA9IGsgLSBsZWZ0ICsgMTtcbiAgICAgICAgICAgIHZhciB6ID0gTWF0aC5sb2cobik7XG4gICAgICAgICAgICB2YXIgcyA9IDAuNSAqIE1hdGguZXhwKDIgKiB6IC8gMyk7XG4gICAgICAgICAgICB2YXIgc2QgPSAwLjUgKiBNYXRoLnNxcnQoeiAqIHMgKiAobiAtIHMpIC8gbikgKiAobSAtIG4gLyAyIDwgMCA/IC0xIDogMSk7XG4gICAgICAgICAgICB2YXIgbmV3TGVmdCA9IE1hdGgubWF4KGxlZnQsIE1hdGguZmxvb3IoayAtIG0gKiBzIC8gbiArIHNkKSk7XG4gICAgICAgICAgICB2YXIgbmV3UmlnaHQgPSBNYXRoLm1pbihyaWdodCwgTWF0aC5mbG9vcihrICsgKG4gLSBtKSAqIHMgLyBuICsgc2QpKTtcbiAgICAgICAgICAgIHF1aWNrc2VsZWN0U3RlcChhcnIsIGssIG5ld0xlZnQsIG5ld1JpZ2h0LCBjb21wYXJlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0ID0gYXJyW2tdO1xuICAgICAgICB2YXIgaSA9IGxlZnQ7XG4gICAgICAgIHZhciBqID0gcmlnaHQ7XG5cbiAgICAgICAgc3dhcChhcnIsIGxlZnQsIGspO1xuICAgICAgICBpZiAoY29tcGFyZShhcnJbcmlnaHRdLCB0KSA+IDApIHN3YXAoYXJyLCBsZWZ0LCByaWdodCk7XG5cbiAgICAgICAgd2hpbGUgKGkgPCBqKSB7XG4gICAgICAgICAgICBzd2FwKGFyciwgaSwgaik7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgICAgICBqLS07XG4gICAgICAgICAgICB3aGlsZSAoY29tcGFyZShhcnJbaV0sIHQpIDwgMCkgaSsrO1xuICAgICAgICAgICAgd2hpbGUgKGNvbXBhcmUoYXJyW2pdLCB0KSA+IDApIGotLTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb21wYXJlKGFycltsZWZ0XSwgdCkgPT09IDApIHN3YXAoYXJyLCBsZWZ0LCBqKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBqKys7XG4gICAgICAgICAgICBzd2FwKGFyciwgaiwgcmlnaHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGogPD0gaykgbGVmdCA9IGogKyAxO1xuICAgICAgICBpZiAoayA8PSBqKSByaWdodCA9IGogLSAxO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc3dhcChhcnIsIGksIGopIHtcbiAgICB2YXIgdG1wID0gYXJyW2ldO1xuICAgIGFycltpXSA9IGFycltqXTtcbiAgICBhcnJbal0gPSB0bXA7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRDb21wYXJlKGEsIGIpIHtcbiAgICByZXR1cm4gYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IDA7XG59XG5cbnJldHVybiBxdWlja3NlbGVjdDtcblxufSkpKTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC91dGlsXG4gKi9cblxuLyoqXG4gKiBAcmV0dXJuIHs/fSBBbnkgcmV0dXJuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWJzdHJhY3QoKSB7XG4gIHJldHVybiAvKiogQHR5cGUgez99ICovICgoZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmltcGxlbWVudGVkIGFic3RyYWN0IG1ldGhvZC4nKTtcbiAgfSkoKSk7XG59XG5cbi8qKlxuICogSW5oZXJpdCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgZnJvbSBvbmUgY29uc3RydWN0b3IgaW50byBhbm90aGVyLlxuICpcbiAqIFVzYWdlOlxuICpcbiAqICAgICBmdW5jdGlvbiBQYXJlbnRDbGFzcyhhLCBiKSB7IH1cbiAqICAgICBQYXJlbnRDbGFzcy5wcm90b3R5cGUuZm9vID0gZnVuY3Rpb24oYSkgeyB9XG4gKlxuICogICAgIGZ1bmN0aW9uIENoaWxkQ2xhc3MoYSwgYiwgYykge1xuICogICAgICAgLy8gQ2FsbCBwYXJlbnQgY29uc3RydWN0b3JcbiAqICAgICAgIFBhcmVudENsYXNzLmNhbGwodGhpcywgYSwgYik7XG4gKiAgICAgfVxuICogICAgIGluaGVyaXRzKENoaWxkQ2xhc3MsIFBhcmVudENsYXNzKTtcbiAqXG4gKiAgICAgdmFyIGNoaWxkID0gbmV3IENoaWxkQ2xhc3MoJ2EnLCAnYicsICdzZWUnKTtcbiAqICAgICBjaGlsZC5mb28oKTsgLy8gVGhpcyB3b3Jrcy5cbiAqXG4gKiBAcGFyYW0geyFGdW5jdGlvbn0gY2hpbGRDdG9yIENoaWxkIGNvbnN0cnVjdG9yLlxuICogQHBhcmFtIHshRnVuY3Rpb259IHBhcmVudEN0b3IgUGFyZW50IGNvbnN0cnVjdG9yLlxuICogQGZ1bmN0aW9uIG1vZHVsZTpvbC5pbmhlcml0c1xuICogQGRlcHJlY2F0ZWRcbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluaGVyaXRzKGNoaWxkQ3RvciwgcGFyZW50Q3Rvcikge1xuICBjaGlsZEN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRDdG9yLnByb3RvdHlwZSk7XG4gIGNoaWxkQ3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjaGlsZEN0b3I7XG59XG5cbi8qKlxuICogQ291bnRlciBmb3IgZ2V0VWlkLlxuICogQHR5cGUge251bWJlcn1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciB1aWRDb3VudGVyXyA9IDA7XG5cbi8qKlxuICogR2V0cyBhIHVuaXF1ZSBJRCBmb3IgYW4gb2JqZWN0LiBUaGlzIG11dGF0ZXMgdGhlIG9iamVjdCBzbyB0aGF0IGZ1cnRoZXIgY2FsbHNcbiAqIHdpdGggdGhlIHNhbWUgb2JqZWN0IGFzIGEgcGFyYW1ldGVyIHJldHVybnMgdGhlIHNhbWUgdmFsdWUuIFVuaXF1ZSBJRHMgYXJlIGdlbmVyYXRlZFxuICogYXMgYSBzdHJpY3RseSBpbmNyZWFzaW5nIHNlcXVlbmNlLiBBZGFwdGVkIGZyb20gZ29vZy5nZXRVaWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGdldCB0aGUgdW5pcXVlIElEIGZvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHVuaXF1ZSBJRCBmb3IgdGhlIG9iamVjdC5cbiAqIEBmdW5jdGlvbiBtb2R1bGU6b2wuZ2V0VWlkXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVaWQob2JqKSB7XG4gIHJldHVybiBvYmoub2xfdWlkIHx8IChvYmoub2xfdWlkID0gU3RyaW5nKCsrdWlkQ291bnRlcl8pKTtcbn1cblxuLyoqXG4gKiBPcGVuTGF5ZXJzIHZlcnNpb24uXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIFZFUlNJT04gPSAnNS4zLjAnO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlsLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9Bc3NlcnRpb25FcnJvclxuICovXG5pbXBvcnQge1ZFUlNJT059IGZyb20gJy4vdXRpbC5qcyc7XG5cbi8qKlxuICogRXJyb3Igb2JqZWN0IHRocm93biB3aGVuIGFuIGFzc2VydGlvbiBmYWlsZWQuIFRoaXMgaXMgYW4gRUNNQS0yNjIgRXJyb3IsXG4gKiBleHRlbmRlZCB3aXRoIGEgYGNvZGVgIHByb3BlcnR5LlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yLlxuICovXG52YXIgQXNzZXJ0aW9uRXJyb3IgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFcnJvcikge1xuICBmdW5jdGlvbiBBc3NlcnRpb25FcnJvcihjb2RlKSB7XG4gICAgdmFyIHBhdGggPSBWRVJTSU9OID09PSAnbGF0ZXN0JyA/IFZFUlNJT04gOiAndicgKyBWRVJTSU9OLnNwbGl0KCctJylbMF07XG4gICAgdmFyIG1lc3NhZ2UgPSAnQXNzZXJ0aW9uIGZhaWxlZC4gU2VlIGh0dHBzOi8vb3BlbmxheWVycy5vcmcvZW4vJyArIHBhdGggK1xuICAgICcvZG9jL2Vycm9ycy8jJyArIGNvZGUgKyAnIGZvciBkZXRhaWxzLic7XG5cbiAgICBFcnJvci5jYWxsKHRoaXMsIG1lc3NhZ2UpO1xuXG4gICAgLyoqXG4gICAgICogRXJyb3IgY29kZS4gVGhlIG1lYW5pbmcgb2YgdGhlIGNvZGUgY2FuIGJlIGZvdW5kIG9uXG4gICAgICogaHR0cHM6Ly9vcGVubGF5ZXJzLm9yZy9lbi9sYXRlc3QvZG9jL2Vycm9ycy8gKHJlcGxhY2UgYGxhdGVzdGAgd2l0aFxuICAgICAqIHRoZSB2ZXJzaW9uIGZvdW5kIGluIHRoZSBPcGVuTGF5ZXJzIHNjcmlwdCdzIGhlYWRlciBjb21tZW50IGlmIGEgdmVyc2lvblxuICAgICAqIG90aGVyIHRoYW4gdGhlIGxhdGVzdCBpcyB1c2VkKS5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmNvZGUgPSBjb2RlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLm5hbWUgPSAnQXNzZXJ0aW9uRXJyb3InO1xuXG4gICAgLy8gUmUtYXNzaWduIG1lc3NhZ2UsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vUmljaC1IYXJyaXMvYnVibGUvaXNzdWVzLzQwXG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgfVxuXG4gIGlmICggRXJyb3IgKSBBc3NlcnRpb25FcnJvci5fX3Byb3RvX18gPSBFcnJvcjtcbiAgQXNzZXJ0aW9uRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXJyb3IgJiYgRXJyb3IucHJvdG90eXBlICk7XG4gIEFzc2VydGlvbkVycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFzc2VydGlvbkVycm9yO1xuXG4gIHJldHVybiBBc3NlcnRpb25FcnJvcjtcbn0oRXJyb3IpKTtcblxuZXhwb3J0IGRlZmF1bHQgQXNzZXJ0aW9uRXJyb3I7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFzc2VydGlvbkVycm9yLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9Db2xsZWN0aW9uRXZlbnRUeXBlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiBhbiBpdGVtIGlzIGFkZGVkIHRvIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL0NvbGxlY3Rpb24uQ29sbGVjdGlvbkV2ZW50I2FkZFxuICAgKiBAYXBpXG4gICAqL1xuICBBREQ6ICdhZGQnLFxuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gYW4gaXRlbSBpcyByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAqIEBldmVudCBtb2R1bGU6b2wvQ29sbGVjdGlvbi5Db2xsZWN0aW9uRXZlbnQjcmVtb3ZlXG4gICAqIEBhcGlcbiAgICovXG4gIFJFTU9WRTogJ3JlbW92ZSdcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbGxlY3Rpb25FdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL09iamVjdEV2ZW50VHlwZVxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gYSBwcm9wZXJ0eSBpcyBjaGFuZ2VkLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL09iamVjdC5PYmplY3RFdmVudCNwcm9wZXJ0eWNoYW5nZVxuICAgKiBAYXBpXG4gICAqL1xuICBQUk9QRVJUWUNIQU5HRTogJ3Byb3BlcnR5Y2hhbmdlJ1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JqZWN0RXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9vYmpcbiAqL1xuXG5cbi8qKlxuICogUG9seWZpbGwgZm9yIE9iamVjdC5hc3NpZ24oKS4gIEFzc2lnbnMgZW51bWVyYWJsZSBhbmQgb3duIHByb3BlcnRpZXMgZnJvbVxuICogb25lIG9yIG1vcmUgc291cmNlIG9iamVjdHMgdG8gYSB0YXJnZXQgb2JqZWN0LlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ24uXG4gKlxuICogQHBhcmFtIHshT2JqZWN0fSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3QuXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gdmFyX3NvdXJjZXMgVGhlIHNvdXJjZSBvYmplY3QocykuXG4gKiBAcmV0dXJuIHshT2JqZWN0fSBUaGUgbW9kaWZpZWQgdGFyZ2V0IG9iamVjdC5cbiAqL1xuZXhwb3J0IHZhciBhc3NpZ24gPSAodHlwZW9mIE9iamVjdC5hc3NpZ24gPT09ICdmdW5jdGlvbicpID8gT2JqZWN0LmFzc2lnbiA6IGZ1bmN0aW9uKHRhcmdldCwgdmFyX3NvdXJjZXMpIHtcbiAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzO1xuXG4gIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCB0YXJnZXQgPT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgfVxuXG4gIHZhciBvdXRwdXQgPSBPYmplY3QodGFyZ2V0KTtcbiAgZm9yICh2YXIgaSA9IDEsIGlpID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzJDFbaV07XG4gICAgaWYgKHNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHNvdXJjZSAhPT0gbnVsbCkge1xuICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBvdXRwdXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59O1xuXG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgcHJvcGVydGllcyBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjbGVhci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKG9iamVjdCkge1xuICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBvYmplY3QpIHtcbiAgICBkZWxldGUgb2JqZWN0W3Byb3BlcnR5XTtcbiAgfVxufVxuXG5cbi8qKlxuICogR2V0IGFuIGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcyBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0PEssVj59IG9iamVjdCBUaGUgb2JqZWN0IGZyb20gd2hpY2ggdG8gZ2V0IHRoZSB2YWx1ZXMuXG4gKiBAcmV0dXJuIHshQXJyYXk8Vj59IFRoZSBwcm9wZXJ0eSB2YWx1ZXMuXG4gKiBAdGVtcGxhdGUgSyxWXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRWYWx1ZXMob2JqZWN0KSB7XG4gIHZhciB2YWx1ZXMgPSBbXTtcbiAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqZWN0KSB7XG4gICAgdmFsdWVzLnB1c2gob2JqZWN0W3Byb3BlcnR5XSk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlcztcbn1cblxuXG4vKipcbiAqIERldGVybWluZSBpZiBhbiBvYmplY3QgaGFzIGFueSBwcm9wZXJ0aWVzLlxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNoZWNrLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIG9iamVjdCBpcyBlbXB0eS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHkob2JqZWN0KSB7XG4gIHZhciBwcm9wZXJ0eTtcbiAgZm9yIChwcm9wZXJ0eSBpbiBvYmplY3QpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuICFwcm9wZXJ0eTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JqLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHNcbiAqL1xuaW1wb3J0IHtjbGVhcn0gZnJvbSAnLi9vYmouanMnO1xuXG5cbi8qKlxuICogS2V5IHRvIHVzZSB3aXRoIHtAbGluayBtb2R1bGU6b2wvT2JzZXJ2YWJsZX5PYnNlcnZhYmxlI3VuQnlLZXl9LlxuICogQHR5cGVkZWYge09iamVjdH0gRXZlbnRzS2V5XG4gKiBAcHJvcGVydHkge09iamVjdH0gW2JpbmRUb11cbiAqIEBwcm9wZXJ0eSB7TGlzdGVuZXJGdW5jdGlvbn0gW2JvdW5kTGlzdGVuZXJdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGNhbGxPbmNlXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2RlbGV0ZUluZGV4XVxuICogQHByb3BlcnR5IHtMaXN0ZW5lckZ1bmN0aW9ufSBsaXN0ZW5lclxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuRXZlbnRUYXJnZXRMaWtlfSB0YXJnZXRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlXG4gKiBAYXBpXG4gKi9cblxuXG4vKipcbiAqIExpc3RlbmVyIGZ1bmN0aW9uLiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIGFuIGV2ZW50IG9iamVjdCBhcyBhcmd1bWVudC5cbiAqIFdoZW4gdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYCwgZXZlbnQgcHJvcGFnYXRpb24gd2lsbCBzdG9wLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCkpOiAodm9pZHxib29sZWFuKX0gTGlzdGVuZXJGdW5jdGlvblxuICogQGFwaVxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0ge0V2ZW50c0tleX0gbGlzdGVuZXJPYmogTGlzdGVuZXIgb2JqZWN0LlxuICogQHJldHVybiB7TGlzdGVuZXJGdW5jdGlvbn0gQm91bmQgbGlzdGVuZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiaW5kTGlzdGVuZXIobGlzdGVuZXJPYmopIHtcbiAgdmFyIGJvdW5kTGlzdGVuZXIgPSBmdW5jdGlvbihldnQpIHtcbiAgICB2YXIgbGlzdGVuZXIgPSBsaXN0ZW5lck9iai5saXN0ZW5lcjtcbiAgICB2YXIgYmluZFRvID0gbGlzdGVuZXJPYmouYmluZFRvIHx8IGxpc3RlbmVyT2JqLnRhcmdldDtcbiAgICBpZiAobGlzdGVuZXJPYmouY2FsbE9uY2UpIHtcbiAgICAgIHVubGlzdGVuQnlLZXkobGlzdGVuZXJPYmopO1xuICAgIH1cbiAgICByZXR1cm4gbGlzdGVuZXIuY2FsbChiaW5kVG8sIGV2dCk7XG4gIH07XG4gIGxpc3RlbmVyT2JqLmJvdW5kTGlzdGVuZXIgPSBib3VuZExpc3RlbmVyO1xuICByZXR1cm4gYm91bmRMaXN0ZW5lcjtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBtYXRjaGluZyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50c35FdmVudHNLZXl9IGluIHRoZSBnaXZlbiBsaXN0ZW5lclxuICogYXJyYXkuXG4gKlxuICogQHBhcmFtIHshQXJyYXk8IUV2ZW50c0tleT59IGxpc3RlbmVycyBBcnJheSBvZiBsaXN0ZW5lcnMuXG4gKiBAcGFyYW0geyFGdW5jdGlvbn0gbGlzdGVuZXIgVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfdGhpcyBUaGUgYHRoaXNgIHZhbHVlIGluc2lkZSB0aGUgbGlzdGVuZXIuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfc2V0RGVsZXRlSW5kZXggU2V0IHRoZSBkZWxldGVJbmRleCBvbiB0aGUgbWF0Y2hpbmdcbiAqICAgICBsaXN0ZW5lciwgZm9yIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzfnVubGlzdGVuQnlLZXl9LlxuICogQHJldHVybiB7RXZlbnRzS2V5fHVuZGVmaW5lZH0gVGhlIG1hdGNoaW5nIGxpc3RlbmVyIG9iamVjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRMaXN0ZW5lcihsaXN0ZW5lcnMsIGxpc3RlbmVyLCBvcHRfdGhpcywgb3B0X3NldERlbGV0ZUluZGV4KSB7XG4gIHZhciBsaXN0ZW5lck9iajtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBsaXN0ZW5lck9iaiA9IGxpc3RlbmVyc1tpXTtcbiAgICBpZiAobGlzdGVuZXJPYmoubGlzdGVuZXIgPT09IGxpc3RlbmVyICYmXG4gICAgICAgIGxpc3RlbmVyT2JqLmJpbmRUbyA9PT0gb3B0X3RoaXMpIHtcbiAgICAgIGlmIChvcHRfc2V0RGVsZXRlSW5kZXgpIHtcbiAgICAgICAgbGlzdGVuZXJPYmouZGVsZXRlSW5kZXggPSBpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxpc3RlbmVyT2JqO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuRXZlbnRUYXJnZXRMaWtlfSB0YXJnZXQgVGFyZ2V0LlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAqIEByZXR1cm4ge0FycmF5PEV2ZW50c0tleT58dW5kZWZpbmVkfSBMaXN0ZW5lcnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMaXN0ZW5lcnModGFyZ2V0LCB0eXBlKSB7XG4gIHZhciBsaXN0ZW5lck1hcCA9IGdldExpc3RlbmVyTWFwKHRhcmdldCk7XG4gIHJldHVybiBsaXN0ZW5lck1hcCA/IGxpc3RlbmVyTWFwW3R5cGVdIDogdW5kZWZpbmVkO1xufVxuXG5cbi8qKlxuICogR2V0IHRoZSBsb29rdXAgb2YgbGlzdGVuZXJzLlxuICogQHBhcmFtIHtPYmplY3R9IHRhcmdldCBUYXJnZXQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfY3JlYXRlIElmIGEgbWFwIHNob3VsZCBiZSBjcmVhdGVkIGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG4gKiBAcmV0dXJuIHshT2JqZWN0PHN0cmluZywgQXJyYXk8RXZlbnRzS2V5Pj59IE1hcCBvZlxuICogICAgIGxpc3RlbmVycyBieSBldmVudCB0eXBlLlxuICovXG5mdW5jdGlvbiBnZXRMaXN0ZW5lck1hcCh0YXJnZXQsIG9wdF9jcmVhdGUpIHtcbiAgdmFyIGxpc3RlbmVyTWFwID0gdGFyZ2V0Lm9sX2xtO1xuICBpZiAoIWxpc3RlbmVyTWFwICYmIG9wdF9jcmVhdGUpIHtcbiAgICBsaXN0ZW5lck1hcCA9IHRhcmdldC5vbF9sbSA9IHt9O1xuICB9XG4gIHJldHVybiBsaXN0ZW5lck1hcDtcbn1cblxuXG4vKipcbiAqIFJlbW92ZSB0aGUgbGlzdGVuZXIgbWFwIGZyb20gYSB0YXJnZXQuXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0IFRhcmdldC5cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXJNYXAodGFyZ2V0KSB7XG4gIGRlbGV0ZSB0YXJnZXQub2xfbG07XG59XG5cblxuLyoqXG4gKiBDbGVhbiB1cCBhbGwgbGlzdGVuZXIgb2JqZWN0cyBvZiB0aGUgZ2l2ZW4gdHlwZS4gIEFsbCBwcm9wZXJ0aWVzIG9uIHRoZVxuICogbGlzdGVuZXIgb2JqZWN0cyB3aWxsIGJlIHJlbW92ZWQsIGFuZCBpZiBubyBsaXN0ZW5lcnMgcmVtYWluIGluIHRoZSBsaXN0ZW5lclxuICogbWFwLCBpdCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgdGFyZ2V0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuRXZlbnRUYXJnZXRMaWtlfSB0YXJnZXQgVGFyZ2V0LlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXJzKHRhcmdldCwgdHlwZSkge1xuICB2YXIgbGlzdGVuZXJzID0gZ2V0TGlzdGVuZXJzKHRhcmdldCwgdHlwZSk7XG4gIGlmIChsaXN0ZW5lcnMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuZGVmYXVsdH0gKi8gKHRhcmdldCkuXG4gICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2ldLmJvdW5kTGlzdGVuZXIpO1xuICAgICAgY2xlYXIobGlzdGVuZXJzW2ldKTtcbiAgICB9XG4gICAgbGlzdGVuZXJzLmxlbmd0aCA9IDA7XG4gICAgdmFyIGxpc3RlbmVyTWFwID0gZ2V0TGlzdGVuZXJNYXAodGFyZ2V0KTtcbiAgICBpZiAobGlzdGVuZXJNYXApIHtcbiAgICAgIGRlbGV0ZSBsaXN0ZW5lck1hcFt0eXBlXTtcbiAgICAgIGlmIChPYmplY3Qua2V5cyhsaXN0ZW5lck1hcCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJlbW92ZUxpc3RlbmVyTWFwKHRhcmdldCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cblxuLyoqXG4gKiBSZWdpc3RlcnMgYW4gZXZlbnQgbGlzdGVuZXIgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogVGhpcyBmdW5jdGlvbiBlZmZpY2llbnRseSBiaW5kcyBhIGBsaXN0ZW5lcmAgdG8gYSBgdGhpc2Agb2JqZWN0LCBhbmQgcmV0dXJuc1xuICogYSBrZXkgZm9yIHVzZSB3aXRoIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzfnVubGlzdGVuQnlLZXl9LlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IEV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEV2ZW50IHR5cGUuXG4gKiBAcGFyYW0ge0xpc3RlbmVyRnVuY3Rpb259IGxpc3RlbmVyIExpc3RlbmVyLlxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfdGhpcyBPYmplY3QgcmVmZXJlbmNlZCBieSB0aGUgYHRoaXNgIGtleXdvcmQgaW4gdGhlXG4gKiAgICAgbGlzdGVuZXIuIERlZmF1bHQgaXMgdGhlIGB0YXJnZXRgLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X29uY2UgSWYgdHJ1ZSwgYWRkIHRoZSBsaXN0ZW5lciBhcyBvbmUtb2ZmIGxpc3RlbmVyLlxuICogQHJldHVybiB7RXZlbnRzS2V5fSBVbmlxdWUga2V5IGZvciB0aGUgbGlzdGVuZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4odGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgb3B0X3RoaXMsIG9wdF9vbmNlKSB7XG4gIHZhciBsaXN0ZW5lck1hcCA9IGdldExpc3RlbmVyTWFwKHRhcmdldCwgdHJ1ZSk7XG4gIHZhciBsaXN0ZW5lcnMgPSBsaXN0ZW5lck1hcFt0eXBlXTtcbiAgaWYgKCFsaXN0ZW5lcnMpIHtcbiAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lck1hcFt0eXBlXSA9IFtdO1xuICB9XG4gIHZhciBsaXN0ZW5lck9iaiA9IGZpbmRMaXN0ZW5lcihsaXN0ZW5lcnMsIGxpc3RlbmVyLCBvcHRfdGhpcywgZmFsc2UpO1xuICBpZiAobGlzdGVuZXJPYmopIHtcbiAgICBpZiAoIW9wdF9vbmNlKSB7XG4gICAgICAvLyBUdXJuIG9uZS1vZmYgbGlzdGVuZXIgaW50byBhIHBlcm1hbmVudCBvbmUuXG4gICAgICBsaXN0ZW5lck9iai5jYWxsT25jZSA9IGZhbHNlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsaXN0ZW5lck9iaiA9IC8qKiBAdHlwZSB7RXZlbnRzS2V5fSAqLyAoe1xuICAgICAgYmluZFRvOiBvcHRfdGhpcyxcbiAgICAgIGNhbGxPbmNlOiAhIW9wdF9vbmNlLFxuICAgICAgbGlzdGVuZXI6IGxpc3RlbmVyLFxuICAgICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgICB0eXBlOiB0eXBlXG4gICAgfSk7XG4gICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuZGVmYXVsdH0gKi8gKHRhcmdldCkuXG4gICAgICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGJpbmRMaXN0ZW5lcihsaXN0ZW5lck9iaikpO1xuICAgIGxpc3RlbmVycy5wdXNoKGxpc3RlbmVyT2JqKTtcbiAgfVxuXG4gIHJldHVybiBsaXN0ZW5lck9iajtcbn1cblxuXG4vKipcbiAqIFJlZ2lzdGVycyBhIG9uZS1vZmYgZXZlbnQgbGlzdGVuZXIgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogVGhpcyBmdW5jdGlvbiBlZmZpY2llbnRseSBiaW5kcyBhIGBsaXN0ZW5lcmAgYXMgc2VsZi11bnJlZ2lzdGVyaW5nIGxpc3RlbmVyXG4gKiB0byBhIGB0aGlzYCBvYmplY3QsIGFuZCByZXR1cm5zIGEga2V5IGZvciB1c2Ugd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHN+dW5saXN0ZW5CeUtleX0gaW4gY2FzZSB0aGUgbGlzdGVuZXIgbmVlZHMgdG8gYmVcbiAqIHVucmVnaXN0ZXJlZCBiZWZvcmUgaXQgaXMgY2FsbGVkLlxuICpcbiAqIFdoZW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHN+bGlzdGVufSBpcyBjYWxsZWQgd2l0aCB0aGUgc2FtZSBhcmd1bWVudHMgYWZ0ZXIgdGhpc1xuICogZnVuY3Rpb24sIHRoZSBzZWxmLXVucmVnaXN0ZXJpbmcgbGlzdGVuZXIgd2lsbCBiZSB0dXJuZWQgaW50byBhIHBlcm1hbmVudFxuICogbGlzdGVuZXIuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuRXZlbnRUYXJnZXRMaWtlfSB0YXJnZXQgRXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAqIEBwYXJhbSB7TGlzdGVuZXJGdW5jdGlvbn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdF90aGlzIE9iamVjdCByZWZlcmVuY2VkIGJ5IHRoZSBgdGhpc2Aga2V5d29yZCBpbiB0aGVcbiAqICAgICBsaXN0ZW5lci4gRGVmYXVsdCBpcyB0aGUgYHRhcmdldGAuXG4gKiBAcmV0dXJuIHtFdmVudHNLZXl9IEtleSBmb3IgdW5saXN0ZW5CeUtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3Rlbk9uY2UodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgb3B0X3RoaXMpIHtcbiAgcmV0dXJuIGxpc3Rlbih0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCBvcHRfdGhpcywgdHJ1ZSk7XG59XG5cblxuLyoqXG4gKiBVbnJlZ2lzdGVycyBhbiBldmVudCBsaXN0ZW5lciBvbiBhbiBldmVudCB0YXJnZXQuIEluc3BpcmVkIGJ5XG4gKiBodHRwczovL2dvb2dsZS5naXRodWIuaW8vY2xvc3VyZS1saWJyYXJ5L2FwaS9zb3VyY2UvY2xvc3VyZS9nb29nL2V2ZW50cy9ldmVudHMuanMuc3JjLmh0bWxcbiAqXG4gKiBUbyByZXR1cm4gYSBsaXN0ZW5lciwgdGhpcyBmdW5jdGlvbiBuZWVkcyB0byBiZSBjYWxsZWQgd2l0aCB0aGUgZXhhY3Qgc2FtZVxuICogYXJndW1lbnRzIHRoYXQgd2VyZSB1c2VkIGZvciBhIHByZXZpb3VzIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzfmxpc3Rlbn0gY2FsbC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzL1RhcmdldC5qc1wiKS5FdmVudFRhcmdldExpa2V9IHRhcmdldCBFdmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBFdmVudCB0eXBlLlxuICogQHBhcmFtIHtMaXN0ZW5lckZ1bmN0aW9ufSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X3RoaXMgT2JqZWN0IHJlZmVyZW5jZWQgYnkgdGhlIGB0aGlzYCBrZXl3b3JkIGluIHRoZVxuICogICAgIGxpc3RlbmVyLiBEZWZhdWx0IGlzIHRoZSBgdGFyZ2V0YC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVubGlzdGVuKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIG9wdF90aGlzKSB7XG4gIHZhciBsaXN0ZW5lcnMgPSBnZXRMaXN0ZW5lcnModGFyZ2V0LCB0eXBlKTtcbiAgaWYgKGxpc3RlbmVycykge1xuICAgIHZhciBsaXN0ZW5lck9iaiA9IGZpbmRMaXN0ZW5lcihsaXN0ZW5lcnMsIGxpc3RlbmVyLCBvcHRfdGhpcywgdHJ1ZSk7XG4gICAgaWYgKGxpc3RlbmVyT2JqKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KGxpc3RlbmVyT2JqKTtcbiAgICB9XG4gIH1cbn1cblxuXG4vKipcbiAqIFVucmVnaXN0ZXJzIGV2ZW50IGxpc3RlbmVycyBvbiBhbiBldmVudCB0YXJnZXQuIEluc3BpcmVkIGJ5XG4gKiBodHRwczovL2dvb2dsZS5naXRodWIuaW8vY2xvc3VyZS1saWJyYXJ5L2FwaS9zb3VyY2UvY2xvc3VyZS9nb29nL2V2ZW50cy9ldmVudHMuanMuc3JjLmh0bWxcbiAqXG4gKiBUaGUgYXJndW1lbnQgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gaXMgdGhlIGtleSByZXR1cm5lZCBmcm9tXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50c35saXN0ZW59IG9yIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzfmxpc3Rlbk9uY2V9LlxuICpcbiAqIEBwYXJhbSB7RXZlbnRzS2V5fSBrZXkgVGhlIGtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVubGlzdGVuQnlLZXkoa2V5KSB7XG4gIGlmIChrZXkgJiYga2V5LnRhcmdldCkge1xuICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLmRlZmF1bHR9ICovIChrZXkudGFyZ2V0KS5cbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoa2V5LnR5cGUsIGtleS5ib3VuZExpc3RlbmVyKTtcbiAgICB2YXIgbGlzdGVuZXJzID0gZ2V0TGlzdGVuZXJzKGtleS50YXJnZXQsIGtleS50eXBlKTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICB2YXIgaSA9ICdkZWxldGVJbmRleCcgaW4ga2V5ID8ga2V5LmRlbGV0ZUluZGV4IDogbGlzdGVuZXJzLmluZGV4T2Yoa2V5KTtcbiAgICAgIGlmIChpICE9PSAtMSkge1xuICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgfVxuICAgICAgaWYgKGxpc3RlbmVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmVtb3ZlTGlzdGVuZXJzKGtleS50YXJnZXQsIGtleS50eXBlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY2xlYXIoa2V5KTtcbiAgfVxufVxuXG5cbi8qKlxuICogVW5yZWdpc3RlcnMgYWxsIGV2ZW50IGxpc3RlbmVycyBvbiBhbiBldmVudCB0YXJnZXQuIEluc3BpcmVkIGJ5XG4gKiBodHRwczovL2dvb2dsZS5naXRodWIuaW8vY2xvc3VyZS1saWJyYXJ5L2FwaS9zb3VyY2UvY2xvc3VyZS9nb29nL2V2ZW50cy9ldmVudHMuanMuc3JjLmh0bWxcbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzL1RhcmdldC5qc1wiKS5FdmVudFRhcmdldExpa2V9IHRhcmdldCBUYXJnZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bmxpc3RlbkFsbCh0YXJnZXQpIHtcbiAgdmFyIGxpc3RlbmVyTWFwID0gZ2V0TGlzdGVuZXJNYXAodGFyZ2V0KTtcbiAgaWYgKGxpc3RlbmVyTWFwKSB7XG4gICAgZm9yICh2YXIgdHlwZSBpbiBsaXN0ZW5lck1hcCkge1xuICAgICAgcmVtb3ZlTGlzdGVuZXJzKHRhcmdldCwgdHlwZSk7XG4gICAgfVxuICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50cy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvRGlzcG9zYWJsZVxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogT2JqZWN0cyB0aGF0IG5lZWQgdG8gY2xlYW4gdXAgYWZ0ZXIgdGhlbXNlbHZlcy5cbiAqL1xudmFyIERpc3Bvc2FibGUgPSBmdW5jdGlvbiBEaXNwb3NhYmxlKCkge1xuICAvKipcbiAgICogVGhlIG9iamVjdCBoYXMgYWxyZWFkeSBiZWVuIGRpc3Bvc2VkLlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuZGlzcG9zZWRfID0gZmFsc2U7XG59O1xuXG4vKipcbiAqIENsZWFuIHVwLlxuICovXG5EaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSAoKSB7XG4gIGlmICghdGhpcy5kaXNwb3NlZF8pIHtcbiAgICB0aGlzLmRpc3Bvc2VkXyA9IHRydWU7XG4gICAgdGhpcy5kaXNwb3NlSW50ZXJuYWwoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBFeHRlbnNpb24gcG9pbnQgZm9yIGRpc3Bvc2FibGUgb2JqZWN0cy5cbiAqIEBwcm90ZWN0ZWRcbiAqL1xuRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gZGlzcG9zZUludGVybmFsICgpIHt9O1xuXG5leHBvcnQgZGVmYXVsdCBEaXNwb3NhYmxlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EaXNwb3NhYmxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9mdW5jdGlvbnNcbiAqL1xuXG4vKipcbiAqIEFsd2F5cyByZXR1cm5zIHRydWUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFRSVUUoKSB7XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEFsd2F5cyByZXR1cm5zIGZhbHNlLlxuICogQHJldHVybnMge2Jvb2xlYW59IGZhbHNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gRkFMU0UoKSB7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBBIHJldXNhYmxlIGZ1bmN0aW9uLCB1c2VkIGUuZy4gYXMgYSBkZWZhdWx0IGZvciBjYWxsYmFja3MuXG4gKlxuICogQHJldHVybiB7dm9pZH0gTm90aGluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFZPSUQoKSB7fVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1mdW5jdGlvbnMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9FdmVudFxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogU3RyaXBwZWQgZG93biBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVzNDIERPTSBMZXZlbCAyIEV2ZW50IGludGVyZmFjZS5cbiAqIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTItRXZlbnRzL2V2ZW50cy5odG1sI0V2ZW50cy1pbnRlcmZhY2UuXG4gKlxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBvbmx5IHByb3ZpZGVzIGB0eXBlYCBhbmQgYHRhcmdldGAgcHJvcGVydGllcywgYW5kXG4gKiBgc3RvcFByb3BhZ2F0aW9uYCBhbmQgYHByZXZlbnREZWZhdWx0YCBtZXRob2RzLiBJdCBpcyBtZWFudCBhcyBiYXNlIGNsYXNzXG4gKiBmb3IgaGlnaGVyIGxldmVsIGV2ZW50cyBkZWZpbmVkIGluIHRoZSBsaWJyYXJ5LCBhbmQgd29ya3Mgd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvVGFyZ2V0flRhcmdldH0uXG4gKi9cbnZhciBFdmVudCA9IGZ1bmN0aW9uIEV2ZW50KHR5cGUpIHtcblxuICAvKipcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICB0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZDtcblxuICAvKipcbiAgICogVGhlIGV2ZW50IHR5cGUuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBhcGlcbiAgICovXG4gIHRoaXMudHlwZSA9IHR5cGU7XG5cbiAgLyoqXG4gICAqIFRoZSBldmVudCB0YXJnZXQuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqIEBhcGlcbiAgICovXG4gIHRoaXMudGFyZ2V0ID0gbnVsbDtcbn07XG5cbi8qKlxuICogU3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAqIEBhcGlcbiAqL1xuRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gcHJldmVudERlZmF1bHQgKCkge1xuICB0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7XG59O1xuXG4vKipcbiAqIFN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gKiBAYXBpXG4gKi9cbkV2ZW50LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbiBzdG9wUHJvcGFnYXRpb24gKCkge1xuICB0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7XG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHtFdmVudHxpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2dCBFdmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uKGV2dCkge1xuICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0V2ZW50fGltcG9ydChcIi4vRXZlbnQuanNcIikuZGVmYXVsdH0gZXZ0IEV2ZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEV2ZW50O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL1RhcmdldFxuICovXG5pbXBvcnQgRGlzcG9zYWJsZSBmcm9tICcuLi9EaXNwb3NhYmxlLmpzJztcbmltcG9ydCB7dW5saXN0ZW5BbGx9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQge1ZPSUR9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi9FdmVudC5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7RXZlbnRUYXJnZXR8VGFyZ2V0fSBFdmVudFRhcmdldExpa2VcbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBzaW1wbGlmaWVkIGltcGxlbWVudGF0aW9uIG9mIHRoZSBXM0MgRE9NIExldmVsIDIgRXZlbnRUYXJnZXQgaW50ZXJmYWNlLlxuICogU2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDAwL1JFQy1ET00tTGV2ZWwtMi1FdmVudHMtMjAwMDExMTMvZXZlbnRzLmh0bWwjRXZlbnRzLUV2ZW50VGFyZ2V0LlxuICpcbiAqIFRoZXJlIGFyZSB0d28gaW1wb3J0YW50IHNpbXBsaWZpY2F0aW9ucyBjb21wYXJlZCB0byB0aGUgc3BlY2lmaWNhdGlvbjpcbiAqXG4gKiAxLiBUaGUgaGFuZGxpbmcgb2YgYHVzZUNhcHR1cmVgIGluIGBhZGRFdmVudExpc3RlbmVyYCBhbmRcbiAqICAgIGByZW1vdmVFdmVudExpc3RlbmVyYC4gVGhlcmUgaXMgbm8gcmVhbCBjYXB0dXJlIG1vZGVsLlxuICogMi4gVGhlIGhhbmRsaW5nIG9mIGBzdG9wUHJvcGFnYXRpb25gIGFuZCBgcHJldmVudERlZmF1bHRgIG9uIGBkaXNwYXRjaEV2ZW50YC5cbiAqICAgIFRoZXJlIGlzIG5vIGV2ZW50IHRhcmdldCBoaWVyYXJjaHkuIFdoZW4gYSBsaXN0ZW5lciBjYWxsc1xuICogICAgYHN0b3BQcm9wYWdhdGlvbmAgb3IgYHByZXZlbnREZWZhdWx0YCBvbiBhbiBldmVudCBvYmplY3QsIGl0IG1lYW5zIHRoYXQgbm9cbiAqICAgIG1vcmUgbGlzdGVuZXJzIGFmdGVyIHRoaXMgb25lIHdpbGwgYmUgY2FsbGVkLiBTYW1lIGFzIHdoZW4gdGhlIGxpc3RlbmVyXG4gKiAgICByZXR1cm5zIGZhbHNlLlxuICovXG52YXIgVGFyZ2V0ID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoRGlzcG9zYWJsZSkge1xuICBmdW5jdGlvbiBUYXJnZXQoKSB7XG5cbiAgICBEaXNwb3NhYmxlLmNhbGwodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAgICAgKi9cbiAgICB0aGlzLnBlbmRpbmdSZW1vdmFsc18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICAgICAqL1xuICAgIHRoaXMuZGlzcGF0Y2hpbmdfID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgQXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyRnVuY3Rpb24+Pn1cbiAgICAgKi9cbiAgICB0aGlzLmxpc3RlbmVyc18gPSB7fTtcblxuICB9XG5cbiAgaWYgKCBEaXNwb3NhYmxlICkgVGFyZ2V0Ll9fcHJvdG9fXyA9IERpc3Bvc2FibGU7XG4gIFRhcmdldC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBEaXNwb3NhYmxlICYmIERpc3Bvc2FibGUucHJvdG90eXBlICk7XG4gIFRhcmdldC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUYXJnZXQ7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyRnVuY3Rpb259IGxpc3RlbmVyIExpc3RlbmVyLlxuICAgKi9cbiAgVGFyZ2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lciAodHlwZSwgbGlzdGVuZXIpIHtcbiAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNfW3R5cGVdO1xuICAgIGlmICghbGlzdGVuZXJzKSB7XG4gICAgICBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc19bdHlwZV0gPSBbXTtcbiAgICB9XG4gICAgaWYgKGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKSA9PT0gLTEpIHtcbiAgICAgIGxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYW4gZXZlbnQgYW5kIGNhbGxzIGFsbCBsaXN0ZW5lcnMgbGlzdGVuaW5nIGZvciBldmVudHNcbiAgICogb2YgdGhpcyB0eXBlLiBUaGUgZXZlbnQgcGFyYW1ldGVyIGNhbiBlaXRoZXIgYmUgYSBzdHJpbmcgb3IgYW5cbiAgICogT2JqZWN0IHdpdGggYSBgdHlwZWAgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7e3R5cGU6IHN0cmluZyxcbiAgICogICAgIHRhcmdldDogKEV2ZW50VGFyZ2V0TGlrZXx1bmRlZmluZWQpLFxuICAgKiAgICAgcHJvcGFnYXRpb25TdG9wcGVkOiAoYm9vbGVhbnx1bmRlZmluZWQpfXxcbiAgICogICAgIGltcG9ydChcIi4vRXZlbnQuanNcIikuZGVmYXVsdHxzdHJpbmd9IGV2ZW50IEV2ZW50IG9iamVjdC5cbiAgICogQHJldHVybiB7Ym9vbGVhbnx1bmRlZmluZWR9IGBmYWxzZWAgaWYgYW55b25lIGNhbGxlZCBwcmV2ZW50RGVmYXVsdCBvbiB0aGVcbiAgICogICAgIGV2ZW50IG9iamVjdCBvciBpZiBhbnkgb2YgdGhlIGxpc3RlbmVycyByZXR1cm5lZCBmYWxzZS5cbiAgICogQGFwaVxuICAgKi9cbiAgVGFyZ2V0LnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50ID0gZnVuY3Rpb24gZGlzcGF0Y2hFdmVudCAoZXZlbnQpIHtcbiAgICB2YXIgZXZ0ID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJyA/IG5ldyBFdmVudChldmVudCkgOiBldmVudDtcbiAgICB2YXIgdHlwZSA9IGV2dC50eXBlO1xuICAgIGV2dC50YXJnZXQgPSB0aGlzO1xuICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc19bdHlwZV07XG4gICAgdmFyIHByb3BhZ2F0ZTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICBpZiAoISh0eXBlIGluIHRoaXMuZGlzcGF0Y2hpbmdfKSkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoaW5nX1t0eXBlXSA9IDA7XG4gICAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzX1t0eXBlXSA9IDA7XG4gICAgICB9XG4gICAgICArK3RoaXMuZGlzcGF0Y2hpbmdfW3R5cGVdO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgaWYgKGxpc3RlbmVyc1tpXS5jYWxsKHRoaXMsIGV2dCkgPT09IGZhbHNlIHx8IGV2dC5wcm9wYWdhdGlvblN0b3BwZWQpIHtcbiAgICAgICAgICBwcm9wYWdhdGUgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLS10aGlzLmRpc3BhdGNoaW5nX1t0eXBlXTtcbiAgICAgIGlmICh0aGlzLmRpc3BhdGNoaW5nX1t0eXBlXSA9PT0gMCkge1xuICAgICAgICB2YXIgcGVuZGluZ1JlbW92YWxzID0gdGhpcy5wZW5kaW5nUmVtb3ZhbHNfW3R5cGVdO1xuICAgICAgICBkZWxldGUgdGhpcy5wZW5kaW5nUmVtb3ZhbHNfW3R5cGVdO1xuICAgICAgICB3aGlsZSAocGVuZGluZ1JlbW92YWxzLS0pIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgVk9JRCk7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHRoaXMuZGlzcGF0Y2hpbmdfW3R5cGVdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHByb3BhZ2F0ZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBUYXJnZXQucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uIGRpc3Bvc2VJbnRlcm5hbCAoKSB7XG4gICAgdW5saXN0ZW5BbGwodGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGlzdGVuZXJzIGZvciBhIHNwZWNpZmllZCBldmVudCB0eXBlLiBMaXN0ZW5lcnMgYXJlIHJldHVybmVkIGluIHRoZVxuICAgKiBvcmRlciB0aGF0IHRoZXkgd2lsbCBiZSBjYWxsZWQgaW4uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lckZ1bmN0aW9uPn0gTGlzdGVuZXJzLlxuICAgKi9cbiAgVGFyZ2V0LnByb3RvdHlwZS5nZXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBnZXRMaXN0ZW5lcnMgKHR5cGUpIHtcbiAgICByZXR1cm4gdGhpcy5saXN0ZW5lcnNfW3R5cGVdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF90eXBlIFR5cGUuIElmIG5vdCBwcm92aWRlZCxcbiAgICogICAgIGB0cnVlYCB3aWxsIGJlIHJldHVybmVkIGlmIHRoaXMgZXZlbnQgdGFyZ2V0IGhhcyBhbnkgbGlzdGVuZXJzLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBIYXMgbGlzdGVuZXJzLlxuICAgKi9cbiAgVGFyZ2V0LnByb3RvdHlwZS5oYXNMaXN0ZW5lciA9IGZ1bmN0aW9uIGhhc0xpc3RlbmVyIChvcHRfdHlwZSkge1xuICAgIHJldHVybiBvcHRfdHlwZSA/XG4gICAgICBvcHRfdHlwZSBpbiB0aGlzLmxpc3RlbmVyc18gOlxuICAgICAgT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnNfKS5sZW5ndGggPiAwO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lckZ1bmN0aW9ufSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICovXG4gIFRhcmdldC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIgKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgdmFyIGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzX1t0eXBlXTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICB2YXIgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICBpZiAodHlwZSBpbiB0aGlzLnBlbmRpbmdSZW1vdmFsc18pIHtcbiAgICAgICAgLy8gbWFrZSBsaXN0ZW5lciBhIG5vLW9wLCBhbmQgcmVtb3ZlIGxhdGVyIGluICNkaXNwYXRjaEV2ZW50KClcbiAgICAgICAgbGlzdGVuZXJzW2luZGV4XSA9IFZPSUQ7XG4gICAgICAgICsrdGhpcy5wZW5kaW5nUmVtb3ZhbHNfW3R5cGVdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIGlmIChsaXN0ZW5lcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzX1t0eXBlXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gVGFyZ2V0O1xufShEaXNwb3NhYmxlKSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgVGFyZ2V0O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UYXJnZXQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9FdmVudFR5cGVcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBAY29uc3RcbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAvKipcbiAgICogR2VuZXJpYyBjaGFuZ2UgZXZlbnQuIFRyaWdnZXJlZCB3aGVuIHRoZSByZXZpc2lvbiBjb3VudGVyIGlzIGluY3JlYXNlZC5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9ldmVudHMvRXZlbnR+RXZlbnQjY2hhbmdlXG4gICAqIEBhcGlcbiAgICovXG4gIENIQU5HRTogJ2NoYW5nZScsXG5cbiAgQ0xFQVI6ICdjbGVhcicsXG4gIENPTlRFWFRNRU5VOiAnY29udGV4dG1lbnUnLFxuICBDTElDSzogJ2NsaWNrJyxcbiAgREJMQ0xJQ0s6ICdkYmxjbGljaycsXG4gIERSQUdFTlRFUjogJ2RyYWdlbnRlcicsXG4gIERSQUdPVkVSOiAnZHJhZ292ZXInLFxuICBEUk9QOiAnZHJvcCcsXG4gIEVSUk9SOiAnZXJyb3InLFxuICBLRVlET1dOOiAna2V5ZG93bicsXG4gIEtFWVBSRVNTOiAna2V5cHJlc3MnLFxuICBMT0FEOiAnbG9hZCcsXG4gIE1PVVNFRE9XTjogJ21vdXNlZG93bicsXG4gIE1PVVNFTU9WRTogJ21vdXNlbW92ZScsXG4gIE1PVVNFT1VUOiAnbW91c2VvdXQnLFxuICBNT1VTRVVQOiAnbW91c2V1cCcsXG4gIE1PVVNFV0hFRUw6ICdtb3VzZXdoZWVsJyxcbiAgTVNQT0lOVEVSRE9XTjogJ01TUG9pbnRlckRvd24nLFxuICBSRVNJWkU6ICdyZXNpemUnLFxuICBUT1VDSFNUQVJUOiAndG91Y2hzdGFydCcsXG4gIFRPVUNITU9WRTogJ3RvdWNobW92ZScsXG4gIFRPVUNIRU5EOiAndG91Y2hlbmQnLFxuICBXSEVFTDogJ3doZWVsJ1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9PYnNlcnZhYmxlXG4gKi9cbmltcG9ydCB7bGlzdGVuLCB1bmxpc3RlbkJ5S2V5LCB1bmxpc3RlbiwgbGlzdGVuT25jZX0gZnJvbSAnLi9ldmVudHMuanMnO1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQW4gZXZlbnQgdGFyZ2V0IHByb3ZpZGluZyBjb252ZW5pZW50IG1ldGhvZHMgZm9yIGxpc3RlbmVyIHJlZ2lzdHJhdGlvblxuICogYW5kIHVucmVnaXN0cmF0aW9uLiBBIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgaXMgYWx3YXlzIGF2YWlsYWJsZSB0aHJvdWdoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL09ic2VydmFibGV+T2JzZXJ2YWJsZSNjaGFuZ2VkfS5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuRXZlbnRcbiAqIEBhcGlcbiAqL1xudmFyIE9ic2VydmFibGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudFRhcmdldCkge1xuICBmdW5jdGlvbiBPYnNlcnZhYmxlKCkge1xuXG4gICAgRXZlbnRUYXJnZXQuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnJldmlzaW9uXyA9IDA7XG5cbiAgfVxuXG4gIGlmICggRXZlbnRUYXJnZXQgKSBPYnNlcnZhYmxlLl9fcHJvdG9fXyA9IEV2ZW50VGFyZ2V0O1xuICBPYnNlcnZhYmxlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2ZW50VGFyZ2V0ICYmIEV2ZW50VGFyZ2V0LnByb3RvdHlwZSApO1xuICBPYnNlcnZhYmxlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE9ic2VydmFibGU7XG5cbiAgLyoqXG4gICAqIEluY3JlYXNlcyB0aGUgcmV2aXNpb24gY291bnRlciBhbmQgZGlzcGF0Y2hlcyBhICdjaGFuZ2UnIGV2ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBPYnNlcnZhYmxlLnByb3RvdHlwZS5jaGFuZ2VkID0gZnVuY3Rpb24gY2hhbmdlZCAoKSB7XG4gICAgKyt0aGlzLnJldmlzaW9uXztcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNIQU5HRSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmVyc2lvbiBudW1iZXIgZm9yIHRoaXMgb2JqZWN0LiAgRWFjaCB0aW1lIHRoZSBvYmplY3QgaXMgbW9kaWZpZWQsXG4gICAqIGl0cyB2ZXJzaW9uIG51bWJlciB3aWxsIGJlIGluY3JlbWVudGVkLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJldmlzaW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBPYnNlcnZhYmxlLnByb3RvdHlwZS5nZXRSZXZpc2lvbiA9IGZ1bmN0aW9uIGdldFJldmlzaW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5yZXZpc2lvbl87XG4gIH07XG5cbiAgLyoqXG4gICAqIExpc3RlbiBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVGhlIGV2ZW50IHR5cGUgb3IgYXJyYXkgb2YgZXZlbnQgdHlwZXMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oPyk6ID99IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IFVuaXF1ZSBrZXkgZm9yIHRoZSBsaXN0ZW5lci4gSWZcbiAgICogICAgIGNhbGxlZCB3aXRoIGFuIGFycmF5IG9mIGV2ZW50IHR5cGVzIGFzIHRoZSBmaXJzdCBhcmd1bWVudCwgdGhlIHJldHVyblxuICAgKiAgICAgd2lsbCBiZSBhbiBhcnJheSBvZiBrZXlzLlxuICAgKiBAYXBpXG4gICAqL1xuICBPYnNlcnZhYmxlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIG9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgICB2YXIgbGVuID0gdHlwZS5sZW5ndGg7XG4gICAgICB2YXIga2V5cyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICBrZXlzW2ldID0gbGlzdGVuKHRoaXMsIHR5cGVbaV0sIGxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBrZXlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbGlzdGVuKHRoaXMsIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodHlwZSksIGxpc3RlbmVyKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIExpc3RlbiBvbmNlIGZvciBhIGNlcnRhaW4gdHlwZSBvZiBldmVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUaGUgZXZlbnQgdHlwZSBvciBhcnJheSBvZiBldmVudCB0eXBlcy5cbiAgICogQHBhcmFtIHtmdW5jdGlvbig/KTogP30gbGlzdGVuZXIgVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0gVW5pcXVlIGtleSBmb3IgdGhlIGxpc3RlbmVyLiBJZlxuICAgKiAgICAgY2FsbGVkIHdpdGggYW4gYXJyYXkgb2YgZXZlbnQgdHlwZXMgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LCB0aGUgcmV0dXJuXG4gICAqICAgICB3aWxsIGJlIGFuIGFycmF5IG9mIGtleXMuXG4gICAqIEBhcGlcbiAgICovXG4gIE9ic2VydmFibGUucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlICh0eXBlLCBsaXN0ZW5lcikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgICB2YXIgbGVuID0gdHlwZS5sZW5ndGg7XG4gICAgICB2YXIga2V5cyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICBrZXlzW2ldID0gbGlzdGVuT25jZSh0aGlzLCB0eXBlW2ldLCBsaXN0ZW5lcik7XG4gICAgICB9XG4gICAgICByZXR1cm4ga2V5cztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGxpc3Rlbk9uY2UodGhpcywgLyoqIEB0eXBlIHtzdHJpbmd9ICovICh0eXBlKSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVW5saXN0ZW4gZm9yIGEgY2VydGFpbiB0eXBlIG9mIGV2ZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFRoZSBldmVudCB0eXBlIG9yIGFycmF5IG9mIGV2ZW50IHR5cGVzLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKD8pOiA/fSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIE9ic2VydmFibGUucHJvdG90eXBlLnVuID0gZnVuY3Rpb24gdW4gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHR5cGUubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB1bmxpc3Rlbih0aGlzLCB0eXBlW2ldLCBsaXN0ZW5lcik7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIHVubGlzdGVuKHRoaXMsIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodHlwZSksIGxpc3RlbmVyKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIE9ic2VydmFibGU7XG59KEV2ZW50VGFyZ2V0KSk7XG5cblxuLyoqXG4gKiBSZW1vdmVzIGFuIGV2ZW50IGxpc3RlbmVyIHVzaW5nIHRoZSBrZXkgcmV0dXJuZWQgYnkgYG9uKClgIG9yIGBvbmNlKClgLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0ga2V5IFRoZSBrZXkgcmV0dXJuZWQgYnkgYG9uKClgXG4gKiAgICAgb3IgYG9uY2UoKWAgKG9yIGFuIGFycmF5IG9mIGtleXMpLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5CeUtleShrZXkpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoa2V5KSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGtleS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KGtleVtpXSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHVubGlzdGVuQnlLZXkoLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9ICovIChrZXkpKTtcbiAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IE9ic2VydmFibGU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmFibGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL09iamVjdFxuICovXG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCBPYmplY3RFdmVudFR5cGUgZnJvbSAnLi9PYmplY3RFdmVudFR5cGUuanMnO1xuaW1wb3J0IE9ic2VydmFibGUgZnJvbSAnLi9PYnNlcnZhYmxlLmpzJztcbmltcG9ydCBFdmVudCBmcm9tICcuL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQge2Fzc2lnbn0gZnJvbSAnLi9vYmouanMnO1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdH0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2YgdGhpcyB0eXBlLlxuICovXG5leHBvcnQgdmFyIE9iamVjdEV2ZW50ID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoRXZlbnQpIHtcbiAgZnVuY3Rpb24gT2JqZWN0RXZlbnQodHlwZSwga2V5LCBvbGRWYWx1ZSkge1xuICAgIEV2ZW50LmNhbGwodGhpcywgdHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgd2hvc2UgdmFsdWUgaXMgY2hhbmdpbmcuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5rZXkgPSBrZXk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb2xkIHZhbHVlLiBUbyBnZXQgdGhlIG5ldyB2YWx1ZSB1c2UgYGUudGFyZ2V0LmdldChlLmtleSlgIHdoZXJlXG4gICAgICogYGVgIGlzIHRoZSBldmVudCBvYmplY3QuXG4gICAgICogQHR5cGUgeyp9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMub2xkVmFsdWUgPSBvbGRWYWx1ZTtcblxuICB9XG5cbiAgaWYgKCBFdmVudCApIE9iamVjdEV2ZW50Ll9fcHJvdG9fXyA9IEV2ZW50O1xuICBPYmplY3RFdmVudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBFdmVudCAmJiBFdmVudC5wcm90b3R5cGUgKTtcbiAgT2JqZWN0RXZlbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gT2JqZWN0RXZlbnQ7XG5cbiAgcmV0dXJuIE9iamVjdEV2ZW50O1xufShFdmVudCkpO1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogTW9zdCBub24tdHJpdmlhbCBjbGFzc2VzIGluaGVyaXQgZnJvbSB0aGlzLlxuICpcbiAqIFRoaXMgZXh0ZW5kcyB7QGxpbmsgbW9kdWxlOm9sL09ic2VydmFibGV9IHdpdGggb2JzZXJ2YWJsZVxuICogcHJvcGVydGllcywgd2hlcmUgZWFjaCBwcm9wZXJ0eSBpcyBvYnNlcnZhYmxlIGFzIHdlbGwgYXMgdGhlIG9iamVjdCBhcyBhXG4gKiB3aG9sZS5cbiAqXG4gKiBDbGFzc2VzIHRoYXQgaW5oZXJpdCBmcm9tIHRoaXMgaGF2ZSBwcmUtZGVmaW5lZCBwcm9wZXJ0aWVzLCB0byB3aGljaCB5b3UgY2FuXG4gKiBhZGQgeW91ciBvd25zLiBUaGUgcHJlLWRlZmluZWQgcHJvcGVydGllcyBhcmUgbGlzdGVkIGluIHRoaXMgZG9jdW1lbnRhdGlvbiBhc1xuICogJ09ic2VydmFibGUgUHJvcGVydGllcycsIGFuZCBoYXZlIHRoZWlyIG93biBhY2Nlc3NvcnM7IGZvciBleGFtcGxlLFxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfSBoYXMgYSBgdGFyZ2V0YCBwcm9wZXJ0eSwgYWNjZXNzZWQgd2l0aFxuICogYGdldFRhcmdldCgpYCBhbmQgY2hhbmdlZCB3aXRoIGBzZXRUYXJnZXQoKWAuIE5vdCBhbGwgcHJvcGVydGllcyBhcmUgaG93ZXZlclxuICogc2V0dGFibGUuIFRoZXJlIGFyZSBhbHNvIGdlbmVyYWwtcHVycG9zZSBhY2Nlc3NvcnMgYGdldCgpYCBhbmQgYHNldCgpYC4gRm9yXG4gKiBleGFtcGxlLCBgZ2V0KCd0YXJnZXQnKWAgaXMgZXF1aXZhbGVudCB0byBgZ2V0VGFyZ2V0KClgLlxuICpcbiAqIFRoZSBgc2V0YCBhY2Nlc3NvcnMgdHJpZ2dlciBhIGNoYW5nZSBldmVudCwgYW5kIHlvdSBjYW4gbW9uaXRvciB0aGlzIGJ5XG4gKiByZWdpc3RlcmluZyBhIGxpc3RlbmVyLiBGb3IgZXhhbXBsZSwge0BsaW5rIG1vZHVsZTpvbC9WaWV3flZpZXd9IGhhcyBhXG4gKiBgY2VudGVyYCBwcm9wZXJ0eSwgc28gYHZpZXcub24oJ2NoYW5nZTpjZW50ZXInLCBmdW5jdGlvbihldnQpIHsuLi59KTtgIHdvdWxkXG4gKiBjYWxsIHRoZSBmdW5jdGlvbiB3aGVuZXZlciB0aGUgdmFsdWUgb2YgdGhlIGNlbnRlciBwcm9wZXJ0eSBjaGFuZ2VzLiBXaXRoaW5cbiAqIHRoZSBmdW5jdGlvbiwgYGV2dC50YXJnZXRgIHdvdWxkIGJlIHRoZSB2aWV3LCBzbyBgZXZ0LnRhcmdldC5nZXRDZW50ZXIoKWBcbiAqIHdvdWxkIHJldHVybiB0aGUgbmV3IGNlbnRlci5cbiAqXG4gKiBZb3UgY2FuIGFkZCB5b3VyIG93biBvYnNlcnZhYmxlIHByb3BlcnRpZXMgd2l0aFxuICogYG9iamVjdC5zZXQoJ3Byb3AnLCAndmFsdWUnKWAsIGFuZCByZXRyaWV2ZSB0aGF0IHdpdGggYG9iamVjdC5nZXQoJ3Byb3AnKWAuXG4gKiBZb3UgY2FuIGxpc3RlbiBmb3IgY2hhbmdlcyBvbiB0aGF0IHByb3BlcnR5IHZhbHVlIHdpdGhcbiAqIGBvYmplY3Qub24oJ2NoYW5nZTpwcm9wJywgbGlzdGVuZXIpYC4gWW91IGNhbiBnZXQgYSBsaXN0IG9mIGFsbFxuICogcHJvcGVydGllcyB3aXRoIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3QjZ2V0UHJvcGVydGllc30uXG4gKlxuICogTm90ZSB0aGF0IHRoZSBvYnNlcnZhYmxlIHByb3BlcnRpZXMgYXJlIHNlcGFyYXRlIGZyb20gc3RhbmRhcmQgSlMgcHJvcGVydGllcy5cbiAqIFlvdSBjYW4sIGZvciBleGFtcGxlLCBnaXZlIHlvdXIgbWFwIG9iamVjdCBhIHRpdGxlIHdpdGhcbiAqIGBtYXAudGl0bGU9J05ldyB0aXRsZSdgIGFuZCB3aXRoIGBtYXAuc2V0KCd0aXRsZScsICdBbm90aGVyIHRpdGxlJylgLiBUaGVcbiAqIGZpcnN0IHdpbGwgYmUgYSBgaGFzT3duUHJvcGVydHlgOyB0aGUgc2Vjb25kIHdpbGwgYXBwZWFyIGluXG4gKiBgZ2V0UHJvcGVydGllcygpYC4gT25seSB0aGUgc2Vjb25kIGlzIG9ic2VydmFibGUuXG4gKlxuICogUHJvcGVydGllcyBjYW4gYmUgZGVsZXRlZCBieSB1c2luZyB0aGUgdW5zZXQgbWV0aG9kLiBFLmcuXG4gKiBvYmplY3QudW5zZXQoJ2ZvbycpLlxuICpcbiAqIEBmaXJlcyBPYmplY3RFdmVudFxuICogQGFwaVxuICovXG52YXIgQmFzZU9iamVjdCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKE9ic2VydmFibGUpIHtcbiAgZnVuY3Rpb24gQmFzZU9iamVjdChvcHRfdmFsdWVzKSB7XG4gICAgT2JzZXJ2YWJsZS5jYWxsKHRoaXMpO1xuXG4gICAgLy8gQ2FsbCB7QGxpbmsgbW9kdWxlOm9sL3V0aWx+Z2V0VWlkfSB0byBlbnN1cmUgdGhhdCB0aGUgb3JkZXIgb2Ygb2JqZWN0cycgaWRzIGlzXG4gICAgLy8gdGhlIHNhbWUgYXMgdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgd2VyZSBjcmVhdGVkLiAgVGhpcyBhbHNvIGhlbHBzIHRvXG4gICAgLy8gZW5zdXJlIHRoYXQgb2JqZWN0IHByb3BlcnRpZXMgYXJlIGFsd2F5cyBhZGRlZCBpbiB0aGUgc2FtZSBvcmRlciwgd2hpY2hcbiAgICAvLyBoZWxwcyBtYW55IEphdmFTY3JpcHQgZW5naW5lcyBnZW5lcmF0ZSBmYXN0ZXIgY29kZS5cbiAgICBnZXRVaWQodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgKj59XG4gICAgICovXG4gICAgdGhpcy52YWx1ZXNfID0ge307XG5cbiAgICBpZiAob3B0X3ZhbHVlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnNldFByb3BlcnRpZXMob3B0X3ZhbHVlcyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCBPYnNlcnZhYmxlICkgQmFzZU9iamVjdC5fX3Byb3RvX18gPSBPYnNlcnZhYmxlO1xuICBCYXNlT2JqZWN0LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE9ic2VydmFibGUgJiYgT2JzZXJ2YWJsZS5wcm90b3R5cGUgKTtcbiAgQmFzZU9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCYXNlT2JqZWN0O1xuXG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAqIEByZXR1cm4geyp9IFZhbHVlLlxuICAgKiBAYXBpXG4gICAqL1xuICBCYXNlT2JqZWN0LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQgKGtleSkge1xuICAgIHZhciB2YWx1ZTtcbiAgICBpZiAodGhpcy52YWx1ZXNfLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHZhbHVlID0gdGhpcy52YWx1ZXNfW2tleV07XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IGEgbGlzdCBvZiBvYmplY3QgcHJvcGVydHkgbmFtZXMuXG4gICAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IExpc3Qgb2YgcHJvcGVydHkgbmFtZXMuXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VPYmplY3QucHJvdG90eXBlLmdldEtleXMgPSBmdW5jdGlvbiBnZXRLZXlzICgpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy52YWx1ZXNfKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IGFuIG9iamVjdCBvZiBhbGwgcHJvcGVydHkgbmFtZXMgYW5kIHZhbHVlcy5cbiAgICogQHJldHVybiB7T2JqZWN0PHN0cmluZywgKj59IE9iamVjdC5cbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZU9iamVjdC5wcm90b3R5cGUuZ2V0UHJvcGVydGllcyA9IGZ1bmN0aW9uIGdldFByb3BlcnRpZXMgKCkge1xuICAgIHJldHVybiBhc3NpZ24oe30sIHRoaXMudmFsdWVzXyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAqIEBwYXJhbSB7Kn0gb2xkVmFsdWUgT2xkIHZhbHVlLlxuICAgKi9cbiAgQmFzZU9iamVjdC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5IChrZXksIG9sZFZhbHVlKSB7XG4gICAgdmFyIGV2ZW50VHlwZTtcbiAgICBldmVudFR5cGUgPSBnZXRDaGFuZ2VFdmVudFR5cGUoa2V5KTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9iamVjdEV2ZW50KGV2ZW50VHlwZSwga2V5LCBvbGRWYWx1ZSkpO1xuICAgIGV2ZW50VHlwZSA9IE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9iamVjdEV2ZW50KGV2ZW50VHlwZSwga2V5LCBvbGRWYWx1ZSkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIGEgdmFsdWUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9zaWxlbnQgVXBkYXRlIHdpdGhvdXQgdHJpZ2dlcmluZyBhbiBldmVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZU9iamVjdC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gc2V0IChrZXksIHZhbHVlLCBvcHRfc2lsZW50KSB7XG4gICAgaWYgKG9wdF9zaWxlbnQpIHtcbiAgICAgIHRoaXMudmFsdWVzX1trZXldID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWVzX1trZXldO1xuICAgICAgdGhpcy52YWx1ZXNfW2tleV0gPSB2YWx1ZTtcbiAgICAgIGlmIChvbGRWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdGhpcy5ub3RpZnkoa2V5LCBvbGRWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIGEgY29sbGVjdGlvbiBvZiBrZXktdmFsdWUgcGFpcnMuICBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIGFueSBleGlzdGluZ1xuICAgKiBwcm9wZXJ0aWVzIGFuZCBhZGRzIG5ldyBvbmVzIChpdCBkb2VzIG5vdCByZW1vdmUgYW55IGV4aXN0aW5nIHByb3BlcnRpZXMpLlxuICAgKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsICo+fSB2YWx1ZXMgVmFsdWVzLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfc2lsZW50IFVwZGF0ZSB3aXRob3V0IHRyaWdnZXJpbmcgYW4gZXZlbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VPYmplY3QucHJvdG90eXBlLnNldFByb3BlcnRpZXMgPSBmdW5jdGlvbiBzZXRQcm9wZXJ0aWVzICh2YWx1ZXMsIG9wdF9zaWxlbnQpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWVzKSB7XG4gICAgICB0aGlzLnNldChrZXksIHZhbHVlc1trZXldLCBvcHRfc2lsZW50KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFVuc2V0cyBhIHByb3BlcnR5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfc2lsZW50IFVuc2V0IHdpdGhvdXQgdHJpZ2dlcmluZyBhbiBldmVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZU9iamVjdC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiB1bnNldCAoa2V5LCBvcHRfc2lsZW50KSB7XG4gICAgaWYgKGtleSBpbiB0aGlzLnZhbHVlc18pIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWVzX1trZXldO1xuICAgICAgZGVsZXRlIHRoaXMudmFsdWVzX1trZXldO1xuICAgICAgaWYgKCFvcHRfc2lsZW50KSB7XG4gICAgICAgIHRoaXMubm90aWZ5KGtleSwgb2xkVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQmFzZU9iamVjdDtcbn0oT2JzZXJ2YWJsZSkpO1xuXG5cbi8qKlxuICogQHR5cGUge09iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbnZhciBjaGFuZ2VFdmVudFR5cGVDYWNoZSA9IHt9O1xuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAqIEByZXR1cm4ge3N0cmluZ30gQ2hhbmdlIG5hbWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDaGFuZ2VFdmVudFR5cGUoa2V5KSB7XG4gIHJldHVybiBjaGFuZ2VFdmVudFR5cGVDYWNoZS5oYXNPd25Qcm9wZXJ0eShrZXkpID9cbiAgICBjaGFuZ2VFdmVudFR5cGVDYWNoZVtrZXldIDpcbiAgICAoY2hhbmdlRXZlbnRUeXBlQ2FjaGVba2V5XSA9ICdjaGFuZ2U6JyArIGtleSk7XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgQmFzZU9iamVjdDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JqZWN0LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9Db2xsZWN0aW9uXG4gKi9cbmltcG9ydCBBc3NlcnRpb25FcnJvciBmcm9tICcuL0Fzc2VydGlvbkVycm9yLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uRXZlbnRUeXBlIGZyb20gJy4vQ29sbGVjdGlvbkV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuL09iamVjdC5qcyc7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi9ldmVudHMvRXZlbnQuanMnO1xuXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBQcm9wZXJ0eSA9IHtcbiAgTEVOR1RIOiAnbGVuZ3RoJ1xufTtcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZiB0aGlzXG4gKiB0eXBlLlxuICovXG5leHBvcnQgdmFyIENvbGxlY3Rpb25FdmVudCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50KSB7XG4gIGZ1bmN0aW9uIENvbGxlY3Rpb25FdmVudCh0eXBlLCBvcHRfZWxlbWVudCkge1xuICAgIEV2ZW50LmNhbGwodGhpcywgdHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZWxlbWVudCB0aGF0IGlzIGFkZGVkIHRvIG9yIHJlbW92ZWQgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAdHlwZSB7Kn1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5lbGVtZW50ID0gb3B0X2VsZW1lbnQ7XG5cbiAgfVxuXG4gIGlmICggRXZlbnQgKSBDb2xsZWN0aW9uRXZlbnQuX19wcm90b19fID0gRXZlbnQ7XG4gIENvbGxlY3Rpb25FdmVudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBFdmVudCAmJiBFdmVudC5wcm90b3R5cGUgKTtcbiAgQ29sbGVjdGlvbkV2ZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENvbGxlY3Rpb25FdmVudDtcblxuICByZXR1cm4gQ29sbGVjdGlvbkV2ZW50O1xufShFdmVudCkpO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbdW5pcXVlPWZhbHNlXSBEaXNhbGxvdyB0aGUgc2FtZSBpdGVtIGZyb20gYmVpbmcgYWRkZWQgdG9cbiAqIHRoZSBjb2xsZWN0aW9uIHR3aWNlLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQW4gZXhwYW5kZWQgdmVyc2lvbiBvZiBzdGFuZGFyZCBKUyBBcnJheSwgYWRkaW5nIGNvbnZlbmllbmNlIG1ldGhvZHMgZm9yXG4gKiBtYW5pcHVsYXRpb24uIEFkZCBhbmQgcmVtb3ZlIGNoYW5nZXMgdG8gdGhlIENvbGxlY3Rpb24gdHJpZ2dlciBhIENvbGxlY3Rpb25cbiAqIGV2ZW50LiBOb3RlIHRoYXQgdGhpcyBkb2VzIG5vdCBjb3ZlciBjaGFuZ2VzIHRvIHRoZSBvYmplY3RzIF93aXRoaW5fIHRoZVxuICogQ29sbGVjdGlvbjsgdGhleSB0cmlnZ2VyIGV2ZW50cyBvbiB0aGUgYXBwcm9wcmlhdGUgb2JqZWN0LCBub3Qgb24gdGhlXG4gKiBDb2xsZWN0aW9uIGFzIGEgd2hvbGUuXG4gKlxuICogQGZpcmVzIENvbGxlY3Rpb25FdmVudFxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAYXBpXG4gKi9cbnZhciBDb2xsZWN0aW9uID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoQmFzZU9iamVjdCkge1xuICBmdW5jdGlvbiBDb2xsZWN0aW9uKG9wdF9hcnJheSwgb3B0X29wdGlvbnMpIHtcblxuICAgIEJhc2VPYmplY3QuY2FsbCh0aGlzKTtcblxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMudW5pcXVlXyA9ICEhb3B0aW9ucy51bmlxdWU7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshQXJyYXk8VD59XG4gICAgICovXG4gICAgdGhpcy5hcnJheV8gPSBvcHRfYXJyYXkgPyBvcHRfYXJyYXkgOiBbXTtcblxuICAgIGlmICh0aGlzLnVuaXF1ZV8pIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMuYXJyYXlfLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdGhpcy5hc3NlcnRVbmlxdWVfKHRoaXMuYXJyYXlfW2ldLCBpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUxlbmd0aF8oKTtcblxuICB9XG5cbiAgaWYgKCBCYXNlT2JqZWN0ICkgQ29sbGVjdGlvbi5fX3Byb3RvX18gPSBCYXNlT2JqZWN0O1xuICBDb2xsZWN0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEJhc2VPYmplY3QgJiYgQmFzZU9iamVjdC5wcm90b3R5cGUgKTtcbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDb2xsZWN0aW9uO1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIGVsZW1lbnRzIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIENvbGxlY3Rpb24ucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIgKCkge1xuICAgIHdoaWxlICh0aGlzLmdldExlbmd0aCgpID4gMCkge1xuICAgICAgdGhpcy5wb3AoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBlbGVtZW50cyB0byB0aGUgY29sbGVjdGlvbi4gIFRoaXMgcHVzaGVzIGVhY2ggaXRlbSBpbiB0aGUgcHJvdmlkZWQgYXJyYXlcbiAgICogdG8gdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICogQHBhcmFtIHshQXJyYXk8VD59IGFyciBBcnJheS5cbiAgICogQHJldHVybiB7Q29sbGVjdGlvbjxUPn0gVGhpcyBjb2xsZWN0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBDb2xsZWN0aW9uLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbiBleHRlbmQgKGFycikge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGFyci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICB0aGlzLnB1c2goYXJyW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEl0ZXJhdGUgb3ZlciBlYWNoIGVsZW1lbnQsIGNhbGxpbmcgdGhlIHByb3ZpZGVkIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFQsIG51bWJlciwgQXJyYXk8VD4pOiAqfSBmIFRoZSBmdW5jdGlvbiB0byBjYWxsXG4gICAqICAgICBmb3IgZXZlcnkgZWxlbWVudC4gVGhpcyBmdW5jdGlvbiB0YWtlcyAzIGFyZ3VtZW50cyAodGhlIGVsZW1lbnQsIHRoZVxuICAgKiAgICAgaW5kZXggYW5kIHRoZSBhcnJheSkuIFRoZSByZXR1cm4gdmFsdWUgaXMgaWdub3JlZC5cbiAgICogQGFwaVxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2ggKGYpIHtcbiAgICB2YXIgYXJyYXkgPSB0aGlzLmFycmF5XztcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhcnJheS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBmKGFycmF5W2ldLCBpLCBhcnJheSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgYSByZWZlcmVuY2UgdG8gdGhlIHVuZGVybHlpbmcgQXJyYXkgb2JqZWN0LiBXYXJuaW5nOiBpZiB0aGUgYXJyYXlcbiAgICogaXMgbXV0YXRlZCwgbm8gZXZlbnRzIHdpbGwgYmUgZGlzcGF0Y2hlZCBieSB0aGUgY29sbGVjdGlvbiwgYW5kIHRoZVxuICAgKiBjb2xsZWN0aW9uJ3MgXCJsZW5ndGhcIiBwcm9wZXJ0eSB3b24ndCBiZSBpbiBzeW5jIHdpdGggdGhlIGFjdHVhbCBsZW5ndGhcbiAgICogb2YgdGhlIGFycmF5LlxuICAgKiBAcmV0dXJuIHshQXJyYXk8VD59IEFycmF5LlxuICAgKiBAYXBpXG4gICAqL1xuICBDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXRBcnJheSA9IGZ1bmN0aW9uIGdldEFycmF5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5hcnJheV87XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICogQHJldHVybiB7VH0gRWxlbWVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUuaXRlbSA9IGZ1bmN0aW9uIGl0ZW0gKGluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXMuYXJyYXlfW2luZGV4XTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBsZW5ndGggb2YgdGhpcyBjb2xsZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBsZW5ndGggb2YgdGhlIGFycmF5LlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXRMZW5ndGggPSBmdW5jdGlvbiBnZXRMZW5ndGggKCkge1xuICAgIHJldHVybiB0aGlzLmdldChQcm9wZXJ0eS5MRU5HVEgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbnNlcnQgYW4gZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIENvbGxlY3Rpb24ucHJvdG90eXBlLmluc2VydEF0ID0gZnVuY3Rpb24gaW5zZXJ0QXQgKGluZGV4LCBlbGVtKSB7XG4gICAgaWYgKHRoaXMudW5pcXVlXykge1xuICAgICAgdGhpcy5hc3NlcnRVbmlxdWVfKGVsZW0pO1xuICAgIH1cbiAgICB0aGlzLmFycmF5Xy5zcGxpY2UoaW5kZXgsIDAsIGVsZW0pO1xuICAgIHRoaXMudXBkYXRlTGVuZ3RoXygpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIGVsZW0pKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBsYXN0IGVsZW1lbnQgb2YgdGhlIGNvbGxlY3Rpb24gYW5kIHJldHVybiBpdC5cbiAgICogUmV0dXJuIGB1bmRlZmluZWRgIGlmIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5LlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gRWxlbWVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24gcG9wICgpIHtcbiAgICByZXR1cm4gdGhpcy5yZW1vdmVBdCh0aGlzLmdldExlbmd0aCgpIC0gMSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluc2VydCB0aGUgcHJvdmlkZWQgZWxlbWVudCBhdCB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICogQHJldHVybiB7bnVtYmVyfSBOZXcgbGVuZ3RoIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBDb2xsZWN0aW9uLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gcHVzaCAoZWxlbSkge1xuICAgIGlmICh0aGlzLnVuaXF1ZV8pIHtcbiAgICAgIHRoaXMuYXNzZXJ0VW5pcXVlXyhlbGVtKTtcbiAgICB9XG4gICAgdmFyIG4gPSB0aGlzLmdldExlbmd0aCgpO1xuICAgIHRoaXMuaW5zZXJ0QXQobiwgZWxlbSk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0TGVuZ3RoKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBlbGVtZW50IGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgZWxlbWVudCBvciB1bmRlZmluZWQgaWYgbm9uZSBmb3VuZC5cbiAgICogQGFwaVxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlIChlbGVtKSB7XG4gICAgdmFyIGFyciA9IHRoaXMuYXJyYXlfO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGFyci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBpZiAoYXJyW2ldID09PSBlbGVtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZUF0KGkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGVsZW1lbnQgYXQgdGhlIHByb3ZpZGVkIGluZGV4IGFuZCByZXR1cm4gaXQuXG4gICAqIFJldHVybiBgdW5kZWZpbmVkYCBpZiB0aGUgY29sbGVjdGlvbiBkb2VzIG5vdCBjb250YWluIHRoaXMgaW5kZXguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFZhbHVlLlxuICAgKiBAYXBpXG4gICAqL1xuICBDb2xsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVBdCA9IGZ1bmN0aW9uIHJlbW92ZUF0IChpbmRleCkge1xuICAgIHZhciBwcmV2ID0gdGhpcy5hcnJheV9baW5kZXhdO1xuICAgIHRoaXMuYXJyYXlfLnNwbGljZShpbmRleCwgMSk7XG4gICAgdGhpcy51cGRhdGVMZW5ndGhfKCk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIHByZXYpKTtcbiAgICByZXR1cm4gcHJldjtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBlbGVtZW50IGF0IHRoZSBwcm92aWRlZCBpbmRleC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUuc2V0QXQgPSBmdW5jdGlvbiBzZXRBdCAoaW5kZXgsIGVsZW0pIHtcbiAgICB2YXIgbiA9IHRoaXMuZ2V0TGVuZ3RoKCk7XG4gICAgaWYgKGluZGV4IDwgbikge1xuICAgICAgaWYgKHRoaXMudW5pcXVlXykge1xuICAgICAgICB0aGlzLmFzc2VydFVuaXF1ZV8oZWxlbSwgaW5kZXgpO1xuICAgICAgfVxuICAgICAgdmFyIHByZXYgPSB0aGlzLmFycmF5X1tpbmRleF07XG4gICAgICB0aGlzLmFycmF5X1tpbmRleF0gPSBlbGVtO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxuICAgICAgICBuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBwcmV2KSk7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgIG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIGVsZW0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaiA9IG47IGogPCBpbmRleDsgKytqKSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0QXQoaiwgdW5kZWZpbmVkKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5zZXJ0QXQoaW5kZXgsIGVsZW0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIENvbGxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZUxlbmd0aF8gPSBmdW5jdGlvbiB1cGRhdGVMZW5ndGhfICgpIHtcbiAgICB0aGlzLnNldChQcm9wZXJ0eS5MRU5HVEgsIHRoaXMuYXJyYXlfLmxlbmd0aCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9leGNlcHQgT3B0aW9uYWwgaW5kZXggdG8gaWdub3JlLlxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUuYXNzZXJ0VW5pcXVlXyA9IGZ1bmN0aW9uIGFzc2VydFVuaXF1ZV8gKGVsZW0sIG9wdF9leGNlcHQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmFycmF5Xy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBpZiAodGhpcy5hcnJheV9baV0gPT09IGVsZW0gJiYgaSAhPT0gb3B0X2V4Y2VwdCkge1xuICAgICAgICB0aHJvdyBuZXcgQXNzZXJ0aW9uRXJyb3IoNTgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQ29sbGVjdGlvbjtcbn0oQmFzZU9iamVjdCkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IENvbGxlY3Rpb247XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbGxlY3Rpb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcEV2ZW50XG4gKi9cbmltcG9ydCBFdmVudCBmcm9tICcuL2V2ZW50cy9FdmVudC5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYXMgbWFwIGV2ZW50cyBhcmUgaW5zdGFuY2VzIG9mIHRoaXMgdHlwZS5cbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL1BsdWdnYWJsZU1hcH5QbHVnZ2FibGVNYXB9IGZvciB3aGljaCBldmVudHMgdHJpZ2dlciBhIG1hcCBldmVudC5cbiAqL1xudmFyIE1hcEV2ZW50ID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoRXZlbnQpIHtcbiAgZnVuY3Rpb24gTWFwRXZlbnQodHlwZSwgbWFwLCBvcHRfZnJhbWVTdGF0ZSkge1xuXG4gICAgRXZlbnQuY2FsbCh0aGlzLCB0eXBlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBtYXAgd2hlcmUgdGhlIGV2ZW50IG9jY3VycmVkLlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLm1hcCA9IG1hcDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBmcmFtZSBzdGF0ZSBhdCB0aGUgdGltZSBvZiB0aGUgZXZlbnQuXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmZyYW1lU3RhdGUgPSBvcHRfZnJhbWVTdGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0X2ZyYW1lU3RhdGUgOiBudWxsO1xuXG4gIH1cblxuICBpZiAoIEV2ZW50ICkgTWFwRXZlbnQuX19wcm90b19fID0gRXZlbnQ7XG4gIE1hcEV2ZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2ZW50ICYmIEV2ZW50LnByb3RvdHlwZSApO1xuICBNYXBFdmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNYXBFdmVudDtcblxuICByZXR1cm4gTWFwRXZlbnQ7XG59KEV2ZW50KSk7XG5cbmV4cG9ydCBkZWZhdWx0IE1hcEV2ZW50O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBFdmVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwQnJvd3NlckV2ZW50XG4gKi9cbmltcG9ydCBNYXBFdmVudCBmcm9tICcuL01hcEV2ZW50LmpzJztcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBhcyBtYXAgYnJvd3NlciBldmVudHMgYXJlIGluc3RhbmNlcyBvZiB0aGlzIHR5cGUuXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9QbHVnZ2FibGVNYXB+UGx1Z2dhYmxlTWFwfSBmb3Igd2hpY2ggZXZlbnRzIHRyaWdnZXIgYSBtYXAgYnJvd3NlciBldmVudC5cbiAqL1xudmFyIE1hcEJyb3dzZXJFdmVudCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKE1hcEV2ZW50KSB7XG4gIGZ1bmN0aW9uIE1hcEJyb3dzZXJFdmVudCh0eXBlLCBtYXAsIGJyb3dzZXJFdmVudCwgb3B0X2RyYWdnaW5nLCBvcHRfZnJhbWVTdGF0ZSkge1xuXG4gICAgTWFwRXZlbnQuY2FsbCh0aGlzLCB0eXBlLCBtYXAsIG9wdF9mcmFtZVN0YXRlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBvcmlnaW5hbCBicm93c2VyIGV2ZW50LlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHtFdmVudH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5vcmlnaW5hbEV2ZW50ID0gYnJvd3NlckV2ZW50O1xuXG4gICAgLyoqXG4gICAgICogVGhlIG1hcCBwaXhlbCByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQgY29ycmVzcG9uZGluZyB0byB0aGUgb3JpZ2luYWwgYnJvd3NlciBldmVudC5cbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5waXhlbCA9IG1hcC5nZXRFdmVudFBpeGVsKGJyb3dzZXJFdmVudCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY29vcmRpbmF0ZSBpbiB2aWV3IHByb2plY3Rpb24gY29ycmVzcG9uZGluZyB0byB0aGUgb3JpZ2luYWwgYnJvd3NlciBldmVudC5cbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuY29vcmRpbmF0ZSA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsKHRoaXMucGl4ZWwpO1xuXG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGlmIHRoZSBtYXAgaXMgY3VycmVudGx5IGJlaW5nIGRyYWdnZWQuIE9ubHkgc2V0IGZvclxuICAgICAqIGBQT0lOVEVSRFJBR2AgYW5kIGBQT0lOVEVSTU9WRWAgZXZlbnRzLiBEZWZhdWx0IGlzIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5kcmFnZ2luZyA9IG9wdF9kcmFnZ2luZyAhPT0gdW5kZWZpbmVkID8gb3B0X2RyYWdnaW5nIDogZmFsc2U7XG5cbiAgfVxuXG4gIGlmICggTWFwRXZlbnQgKSBNYXBCcm93c2VyRXZlbnQuX19wcm90b19fID0gTWFwRXZlbnQ7XG4gIE1hcEJyb3dzZXJFdmVudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBNYXBFdmVudCAmJiBNYXBFdmVudC5wcm90b3R5cGUgKTtcbiAgTWFwQnJvd3NlckV2ZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE1hcEJyb3dzZXJFdmVudDtcblxuICAvKipcbiAgICogUHJldmVudHMgdGhlIGRlZmF1bHQgYnJvd3NlciBhY3Rpb24uXG4gICAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvZXZlbnQucHJldmVudERlZmF1bHQuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBNYXBCcm93c2VyRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gcHJldmVudERlZmF1bHQgKCkge1xuICAgIE1hcEV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdC5jYWxsKHRoaXMpO1xuICAgIHRoaXMub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcmV2ZW50cyBmdXJ0aGVyIHByb3BhZ2F0aW9uIG9mIHRoZSBjdXJyZW50IGV2ZW50LlxuICAgKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL2V2ZW50LnN0b3BQcm9wYWdhdGlvbi5cbiAgICogQG92ZXJyaWRlXG4gICAqIEBhcGlcbiAgICovXG4gIE1hcEJyb3dzZXJFdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uICgpIHtcbiAgICBNYXBFdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uLmNhbGwodGhpcyk7XG4gICAgdGhpcy5vcmlnaW5hbEV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9O1xuXG4gIHJldHVybiBNYXBCcm93c2VyRXZlbnQ7XG59KE1hcEV2ZW50KSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgTWFwQnJvd3NlckV2ZW50O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBCcm93c2VyRXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2hhc1xuICovXG5cbnZhciB1YSA9IHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnID9cbiAgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpIDogJyc7XG5cbi8qKlxuICogVXNlciBhZ2VudCBzdHJpbmcgc2F5cyB3ZSBhcmUgZGVhbGluZyB3aXRoIEZpcmVmb3ggYXMgYnJvd3Nlci5cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIEZJUkVGT1ggPSB1YS5pbmRleE9mKCdmaXJlZm94JykgIT09IC0xO1xuXG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBTYWZhcmkgYXMgYnJvd3Nlci5cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIFNBRkFSSSA9IHVhLmluZGV4T2YoJ3NhZmFyaScpICE9PSAtMSAmJiB1YS5pbmRleE9mKCdjaHJvbScpID09IC0xO1xuXG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBhIFdlYktpdCBlbmdpbmUuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBXRUJLSVQgPSB1YS5pbmRleE9mKCd3ZWJraXQnKSAhPT0gLTEgJiYgdWEuaW5kZXhPZignZWRnZScpID09IC0xO1xuXG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBhIE1hYyBhcyBwbGF0Zm9ybS5cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIE1BQyA9IHVhLmluZGV4T2YoJ21hY2ludG9zaCcpICE9PSAtMTtcblxuXG4vKipcbiAqIFRoZSByYXRpbyBiZXR3ZWVuIHBoeXNpY2FsIHBpeGVscyBhbmQgZGV2aWNlLWluZGVwZW5kZW50IHBpeGVsc1xuICogKGRpcHMpIG9uIHRoZSBkZXZpY2UgKGB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb2ApLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIERFVklDRV9QSVhFTF9SQVRJTyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG5cblxuLyoqXG4gKiBUcnVlIGlmIHRoZSBicm93c2VyJ3MgQ2FudmFzIGltcGxlbWVudGF0aW9uIGltcGxlbWVudHMge2dldCxzZXR9TGluZURhc2guXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBDQU5WQVNfTElORV9EQVNIID0gZnVuY3Rpb24oKSB7XG4gIHZhciBoYXMgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICBoYXMgPSAhIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLmdldENvbnRleHQoJzJkJykuc2V0TGluZURhc2g7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBwYXNzXG4gIH1cbiAgcmV0dXJuIGhhcztcbn0oKTtcblxuXG4vKipcbiAqIElzIEhUTUw1IGdlb2xvY2F0aW9uIHN1cHBvcnRlZCBpbiB0aGUgY3VycmVudCBicm93c2VyP1xuICogQGNvbnN0XG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBHRU9MT0NBVElPTiA9ICdnZW9sb2NhdGlvbicgaW4gbmF2aWdhdG9yO1xuXG5cbi8qKlxuICogVHJ1ZSBpZiBicm93c2VyIHN1cHBvcnRzIHRvdWNoIGV2ZW50cy5cbiAqIEBjb25zdFxuICogQHR5cGUge2Jvb2xlYW59XG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgVE9VQ0ggPSAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3c7XG5cblxuLyoqXG4gKiBUcnVlIGlmIGJyb3dzZXIgc3VwcG9ydHMgcG9pbnRlciBldmVudHMuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIFBPSU5URVIgPSAnUG9pbnRlckV2ZW50JyBpbiB3aW5kb3c7XG5cblxuLyoqXG4gKiBUcnVlIGlmIGJyb3dzZXIgc3VwcG9ydHMgbXMgcG9pbnRlciBldmVudHMgKElFIDEwKS5cbiAqIEBjb25zdFxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgTVNQT0lOVEVSID0gISEobmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQpO1xuXG5cbmV4cG9ydCB7SEFTIGFzIFdFQkdMfSBmcm9tICcuL3dlYmdsLmpzJztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBCcm93c2VyRXZlbnRUeXBlXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcblxuLyoqXG4gKiBDb25zdGFudHMgZm9yIGV2ZW50IG5hbWVzLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuXG4gIC8qKlxuICAgKiBBIHRydWUgc2luZ2xlIGNsaWNrIHdpdGggbm8gZHJhZ2dpbmcgYW5kIG5vIGRvdWJsZSBjbGljay4gTm90ZSB0aGF0IHRoaXNcbiAgICogZXZlbnQgaXMgZGVsYXllZCBieSAyNTAgbXMgdG8gZW5zdXJlIHRoYXQgaXQgaXMgbm90IGEgZG91YmxlIGNsaWNrLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjc2luZ2xlY2xpY2tcbiAgICogQGFwaVxuICAgKi9cbiAgU0lOR0xFQ0xJQ0s6ICdzaW5nbGVjbGljaycsXG5cbiAgLyoqXG4gICAqIEEgY2xpY2sgd2l0aCBubyBkcmFnZ2luZy4gQSBkb3VibGUgY2xpY2sgd2lsbCBmaXJlIHR3byBvZiB0aGlzLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjY2xpY2tcbiAgICogQGFwaVxuICAgKi9cbiAgQ0xJQ0s6IEV2ZW50VHlwZS5DTElDSyxcblxuICAvKipcbiAgICogQSB0cnVlIGRvdWJsZSBjbGljaywgd2l0aCBubyBkcmFnZ2luZy5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I2RibGNsaWNrXG4gICAqIEBhcGlcbiAgICovXG4gIERCTENMSUNLOiBFdmVudFR5cGUuREJMQ0xJQ0ssXG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIGEgcG9pbnRlciBpcyBkcmFnZ2VkLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjcG9pbnRlcmRyYWdcbiAgICogQGFwaVxuICAgKi9cbiAgUE9JTlRFUkRSQUc6ICdwb2ludGVyZHJhZycsXG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIGEgcG9pbnRlciBpcyBtb3ZlZC4gTm90ZSB0aGF0IG9uIHRvdWNoIGRldmljZXMgdGhpcyBpc1xuICAgKiB0cmlnZ2VyZWQgd2hlbiB0aGUgbWFwIGlzIHBhbm5lZCwgc28gaXMgbm90IHRoZSBzYW1lIGFzIG1vdXNlbW92ZS5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I3BvaW50ZXJtb3ZlXG4gICAqIEBhcGlcbiAgICovXG4gIFBPSU5URVJNT1ZFOiAncG9pbnRlcm1vdmUnLFxuXG4gIFBPSU5URVJET1dOOiAncG9pbnRlcmRvd24nLFxuICBQT0lOVEVSVVA6ICdwb2ludGVydXAnLFxuICBQT0lOVEVST1ZFUjogJ3BvaW50ZXJvdmVyJyxcbiAgUE9JTlRFUk9VVDogJ3BvaW50ZXJvdXQnLFxuICBQT0lOVEVSRU5URVI6ICdwb2ludGVyZW50ZXInLFxuICBQT0lOVEVSTEVBVkU6ICdwb2ludGVybGVhdmUnLFxuICBQT0lOVEVSQ0FOQ0VMOiAncG9pbnRlcmNhbmNlbCdcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcEJyb3dzZXJFdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcEJyb3dzZXJQb2ludGVyRXZlbnRcbiAqL1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudCBmcm9tICcuL01hcEJyb3dzZXJFdmVudC5qcyc7XG5cbnZhciBNYXBCcm93c2VyUG9pbnRlckV2ZW50ID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoTWFwQnJvd3NlckV2ZW50KSB7XG4gIGZ1bmN0aW9uIE1hcEJyb3dzZXJQb2ludGVyRXZlbnQodHlwZSwgbWFwLCBwb2ludGVyRXZlbnQsIG9wdF9kcmFnZ2luZywgb3B0X2ZyYW1lU3RhdGUpIHtcblxuICAgIE1hcEJyb3dzZXJFdmVudC5jYWxsKHRoaXMsIHR5cGUsIG1hcCwgcG9pbnRlckV2ZW50Lm9yaWdpbmFsRXZlbnQsIG9wdF9kcmFnZ2luZywgb3B0X2ZyYW1lU3RhdGUpO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0XG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vcG9pbnRlci9Qb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLnBvaW50ZXJFdmVudCA9IHBvaW50ZXJFdmVudDtcblxuICB9XG5cbiAgaWYgKCBNYXBCcm93c2VyRXZlbnQgKSBNYXBCcm93c2VyUG9pbnRlckV2ZW50Ll9fcHJvdG9fXyA9IE1hcEJyb3dzZXJFdmVudDtcbiAgTWFwQnJvd3NlclBvaW50ZXJFdmVudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBNYXBCcm93c2VyRXZlbnQgJiYgTWFwQnJvd3NlckV2ZW50LnByb3RvdHlwZSApO1xuICBNYXBCcm93c2VyUG9pbnRlckV2ZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE1hcEJyb3dzZXJQb2ludGVyRXZlbnQ7XG5cbiAgcmV0dXJuIE1hcEJyb3dzZXJQb2ludGVyRXZlbnQ7XG59KE1hcEJyb3dzZXJFdmVudCkpO1xuXG5leHBvcnQgZGVmYXVsdCBNYXBCcm93c2VyUG9pbnRlckV2ZW50O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wb2ludGVyL0V2ZW50VHlwZVxuICovXG5cbi8qKlxuICogQ29uc3RhbnRzIGZvciBldmVudCBuYW1lcy5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgUE9JTlRFUk1PVkU6ICdwb2ludGVybW92ZScsXG4gIFBPSU5URVJET1dOOiAncG9pbnRlcmRvd24nLFxuICBQT0lOVEVSVVA6ICdwb2ludGVydXAnLFxuICBQT0lOVEVST1ZFUjogJ3BvaW50ZXJvdmVyJyxcbiAgUE9JTlRFUk9VVDogJ3BvaW50ZXJvdXQnLFxuICBQT0lOVEVSRU5URVI6ICdwb2ludGVyZW50ZXInLFxuICBQT0lOVEVSTEVBVkU6ICdwb2ludGVybGVhdmUnLFxuICBQT0lOVEVSQ0FOQ0VMOiAncG9pbnRlcmNhbmNlbCdcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcG9pbnRlci9FdmVudFNvdXJjZVxuICovXG5cbnZhciBFdmVudFNvdXJjZSA9IGZ1bmN0aW9uIEV2ZW50U291cmNlKGRpc3BhdGNoZXIsIG1hcHBpbmcpIHtcblxuICAvKipcbiAgICogQHR5cGUge2ltcG9ydChcIi4vUG9pbnRlckV2ZW50SGFuZGxlci5qc1wiKS5kZWZhdWx0fVxuICAgKi9cbiAgdGhpcy5kaXNwYXRjaGVyID0gZGlzcGF0Y2hlcjtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQGNvbnN0XG4gICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgZnVuY3Rpb24oRXZlbnQpPn1cbiAgICovXG4gIHRoaXMubWFwcGluZ18gPSBtYXBwaW5nO1xufTtcblxuLyoqXG4gKiBMaXN0IG9mIGV2ZW50cyBzdXBwb3J0ZWQgYnkgdGhpcyBzb3VyY2UuXG4gKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBFdmVudCBuYW1lc1xuICovXG5FdmVudFNvdXJjZS5wcm90b3R5cGUuZ2V0RXZlbnRzID0gZnVuY3Rpb24gZ2V0RXZlbnRzICgpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMubWFwcGluZ18pO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBoYW5kbGVyIHRoYXQgc2hvdWxkIGhhbmRsZSBhIGdpdmVuIGV2ZW50IHR5cGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlIFRoZSBldmVudCB0eXBlLlxuICogQHJldHVybiB7ZnVuY3Rpb24oRXZlbnQpfSBIYW5kbGVyXG4gKi9cbkV2ZW50U291cmNlLnByb3RvdHlwZS5nZXRIYW5kbGVyRm9yRXZlbnQgPSBmdW5jdGlvbiBnZXRIYW5kbGVyRm9yRXZlbnQgKGV2ZW50VHlwZSkge1xuICByZXR1cm4gdGhpcy5tYXBwaW5nX1tldmVudFR5cGVdO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRXZlbnRTb3VyY2U7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50U291cmNlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wb2ludGVyL01vdXNlU291cmNlXG4gKi9cblxuLy8gQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL1BvbHltZXIvUG9pbnRlckV2ZW50c1xuXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTMgVGhlIFBvbHltZXIgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vXG4vLyBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbi8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmVcbi8vIG1ldDpcbi8vXG4vLyAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0XG4vLyBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4vLyAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmVcbi8vIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXJcbi8vIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGVcbi8vIGRpc3RyaWJ1dGlvbi5cbi8vICogTmVpdGhlciB0aGUgbmFtZSBvZiBHb29nbGUgSW5jLiBub3IgdGhlIG5hbWVzIG9mIGl0c1xuLy8gY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbi8vIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4vL1xuLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SU1xuLy8gXCJBUyBJU1wiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVFxuLy8gTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SXG4vLyBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVFxuLy8gT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsXG4vLyBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UXG4vLyBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSxcbi8vIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWVxuLy8gVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuLy8gKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG4vLyBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuXG5pbXBvcnQgRXZlbnRTb3VyY2UgZnJvbSAnLi9FdmVudFNvdXJjZS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIFBPSU5URVJfSUQgPSAxO1xuXG5cbi8qKlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBQT0lOVEVSX1RZUEUgPSAnbW91c2UnO1xuXG5cbi8qKlxuICogUmFkaXVzIGFyb3VuZCB0b3VjaGVuZCB0aGF0IHN3YWxsb3dzIG1vdXNlIGV2ZW50cy5cbiAqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG52YXIgREVEVVBfRElTVCA9IDI1O1xuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBtb3VzZWRvd25gLlxuICpcbiAqIEB0aGlzIHtNb3VzZVNvdXJjZX1cbiAqIEBwYXJhbSB7TW91c2VFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIG1vdXNlZG93bihpbkV2ZW50KSB7XG4gIGlmICghdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoXyhpbkV2ZW50KSkge1xuICAgIC8vIFRPRE8oZGZyZWVkbWFuKSB3b3JrYXJvdW5kIGZvciBzb21lIGVsZW1lbnRzIG5vdCBzZW5kaW5nIG1vdXNldXBcbiAgICAvLyBodHRwOi8vY3JidWcvMTQ5MDkxXG4gICAgaWYgKFBPSU5URVJfSUQudG9TdHJpbmcoKSBpbiB0aGlzLnBvaW50ZXJNYXApIHtcbiAgICAgIHRoaXMuY2FuY2VsKGluRXZlbnQpO1xuICAgIH1cbiAgICB2YXIgZSA9IHByZXBhcmVFdmVudChpbkV2ZW50LCB0aGlzLmRpc3BhdGNoZXIpO1xuICAgIHRoaXMucG9pbnRlck1hcFtQT0lOVEVSX0lELnRvU3RyaW5nKCldID0gaW5FdmVudDtcbiAgICB0aGlzLmRpc3BhdGNoZXIuZG93bihlLCBpbkV2ZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBtb3VzZW1vdmVgLlxuICpcbiAqIEB0aGlzIHtNb3VzZVNvdXJjZX1cbiAqIEBwYXJhbSB7TW91c2VFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIG1vdXNlbW92ZShpbkV2ZW50KSB7XG4gIGlmICghdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoXyhpbkV2ZW50KSkge1xuICAgIHZhciBlID0gcHJlcGFyZUV2ZW50KGluRXZlbnQsIHRoaXMuZGlzcGF0Y2hlcik7XG4gICAgdGhpcy5kaXNwYXRjaGVyLm1vdmUoZSwgaW5FdmVudCk7XG4gIH1cbn1cblxuLyoqXG4gKiBIYW5kbGVyIGZvciBgbW91c2V1cGAuXG4gKlxuICogQHRoaXMge01vdXNlU291cmNlfVxuICogQHBhcmFtIHtNb3VzZUV2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gbW91c2V1cChpbkV2ZW50KSB7XG4gIGlmICghdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoXyhpbkV2ZW50KSkge1xuICAgIHZhciBwID0gdGhpcy5wb2ludGVyTWFwW1BPSU5URVJfSUQudG9TdHJpbmcoKV07XG5cbiAgICBpZiAocCAmJiBwLmJ1dHRvbiA9PT0gaW5FdmVudC5idXR0b24pIHtcbiAgICAgIHZhciBlID0gcHJlcGFyZUV2ZW50KGluRXZlbnQsIHRoaXMuZGlzcGF0Y2hlcik7XG4gICAgICB0aGlzLmRpc3BhdGNoZXIudXAoZSwgaW5FdmVudCk7XG4gICAgICB0aGlzLmNsZWFudXBNb3VzZSgpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBtb3VzZW92ZXJgLlxuICpcbiAqIEB0aGlzIHtNb3VzZVNvdXJjZX1cbiAqIEBwYXJhbSB7TW91c2VFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIG1vdXNlb3ZlcihpbkV2ZW50KSB7XG4gIGlmICghdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoXyhpbkV2ZW50KSkge1xuICAgIHZhciBlID0gcHJlcGFyZUV2ZW50KGluRXZlbnQsIHRoaXMuZGlzcGF0Y2hlcik7XG4gICAgdGhpcy5kaXNwYXRjaGVyLmVudGVyT3ZlcihlLCBpbkV2ZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBtb3VzZW91dGAuXG4gKlxuICogQHRoaXMge01vdXNlU291cmNlfVxuICogQHBhcmFtIHtNb3VzZUV2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gbW91c2VvdXQoaW5FdmVudCkge1xuICBpZiAoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaF8oaW5FdmVudCkpIHtcbiAgICB2YXIgZSA9IHByZXBhcmVFdmVudChpbkV2ZW50LCB0aGlzLmRpc3BhdGNoZXIpO1xuICAgIHRoaXMuZGlzcGF0Y2hlci5sZWF2ZU91dChlLCBpbkV2ZW50KTtcbiAgfVxufVxuXG5cbnZhciBNb3VzZVNvdXJjZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50U291cmNlKSB7XG4gIGZ1bmN0aW9uIE1vdXNlU291cmNlKGRpc3BhdGNoZXIpIHtcbiAgICB2YXIgbWFwcGluZyA9IHtcbiAgICAgICdtb3VzZWRvd24nOiBtb3VzZWRvd24sXG4gICAgICAnbW91c2Vtb3ZlJzogbW91c2Vtb3ZlLFxuICAgICAgJ21vdXNldXAnOiBtb3VzZXVwLFxuICAgICAgJ21vdXNlb3Zlcic6IG1vdXNlb3ZlcixcbiAgICAgICdtb3VzZW91dCc6IG1vdXNlb3V0XG4gICAgfTtcbiAgICBFdmVudFNvdXJjZS5jYWxsKHRoaXMsIGRpc3BhdGNoZXIsIG1hcHBpbmcpO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0XG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBFdmVudHxPYmplY3Q+fVxuICAgICAqL1xuICAgIHRoaXMucG9pbnRlck1hcCA9IGRpc3BhdGNoZXIucG9pbnRlck1hcDtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbD59XG4gICAgICovXG4gICAgdGhpcy5sYXN0VG91Y2hlcyA9IFtdO1xuICB9XG5cbiAgaWYgKCBFdmVudFNvdXJjZSApIE1vdXNlU291cmNlLl9fcHJvdG9fXyA9IEV2ZW50U291cmNlO1xuICBNb3VzZVNvdXJjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBFdmVudFNvdXJjZSAmJiBFdmVudFNvdXJjZS5wcm90b3R5cGUgKTtcbiAgTW91c2VTb3VyY2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTW91c2VTb3VyY2U7XG5cbiAgLyoqXG4gICAqIERldGVjdCBpZiBhIG1vdXNlIGV2ZW50IHdhcyBzaW11bGF0ZWQgZnJvbSBhIHRvdWNoIGJ5XG4gICAqIGNoZWNraW5nIGlmIHByZXZpb3VzbHkgdGhlcmUgd2FzIGEgdG91Y2ggZXZlbnQgYXQgdGhlXG4gICAqIHNhbWUgcG9zaXRpb24uXG4gICAqXG4gICAqIEZJWE1FIC0gS25vd24gcHJvYmxlbSB3aXRoIHRoZSBuYXRpdmUgQW5kcm9pZCBicm93c2VyIG9uXG4gICAqIFNhbXN1bmcgR1QtSTkxMDAgKEFuZHJvaWQgNC4xLjIpOlxuICAgKiBJbiBjYXNlIHRoZSBwYWdlIGlzIHNjcm9sbGVkLCB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHdvcmtcbiAgICogY29ycmVjdGx5IHdoZW4gYSBjYW52YXMgaXMgdXNlZCAoV2ViR0wgb3IgY2FudmFzIHJlbmRlcmVyKS5cbiAgICogTW91c2UgbGlzdGVuZXJzIG9uIGNhbnZhcyBlbGVtZW50cyAoZm9yIHRoaXMgYnJvd3NlciksIGNyZWF0ZVxuICAgKiB0d28gbW91c2UgZXZlbnRzOiBPbmUgJ2dvb2QnIGFuZCBvbmUgJ2JhZCcgb25lIChvbiBvdGhlciBicm93c2VycyBvclxuICAgKiB3aGVuIGEgZGl2IGlzIHVzZWQsIHRoZXJlIGlzIG9ubHkgb25lIGV2ZW50KS4gRm9yIHRoZSAnYmFkJyBvbmUsXG4gICAqIGNsaWVudFgvY2xpZW50WSBhbmQgYWxzbyBwYWdlWC9wYWdlWSBhcmUgd3Jvbmcgd2hlbiB0aGUgcGFnZVxuICAgKiBpcyBzY3JvbGxlZC4gQmVjYXVzZSBvZiB0aGF0LCB0aGlzIGZ1bmN0aW9uIGNhbiBub3QgZGV0ZWN0IGlmXG4gICAqIHRoZSBldmVudHMgd2VyZSBzaW11bGF0ZWQgZnJvbSBhIHRvdWNoIGV2ZW50LiBBcyByZXN1bHQsIGFcbiAgICogcG9pbnRlciBldmVudCBhdCBhIHdyb25nIHBvc2l0aW9uIGlzIGRpc3BhdGNoZWQsIHdoaWNoIGNvbmZ1c2VzXG4gICAqIHRoZSBtYXAgaW50ZXJhY3Rpb25zLlxuICAgKiBJdCBpcyB1bmNsZWFyLCBob3cgb25lIGNhbiBnZXQgdGhlIGNvcnJlY3QgcG9zaXRpb24gZm9yIHRoZSBldmVudFxuICAgKiBvciBkZXRlY3QgdGhhdCB0aGUgcG9zaXRpb25zIGFyZSBpbnZhbGlkLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlLCBpZiB0aGUgZXZlbnQgd2FzIGdlbmVyYXRlZCBieSBhIHRvdWNoLlxuICAgKi9cbiAgTW91c2VTb3VyY2UucHJvdG90eXBlLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2hfID0gZnVuY3Rpb24gaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaF8gKGluRXZlbnQpIHtcbiAgICB2YXIgbHRzID0gdGhpcy5sYXN0VG91Y2hlcztcbiAgICB2YXIgeCA9IGluRXZlbnQuY2xpZW50WDtcbiAgICB2YXIgeSA9IGluRXZlbnQuY2xpZW50WTtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGx0cy5sZW5ndGgsIHQgPSAodm9pZCAwKTsgaSA8IGwgJiYgKHQgPSBsdHNbaV0pOyBpKyspIHtcbiAgICAgIC8vIHNpbXVsYXRlZCBtb3VzZSBldmVudHMgd2lsbCBiZSBzd2FsbG93ZWQgbmVhciBhIHByaW1hcnkgdG91Y2hlbmRcbiAgICAgIHZhciBkeCA9IE1hdGguYWJzKHggLSB0WzBdKTtcbiAgICAgIHZhciBkeSA9IE1hdGguYWJzKHkgLSB0WzFdKTtcbiAgICAgIGlmIChkeCA8PSBERURVUF9ESVNUICYmIGR5IDw9IERFRFVQX0RJU1QpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogRGlzcGF0Y2hlcyBhIGBwb2ludGVyY2FuY2VsYCBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gICAqL1xuICBNb3VzZVNvdXJjZS5wcm90b3R5cGUuY2FuY2VsID0gZnVuY3Rpb24gY2FuY2VsIChpbkV2ZW50KSB7XG4gICAgdmFyIGUgPSBwcmVwYXJlRXZlbnQoaW5FdmVudCwgdGhpcy5kaXNwYXRjaGVyKTtcbiAgICB0aGlzLmRpc3BhdGNoZXIuY2FuY2VsKGUsIGluRXZlbnQpO1xuICAgIHRoaXMuY2xlYW51cE1vdXNlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgbW91c2UgZnJvbSB0aGUgbGlzdCBvZiBhY3RpdmUgcG9pbnRlcnMuXG4gICAqL1xuICBNb3VzZVNvdXJjZS5wcm90b3R5cGUuY2xlYW51cE1vdXNlID0gZnVuY3Rpb24gY2xlYW51cE1vdXNlICgpIHtcbiAgICBkZWxldGUgdGhpcy5wb2ludGVyTWFwW1BPSU5URVJfSUQudG9TdHJpbmcoKV07XG4gIH07XG5cbiAgcmV0dXJuIE1vdXNlU291cmNlO1xufShFdmVudFNvdXJjZSkpO1xuXG5cbi8qKlxuICogQ3JlYXRlcyBhIGNvcHkgb2YgdGhlIG9yaWdpbmFsIGV2ZW50IHRoYXQgd2lsbCBiZSB1c2VkXG4gKiBmb3IgdGhlIGZha2UgcG9pbnRlciBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qb2ludGVyRXZlbnRIYW5kbGVyLmpzXCIpLmRlZmF1bHR9IGRpc3BhdGNoZXIgRXZlbnQgaGFuZGxlci5cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIGNvcGllZCBldmVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByZXBhcmVFdmVudChpbkV2ZW50LCBkaXNwYXRjaGVyKSB7XG4gIHZhciBlID0gZGlzcGF0Y2hlci5jbG9uZUV2ZW50KGluRXZlbnQsIGluRXZlbnQpO1xuXG4gIC8vIGZvcndhcmQgbW91c2UgcHJldmVudERlZmF1bHRcbiAgdmFyIHBkID0gZS5wcmV2ZW50RGVmYXVsdDtcbiAgZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uKCkge1xuICAgIGluRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBwZCgpO1xuICB9O1xuXG4gIGUucG9pbnRlcklkID0gUE9JTlRFUl9JRDtcbiAgZS5pc1ByaW1hcnkgPSB0cnVlO1xuICBlLnBvaW50ZXJUeXBlID0gUE9JTlRFUl9UWVBFO1xuXG4gIHJldHVybiBlO1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IE1vdXNlU291cmNlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Nb3VzZVNvdXJjZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcG9pbnRlci9Nc1NvdXJjZVxuICovXG4vLyBCYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vUG9seW1lci9Qb2ludGVyRXZlbnRzXG5cbi8vIENvcHlyaWdodCAoYykgMjAxMyBUaGUgUG9seW1lciBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy9cbi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuLy8gbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZVxuLy8gbWV0OlxuLy9cbi8vICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcbi8vIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbi8vICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZVxuLy8gY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lclxuLy8gaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZVxuLy8gZGlzdHJpYnV0aW9uLlxuLy8gKiBOZWl0aGVyIHRoZSBuYW1lIG9mIEdvb2dsZSBJbmMuIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4vLyBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbVxuLy8gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbi8vXG4vLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTXG4vLyBcIkFTIElTXCIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UXG4vLyBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1Jcbi8vIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUXG4vLyBPV05FUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCxcbi8vIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1Rcbi8vIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLFxuLy8gREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZXG4vLyBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXG4vLyAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0Vcbi8vIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG5cbmltcG9ydCBFdmVudFNvdXJjZSBmcm9tICcuL0V2ZW50U291cmNlLmpzJztcblxuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gKi9cbnZhciBQT0lOVEVSX1RZUEVTID0gW1xuICAnJyxcbiAgJ3VuYXZhaWxhYmxlJyxcbiAgJ3RvdWNoJyxcbiAgJ3BlbicsXG4gICdtb3VzZSdcbl07XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYG1zUG9pbnRlckRvd25gLlxuICpcbiAqIEB0aGlzIHtNc1NvdXJjZX1cbiAqIEBwYXJhbSB7TVNQb2ludGVyRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBtc1BvaW50ZXJEb3duKGluRXZlbnQpIHtcbiAgdGhpcy5wb2ludGVyTWFwW2luRXZlbnQucG9pbnRlcklkLnRvU3RyaW5nKCldID0gaW5FdmVudDtcbiAgdmFyIGUgPSB0aGlzLnByZXBhcmVFdmVudF8oaW5FdmVudCk7XG4gIHRoaXMuZGlzcGF0Y2hlci5kb3duKGUsIGluRXZlbnQpO1xufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBtc1BvaW50ZXJNb3ZlYC5cbiAqXG4gKiBAdGhpcyB7TXNTb3VyY2V9XG4gKiBAcGFyYW0ge01TUG9pbnRlckV2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gbXNQb2ludGVyTW92ZShpbkV2ZW50KSB7XG4gIHZhciBlID0gdGhpcy5wcmVwYXJlRXZlbnRfKGluRXZlbnQpO1xuICB0aGlzLmRpc3BhdGNoZXIubW92ZShlLCBpbkV2ZW50KTtcbn1cblxuLyoqXG4gKiBIYW5kbGVyIGZvciBgbXNQb2ludGVyVXBgLlxuICpcbiAqIEB0aGlzIHtNc1NvdXJjZX1cbiAqIEBwYXJhbSB7TVNQb2ludGVyRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBtc1BvaW50ZXJVcChpbkV2ZW50KSB7XG4gIHZhciBlID0gdGhpcy5wcmVwYXJlRXZlbnRfKGluRXZlbnQpO1xuICB0aGlzLmRpc3BhdGNoZXIudXAoZSwgaW5FdmVudCk7XG4gIHRoaXMuY2xlYW51cChpbkV2ZW50LnBvaW50ZXJJZCk7XG59XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYG1zUG9pbnRlck91dGAuXG4gKlxuICogQHRoaXMge01zU291cmNlfVxuICogQHBhcmFtIHtNU1BvaW50ZXJFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIG1zUG9pbnRlck91dChpbkV2ZW50KSB7XG4gIHZhciBlID0gdGhpcy5wcmVwYXJlRXZlbnRfKGluRXZlbnQpO1xuICB0aGlzLmRpc3BhdGNoZXIubGVhdmVPdXQoZSwgaW5FdmVudCk7XG59XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYG1zUG9pbnRlck92ZXJgLlxuICpcbiAqIEB0aGlzIHtNc1NvdXJjZX1cbiAqIEBwYXJhbSB7TVNQb2ludGVyRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBtc1BvaW50ZXJPdmVyKGluRXZlbnQpIHtcbiAgdmFyIGUgPSB0aGlzLnByZXBhcmVFdmVudF8oaW5FdmVudCk7XG4gIHRoaXMuZGlzcGF0Y2hlci5lbnRlck92ZXIoZSwgaW5FdmVudCk7XG59XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYG1zUG9pbnRlckNhbmNlbGAuXG4gKlxuICogQHRoaXMge01zU291cmNlfVxuICogQHBhcmFtIHtNU1BvaW50ZXJFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIG1zUG9pbnRlckNhbmNlbChpbkV2ZW50KSB7XG4gIHZhciBlID0gdGhpcy5wcmVwYXJlRXZlbnRfKGluRXZlbnQpO1xuICB0aGlzLmRpc3BhdGNoZXIuY2FuY2VsKGUsIGluRXZlbnQpO1xuICB0aGlzLmNsZWFudXAoaW5FdmVudC5wb2ludGVySWQpO1xufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBtc0xvc3RQb2ludGVyQ2FwdHVyZWAuXG4gKlxuICogQHRoaXMge01zU291cmNlfVxuICogQHBhcmFtIHtNU1BvaW50ZXJFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIG1zTG9zdFBvaW50ZXJDYXB0dXJlKGluRXZlbnQpIHtcbiAgdmFyIGUgPSB0aGlzLmRpc3BhdGNoZXIubWFrZUV2ZW50KCdsb3N0cG9pbnRlcmNhcHR1cmUnLCBpbkV2ZW50LCBpbkV2ZW50KTtcbiAgdGhpcy5kaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoZSk7XG59XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYG1zR290UG9pbnRlckNhcHR1cmVgLlxuICpcbiAqIEB0aGlzIHtNc1NvdXJjZX1cbiAqIEBwYXJhbSB7TVNQb2ludGVyRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBtc0dvdFBvaW50ZXJDYXB0dXJlKGluRXZlbnQpIHtcbiAgdmFyIGUgPSB0aGlzLmRpc3BhdGNoZXIubWFrZUV2ZW50KCdnb3Rwb2ludGVyY2FwdHVyZScsIGluRXZlbnQsIGluRXZlbnQpO1xuICB0aGlzLmRpc3BhdGNoZXIuZGlzcGF0Y2hFdmVudChlKTtcbn1cblxudmFyIE1zU291cmNlID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoRXZlbnRTb3VyY2UpIHtcbiAgZnVuY3Rpb24gTXNTb3VyY2UoZGlzcGF0Y2hlcikge1xuICAgIHZhciBtYXBwaW5nID0ge1xuICAgICAgJ01TUG9pbnRlckRvd24nOiBtc1BvaW50ZXJEb3duLFxuICAgICAgJ01TUG9pbnRlck1vdmUnOiBtc1BvaW50ZXJNb3ZlLFxuICAgICAgJ01TUG9pbnRlclVwJzogbXNQb2ludGVyVXAsXG4gICAgICAnTVNQb2ludGVyT3V0JzogbXNQb2ludGVyT3V0LFxuICAgICAgJ01TUG9pbnRlck92ZXInOiBtc1BvaW50ZXJPdmVyLFxuICAgICAgJ01TUG9pbnRlckNhbmNlbCc6IG1zUG9pbnRlckNhbmNlbCxcbiAgICAgICdNU0dvdFBvaW50ZXJDYXB0dXJlJzogbXNHb3RQb2ludGVyQ2FwdHVyZSxcbiAgICAgICdNU0xvc3RQb2ludGVyQ2FwdHVyZSc6IG1zTG9zdFBvaW50ZXJDYXB0dXJlXG4gICAgfTtcbiAgICBFdmVudFNvdXJjZS5jYWxsKHRoaXMsIGRpc3BhdGNoZXIsIG1hcHBpbmcpO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0XG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBNU1BvaW50ZXJFdmVudHxPYmplY3Q+fVxuICAgICAqL1xuICAgIHRoaXMucG9pbnRlck1hcCA9IGRpc3BhdGNoZXIucG9pbnRlck1hcDtcbiAgfVxuXG4gIGlmICggRXZlbnRTb3VyY2UgKSBNc1NvdXJjZS5fX3Byb3RvX18gPSBFdmVudFNvdXJjZTtcbiAgTXNTb3VyY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnRTb3VyY2UgJiYgRXZlbnRTb3VyY2UucHJvdG90eXBlICk7XG4gIE1zU291cmNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE1zU291cmNlO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgY29weSBvZiB0aGUgb3JpZ2luYWwgZXZlbnQgdGhhdCB3aWxsIGJlIHVzZWRcbiAgICogZm9yIHRoZSBmYWtlIHBvaW50ZXIgZXZlbnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7TVNQb2ludGVyRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBjb3BpZWQgZXZlbnQuXG4gICAqL1xuICBNc1NvdXJjZS5wcm90b3R5cGUucHJlcGFyZUV2ZW50XyA9IGZ1bmN0aW9uIHByZXBhcmVFdmVudF8gKGluRXZlbnQpIHtcbiAgICAvKiogQHR5cGUge01TUG9pbnRlckV2ZW50fE9iamVjdH0gKi9cbiAgICB2YXIgZSA9IGluRXZlbnQ7XG4gICAgaWYgKHR5cGVvZiBpbkV2ZW50LnBvaW50ZXJUeXBlID09PSAnbnVtYmVyJykge1xuICAgICAgZSA9IHRoaXMuZGlzcGF0Y2hlci5jbG9uZUV2ZW50KGluRXZlbnQsIGluRXZlbnQpO1xuICAgICAgZS5wb2ludGVyVHlwZSA9IFBPSU5URVJfVFlQRVNbaW5FdmVudC5wb2ludGVyVHlwZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGlzIHBvaW50ZXIgZnJvbSB0aGUgbGlzdCBvZiBhY3RpdmUgcG9pbnRlcnMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwb2ludGVySWQgUG9pbnRlciBpZGVudGlmaWVyLlxuICAgKi9cbiAgTXNTb3VyY2UucHJvdG90eXBlLmNsZWFudXAgPSBmdW5jdGlvbiBjbGVhbnVwIChwb2ludGVySWQpIHtcbiAgICBkZWxldGUgdGhpcy5wb2ludGVyTWFwW3BvaW50ZXJJZC50b1N0cmluZygpXTtcbiAgfTtcblxuICByZXR1cm4gTXNTb3VyY2U7XG59KEV2ZW50U291cmNlKSk7XG5cbmV4cG9ydCBkZWZhdWx0IE1zU291cmNlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Nc1NvdXJjZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcG9pbnRlci9OYXRpdmVTb3VyY2VcbiAqL1xuXG4vLyBCYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vUG9seW1lci9Qb2ludGVyRXZlbnRzXG5cbi8vIENvcHlyaWdodCAoYykgMjAxMyBUaGUgUG9seW1lciBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy9cbi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuLy8gbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZVxuLy8gbWV0OlxuLy9cbi8vICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcbi8vIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbi8vICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZVxuLy8gY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lclxuLy8gaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZVxuLy8gZGlzdHJpYnV0aW9uLlxuLy8gKiBOZWl0aGVyIHRoZSBuYW1lIG9mIEdvb2dsZSBJbmMuIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4vLyBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbVxuLy8gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbi8vXG4vLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTXG4vLyBcIkFTIElTXCIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UXG4vLyBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1Jcbi8vIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUXG4vLyBPV05FUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCxcbi8vIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1Rcbi8vIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLFxuLy8gREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZXG4vLyBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXG4vLyAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0Vcbi8vIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG5cbmltcG9ydCBFdmVudFNvdXJjZSBmcm9tICcuL0V2ZW50U291cmNlLmpzJztcblxuLyoqXG4gKiBIYW5kbGVyIGZvciBgcG9pbnRlcmRvd25gLlxuICpcbiAqIEB0aGlzIHtOYXRpdmVTb3VyY2V9XG4gKiBAcGFyYW0ge0V2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gcG9pbnRlckRvd24oaW5FdmVudCkge1xuICB0aGlzLmRpc3BhdGNoZXIuZmlyZU5hdGl2ZUV2ZW50KGluRXZlbnQpO1xufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBwb2ludGVybW92ZWAuXG4gKlxuICogQHRoaXMge05hdGl2ZVNvdXJjZX1cbiAqIEBwYXJhbSB7RXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBwb2ludGVyTW92ZShpbkV2ZW50KSB7XG4gIHRoaXMuZGlzcGF0Y2hlci5maXJlTmF0aXZlRXZlbnQoaW5FdmVudCk7XG59XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYHBvaW50ZXJ1cGAuXG4gKlxuICogQHRoaXMge05hdGl2ZVNvdXJjZX1cbiAqIEBwYXJhbSB7RXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBwb2ludGVyVXAoaW5FdmVudCkge1xuICB0aGlzLmRpc3BhdGNoZXIuZmlyZU5hdGl2ZUV2ZW50KGluRXZlbnQpO1xufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBwb2ludGVyb3V0YC5cbiAqXG4gKiBAdGhpcyB7TmF0aXZlU291cmNlfVxuICogQHBhcmFtIHtFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIHBvaW50ZXJPdXQoaW5FdmVudCkge1xuICB0aGlzLmRpc3BhdGNoZXIuZmlyZU5hdGl2ZUV2ZW50KGluRXZlbnQpO1xufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBwb2ludGVyb3ZlcmAuXG4gKlxuICogQHRoaXMge05hdGl2ZVNvdXJjZX1cbiAqIEBwYXJhbSB7RXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBwb2ludGVyT3ZlcihpbkV2ZW50KSB7XG4gIHRoaXMuZGlzcGF0Y2hlci5maXJlTmF0aXZlRXZlbnQoaW5FdmVudCk7XG59XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYHBvaW50ZXJjYW5jZWxgLlxuICpcbiAqIEB0aGlzIHtOYXRpdmVTb3VyY2V9XG4gKiBAcGFyYW0ge0V2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gcG9pbnRlckNhbmNlbChpbkV2ZW50KSB7XG4gIHRoaXMuZGlzcGF0Y2hlci5maXJlTmF0aXZlRXZlbnQoaW5FdmVudCk7XG59XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYGxvc3Rwb2ludGVyY2FwdHVyZWAuXG4gKlxuICogQHRoaXMge05hdGl2ZVNvdXJjZX1cbiAqIEBwYXJhbSB7RXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBsb3N0UG9pbnRlckNhcHR1cmUoaW5FdmVudCkge1xuICB0aGlzLmRpc3BhdGNoZXIuZmlyZU5hdGl2ZUV2ZW50KGluRXZlbnQpO1xufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBnb3Rwb2ludGVyY2FwdHVyZWAuXG4gKlxuICogQHRoaXMge05hdGl2ZVNvdXJjZX1cbiAqIEBwYXJhbSB7RXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBnb3RQb2ludGVyQ2FwdHVyZShpbkV2ZW50KSB7XG4gIHRoaXMuZGlzcGF0Y2hlci5maXJlTmF0aXZlRXZlbnQoaW5FdmVudCk7XG59XG5cbnZhciBOYXRpdmVTb3VyY2UgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudFNvdXJjZSkge1xuICBmdW5jdGlvbiBOYXRpdmVTb3VyY2UoZGlzcGF0Y2hlcikge1xuICAgIHZhciBtYXBwaW5nID0ge1xuICAgICAgJ3BvaW50ZXJkb3duJzogcG9pbnRlckRvd24sXG4gICAgICAncG9pbnRlcm1vdmUnOiBwb2ludGVyTW92ZSxcbiAgICAgICdwb2ludGVydXAnOiBwb2ludGVyVXAsXG4gICAgICAncG9pbnRlcm91dCc6IHBvaW50ZXJPdXQsXG4gICAgICAncG9pbnRlcm92ZXInOiBwb2ludGVyT3ZlcixcbiAgICAgICdwb2ludGVyY2FuY2VsJzogcG9pbnRlckNhbmNlbCxcbiAgICAgICdnb3Rwb2ludGVyY2FwdHVyZSc6IGdvdFBvaW50ZXJDYXB0dXJlLFxuICAgICAgJ2xvc3Rwb2ludGVyY2FwdHVyZSc6IGxvc3RQb2ludGVyQ2FwdHVyZVxuICAgIH07XG4gICAgRXZlbnRTb3VyY2UuY2FsbCh0aGlzLCBkaXNwYXRjaGVyLCBtYXBwaW5nKTtcbiAgfVxuXG4gIGlmICggRXZlbnRTb3VyY2UgKSBOYXRpdmVTb3VyY2UuX19wcm90b19fID0gRXZlbnRTb3VyY2U7XG4gIE5hdGl2ZVNvdXJjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBFdmVudFNvdXJjZSAmJiBFdmVudFNvdXJjZS5wcm90b3R5cGUgKTtcbiAgTmF0aXZlU291cmNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE5hdGl2ZVNvdXJjZTtcblxuICByZXR1cm4gTmF0aXZlU291cmNlO1xufShFdmVudFNvdXJjZSkpO1xuXG5leHBvcnQgZGVmYXVsdCBOYXRpdmVTb3VyY2U7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU5hdGl2ZVNvdXJjZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcG9pbnRlci9Qb2ludGVyRXZlbnRcbiAqL1xuXG4vLyBCYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vUG9seW1lci9Qb2ludGVyRXZlbnRzXG5cbi8vIENvcHlyaWdodCAoYykgMjAxMyBUaGUgUG9seW1lciBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy9cbi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuLy8gbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZVxuLy8gbWV0OlxuLy9cbi8vICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcbi8vIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbi8vICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZVxuLy8gY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lclxuLy8gaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZVxuLy8gZGlzdHJpYnV0aW9uLlxuLy8gKiBOZWl0aGVyIHRoZSBuYW1lIG9mIEdvb2dsZSBJbmMuIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4vLyBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbVxuLy8gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbi8vXG4vLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTXG4vLyBcIkFTIElTXCIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UXG4vLyBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1Jcbi8vIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUXG4vLyBPV05FUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCxcbi8vIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1Rcbi8vIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLFxuLy8gREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZXG4vLyBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXG4vLyAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0Vcbi8vIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG5cbmltcG9ydCBfRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcblxuXG4vKipcbiAqIElzIHRoZSBgYnV0dG9uc2AgcHJvcGVydHkgc3VwcG9ydGVkP1xuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbnZhciBIQVNfQlVUVE9OUyA9IGZhbHNlO1xuXG5cbnZhciBQb2ludGVyRXZlbnQgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChfRXZlbnQpIHtcbiAgZnVuY3Rpb24gUG9pbnRlckV2ZW50KHR5cGUsIG9yaWdpbmFsRXZlbnQsIG9wdF9ldmVudERpY3QpIHtcbiAgICBfRXZlbnQuY2FsbCh0aGlzLCB0eXBlKTtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHtFdmVudH1cbiAgICAgKi9cbiAgICB0aGlzLm9yaWdpbmFsRXZlbnQgPSBvcmlnaW5hbEV2ZW50O1xuXG4gICAgdmFyIGV2ZW50RGljdCA9IG9wdF9ldmVudERpY3QgPyBvcHRfZXZlbnREaWN0IDoge307XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuYnV0dG9ucyA9IGdldEJ1dHRvbnMoZXZlbnREaWN0KTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5wcmVzc3VyZSA9IGdldFByZXNzdXJlKGV2ZW50RGljdCwgdGhpcy5idXR0b25zKTtcblxuICAgIC8vIE1vdXNlRXZlbnQgcmVsYXRlZCBwcm9wZXJ0aWVzXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmJ1YmJsZXMgPSAnYnViYmxlcycgaW4gZXZlbnREaWN0ID8gZXZlbnREaWN0WydidWJibGVzJ10gOiBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuY2FuY2VsYWJsZSA9ICdjYW5jZWxhYmxlJyBpbiBldmVudERpY3QgPyBldmVudERpY3RbJ2NhbmNlbGFibGUnXSA6IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICB0aGlzLnZpZXcgPSAndmlldycgaW4gZXZlbnREaWN0ID8gZXZlbnREaWN0Wyd2aWV3J10gOiBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmRldGFpbCA9ICdkZXRhaWwnIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsnZGV0YWlsJ10gOiBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnNjcmVlblggPSAnc2NyZWVuWCcgaW4gZXZlbnREaWN0ID8gZXZlbnREaWN0WydzY3JlZW5YJ10gOiAwO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnNjcmVlblkgPSAnc2NyZWVuWScgaW4gZXZlbnREaWN0ID8gZXZlbnREaWN0WydzY3JlZW5ZJ10gOiAwO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmNsaWVudFggPSAnY2xpZW50WCcgaW4gZXZlbnREaWN0ID8gZXZlbnREaWN0WydjbGllbnRYJ10gOiAwO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmNsaWVudFkgPSAnY2xpZW50WScgaW4gZXZlbnREaWN0ID8gZXZlbnREaWN0WydjbGllbnRZJ10gOiAwO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5jdHJsS2V5ID0gJ2N0cmxLZXknIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsnY3RybEtleSddIDogZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmFsdEtleSA9ICdhbHRLZXknIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsnYWx0S2V5J10gOiBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuc2hpZnRLZXkgPSAnc2hpZnRLZXknIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsnc2hpZnRLZXknXSA6IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5tZXRhS2V5ID0gJ21ldGFLZXknIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsnbWV0YUtleSddIDogZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuYnV0dG9uID0gJ2J1dHRvbicgaW4gZXZlbnREaWN0ID8gZXZlbnREaWN0WydidXR0b24nXSA6IDA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Tm9kZX1cbiAgICAgKi9cbiAgICB0aGlzLnJlbGF0ZWRUYXJnZXQgPSAncmVsYXRlZFRhcmdldCcgaW4gZXZlbnREaWN0ID9cbiAgICAgIGV2ZW50RGljdFsncmVsYXRlZFRhcmdldCddIDogbnVsbDtcblxuICAgIC8vIFBvaW50ZXJFdmVudCByZWxhdGVkIHByb3BlcnRpZXNcblxuICAgIC8qKlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5wb2ludGVySWQgPSAncG9pbnRlcklkJyBpbiBldmVudERpY3QgPyBldmVudERpY3RbJ3BvaW50ZXJJZCddIDogMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy53aWR0aCA9ICd3aWR0aCcgaW4gZXZlbnREaWN0ID8gZXZlbnREaWN0Wyd3aWR0aCddIDogMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5oZWlnaHQgPSAnaGVpZ2h0JyBpbiBldmVudERpY3QgPyBldmVudERpY3RbJ2hlaWdodCddIDogMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50aWx0WCA9ICd0aWx0WCcgaW4gZXZlbnREaWN0ID8gZXZlbnREaWN0Wyd0aWx0WCddIDogMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50aWx0WSA9ICd0aWx0WScgaW4gZXZlbnREaWN0ID8gZXZlbnREaWN0Wyd0aWx0WSddIDogMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5wb2ludGVyVHlwZSA9ICdwb2ludGVyVHlwZScgaW4gZXZlbnREaWN0ID8gZXZlbnREaWN0Wydwb2ludGVyVHlwZSddIDogJyc7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuaHdUaW1lc3RhbXAgPSAnaHdUaW1lc3RhbXAnIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsnaHdUaW1lc3RhbXAnXSA6IDA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmlzUHJpbWFyeSA9ICdpc1ByaW1hcnknIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsnaXNQcmltYXJ5J10gOiBmYWxzZTtcblxuICAgIC8vIGtlZXAgdGhlIHNlbWFudGljcyBvZiBwcmV2ZW50RGVmYXVsdFxuICAgIGlmIChvcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICB0aGlzLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgaWYgKCBfRXZlbnQgKSBQb2ludGVyRXZlbnQuX19wcm90b19fID0gX0V2ZW50O1xuICBQb2ludGVyRXZlbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggX0V2ZW50ICYmIF9FdmVudC5wcm90b3R5cGUgKTtcbiAgUG9pbnRlckV2ZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBvaW50ZXJFdmVudDtcblxuICByZXR1cm4gUG9pbnRlckV2ZW50O1xufShfRXZlbnQpKTtcblxuXG4vKipcbiAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgPz59IGV2ZW50RGljdCBUaGUgZXZlbnQgZGljdGlvbmFyeS5cbiAqIEByZXR1cm4ge251bWJlcn0gQnV0dG9uIGluZGljYXRvci5cbiAqL1xuZnVuY3Rpb24gZ2V0QnV0dG9ucyhldmVudERpY3QpIHtcbiAgLy8gQWNjb3JkaW5nIHRvIHRoZSB3M2Mgc3BlYyxcbiAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzLyNldmVudHMtTW91c2VFdmVudC1idXR0b25cbiAgLy8gTW91c2VFdmVudC5idXR0b24gPT0gMCBjYW4gbWVhbiBlaXRoZXIgbm8gbW91c2UgYnV0dG9uIGRlcHJlc3NlZCwgb3IgdGhlXG4gIC8vIGxlZnQgbW91c2UgYnV0dG9uIGRlcHJlc3NlZC5cbiAgLy9cbiAgLy8gQXMgb2Ygbm93LCB0aGUgb25seSB3YXkgdG8gZGlzdGluZ3Vpc2ggYmV0d2VlbiB0aGUgdHdvIHN0YXRlcyBvZlxuICAvLyBNb3VzZUV2ZW50LmJ1dHRvbiBpcyBieSB1c2luZyB0aGUgZGVwcmVjYXRlZCBNb3VzZUV2ZW50LndoaWNoIHByb3BlcnR5LCBhc1xuICAvLyB0aGlzIG1hcHMgbW91c2UgYnV0dG9ucyB0byBwb3NpdGl2ZSBpbnRlZ2VycyA+IDAsIGFuZCB1c2VzIDAgdG8gbWVhbiB0aGF0XG4gIC8vIG5vIG1vdXNlIGJ1dHRvbiBpcyBoZWxkLlxuICAvL1xuICAvLyBNb3VzZUV2ZW50LndoaWNoIGlzIGRlcml2ZWQgZnJvbSBNb3VzZUV2ZW50LmJ1dHRvbiBhdCBNb3VzZUV2ZW50IGNyZWF0aW9uLFxuICAvLyBidXQgaW5pdE1vdXNlRXZlbnQgZG9lcyBub3QgZXhwb3NlIGFuIGFyZ3VtZW50IHdpdGggd2hpY2ggdG8gc2V0XG4gIC8vIE1vdXNlRXZlbnQud2hpY2guIENhbGxpbmcgaW5pdE1vdXNlRXZlbnQgd2l0aCBhIGJ1dHRvbkFyZyBvZiAwIHdpbGwgc2V0XG4gIC8vIE1vdXNlRXZlbnQuYnV0dG9uID09IDAgYW5kIE1vdXNlRXZlbnQud2hpY2ggPT0gMSwgYnJlYWtpbmcgdGhlIGV4cGVjdGF0aW9uc1xuICAvLyBvZiBhcHAgZGV2ZWxvcGVycy5cbiAgLy9cbiAgLy8gVGhlIG9ubHkgd2F5IHRvIHByb3BhZ2F0ZSB0aGUgY29ycmVjdCBzdGF0ZSBvZiBNb3VzZUV2ZW50LndoaWNoIGFuZFxuICAvLyBNb3VzZUV2ZW50LmJ1dHRvbiB0byBhIG5ldyBNb3VzZUV2ZW50LmJ1dHRvbiA9PSAwIGFuZCBNb3VzZUV2ZW50LndoaWNoID09IDBcbiAgLy8gaXMgdG8gY2FsbCBpbml0TW91c2VFdmVudCB3aXRoIGEgYnV0dG9uQXJnIHZhbHVlIG9mIC0xLlxuICAvL1xuICAvLyBUaGlzIGlzIGZpeGVkIHdpdGggRE9NIExldmVsIDQncyB1c2Ugb2YgYnV0dG9uc1xuICB2YXIgYnV0dG9ucztcbiAgaWYgKGV2ZW50RGljdC5idXR0b25zIHx8IEhBU19CVVRUT05TKSB7XG4gICAgYnV0dG9ucyA9IGV2ZW50RGljdC5idXR0b25zO1xuICB9IGVsc2Uge1xuICAgIHN3aXRjaCAoZXZlbnREaWN0LndoaWNoKSB7XG4gICAgICBjYXNlIDE6IGJ1dHRvbnMgPSAxOyBicmVhaztcbiAgICAgIGNhc2UgMjogYnV0dG9ucyA9IDQ7IGJyZWFrO1xuICAgICAgY2FzZSAzOiBidXR0b25zID0gMjsgYnJlYWs7XG4gICAgICBkZWZhdWx0OiBidXR0b25zID0gMDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGJ1dHRvbnM7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsID8+fSBldmVudERpY3QgVGhlIGV2ZW50IGRpY3Rpb25hcnkuXG4gKiBAcGFyYW0ge251bWJlcn0gYnV0dG9ucyBCdXR0b24gaW5kaWNhdG9yLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgcHJlc3N1cmUuXG4gKi9cbmZ1bmN0aW9uIGdldFByZXNzdXJlKGV2ZW50RGljdCwgYnV0dG9ucykge1xuICAvLyBTcGVjIHJlcXVpcmVzIHRoYXQgcG9pbnRlcnMgd2l0aG91dCBwcmVzc3VyZSBzcGVjaWZpZWQgdXNlIDAuNSBmb3IgZG93blxuICAvLyBzdGF0ZSBhbmQgMCBmb3IgdXAgc3RhdGUuXG4gIHZhciBwcmVzc3VyZSA9IDA7XG4gIGlmIChldmVudERpY3QucHJlc3N1cmUpIHtcbiAgICBwcmVzc3VyZSA9IGV2ZW50RGljdC5wcmVzc3VyZTtcbiAgfSBlbHNlIHtcbiAgICBwcmVzc3VyZSA9IGJ1dHRvbnMgPyAwLjUgOiAwO1xuICB9XG4gIHJldHVybiBwcmVzc3VyZTtcbn1cblxuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgYGJ1dHRvbnNgIHByb3BlcnR5IGlzIHN1cHBvcnRlZC5cbiAqL1xuKGZ1bmN0aW9uKCkge1xuICB0cnkge1xuICAgIHZhciBldiA9IG5ldyBNb3VzZUV2ZW50KCdjbGljaycsIHtidXR0b25zOiAxfSk7XG4gICAgSEFTX0JVVFRPTlMgPSBldi5idXR0b25zID09PSAxO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gcGFzc1xuICB9XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBQb2ludGVyRXZlbnQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvaW50ZXJFdmVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvYXJyYXlcbiAqL1xuXG5cbi8qKlxuICogUGVyZm9ybXMgYSBiaW5hcnkgc2VhcmNoIG9uIHRoZSBwcm92aWRlZCBzb3J0ZWQgbGlzdCBhbmQgcmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGl0ZW0gaWYgZm91bmQuIElmIGl0IGNhbid0IGJlIGZvdW5kIGl0J2xsIHJldHVybiAtMS5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXJrc2t5YXBwL2JpbmFyeS1zZWFyY2hcbiAqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBoYXlzdGFjayBJdGVtcyB0byBzZWFyY2ggdGhyb3VnaC5cbiAqIEBwYXJhbSB7Kn0gbmVlZGxlIFRoZSBpdGVtIHRvIGxvb2sgZm9yLlxuICogQHBhcmFtIHtGdW5jdGlvbj19IG9wdF9jb21wYXJhdG9yIENvbXBhcmF0b3IgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgaXRlbSBpZiBmb3VuZCwgLTEgaWYgbm90LlxuICovXG5leHBvcnQgZnVuY3Rpb24gYmluYXJ5U2VhcmNoKGhheXN0YWNrLCBuZWVkbGUsIG9wdF9jb21wYXJhdG9yKSB7XG4gIHZhciBtaWQsIGNtcDtcbiAgdmFyIGNvbXBhcmF0b3IgPSBvcHRfY29tcGFyYXRvciB8fCBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uO1xuICB2YXIgbG93ID0gMDtcbiAgdmFyIGhpZ2ggPSBoYXlzdGFjay5sZW5ndGg7XG4gIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgLyogTm90ZSB0aGF0IFwiKGxvdyArIGhpZ2gpID4+PiAxXCIgbWF5IG92ZXJmbG93LCBhbmQgcmVzdWx0cyBpbiBhIHR5cGVjYXN0XG4gICAgICogdG8gZG91YmxlICh3aGljaCBnaXZlcyB0aGUgd3JvbmcgcmVzdWx0cykuICovXG4gICAgbWlkID0gbG93ICsgKGhpZ2ggLSBsb3cgPj4gMSk7XG4gICAgY21wID0gK2NvbXBhcmF0b3IoaGF5c3RhY2tbbWlkXSwgbmVlZGxlKTtcblxuICAgIGlmIChjbXAgPCAwLjApIHsgLyogVG9vIGxvdy4gKi9cbiAgICAgIGxvdyA9IG1pZCArIDE7XG5cbiAgICB9IGVsc2UgeyAvKiBLZXkgZm91bmQgb3IgdG9vIGhpZ2ggKi9cbiAgICAgIGhpZ2ggPSBtaWQ7XG4gICAgICBmb3VuZCA9ICFjbXA7XG4gICAgfVxuICB9XG5cbiAgLyogS2V5IG5vdCBmb3VuZC4gKi9cbiAgcmV0dXJuIGZvdW5kID8gbG93IDogfmxvdztcbn1cblxuXG4vKipcbiAqIENvbXBhcmUgZnVuY3Rpb24gZm9yIGFycmF5IHNvcnQgdGhhdCBpcyBzYWZlIGZvciBudW1iZXJzLlxuICogQHBhcmFtIHsqfSBhIFRoZSBmaXJzdCBvYmplY3QgdG8gYmUgY29tcGFyZWQuXG4gKiBAcGFyYW0geyp9IGIgVGhlIHNlY29uZCBvYmplY3QgdG8gYmUgY29tcGFyZWQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgbmVnYXRpdmUgbnVtYmVyLCB6ZXJvLCBvciBhIHBvc2l0aXZlIG51bWJlciBhcyB0aGUgZmlyc3RcbiAqICAgICBhcmd1bWVudCBpcyBsZXNzIHRoYW4sIGVxdWFsIHRvLCBvciBncmVhdGVyIHRoYW4gdGhlIHNlY29uZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24oYSwgYikge1xuICByZXR1cm4gYSA+IGIgPyAxIDogYSA8IGIgPyAtMSA6IDA7XG59XG5cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBhcnJheSBjb250YWlucyB0aGUgZ2l2ZW4gb2JqZWN0LlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIFRoZSBhcnJheSB0byB0ZXN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgdGhlIGVsZW1lbnQuXG4gKiBAcGFyYW0geyp9IG9iaiBUaGUgb2JqZWN0IGZvciB3aGljaCB0byB0ZXN0LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIG9iamVjdCBpcyBpbiB0aGUgYXJyYXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmNsdWRlcyhhcnIsIG9iaikge1xuICByZXR1cm4gYXJyLmluZGV4T2Yob2JqKSA+PSAwO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBhcnIgQXJyYXkuXG4gKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0IFRhcmdldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gMCBtZWFucyByZXR1cm4gdGhlIG5lYXJlc3QsID4gMFxuICogICAgbWVhbnMgcmV0dXJuIHRoZSBsYXJnZXN0IG5lYXJlc3QsIDwgMCBtZWFucyByZXR1cm4gdGhlXG4gKiAgICBzbWFsbGVzdCBuZWFyZXN0LlxuICogQHJldHVybiB7bnVtYmVyfSBJbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhckZpbmROZWFyZXN0KGFyciwgdGFyZ2V0LCBkaXJlY3Rpb24pIHtcbiAgdmFyIG4gPSBhcnIubGVuZ3RoO1xuICBpZiAoYXJyWzBdIDw9IHRhcmdldCkge1xuICAgIHJldHVybiAwO1xuICB9IGVsc2UgaWYgKHRhcmdldCA8PSBhcnJbbiAtIDFdKSB7XG4gICAgcmV0dXJuIG4gLSAxO1xuICB9IGVsc2Uge1xuICAgIHZhciBpO1xuICAgIGlmIChkaXJlY3Rpb24gPiAwKSB7XG4gICAgICBmb3IgKGkgPSAxOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGlmIChhcnJbaV0gPCB0YXJnZXQpIHtcbiAgICAgICAgICByZXR1cm4gaSAtIDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA8IDApIHtcbiAgICAgIGZvciAoaSA9IDE7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgaWYgKGFycltpXSA8PSB0YXJnZXQpIHtcbiAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGkgPSAxOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGlmIChhcnJbaV0gPT0gdGFyZ2V0KSB7XG4gICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH0gZWxzZSBpZiAoYXJyW2ldIDwgdGFyZ2V0KSB7XG4gICAgICAgICAgaWYgKGFycltpIC0gMV0gLSB0YXJnZXQgPCB0YXJnZXQgLSBhcnJbaV0pIHtcbiAgICAgICAgICAgIHJldHVybiBpIC0gMTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuIC0gMTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIEFycmF5LlxuICogQHBhcmFtIHtudW1iZXJ9IGJlZ2luIEJlZ2luIGluZGV4LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQgaW5kZXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXZlcnNlU3ViQXJyYXkoYXJyLCBiZWdpbiwgZW5kKSB7XG4gIHdoaWxlIChiZWdpbiA8IGVuZCkge1xuICAgIHZhciB0bXAgPSBhcnJbYmVnaW5dO1xuICAgIGFycltiZWdpbl0gPSBhcnJbZW5kXTtcbiAgICBhcnJbZW5kXSA9IHRtcDtcbiAgICArK2JlZ2luO1xuICAgIC0tZW5kO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFZBTFVFPn0gYXJyIFRoZSBhcnJheSB0byBtb2RpZnkuXG4gKiBAcGFyYW0geyFBcnJheTxWQUxVRT58VkFMVUV9IGRhdGEgVGhlIGVsZW1lbnRzIG9yIGFycmF5cyBvZiBlbGVtZW50cyB0byBhZGQgdG8gYXJyLlxuICogQHRlbXBsYXRlIFZBTFVFXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQoYXJyLCBkYXRhKSB7XG4gIHZhciBleHRlbnNpb24gPSBBcnJheS5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtkYXRhXTtcbiAgdmFyIGxlbmd0aCA9IGV4dGVuc2lvbi5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBhcnJbYXJyLmxlbmd0aF0gPSBleHRlbnNpb25baV07XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8VkFMVUU+fSBhcnIgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7VkFMVUV9IG9iaiBUaGUgZWxlbWVudCB0byByZW1vdmUuXG4gKiBAdGVtcGxhdGUgVkFMVUVcbiAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBlbGVtZW50IHdhcyByZW1vdmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKGFyciwgb2JqKSB7XG4gIHZhciBpID0gYXJyLmluZGV4T2Yob2JqKTtcbiAgdmFyIGZvdW5kID0gaSA+IC0xO1xuICBpZiAoZm91bmQpIHtcbiAgICBhcnIuc3BsaWNlKGksIDEpO1xuICB9XG4gIHJldHVybiBmb3VuZDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8VkFMVUU+fSBhcnIgVGhlIGFycmF5IHRvIHNlYXJjaCBpbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVkFMVUUsIG51bWJlciwgPykgOiBib29sZWFufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjb21wYXJlLlxuICogQHRlbXBsYXRlIFZBTFVFXG4gKiBAcmV0dXJuIHtWQUxVRXxudWxsfSBUaGUgZWxlbWVudCBmb3VuZCBvciBudWxsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZChhcnIsIGZ1bmMpIHtcbiAgdmFyIGxlbmd0aCA9IGFyci5sZW5ndGggPj4+IDA7XG4gIHZhciB2YWx1ZTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdmFsdWUgPSBhcnJbaV07XG4gICAgaWYgKGZ1bmModmFsdWUsIGksIGFycikpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5fFVpbnQ4Q2xhbXBlZEFycmF5fSBhcnIxIFRoZSBmaXJzdCBhcnJheSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtBcnJheXxVaW50OENsYW1wZWRBcnJheX0gYXJyMiBUaGUgc2Vjb25kIGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSB0d28gYXJyYXlzIGFyZSBlcXVhbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhhcnIxLCBhcnIyKSB7XG4gIHZhciBsZW4xID0gYXJyMS5sZW5ndGg7XG4gIGlmIChsZW4xICE9PSBhcnIyLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjE7IGkrKykge1xuICAgIGlmIChhcnIxW2ldICE9PSBhcnIyW2ldKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5cbi8qKlxuICogU29ydCB0aGUgcGFzc2VkIGFycmF5IHN1Y2ggdGhhdCB0aGUgcmVsYXRpdmUgb3JkZXIgb2YgZXF1YWwgZWxlbWVudHMgaXMgcHJldmVydmVkLlxuICogU2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NvcnRpbmdfYWxnb3JpdGhtI1N0YWJpbGl0eSBmb3IgZGV0YWlscy5cbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBUaGUgYXJyYXkgdG8gc29ydCAobW9kaWZpZXMgb3JpZ2luYWwpLlxuICogQHBhcmFtIHshZnVuY3Rpb24oKiwgKik6IG51bWJlcn0gY29tcGFyZUZuYyBDb21wYXJpc29uIGZ1bmN0aW9uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhYmxlU29ydChhcnIsIGNvbXBhcmVGbmMpIHtcbiAgdmFyIGxlbmd0aCA9IGFyci5sZW5ndGg7XG4gIHZhciB0bXAgPSBBcnJheShhcnIubGVuZ3RoKTtcbiAgdmFyIGk7XG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHRtcFtpXSA9IHtpbmRleDogaSwgdmFsdWU6IGFycltpXX07XG4gIH1cbiAgdG1wLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBjb21wYXJlRm5jKGEudmFsdWUsIGIudmFsdWUpIHx8IGEuaW5kZXggLSBiLmluZGV4O1xuICB9KTtcbiAgZm9yIChpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgIGFycltpXSA9IHRtcFtpXS52YWx1ZTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIFRoZSBhcnJheSB0byBzZWFyY2ggaW4uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIENvbXBhcmlzb24gZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFJldHVybiBpbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRJbmRleChhcnIsIGZ1bmMpIHtcbiAgdmFyIGluZGV4O1xuICB2YXIgZm91bmQgPSAhYXJyLmV2ZXJ5KGZ1bmN0aW9uKGVsLCBpZHgpIHtcbiAgICBpbmRleCA9IGlkeDtcbiAgICByZXR1cm4gIWZ1bmMoZWwsIGlkeCwgYXJyKTtcbiAgfSk7XG4gIHJldHVybiBmb3VuZCA/IGluZGV4IDogLTE7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgVGhlIGFycmF5IHRvIHRlc3QuXG4gKiBAcGFyYW0ge0Z1bmN0aW9uPX0gb3B0X2Z1bmMgQ29tcGFyaXNvbiBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9zdHJpY3QgU3RyaWN0bHkgc29ydGVkIChkZWZhdWx0IGZhbHNlKS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybiBpbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU29ydGVkKGFyciwgb3B0X2Z1bmMsIG9wdF9zdHJpY3QpIHtcbiAgdmFyIGNvbXBhcmUgPSBvcHRfZnVuYyB8fCBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uO1xuICByZXR1cm4gYXJyLmV2ZXJ5KGZ1bmN0aW9uKGN1cnJlbnRWYWwsIGluZGV4KSB7XG4gICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIHJlcyA9IGNvbXBhcmUoYXJyW2luZGV4IC0gMV0sIGN1cnJlbnRWYWwpO1xuICAgIHJldHVybiAhKHJlcyA+IDAgfHwgb3B0X3N0cmljdCAmJiByZXMgPT09IDApO1xuICB9KTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3BvaW50ZXIvVG91Y2hTb3VyY2VcbiAqL1xuXG4vLyBCYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vUG9seW1lci9Qb2ludGVyRXZlbnRzXG5cbi8vIENvcHlyaWdodCAoYykgMjAxMyBUaGUgUG9seW1lciBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy9cbi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuLy8gbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZVxuLy8gbWV0OlxuLy9cbi8vICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcbi8vIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbi8vICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZVxuLy8gY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lclxuLy8gaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZVxuLy8gZGlzdHJpYnV0aW9uLlxuLy8gKiBOZWl0aGVyIHRoZSBuYW1lIG9mIEdvb2dsZSBJbmMuIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4vLyBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbVxuLy8gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbi8vXG4vLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTXG4vLyBcIkFTIElTXCIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UXG4vLyBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1Jcbi8vIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUXG4vLyBPV05FUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCxcbi8vIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1Rcbi8vIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLFxuLy8gREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZXG4vLyBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXG4vLyAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0Vcbi8vIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG5cbmltcG9ydCB7cmVtb3ZlfSBmcm9tICcuLi9hcnJheS5qcyc7XG5pbXBvcnQgRXZlbnRTb3VyY2UgZnJvbSAnLi9FdmVudFNvdXJjZS5qcyc7XG5pbXBvcnQge1BPSU5URVJfSUR9IGZyb20gJy4vTW91c2VTb3VyY2UuanMnO1xuXG5cbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xudmFyIENMSUNLX0NPVU5UX1RJTUVPVVQgPSAyMDA7XG5cbi8qKlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xudmFyIFBPSU5URVJfVFlQRSA9ICd0b3VjaCc7XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYHRvdWNoc3RhcnRgLCB0cmlnZ2VycyBgcG9pbnRlcm92ZXJgLFxuICogYHBvaW50ZXJlbnRlcmAgYW5kIGBwb2ludGVyZG93bmAgZXZlbnRzLlxuICpcbiAqIEB0aGlzIHtUb3VjaFNvdXJjZX1cbiAqIEBwYXJhbSB7VG91Y2hFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIHRvdWNoc3RhcnQoaW5FdmVudCkge1xuICB0aGlzLnZhY3V1bVRvdWNoZXNfKGluRXZlbnQpO1xuICB0aGlzLnNldFByaW1hcnlUb3VjaF8oaW5FdmVudC5jaGFuZ2VkVG91Y2hlc1swXSk7XG4gIHRoaXMuZGVkdXBTeW50aE1vdXNlXyhpbkV2ZW50KTtcbiAgdGhpcy5jbGlja0NvdW50XysrO1xuICB0aGlzLnByb2Nlc3NUb3VjaGVzXyhpbkV2ZW50LCB0aGlzLm92ZXJEb3duXyk7XG59XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYHRvdWNobW92ZWAuXG4gKlxuICogQHRoaXMge1RvdWNoU291cmNlfVxuICogQHBhcmFtIHtUb3VjaEV2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gdG91Y2htb3ZlKGluRXZlbnQpIHtcbiAgdGhpcy5wcm9jZXNzVG91Y2hlc18oaW5FdmVudCwgdGhpcy5tb3ZlT3Zlck91dF8pO1xufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGB0b3VjaGVuZGAsIHRyaWdnZXJzIGBwb2ludGVydXBgLFxuICogYHBvaW50ZXJvdXRgIGFuZCBgcG9pbnRlcmxlYXZlYCBldmVudHMuXG4gKlxuICogQHRoaXMge1RvdWNoU291cmNlfVxuICogQHBhcmFtIHtUb3VjaEV2ZW50fSBpbkV2ZW50IFRoZSBldmVudC5cbiAqL1xuZnVuY3Rpb24gdG91Y2hlbmQoaW5FdmVudCkge1xuICB0aGlzLmRlZHVwU3ludGhNb3VzZV8oaW5FdmVudCk7XG4gIHRoaXMucHJvY2Vzc1RvdWNoZXNfKGluRXZlbnQsIHRoaXMudXBPdXRfKTtcbn1cblxuLyoqXG4gKiBIYW5kbGVyIGZvciBgdG91Y2hjYW5jZWxgLCB0cmlnZ2VycyBgcG9pbnRlcmNhbmNlbGAsXG4gKiBgcG9pbnRlcm91dGAgYW5kIGBwb2ludGVybGVhdmVgIGV2ZW50cy5cbiAqXG4gKiBAdGhpcyB7VG91Y2hTb3VyY2V9XG4gKiBAcGFyYW0ge1RvdWNoRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiB0b3VjaGNhbmNlbChpbkV2ZW50KSB7XG4gIHRoaXMucHJvY2Vzc1RvdWNoZXNfKGluRXZlbnQsIHRoaXMuY2FuY2VsT3V0Xyk7XG59XG5cblxudmFyIFRvdWNoU291cmNlID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoRXZlbnRTb3VyY2UpIHtcbiAgZnVuY3Rpb24gVG91Y2hTb3VyY2UoZGlzcGF0Y2hlciwgbW91c2VTb3VyY2UpIHtcbiAgICB2YXIgbWFwcGluZyA9IHtcbiAgICAgICd0b3VjaHN0YXJ0JzogdG91Y2hzdGFydCxcbiAgICAgICd0b3VjaG1vdmUnOiB0b3VjaG1vdmUsXG4gICAgICAndG91Y2hlbmQnOiB0b3VjaGVuZCxcbiAgICAgICd0b3VjaGNhbmNlbCc6IHRvdWNoY2FuY2VsXG4gICAgfTtcbiAgICBFdmVudFNvdXJjZS5jYWxsKHRoaXMsIGRpc3BhdGNoZXIsIG1hcHBpbmcpO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0XG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBFdmVudHxPYmplY3Q+fVxuICAgICAqL1xuICAgIHRoaXMucG9pbnRlck1hcCA9IGRpc3BhdGNoZXIucG9pbnRlck1hcDtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL01vdXNlU291cmNlLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5tb3VzZVNvdXJjZSA9IG1vdXNlU291cmNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmZpcnN0VG91Y2hJZF8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5jbGlja0NvdW50XyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqL1xuICAgIHRoaXMucmVzZXRJZF87XG5cbiAgICAvKipcbiAgICAgKiBNb3VzZSBldmVudCB0aW1lb3V0OiBUaGlzIHNob3VsZCBiZSBsb25nIGVub3VnaCB0b1xuICAgICAqIGlnbm9yZSBjb21wYXQgbW91c2UgZXZlbnRzIG1hZGUgYnkgdG91Y2guXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZGVkdXBUaW1lb3V0XyA9IDI1MDA7XG4gIH1cblxuICBpZiAoIEV2ZW50U291cmNlICkgVG91Y2hTb3VyY2UuX19wcm90b19fID0gRXZlbnRTb3VyY2U7XG4gIFRvdWNoU291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2ZW50U291cmNlICYmIEV2ZW50U291cmNlLnByb3RvdHlwZSApO1xuICBUb3VjaFNvdXJjZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUb3VjaFNvdXJjZTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtUb3VjaH0gaW5Ub3VjaCBUaGUgaW4gdG91Y2guXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUsIGlmIHRoaXMgaXMgdGhlIHByaW1hcnkgdG91Y2guXG4gICAqL1xuICBUb3VjaFNvdXJjZS5wcm90b3R5cGUuaXNQcmltYXJ5VG91Y2hfID0gZnVuY3Rpb24gaXNQcmltYXJ5VG91Y2hfIChpblRvdWNoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmlyc3RUb3VjaElkXyA9PT0gaW5Ub3VjaC5pZGVudGlmaWVyO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgcHJpbWFyeSB0b3VjaCBpZiB0aGVyZSBhcmUgbm8gcG9pbnRlcnMsIG9yIHRoZSBvbmx5IHBvaW50ZXIgaXMgdGhlIG1vdXNlLlxuICAgKiBAcGFyYW0ge1RvdWNofSBpblRvdWNoIFRoZSBpbiB0b3VjaC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIFRvdWNoU291cmNlLnByb3RvdHlwZS5zZXRQcmltYXJ5VG91Y2hfID0gZnVuY3Rpb24gc2V0UHJpbWFyeVRvdWNoXyAoaW5Ub3VjaCkge1xuICAgIHZhciBjb3VudCA9IE9iamVjdC5rZXlzKHRoaXMucG9pbnRlck1hcCkubGVuZ3RoO1xuICAgIGlmIChjb3VudCA9PT0gMCB8fCAoY291bnQgPT09IDEgJiYgUE9JTlRFUl9JRC50b1N0cmluZygpIGluIHRoaXMucG9pbnRlck1hcCkpIHtcbiAgICAgIHRoaXMuZmlyc3RUb3VjaElkXyA9IGluVG91Y2guaWRlbnRpZmllcjtcbiAgICAgIHRoaXMuY2FuY2VsUmVzZXRDbGlja0NvdW50XygpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IGluUG9pbnRlciBUaGUgaW4gcG9pbnRlciBvYmplY3QuXG4gICAqL1xuICBUb3VjaFNvdXJjZS5wcm90b3R5cGUucmVtb3ZlUHJpbWFyeVBvaW50ZXJfID0gZnVuY3Rpb24gcmVtb3ZlUHJpbWFyeVBvaW50ZXJfIChpblBvaW50ZXIpIHtcbiAgICBpZiAoaW5Qb2ludGVyLmlzUHJpbWFyeSkge1xuICAgICAgdGhpcy5maXJzdFRvdWNoSWRfID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5yZXNldENsaWNrQ291bnRfKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgVG91Y2hTb3VyY2UucHJvdG90eXBlLnJlc2V0Q2xpY2tDb3VudF8gPSBmdW5jdGlvbiByZXNldENsaWNrQ291bnRfICgpIHtcbiAgICB0aGlzLnJlc2V0SWRfID0gc2V0VGltZW91dChcbiAgICAgIHRoaXMucmVzZXRDbGlja0NvdW50SGFuZGxlcl8uYmluZCh0aGlzKSxcbiAgICAgIENMSUNLX0NPVU5UX1RJTUVPVVQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgVG91Y2hTb3VyY2UucHJvdG90eXBlLnJlc2V0Q2xpY2tDb3VudEhhbmRsZXJfID0gZnVuY3Rpb24gcmVzZXRDbGlja0NvdW50SGFuZGxlcl8gKCkge1xuICAgIHRoaXMuY2xpY2tDb3VudF8gPSAwO1xuICAgIHRoaXMucmVzZXRJZF8gPSB1bmRlZmluZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBUb3VjaFNvdXJjZS5wcm90b3R5cGUuY2FuY2VsUmVzZXRDbGlja0NvdW50XyA9IGZ1bmN0aW9uIGNhbmNlbFJlc2V0Q2xpY2tDb3VudF8gKCkge1xuICAgIGlmICh0aGlzLnJlc2V0SWRfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlc2V0SWRfKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VG91Y2hFdmVudH0gYnJvd3NlckV2ZW50IEJyb3dzZXIgZXZlbnRcbiAgICogQHBhcmFtIHtUb3VjaH0gaW5Ub3VjaCBUb3VjaCBldmVudFxuICAgKiBAcmV0dXJuIHtQb2ludGVyRXZlbnR9IEEgcG9pbnRlciBvYmplY3QuXG4gICAqL1xuICBUb3VjaFNvdXJjZS5wcm90b3R5cGUudG91Y2hUb1BvaW50ZXJfID0gZnVuY3Rpb24gdG91Y2hUb1BvaW50ZXJfIChicm93c2VyRXZlbnQsIGluVG91Y2gpIHtcbiAgICB2YXIgZSA9IHRoaXMuZGlzcGF0Y2hlci5jbG9uZUV2ZW50KGJyb3dzZXJFdmVudCwgaW5Ub3VjaCk7XG4gICAgLy8gU3BlYyBzcGVjaWZpZXMgdGhhdCBwb2ludGVySWQgMSBpcyByZXNlcnZlZCBmb3IgTW91c2UuXG4gICAgLy8gVG91Y2ggaWRlbnRpZmllcnMgY2FuIHN0YXJ0IGF0IDAuXG4gICAgLy8gQWRkIDIgdG8gdGhlIHRvdWNoIGlkZW50aWZpZXIgZm9yIGNvbXBhdGliaWxpdHkuXG4gICAgZS5wb2ludGVySWQgPSBpblRvdWNoLmlkZW50aWZpZXIgKyAyO1xuICAgIC8vIFRPRE86IGNoZWNrIGlmIHRoaXMgaXMgbmVjZXNzYXJ5P1xuICAgIC8vZS50YXJnZXQgPSBmaW5kVGFyZ2V0KGUpO1xuICAgIGUuYnViYmxlcyA9IHRydWU7XG4gICAgZS5jYW5jZWxhYmxlID0gdHJ1ZTtcbiAgICBlLmRldGFpbCA9IHRoaXMuY2xpY2tDb3VudF87XG4gICAgZS5idXR0b24gPSAwO1xuICAgIGUuYnV0dG9ucyA9IDE7XG4gICAgZS53aWR0aCA9IGluVG91Y2gucmFkaXVzWCB8fCAwO1xuICAgIGUuaGVpZ2h0ID0gaW5Ub3VjaC5yYWRpdXNZIHx8IDA7XG4gICAgZS5wcmVzc3VyZSA9IGluVG91Y2guZm9yY2UgfHwgMC41O1xuICAgIGUuaXNQcmltYXJ5ID0gdGhpcy5pc1ByaW1hcnlUb3VjaF8oaW5Ub3VjaCk7XG4gICAgZS5wb2ludGVyVHlwZSA9IFBPSU5URVJfVFlQRTtcblxuICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHRoZSBwcm9wZXJ0aWVzIHRoYXQgYXJlIGRpZmZlcmVudCBmb3JcbiAgICAvLyBlYWNoIGBUb3VjaGAgb2JqZWN0IGFyZSBub3QgY29waWVkIGZyb20gdGhlIEJyb3dzZXJFdmVudCBvYmplY3RcbiAgICBlLmNsaWVudFggPSBpblRvdWNoLmNsaWVudFg7XG4gICAgZS5jbGllbnRZID0gaW5Ub3VjaC5jbGllbnRZO1xuICAgIGUuc2NyZWVuWCA9IGluVG91Y2guc2NyZWVuWDtcbiAgICBlLnNjcmVlblkgPSBpblRvdWNoLnNjcmVlblk7XG5cbiAgICByZXR1cm4gZTtcbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtUb3VjaEV2ZW50fSBpbkV2ZW50IFRvdWNoIGV2ZW50XG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oVG91Y2hFdmVudCwgUG9pbnRlckV2ZW50KX0gaW5GdW5jdGlvbiBJbiBmdW5jdGlvbi5cbiAgICovXG4gIFRvdWNoU291cmNlLnByb3RvdHlwZS5wcm9jZXNzVG91Y2hlc18gPSBmdW5jdGlvbiBwcm9jZXNzVG91Y2hlc18gKGluRXZlbnQsIGluRnVuY3Rpb24pIHtcbiAgICB2YXIgdG91Y2hlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGluRXZlbnQuY2hhbmdlZFRvdWNoZXMpO1xuICAgIHZhciBjb3VudCA9IHRvdWNoZXMubGVuZ3RoO1xuICAgIGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KCkge1xuICAgICAgaW5FdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgIHZhciBwb2ludGVyID0gdGhpcy50b3VjaFRvUG9pbnRlcl8oaW5FdmVudCwgdG91Y2hlc1tpXSk7XG4gICAgICAvLyBmb3J3YXJkIHRvdWNoIHByZXZlbnREZWZhdWx0c1xuICAgICAgcG9pbnRlci5wcmV2ZW50RGVmYXVsdCA9IHByZXZlbnREZWZhdWx0O1xuICAgICAgaW5GdW5jdGlvbi5jYWxsKHRoaXMsIGluRXZlbnQsIHBvaW50ZXIpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtUb3VjaExpc3R9IHRvdWNoTGlzdCBUaGUgdG91Y2ggbGlzdC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHNlYXJjaElkIFNlYXJjaCBpZGVudGlmaWVyLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlLCBpZiB0aGUgYFRvdWNoYCB3aXRoIHRoZSBnaXZlbiBpZCBpcyBpbiB0aGUgbGlzdC5cbiAgICovXG4gIFRvdWNoU291cmNlLnByb3RvdHlwZS5maW5kVG91Y2hfID0gZnVuY3Rpb24gZmluZFRvdWNoXyAodG91Y2hMaXN0LCBzZWFyY2hJZCkge1xuICAgIHZhciBsID0gdG91Y2hMaXN0Lmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIHRvdWNoID0gdG91Y2hMaXN0W2ldO1xuICAgICAgaWYgKHRvdWNoLmlkZW50aWZpZXIgPT09IHNlYXJjaElkKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluIHNvbWUgaW5zdGFuY2VzLCBhIHRvdWNoc3RhcnQgY2FuIGhhcHBlbiB3aXRob3V0IGEgdG91Y2hlbmQuIFRoaXNcbiAgICogbGVhdmVzIHRoZSBwb2ludGVybWFwIGluIGEgYnJva2VuIHN0YXRlLlxuICAgKiBUaGVyZWZvcmUsIG9uIGV2ZXJ5IHRvdWNoc3RhcnQsIHdlIHJlbW92ZSB0aGUgdG91Y2hlcyB0aGF0IGRpZCBub3QgZmlyZSBhXG4gICAqIHRvdWNoZW5kIGV2ZW50LlxuICAgKiBUbyBrZWVwIHN0YXRlIGdsb2JhbGx5IGNvbnNpc3RlbnQsIHdlIGZpcmUgYSBwb2ludGVyY2FuY2VsIGZvclxuICAgKiB0aGlzIFwiYWJhbmRvbmVkXCIgdG91Y2hcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtUb3VjaEV2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAgICovXG4gIFRvdWNoU291cmNlLnByb3RvdHlwZS52YWN1dW1Ub3VjaGVzXyA9IGZ1bmN0aW9uIHZhY3V1bVRvdWNoZXNfIChpbkV2ZW50KSB7XG4gICAgdmFyIHRvdWNoTGlzdCA9IGluRXZlbnQudG91Y2hlcztcbiAgICAvLyBwb2ludGVyTWFwLmdldENvdW50KCkgc2hvdWxkIGJlIDwgdG91Y2hMaXN0Lmxlbmd0aCBoZXJlLFxuICAgIC8vIGFzIHRoZSB0b3VjaHN0YXJ0IGhhcyBub3QgYmVlbiBwcm9jZXNzZWQgeWV0LlxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModGhpcy5wb2ludGVyTWFwKTtcbiAgICB2YXIgY291bnQgPSBrZXlzLmxlbmd0aDtcbiAgICBpZiAoY291bnQgPj0gdG91Y2hMaXN0Lmxlbmd0aCkge1xuICAgICAgdmFyIGQgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICB2YXIga2V5ID0gTnVtYmVyKGtleXNbaV0pO1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnBvaW50ZXJNYXBba2V5XTtcbiAgICAgICAgLy8gTmV2ZXIgcmVtb3ZlIHBvaW50ZXJJZCA9PSAxLCB3aGljaCBpcyBtb3VzZS5cbiAgICAgICAgLy8gVG91Y2ggaWRlbnRpZmllcnMgYXJlIDIgc21hbGxlciB0aGFuIHRoZWlyIHBvaW50ZXJJZCwgd2hpY2ggaXMgdGhlXG4gICAgICAgIC8vIGluZGV4IGluIHBvaW50ZXJtYXAuXG4gICAgICAgIGlmIChrZXkgIT0gUE9JTlRFUl9JRCAmJiAhdGhpcy5maW5kVG91Y2hfKHRvdWNoTGlzdCwga2V5IC0gMikpIHtcbiAgICAgICAgICBkLnB1c2godmFsdWUub3V0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yICh2YXIgaSQxID0gMDsgaSQxIDwgZC5sZW5ndGg7ICsraSQxKSB7XG4gICAgICAgIHRoaXMuY2FuY2VsT3V0XyhpbkV2ZW50LCBkW2kkMV0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtUb3VjaEV2ZW50fSBicm93c2VyRXZlbnQgVGhlIGV2ZW50LlxuICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gaW5Qb2ludGVyIFRoZSBpbiBwb2ludGVyIG9iamVjdC5cbiAgICovXG4gIFRvdWNoU291cmNlLnByb3RvdHlwZS5vdmVyRG93bl8gPSBmdW5jdGlvbiBvdmVyRG93bl8gKGJyb3dzZXJFdmVudCwgaW5Qb2ludGVyKSB7XG4gICAgdGhpcy5wb2ludGVyTWFwW2luUG9pbnRlci5wb2ludGVySWRdID0ge1xuICAgICAgdGFyZ2V0OiBpblBvaW50ZXIudGFyZ2V0LFxuICAgICAgb3V0OiBpblBvaW50ZXIsXG4gICAgICBvdXRUYXJnZXQ6IGluUG9pbnRlci50YXJnZXRcbiAgICB9O1xuICAgIHRoaXMuZGlzcGF0Y2hlci5vdmVyKGluUG9pbnRlciwgYnJvd3NlckV2ZW50KTtcbiAgICB0aGlzLmRpc3BhdGNoZXIuZW50ZXIoaW5Qb2ludGVyLCBicm93c2VyRXZlbnQpO1xuICAgIHRoaXMuZGlzcGF0Y2hlci5kb3duKGluUG9pbnRlciwgYnJvd3NlckV2ZW50KTtcbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtUb3VjaEV2ZW50fSBicm93c2VyRXZlbnQgVGhlIGV2ZW50LlxuICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gaW5Qb2ludGVyIFRoZSBpbiBwb2ludGVyLlxuICAgKi9cbiAgVG91Y2hTb3VyY2UucHJvdG90eXBlLm1vdmVPdmVyT3V0XyA9IGZ1bmN0aW9uIG1vdmVPdmVyT3V0XyAoYnJvd3NlckV2ZW50LCBpblBvaW50ZXIpIHtcbiAgICB2YXIgZXZlbnQgPSBpblBvaW50ZXI7XG4gICAgdmFyIHBvaW50ZXIgPSB0aGlzLnBvaW50ZXJNYXBbZXZlbnQucG9pbnRlcklkXTtcbiAgICAvLyBhIGZpbmdlciBkcmlmdGVkIG9mZiB0aGUgc2NyZWVuLCBpZ25vcmUgaXRcbiAgICBpZiAoIXBvaW50ZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIG91dEV2ZW50ID0gcG9pbnRlci5vdXQ7XG4gICAgdmFyIG91dFRhcmdldCA9IHBvaW50ZXIub3V0VGFyZ2V0O1xuICAgIHRoaXMuZGlzcGF0Y2hlci5tb3ZlKGV2ZW50LCBicm93c2VyRXZlbnQpO1xuICAgIGlmIChvdXRFdmVudCAmJiBvdXRUYXJnZXQgIT09IGV2ZW50LnRhcmdldCkge1xuICAgICAgb3V0RXZlbnQucmVsYXRlZFRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgIC8qKiBAdHlwZSB7T2JqZWN0fSAqLyAoZXZlbnQpLnJlbGF0ZWRUYXJnZXQgPSBvdXRUYXJnZXQ7XG4gICAgICAvLyByZWNvdmVyIGZyb20gcmV0YXJnZXRpbmcgYnkgc2hhZG93XG4gICAgICBvdXRFdmVudC50YXJnZXQgPSBvdXRUYXJnZXQ7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hlci5sZWF2ZU91dChvdXRFdmVudCwgYnJvd3NlckV2ZW50KTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaGVyLmVudGVyT3ZlcihldmVudCwgYnJvd3NlckV2ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNsZWFuIHVwIGNhc2Ugd2hlbiBmaW5nZXIgbGVhdmVzIHRoZSBzY3JlZW5cbiAgICAgICAgLyoqIEB0eXBlIHtPYmplY3R9ICovIChldmVudCkudGFyZ2V0ID0gb3V0VGFyZ2V0O1xuICAgICAgICAvKiogQHR5cGUge09iamVjdH0gKi8gKGV2ZW50KS5yZWxhdGVkVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5jYW5jZWxPdXRfKGJyb3dzZXJFdmVudCwgZXZlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICBwb2ludGVyLm91dCA9IGV2ZW50O1xuICAgIHBvaW50ZXIub3V0VGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1RvdWNoRXZlbnR9IGJyb3dzZXJFdmVudCBBbiBldmVudC5cbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IGluUG9pbnRlciBUaGUgaW5Qb2ludGVyIG9iamVjdC5cbiAgICovXG4gIFRvdWNoU291cmNlLnByb3RvdHlwZS51cE91dF8gPSBmdW5jdGlvbiB1cE91dF8gKGJyb3dzZXJFdmVudCwgaW5Qb2ludGVyKSB7XG4gICAgdGhpcy5kaXNwYXRjaGVyLnVwKGluUG9pbnRlciwgYnJvd3NlckV2ZW50KTtcbiAgICB0aGlzLmRpc3BhdGNoZXIub3V0KGluUG9pbnRlciwgYnJvd3NlckV2ZW50KTtcbiAgICB0aGlzLmRpc3BhdGNoZXIubGVhdmUoaW5Qb2ludGVyLCBicm93c2VyRXZlbnQpO1xuICAgIHRoaXMuY2xlYW5VcFBvaW50ZXJfKGluUG9pbnRlcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VG91Y2hFdmVudH0gYnJvd3NlckV2ZW50IFRoZSBldmVudC5cbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IGluUG9pbnRlciBUaGUgaW4gcG9pbnRlci5cbiAgICovXG4gIFRvdWNoU291cmNlLnByb3RvdHlwZS5jYW5jZWxPdXRfID0gZnVuY3Rpb24gY2FuY2VsT3V0XyAoYnJvd3NlckV2ZW50LCBpblBvaW50ZXIpIHtcbiAgICB0aGlzLmRpc3BhdGNoZXIuY2FuY2VsKGluUG9pbnRlciwgYnJvd3NlckV2ZW50KTtcbiAgICB0aGlzLmRpc3BhdGNoZXIub3V0KGluUG9pbnRlciwgYnJvd3NlckV2ZW50KTtcbiAgICB0aGlzLmRpc3BhdGNoZXIubGVhdmUoaW5Qb2ludGVyLCBicm93c2VyRXZlbnQpO1xuICAgIHRoaXMuY2xlYW5VcFBvaW50ZXJfKGluUG9pbnRlcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBpblBvaW50ZXIgVGhlIGluUG9pbnRlciBvYmplY3QuXG4gICAqL1xuICBUb3VjaFNvdXJjZS5wcm90b3R5cGUuY2xlYW5VcFBvaW50ZXJfID0gZnVuY3Rpb24gY2xlYW5VcFBvaW50ZXJfIChpblBvaW50ZXIpIHtcbiAgICBkZWxldGUgdGhpcy5wb2ludGVyTWFwW2luUG9pbnRlci5wb2ludGVySWRdO1xuICAgIHRoaXMucmVtb3ZlUHJpbWFyeVBvaW50ZXJfKGluUG9pbnRlcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByZXZlbnQgc3ludGggbW91c2UgZXZlbnRzIGZyb20gY3JlYXRpbmcgcG9pbnRlciBldmVudHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VG91Y2hFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gICAqL1xuICBUb3VjaFNvdXJjZS5wcm90b3R5cGUuZGVkdXBTeW50aE1vdXNlXyA9IGZ1bmN0aW9uIGRlZHVwU3ludGhNb3VzZV8gKGluRXZlbnQpIHtcbiAgICB2YXIgbHRzID0gdGhpcy5tb3VzZVNvdXJjZS5sYXN0VG91Y2hlcztcbiAgICB2YXIgdCA9IGluRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF07XG4gICAgLy8gb25seSB0aGUgcHJpbWFyeSBmaW5nZXIgd2lsbCBzeW50aCBtb3VzZSBldmVudHNcbiAgICBpZiAodGhpcy5pc1ByaW1hcnlUb3VjaF8odCkpIHtcbiAgICAgIC8vIHJlbWVtYmVyIHgveSBvZiBsYXN0IHRvdWNoXG4gICAgICB2YXIgbHQgPSBbdC5jbGllbnRYLCB0LmNsaWVudFldO1xuICAgICAgbHRzLnB1c2gobHQpO1xuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyByZW1vdmUgdG91Y2ggYWZ0ZXIgdGltZW91dFxuICAgICAgICByZW1vdmUobHRzLCBsdCk7XG4gICAgICB9LCB0aGlzLmRlZHVwVGltZW91dF8pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gVG91Y2hTb3VyY2U7XG59KEV2ZW50U291cmNlKSk7XG5cbmV4cG9ydCBkZWZhdWx0IFRvdWNoU291cmNlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Ub3VjaFNvdXJjZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcG9pbnRlci9Qb2ludGVyRXZlbnRIYW5kbGVyXG4gKi9cblxuLy8gQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL1BvbHltZXIvUG9pbnRlckV2ZW50c1xuXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTMgVGhlIFBvbHltZXIgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vXG4vLyBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbi8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmVcbi8vIG1ldDpcbi8vXG4vLyAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0XG4vLyBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4vLyAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmVcbi8vIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXJcbi8vIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGVcbi8vIGRpc3RyaWJ1dGlvbi5cbi8vICogTmVpdGhlciB0aGUgbmFtZSBvZiBHb29nbGUgSW5jLiBub3IgdGhlIG5hbWVzIG9mIGl0c1xuLy8gY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbi8vIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4vL1xuLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SU1xuLy8gXCJBUyBJU1wiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVFxuLy8gTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SXG4vLyBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVFxuLy8gT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsXG4vLyBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UXG4vLyBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSxcbi8vIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWVxuLy8gVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuLy8gKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG4vLyBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuXG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW59IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgRXZlbnRUYXJnZXQgZnJvbSAnLi4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQge1BPSU5URVIsIE1TUE9JTlRFUiwgVE9VQ0h9IGZyb20gJy4uL2hhcy5qcyc7XG5pbXBvcnQgUG9pbnRlckV2ZW50VHlwZSBmcm9tICcuL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTW91c2VTb3VyY2UsIHtwcmVwYXJlRXZlbnQgYXMgcHJlcGFyZU1vdXNlRXZlbnR9IGZyb20gJy4vTW91c2VTb3VyY2UuanMnO1xuaW1wb3J0IE1zU291cmNlIGZyb20gJy4vTXNTb3VyY2UuanMnO1xuaW1wb3J0IE5hdGl2ZVNvdXJjZSBmcm9tICcuL05hdGl2ZVNvdXJjZS5qcyc7XG5pbXBvcnQgUG9pbnRlckV2ZW50IGZyb20gJy4vUG9pbnRlckV2ZW50LmpzJztcbmltcG9ydCBUb3VjaFNvdXJjZSBmcm9tICcuL1RvdWNoU291cmNlLmpzJztcblxuXG4vKipcbiAqIFByb3BlcnRpZXMgdG8gY29weSB3aGVuIGNsb25pbmcgYW4gZXZlbnQsIHdpdGggZGVmYXVsdCB2YWx1ZXMuXG4gKiBAdHlwZSB7QXJyYXk8QXJyYXk+fVxuICovXG52YXIgQ0xPTkVfUFJPUFMgPSBbXG4gIC8vIE1vdXNlRXZlbnRcbiAgWydidWJibGVzJywgZmFsc2VdLFxuICBbJ2NhbmNlbGFibGUnLCBmYWxzZV0sXG4gIFsndmlldycsIG51bGxdLFxuICBbJ2RldGFpbCcsIG51bGxdLFxuICBbJ3NjcmVlblgnLCAwXSxcbiAgWydzY3JlZW5ZJywgMF0sXG4gIFsnY2xpZW50WCcsIDBdLFxuICBbJ2NsaWVudFknLCAwXSxcbiAgWydjdHJsS2V5JywgZmFsc2VdLFxuICBbJ2FsdEtleScsIGZhbHNlXSxcbiAgWydzaGlmdEtleScsIGZhbHNlXSxcbiAgWydtZXRhS2V5JywgZmFsc2VdLFxuICBbJ2J1dHRvbicsIDBdLFxuICBbJ3JlbGF0ZWRUYXJnZXQnLCBudWxsXSxcbiAgLy8gRE9NIExldmVsIDNcbiAgWydidXR0b25zJywgMF0sXG4gIC8vIFBvaW50ZXJFdmVudFxuICBbJ3BvaW50ZXJJZCcsIDBdLFxuICBbJ3dpZHRoJywgMF0sXG4gIFsnaGVpZ2h0JywgMF0sXG4gIFsncHJlc3N1cmUnLCAwXSxcbiAgWyd0aWx0WCcsIDBdLFxuICBbJ3RpbHRZJywgMF0sXG4gIFsncG9pbnRlclR5cGUnLCAnJ10sXG4gIFsnaHdUaW1lc3RhbXAnLCAwXSxcbiAgWydpc1ByaW1hcnknLCBmYWxzZV0sXG4gIC8vIGV2ZW50IGluc3RhbmNlXG4gIFsndHlwZScsICcnXSxcbiAgWyd0YXJnZXQnLCBudWxsXSxcbiAgWydjdXJyZW50VGFyZ2V0JywgbnVsbF0sXG4gIFsnd2hpY2gnLCAwXVxuXTtcblxuXG52YXIgUG9pbnRlckV2ZW50SGFuZGxlciA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50VGFyZ2V0KSB7XG4gIGZ1bmN0aW9uIFBvaW50ZXJFdmVudEhhbmRsZXIoZWxlbWVudCkge1xuICAgIEV2ZW50VGFyZ2V0LmNhbGwodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtFbGVtZW50fEhUTUxEb2N1bWVudH1cbiAgICAgKi9cbiAgICB0aGlzLmVsZW1lbnRfID0gZWxlbWVudDtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgRXZlbnR8T2JqZWN0Pn1cbiAgICAgKi9cbiAgICB0aGlzLnBvaW50ZXJNYXAgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBmdW5jdGlvbihFdmVudCk+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5ldmVudE1hcF8gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuL0V2ZW50U291cmNlLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5ldmVudFNvdXJjZUxpc3RfID0gW107XG5cbiAgICB0aGlzLnJlZ2lzdGVyU291cmNlcygpO1xuICB9XG5cbiAgaWYgKCBFdmVudFRhcmdldCApIFBvaW50ZXJFdmVudEhhbmRsZXIuX19wcm90b19fID0gRXZlbnRUYXJnZXQ7XG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnRUYXJnZXQgJiYgRXZlbnRUYXJnZXQucHJvdG90eXBlICk7XG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUG9pbnRlckV2ZW50SGFuZGxlcjtcblxuICAvKipcbiAgICogU2V0IHVwIHRoZSBldmVudCBzb3VyY2VzIChtb3VzZSwgdG91Y2ggYW5kIG5hdGl2ZSBwb2ludGVycylcbiAgICogdGhhdCBnZW5lcmF0ZSBwb2ludGVyIGV2ZW50cy5cbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLnJlZ2lzdGVyU291cmNlcyA9IGZ1bmN0aW9uIHJlZ2lzdGVyU291cmNlcyAoKSB7XG4gICAgaWYgKFBPSU5URVIpIHtcbiAgICAgIHRoaXMucmVnaXN0ZXJTb3VyY2UoJ25hdGl2ZScsIG5ldyBOYXRpdmVTb3VyY2UodGhpcykpO1xuICAgIH0gZWxzZSBpZiAoTVNQT0lOVEVSKSB7XG4gICAgICB0aGlzLnJlZ2lzdGVyU291cmNlKCdtcycsIG5ldyBNc1NvdXJjZSh0aGlzKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBtb3VzZVNvdXJjZSA9IG5ldyBNb3VzZVNvdXJjZSh0aGlzKTtcbiAgICAgIHRoaXMucmVnaXN0ZXJTb3VyY2UoJ21vdXNlJywgbW91c2VTb3VyY2UpO1xuXG4gICAgICBpZiAoVE9VQ0gpIHtcbiAgICAgICAgdGhpcy5yZWdpc3RlclNvdXJjZSgndG91Y2gnLCBuZXcgVG91Y2hTb3VyY2UodGhpcywgbW91c2VTb3VyY2UpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZWdpc3RlciBldmVudHMgb24gdGhlIHZpZXdwb3J0IGVsZW1lbnRcbiAgICB0aGlzLnJlZ2lzdGVyXygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgYSBuZXcgZXZlbnQgc291cmNlIHRoYXQgd2lsbCBnZW5lcmF0ZSBwb2ludGVyIGV2ZW50cy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQSBuYW1lIGZvciB0aGUgZXZlbnQgc291cmNlXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9FdmVudFNvdXJjZS5qc1wiKS5kZWZhdWx0fSBzb3VyY2UgVGhlIHNvdXJjZSBldmVudC5cbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLnJlZ2lzdGVyU291cmNlID0gZnVuY3Rpb24gcmVnaXN0ZXJTb3VyY2UgKG5hbWUsIHNvdXJjZSkge1xuICAgIHZhciBzID0gc291cmNlO1xuICAgIHZhciBuZXdFdmVudHMgPSBzLmdldEV2ZW50cygpO1xuXG4gICAgaWYgKG5ld0V2ZW50cykge1xuICAgICAgbmV3RXZlbnRzLmZvckVhY2goZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgaGFuZGxlciA9IHMuZ2V0SGFuZGxlckZvckV2ZW50KGUpO1xuXG4gICAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgICAgdGhpcy5ldmVudE1hcF9bZV0gPSBoYW5kbGVyLmJpbmQocyk7XG4gICAgICAgIH1cbiAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICB0aGlzLmV2ZW50U291cmNlTGlzdF8ucHVzaChzKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB1cCB0aGUgZXZlbnRzIGZvciBhbGwgcmVnaXN0ZXJlZCBldmVudCBzb3VyY2VzLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUucmVnaXN0ZXJfID0gZnVuY3Rpb24gcmVnaXN0ZXJfICgpIHtcbiAgICB2YXIgbCA9IHRoaXMuZXZlbnRTb3VyY2VMaXN0Xy5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBldmVudFNvdXJjZSA9IHRoaXMuZXZlbnRTb3VyY2VMaXN0X1tpXTtcbiAgICAgIHRoaXMuYWRkRXZlbnRzXyhldmVudFNvdXJjZS5nZXRFdmVudHMoKSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIHJlZ2lzdGVyZWQgZXZlbnRzLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUudW5yZWdpc3Rlcl8gPSBmdW5jdGlvbiB1bnJlZ2lzdGVyXyAoKSB7XG4gICAgdmFyIGwgPSB0aGlzLmV2ZW50U291cmNlTGlzdF8ubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgZXZlbnRTb3VyY2UgPSB0aGlzLmV2ZW50U291cmNlTGlzdF9baV07XG4gICAgICB0aGlzLnJlbW92ZUV2ZW50c18oZXZlbnRTb3VyY2UuZ2V0RXZlbnRzKCkpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ2FsbHMgdGhlIHJpZ2h0IGhhbmRsZXIgZm9yIGEgbmV3IGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0V2ZW50fSBpbkV2ZW50IEJyb3dzZXIgZXZlbnQuXG4gICAqL1xuICBQb2ludGVyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5ldmVudEhhbmRsZXJfID0gZnVuY3Rpb24gZXZlbnRIYW5kbGVyXyAoaW5FdmVudCkge1xuICAgIHZhciB0eXBlID0gaW5FdmVudC50eXBlO1xuICAgIHZhciBoYW5kbGVyID0gdGhpcy5ldmVudE1hcF9bdHlwZV07XG4gICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgIGhhbmRsZXIoaW5FdmVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXR1cCBsaXN0ZW5lcnMgZm9yIHRoZSBnaXZlbiBldmVudHMuXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gZXZlbnRzIExpc3Qgb2YgZXZlbnRzLlxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuYWRkRXZlbnRzXyA9IGZ1bmN0aW9uIGFkZEV2ZW50c18gKGV2ZW50cykge1xuICAgIGV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50TmFtZSkge1xuICAgICAgbGlzdGVuKHRoaXMuZWxlbWVudF8sIGV2ZW50TmFtZSwgdGhpcy5ldmVudEhhbmRsZXJfLCB0aGlzKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVbnJlZ2lzdGVyIGxpc3RlbmVycyBmb3IgdGhlIGdpdmVuIGV2ZW50cy5cbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBldmVudHMgTGlzdCBvZiBldmVudHMuXG4gICAqL1xuICBQb2ludGVyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5yZW1vdmVFdmVudHNfID0gZnVuY3Rpb24gcmVtb3ZlRXZlbnRzXyAoZXZlbnRzKSB7XG4gICAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24oZSkge1xuICAgICAgdW5saXN0ZW4odGhpcy5lbGVtZW50XywgZSwgdGhpcy5ldmVudEhhbmRsZXJfLCB0aGlzKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc25hcHNob3Qgb2YgaW5FdmVudCwgd2l0aCB3cml0YWJsZSBwcm9wZXJ0aWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCBCcm93c2VyIGV2ZW50LlxuICAgKiBAcGFyYW0ge0V2ZW50fFRvdWNofSBpbkV2ZW50IEFuIGV2ZW50IHRoYXQgY29udGFpbnNcbiAgICogICAgcHJvcGVydGllcyB0byBjb3B5LlxuICAgKiBAcmV0dXJuIHtPYmplY3R9IEFuIG9iamVjdCBjb250YWluaW5nIHNoYWxsb3cgY29waWVzIG9mXG4gICAqICAgIGBpbkV2ZW50YCdzIHByb3BlcnRpZXMuXG4gICAqL1xuICBQb2ludGVyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5jbG9uZUV2ZW50ID0gZnVuY3Rpb24gY2xvbmVFdmVudCAoZXZlbnQsIGluRXZlbnQpIHtcbiAgICB2YXIgZXZlbnRDb3B5ID0ge307XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gQ0xPTkVfUFJPUFMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgdmFyIHAgPSBDTE9ORV9QUk9QU1tpXVswXTtcbiAgICAgIGV2ZW50Q29weVtwXSA9IGV2ZW50W3BdIHx8IGluRXZlbnRbcF0gfHwgQ0xPTkVfUFJPUFNbaV1bMV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGV2ZW50Q29weTtcbiAgfTtcblxuICAvLyBFVkVOVFNcblxuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBhICdwb2ludGVyZG93bicgZXZlbnQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIFBvaW50ZXIgZXZlbnQgZGF0YS5cbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50LlxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuZG93biA9IGZ1bmN0aW9uIGRvd24gKGRhdGEsIGV2ZW50KSB7XG4gICAgdGhpcy5maXJlRXZlbnQoUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSRE9XTiwgZGF0YSwgZXZlbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBhICdwb2ludGVybW92ZScgZXZlbnQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIFBvaW50ZXIgZXZlbnQgZGF0YS5cbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50LlxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUubW92ZSA9IGZ1bmN0aW9uIG1vdmUgKGRhdGEsIGV2ZW50KSB7XG4gICAgdGhpcy5maXJlRXZlbnQoUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSTU9WRSwgZGF0YSwgZXZlbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBhICdwb2ludGVydXAnIGV2ZW50LlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBQb2ludGVyIGV2ZW50IGRhdGEuXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IFRoZSBldmVudC5cbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLnVwID0gZnVuY3Rpb24gdXAgKGRhdGEsIGV2ZW50KSB7XG4gICAgdGhpcy5maXJlRXZlbnQoUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSVVAsIGRhdGEsIGV2ZW50KTtcbiAgfTtcblxuICAvKipcbiAgICogVHJpZ2dlcnMgYSAncG9pbnRlcmVudGVyJyBldmVudC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgUG9pbnRlciBldmVudCBkYXRhLlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCBUaGUgZXZlbnQuXG4gICAqL1xuICBQb2ludGVyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5lbnRlciA9IGZ1bmN0aW9uIGVudGVyIChkYXRhLCBldmVudCkge1xuICAgIGRhdGEuYnViYmxlcyA9IGZhbHNlO1xuICAgIHRoaXMuZmlyZUV2ZW50KFBvaW50ZXJFdmVudFR5cGUuUE9JTlRFUkVOVEVSLCBkYXRhLCBldmVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIGEgJ3BvaW50ZXJsZWF2ZScgZXZlbnQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIFBvaW50ZXIgZXZlbnQgZGF0YS5cbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50LlxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUubGVhdmUgPSBmdW5jdGlvbiBsZWF2ZSAoZGF0YSwgZXZlbnQpIHtcbiAgICBkYXRhLmJ1YmJsZXMgPSBmYWxzZTtcbiAgICB0aGlzLmZpcmVFdmVudChQb2ludGVyRXZlbnRUeXBlLlBPSU5URVJMRUFWRSwgZGF0YSwgZXZlbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBhICdwb2ludGVyb3ZlcicgZXZlbnQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIFBvaW50ZXIgZXZlbnQgZGF0YS5cbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50LlxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUub3ZlciA9IGZ1bmN0aW9uIG92ZXIgKGRhdGEsIGV2ZW50KSB7XG4gICAgZGF0YS5idWJibGVzID0gdHJ1ZTtcbiAgICB0aGlzLmZpcmVFdmVudChQb2ludGVyRXZlbnRUeXBlLlBPSU5URVJPVkVSLCBkYXRhLCBldmVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIGEgJ3BvaW50ZXJvdXQnIGV2ZW50LlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBQb2ludGVyIGV2ZW50IGRhdGEuXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IFRoZSBldmVudC5cbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLm91dCA9IGZ1bmN0aW9uIG91dCAoZGF0YSwgZXZlbnQpIHtcbiAgICBkYXRhLmJ1YmJsZXMgPSB0cnVlO1xuICAgIHRoaXMuZmlyZUV2ZW50KFBvaW50ZXJFdmVudFR5cGUuUE9JTlRFUk9VVCwgZGF0YSwgZXZlbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBhICdwb2ludGVyY2FuY2VsJyBldmVudC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgUG9pbnRlciBldmVudCBkYXRhLlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCBUaGUgZXZlbnQuXG4gICAqL1xuICBQb2ludGVyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5jYW5jZWwgPSBmdW5jdGlvbiBjYW5jZWwgKGRhdGEsIGV2ZW50KSB7XG4gICAgdGhpcy5maXJlRXZlbnQoUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSQ0FOQ0VMLCBkYXRhLCBldmVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIGEgY29tYmluYXRpb24gb2YgJ3BvaW50ZXJvdXQnIGFuZCAncG9pbnRlcmxlYXZlJyBldmVudHMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIFBvaW50ZXIgZXZlbnQgZGF0YS5cbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50LlxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUubGVhdmVPdXQgPSBmdW5jdGlvbiBsZWF2ZU91dCAoZGF0YSwgZXZlbnQpIHtcbiAgICB0aGlzLm91dChkYXRhLCBldmVudCk7XG4gICAgaWYgKCF0aGlzLmNvbnRhaW5zXyhkYXRhLnRhcmdldCwgZGF0YS5yZWxhdGVkVGFyZ2V0KSkge1xuICAgICAgdGhpcy5sZWF2ZShkYXRhLCBldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBhIGNvbWJpbmF0aW9uIG9mICdwb2ludGVyb3ZlcicgYW5kICdwb2ludGVyZXZlbnRzJyBldmVudHMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIFBvaW50ZXIgZXZlbnQgZGF0YS5cbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50LlxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuZW50ZXJPdmVyID0gZnVuY3Rpb24gZW50ZXJPdmVyIChkYXRhLCBldmVudCkge1xuICAgIHRoaXMub3ZlcihkYXRhLCBldmVudCk7XG4gICAgaWYgKCF0aGlzLmNvbnRhaW5zXyhkYXRhLnRhcmdldCwgZGF0YS5yZWxhdGVkVGFyZ2V0KSkge1xuICAgICAgdGhpcy5lbnRlcihkYXRhLCBldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRhaW5lciBUaGUgY29udGFpbmVyIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gY29udGFpbmVkIFRoZSBjb250YWluZWQgZWxlbWVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoZSBjb250YWluZXIgZWxlbWVudFxuICAgKiAgIGNvbnRhaW5zIHRoZSBvdGhlciBlbGVtZW50LlxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuY29udGFpbnNfID0gZnVuY3Rpb24gY29udGFpbnNfIChjb250YWluZXIsIGNvbnRhaW5lZCkge1xuICAgIGlmICghY29udGFpbmVyIHx8ICFjb250YWluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRhaW5lci5jb250YWlucyhjb250YWluZWQpO1xuICB9O1xuXG4gIC8vIEVWRU5UIENSRUFUSU9OIEFORCBUUkFDS0lOR1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBFdmVudCBvZiB0eXBlIGBpblR5cGVgLCBiYXNlZCBvbiB0aGUgaW5mb3JtYXRpb24gaW5cbiAgICogYGRhdGFgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaW5UeXBlIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdHlwZSBvZiBldmVudCB0byBjcmVhdGUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIFBvaW50ZXIgZXZlbnQgZGF0YS5cbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50LlxuICAgKiBAcmV0dXJuIHtQb2ludGVyRXZlbnR9IEEgUG9pbnRlckV2ZW50IG9mIHR5cGUgYGluVHlwZWAuXG4gICAqL1xuICBQb2ludGVyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5tYWtlRXZlbnQgPSBmdW5jdGlvbiBtYWtlRXZlbnQgKGluVHlwZSwgZGF0YSwgZXZlbnQpIHtcbiAgICByZXR1cm4gbmV3IFBvaW50ZXJFdmVudChpblR5cGUsIGV2ZW50LCBkYXRhKTtcbiAgfTtcblxuICAvKipcbiAgICogTWFrZSBhbmQgZGlzcGF0Y2ggYW4gZXZlbnQgaW4gb25lIGNhbGwuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpblR5cGUgQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0eXBlIG9mIGV2ZW50LlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBQb2ludGVyIGV2ZW50IGRhdGEuXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IFRoZSBldmVudC5cbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmZpcmVFdmVudCA9IGZ1bmN0aW9uIGZpcmVFdmVudCAoaW5UeXBlLCBkYXRhLCBldmVudCkge1xuICAgIHZhciBlID0gdGhpcy5tYWtlRXZlbnQoaW5UeXBlLCBkYXRhLCBldmVudCk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgcG9pbnRlciBldmVudCBmcm9tIGEgbmF0aXZlIHBvaW50ZXIgZXZlbnRcbiAgICogYW5kIGRpc3BhdGNoZXMgdGhpcyBldmVudC5cbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgQSBwbGF0Zm9ybSBldmVudCB3aXRoIGEgdGFyZ2V0LlxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuZmlyZU5hdGl2ZUV2ZW50ID0gZnVuY3Rpb24gZmlyZU5hdGl2ZUV2ZW50IChldmVudCkge1xuICAgIHZhciBlID0gdGhpcy5tYWtlRXZlbnQoZXZlbnQudHlwZSwgZXZlbnQsIGV2ZW50KTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdyYXAgYSBuYXRpdmUgbW91c2UgZXZlbnQgaW50byBhIHBvaW50ZXIgZXZlbnQuXG4gICAqIFRoaXMgcHJveHkgbWV0aG9kIGlzIHJlcXVpcmVkIGZvciB0aGUgbGVnYWN5IElFIHN1cHBvcnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGUgVGhlIHBvaW50ZXIgZXZlbnQgdHlwZS5cbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50LlxuICAgKiBAcmV0dXJuIHtQb2ludGVyRXZlbnR9IFRoZSB3cmFwcGVkIGV2ZW50LlxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUud3JhcE1vdXNlRXZlbnQgPSBmdW5jdGlvbiB3cmFwTW91c2VFdmVudCAoZXZlbnRUeXBlLCBldmVudCkge1xuICAgIHZhciBwb2ludGVyRXZlbnQgPSB0aGlzLm1ha2VFdmVudChcbiAgICAgIGV2ZW50VHlwZSwgcHJlcGFyZU1vdXNlRXZlbnQoZXZlbnQsIHRoaXMpLCBldmVudCk7XG4gICAgcmV0dXJuIHBvaW50ZXJFdmVudDtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uIGRpc3Bvc2VJbnRlcm5hbCAoKSB7XG4gICAgdGhpcy51bnJlZ2lzdGVyXygpO1xuICAgIEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgfTtcblxuICByZXR1cm4gUG9pbnRlckV2ZW50SGFuZGxlcjtcbn0oRXZlbnRUYXJnZXQpKTtcblxuZXhwb3J0IGRlZmF1bHQgUG9pbnRlckV2ZW50SGFuZGxlcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9pbnRlckV2ZW50SGFuZGxlci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwQnJvd3NlckV2ZW50SGFuZGxlclxuICovXG5pbXBvcnQge0RFVklDRV9QSVhFTF9SQVRJT30gZnJvbSAnLi9oYXMuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbmltcG9ydCBNYXBCcm93c2VyUG9pbnRlckV2ZW50IGZyb20gJy4vTWFwQnJvd3NlclBvaW50ZXJFdmVudC5qcyc7XG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW5CeUtleX0gZnJvbSAnLi9ldmVudHMuanMnO1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgUG9pbnRlckV2ZW50VHlwZSBmcm9tICcuL3BvaW50ZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBQb2ludGVyRXZlbnRIYW5kbGVyIGZyb20gJy4vcG9pbnRlci9Qb2ludGVyRXZlbnRIYW5kbGVyLmpzJztcblxudmFyIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudFRhcmdldCkge1xuICBmdW5jdGlvbiBNYXBCcm93c2VyRXZlbnRIYW5kbGVyKG1hcCwgbW92ZVRvbGVyYW5jZSkge1xuXG4gICAgRXZlbnRUYXJnZXQuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgdGhlIGVsZW1lbnQgdGhhdCB3ZSB3aWxsIGxpc3RlbiB0byB0aGUgcmVhbCBldmVudHMgb24uXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm1hcF8gPSBtYXA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7YW55fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5jbGlja1RpbWVvdXRJZF87XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZHJhZ2dpbmdfID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7IUFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5tb3ZlVG9sZXJhbmNlXyA9IG1vdmVUb2xlcmFuY2UgP1xuICAgICAgbW92ZVRvbGVyYW5jZSAqIERFVklDRV9QSVhFTF9SQVRJTyA6IERFVklDRV9QSVhFTF9SQVRJTztcblxuICAgIC8qKlxuICAgICAqIFRoZSBtb3N0IHJlY2VudCBcImRvd25cIiB0eXBlIGV2ZW50IChvciBudWxsIGlmIG5vbmUgaGF2ZSBvY2N1cnJlZCkuXG4gICAgICogU2V0IG9uIHBvaW50ZXJkb3duLlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3BvaW50ZXIvUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmRvd25fID0gbnVsbDtcblxuICAgIHZhciBlbGVtZW50ID0gdGhpcy5tYXBfLmdldFZpZXdwb3J0KCk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5hY3RpdmVQb2ludGVyc18gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFPYmplY3Q8bnVtYmVyLCBib29sZWFuPn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMudHJhY2tlZFRvdWNoZXNfID0ge307XG5cbiAgICAvKipcbiAgICAgKiBFdmVudCBoYW5kbGVyIHdoaWNoIGdlbmVyYXRlcyBwb2ludGVyIGV2ZW50cyBmb3JcbiAgICAgKiB0aGUgdmlld3BvcnQgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtQb2ludGVyRXZlbnRIYW5kbGVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5wb2ludGVyRXZlbnRIYW5kbGVyXyA9IG5ldyBQb2ludGVyRXZlbnRIYW5kbGVyKGVsZW1lbnQpO1xuXG4gICAgLyoqXG4gICAgICogRXZlbnQgaGFuZGxlciB3aGljaCBnZW5lcmF0ZXMgcG9pbnRlciBldmVudHMgZm9yXG4gICAgICogdGhlIGRvY3VtZW50ICh1c2VkIHdoZW4gZHJhZ2dpbmcpLlxuICAgICAqXG4gICAgICogQHR5cGUge1BvaW50ZXJFdmVudEhhbmRsZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnBvaW50ZXJkb3duTGlzdGVuZXJLZXlfID0gbGlzdGVuKHRoaXMucG9pbnRlckV2ZW50SGFuZGxlcl8sXG4gICAgICBQb2ludGVyRXZlbnRUeXBlLlBPSU5URVJET1dOLFxuICAgICAgdGhpcy5oYW5kbGVQb2ludGVyRG93bl8sIHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnJlbGF5ZWRMaXN0ZW5lcktleV8gPSBsaXN0ZW4odGhpcy5wb2ludGVyRXZlbnRIYW5kbGVyXyxcbiAgICAgIFBvaW50ZXJFdmVudFR5cGUuUE9JTlRFUk1PVkUsXG4gICAgICB0aGlzLnJlbGF5RXZlbnRfLCB0aGlzKTtcblxuICB9XG5cbiAgaWYgKCBFdmVudFRhcmdldCApIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIuX19wcm90b19fID0gRXZlbnRUYXJnZXQ7XG4gIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnRUYXJnZXQgJiYgRXZlbnRUYXJnZXQucHJvdG90eXBlICk7XG4gIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTWFwQnJvd3NlckV2ZW50SGFuZGxlcjtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BvaW50ZXIvUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuZW11bGF0ZUNsaWNrXyA9IGZ1bmN0aW9uIGVtdWxhdGVDbGlja18gKHBvaW50ZXJFdmVudCkge1xuICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyUG9pbnRlckV2ZW50KFxuICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5DTElDSywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgaWYgKHRoaXMuY2xpY2tUaW1lb3V0SWRfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIGRvdWJsZS1jbGlja1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2xpY2tUaW1lb3V0SWRfKTtcbiAgICAgIHRoaXMuY2xpY2tUaW1lb3V0SWRfID0gdW5kZWZpbmVkO1xuICAgICAgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlclBvaW50ZXJFdmVudChcbiAgICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5EQkxDTElDSywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY2xpY2tcbiAgICAgIHRoaXMuY2xpY2tUaW1lb3V0SWRfID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5jbGlja1RpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyUG9pbnRlckV2ZW50KFxuICAgICAgICAgIE1hcEJyb3dzZXJFdmVudFR5cGUuU0lOR0xFQ0xJQ0ssIHRoaXMubWFwXywgcG9pbnRlckV2ZW50KTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICAgIH0uYmluZCh0aGlzKSwgMjUwKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEtlZXBzIHRyYWNrIG9uIGhvdyBtYW55IHBvaW50ZXJzIGFyZSBjdXJyZW50bHkgYWN0aXZlLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcG9pbnRlci9Qb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICogZXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS51cGRhdGVBY3RpdmVQb2ludGVyc18gPSBmdW5jdGlvbiB1cGRhdGVBY3RpdmVQb2ludGVyc18gKHBvaW50ZXJFdmVudCkge1xuICAgIHZhciBldmVudCA9IHBvaW50ZXJFdmVudDtcblxuICAgIGlmIChldmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQIHx8XG4gICAgICAgIGV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSQ0FOQ0VMKSB7XG4gICAgICBkZWxldGUgdGhpcy50cmFja2VkVG91Y2hlc19bZXZlbnQucG9pbnRlcklkXTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRE9XTikge1xuICAgICAgdGhpcy50cmFja2VkVG91Y2hlc19bZXZlbnQucG9pbnRlcklkXSA9IHRydWU7XG4gICAgfVxuICAgIHRoaXMuYWN0aXZlUG9pbnRlcnNfID0gT2JqZWN0LmtleXModGhpcy50cmFja2VkVG91Y2hlc18pLmxlbmd0aDtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BvaW50ZXIvUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaGFuZGxlUG9pbnRlclVwXyA9IGZ1bmN0aW9uIGhhbmRsZVBvaW50ZXJVcF8gKHBvaW50ZXJFdmVudCkge1xuICAgIHRoaXMudXBkYXRlQWN0aXZlUG9pbnRlcnNfKHBvaW50ZXJFdmVudCk7XG4gICAgdmFyIG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJQb2ludGVyRXZlbnQoXG4gICAgICBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCwgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG5cbiAgICAvLyBXZSBlbXVsYXRlIGNsaWNrIGV2ZW50cyBvbiBsZWZ0IG1vdXNlIGJ1dHRvbiBjbGljaywgdG91Y2ggY29udGFjdCwgYW5kIHBlblxuICAgIC8vIGNvbnRhY3QuIGlzTW91c2VBY3Rpb25CdXR0b24gcmV0dXJucyB0cnVlIGluIHRoZXNlIGNhc2VzIChldnQuYnV0dG9uIGlzIHNldFxuICAgIC8vIHRvIDApLlxuICAgIC8vIFNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9wb2ludGVyZXZlbnRzLyNidXR0b24tc3RhdGVzXG4gICAgLy8gV2Ugb25seSBmaXJlIGNsaWNrLCBzaW5nbGVjbGljaywgYW5kIGRvdWJsZWNsaWNrIGlmIG5vYm9keSBoYXMgY2FsbGVkXG4gICAgLy8gZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkgb3IgZXZlbnQucHJldmVudERlZmF1bHQoKS5cbiAgICBpZiAoIW5ld0V2ZW50LnByb3BhZ2F0aW9uU3RvcHBlZCAmJiAhdGhpcy5kcmFnZ2luZ18gJiYgdGhpcy5pc01vdXNlQWN0aW9uQnV0dG9uXyhwb2ludGVyRXZlbnQpKSB7XG4gICAgICB0aGlzLmVtdWxhdGVDbGlja18odGhpcy5kb3duXyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYWN0aXZlUG9pbnRlcnNfID09PSAwKSB7XG4gICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLmxlbmd0aCA9IDA7XG4gICAgICB0aGlzLmRyYWdnaW5nXyA9IGZhbHNlO1xuICAgICAgdGhpcy5kb3duXyA9IG51bGw7XG4gICAgICB0aGlzLmRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl8uZGlzcG9zZSgpO1xuICAgICAgdGhpcy5kb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wb2ludGVyL1BvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgKiBldmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGxlZnQgbW91c2UgYnV0dG9uIHdhcyBwcmVzc2VkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaXNNb3VzZUFjdGlvbkJ1dHRvbl8gPSBmdW5jdGlvbiBpc01vdXNlQWN0aW9uQnV0dG9uXyAocG9pbnRlckV2ZW50KSB7XG4gICAgcmV0dXJuIHBvaW50ZXJFdmVudC5idXR0b24gPT09IDA7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wb2ludGVyL1BvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgKiBldmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmhhbmRsZVBvaW50ZXJEb3duXyA9IGZ1bmN0aW9uIGhhbmRsZVBvaW50ZXJEb3duXyAocG9pbnRlckV2ZW50KSB7XG4gICAgdGhpcy51cGRhdGVBY3RpdmVQb2ludGVyc18ocG9pbnRlckV2ZW50KTtcbiAgICB2YXIgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlclBvaW50ZXJFdmVudChcbiAgICAgIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04sIHRoaXMubWFwXywgcG9pbnRlckV2ZW50KTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuXG4gICAgdGhpcy5kb3duXyA9IHBvaW50ZXJFdmVudDtcblxuICAgIGlmICh0aGlzLmRyYWdMaXN0ZW5lcktleXNfLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLyogU2V0IHVwIGEgcG9pbnRlciBldmVudCBoYW5kbGVyIG9uIHRoZSBgZG9jdW1lbnRgLFxuICAgICAgICogd2hpY2ggaXMgcmVxdWlyZWQgd2hlbiB0aGUgcG9pbnRlciBpcyBtb3ZlZCBvdXRzaWRlXG4gICAgICAgKiB0aGUgdmlld3BvcnQgd2hlbiBkcmFnZ2luZy5cbiAgICAgICAqL1xuICAgICAgdGhpcy5kb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfID1cbiAgICAgICAgICBuZXcgUG9pbnRlckV2ZW50SGFuZGxlcihkb2N1bWVudCk7XG5cbiAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ucHVzaChcbiAgICAgICAgbGlzdGVuKHRoaXMuZG9jdW1lbnRQb2ludGVyRXZlbnRIYW5kbGVyXyxcbiAgICAgICAgICBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJNT1ZFLFxuICAgICAgICAgIHRoaXMuaGFuZGxlUG9pbnRlck1vdmVfLCB0aGlzKSxcbiAgICAgICAgbGlzdGVuKHRoaXMuZG9jdW1lbnRQb2ludGVyRXZlbnRIYW5kbGVyXyxcbiAgICAgICAgICBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCxcbiAgICAgICAgICB0aGlzLmhhbmRsZVBvaW50ZXJVcF8sIHRoaXMpLFxuICAgICAgICAvKiBOb3RlIHRoYXQgdGhlIGxpc3RlbmVyIGZvciBgcG9pbnRlcmNhbmNlbCBpcyBzZXQgdXAgb25cbiAgICAgICAgICogYHBvaW50ZXJFdmVudEhhbmRsZXJfYCBhbmQgbm90IGBkb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfYCBsaWtlXG4gICAgICAgICAqIHRoZSBgcG9pbnRlcnVwYCBhbmQgYHBvaW50ZXJtb3ZlYCBsaXN0ZW5lcnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSByZWFzb24gZm9yIHRoaXMgaXMgdGhlIGZvbGxvd2luZzogYFRvdWNoU291cmNlLnZhY3V1bVRvdWNoZXNfKClgXG4gICAgICAgICAqIGlzc3VlcyBgcG9pbnRlcmNhbmNlbGAgZXZlbnRzLCB3aGVuIHRoZXJlIHdhcyBubyBgdG91Y2hlbmRgIGZvciBhXG4gICAgICAgICAqIGB0b3VjaHN0YXJ0YC4gTm93LCBsZXQncyBzYXkgYSBmaXJzdCBgdG91Y2hzdGFydGAgaXMgcmVnaXN0ZXJlZCBvblxuICAgICAgICAgKiBgcG9pbnRlckV2ZW50SGFuZGxlcl9gLiBUaGUgYGRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl9gIGlzIHNldCB1cC5cbiAgICAgICAgICogQnV0IGBkb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfYCBkb2Vzbid0IGtub3cgYWJvdXQgdGhlIGZpcnN0XG4gICAgICAgICAqIGB0b3VjaHN0YXJ0YC4gSWYgdGhlcmUgaXMgbm8gYHRvdWNoZW5kYCBmb3IgdGhlIGB0b3VjaHN0YXJ0YCwgd2UgY2FuXG4gICAgICAgICAqIG9ubHkgcmVjZWl2ZSBhIGB0b3VjaGNhbmNlbGAgZnJvbSBgcG9pbnRlckV2ZW50SGFuZGxlcl9gLCBiZWNhdXNlIGl0IGlzXG4gICAgICAgICAqIG9ubHkgcmVnaXN0ZXJlZCB0aGVyZS5cbiAgICAgICAgICovXG4gICAgICAgIGxpc3Rlbih0aGlzLnBvaW50ZXJFdmVudEhhbmRsZXJfLFxuICAgICAgICAgIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkNBTkNFTCxcbiAgICAgICAgICB0aGlzLmhhbmRsZVBvaW50ZXJVcF8sIHRoaXMpXG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BvaW50ZXIvUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaGFuZGxlUG9pbnRlck1vdmVfID0gZnVuY3Rpb24gaGFuZGxlUG9pbnRlck1vdmVfIChwb2ludGVyRXZlbnQpIHtcbiAgICAvLyBCZXR3ZWVuIHBvaW50ZXJkb3duIGFuZCBwb2ludGVydXAsIHBvaW50ZXJtb3ZlIGV2ZW50cyBhcmUgdHJpZ2dlcmVkLlxuICAgIC8vIFRvIGF2b2lkIGEgJ2ZhbHNlJyB0b3VjaG1vdmUgZXZlbnQgdG8gYmUgZGlzcGF0Y2hlZCwgd2UgdGVzdCBpZiB0aGUgcG9pbnRlclxuICAgIC8vIG1vdmVkIGEgc2lnbmlmaWNhbnQgZGlzdGFuY2UuXG4gICAgaWYgKHRoaXMuaXNNb3ZpbmdfKHBvaW50ZXJFdmVudCkpIHtcbiAgICAgIHRoaXMuZHJhZ2dpbmdfID0gdHJ1ZTtcbiAgICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyUG9pbnRlckV2ZW50KFxuICAgICAgICBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJEUkFHLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCxcbiAgICAgICAgdGhpcy5kcmFnZ2luZ18pO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICB9XG5cbiAgICAvLyBTb21lIG5hdGl2ZSBhbmRyb2lkIGJyb3dzZXIgdHJpZ2dlcnMgbW91c2Vtb3ZlIGV2ZW50cyBkdXJpbmcgc21hbGwgcGVyaW9kXG4gICAgLy8gb2YgdGltZS4gU2VlOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2FuZHJvaWQvaXNzdWVzL2RldGFpbD9pZD01NDkxIG9yXG4gICAgLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9hbmRyb2lkL2lzc3Vlcy9kZXRhaWw/aWQ9MTk4MjdcbiAgICAvLyBleDogR2FsYXh5IFRhYiBQMzExMCArIEFuZHJvaWQgNC4xLjFcbiAgICBwb2ludGVyRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfTtcblxuICAvKipcbiAgICogV3JhcCBhbmQgcmVsYXkgYSBwb2ludGVyIGV2ZW50LiAgTm90ZSB0aGF0IHRoaXMgcmVxdWlyZXMgdGhhdCB0aGUgdHlwZVxuICAgKiBzdHJpbmcgZm9yIHRoZSBNYXBCcm93c2VyUG9pbnRlckV2ZW50IG1hdGNoZXMgdGhlIFBvaW50ZXJFdmVudCB0eXBlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcG9pbnRlci9Qb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICogZXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5yZWxheUV2ZW50XyA9IGZ1bmN0aW9uIHJlbGF5RXZlbnRfIChwb2ludGVyRXZlbnQpIHtcbiAgICB2YXIgZHJhZ2dpbmcgPSAhISh0aGlzLmRvd25fICYmIHRoaXMuaXNNb3ZpbmdfKHBvaW50ZXJFdmVudCkpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgTWFwQnJvd3NlclBvaW50ZXJFdmVudChcbiAgICAgIHBvaW50ZXJFdmVudC50eXBlLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCwgZHJhZ2dpbmcpKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BvaW50ZXIvUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBtb3ZpbmcuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5pc01vdmluZ18gPSBmdW5jdGlvbiBpc01vdmluZ18gKHBvaW50ZXJFdmVudCkge1xuICAgIHJldHVybiB0aGlzLmRyYWdnaW5nXyB8fFxuICAgICAgICBNYXRoLmFicyhwb2ludGVyRXZlbnQuY2xpZW50WCAtIHRoaXMuZG93bl8uY2xpZW50WCkgPiB0aGlzLm1vdmVUb2xlcmFuY2VfIHx8XG4gICAgICAgIE1hdGguYWJzKHBvaW50ZXJFdmVudC5jbGllbnRZIC0gdGhpcy5kb3duXy5jbGllbnRZKSA+IHRoaXMubW92ZVRvbGVyYW5jZV87XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiBkaXNwb3NlSW50ZXJuYWwgKCkge1xuICAgIGlmICh0aGlzLnJlbGF5ZWRMaXN0ZW5lcktleV8pIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5yZWxheWVkTGlzdGVuZXJLZXlfKTtcbiAgICAgIHRoaXMucmVsYXllZExpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLnBvaW50ZXJkb3duTGlzdGVuZXJLZXlfKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8pO1xuICAgICAgdGhpcy5wb2ludGVyZG93bkxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcblxuICAgIGlmICh0aGlzLmRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl8pIHtcbiAgICAgIHRoaXMuZG9jdW1lbnRQb2ludGVyRXZlbnRIYW5kbGVyXy5kaXNwb3NlKCk7XG4gICAgICB0aGlzLmRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl8gPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5wb2ludGVyRXZlbnRIYW5kbGVyXykge1xuICAgICAgdGhpcy5wb2ludGVyRXZlbnRIYW5kbGVyXy5kaXNwb3NlKCk7XG4gICAgICB0aGlzLnBvaW50ZXJFdmVudEhhbmRsZXJfID0gbnVsbDtcbiAgICB9XG4gICAgRXZlbnRUYXJnZXQucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICB9O1xuXG4gIHJldHVybiBNYXBCcm93c2VyRXZlbnRIYW5kbGVyO1xufShFdmVudFRhcmdldCkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IE1hcEJyb3dzZXJFdmVudEhhbmRsZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcEJyb3dzZXJFdmVudEhhbmRsZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcEV2ZW50VHlwZVxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgYSBtYXAgZnJhbWUgaXMgcmVuZGVyZWQuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvTWFwRXZlbnR+TWFwRXZlbnQjcG9zdHJlbmRlclxuICAgKiBAYXBpXG4gICAqL1xuICBQT1NUUkVOREVSOiAncG9zdHJlbmRlcicsXG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIHRoZSBtYXAgc3RhcnRzIG1vdmluZy5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBFdmVudH5NYXBFdmVudCNtb3Zlc3RhcnRcbiAgICogQGFwaVxuICAgKi9cbiAgTU9WRVNUQVJUOiAnbW92ZXN0YXJ0JyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBtYXAgaXMgbW92ZWQuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvTWFwRXZlbnR+TWFwRXZlbnQjbW92ZWVuZFxuICAgKiBAYXBpXG4gICAqL1xuICBNT1ZFRU5EOiAnbW92ZWVuZCdcblxufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwRXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBQcm9wZXJ0eVxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBMQVlFUkdST1VQOiAnbGF5ZXJncm91cCcsXG4gIFNJWkU6ICdzaXplJyxcbiAgVEFSR0VUOiAndGFyZ2V0JyxcbiAgVklFVzogJ3ZpZXcnXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBQcm9wZXJ0eS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL0V2ZW50VHlwZVxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAvKipcbiAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcG9zdGNvbXBvc2VcbiAgICogQGFwaVxuICAgKi9cbiAgUE9TVENPTVBPU0U6ICdwb3N0Y29tcG9zZScsXG4gIC8qKlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudCNwcmVjb21wb3NlXG4gICAqIEBhcGlcbiAgICovXG4gIFBSRUNPTVBPU0U6ICdwcmVjb21wb3NlJyxcbiAgLyoqXG4gICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3JlbmRlclxuICAgKiBAYXBpXG4gICAqL1xuICBSRU5ERVI6ICdyZW5kZXInLFxuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gcmVuZGVyaW5nIGlzIGNvbXBsZXRlLCBpLmUuIGFsbCBzb3VyY2VzIGFuZCB0aWxlcyBoYXZlXG4gICAqIGZpbmlzaGVkIGxvYWRpbmcgZm9yIHRoZSBjdXJyZW50IHZpZXdwb3J0LCBhbmQgYWxsIHRpbGVzIGFyZSBmYWRlZCBpbi5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcmVuZGVyY29tcGxldGVcbiAgICogQGFwaVxuICAgKi9cbiAgUkVOREVSQ09NUExFVEU6ICdyZW5kZXJjb21wbGV0ZSdcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVGlsZVN0YXRlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIElETEU6IDAsXG4gIExPQURJTkc6IDEsXG4gIExPQURFRDogMixcbiAgLyoqXG4gICAqIEluZGljYXRlcyB0aGF0IHRpbGUgbG9hZGluZyBmYWlsZWRcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIEVSUk9SOiAzLFxuICBFTVBUWTogNCxcbiAgQUJPUlQ6IDVcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVTdGF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvYXNzZXJ0c1xuICovXG5pbXBvcnQgQXNzZXJ0aW9uRXJyb3IgZnJvbSAnLi9Bc3NlcnRpb25FcnJvci5qcyc7XG5cbi8qKlxuICogQHBhcmFtIHsqfSBhc3NlcnRpb24gQXNzZXJ0aW9uIHdlIGV4cGVjdGVkIHRvIGJlIHRydXRoeS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlcnJvckNvZGUgRXJyb3IgY29kZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydChhc3NlcnRpb24sIGVycm9yQ29kZSkge1xuICBpZiAoIWFzc2VydGlvbikge1xuICAgIHRocm93IG5ldyBBc3NlcnRpb25FcnJvcihlcnJvckNvZGUpO1xuICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzc2VydHMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0cnVjdHMvUHJpb3JpdHlRdWV1ZVxuICovXG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQge2NsZWFyfSBmcm9tICcuLi9vYmouanMnO1xuXG5cbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBEUk9QID0gSW5maW5pdHk7XG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQcmlvcml0eSBxdWV1ZS5cbiAqXG4gKiBUaGUgaW1wbGVtZW50YXRpb24gaXMgaW5zcGlyZWQgZnJvbSB0aGUgQ2xvc3VyZSBMaWJyYXJ5J3MgSGVhcCBjbGFzcyBhbmRcbiAqIFB5dGhvbidzIGhlYXBxIG1vZHVsZS5cbiAqXG4gKiBTZWUgaHR0cDovL2Nsb3N1cmUtbGlicmFyeS5nb29nbGVjb2RlLmNvbS9zdm4vZG9jcy9jbG9zdXJlX2dvb2dfc3RydWN0c19oZWFwLmpzLnNvdXJjZS5odG1sXG4gKiBhbmQgaHR0cDovL2hnLnB5dGhvbi5vcmcvY3B5dGhvbi9maWxlLzIuNy9MaWIvaGVhcHEucHkuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqL1xudmFyIFByaW9yaXR5UXVldWUgPSBmdW5jdGlvbiBQcmlvcml0eVF1ZXVlKHByaW9yaXR5RnVuY3Rpb24sIGtleUZ1bmN0aW9uKSB7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtmdW5jdGlvbihUKTogbnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5wcmlvcml0eUZ1bmN0aW9uXyA9IHByaW9yaXR5RnVuY3Rpb247XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtmdW5jdGlvbihUKTogc3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5rZXlGdW5jdGlvbl8gPSBrZXlGdW5jdGlvbjtcblxuICAvKipcbiAgICogQHR5cGUge0FycmF5PFQ+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5lbGVtZW50c18gPSBbXTtcblxuICAvKipcbiAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLnByaW9yaXRpZXNfID0gW107XG5cbiAgLyoqXG4gICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLnF1ZXVlZEVsZW1lbnRzXyA9IHt9O1xuXG59O1xuXG4vKipcbiAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICovXG5Qcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyJDEgKCkge1xuICB0aGlzLmVsZW1lbnRzXy5sZW5ndGggPSAwO1xuICB0aGlzLnByaW9yaXRpZXNfLmxlbmd0aCA9IDA7XG4gIGNsZWFyKHRoaXMucXVldWVkRWxlbWVudHNfKTtcbn07XG5cblxuLyoqXG4gKiBSZW1vdmUgYW5kIHJldHVybiB0aGUgaGlnaGVzdC1wcmlvcml0eSBlbGVtZW50LiBPKGxvZyBOKS5cbiAqIEByZXR1cm4ge1R9IEVsZW1lbnQuXG4gKi9cblByaW9yaXR5UXVldWUucHJvdG90eXBlLmRlcXVldWUgPSBmdW5jdGlvbiBkZXF1ZXVlICgpIHtcbiAgdmFyIGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gIHZhciBwcmlvcml0aWVzID0gdGhpcy5wcmlvcml0aWVzXztcbiAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1swXTtcbiAgaWYgKGVsZW1lbnRzLmxlbmd0aCA9PSAxKSB7XG4gICAgZWxlbWVudHMubGVuZ3RoID0gMDtcbiAgICBwcmlvcml0aWVzLmxlbmd0aCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgZWxlbWVudHNbMF0gPSBlbGVtZW50cy5wb3AoKTtcbiAgICBwcmlvcml0aWVzWzBdID0gcHJpb3JpdGllcy5wb3AoKTtcbiAgICB0aGlzLnNpZnRVcF8oMCk7XG4gIH1cbiAgdmFyIGVsZW1lbnRLZXkgPSB0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KTtcbiAgZGVsZXRlIHRoaXMucXVldWVkRWxlbWVudHNfW2VsZW1lbnRLZXldO1xuICByZXR1cm4gZWxlbWVudDtcbn07XG5cblxuLyoqXG4gKiBFbnF1ZXVlIGFuIGVsZW1lbnQuIE8obG9nIE4pLlxuICogQHBhcmFtIHtUfSBlbGVtZW50IEVsZW1lbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZWxlbWVudCB3YXMgYWRkZWQgdG8gdGhlIHF1ZXVlLlxuICovXG5Qcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlID0gZnVuY3Rpb24gZW5xdWV1ZSAoZWxlbWVudCkge1xuICBhc3NlcnQoISh0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KSBpbiB0aGlzLnF1ZXVlZEVsZW1lbnRzXyksXG4gICAgMzEpOyAvLyBUcmllZCB0byBlbnF1ZXVlIGFuIGBlbGVtZW50YCB0aGF0IHdhcyBhbHJlYWR5IGFkZGVkIHRvIHRoZSBxdWV1ZVxuICB2YXIgcHJpb3JpdHkgPSB0aGlzLnByaW9yaXR5RnVuY3Rpb25fKGVsZW1lbnQpO1xuICBpZiAocHJpb3JpdHkgIT0gRFJPUCkge1xuICAgIHRoaXMuZWxlbWVudHNfLnB1c2goZWxlbWVudCk7XG4gICAgdGhpcy5wcmlvcml0aWVzXy5wdXNoKHByaW9yaXR5KTtcbiAgICB0aGlzLnF1ZXVlZEVsZW1lbnRzX1t0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KV0gPSB0cnVlO1xuICAgIHRoaXMuc2lmdERvd25fKDAsIHRoaXMuZWxlbWVudHNfLmxlbmd0aCAtIDEpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cblxuLyoqXG4gKiBAcmV0dXJuIHtudW1iZXJ9IENvdW50LlxuICovXG5Qcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uIGdldENvdW50ICgpIHtcbiAgcmV0dXJuIHRoaXMuZWxlbWVudHNfLmxlbmd0aDtcbn07XG5cblxuLyoqXG4gKiBHZXRzIHRoZSBpbmRleCBvZiB0aGUgbGVmdCBjaGlsZCBvZiB0aGUgbm9kZSBhdCB0aGUgZ2l2ZW4gaW5kZXguXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIGdldCB0aGUgbGVmdCBjaGlsZCBmb3IuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgbGVmdCBjaGlsZC5cbiAqIEBwcml2YXRlXG4gKi9cblByaW9yaXR5UXVldWUucHJvdG90eXBlLmdldExlZnRDaGlsZEluZGV4XyA9IGZ1bmN0aW9uIGdldExlZnRDaGlsZEluZGV4XyAoaW5kZXgpIHtcbiAgcmV0dXJuIGluZGV4ICogMiArIDE7XG59O1xuXG5cbi8qKlxuICogR2V0cyB0aGUgaW5kZXggb2YgdGhlIHJpZ2h0IGNoaWxkIG9mIHRoZSBub2RlIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gZ2V0IHRoZSByaWdodCBjaGlsZCBmb3IuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgcmlnaHQgY2hpbGQuXG4gKiBAcHJpdmF0ZVxuICovXG5Qcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5nZXRSaWdodENoaWxkSW5kZXhfID0gZnVuY3Rpb24gZ2V0UmlnaHRDaGlsZEluZGV4XyAoaW5kZXgpIHtcbiAgcmV0dXJuIGluZGV4ICogMiArIDI7XG59O1xuXG5cbi8qKlxuICogR2V0cyB0aGUgaW5kZXggb2YgdGhlIHBhcmVudCBvZiB0aGUgbm9kZSBhdCB0aGUgZ2l2ZW4gaW5kZXguXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIGdldCB0aGUgcGFyZW50IGZvci5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBwYXJlbnQuXG4gKiBAcHJpdmF0ZVxuICovXG5Qcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5nZXRQYXJlbnRJbmRleF8gPSBmdW5jdGlvbiBnZXRQYXJlbnRJbmRleF8gKGluZGV4KSB7XG4gIHJldHVybiAoaW5kZXggLSAxKSA+PiAxO1xufTtcblxuXG4vKipcbiAqIE1ha2UgdGhpcyBhIGhlYXAuIE8oTikuXG4gKiBAcHJpdmF0ZVxuICovXG5Qcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5oZWFwaWZ5XyA9IGZ1bmN0aW9uIGhlYXBpZnlfICgpIHtcbiAgdmFyIGk7XG4gIGZvciAoaSA9ICh0aGlzLmVsZW1lbnRzXy5sZW5ndGggPj4gMSkgLSAxOyBpID49IDA7IGktLSkge1xuICAgIHRoaXMuc2lmdFVwXyhpKTtcbiAgfVxufTtcblxuXG4vKipcbiAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGVtcHR5LlxuICovXG5Qcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gaXNFbXB0eSAoKSB7XG4gIHJldHVybiB0aGlzLmVsZW1lbnRzXy5sZW5ndGggPT09IDA7XG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBJcyBrZXkgcXVldWVkLlxuICovXG5Qcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5pc0tleVF1ZXVlZCA9IGZ1bmN0aW9uIGlzS2V5UXVldWVkIChrZXkpIHtcbiAgcmV0dXJuIGtleSBpbiB0aGlzLnF1ZXVlZEVsZW1lbnRzXztcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0ge1R9IGVsZW1lbnQgRWxlbWVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IElzIHF1ZXVlZC5cbiAqL1xuUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaXNRdWV1ZWQgPSBmdW5jdGlvbiBpc1F1ZXVlZCAoZWxlbWVudCkge1xuICByZXR1cm4gdGhpcy5pc0tleVF1ZXVlZCh0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KSk7XG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBtb3ZlIGRvd24uXG4gKiBAcHJpdmF0ZVxuICovXG5Qcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5zaWZ0VXBfID0gZnVuY3Rpb24gc2lmdFVwXyAoaW5kZXgpIHtcbiAgdmFyIGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gIHZhciBwcmlvcml0aWVzID0gdGhpcy5wcmlvcml0aWVzXztcbiAgdmFyIGNvdW50ID0gZWxlbWVudHMubGVuZ3RoO1xuICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2luZGV4XTtcbiAgdmFyIHByaW9yaXR5ID0gcHJpb3JpdGllc1tpbmRleF07XG4gIHZhciBzdGFydEluZGV4ID0gaW5kZXg7XG5cbiAgd2hpbGUgKGluZGV4IDwgKGNvdW50ID4+IDEpKSB7XG4gICAgdmFyIGxJbmRleCA9IHRoaXMuZ2V0TGVmdENoaWxkSW5kZXhfKGluZGV4KTtcbiAgICB2YXIgckluZGV4ID0gdGhpcy5nZXRSaWdodENoaWxkSW5kZXhfKGluZGV4KTtcblxuICAgIHZhciBzbWFsbGVyQ2hpbGRJbmRleCA9IHJJbmRleCA8IGNvdW50ICYmXG4gICAgICAgIHByaW9yaXRpZXNbckluZGV4XSA8IHByaW9yaXRpZXNbbEluZGV4XSA/XG4gICAgICBySW5kZXggOiBsSW5kZXg7XG5cbiAgICBlbGVtZW50c1tpbmRleF0gPSBlbGVtZW50c1tzbWFsbGVyQ2hpbGRJbmRleF07XG4gICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0aWVzW3NtYWxsZXJDaGlsZEluZGV4XTtcbiAgICBpbmRleCA9IHNtYWxsZXJDaGlsZEluZGV4O1xuICB9XG5cbiAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudDtcbiAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0eTtcbiAgdGhpcy5zaWZ0RG93bl8oc3RhcnRJbmRleCwgaW5kZXgpO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydEluZGV4IFRoZSBpbmRleCBvZiB0aGUgcm9vdC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gbW92ZSB1cC5cbiAqIEBwcml2YXRlXG4gKi9cblByaW9yaXR5UXVldWUucHJvdG90eXBlLnNpZnREb3duXyA9IGZ1bmN0aW9uIHNpZnREb3duXyAoc3RhcnRJbmRleCwgaW5kZXgpIHtcbiAgdmFyIGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gIHZhciBwcmlvcml0aWVzID0gdGhpcy5wcmlvcml0aWVzXztcbiAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1tpbmRleF07XG4gIHZhciBwcmlvcml0eSA9IHByaW9yaXRpZXNbaW5kZXhdO1xuXG4gIHdoaWxlIChpbmRleCA+IHN0YXJ0SW5kZXgpIHtcbiAgICB2YXIgcGFyZW50SW5kZXggPSB0aGlzLmdldFBhcmVudEluZGV4XyhpbmRleCk7XG4gICAgaWYgKHByaW9yaXRpZXNbcGFyZW50SW5kZXhdID4gcHJpb3JpdHkpIHtcbiAgICAgIGVsZW1lbnRzW2luZGV4XSA9IGVsZW1lbnRzW3BhcmVudEluZGV4XTtcbiAgICAgIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdGllc1twYXJlbnRJbmRleF07XG4gICAgICBpbmRleCA9IHBhcmVudEluZGV4O1xuICAgIH0gZWxzZSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudDtcbiAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0eTtcbn07XG5cblxuLyoqXG4gKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAqL1xuUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUucmVwcmlvcml0aXplID0gZnVuY3Rpb24gcmVwcmlvcml0aXplICgpIHtcbiAgdmFyIHByaW9yaXR5RnVuY3Rpb24gPSB0aGlzLnByaW9yaXR5RnVuY3Rpb25fO1xuICB2YXIgZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzXztcbiAgdmFyIHByaW9yaXRpZXMgPSB0aGlzLnByaW9yaXRpZXNfO1xuICB2YXIgaW5kZXggPSAwO1xuICB2YXIgbiA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgdmFyIGVsZW1lbnQsIGksIHByaW9yaXR5O1xuICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgZWxlbWVudCA9IGVsZW1lbnRzW2ldO1xuICAgIHByaW9yaXR5ID0gcHJpb3JpdHlGdW5jdGlvbihlbGVtZW50KTtcbiAgICBpZiAocHJpb3JpdHkgPT0gRFJPUCkge1xuICAgICAgZGVsZXRlIHRoaXMucXVldWVkRWxlbWVudHNfW3RoaXMua2V5RnVuY3Rpb25fKGVsZW1lbnQpXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0eTtcbiAgICAgIGVsZW1lbnRzW2luZGV4KytdID0gZWxlbWVudDtcbiAgICB9XG4gIH1cbiAgZWxlbWVudHMubGVuZ3RoID0gaW5kZXg7XG4gIHByaW9yaXRpZXMubGVuZ3RoID0gaW5kZXg7XG4gIHRoaXMuaGVhcGlmeV8oKTtcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgUHJpb3JpdHlRdWV1ZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJpb3JpdHlRdWV1ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVGlsZVF1ZXVlXG4gKi9cbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IHtsaXN0ZW4sIHVubGlzdGVufSBmcm9tICcuL2V2ZW50cy5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUHJpb3JpdHlRdWV1ZSBmcm9tICcuL3N0cnVjdHMvUHJpb3JpdHlRdWV1ZS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHQsIHN0cmluZywgaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUsIG51bWJlcik6IG51bWJlcn0gUHJpb3JpdHlGdW5jdGlvblxuICovXG5cblxudmFyIFRpbGVRdWV1ZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFByaW9yaXR5UXVldWUpIHtcbiAgZnVuY3Rpb24gVGlsZVF1ZXVlKHRpbGVQcmlvcml0eUZ1bmN0aW9uLCB0aWxlQ2hhbmdlQ2FsbGJhY2spIHtcblxuICAgIFByaW9yaXR5UXVldWUuY2FsbChcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtBcnJheX0gZWxlbWVudCBFbGVtZW50LlxuICAgICAgICogQHJldHVybiB7bnVtYmVyfSBQcmlvcml0eS5cbiAgICAgICAqL1xuICAgICAgdGhpcywgZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdGlsZVByaW9yaXR5RnVuY3Rpb24uYXBwbHkobnVsbCwgZWxlbWVudCk7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge0FycmF5fSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEtleS5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9ICovIChlbGVtZW50WzBdKS5nZXRLZXkoKSk7XG4gICAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Z1bmN0aW9uKCk6ID99XG4gICAgICovXG4gICAgdGhpcy50aWxlQ2hhbmdlQ2FsbGJhY2tfID0gdGlsZUNoYW5nZUNhbGxiYWNrO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMudGlsZXNMb2FkaW5nXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZyxib29sZWFuPn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVzTG9hZGluZ0tleXNfID0ge307XG5cbiAgfVxuXG4gIGlmICggUHJpb3JpdHlRdWV1ZSApIFRpbGVRdWV1ZS5fX3Byb3RvX18gPSBQcmlvcml0eVF1ZXVlO1xuICBUaWxlUXVldWUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUHJpb3JpdHlRdWV1ZSAmJiBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZSApO1xuICBUaWxlUXVldWUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVGlsZVF1ZXVlO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgVGlsZVF1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlID0gZnVuY3Rpb24gZW5xdWV1ZSAoZWxlbWVudCkge1xuICAgIHZhciBhZGRlZCA9IFByaW9yaXR5UXVldWUucHJvdG90eXBlLmVucXVldWUuY2FsbCh0aGlzLCBlbGVtZW50KTtcbiAgICBpZiAoYWRkZWQpIHtcbiAgICAgIHZhciB0aWxlID0gZWxlbWVudFswXTtcbiAgICAgIGxpc3Rlbih0aWxlLCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZVRpbGVDaGFuZ2UsIHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gYWRkZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gTnVtYmVyIG9mIHRpbGVzIGxvYWRpbmcuXG4gICAqL1xuICBUaWxlUXVldWUucHJvdG90eXBlLmdldFRpbGVzTG9hZGluZyA9IGZ1bmN0aW9uIGdldFRpbGVzTG9hZGluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGlsZXNMb2FkaW5nXztcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgVGlsZVF1ZXVlLnByb3RvdHlwZS5oYW5kbGVUaWxlQ2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlVGlsZUNoYW5nZSAoZXZlbnQpIHtcbiAgICB2YXIgdGlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9ICovIChldmVudC50YXJnZXQpO1xuICAgIHZhciBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICBpZiAoc3RhdGUgPT09IFRpbGVTdGF0ZS5MT0FERUQgfHwgc3RhdGUgPT09IFRpbGVTdGF0ZS5FUlJPUiB8fFxuICAgICAgICBzdGF0ZSA9PT0gVGlsZVN0YXRlLkVNUFRZIHx8IHN0YXRlID09PSBUaWxlU3RhdGUuQUJPUlQpIHtcbiAgICAgIHVubGlzdGVuKHRpbGUsIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlVGlsZUNoYW5nZSwgdGhpcyk7XG4gICAgICB2YXIgdGlsZUtleSA9IHRpbGUuZ2V0S2V5KCk7XG4gICAgICBpZiAodGlsZUtleSBpbiB0aGlzLnRpbGVzTG9hZGluZ0tleXNfKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnRpbGVzTG9hZGluZ0tleXNfW3RpbGVLZXldO1xuICAgICAgICAtLXRoaXMudGlsZXNMb2FkaW5nXztcbiAgICAgIH1cbiAgICAgIHRoaXMudGlsZUNoYW5nZUNhbGxiYWNrXygpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heFRvdGFsTG9hZGluZyBNYXhpbXVtIG51bWJlciB0aWxlcyB0byBsb2FkIHNpbXVsdGFuZW91c2x5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWF4TmV3TG9hZHMgTWF4aW11bSBudW1iZXIgb2YgbmV3IHRpbGVzIHRvIGxvYWQuXG4gICAqL1xuICBUaWxlUXVldWUucHJvdG90eXBlLmxvYWRNb3JlVGlsZXMgPSBmdW5jdGlvbiBsb2FkTW9yZVRpbGVzIChtYXhUb3RhbExvYWRpbmcsIG1heE5ld0xvYWRzKSB7XG4gICAgdmFyIG5ld0xvYWRzID0gMDtcbiAgICB2YXIgYWJvcnRlZFRpbGVzID0gZmFsc2U7XG4gICAgdmFyIHN0YXRlLCB0aWxlLCB0aWxlS2V5O1xuICAgIHdoaWxlICh0aGlzLnRpbGVzTG9hZGluZ18gPCBtYXhUb3RhbExvYWRpbmcgJiYgbmV3TG9hZHMgPCBtYXhOZXdMb2FkcyAmJlxuICAgICAgICAgICB0aGlzLmdldENvdW50KCkgPiAwKSB7XG4gICAgICB0aWxlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZGVxdWV1ZSgpWzBdKTtcbiAgICAgIHRpbGVLZXkgPSB0aWxlLmdldEtleSgpO1xuICAgICAgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICBpZiAoc3RhdGUgPT09IFRpbGVTdGF0ZS5BQk9SVCkge1xuICAgICAgICBhYm9ydGVkVGlsZXMgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gVGlsZVN0YXRlLklETEUgJiYgISh0aWxlS2V5IGluIHRoaXMudGlsZXNMb2FkaW5nS2V5c18pKSB7XG4gICAgICAgIHRoaXMudGlsZXNMb2FkaW5nS2V5c19bdGlsZUtleV0gPSB0cnVlO1xuICAgICAgICArK3RoaXMudGlsZXNMb2FkaW5nXztcbiAgICAgICAgKytuZXdMb2FkcztcbiAgICAgICAgdGlsZS5sb2FkKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChuZXdMb2FkcyA9PT0gMCAmJiBhYm9ydGVkVGlsZXMpIHtcbiAgICAgIC8vIERvIG5vdCBzdG9wIHRoZSByZW5kZXIgbG9vcCB3aGVuIGFsbCB3YW50ZWQgdGlsZXMgd2VyZSBhYm9ydGVkIGR1ZSB0b1xuICAgICAgLy8gYSBzbWFsbCwgc2F0dXJhdGVkIHRpbGUgY2FjaGUuXG4gICAgICB0aGlzLnRpbGVDaGFuZ2VDYWxsYmFja18oKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFRpbGVRdWV1ZTtcbn0oUHJpb3JpdHlRdWV1ZSkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IFRpbGVRdWV1ZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZVF1ZXVlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlZ3JpZC9jb21tb25cbiAqL1xuXG4vKipcbiAqIERlZmF1bHQgbWF4aW11bSB6b29tIGZvciBkZWZhdWx0IHRpbGUgZ3JpZHMuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIERFRkFVTFRfTUFYX1pPT00gPSA0MjtcblxuLyoqXG4gKiBEZWZhdWx0IHRpbGUgc2l6ZS5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgREVGQVVMVF9USUxFX1NJWkUgPSAyNTY7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvbWF0aFxuICovXG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcblxuLyoqXG4gKiBUYWtlcyBhIG51bWJlciBhbmQgY2xhbXBzIGl0IHRvIHdpdGhpbiB0aGUgcHJvdmlkZWQgYm91bmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFRoZSBpbnB1dCBudW1iZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluIFRoZSBtaW5pbXVtIHZhbHVlIHRvIHJldHVybi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggVGhlIG1heGltdW0gdmFsdWUgdG8gcmV0dXJuLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5wdXQgbnVtYmVyIGlmIGl0IGlzIHdpdGhpbiBib3VuZHMsIG9yIHRoZSBuZWFyZXN0XG4gKiAgICAgbnVtYmVyIHdpdGhpbiB0aGUgYm91bmRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAodmFsdWUsIG1pbiwgbWF4KSB7XG4gIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh2YWx1ZSwgbWluKSwgbWF4KTtcbn1cblxuXG4vKipcbiAqIFJldHVybiB0aGUgaHlwZXJib2xpYyBjb3NpbmUgb2YgYSBnaXZlbiBudW1iZXIuIFRoZSBtZXRob2Qgd2lsbCB1c2UgdGhlXG4gKiBuYXRpdmUgYE1hdGguY29zaGAgZnVuY3Rpb24gaWYgaXQgaXMgYXZhaWxhYmxlLCBvdGhlcndpc2UgdGhlIGh5cGVyYm9saWNcbiAqIGNvc2luZSB3aWxsIGJlIGNhbGN1bGF0ZWQgdmlhIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24gb2YgdGhlIE1vemlsbGFcbiAqIGRldmVsb3BlciBuZXR3b3JrLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEh5cGVyYm9saWMgY29zaW5lIG9mIHguXG4gKi9cbmV4cG9ydCB2YXIgY29zaCA9IChmdW5jdGlvbigpIHtcbiAgLy8gV3JhcHBlZCBpbiBhIGlpZmUsIHRvIHNhdmUgdGhlIG92ZXJoZWFkIG9mIGNoZWNraW5nIGZvciB0aGUgbmF0aXZlXG4gIC8vIGltcGxlbWVudGF0aW9uIG9uIGV2ZXJ5IGludm9jYXRpb24uXG4gIHZhciBjb3NoO1xuICBpZiAoJ2Nvc2gnIGluIE1hdGgpIHtcbiAgICAvLyBUaGUgZW52aXJvbm1lbnQgc3VwcG9ydHMgdGhlIG5hdGl2ZSBNYXRoLmNvc2ggZnVuY3Rpb24sIHVzZSBpdOKAplxuICAgIGNvc2ggPSBNYXRoLmNvc2g7XG4gIH0gZWxzZSB7XG4gICAgLy8g4oCmIGVsc2UsIHVzZSB0aGUgcmVmZXJlbmNlIGltcGxlbWVudGF0aW9uIG9mIE1ETjpcbiAgICBjb3NoID0gZnVuY3Rpb24oeCkge1xuICAgICAgdmFyIHkgPSAvKiogQHR5cGUge01hdGh9ICovIChNYXRoKS5leHAoeCk7XG4gICAgICByZXR1cm4gKHkgKyAxIC8geSkgLyAyO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGNvc2g7XG59KCkpO1xuXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHNtYWxsZXN0IHBvd2VyIG9mIHR3byBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8geC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdW5kVXBUb1Bvd2VyT2ZUd28oeCkge1xuICBhc3NlcnQoMCA8IHgsIDI5KTsgLy8gYHhgIG11c3QgYmUgZ3JlYXRlciB0aGFuIGAwYFxuICByZXR1cm4gTWF0aC5wb3coMiwgTWF0aC5jZWlsKE1hdGgubG9nKHgpIC8gTWF0aC5MTjIpKTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNxdWFyZSBvZiB0aGUgY2xvc2VzdCBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBwb2ludCAoeCwgeSkgYW5kIHRoZVxuICogbGluZSBzZWdtZW50ICh4MSwgeTEpIHRvICh4MiwgeTIpLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge251bWJlcn0geDEgWDEuXG4gKiBAcGFyYW0ge251bWJlcn0geTEgWTEuXG4gKiBAcGFyYW0ge251bWJlcn0geDIgWDIuXG4gKiBAcGFyYW0ge251bWJlcn0geTIgWTIuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkU2VnbWVudERpc3RhbmNlKHgsIHksIHgxLCB5MSwgeDIsIHkyKSB7XG4gIHZhciBkeCA9IHgyIC0geDE7XG4gIHZhciBkeSA9IHkyIC0geTE7XG4gIGlmIChkeCAhPT0gMCB8fCBkeSAhPT0gMCkge1xuICAgIHZhciB0ID0gKCh4IC0geDEpICogZHggKyAoeSAtIHkxKSAqIGR5KSAvIChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgaWYgKHQgPiAxKSB7XG4gICAgICB4MSA9IHgyO1xuICAgICAgeTEgPSB5MjtcbiAgICB9IGVsc2UgaWYgKHQgPiAwKSB7XG4gICAgICB4MSArPSBkeCAqIHQ7XG4gICAgICB5MSArPSBkeSAqIHQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBzcXVhcmVkRGlzdGFuY2UoeCwgeSwgeDEsIHkxKTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNxdWFyZSBvZiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgcG9pbnRzICh4MSwgeTEpIGFuZCAoeDIsIHkyKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MSBYMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MSBZMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MiBYMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MiBZMi5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZSh4MSwgeTEsIHgyLCB5Mikge1xuICB2YXIgZHggPSB4MiAtIHgxO1xuICB2YXIgZHkgPSB5MiAtIHkxO1xuICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XG59XG5cblxuLyoqXG4gKiBTb2x2ZXMgc3lzdGVtIG9mIGxpbmVhciBlcXVhdGlvbnMgdXNpbmcgR2F1c3NpYW4gZWxpbWluYXRpb24gbWV0aG9kLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IG1hdCBBdWdtZW50ZWQgbWF0cml4IChuIHggbiArIDEgY29sdW1uKVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gcm93LW1ham9yIG9yZGVyLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVGhlIHJlc3VsdGluZyB2ZWN0b3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb2x2ZUxpbmVhclN5c3RlbShtYXQpIHtcbiAgdmFyIG4gPSBtYXQubGVuZ3RoO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgLy8gRmluZCBtYXggaW4gdGhlIGktdGggY29sdW1uIChpZ25vcmluZyBpIC0gMSBmaXJzdCByb3dzKVxuICAgIHZhciBtYXhSb3cgPSBpO1xuICAgIHZhciBtYXhFbCA9IE1hdGguYWJzKG1hdFtpXVtpXSk7XG4gICAgZm9yICh2YXIgciA9IGkgKyAxOyByIDwgbjsgcisrKSB7XG4gICAgICB2YXIgYWJzVmFsdWUgPSBNYXRoLmFicyhtYXRbcl1baV0pO1xuICAgICAgaWYgKGFic1ZhbHVlID4gbWF4RWwpIHtcbiAgICAgICAgbWF4RWwgPSBhYnNWYWx1ZTtcbiAgICAgICAgbWF4Um93ID0gcjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobWF4RWwgPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsOyAvLyBtYXRyaXggaXMgc2luZ3VsYXJcbiAgICB9XG5cbiAgICAvLyBTd2FwIG1heCByb3cgd2l0aCBpLXRoIChjdXJyZW50KSByb3dcbiAgICB2YXIgdG1wID0gbWF0W21heFJvd107XG4gICAgbWF0W21heFJvd10gPSBtYXRbaV07XG4gICAgbWF0W2ldID0gdG1wO1xuXG4gICAgLy8gU3VidHJhY3QgdGhlIGktdGggcm93IHRvIG1ha2UgYWxsIHRoZSByZW1haW5pbmcgcm93cyAwIGluIHRoZSBpLXRoIGNvbHVtblxuICAgIGZvciAodmFyIGogPSBpICsgMTsgaiA8IG47IGorKykge1xuICAgICAgdmFyIGNvZWYgPSAtbWF0W2pdW2ldIC8gbWF0W2ldW2ldO1xuICAgICAgZm9yICh2YXIgayA9IGk7IGsgPCBuICsgMTsgaysrKSB7XG4gICAgICAgIGlmIChpID09IGspIHtcbiAgICAgICAgICBtYXRbal1ba10gPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1hdFtqXVtrXSArPSBjb2VmICogbWF0W2ldW2tdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gU29sdmUgQXg9YiBmb3IgdXBwZXIgdHJpYW5ndWxhciBtYXRyaXggQSAobWF0KVxuICB2YXIgeCA9IG5ldyBBcnJheShuKTtcbiAgZm9yICh2YXIgbCA9IG4gLSAxOyBsID49IDA7IGwtLSkge1xuICAgIHhbbF0gPSBtYXRbbF1bbl0gLyBtYXRbbF1bbF07XG4gICAgZm9yICh2YXIgbSA9IGwgLSAxOyBtID49IDA7IG0tLSkge1xuICAgICAgbWF0W21dW25dIC09IG1hdFttXVtsXSAqIHhbbF07XG4gICAgfVxuICB9XG4gIHJldHVybiB4O1xufVxuXG5cbi8qKlxuICogQ29udmVydHMgcmFkaWFucyB0byB0byBkZWdyZWVzLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZUluUmFkaWFucyBBbmdsZSBpbiByYWRpYW5zLlxuICogQHJldHVybiB7bnVtYmVyfSBBbmdsZSBpbiBkZWdyZWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9EZWdyZWVzKGFuZ2xlSW5SYWRpYW5zKSB7XG4gIHJldHVybiBhbmdsZUluUmFkaWFucyAqIDE4MCAvIE1hdGguUEk7XG59XG5cblxuLyoqXG4gKiBDb252ZXJ0cyBkZWdyZWVzIHRvIHJhZGlhbnMuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlSW5EZWdyZWVzIEFuZ2xlIGluIGRlZ3JlZXMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFuZ2xlIGluIHJhZGlhbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1JhZGlhbnMoYW5nbGVJbkRlZ3JlZXMpIHtcbiAgcmV0dXJuIGFuZ2xlSW5EZWdyZWVzICogTWF0aC5QSSAvIDE4MDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtb2R1bG8gb2YgYSAvIGIsIGRlcGVuZGluZyBvbiB0aGUgc2lnbiBvZiBiLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhIERpdmlkZW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IGIgRGl2aXNvci5cbiAqIEByZXR1cm4ge251bWJlcn0gTW9kdWxvLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbW9kdWxvKGEsIGIpIHtcbiAgdmFyIHIgPSBhICUgYjtcbiAgcmV0dXJuIHIgKiBiIDwgMCA/IHIgKyBiIDogcjtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsaW5lYXJseSBpbnRlcnBvbGF0ZWQgdmFsdWUgb2YgeCBiZXR3ZWVuIGEgYW5kIGIuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGEgTnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gYiBOdW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFZhbHVlIHRvIGJlIGludGVycG9sYXRlZC5cbiAqIEByZXR1cm4ge251bWJlcn0gSW50ZXJwb2xhdGVkIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGVycChhLCBiLCB4KSB7XG4gIHJldHVybiBhICsgeCAqIChiIC0gYSk7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hdGguanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NlbnRlcmNvbnN0cmFpbnRcbiAqL1xuaW1wb3J0IHtjbGFtcH0gZnJvbSAnLi9tYXRoLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigoaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkKSk6IChpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWQpfSBUeXBlXG4gKi9cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7VHlwZX0gVGhlIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFeHRlbnQoZXh0ZW50KSB7XG4gIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IGNlbnRlciBDZW50ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24oY2VudGVyKSB7XG4gICAgICBpZiAoY2VudGVyKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgY2xhbXAoY2VudGVyWzBdLCBleHRlbnRbMF0sIGV4dGVudFsyXSksXG4gICAgICAgICAgY2xhbXAoY2VudGVyWzFdLCBleHRlbnRbMV0sIGV4dGVudFszXSlcbiAgICAgICAgXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICApO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IGNlbnRlciBDZW50ZXIuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vbmUoY2VudGVyKSB7XG4gIHJldHVybiBjZW50ZXI7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNlbnRlcmNvbnN0cmFpbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Jlc29sdXRpb25jb25zdHJhaW50XG4gKi9cbmltcG9ydCB7bGluZWFyRmluZE5lYXJlc3R9IGZyb20gJy4vYXJyYXkuanMnO1xuaW1wb3J0IHtjbGFtcH0gZnJvbSAnLi9tYXRoLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigobnVtYmVyfHVuZGVmaW5lZCksIG51bWJlciwgbnVtYmVyKTogKG51bWJlcnx1bmRlZmluZWQpfSBUeXBlXG4gKi9cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gcmVzb2x1dGlvbnMgUmVzb2x1dGlvbnMuXG4gKiBAcmV0dXJuIHtUeXBlfSBab29tIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMocmVzb2x1dGlvbnMpIHtcbiAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgRGVsdGEuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRpcmVjdGlvbiBEaXJlY3Rpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbihyZXNvbHV0aW9uLCBkZWx0YSwgZGlyZWN0aW9uKSB7XG4gICAgICBpZiAocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciB6ID0gbGluZWFyRmluZE5lYXJlc3QocmVzb2x1dGlvbnMsIHJlc29sdXRpb24sIGRpcmVjdGlvbik7XG4gICAgICAgIHogPSBjbGFtcCh6ICsgZGVsdGEsIDAsIHJlc29sdXRpb25zLmxlbmd0aCAtIDEpO1xuICAgICAgICB2YXIgaW5kZXggPSBNYXRoLmZsb29yKHopO1xuICAgICAgICBpZiAoeiAhPSBpbmRleCAmJiBpbmRleCA8IHJlc29sdXRpb25zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICB2YXIgcG93ZXIgPSByZXNvbHV0aW9uc1tpbmRleF0gLyByZXNvbHV0aW9uc1tpbmRleCArIDFdO1xuICAgICAgICAgIHJldHVybiByZXNvbHV0aW9uc1tpbmRleF0gLyBNYXRoLnBvdyhwb3dlciwgeiAtIGluZGV4KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x1dGlvbnNbaW5kZXhdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBwb3dlciBQb3dlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uIE1heGltdW0gcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X21heExldmVsIE1heGltdW0gbGV2ZWwuXG4gKiBAcmV0dXJuIHtUeXBlfSBab29tIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvUG93ZXIocG93ZXIsIG1heFJlc29sdXRpb24sIG9wdF9tYXhMZXZlbCkge1xuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBEZWx0YS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGlyZWN0aW9uIERpcmVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uKHJlc29sdXRpb24sIGRlbHRhLCBkaXJlY3Rpb24pIHtcbiAgICAgIGlmIChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIG9mZnNldCA9IC1kaXJlY3Rpb24gLyAyICsgMC41O1xuICAgICAgICB2YXIgb2xkTGV2ZWwgPSBNYXRoLmZsb29yKFxuICAgICAgICAgIE1hdGgubG9nKG1heFJlc29sdXRpb24gLyByZXNvbHV0aW9uKSAvIE1hdGgubG9nKHBvd2VyKSArIG9mZnNldCk7XG4gICAgICAgIHZhciBuZXdMZXZlbCA9IE1hdGgubWF4KG9sZExldmVsICsgZGVsdGEsIDApO1xuICAgICAgICBpZiAob3B0X21heExldmVsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBuZXdMZXZlbCA9IE1hdGgubWluKG5ld0xldmVsLCBvcHRfbWF4TGV2ZWwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3cocG93ZXIsIG5ld0xldmVsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSk7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlc29sdXRpb25jb25zdHJhaW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yb3RhdGlvbmNvbnN0cmFpbnRcbiAqL1xuaW1wb3J0IHt0b1JhZGlhbnN9IGZyb20gJy4vbWF0aC5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKG51bWJlcnx1bmRlZmluZWQpLCBudW1iZXIpOiAobnVtYmVyfHVuZGVmaW5lZCl9IFR5cGVcbiAqL1xuXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBEZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJvdGF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZShyb3RhdGlvbiwgZGVsdGEpIHtcbiAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gMDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIERlbHRhLlxuICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUm90YXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub25lKHJvdGF0aW9uLCBkZWx0YSkge1xuICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiByb3RhdGlvbiArIGRlbHRhO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIE4uXG4gKiBAcmV0dXJuIHtUeXBlfSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvTihuKSB7XG4gIHZhciB0aGV0YSA9IDIgKiBNYXRoLlBJIC8gbjtcbiAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBEZWx0YS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbihyb3RhdGlvbiwgZGVsdGEpIHtcbiAgICAgIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJvdGF0aW9uID0gTWF0aC5mbG9vcigocm90YXRpb24gKyBkZWx0YSkgLyB0aGV0YSArIDAuNSkgKiB0aGV0YTtcbiAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9KTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3RvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcmV0dXJuIHtUeXBlfSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvWmVybyhvcHRfdG9sZXJhbmNlKSB7XG4gIHZhciB0b2xlcmFuY2UgPSBvcHRfdG9sZXJhbmNlIHx8IHRvUmFkaWFucyg1KTtcbiAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBEZWx0YS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbihyb3RhdGlvbiwgZGVsdGEpIHtcbiAgICAgIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChNYXRoLmFicyhyb3RhdGlvbiArIGRlbHRhKSA8PSB0b2xlcmFuY2UpIHtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcm90YXRpb24gKyBkZWx0YTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9KTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cm90YXRpb25jb25zdHJhaW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9WaWV3SGludFxuICovXG5cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBBTklNQVRJTkc6IDAsXG4gIElOVEVSQUNUSU5HOiAxXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1WaWV3SGludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVmlld1Byb3BlcnR5XG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIENFTlRFUjogJ2NlbnRlcicsXG4gIFJFU09MVVRJT046ICdyZXNvbHV0aW9uJyxcbiAgUk9UQVRJT046ICdyb3RhdGlvbidcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZpZXdQcm9wZXJ0eS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY29vcmRpbmF0ZVxuICovXG5pbXBvcnQge21vZHVsb30gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7cGFkTnVtYmVyfSBmcm9tICcuL3N0cmluZy5qcyc7XG5cblxuLyoqXG4gKiBBbiBhcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBhbiB4eSBjb29yZGluYXRlLiBFeGFtcGxlOiBgWzE2LCA0OF1gLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IENvb3JkaW5hdGVcbiAqIEBhcGlcbiAqL1xuXG5cbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9IGFuZFxuICogdHJhbnNmb3JtcyBpdCBpbnRvIGEgYHtzdHJpbmd9YC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKENvb3JkaW5hdGV8dW5kZWZpbmVkKSk6IHN0cmluZ30gQ29vcmRpbmF0ZUZvcm1hdFxuICogQGFwaVxuICovXG5cblxuLyoqXG4gKiBBZGQgYGRlbHRhYCB0byBgY29vcmRpbmF0ZWAuIGBjb29yZGluYXRlYCBpcyBtb2RpZmllZCBpbiBwbGFjZSBhbmQgcmV0dXJuZWRcbiAqIGJ5IHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge2FkZH0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIGFkZChjb29yZCwgWy0yLCA0XSk7XG4gKiAgICAgLy8gY29vcmQgaXMgbm93IFs1Ljg1LCA1MS45ODMzMzNdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGRlbHRhIERlbHRhLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gVGhlIGlucHV0IGNvb3JkaW5hdGUgYWRqdXN0ZWQgYnlcbiAqIHRoZSBnaXZlbiBkZWx0YS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZChjb29yZGluYXRlLCBkZWx0YSkge1xuICBjb29yZGluYXRlWzBdICs9IGRlbHRhWzBdO1xuICBjb29yZGluYXRlWzFdICs9IGRlbHRhWzFdO1xuICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cblxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHBvaW50IGNsb3Nlc3QgdG8gdGhlIHBhc3NlZCBjb29yZGluYXRlIG9uIHRoZSBwYXNzZWQgY2lyY2xlLlxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBUaGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL0NpcmNsZS5qc1wiKS5kZWZhdWx0fSBjaXJjbGUgVGhlIGNpcmNsZS5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IENsb3Nlc3QgcG9pbnQgb24gdGhlIGNpcmN1bWZlcmVuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0T25DaXJjbGUoY29vcmRpbmF0ZSwgY2lyY2xlKSB7XG4gIHZhciByID0gY2lyY2xlLmdldFJhZGl1cygpO1xuICB2YXIgY2VudGVyID0gY2lyY2xlLmdldENlbnRlcigpO1xuICB2YXIgeDAgPSBjZW50ZXJbMF07XG4gIHZhciB5MCA9IGNlbnRlclsxXTtcbiAgdmFyIHgxID0gY29vcmRpbmF0ZVswXTtcbiAgdmFyIHkxID0gY29vcmRpbmF0ZVsxXTtcblxuICB2YXIgZHggPSB4MSAtIHgwO1xuICB2YXIgZHkgPSB5MSAtIHkwO1xuICBpZiAoZHggPT09IDAgJiYgZHkgPT09IDApIHtcbiAgICBkeCA9IDE7XG4gIH1cbiAgdmFyIGQgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuXG4gIHZhciB4ID0geDAgKyByICogZHggLyBkO1xuICB2YXIgeSA9IHkwICsgciAqIGR5IC8gZDtcblxuICByZXR1cm4gW3gsIHldO1xufVxuXG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgcG9pbnQgY2xvc2VzdCB0byB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgb24gdGhlIHBhc3NlZCBzZWdtZW50LlxuICogVGhpcyBpcyB0aGUgZm9vdCBvZiB0aGUgcGVycGVuZGljdWxhciBvZiB0aGUgY29vcmRpbmF0ZSB0byB0aGUgc2VnbWVudCB3aGVuXG4gKiB0aGUgZm9vdCBpcyBvbiB0aGUgc2VnbWVudCwgb3IgdGhlIGNsb3Nlc3Qgc2VnbWVudCBjb29yZGluYXRlIHdoZW4gdGhlIGZvb3RcbiAqIGlzIG91dHNpZGUgdGhlIHNlZ21lbnQuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtBcnJheTxDb29yZGluYXRlPn0gc2VnbWVudCBUaGUgdHdvIGNvb3JkaW5hdGVzXG4gKiBvZiB0aGUgc2VnbWVudC5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IFRoZSBmb290IG9mIHRoZSBwZXJwZW5kaWN1bGFyIG9mXG4gKiB0aGUgY29vcmRpbmF0ZSB0byB0aGUgc2VnbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RPblNlZ21lbnQoY29vcmRpbmF0ZSwgc2VnbWVudCkge1xuICB2YXIgeDAgPSBjb29yZGluYXRlWzBdO1xuICB2YXIgeTAgPSBjb29yZGluYXRlWzFdO1xuICB2YXIgc3RhcnQgPSBzZWdtZW50WzBdO1xuICB2YXIgZW5kID0gc2VnbWVudFsxXTtcbiAgdmFyIHgxID0gc3RhcnRbMF07XG4gIHZhciB5MSA9IHN0YXJ0WzFdO1xuICB2YXIgeDIgPSBlbmRbMF07XG4gIHZhciB5MiA9IGVuZFsxXTtcbiAgdmFyIGR4ID0geDIgLSB4MTtcbiAgdmFyIGR5ID0geTIgLSB5MTtcbiAgdmFyIGFsb25nID0gKGR4ID09PSAwICYmIGR5ID09PSAwKSA/IDAgOlxuICAgICgoZHggKiAoeDAgLSB4MSkpICsgKGR5ICogKHkwIC0geTEpKSkgLyAoKGR4ICogZHggKyBkeSAqIGR5KSB8fCAwKTtcbiAgdmFyIHgsIHk7XG4gIGlmIChhbG9uZyA8PSAwKSB7XG4gICAgeCA9IHgxO1xuICAgIHkgPSB5MTtcbiAgfSBlbHNlIGlmIChhbG9uZyA+PSAxKSB7XG4gICAgeCA9IHgyO1xuICAgIHkgPSB5MjtcbiAgfSBlbHNlIHtcbiAgICB4ID0geDEgKyBhbG9uZyAqIGR4O1xuICAgIHkgPSB5MSArIGFsb25nICogZHk7XG4gIH1cbiAgcmV0dXJuIFt4LCB5XTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZUZvcm1hdH0gZnVuY3Rpb24gdGhhdCBjYW4gYmVcbiAqIHVzZWQgdG8gZm9ybWF0XG4gKiBhIHtDb29yZGluYXRlfSB0byBhIHN0cmluZy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyB0aGUgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Y3JlYXRlU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgc3RyaW5naWZ5RnVuYyA9IGNyZWF0ZVN0cmluZ1hZKCk7XG4gKiAgICAgdmFyIG91dCA9IHN0cmluZ2lmeUZ1bmMoY29vcmQpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzgsIDQ4J1xuICpcbiAqIEV4YW1wbGUgd2l0aCBleHBsaWNpdGx5IHNwZWNpZnlpbmcgMiBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtjcmVhdGVTdHJpbmdYWX0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBzdHJpbmdpZnlGdW5jID0gY3JlYXRlU3RyaW5nWFkoMik7XG4gKiAgICAgdmFyIG91dCA9IHN0cmluZ2lmeUZ1bmMoY29vcmQpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzcuODUsIDQ3Ljk4J1xuICpcbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2ZyYWN0aW9uRGlnaXRzIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGVGb3JtYXR9IENvb3JkaW5hdGUgZm9ybWF0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3RyaW5nWFkob3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmcgWFkuXG4gICAgICovXG4gICAgZnVuY3Rpb24oY29vcmRpbmF0ZSkge1xuICAgICAgcmV0dXJuIHRvU3RyaW5nWFkoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKTtcbiAgICB9XG4gICk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gaGVtaXNwaGVyZXMgSGVtaXNwaGVyZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVncmVlcyBEZWdyZWVzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZnJhY3Rpb25EaWdpdHMgVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWdyZWVzVG9TdHJpbmdIRE1TKGhlbWlzcGhlcmVzLCBkZWdyZWVzLCBvcHRfZnJhY3Rpb25EaWdpdHMpIHtcbiAgdmFyIG5vcm1hbGl6ZWREZWdyZWVzID0gbW9kdWxvKGRlZ3JlZXMgKyAxODAsIDM2MCkgLSAxODA7XG4gIHZhciB4ID0gTWF0aC5hYnMoMzYwMCAqIG5vcm1hbGl6ZWREZWdyZWVzKTtcbiAgdmFyIGRmbFByZWNpc2lvbiA9IG9wdF9mcmFjdGlvbkRpZ2l0cyB8fCAwO1xuICB2YXIgcHJlY2lzaW9uID0gTWF0aC5wb3coMTAsIGRmbFByZWNpc2lvbik7XG5cbiAgdmFyIGRlZyA9IE1hdGguZmxvb3IoeCAvIDM2MDApO1xuICB2YXIgbWluID0gTWF0aC5mbG9vcigoeCAtIGRlZyAqIDM2MDApIC8gNjApO1xuICB2YXIgc2VjID0geCAtIChkZWcgKiAzNjAwKSAtIChtaW4gKiA2MCk7XG4gIHNlYyA9IE1hdGguY2VpbChzZWMgKiBwcmVjaXNpb24pIC8gcHJlY2lzaW9uO1xuXG4gIGlmIChzZWMgPj0gNjApIHtcbiAgICBzZWMgPSAwO1xuICAgIG1pbiArPSAxO1xuICB9XG5cbiAgaWYgKG1pbiA+PSA2MCkge1xuICAgIG1pbiA9IDA7XG4gICAgZGVnICs9IDE7XG4gIH1cblxuICByZXR1cm4gZGVnICsgJ1xcdTAwYjAgJyArIHBhZE51bWJlcihtaW4sIDIpICsgJ1xcdTIwMzIgJyArXG4gICAgcGFkTnVtYmVyKHNlYywgMiwgZGZsUHJlY2lzaW9uKSArICdcXHUyMDMzJyArXG4gICAgKG5vcm1hbGl6ZWREZWdyZWVzID09IDAgPyAnJyA6ICcgJyArIGhlbWlzcGhlcmVzLmNoYXJBdChub3JtYWxpemVkRGVncmVlcyA8IDAgPyAxIDogMCkpO1xufVxuXG5cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgZ2l2ZW4ge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9IHRvIGEgc3RyaW5nXG4gKiB1c2luZyB0aGUgZ2l2ZW4gc3RyaW5nIHRlbXBsYXRlLiBUaGUgc3RyaW5ncyBge3h9YCBhbmQgYHt5fWAgaW4gdGhlIHRlbXBsYXRlXG4gKiB3aWxsIGJlIHJlcGxhY2VkIHdpdGggdGhlIGZpcnN0IGFuZCBzZWNvbmQgY29vcmRpbmF0ZSB2YWx1ZXMgcmVzcGVjdGl2ZWx5LlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIHRoZSBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtmb3JtYXR9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgdGVtcGxhdGUgPSAnQ29vcmRpbmF0ZSBpcyAoe3h9fHt5fSkuJztcbiAqICAgICB2YXIgb3V0ID0gZm9ybWF0KGNvb3JkLCB0ZW1wbGF0ZSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnQ29vcmRpbmF0ZSBpcyAoOHw0OCkuJ1xuICpcbiAqIEV4YW1wbGUgZXhwbGljaXRseSBzcGVjaWZ5aW5nIHRoZSBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtmb3JtYXR9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgdGVtcGxhdGUgPSAnQ29vcmRpbmF0ZSBpcyAoe3h9fHt5fSkuJztcbiAqICAgICB2YXIgb3V0ID0gZm9ybWF0KGNvb3JkLCB0ZW1wbGF0ZSwgMik7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnQ29vcmRpbmF0ZSBpcyAoNy44NXw0Ny45OCkuJ1xuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRlbXBsYXRlIEEgdGVtcGxhdGUgc3RyaW5nIHdpdGggYHt4fWAgYW5kIGB7eX1gIHBsYWNlaG9sZGVyc1xuICogICAgIHRoYXQgd2lsbCBiZSByZXBsYWNlZCBieSBmaXJzdCBhbmQgc2Vjb25kIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZnJhY3Rpb25EaWdpdHMgVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBGb3JtYXR0ZWQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdChjb29yZGluYXRlLCB0ZW1wbGF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gIGlmIChjb29yZGluYXRlKSB7XG4gICAgcmV0dXJuIHRlbXBsYXRlXG4gICAgICAucmVwbGFjZSgne3h9JywgY29vcmRpbmF0ZVswXS50b0ZpeGVkKG9wdF9mcmFjdGlvbkRpZ2l0cykpXG4gICAgICAucmVwbGFjZSgne3l9JywgY29vcmRpbmF0ZVsxXS50b0ZpeGVkKG9wdF9mcmFjdGlvbkRpZ2l0cykpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnJztcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlMSBGaXJzdCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gY29vcmRpbmF0ZXMgYXJlIGVxdWFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGNvb3JkaW5hdGUxLCBjb29yZGluYXRlMikge1xuICB2YXIgZXF1YWxzID0gdHJ1ZTtcbiAgZm9yICh2YXIgaSA9IGNvb3JkaW5hdGUxLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgaWYgKGNvb3JkaW5hdGUxW2ldICE9IGNvb3JkaW5hdGUyW2ldKSB7XG4gICAgICBlcXVhbHMgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZXF1YWxzO1xufVxuXG5cbi8qKlxuICogUm90YXRlIGBjb29yZGluYXRlYCBieSBgYW5nbGVgLiBgY29vcmRpbmF0ZWAgaXMgbW9kaWZpZWQgaW4gcGxhY2UgYW5kXG4gKiByZXR1cm5lZCBieSB0aGUgZnVuY3Rpb24uXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgaW1wb3J0IHtyb3RhdGV9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgcm90YXRlUmFkaWFucyA9IE1hdGguUEkgLyAyOyAvLyA5MCBkZWdyZWVzXG4gKiAgICAgcm90YXRlKGNvb3JkLCByb3RhdGVSYWRpYW5zKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWy00Ny45ODMzMzMsIDcuODVdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgQW5nbGUgaW4gcmFkaWFuLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShjb29yZGluYXRlLCBhbmdsZSkge1xuICB2YXIgY29zQW5nbGUgPSBNYXRoLmNvcyhhbmdsZSk7XG4gIHZhciBzaW5BbmdsZSA9IE1hdGguc2luKGFuZ2xlKTtcbiAgdmFyIHggPSBjb29yZGluYXRlWzBdICogY29zQW5nbGUgLSBjb29yZGluYXRlWzFdICogc2luQW5nbGU7XG4gIHZhciB5ID0gY29vcmRpbmF0ZVsxXSAqIGNvc0FuZ2xlICsgY29vcmRpbmF0ZVswXSAqIHNpbkFuZ2xlO1xuICBjb29yZGluYXRlWzBdID0geDtcbiAgY29vcmRpbmF0ZVsxXSA9IHk7XG4gIHJldHVybiBjb29yZGluYXRlO1xufVxuXG5cbi8qKlxuICogU2NhbGUgYGNvb3JkaW5hdGVgIGJ5IGBzY2FsZWAuIGBjb29yZGluYXRlYCBpcyBtb2RpZmllZCBpbiBwbGFjZSBhbmQgcmV0dXJuZWRcbiAqIGJ5IHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge3NjYWxlIGFzIHNjYWxlQ29vcmRpbmF0ZX0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBzY2FsZSA9IDEuMjtcbiAqICAgICBzY2FsZUNvb3JkaW5hdGUoY29vcmQsIHNjYWxlKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWzkuNDIsIDU3LjU3OTk5OTZdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc2NhbGUgU2NhbGUgZmFjdG9yLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKGNvb3JkaW5hdGUsIHNjYWxlKSB7XG4gIGNvb3JkaW5hdGVbMF0gKj0gc2NhbGU7XG4gIGNvb3JkaW5hdGVbMV0gKj0gc2NhbGU7XG4gIHJldHVybiBjb29yZGluYXRlO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZDEgRmlyc3QgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQyIFNlY29uZCBjb29yZGluYXRlLlxuICogQHJldHVybiB7bnVtYmVyfSBTcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gY29vcmQxIGFuZCBjb29yZDIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkRGlzdGFuY2UoY29vcmQxLCBjb29yZDIpIHtcbiAgdmFyIGR4ID0gY29vcmQxWzBdIC0gY29vcmQyWzBdO1xuICB2YXIgZHkgPSBjb29yZDFbMV0gLSBjb29yZDJbMV07XG4gIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQxIEZpcnN0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge251bWJlcn0gRGlzdGFuY2UgYmV0d2VlbiBjb29yZDEgYW5kIGNvb3JkMi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSB7XG4gIHJldHVybiBNYXRoLnNxcnQoc3F1YXJlZERpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSk7XG59XG5cblxuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIHNxdWFyZWQgZGlzdGFuY2UgZnJvbSBhIGNvb3JkaW5hdGUgdG8gYSBsaW5lIHNlZ21lbnQuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUgb2YgdGhlIHBvaW50LlxuICogQHBhcmFtIHtBcnJheTxDb29yZGluYXRlPn0gc2VnbWVudCBMaW5lIHNlZ21lbnQgKDJcbiAqIGNvb3JkaW5hdGVzKS5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZSBmcm9tIHRoZSBwb2ludCB0byB0aGUgbGluZSBzZWdtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlVG9TZWdtZW50KGNvb3JkaW5hdGUsIHNlZ21lbnQpIHtcbiAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZShjb29yZGluYXRlLFxuICAgIGNsb3Nlc3RPblNlZ21lbnQoY29vcmRpbmF0ZSwgc2VnbWVudCkpO1xufVxuXG5cbi8qKlxuICogRm9ybWF0IGEgZ2VvZ3JhcGhpYyBjb29yZGluYXRlIHdpdGggdGhlIGhlbWlzcGhlcmUsIGRlZ3JlZXMsIG1pbnV0ZXMsIGFuZFxuICogc2Vjb25kcy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ0hETVN9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdIRE1TKGNvb3JkKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc0N8KwIDU44oCyIDYw4oCzIE4gN8KwIDUw4oCyIDYw4oCzIEUnXG4gKlxuICogRXhhbXBsZSBleHBsaWNpdGx5IHNwZWNpZnlpbmcgMSBmcmFjdGlvbmFsIGRpZ2l0OlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nSERNU30gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBvdXQgPSB0b1N0cmluZ0hETVMoY29vcmQsIDEpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzQ3wrAgNTjigLIgNjAuMOKAsyBOIDfCsCA1MOKAsiA2MC4w4oCzIEUnXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9mcmFjdGlvbkRpZ2l0cyBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEhlbWlzcGhlcmUsIGRlZ3JlZXMsIG1pbnV0ZXMgYW5kIHNlY29uZHMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZ0hETVMoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gIGlmIChjb29yZGluYXRlKSB7XG4gICAgcmV0dXJuIGRlZ3JlZXNUb1N0cmluZ0hETVMoJ05TJywgY29vcmRpbmF0ZVsxXSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSArICcgJyArXG4gICAgICAgIGRlZ3JlZXNUb1N0cmluZ0hETVMoJ0VXJywgY29vcmRpbmF0ZVswXSwgb3B0X2ZyYWN0aW9uRGlnaXRzKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbn1cblxuXG4vKipcbiAqIEZvcm1hdCBhIGNvb3JkaW5hdGUgYXMgYSBjb21tYSBkZWxpbWl0ZWQgc3RyaW5nLlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdYWShjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnOCwgNDgnXG4gKlxuICogRXhhbXBsZSBleHBsaWNpdGx5IHNwZWNpZnlpbmcgMSBmcmFjdGlvbmFsIGRpZ2l0OlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdYWShjb29yZCwgMSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNy44LCA0OC4wJ1xuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZnJhY3Rpb25EaWdpdHMgVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBYWS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nWFkoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gIHJldHVybiBmb3JtYXQoY29vcmRpbmF0ZSwgJ3t4fSwge3l9Jywgb3B0X2ZyYWN0aW9uRGlnaXRzKTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29vcmRpbmF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZWFzaW5nXG4gKi9cblxuXG4vKipcbiAqIFN0YXJ0IHNsb3cgYW5kIHNwZWVkIHVwLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZWFzZUluKHQpIHtcbiAgcmV0dXJuIE1hdGgucG93KHQsIDMpO1xufVxuXG5cbi8qKlxuICogU3RhcnQgZmFzdCBhbmQgc2xvdyBkb3duLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZWFzZU91dCh0KSB7XG4gIHJldHVybiAxIC0gZWFzZUluKDEgLSB0KTtcbn1cblxuXG4vKipcbiAqIFN0YXJ0IHNsb3csIHNwZWVkIHVwLCBhbmQgdGhlbiBzbG93IGRvd24gYWdhaW4uXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbkFuZE91dCh0KSB7XG4gIHJldHVybiAzICogdCAqIHQgLSAyICogdCAqIHQgKiB0O1xufVxuXG5cbi8qKlxuICogTWFpbnRhaW4gYSBjb25zdGFudCBzcGVlZCBvdmVyIHRpbWUuXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXIodCkge1xuICByZXR1cm4gdDtcbn1cblxuXG4vKipcbiAqIFN0YXJ0IHNsb3csIHNwZWVkIHVwLCBhbmQgYXQgdGhlIHZlcnkgZW5kIHNsb3cgZG93biBhZ2Fpbi4gIFRoaXMgaGFzIHRoZVxuICogc2FtZSBnZW5lcmFsIGJlaGF2aW9yIGFzIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nfmluQW5kT3V0fSwgYnV0IHRoZSBmaW5hbFxuICogc2xvd2Rvd24gaXMgZGVsYXllZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwQW5kRG93bih0KSB7XG4gIGlmICh0IDwgMC41KSB7XG4gICAgcmV0dXJuIGluQW5kT3V0KDIgKiB0KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gMSAtIGluQW5kT3V0KDIgKiAodCAtIDAuNSkpO1xuICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVhc2luZy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXh0ZW50L0Nvcm5lclxuICovXG5cbi8qKlxuICogRXh0ZW50IGNvcm5lci5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgQk9UVE9NX0xFRlQ6ICdib3R0b20tbGVmdCcsXG4gIEJPVFRPTV9SSUdIVDogJ2JvdHRvbS1yaWdodCcsXG4gIFRPUF9MRUZUOiAndG9wLWxlZnQnLFxuICBUT1BfUklHSFQ6ICd0b3AtcmlnaHQnXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db3JuZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V4dGVudC9SZWxhdGlvbnNoaXBcbiAqL1xuXG4vKipcbiAqIFJlbGF0aW9uc2hpcCB0byBhbiBleHRlbnQuXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIFVOS05PV046IDAsXG4gIElOVEVSU0VDVElORzogMSxcbiAgQUJPVkU6IDIsXG4gIFJJR0hUOiA0LFxuICBCRUxPVzogOCxcbiAgTEVGVDogMTZcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlbGF0aW9uc2hpcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXh0ZW50XG4gKi9cbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IENvcm5lciBmcm9tICcuL2V4dGVudC9Db3JuZXIuanMnO1xuaW1wb3J0IFJlbGF0aW9uc2hpcCBmcm9tICcuL2V4dGVudC9SZWxhdGlvbnNoaXAuanMnO1xuXG5cbi8qKlxuICogQW4gYXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgYW4gZXh0ZW50OiBgW21pbngsIG1pbnksIG1heHgsIG1heHldYC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBFeHRlbnRcbiAqIEBhcGlcbiAqL1xuXG4vKipcbiAqIEJ1aWxkIGFuIGV4dGVudCB0aGF0IGluY2x1ZGVzIGFsbCBnaXZlbiBjb29yZGluYXRlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEJvdW5kaW5nIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJvdW5kaW5nRXh0ZW50KGNvb3JkaW5hdGVzKSB7XG4gIHZhciBleHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIGNvb3JkaW5hdGVzW2ldKTtcbiAgfVxuICByZXR1cm4gZXh0ZW50O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4cyBYcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geXMgWXMuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHByaXZhdGVcbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5mdW5jdGlvbiBfYm91bmRpbmdFeHRlbnRYWXMoeHMsIHlzLCBvcHRfZXh0ZW50KSB7XG4gIHZhciBtaW5YID0gTWF0aC5taW4uYXBwbHkobnVsbCwgeHMpO1xuICB2YXIgbWluWSA9IE1hdGgubWluLmFwcGx5KG51bGwsIHlzKTtcbiAgdmFyIG1heFggPSBNYXRoLm1heC5hcHBseShudWxsLCB4cyk7XG4gIHZhciBtYXhZID0gTWF0aC5tYXguYXBwbHkobnVsbCwgeXMpO1xuICByZXR1cm4gY3JlYXRlT3JVcGRhdGUobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgb3B0X2V4dGVudCk7XG59XG5cblxuLyoqXG4gKiBSZXR1cm4gZXh0ZW50IGluY3JlYXNlZCBieSB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBUaGUgYW1vdW50IGJ5IHdoaWNoIHRoZSBleHRlbnQgc2hvdWxkIGJlIGJ1ZmZlcmVkLlxuICogQHBhcmFtIHtFeHRlbnQ9fSBvcHRfZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVmZmVyKGV4dGVudCwgdmFsdWUsIG9wdF9leHRlbnQpIHtcbiAgaWYgKG9wdF9leHRlbnQpIHtcbiAgICBvcHRfZXh0ZW50WzBdID0gZXh0ZW50WzBdIC0gdmFsdWU7XG4gICAgb3B0X2V4dGVudFsxXSA9IGV4dGVudFsxXSAtIHZhbHVlO1xuICAgIG9wdF9leHRlbnRbMl0gPSBleHRlbnRbMl0gKyB2YWx1ZTtcbiAgICBvcHRfZXh0ZW50WzNdID0gZXh0ZW50WzNdICsgdmFsdWU7XG4gICAgcmV0dXJuIG9wdF9leHRlbnQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIGV4dGVudFswXSAtIHZhbHVlLFxuICAgICAgZXh0ZW50WzFdIC0gdmFsdWUsXG4gICAgICBleHRlbnRbMl0gKyB2YWx1ZSxcbiAgICAgIGV4dGVudFszXSArIHZhbHVlXG4gICAgXTtcbiAgfVxufVxuXG5cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mIGFuIGV4dGVudC5cbiAqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudCB0byBjbG9uZS5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IFRoZSBjbG9uZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGV4dGVudCwgb3B0X2V4dGVudCkge1xuICBpZiAob3B0X2V4dGVudCkge1xuICAgIG9wdF9leHRlbnRbMF0gPSBleHRlbnRbMF07XG4gICAgb3B0X2V4dGVudFsxXSA9IGV4dGVudFsxXTtcbiAgICBvcHRfZXh0ZW50WzJdID0gZXh0ZW50WzJdO1xuICAgIG9wdF9leHRlbnRbM10gPSBleHRlbnRbM107XG4gICAgcmV0dXJuIG9wdF9leHRlbnQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGV4dGVudC5zbGljZSgpO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7bnVtYmVyfSBDbG9zZXN0IHNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFkoZXh0ZW50LCB4LCB5KSB7XG4gIHZhciBkeCwgZHk7XG4gIGlmICh4IDwgZXh0ZW50WzBdKSB7XG4gICAgZHggPSBleHRlbnRbMF0gLSB4O1xuICB9IGVsc2UgaWYgKGV4dGVudFsyXSA8IHgpIHtcbiAgICBkeCA9IHggLSBleHRlbnRbMl07XG4gIH0gZWxzZSB7XG4gICAgZHggPSAwO1xuICB9XG4gIGlmICh5IDwgZXh0ZW50WzFdKSB7XG4gICAgZHkgPSBleHRlbnRbMV0gLSB5O1xuICB9IGVsc2UgaWYgKGV4dGVudFszXSA8IHkpIHtcbiAgICBkeSA9IHkgLSBleHRlbnRbM107XG4gIH0gZWxzZSB7XG4gICAgZHkgPSAwO1xuICB9XG4gIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cblxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBwYXNzZWQgY29vcmRpbmF0ZSBpcyBjb250YWluZWQgb3Igb24gdGhlIGVkZ2Ugb2YgdGhlIGV4dGVudC5cbiAqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBjb29yZGluYXRlIGlzIGNvbnRhaW5lZCBpbiB0aGUgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnNDb29yZGluYXRlKGV4dGVudCwgY29vcmRpbmF0ZSkge1xuICByZXR1cm4gY29udGFpbnNYWShleHRlbnQsIGNvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0pO1xufVxuXG5cbi8qKlxuICogQ2hlY2sgaWYgb25lIGV4dGVudCBjb250YWlucyBhbm90aGVyLlxuICpcbiAqIEFuIGV4dGVudCBpcyBkZWVtZWQgY29udGFpbmVkIGlmIGl0IGxpZXMgY29tcGxldGVseSB3aXRoaW4gdGhlIG90aGVyIGV4dGVudCxcbiAqIGluY2x1ZGluZyBpZiB0aGV5IHNoYXJlIG9uZSBvciBtb3JlIGVkZ2VzLlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgc2Vjb25kIGV4dGVudCBpcyBjb250YWluZWQgYnkgb3Igb24gdGhlIGVkZ2Ugb2YgdGhlXG4gKiAgICAgZmlyc3QuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250YWluc0V4dGVudChleHRlbnQxLCBleHRlbnQyKSB7XG4gIHJldHVybiBleHRlbnQxWzBdIDw9IGV4dGVudDJbMF0gJiYgZXh0ZW50MlsyXSA8PSBleHRlbnQxWzJdICYmXG4gICAgICBleHRlbnQxWzFdIDw9IGV4dGVudDJbMV0gJiYgZXh0ZW50MlszXSA8PSBleHRlbnQxWzNdO1xufVxuXG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIHBhc3NlZCBjb29yZGluYXRlIGlzIGNvbnRhaW5lZCBvciBvbiB0aGUgZWRnZSBvZiB0aGUgZXh0ZW50LlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHggWCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWSBjb29yZGluYXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHgsIHkgdmFsdWVzIGFyZSBjb250YWluZWQgaW4gdGhlIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zWFkoZXh0ZW50LCB4LCB5KSB7XG4gIHJldHVybiBleHRlbnRbMF0gPD0geCAmJiB4IDw9IGV4dGVudFsyXSAmJiBleHRlbnRbMV0gPD0geSAmJiB5IDw9IGV4dGVudFszXTtcbn1cblxuXG4vKipcbiAqIEdldCB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gYSBjb29yZGluYXRlIGFuZCBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHJldHVybiB7UmVsYXRpb25zaGlwfSBUaGUgcmVsYXRpb25zaGlwIChiaXR3aXNlIGNvbXBhcmUgd2l0aFxuICogICAgIGltcG9ydChcIi4vZXh0ZW50L1JlbGF0aW9uc2hpcC5qc1wiKS5SZWxhdGlvbnNoaXApLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29vcmRpbmF0ZVJlbGF0aW9uc2hpcChleHRlbnQsIGNvb3JkaW5hdGUpIHtcbiAgdmFyIG1pblggPSBleHRlbnRbMF07XG4gIHZhciBtaW5ZID0gZXh0ZW50WzFdO1xuICB2YXIgbWF4WCA9IGV4dGVudFsyXTtcbiAgdmFyIG1heFkgPSBleHRlbnRbM107XG4gIHZhciB4ID0gY29vcmRpbmF0ZVswXTtcbiAgdmFyIHkgPSBjb29yZGluYXRlWzFdO1xuICB2YXIgcmVsYXRpb25zaGlwID0gUmVsYXRpb25zaGlwLlVOS05PV047XG4gIGlmICh4IDwgbWluWCkge1xuICAgIHJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcCB8IFJlbGF0aW9uc2hpcC5MRUZUO1xuICB9IGVsc2UgaWYgKHggPiBtYXhYKSB7XG4gICAgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwIHwgUmVsYXRpb25zaGlwLlJJR0hUO1xuICB9XG4gIGlmICh5IDwgbWluWSkge1xuICAgIHJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcCB8IFJlbGF0aW9uc2hpcC5CRUxPVztcbiAgfSBlbHNlIGlmICh5ID4gbWF4WSkge1xuICAgIHJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcCB8IFJlbGF0aW9uc2hpcC5BQk9WRTtcbiAgfVxuICBpZiAocmVsYXRpb25zaGlwID09PSBSZWxhdGlvbnNoaXAuVU5LTk9XTikge1xuICAgIHJlbGF0aW9uc2hpcCA9IFJlbGF0aW9uc2hpcC5JTlRFUlNFQ1RJTkc7XG4gIH1cbiAgcmV0dXJuIHJlbGF0aW9uc2hpcDtcbn1cblxuXG4vKipcbiAqIENyZWF0ZSBhbiBlbXB0eSBleHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEVtcHR5IGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVtcHR5KCkge1xuICByZXR1cm4gW0luZmluaXR5LCBJbmZpbml0eSwgLUluZmluaXR5LCAtSW5maW5pdHldO1xufVxuXG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGV4dGVudCBvciB1cGRhdGUgdGhlIHByb3ZpZGVkIGV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5YIE1pbmltdW0gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5ZIE1pbmltdW0gWS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhYIE1heGltdW0gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhZIE1heGltdW0gWS5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBEZXN0aW5hdGlvbiBleHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlKG1pblgsIG1pblksIG1heFgsIG1heFksIG9wdF9leHRlbnQpIHtcbiAgaWYgKG9wdF9leHRlbnQpIHtcbiAgICBvcHRfZXh0ZW50WzBdID0gbWluWDtcbiAgICBvcHRfZXh0ZW50WzFdID0gbWluWTtcbiAgICBvcHRfZXh0ZW50WzJdID0gbWF4WDtcbiAgICBvcHRfZXh0ZW50WzNdID0gbWF4WTtcbiAgICByZXR1cm4gb3B0X2V4dGVudDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gW21pblgsIG1pblksIG1heFgsIG1heFldO1xuICB9XG59XG5cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZW1wdHkgZXh0ZW50IG9yIG1ha2UgdGhlIHByb3ZpZGVkIG9uZSBlbXB0eS5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRW1wdHkob3B0X2V4dGVudCkge1xuICByZXR1cm4gY3JlYXRlT3JVcGRhdGUoXG4gICAgSW5maW5pdHksIEluZmluaXR5LCAtSW5maW5pdHksIC1JbmZpbml0eSwgb3B0X2V4dGVudCk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlKGNvb3JkaW5hdGUsIG9wdF9leHRlbnQpIHtcbiAgdmFyIHggPSBjb29yZGluYXRlWzBdO1xuICB2YXIgeSA9IGNvb3JkaW5hdGVbMV07XG4gIHJldHVybiBjcmVhdGVPclVwZGF0ZSh4LCB5LCB4LCB5LCBvcHRfZXh0ZW50KTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGVzKGNvb3JkaW5hdGVzLCBvcHRfZXh0ZW50KSB7XG4gIHZhciBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZUVtcHR5KG9wdF9leHRlbnQpO1xuICByZXR1cm4gZXh0ZW5kQ29vcmRpbmF0ZXMoZXh0ZW50LCBjb29yZGluYXRlcyk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtFeHRlbnQ9fSBvcHRfZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVGcm9tRmxhdENvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgb3B0X2V4dGVudCkge1xuICB2YXIgZXh0ZW50ID0gY3JlYXRlT3JVcGRhdGVFbXB0eShvcHRfZXh0ZW50KTtcbiAgcmV0dXJuIGV4dGVuZEZsYXRDb29yZGluYXRlcyhleHRlbnQsIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSByaW5ncyBSaW5ncy5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRnJvbVJpbmdzKHJpbmdzLCBvcHRfZXh0ZW50KSB7XG4gIHZhciBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZUVtcHR5KG9wdF9leHRlbnQpO1xuICByZXR1cm4gZXh0ZW5kUmluZ3MoZXh0ZW50LCByaW5ncyk7XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdHdvIGV4dGVudHMgYXJlIGVxdWl2YWxlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHR3byBleHRlbnRzIGFyZSBlcXVpdmFsZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgcmV0dXJuIGV4dGVudDFbMF0gPT0gZXh0ZW50MlswXSAmJiBleHRlbnQxWzJdID09IGV4dGVudDJbMl0gJiZcbiAgICAgIGV4dGVudDFbMV0gPT0gZXh0ZW50MlsxXSAmJiBleHRlbnQxWzNdID09IGV4dGVudDJbM107XG59XG5cblxuLyoqXG4gKiBNb2RpZnkgYW4gZXh0ZW50IHRvIGluY2x1ZGUgYW5vdGhlciBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBUaGUgZXh0ZW50IHRvIGJlIG1vZGlmaWVkLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgVGhlIGV4dGVudCB0aGF0IHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIGZpcnN0LlxuICogQHJldHVybiB7RXh0ZW50fSBBIHJlZmVyZW5jZSB0byB0aGUgZmlyc3QgKGV4dGVuZGVkKSBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQoZXh0ZW50MSwgZXh0ZW50Mikge1xuICBpZiAoZXh0ZW50MlswXSA8IGV4dGVudDFbMF0pIHtcbiAgICBleHRlbnQxWzBdID0gZXh0ZW50MlswXTtcbiAgfVxuICBpZiAoZXh0ZW50MlsyXSA+IGV4dGVudDFbMl0pIHtcbiAgICBleHRlbnQxWzJdID0gZXh0ZW50MlsyXTtcbiAgfVxuICBpZiAoZXh0ZW50MlsxXSA8IGV4dGVudDFbMV0pIHtcbiAgICBleHRlbnQxWzFdID0gZXh0ZW50MlsxXTtcbiAgfVxuICBpZiAoZXh0ZW50MlszXSA+IGV4dGVudDFbM10pIHtcbiAgICBleHRlbnQxWzNdID0gZXh0ZW50MlszXTtcbiAgfVxuICByZXR1cm4gZXh0ZW50MTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIGNvb3JkaW5hdGUpIHtcbiAgaWYgKGNvb3JkaW5hdGVbMF0gPCBleHRlbnRbMF0pIHtcbiAgICBleHRlbnRbMF0gPSBjb29yZGluYXRlWzBdO1xuICB9XG4gIGlmIChjb29yZGluYXRlWzBdID4gZXh0ZW50WzJdKSB7XG4gICAgZXh0ZW50WzJdID0gY29vcmRpbmF0ZVswXTtcbiAgfVxuICBpZiAoY29vcmRpbmF0ZVsxXSA8IGV4dGVudFsxXSkge1xuICAgIGV4dGVudFsxXSA9IGNvb3JkaW5hdGVbMV07XG4gIH1cbiAgaWYgKGNvb3JkaW5hdGVbMV0gPiBleHRlbnRbM10pIHtcbiAgICBleHRlbnRbM10gPSBjb29yZGluYXRlWzFdO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kQ29vcmRpbmF0ZXMoZXh0ZW50LCBjb29yZGluYXRlcykge1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIGNvb3JkaW5hdGVzW2ldKTtcbiAgfVxuICByZXR1cm4gZXh0ZW50O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRGbGF0Q29vcmRpbmF0ZXMoZXh0ZW50LCBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgIGV4dGVuZFhZKGV4dGVudCwgZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSk7XG4gIH1cbiAgcmV0dXJuIGV4dGVudDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSByaW5ncyBSaW5ncy5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kUmluZ3MoZXh0ZW50LCByaW5ncykge1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSByaW5ncy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgZXh0ZW5kQ29vcmRpbmF0ZXMoZXh0ZW50LCByaW5nc1tpXSk7XG4gIH1cbiAgcmV0dXJuIGV4dGVudDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRYWShleHRlbnQsIHgsIHkpIHtcbiAgZXh0ZW50WzBdID0gTWF0aC5taW4oZXh0ZW50WzBdLCB4KTtcbiAgZXh0ZW50WzFdID0gTWF0aC5taW4oZXh0ZW50WzFdLCB5KTtcbiAgZXh0ZW50WzJdID0gTWF0aC5tYXgoZXh0ZW50WzJdLCB4KTtcbiAgZXh0ZW50WzNdID0gTWF0aC5tYXgoZXh0ZW50WzNdLCB5KTtcbn1cblxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY2FsbHMgYGNhbGxiYWNrYCBmb3IgZWFjaCBjb3JuZXIgb2YgdGhlIGV4dGVudC4gSWYgdGhlXG4gKiBjYWxsYmFjayByZXR1cm5zIGEgdHJ1dGh5IHZhbHVlIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRoYXQgdmFsdWVcbiAqIGltbWVkaWF0ZWx5LiBPdGhlcndpc2UgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOlQsIGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogU30gY2FsbGJhY2sgQ2FsbGJhY2suXG4gKiBAcGFyYW0ge1Q9fSBvcHRfdGhpcyBWYWx1ZSB0byB1c2UgYXMgYHRoaXNgIHdoZW4gZXhlY3V0aW5nIGBjYWxsYmFja2AuXG4gKiBAcmV0dXJuIHtTfGJvb2xlYW59IFZhbHVlLlxuICogQHRlbXBsYXRlIFMsIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvckVhY2hDb3JuZXIoZXh0ZW50LCBjYWxsYmFjaywgb3B0X3RoaXMpIHtcbiAgdmFyIHZhbDtcbiAgdmFsID0gY2FsbGJhY2suY2FsbChvcHRfdGhpcywgZ2V0Qm90dG9tTGVmdChleHRlbnQpKTtcbiAgaWYgKHZhbCkge1xuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgdmFsID0gY2FsbGJhY2suY2FsbChvcHRfdGhpcywgZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KSk7XG4gIGlmICh2YWwpIHtcbiAgICByZXR1cm4gdmFsO1xuICB9XG4gIHZhbCA9IGNhbGxiYWNrLmNhbGwob3B0X3RoaXMsIGdldFRvcFJpZ2h0KGV4dGVudCkpO1xuICBpZiAodmFsKSB7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuICB2YWwgPSBjYWxsYmFjay5jYWxsKG9wdF90aGlzLCBnZXRUb3BMZWZ0KGV4dGVudCkpO1xuICBpZiAodmFsKSB7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cblxuLyoqXG4gKiBHZXQgdGhlIHNpemUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcmVhKGV4dGVudCkge1xuICB2YXIgYXJlYSA9IDA7XG4gIGlmICghaXNFbXB0eShleHRlbnQpKSB7XG4gICAgYXJlYSA9IGdldFdpZHRoKGV4dGVudCkgKiBnZXRIZWlnaHQoZXh0ZW50KTtcbiAgfVxuICByZXR1cm4gYXJlYTtcbn1cblxuXG4vKipcbiAqIEdldCB0aGUgYm90dG9tIGxlZnQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBCb3R0b20gbGVmdCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm90dG9tTGVmdChleHRlbnQpIHtcbiAgcmV0dXJuIFtleHRlbnRbMF0sIGV4dGVudFsxXV07XG59XG5cblxuLyoqXG4gKiBHZXQgdGhlIGJvdHRvbSByaWdodCBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IEJvdHRvbSByaWdodCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KSB7XG4gIHJldHVybiBbZXh0ZW50WzJdLCBleHRlbnRbMV1dO1xufVxuXG5cbi8qKlxuICogR2V0IHRoZSBjZW50ZXIgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDZW50ZXIuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDZW50ZXIoZXh0ZW50KSB7XG4gIHJldHVybiBbKGV4dGVudFswXSArIGV4dGVudFsyXSkgLyAyLCAoZXh0ZW50WzFdICsgZXh0ZW50WzNdKSAvIDJdO1xufVxuXG5cbi8qKlxuICogR2V0IGEgY29ybmVyIGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0Nvcm5lcn0gY29ybmVyIENvcm5lci5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb3JuZXIgY29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvcm5lcihleHRlbnQsIGNvcm5lcikge1xuICB2YXIgY29vcmRpbmF0ZTtcbiAgaWYgKGNvcm5lciA9PT0gQ29ybmVyLkJPVFRPTV9MRUZUKSB7XG4gICAgY29vcmRpbmF0ZSA9IGdldEJvdHRvbUxlZnQoZXh0ZW50KTtcbiAgfSBlbHNlIGlmIChjb3JuZXIgPT09IENvcm5lci5CT1RUT01fUklHSFQpIHtcbiAgICBjb29yZGluYXRlID0gZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KTtcbiAgfSBlbHNlIGlmIChjb3JuZXIgPT09IENvcm5lci5UT1BfTEVGVCkge1xuICAgIGNvb3JkaW5hdGUgPSBnZXRUb3BMZWZ0KGV4dGVudCk7XG4gIH0gZWxzZSBpZiAoY29ybmVyID09PSBDb3JuZXIuVE9QX1JJR0hUKSB7XG4gICAgY29vcmRpbmF0ZSA9IGdldFRvcFJpZ2h0KGV4dGVudCk7XG4gIH0gZWxzZSB7XG4gICAgYXNzZXJ0KGZhbHNlLCAxMyk7IC8vIEludmFsaWQgY29ybmVyXG4gIH1cbiAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7bnVtYmVyfSBFbmxhcmdlZCBhcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW5sYXJnZWRBcmVhKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgdmFyIG1pblggPSBNYXRoLm1pbihleHRlbnQxWzBdLCBleHRlbnQyWzBdKTtcbiAgdmFyIG1pblkgPSBNYXRoLm1pbihleHRlbnQxWzFdLCBleHRlbnQyWzFdKTtcbiAgdmFyIG1heFggPSBNYXRoLm1heChleHRlbnQxWzJdLCBleHRlbnQyWzJdKTtcbiAgdmFyIG1heFkgPSBNYXRoLm1heChleHRlbnQxWzNdLCBleHRlbnQyWzNdKTtcbiAgcmV0dXJuIChtYXhYIC0gbWluWCkgKiAobWF4WSAtIG1pblkpO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFNpemUuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JWaWV3QW5kU2l6ZShjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplLCBvcHRfZXh0ZW50KSB7XG4gIHZhciBkeCA9IHJlc29sdXRpb24gKiBzaXplWzBdIC8gMjtcbiAgdmFyIGR5ID0gcmVzb2x1dGlvbiAqIHNpemVbMV0gLyAyO1xuICB2YXIgY29zUm90YXRpb24gPSBNYXRoLmNvcyhyb3RhdGlvbik7XG4gIHZhciBzaW5Sb3RhdGlvbiA9IE1hdGguc2luKHJvdGF0aW9uKTtcbiAgdmFyIHhDb3MgPSBkeCAqIGNvc1JvdGF0aW9uO1xuICB2YXIgeFNpbiA9IGR4ICogc2luUm90YXRpb247XG4gIHZhciB5Q29zID0gZHkgKiBjb3NSb3RhdGlvbjtcbiAgdmFyIHlTaW4gPSBkeSAqIHNpblJvdGF0aW9uO1xuICB2YXIgeCA9IGNlbnRlclswXTtcbiAgdmFyIHkgPSBjZW50ZXJbMV07XG4gIHZhciB4MCA9IHggLSB4Q29zICsgeVNpbjtcbiAgdmFyIHgxID0geCAtIHhDb3MgLSB5U2luO1xuICB2YXIgeDIgPSB4ICsgeENvcyAtIHlTaW47XG4gIHZhciB4MyA9IHggKyB4Q29zICsgeVNpbjtcbiAgdmFyIHkwID0geSAtIHhTaW4gLSB5Q29zO1xuICB2YXIgeTEgPSB5IC0geFNpbiArIHlDb3M7XG4gIHZhciB5MiA9IHkgKyB4U2luICsgeUNvcztcbiAgdmFyIHkzID0geSArIHhTaW4gLSB5Q29zO1xuICByZXR1cm4gY3JlYXRlT3JVcGRhdGUoXG4gICAgTWF0aC5taW4oeDAsIHgxLCB4MiwgeDMpLCBNYXRoLm1pbih5MCwgeTEsIHkyLCB5MyksXG4gICAgTWF0aC5tYXgoeDAsIHgxLCB4MiwgeDMpLCBNYXRoLm1heCh5MCwgeTEsIHkyLCB5MyksXG4gICAgb3B0X2V4dGVudCk7XG59XG5cblxuLyoqXG4gKiBHZXQgdGhlIGhlaWdodCBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gSGVpZ2h0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGVpZ2h0KGV4dGVudCkge1xuICByZXR1cm4gZXh0ZW50WzNdIC0gZXh0ZW50WzFdO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEByZXR1cm4ge251bWJlcn0gSW50ZXJzZWN0aW9uIGFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcnNlY3Rpb25BcmVhKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgdmFyIGludGVyc2VjdGlvbiA9IGdldEludGVyc2VjdGlvbihleHRlbnQxLCBleHRlbnQyKTtcbiAgcmV0dXJuIGdldEFyZWEoaW50ZXJzZWN0aW9uKTtcbn1cblxuXG4vKipcbiAqIEdldCB0aGUgaW50ZXJzZWN0aW9uIG9mIHR3byBleHRlbnRzLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBPcHRpb25hbCBleHRlbnQgdG8gcG9wdWxhdGUgd2l0aCBpbnRlcnNlY3Rpb24uXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEludGVyc2VjdGluZyBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcnNlY3Rpb24oZXh0ZW50MSwgZXh0ZW50Miwgb3B0X2V4dGVudCkge1xuICB2YXIgaW50ZXJzZWN0aW9uID0gb3B0X2V4dGVudCA/IG9wdF9leHRlbnQgOiBjcmVhdGVFbXB0eSgpO1xuICBpZiAoaW50ZXJzZWN0cyhleHRlbnQxLCBleHRlbnQyKSkge1xuICAgIGlmIChleHRlbnQxWzBdID4gZXh0ZW50MlswXSkge1xuICAgICAgaW50ZXJzZWN0aW9uWzBdID0gZXh0ZW50MVswXTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW50ZXJzZWN0aW9uWzBdID0gZXh0ZW50MlswXTtcbiAgICB9XG4gICAgaWYgKGV4dGVudDFbMV0gPiBleHRlbnQyWzFdKSB7XG4gICAgICBpbnRlcnNlY3Rpb25bMV0gPSBleHRlbnQxWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnRlcnNlY3Rpb25bMV0gPSBleHRlbnQyWzFdO1xuICAgIH1cbiAgICBpZiAoZXh0ZW50MVsyXSA8IGV4dGVudDJbMl0pIHtcbiAgICAgIGludGVyc2VjdGlvblsyXSA9IGV4dGVudDFbMl07XG4gICAgfSBlbHNlIHtcbiAgICAgIGludGVyc2VjdGlvblsyXSA9IGV4dGVudDJbMl07XG4gICAgfVxuICAgIGlmIChleHRlbnQxWzNdIDwgZXh0ZW50MlszXSkge1xuICAgICAgaW50ZXJzZWN0aW9uWzNdID0gZXh0ZW50MVszXTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW50ZXJzZWN0aW9uWzNdID0gZXh0ZW50MlszXTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY3JlYXRlT3JVcGRhdGVFbXB0eShpbnRlcnNlY3Rpb24pO1xuICB9XG4gIHJldHVybiBpbnRlcnNlY3Rpb247XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWFyZ2luLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWFyZ2luKGV4dGVudCkge1xuICByZXR1cm4gZ2V0V2lkdGgoZXh0ZW50KSArIGdldEhlaWdodChleHRlbnQpO1xufVxuXG5cbi8qKlxuICogR2V0IHRoZSBzaXplICh3aWR0aCwgaGVpZ2h0KSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gVGhlIGV4dGVudCBzaXplLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2l6ZShleHRlbnQpIHtcbiAgcmV0dXJuIFtleHRlbnRbMl0gLSBleHRlbnRbMF0sIGV4dGVudFszXSAtIGV4dGVudFsxXV07XG59XG5cblxuLyoqXG4gKiBHZXQgdGhlIHRvcCBsZWZ0IGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVG9wIGxlZnQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvcExlZnQoZXh0ZW50KSB7XG4gIHJldHVybiBbZXh0ZW50WzBdLCBleHRlbnRbM11dO1xufVxuXG5cbi8qKlxuICogR2V0IHRoZSB0b3AgcmlnaHQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUb3AgcmlnaHQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvcFJpZ2h0KGV4dGVudCkge1xuICByZXR1cm4gW2V4dGVudFsyXSwgZXh0ZW50WzNdXTtcbn1cblxuXG4vKipcbiAqIEdldCB0aGUgd2lkdGggb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFdpZHRoLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2lkdGgoZXh0ZW50KSB7XG4gIHJldHVybiBleHRlbnRbMl0gLSBleHRlbnRbMF07XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgb25lIGV4dGVudCBpbnRlcnNlY3RzIGFub3RoZXIuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gZXh0ZW50cyBpbnRlcnNlY3QuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgcmV0dXJuIGV4dGVudDFbMF0gPD0gZXh0ZW50MlsyXSAmJlxuICAgICAgZXh0ZW50MVsyXSA+PSBleHRlbnQyWzBdICYmXG4gICAgICBleHRlbnQxWzFdIDw9IGV4dGVudDJbM10gJiZcbiAgICAgIGV4dGVudDFbM10gPj0gZXh0ZW50MlsxXTtcbn1cblxuXG4vKipcbiAqIERldGVybWluZSBpZiBhbiBleHRlbnQgaXMgZW1wdHkuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGVtcHR5LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eShleHRlbnQpIHtcbiAgcmV0dXJuIGV4dGVudFsyXSA8IGV4dGVudFswXSB8fCBleHRlbnRbM10gPCBleHRlbnRbMV07XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJldHVybk9yVXBkYXRlKGV4dGVudCwgb3B0X2V4dGVudCkge1xuICBpZiAob3B0X2V4dGVudCkge1xuICAgIG9wdF9leHRlbnRbMF0gPSBleHRlbnRbMF07XG4gICAgb3B0X2V4dGVudFsxXSA9IGV4dGVudFsxXTtcbiAgICBvcHRfZXh0ZW50WzJdID0gZXh0ZW50WzJdO1xuICAgIG9wdF9leHRlbnRbM10gPSBleHRlbnRbM107XG4gICAgcmV0dXJuIG9wdF9leHRlbnQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGV4dGVudDtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZUZyb21DZW50ZXIoZXh0ZW50LCB2YWx1ZSkge1xuICB2YXIgZGVsdGFYID0gKChleHRlbnRbMl0gLSBleHRlbnRbMF0pIC8gMikgKiAodmFsdWUgLSAxKTtcbiAgdmFyIGRlbHRhWSA9ICgoZXh0ZW50WzNdIC0gZXh0ZW50WzFdKSAvIDIpICogKHZhbHVlIC0gMSk7XG4gIGV4dGVudFswXSAtPSBkZWx0YVg7XG4gIGV4dGVudFsyXSArPSBkZWx0YVg7XG4gIGV4dGVudFsxXSAtPSBkZWx0YVk7XG4gIGV4dGVudFszXSArPSBkZWx0YVk7XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdGhlIHNlZ21lbnQgYmV0d2VlbiB0d28gY29vcmRpbmF0ZXMgaW50ZXJzZWN0cyAoY3Jvc3NlcyxcbiAqIHRvdWNoZXMsIG9yIGlzIGNvbnRhaW5lZCBieSkgdGhlIHByb3ZpZGVkIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHN0YXJ0IFNlZ21lbnQgc3RhcnQgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGVuZCBTZWdtZW50IGVuZCBjb29yZGluYXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHNlZ21lbnQgaW50ZXJzZWN0cyB0aGUgZXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c1NlZ21lbnQoZXh0ZW50LCBzdGFydCwgZW5kKSB7XG4gIHZhciBpbnRlcnNlY3RzID0gZmFsc2U7XG4gIHZhciBzdGFydFJlbCA9IGNvb3JkaW5hdGVSZWxhdGlvbnNoaXAoZXh0ZW50LCBzdGFydCk7XG4gIHZhciBlbmRSZWwgPSBjb29yZGluYXRlUmVsYXRpb25zaGlwKGV4dGVudCwgZW5kKTtcbiAgaWYgKHN0YXJ0UmVsID09PSBSZWxhdGlvbnNoaXAuSU5URVJTRUNUSU5HIHx8XG4gICAgICBlbmRSZWwgPT09IFJlbGF0aW9uc2hpcC5JTlRFUlNFQ1RJTkcpIHtcbiAgICBpbnRlcnNlY3RzID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbWluWCA9IGV4dGVudFswXTtcbiAgICB2YXIgbWluWSA9IGV4dGVudFsxXTtcbiAgICB2YXIgbWF4WCA9IGV4dGVudFsyXTtcbiAgICB2YXIgbWF4WSA9IGV4dGVudFszXTtcbiAgICB2YXIgc3RhcnRYID0gc3RhcnRbMF07XG4gICAgdmFyIHN0YXJ0WSA9IHN0YXJ0WzFdO1xuICAgIHZhciBlbmRYID0gZW5kWzBdO1xuICAgIHZhciBlbmRZID0gZW5kWzFdO1xuICAgIHZhciBzbG9wZSA9IChlbmRZIC0gc3RhcnRZKSAvIChlbmRYIC0gc3RhcnRYKTtcbiAgICB2YXIgeCwgeTtcbiAgICBpZiAoISEoZW5kUmVsICYgUmVsYXRpb25zaGlwLkFCT1ZFKSAmJlxuICAgICAgICAhKHN0YXJ0UmVsICYgUmVsYXRpb25zaGlwLkFCT1ZFKSkge1xuICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyB0b3BcbiAgICAgIHggPSBlbmRYIC0gKChlbmRZIC0gbWF4WSkgLyBzbG9wZSk7XG4gICAgICBpbnRlcnNlY3RzID0geCA+PSBtaW5YICYmIHggPD0gbWF4WDtcbiAgICB9XG4gICAgaWYgKCFpbnRlcnNlY3RzICYmICEhKGVuZFJlbCAmIFJlbGF0aW9uc2hpcC5SSUdIVCkgJiZcbiAgICAgICAgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5SSUdIVCkpIHtcbiAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgcmlnaHRcbiAgICAgIHkgPSBlbmRZIC0gKChlbmRYIC0gbWF4WCkgKiBzbG9wZSk7XG4gICAgICBpbnRlcnNlY3RzID0geSA+PSBtaW5ZICYmIHkgPD0gbWF4WTtcbiAgICB9XG4gICAgaWYgKCFpbnRlcnNlY3RzICYmICEhKGVuZFJlbCAmIFJlbGF0aW9uc2hpcC5CRUxPVykgJiZcbiAgICAgICAgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5CRUxPVykpIHtcbiAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgYm90dG9tXG4gICAgICB4ID0gZW5kWCAtICgoZW5kWSAtIG1pblkpIC8gc2xvcGUpO1xuICAgICAgaW50ZXJzZWN0cyA9IHggPj0gbWluWCAmJiB4IDw9IG1heFg7XG4gICAgfVxuICAgIGlmICghaW50ZXJzZWN0cyAmJiAhIShlbmRSZWwgJiBSZWxhdGlvbnNoaXAuTEVGVCkgJiZcbiAgICAgICAgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5MRUZUKSkge1xuICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyBsZWZ0XG4gICAgICB5ID0gZW5kWSAtICgoZW5kWCAtIG1pblgpICogc2xvcGUpO1xuICAgICAgaW50ZXJzZWN0cyA9IHkgPj0gbWluWSAmJiB5IDw9IG1heFk7XG4gICAgfVxuXG4gIH1cbiAgcmV0dXJuIGludGVyc2VjdHM7XG59XG5cblxuLyoqXG4gKiBBcHBseSBhIHRyYW5zZm9ybSBmdW5jdGlvbiB0byB0aGUgZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gdHJhbnNmb3JtRm4gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICogQ2FsbGVkIHdpdGggYFttaW5YLCBtaW5ZLCBtYXhYLCBtYXhZXWAgZXh0ZW50IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtFeHRlbnQ9fSBvcHRfZXh0ZW50IERlc3RpbmF0aW9uIGV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlUcmFuc2Zvcm0oZXh0ZW50LCB0cmFuc2Zvcm1Gbiwgb3B0X2V4dGVudCkge1xuICB2YXIgY29vcmRpbmF0ZXMgPSBbXG4gICAgZXh0ZW50WzBdLCBleHRlbnRbMV0sXG4gICAgZXh0ZW50WzBdLCBleHRlbnRbM10sXG4gICAgZXh0ZW50WzJdLCBleHRlbnRbMV0sXG4gICAgZXh0ZW50WzJdLCBleHRlbnRbM11cbiAgXTtcbiAgdHJhbnNmb3JtRm4oY29vcmRpbmF0ZXMsIGNvb3JkaW5hdGVzLCAyKTtcbiAgdmFyIHhzID0gW2Nvb3JkaW5hdGVzWzBdLCBjb29yZGluYXRlc1syXSwgY29vcmRpbmF0ZXNbNF0sIGNvb3JkaW5hdGVzWzZdXTtcbiAgdmFyIHlzID0gW2Nvb3JkaW5hdGVzWzFdLCBjb29yZGluYXRlc1szXSwgY29vcmRpbmF0ZXNbNV0sIGNvb3JkaW5hdGVzWzddXTtcbiAgcmV0dXJuIF9ib3VuZGluZ0V4dGVudFhZcyh4cywgeXMsIG9wdF9leHRlbnQpO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHRlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vR2VvbWV0cnlUeXBlXG4gKi9cblxuLyoqXG4gKiBUaGUgZ2VvbWV0cnkgdHlwZS4gT25lIG9mIGAnUG9pbnQnYCwgYCdMaW5lU3RyaW5nJ2AsIGAnTGluZWFyUmluZydgLFxuICogYCdQb2x5Z29uJ2AsIGAnTXVsdGlQb2ludCdgLCBgJ011bHRpTGluZVN0cmluZydgLCBgJ011bHRpUG9seWdvbidgLFxuICogYCdHZW9tZXRyeUNvbGxlY3Rpb24nYCwgYCdDaXJjbGUnYC5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgUE9JTlQ6ICdQb2ludCcsXG4gIExJTkVfU1RSSU5HOiAnTGluZVN0cmluZycsXG4gIExJTkVBUl9SSU5HOiAnTGluZWFyUmluZycsXG4gIFBPTFlHT046ICdQb2x5Z29uJyxcbiAgTVVMVElfUE9JTlQ6ICdNdWx0aVBvaW50JyxcbiAgTVVMVElfTElORV9TVFJJTkc6ICdNdWx0aUxpbmVTdHJpbmcnLFxuICBNVUxUSV9QT0xZR09OOiAnTXVsdGlQb2x5Z29uJyxcbiAgR0VPTUVUUllfQ09MTEVDVElPTjogJ0dlb21ldHJ5Q29sbGVjdGlvbicsXG4gIENJUkNMRTogJ0NpcmNsZSdcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdlb21ldHJ5VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9HZW9tZXRyeUxheW91dFxuICovXG5cbi8qKlxuICogVGhlIGNvb3JkaW5hdGUgbGF5b3V0IGZvciBnZW9tZXRyaWVzLCBpbmRpY2F0aW5nIHdoZXRoZXIgYSAzcmQgb3IgNHRoIHogKCdaJylcbiAqIG9yIG1lYXN1cmUgKCdNJykgY29vcmRpbmF0ZSBpcyBhdmFpbGFibGUuIFN1cHBvcnRlZCB2YWx1ZXMgYXJlIGAnWFknYCxcbiAqIGAnWFlaJ2AsIGAnWFlNJ2AsIGAnWFlaTSdgLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBYWTogJ1hZJyxcbiAgWFlaOiAnWFlaJyxcbiAgWFlNOiAnWFlNJyxcbiAgWFlaTTogJ1hZWk0nXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1HZW9tZXRyeUxheW91dC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3RyYW5zZm9ybVxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X2Rlc3QgRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1lZCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybTJEKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgdHJhbnNmb3JtLCBvcHRfZGVzdCkge1xuICB2YXIgZGVzdCA9IG9wdF9kZXN0ID8gb3B0X2Rlc3QgOiBbXTtcbiAgdmFyIGkgPSAwO1xuICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgIHZhciB4ID0gZmxhdENvb3JkaW5hdGVzW2pdO1xuICAgIHZhciB5ID0gZmxhdENvb3JkaW5hdGVzW2ogKyAxXTtcbiAgICBkZXN0W2krK10gPSB0cmFuc2Zvcm1bMF0gKiB4ICsgdHJhbnNmb3JtWzJdICogeSArIHRyYW5zZm9ybVs0XTtcbiAgICBkZXN0W2krK10gPSB0cmFuc2Zvcm1bMV0gKiB4ICsgdHJhbnNmb3JtWzNdICogeSArIHRyYW5zZm9ybVs1XTtcbiAgfVxuICBpZiAob3B0X2Rlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgIGRlc3QubGVuZ3RoID0gaTtcbiAgfVxuICByZXR1cm4gZGVzdDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgQW5nbGUuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGFuY2hvciBSb3RhdGlvbiBhbmNob3IgcG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfZGVzdCBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgYW5nbGUsIGFuY2hvciwgb3B0X2Rlc3QpIHtcbiAgdmFyIGRlc3QgPSBvcHRfZGVzdCA/IG9wdF9kZXN0IDogW107XG4gIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gIHZhciBzaW4gPSBNYXRoLnNpbihhbmdsZSk7XG4gIHZhciBhbmNob3JYID0gYW5jaG9yWzBdO1xuICB2YXIgYW5jaG9yWSA9IGFuY2hvclsxXTtcbiAgdmFyIGkgPSAwO1xuICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgIHZhciBkZWx0YVggPSBmbGF0Q29vcmRpbmF0ZXNbal0gLSBhbmNob3JYO1xuICAgIHZhciBkZWx0YVkgPSBmbGF0Q29vcmRpbmF0ZXNbaiArIDFdIC0gYW5jaG9yWTtcbiAgICBkZXN0W2krK10gPSBhbmNob3JYICsgZGVsdGFYICogY29zIC0gZGVsdGFZICogc2luO1xuICAgIGRlc3RbaSsrXSA9IGFuY2hvclkgKyBkZWx0YVggKiBzaW4gKyBkZWx0YVkgKiBjb3M7XG4gICAgZm9yICh2YXIgayA9IGogKyAyOyBrIDwgaiArIHN0cmlkZTsgKytrKSB7XG4gICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNba107XG4gICAgfVxuICB9XG4gIGlmIChvcHRfZGVzdCAmJiBkZXN0Lmxlbmd0aCAhPSBpKSB7XG4gICAgZGVzdC5sZW5ndGggPSBpO1xuICB9XG4gIHJldHVybiBkZXN0O1xufVxuXG5cbi8qKlxuICogU2NhbGUgdGhlIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzeCBTY2FsZSBmYWN0b3IgaW4gdGhlIHgtZGlyZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciBpbiB0aGUgeS1kaXJlY3Rpb24uXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGFuY2hvciBTY2FsZSBhbmNob3IgcG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfZGVzdCBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzeCwgc3ksIGFuY2hvciwgb3B0X2Rlc3QpIHtcbiAgdmFyIGRlc3QgPSBvcHRfZGVzdCA/IG9wdF9kZXN0IDogW107XG4gIHZhciBhbmNob3JYID0gYW5jaG9yWzBdO1xuICB2YXIgYW5jaG9yWSA9IGFuY2hvclsxXTtcbiAgdmFyIGkgPSAwO1xuICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgIHZhciBkZWx0YVggPSBmbGF0Q29vcmRpbmF0ZXNbal0gLSBhbmNob3JYO1xuICAgIHZhciBkZWx0YVkgPSBmbGF0Q29vcmRpbmF0ZXNbaiArIDFdIC0gYW5jaG9yWTtcbiAgICBkZXN0W2krK10gPSBhbmNob3JYICsgc3ggKiBkZWx0YVg7XG4gICAgZGVzdFtpKytdID0gYW5jaG9yWSArIHN5ICogZGVsdGFZO1xuICAgIGZvciAodmFyIGsgPSBqICsgMjsgayA8IGogKyBzdHJpZGU7ICsraykge1xuICAgICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2tdO1xuICAgIH1cbiAgfVxuICBpZiAob3B0X2Rlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgIGRlc3QubGVuZ3RoID0gaTtcbiAgfVxuICByZXR1cm4gZGVzdDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsdGFYIERlbHRhIFguXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsdGFZIERlbHRhIFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfZGVzdCBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZGVsdGFYLCBkZWx0YVksIG9wdF9kZXN0KSB7XG4gIHZhciBkZXN0ID0gb3B0X2Rlc3QgPyBvcHRfZGVzdCA6IFtdO1xuICB2YXIgaSA9IDA7XG4gIGZvciAodmFyIGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2pdICsgZGVsdGFYO1xuICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1tqICsgMV0gKyBkZWx0YVk7XG4gICAgZm9yICh2YXIgayA9IGogKyAyOyBrIDwgaiArIHN0cmlkZTsgKytrKSB7XG4gICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNba107XG4gICAgfVxuICB9XG4gIGlmIChvcHRfZGVzdCAmJiBkZXN0Lmxlbmd0aCAhPSBpKSB7XG4gICAgZGVzdC5sZW5ndGggPSBpO1xuICB9XG4gIHJldHVybiBkZXN0O1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2Zvcm0uanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogTGF0aXR1ZGUvbG9uZ2l0dWRlIHNwaGVyaWNhbCBnZW9kZXN5IGZvcm11bGFlIHRha2VuIGZyb21cbiAqIGh0dHA6Ly93d3cubW92YWJsZS10eXBlLmNvLnVrL3NjcmlwdHMvbGF0bG9uZy5odG1sXG4gKiBMaWNlbnNlZCB1bmRlciBDQy1CWS0zLjAuXG4gKi9cblxuLyoqXG4gKiBAbW9kdWxlIG9sL3NwaGVyZVxuICovXG5pbXBvcnQge3RvUmFkaWFucywgdG9EZWdyZWVzfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcblxuXG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggb3B0aW9ucyBmb3IgdGhlIHtAbGluayBnZXRMZW5ndGh9IG9yIHtAbGluayBnZXRBcmVhfVxuICogZnVuY3Rpb25zLlxuICogQHR5cGVkZWYge09iamVjdH0gU3BoZXJlTWV0cmljT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uPSdFUFNHOjM4NTcnXVxuICogUHJvamVjdGlvbiBvZiB0aGUgIGdlb21ldHJ5LiAgQnkgZGVmYXVsdCwgdGhlIGdlb21ldHJ5IGlzIGFzc3VtZWQgdG8gYmUgaW5cbiAqIFdlYiBNZXJjYXRvci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmFkaXVzPTYzNzEwMDguOF0gU3BoZXJlIHJhZGl1cy4gIEJ5IGRlZmF1bHQsIHRoZSByYWRpdXMgb2YgdGhlXG4gKiBlYXJ0aCBpcyB1c2VkIChDbGFya2UgMTg2NiBBdXRoYWxpYyBTcGhlcmUpLlxuICovXG5cblxuLyoqXG4gKiBUaGUgbWVhbiBFYXJ0aCByYWRpdXMgKDEvMyAqICgyYSArIGIpKSBmb3IgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0VhcnRoX3JhZGl1cyNNZWFuX3JhZGl1c1xuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBERUZBVUxUX1JBRElVUyA9IDYzNzEwMDguODtcblxuXG4vKipcbiAqIEdldCB0aGUgZ3JlYXQgY2lyY2xlIGRpc3RhbmNlIChpbiBtZXRlcnMpIGJldHdlZW4gdHdvIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0FycmF5fSBjMSBTdGFydGluZyBjb29yZGluYXRlLlxuICogQHBhcmFtIHtBcnJheX0gYzIgRW5kaW5nIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9yYWRpdXMgVGhlIHNwaGVyZSByYWRpdXMgdG8gdXNlLiAgRGVmYXVsdHMgdG8gdGhlIEVhcnRoJ3NcbiAqICAgICBtZWFuIHJhZGl1cyB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgZ3JlYXQgY2lyY2xlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50cyAoaW4gbWV0ZXJzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERpc3RhbmNlKGMxLCBjMiwgb3B0X3JhZGl1cykge1xuICB2YXIgcmFkaXVzID0gb3B0X3JhZGl1cyB8fCBERUZBVUxUX1JBRElVUztcbiAgdmFyIGxhdDEgPSB0b1JhZGlhbnMoYzFbMV0pO1xuICB2YXIgbGF0MiA9IHRvUmFkaWFucyhjMlsxXSk7XG4gIHZhciBkZWx0YUxhdEJ5MiA9IChsYXQyIC0gbGF0MSkgLyAyO1xuICB2YXIgZGVsdGFMb25CeTIgPSB0b1JhZGlhbnMoYzJbMF0gLSBjMVswXSkgLyAyO1xuICB2YXIgYSA9IE1hdGguc2luKGRlbHRhTGF0QnkyKSAqIE1hdGguc2luKGRlbHRhTGF0QnkyKSArXG4gICAgICBNYXRoLnNpbihkZWx0YUxvbkJ5MikgKiBNYXRoLnNpbihkZWx0YUxvbkJ5MikgKlxuICAgICAgTWF0aC5jb3MobGF0MSkgKiBNYXRoLmNvcyhsYXQyKTtcbiAgcmV0dXJuIDIgKiByYWRpdXMgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEgLSBhKSk7XG59XG5cblxuLyoqXG4gKiBHZXQgdGhlIGN1bXVsYXRpdmUgZ3JlYXQgY2lyY2xlIGxlbmd0aCBvZiBsaW5lc3RyaW5nIGNvb3JkaW5hdGVzIChnZW9ncmFwaGljKS5cbiAqIEBwYXJhbSB7QXJyYXl9IGNvb3JkaW5hdGVzIExpbmVzdHJpbmcgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFRoZSBzcGhlcmUgcmFkaXVzIHRvIHVzZS5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGxlbmd0aCAoaW4gbWV0ZXJzKS5cbiAqL1xuZnVuY3Rpb24gZ2V0TGVuZ3RoSW50ZXJuYWwoY29vcmRpbmF0ZXMsIHJhZGl1cykge1xuICB2YXIgbGVuZ3RoID0gMDtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWkgLSAxOyArK2kpIHtcbiAgICBsZW5ndGggKz0gZ2V0RGlzdGFuY2UoY29vcmRpbmF0ZXNbaV0sIGNvb3JkaW5hdGVzW2kgKyAxXSwgcmFkaXVzKTtcbiAgfVxuICByZXR1cm4gbGVuZ3RoO1xufVxuXG5cbi8qKlxuICogR2V0IHRoZSBzcGhlcmljYWwgbGVuZ3RoIG9mIGEgZ2VvbWV0cnkuICBUaGlzIGxlbmd0aCBpcyB0aGUgc3VtIG9mIHRoZVxuICogZ3JlYXQgY2lyY2xlIGRpc3RhbmNlcyBiZXR3ZWVuIGNvb3JkaW5hdGVzLiAgRm9yIHBvbHlnb25zLCB0aGUgbGVuZ3RoIGlzXG4gKiB0aGUgc3VtIG9mIGFsbCByaW5ncy4gIEZvciBwb2ludHMsIHRoZSBsZW5ndGggaXMgemVyby4gIEZvciBtdWx0aS1wYXJ0XG4gKiBnZW9tZXRyaWVzLCB0aGUgbGVuZ3RoIGlzIHRoZSBzdW0gb2YgdGhlIGxlbmd0aCBvZiBlYWNoIHBhcnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBBIGdlb21ldHJ5LlxuICogQHBhcmFtIHtTcGhlcmVNZXRyaWNPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucyBmb3IgdGhlXG4gKiBsZW5ndGggY2FsY3VsYXRpb24uICBCeSBkZWZhdWx0LCBnZW9tZXRyaWVzIGFyZSBhc3N1bWVkIHRvIGJlIGluICdFUFNHOjM4NTcnLlxuICogWW91IGNhbiBjaGFuZ2UgdGhpcyBieSBwcm92aWRpbmcgYSBgcHJvamVjdGlvbmAgb3B0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgc3BoZXJpY2FsIGxlbmd0aCAoaW4gbWV0ZXJzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExlbmd0aChnZW9tZXRyeSwgb3B0X29wdGlvbnMpIHtcbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHJhZGl1cyA9IG9wdGlvbnMucmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICB2YXIgcHJvamVjdGlvbiA9IG9wdGlvbnMucHJvamVjdGlvbiB8fCAnRVBTRzozODU3JztcbiAgdmFyIHR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XG4gIGlmICh0eXBlICE9PSBHZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTikge1xuICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnkuY2xvbmUoKS50cmFuc2Zvcm0ocHJvamVjdGlvbiwgJ0VQU0c6NDMyNicpO1xuICB9XG4gIHZhciBsZW5ndGggPSAwO1xuICB2YXIgY29vcmRpbmF0ZXMsIGNvb3JkcywgaSwgaWksIGosIGpqO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9QT0lOVDoge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVBUl9SSU5HOiB7XG4gICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIGxlbmd0aCA9IGdldExlbmd0aEludGVybmFsKGNvb3JkaW5hdGVzLCByYWRpdXMpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HOlxuICAgIGNhc2UgR2VvbWV0cnlUeXBlLlBPTFlHT046IHtcbiAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGxlbmd0aCArPSBnZXRMZW5ndGhJbnRlcm5hbChjb29yZGluYXRlc1tpXSwgcmFkaXVzKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OOiB7XG4gICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBjb29yZHMgPSBjb29yZGluYXRlc1tpXTtcbiAgICAgICAgZm9yIChqID0gMCwgamogPSBjb29yZHMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgIGxlbmd0aCArPSBnZXRMZW5ndGhJbnRlcm5hbChjb29yZHNbal0sIHJhZGl1cyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIEdlb21ldHJ5VHlwZS5HRU9NRVRSWV9DT0xMRUNUSU9OOiB7XG4gICAgICB2YXIgZ2VvbWV0cmllcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL0dlb21ldHJ5Q29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldEdlb21ldHJpZXMoKTtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gZ2VvbWV0cmllcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGxlbmd0aCArPSBnZXRMZW5ndGgoZ2VvbWV0cmllc1tpXSwgb3B0X29wdGlvbnMpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZTogJyArIHR5cGUpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbGVuZ3RoO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgc3BoZXJpY2FsIGFyZWEgZm9yIGEgbGlzdCBvZiBjb29yZGluYXRlcy5cbiAqXG4gKiBbUmVmZXJlbmNlXShodHRwczovL3Rycy1uZXcuanBsLm5hc2EuZ292L2hhbmRsZS8yMDE0LzQwNDA5KVxuICogUm9iZXJ0LiBHLiBDaGFtYmVybGFpbiBhbmQgV2lsbGlhbSBILiBEdXF1ZXR0ZSwgXCJTb21lIEFsZ29yaXRobXMgZm9yXG4gKiBQb2x5Z29ucyBvbiBhIFNwaGVyZVwiLCBKUEwgUHVibGljYXRpb24gMDctMDMsIEpldCBQcm9wdWxzaW9uXG4gKiBMYWJvcmF0b3J5LCBQYXNhZGVuYSwgQ0EsIEp1bmUgMjAwN1xuICpcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBMaXN0IG9mIGNvb3JkaW5hdGVzIG9mIGEgbGluZWFyXG4gKiByaW5nLiBJZiB0aGUgcmluZyBpcyBvcmllbnRlZCBjbG9ja3dpc2UsIHRoZSBhcmVhIHdpbGwgYmUgcG9zaXRpdmUsXG4gKiBvdGhlcndpc2UgaXQgd2lsbCBiZSBuZWdhdGl2ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgVGhlIHNwaGVyZSByYWRpdXMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEgKGluIHNxdWFyZSBtZXRlcnMpLlxuICovXG5mdW5jdGlvbiBnZXRBcmVhSW50ZXJuYWwoY29vcmRpbmF0ZXMsIHJhZGl1cykge1xuICB2YXIgYXJlYSA9IDA7XG4gIHZhciBsZW4gPSBjb29yZGluYXRlcy5sZW5ndGg7XG4gIHZhciB4MSA9IGNvb3JkaW5hdGVzW2xlbiAtIDFdWzBdO1xuICB2YXIgeTEgPSBjb29yZGluYXRlc1tsZW4gLSAxXVsxXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciB4MiA9IGNvb3JkaW5hdGVzW2ldWzBdO1xuICAgIHZhciB5MiA9IGNvb3JkaW5hdGVzW2ldWzFdO1xuICAgIGFyZWEgKz0gdG9SYWRpYW5zKHgyIC0geDEpICpcbiAgICAgICAgKDIgKyBNYXRoLnNpbih0b1JhZGlhbnMoeTEpKSArXG4gICAgICAgIE1hdGguc2luKHRvUmFkaWFucyh5MikpKTtcbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gIH1cbiAgcmV0dXJuIGFyZWEgKiByYWRpdXMgKiByYWRpdXMgLyAyLjA7XG59XG5cblxuLyoqXG4gKiBHZXQgdGhlIHNwaGVyaWNhbCBhcmVhIG9mIGEgZ2VvbWV0cnkuICBUaGlzIGlzIHRoZSBhcmVhIChpbiBtZXRlcnMpIGFzc3VtaW5nXG4gKiB0aGF0IHBvbHlnb24gZWRnZXMgYXJlIHNlZ21lbnRzIG9mIGdyZWF0IGNpcmNsZXMgb24gYSBzcGhlcmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBBIGdlb21ldHJ5LlxuICogQHBhcmFtIHtTcGhlcmVNZXRyaWNPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucyBmb3IgdGhlIGFyZWFcbiAqICAgICBjYWxjdWxhdGlvbi4gIEJ5IGRlZmF1bHQsIGdlb21ldHJpZXMgYXJlIGFzc3VtZWQgdG8gYmUgaW4gJ0VQU0c6Mzg1NycuXG4gKiAgICAgWW91IGNhbiBjaGFuZ2UgdGhpcyBieSBwcm92aWRpbmcgYSBgcHJvamVjdGlvbmAgb3B0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgc3BoZXJpY2FsIGFyZWEgKGluIHNxdWFyZSBtZXRlcnMpLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJlYShnZW9tZXRyeSwgb3B0X29wdGlvbnMpIHtcbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHJhZGl1cyA9IG9wdGlvbnMucmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICB2YXIgcHJvamVjdGlvbiA9IG9wdGlvbnMucHJvamVjdGlvbiB8fCAnRVBTRzozODU3JztcbiAgdmFyIHR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XG4gIGlmICh0eXBlICE9PSBHZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTikge1xuICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnkuY2xvbmUoKS50cmFuc2Zvcm0ocHJvamVjdGlvbiwgJ0VQU0c6NDMyNicpO1xuICB9XG4gIHZhciBhcmVhID0gMDtcbiAgdmFyIGNvb3JkaW5hdGVzLCBjb29yZHMsIGksIGlpLCBqLCBqajtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBHZW9tZXRyeVR5cGUuUE9JTlQ6XG4gICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6XG4gICAgY2FzZSBHZW9tZXRyeVR5cGUuTElORV9TVFJJTkc6XG4gICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkc6XG4gICAgY2FzZSBHZW9tZXRyeVR5cGUuTElORUFSX1JJTkc6IHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0xZR09OOiB7XG4gICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgYXJlYSA9IE1hdGguYWJzKGdldEFyZWFJbnRlcm5hbChjb29yZGluYXRlc1swXSwgcmFkaXVzKSk7XG4gICAgICBmb3IgKGkgPSAxLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgYXJlYSAtPSBNYXRoLmFicyhnZXRBcmVhSW50ZXJuYWwoY29vcmRpbmF0ZXNbaV0sIHJhZGl1cykpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT046IHtcbiAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGNvb3JkcyA9IGNvb3JkaW5hdGVzW2ldO1xuICAgICAgICBhcmVhICs9IE1hdGguYWJzKGdldEFyZWFJbnRlcm5hbChjb29yZHNbMF0sIHJhZGl1cykpO1xuICAgICAgICBmb3IgKGogPSAxLCBqaiA9IGNvb3Jkcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgYXJlYSAtPSBNYXRoLmFicyhnZXRBcmVhSW50ZXJuYWwoY29vcmRzW2pdLCByYWRpdXMpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT046IHtcbiAgICAgIHZhciBnZW9tZXRyaWVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0R2VvbWV0cmllcygpO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBnZW9tZXRyaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgYXJlYSArPSBnZXRBcmVhKGdlb21ldHJpZXNbaV0sIG9wdF9vcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBkZWZhdWx0OiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGU6ICcgKyB0eXBlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFyZWE7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjb29yZGluYXRlIGF0IHRoZSBnaXZlbiBkaXN0YW5jZSBhbmQgYmVhcmluZyBmcm9tIGBjMWAuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYzEgVGhlIG9yaWdpbiBwb2ludCAoYFtsb24sIGxhdF1gIGluIGRlZ3JlZXMpLlxuICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIFRoZSBncmVhdC1jaXJjbGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgb3JpZ2luXG4gKiAgICAgcG9pbnQgYW5kIHRoZSB0YXJnZXQgcG9pbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gYmVhcmluZyBUaGUgYmVhcmluZyAoaW4gcmFkaWFucykuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9yYWRpdXMgVGhlIHNwaGVyZSByYWRpdXMgdG8gdXNlLiAgRGVmYXVsdHMgdG8gdGhlIEVhcnRoJ3NcbiAqICAgICBtZWFuIHJhZGl1cyB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRoZSB0YXJnZXQgcG9pbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvZmZzZXQoYzEsIGRpc3RhbmNlLCBiZWFyaW5nLCBvcHRfcmFkaXVzKSB7XG4gIHZhciByYWRpdXMgPSBvcHRfcmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICB2YXIgbGF0MSA9IHRvUmFkaWFucyhjMVsxXSk7XG4gIHZhciBsb24xID0gdG9SYWRpYW5zKGMxWzBdKTtcbiAgdmFyIGRCeVIgPSBkaXN0YW5jZSAvIHJhZGl1cztcbiAgdmFyIGxhdCA9IE1hdGguYXNpbihcbiAgICBNYXRoLnNpbihsYXQxKSAqIE1hdGguY29zKGRCeVIpICtcbiAgICAgIE1hdGguY29zKGxhdDEpICogTWF0aC5zaW4oZEJ5UikgKiBNYXRoLmNvcyhiZWFyaW5nKSk7XG4gIHZhciBsb24gPSBsb24xICsgTWF0aC5hdGFuMihcbiAgICBNYXRoLnNpbihiZWFyaW5nKSAqIE1hdGguc2luKGRCeVIpICogTWF0aC5jb3MobGF0MSksXG4gICAgTWF0aC5jb3MoZEJ5UikgLSBNYXRoLnNpbihsYXQxKSAqIE1hdGguc2luKGxhdCkpO1xuICByZXR1cm4gW3RvRGVncmVlcyhsb24pLCB0b0RlZ3JlZXMobGF0KV07XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNwaGVyZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9Vbml0c1xuICovXG5cbi8qKlxuICogUHJvamVjdGlvbiB1bml0czogYCdkZWdyZWVzJ2AsIGAnZnQnYCwgYCdtJ2AsIGAncGl4ZWxzJ2AsIGAndGlsZS1waXhlbHMnYCBvclxuICogYCd1cy1mdCdgLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xudmFyIFVuaXRzID0ge1xuICBERUdSRUVTOiAnZGVncmVlcycsXG4gIEZFRVQ6ICdmdCcsXG4gIE1FVEVSUzogJ20nLFxuICBQSVhFTFM6ICdwaXhlbHMnLFxuICBUSUxFX1BJWEVMUzogJ3RpbGUtcGl4ZWxzJyxcbiAgVVNGRUVUOiAndXMtZnQnXG59O1xuXG5cbi8qKlxuICogTWV0ZXJzIHBlciB1bml0IGxvb2t1cCB0YWJsZS5cbiAqIEBjb25zdFxuICogQHR5cGUge09iamVjdDxVbml0cywgbnVtYmVyPn1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBNRVRFUlNfUEVSX1VOSVQgPSB7fTtcbi8vIHVzZSB0aGUgcmFkaXVzIG9mIHRoZSBOb3JtYWwgc3BoZXJlXG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuREVHUkVFU10gPSAyICogTWF0aC5QSSAqIDYzNzA5OTcgLyAzNjA7XG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuRkVFVF0gPSAwLjMwNDg7XG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuTUVURVJTXSA9IDE7XG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuVVNGRUVUXSA9IDEyMDAgLyAzOTM3O1xuXG5leHBvcnQgZGVmYXVsdCBVbml0cztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VW5pdHMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovUHJvamVjdGlvblxuICovXG5pbXBvcnQge01FVEVSU19QRVJfVU5JVH0gZnJvbSAnLi9Vbml0cy5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gY29kZSBUaGUgU1JTIGlkZW50aWZpZXIgY29kZSwgZS5nLiBgRVBTRzo0MzI2YC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5kZWZhdWx0fHN0cmluZ30gW3VuaXRzXSBVbml0cy4gUmVxdWlyZWQgdW5sZXNzIGFcbiAqIHByb2o0IHByb2plY3Rpb24gaXMgZGVmaW5lZCBmb3IgYGNvZGVgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgdmFsaWRpdHkgZXh0ZW50IGZvciB0aGUgU1JTLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtheGlzT3JpZW50YXRpb249J2VudSddIFRoZSBheGlzIG9yaWVudGF0aW9uIGFzIHNwZWNpZmllZCBpbiBQcm9qNC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2dsb2JhbD1mYWxzZV0gV2hldGhlciB0aGUgcHJvamVjdGlvbiBpcyB2YWxpZCBmb3IgdGhlIHdob2xlIGdsb2JlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttZXRlcnNQZXJVbml0XSBUaGUgbWV0ZXJzIHBlciB1bml0IGZvciB0aGUgU1JTLlxuICogSWYgbm90IHByb3ZpZGVkLCB0aGUgYHVuaXRzYCBhcmUgdXNlZCB0byBnZXQgdGhlIG1ldGVycyBwZXIgdW5pdCBmcm9tIHRoZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovVW5pdHN+TUVURVJTX1BFUl9VTklUfVxuICogbG9va3VwIHRhYmxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbd29ybGRFeHRlbnRdIFRoZSB3b3JsZCBleHRlbnQgZm9yIHRoZSBTUlMuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ9IFtnZXRQb2ludFJlc29sdXRpb25dXG4gKiBGdW5jdGlvbiB0byBkZXRlcm1pbmUgcmVzb2x1dGlvbiBhdCBhIHBvaW50LiBUaGUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYVxuICogYHtudW1iZXJ9YCB2aWV3IHJlc29sdXRpb24gYW5kIGFuIGB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfWAgYXMgYXJndW1lbnRzLCBhbmQgcmV0dXJuc1xuICogdGhlIGB7bnVtYmVyfWAgcmVzb2x1dGlvbiBhdCB0aGUgcGFzc2VkIGNvb3JkaW5hdGUuIElmIHRoaXMgaXMgYHVuZGVmaW5lZGAsXG4gKiB0aGUgZGVmYXVsdCB7QGxpbmsgbW9kdWxlOm9sL3Byb2ojZ2V0UG9pbnRSZXNvbHV0aW9ufSBmdW5jdGlvbiB3aWxsIGJlIHVzZWQuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByb2plY3Rpb24gZGVmaW5pdGlvbiBjbGFzcy4gT25lIG9mIHRoZXNlIGlzIGNyZWF0ZWQgZm9yIGVhY2ggcHJvamVjdGlvblxuICogc3VwcG9ydGVkIGluIHRoZSBhcHBsaWNhdGlvbiBhbmQgc3RvcmVkIGluIHRoZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2p9IG5hbWVzcGFjZS5cbiAqIFlvdSBjYW4gdXNlIHRoZXNlIGluIGFwcGxpY2F0aW9ucywgYnV0IHRoaXMgaXMgbm90IHJlcXVpcmVkLCBhcyBBUEkgcGFyYW1zXG4gKiBhbmQgb3B0aW9ucyB1c2Uge0BsaW5rIG1vZHVsZTpvbC9wcm9qflByb2plY3Rpb25MaWtlfSB3aGljaCBtZWFucyB0aGUgc2ltcGxlIHN0cmluZ1xuICogY29kZSB3aWxsIHN1ZmZpY2UuXG4gKlxuICogWW91IGNhbiB1c2Uge0BsaW5rIG1vZHVsZTpvbC9wcm9qfmdldH0gdG8gcmV0cmlldmUgdGhlIG9iamVjdCBmb3IgYSBwYXJ0aWN1bGFyXG4gKiBwcm9qZWN0aW9uLlxuICpcbiAqIFRoZSBsaWJyYXJ5IGluY2x1ZGVzIGRlZmluaXRpb25zIGZvciBgRVBTRzo0MzI2YCBhbmQgYEVQU0c6Mzg1N2AsIHRvZ2V0aGVyXG4gKiB3aXRoIHRoZSBmb2xsb3dpbmcgYWxpYXNlczpcbiAqICogYEVQU0c6NDMyNmA6IENSUzo4NCwgdXJuOm9nYzpkZWY6Y3JzOkVQU0c6Ni42OjQzMjYsXG4gKiAgICAgdXJuOm9nYzpkZWY6Y3JzOk9HQzoxLjM6Q1JTODQsIHVybjpvZ2M6ZGVmOmNyczpPR0M6Mjo4NCxcbiAqICAgICBodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbC9zcnMvZXBzZy54bWwjNDMyNixcbiAqICAgICB1cm46eC1vZ2M6ZGVmOmNyczpFUFNHOjQzMjZcbiAqICogYEVQU0c6Mzg1N2A6IEVQU0c6MTAyMTAwLCBFUFNHOjEwMjExMywgRVBTRzo5MDA5MTMsXG4gKiAgICAgdXJuOm9nYzpkZWY6Y3JzOkVQU0c6Ni4xODozOjM4NTcsXG4gKiAgICAgaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzM4NTdcbiAqXG4gKiBJZiB5b3UgdXNlIFtwcm9qNGpzXShodHRwczovL2dpdGh1Yi5jb20vcHJvajRqcy9wcm9qNGpzKSwgYWxpYXNlcyBjYW5cbiAqIGJlIGFkZGVkIHVzaW5nIGBwcm9qNC5kZWZzKClgLiBBZnRlciBhbGwgcmVxdWlyZWQgcHJvamVjdGlvbiBkZWZpbml0aW9ucyBhcmVcbiAqIGFkZGVkLCBjYWxsIHRoZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovcHJvajR+cmVnaXN0ZXJ9IGZ1bmN0aW9uLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFByb2plY3Rpb24gPSBmdW5jdGlvbiBQcm9qZWN0aW9uKG9wdGlvbnMpIHtcbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICB0aGlzLmNvZGVfID0gb3B0aW9ucy5jb2RlO1xuXG4gIC8qKlxuICAgKiBVbml0cyBvZiBwcm9qZWN0ZWQgY29vcmRpbmF0ZXMuIFdoZW4gc2V0IHRvIGBUSUxFX1BJWEVMU2AsIGFcbiAgICogYHRoaXMuZXh0ZW50X2AgYW5kIGB0aGlzLndvcmxkRXh0ZW50X2AgbXVzdCBiZSBjb25maWd1cmVkIHByb3Blcmx5IGZvciBlYWNoXG4gICAqIHRpbGUuXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtpbXBvcnQoXCIuL1VuaXRzLmpzXCIpLmRlZmF1bHR9XG4gICAqL1xuICB0aGlzLnVuaXRzXyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5kZWZhdWx0fSAqLyAob3B0aW9ucy51bml0cyk7XG5cbiAgLyoqXG4gICAqIFZhbGlkaXR5IGV4dGVudCBvZiB0aGUgcHJvamVjdGlvbiBpbiBwcm9qZWN0ZWQgY29vcmRpbmF0ZXMuIEZvciBwcm9qZWN0aW9uc1xuICAgKiB3aXRoIGBUSUxFX1BJWEVMU2AgdW5pdHMsIHRoaXMgaXMgdGhlIGV4dGVudCBvZiB0aGUgdGlsZSBpblxuICAgKiB0aWxlIHBpeGVsIHNwYWNlLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICovXG4gIHRoaXMuZXh0ZW50XyA9IG9wdGlvbnMuZXh0ZW50ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmV4dGVudCA6IG51bGw7XG5cbiAgLyoqXG4gICAqIEV4dGVudCBvZiB0aGUgd29ybGQgaW4gRVBTRzo0MzI2LiBGb3IgcHJvamVjdGlvbnMgd2l0aFxuICAgKiBgVElMRV9QSVhFTFNgIHVuaXRzLCB0aGlzIGlzIHRoZSBleHRlbnQgb2YgdGhlIHRpbGUgaW5cbiAgICogcHJvamVjdGVkIGNvb3JkaW5hdGUgc3BhY2UuXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgKi9cbiAgdGhpcy53b3JsZEV4dGVudF8gPSBvcHRpb25zLndvcmxkRXh0ZW50ICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdGlvbnMud29ybGRFeHRlbnQgOiBudWxsO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgdGhpcy5heGlzT3JpZW50YXRpb25fID0gb3B0aW9ucy5heGlzT3JpZW50YXRpb24gIT09IHVuZGVmaW5lZCA/XG4gICAgb3B0aW9ucy5heGlzT3JpZW50YXRpb24gOiAnZW51JztcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICB0aGlzLmdsb2JhbF8gPSBvcHRpb25zLmdsb2JhbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5nbG9iYWwgOiBmYWxzZTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICB0aGlzLmNhbldyYXBYXyA9ICEhKHRoaXMuZ2xvYmFsXyAmJiB0aGlzLmV4dGVudF8pO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOm51bWJlcnx1bmRlZmluZWR9XG4gICAqL1xuICB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfID0gb3B0aW9ucy5nZXRQb2ludFJlc29sdXRpb247XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fVxuICAgKi9cbiAgdGhpcy5kZWZhdWx0VGlsZUdyaWRfID0gbnVsbDtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAqL1xuICB0aGlzLm1ldGVyc1BlclVuaXRfID0gb3B0aW9ucy5tZXRlcnNQZXJVbml0O1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgcHJvamVjdGlvbiBpcyBzdWl0YWJsZSBmb3Igd3JhcHBpbmcgdGhlIHgtYXhpc1xuICovXG5Qcm9qZWN0aW9uLnByb3RvdHlwZS5jYW5XcmFwWCA9IGZ1bmN0aW9uIGNhbldyYXBYICgpIHtcbiAgcmV0dXJuIHRoaXMuY2FuV3JhcFhfO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGNvZGUgZm9yIHRoaXMgcHJvamVjdGlvbiwgZS5nLiAnRVBTRzo0MzI2Jy5cbiAqIEByZXR1cm4ge3N0cmluZ30gQ29kZS5cbiAqIEBhcGlcbiAqL1xuUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0Q29kZSA9IGZ1bmN0aW9uIGdldENvZGUgKCkge1xuICByZXR1cm4gdGhpcy5jb2RlXztcbn07XG5cbi8qKlxuICogR2V0IHRoZSB2YWxpZGl0eSBleHRlbnQgZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAqIEBhcGlcbiAqL1xuUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gZ2V0RXh0ZW50ICgpIHtcbiAgcmV0dXJuIHRoaXMuZXh0ZW50Xztcbn07XG5cbi8qKlxuICogR2V0IHRoZSB1bml0cyBvZiB0aGlzIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1VuaXRzLmpzXCIpLmRlZmF1bHR9IFVuaXRzLlxuICogQGFwaVxuICovXG5Qcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRVbml0cyA9IGZ1bmN0aW9uIGdldFVuaXRzICgpIHtcbiAgcmV0dXJuIHRoaXMudW5pdHNfO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGFtb3VudCBvZiBtZXRlcnMgcGVyIHVuaXQgb2YgdGhpcyBwcm9qZWN0aW9uLklmIHRoZSBwcm9qZWN0aW9uIGlzXG4gKiBub3QgY29uZmlndXJlZCB3aXRoIGBtZXRlcnNQZXJVbml0YCBvciBhIHVuaXRzIGlkZW50aWZpZXIsIHRoZSByZXR1cm4gaXNcbiAqIGB1bmRlZmluZWRgLlxuICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gTWV0ZXJzLlxuICogQGFwaVxuICovXG5Qcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRNZXRlcnNQZXJVbml0ID0gZnVuY3Rpb24gZ2V0TWV0ZXJzUGVyVW5pdCAoKSB7XG4gIHJldHVybiB0aGlzLm1ldGVyc1BlclVuaXRfIHx8IE1FVEVSU19QRVJfVU5JVFt0aGlzLnVuaXRzX107XG59O1xuXG4vKipcbiAqIEdldCB0aGUgd29ybGQgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gKiBAYXBpXG4gKi9cblByb2plY3Rpb24ucHJvdG90eXBlLmdldFdvcmxkRXh0ZW50ID0gZnVuY3Rpb24gZ2V0V29ybGRFeHRlbnQgKCkge1xuICByZXR1cm4gdGhpcy53b3JsZEV4dGVudF87XG59O1xuXG4vKipcbiAqIEdldCB0aGUgYXhpcyBvcmllbnRhdGlvbiBvZiB0aGlzIHByb2plY3Rpb24uXG4gKiBFeGFtcGxlIHZhbHVlcyBhcmU6XG4gKiBlbnUgLSB0aGUgZGVmYXVsdCBlYXN0aW5nLCBub3J0aGluZywgZWxldmF0aW9uLlxuICogbmV1IC0gbm9ydGhpbmcsIGVhc3RpbmcsIHVwIC0gdXNlZnVsIGZvciBcImxhdC9sb25nXCIgZ2VvZ3JhcGhpYyBjb29yZGluYXRlcyxcbiAqICAgb3Igc291dGggb3JpZW50YXRlZCB0cmFuc3ZlcnNlIG1lcmNhdG9yLlxuICogd251IC0gd2VzdGluZywgbm9ydGhpbmcsIHVwIC0gc29tZSBwbGFuZXRhcnkgY29vcmRpbmF0ZSBzeXN0ZW1zIGhhdmVcbiAqICAgXCJ3ZXN0IHBvc2l0aXZlXCIgY29vcmRpbmF0ZSBzeXN0ZW1zXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEF4aXMgb3JpZW50YXRpb24uXG4gKiBAYXBpXG4gKi9cblByb2plY3Rpb24ucHJvdG90eXBlLmdldEF4aXNPcmllbnRhdGlvbiA9IGZ1bmN0aW9uIGdldEF4aXNPcmllbnRhdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmF4aXNPcmllbnRhdGlvbl87XG59O1xuXG4vKipcbiAqIElzIHRoaXMgcHJvamVjdGlvbiBhIGdsb2JhbCBwcm9qZWN0aW9uIHdoaWNoIHNwYW5zIHRoZSB3aG9sZSB3b3JsZD9cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHByb2plY3Rpb24gaXMgZ2xvYmFsLlxuICogQGFwaVxuICovXG5Qcm9qZWN0aW9uLnByb3RvdHlwZS5pc0dsb2JhbCA9IGZ1bmN0aW9uIGlzR2xvYmFsICgpIHtcbiAgcmV0dXJuIHRoaXMuZ2xvYmFsXztcbn07XG5cbi8qKlxuICogU2V0IGlmIHRoZSBwcm9qZWN0aW9uIGlzIGEgZ2xvYmFsIHByb2plY3Rpb24gd2hpY2ggc3BhbnMgdGhlIHdob2xlIHdvcmxkXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGdsb2JhbCBXaGV0aGVyIHRoZSBwcm9qZWN0aW9uIGlzIGdsb2JhbC5cbiAqIEBhcGlcbiAqL1xuUHJvamVjdGlvbi5wcm90b3R5cGUuc2V0R2xvYmFsID0gZnVuY3Rpb24gc2V0R2xvYmFsIChnbG9iYWwpIHtcbiAgdGhpcy5nbG9iYWxfID0gZ2xvYmFsO1xuICB0aGlzLmNhbldyYXBYXyA9ICEhKGdsb2JhbCAmJiB0aGlzLmV4dGVudF8pO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBUaGUgZGVmYXVsdCB0aWxlIGdyaWQuXG4gKi9cblByb2plY3Rpb24ucHJvdG90eXBlLmdldERlZmF1bHRUaWxlR3JpZCA9IGZ1bmN0aW9uIGdldERlZmF1bHRUaWxlR3JpZCAoKSB7XG4gIHJldHVybiB0aGlzLmRlZmF1bHRUaWxlR3JpZF87XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGhlIGRlZmF1bHQgdGlsZSBncmlkLlxuICovXG5Qcm9qZWN0aW9uLnByb3RvdHlwZS5zZXREZWZhdWx0VGlsZUdyaWQgPSBmdW5jdGlvbiBzZXREZWZhdWx0VGlsZUdyaWQgKHRpbGVHcmlkKSB7XG4gIHRoaXMuZGVmYXVsdFRpbGVHcmlkXyA9IHRpbGVHcmlkO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIHZhbGlkaXR5IGV4dGVudCBmb3IgdGhpcyBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQGFwaVxuICovXG5Qcm9qZWN0aW9uLnByb3RvdHlwZS5zZXRFeHRlbnQgPSBmdW5jdGlvbiBzZXRFeHRlbnQgKGV4dGVudCkge1xuICB0aGlzLmV4dGVudF8gPSBleHRlbnQ7XG4gIHRoaXMuY2FuV3JhcFhfID0gISEodGhpcy5nbG9iYWxfICYmIGV4dGVudCk7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgd29ybGQgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IHdvcmxkRXh0ZW50IFdvcmxkIGV4dGVudFxuICogICBbbWlubG9uLCBtaW5sYXQsIG1heGxvbiwgbWF4bGF0XS5cbiAqIEBhcGlcbiAqL1xuUHJvamVjdGlvbi5wcm90b3R5cGUuc2V0V29ybGRFeHRlbnQgPSBmdW5jdGlvbiBzZXRXb3JsZEV4dGVudCAod29ybGRFeHRlbnQpIHtcbiAgdGhpcy53b3JsZEV4dGVudF8gPSB3b3JsZEV4dGVudDtcbn07XG5cbi8qKlxuICogU2V0IHRoZSBnZXRQb2ludFJlc29sdXRpb24gZnVuY3Rpb24gKHNlZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2p+Z2V0UG9pbnRSZXNvbHV0aW9ufVxuICogZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOm51bWJlcn0gZnVuYyBGdW5jdGlvblxuICogQGFwaVxuICovXG5Qcm9qZWN0aW9uLnByb3RvdHlwZS5zZXRHZXRQb2ludFJlc29sdXRpb24gPSBmdW5jdGlvbiBzZXRHZXRQb2ludFJlc29sdXRpb24gKGZ1bmMpIHtcbiAgdGhpcy5nZXRQb2ludFJlc29sdXRpb25GdW5jXyA9IGZ1bmM7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgY3VzdG9tIHBvaW50IHJlc29sdXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgcHJvamVjdGlvbiAoaWYgc2V0KS5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ8dW5kZWZpbmVkfSBUaGUgY3VzdG9tIHBvaW50XG4gKiByZXNvbHV0aW9uIGZ1bmN0aW9uIChpZiBzZXQpLlxuICovXG5Qcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRQb2ludFJlc29sdXRpb25GdW5jID0gZnVuY3Rpb24gZ2V0UG9pbnRSZXNvbHV0aW9uRnVuYyAoKSB7XG4gIHJldHVybiB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUHJvamVjdGlvbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvamVjdGlvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9lcHNnMzg1N1xuICovXG5pbXBvcnQge2Nvc2h9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnLi9Qcm9qZWN0aW9uLmpzJztcbmltcG9ydCBVbml0cyBmcm9tICcuL1VuaXRzLmpzJztcblxuXG4vKipcbiAqIFJhZGl1cyBvZiBXR1M4NCBzcGhlcmVcbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgUkFESVVTID0gNjM3ODEzNztcblxuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBIQUxGX1NJWkUgPSBNYXRoLlBJICogUkFESVVTO1xuXG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IHZhciBFWFRFTlQgPSBbXG4gIC1IQUxGX1NJWkUsIC1IQUxGX1NJWkUsXG4gIEhBTEZfU0laRSwgSEFMRl9TSVpFXG5dO1xuXG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IHZhciBXT1JMRF9FWFRFTlQgPSBbLTE4MCwgLTg1LCAxODAsIDg1XTtcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByb2plY3Rpb24gb2JqZWN0IGZvciB3ZWIvc3BoZXJpY2FsIE1lcmNhdG9yIChFUFNHOjM4NTcpLlxuICovXG52YXIgRVBTRzM4NTdQcm9qZWN0aW9uID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoUHJvamVjdGlvbikge1xuICBmdW5jdGlvbiBFUFNHMzg1N1Byb2plY3Rpb24oY29kZSkge1xuICAgIFByb2plY3Rpb24uY2FsbCh0aGlzLCB7XG4gICAgICBjb2RlOiBjb2RlLFxuICAgICAgdW5pdHM6IFVuaXRzLk1FVEVSUyxcbiAgICAgIGV4dGVudDogRVhURU5ULFxuICAgICAgZ2xvYmFsOiB0cnVlLFxuICAgICAgd29ybGRFeHRlbnQ6IFdPUkxEX0VYVEVOVCxcbiAgICAgIGdldFBvaW50UmVzb2x1dGlvbjogZnVuY3Rpb24ocmVzb2x1dGlvbiwgcG9pbnQpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdXRpb24gLyBjb3NoKHBvaW50WzFdIC8gUkFESVVTKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICB9XG5cbiAgaWYgKCBQcm9qZWN0aW9uICkgRVBTRzM4NTdQcm9qZWN0aW9uLl9fcHJvdG9fXyA9IFByb2plY3Rpb247XG4gIEVQU0czODU3UHJvamVjdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQcm9qZWN0aW9uICYmIFByb2plY3Rpb24ucHJvdG90eXBlICk7XG4gIEVQU0czODU3UHJvamVjdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBFUFNHMzg1N1Byb2plY3Rpb247XG5cbiAgcmV0dXJuIEVQU0czODU3UHJvamVjdGlvbjtcbn0oUHJvamVjdGlvbikpO1xuXG5cbi8qKlxuICogUHJvamVjdGlvbnMgZXF1YWwgdG8gRVBTRzozODU3LlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PGltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqL1xuZXhwb3J0IHZhciBQUk9KRUNUSU9OUyA9IFtcbiAgbmV3IEVQU0czODU3UHJvamVjdGlvbignRVBTRzozODU3JyksXG4gIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ0VQU0c6MTAyMTAwJyksXG4gIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ0VQU0c6MTAyMTEzJyksXG4gIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ0VQU0c6OTAwOTEzJyksXG4gIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ3VybjpvZ2M6ZGVmOmNyczpFUFNHOjYuMTg6MzozODU3JyksXG4gIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ3VybjpvZ2M6ZGVmOmNyczpFUFNHOjozODU3JyksXG4gIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ2h0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCMzODU3Jylcbl07XG5cblxuLyoqXG4gKiBUcmFuc2Zvcm1hdGlvbiBmcm9tIEVQU0c6NDMyNiB0byBFUFNHOjM4NTcuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9vdXRwdXQgT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGltZW5zaW9uIERpbWVuc2lvbiAoZGVmYXVsdCBpcyBgMmApLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUVQU0c0MzI2KGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gIHZhciBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gIHZhciBkaW1lbnNpb24gPSBvcHRfZGltZW5zaW9uID4gMSA/IG9wdF9kaW1lbnNpb24gOiAyO1xuICB2YXIgb3V0cHV0ID0gb3B0X291dHB1dDtcbiAgaWYgKG91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGRpbWVuc2lvbiA+IDIpIHtcbiAgICAgIC8vIHByZXNlcnZlIHZhbHVlcyBiZXlvbmQgc2Vjb25kIGRpbWVuc2lvblxuICAgICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0ID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgfVxuICB9XG4gIHZhciBoYWxmU2l6ZSA9IEhBTEZfU0laRTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gZGltZW5zaW9uKSB7XG4gICAgb3V0cHV0W2ldID0gaGFsZlNpemUgKiBpbnB1dFtpXSAvIDE4MDtcbiAgICB2YXIgeSA9IFJBRElVUyAqXG4gICAgICAgIE1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkgKiAoaW5wdXRbaSArIDFdICsgOTApIC8gMzYwKSk7XG4gICAgaWYgKHkgPiBoYWxmU2l6ZSkge1xuICAgICAgeSA9IGhhbGZTaXplO1xuICAgIH0gZWxzZSBpZiAoeSA8IC1oYWxmU2l6ZSkge1xuICAgICAgeSA9IC1oYWxmU2l6ZTtcbiAgICB9XG4gICAgb3V0cHV0W2kgKyAxXSA9IHk7XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuXG4vKipcbiAqIFRyYW5zZm9ybWF0aW9uIGZyb20gRVBTRzozODU3IHRvIEVQU0c6NDMyNi5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGlucHV0IElucHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X291dHB1dCBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9kaW1lbnNpb24gRGltZW5zaW9uIChkZWZhdWx0IGlzIGAyYCkuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0VQU0c0MzI2KGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gIHZhciBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gIHZhciBkaW1lbnNpb24gPSBvcHRfZGltZW5zaW9uID4gMSA/IG9wdF9kaW1lbnNpb24gOiAyO1xuICB2YXIgb3V0cHV0ID0gb3B0X291dHB1dDtcbiAgaWYgKG91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGRpbWVuc2lvbiA+IDIpIHtcbiAgICAgIC8vIHByZXNlcnZlIHZhbHVlcyBiZXlvbmQgc2Vjb25kIGRpbWVuc2lvblxuICAgICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0ID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgfVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IGRpbWVuc2lvbikge1xuICAgIG91dHB1dFtpXSA9IDE4MCAqIGlucHV0W2ldIC8gSEFMRl9TSVpFO1xuICAgIG91dHB1dFtpICsgMV0gPSAzNjAgKiBNYXRoLmF0YW4oXG4gICAgICBNYXRoLmV4cChpbnB1dFtpICsgMV0gLyBSQURJVVMpKSAvIE1hdGguUEkgLSA5MDtcbiAgfVxuICByZXR1cm4gb3V0cHV0O1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcHNnMzg1Ny5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9lcHNnNDMyNlxuICovXG5pbXBvcnQgUHJvamVjdGlvbiBmcm9tICcuL1Byb2plY3Rpb24uanMnO1xuaW1wb3J0IFVuaXRzIGZyb20gJy4vVW5pdHMuanMnO1xuXG5cbi8qKlxuICogU2VtaS1tYWpvciByYWRpdXMgb2YgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgUkFESVVTID0gNjM3ODEzNztcblxuXG4vKipcbiAqIEV4dGVudCBvZiB0aGUgRVBTRzo0MzI2IHByb2plY3Rpb24gd2hpY2ggaXMgdGhlIHdob2xlIHdvcmxkLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gKi9cbmV4cG9ydCB2YXIgRVhURU5UID0gWy0xODAsIC05MCwgMTgwLCA5MF07XG5cblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgTUVURVJTX1BFUl9VTklUID0gTWF0aC5QSSAqIFJBRElVUyAvIDE4MDtcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByb2plY3Rpb24gb2JqZWN0IGZvciBXR1M4NCBnZW9ncmFwaGljIGNvb3JkaW5hdGVzIChFUFNHOjQzMjYpLlxuICpcbiAqIE5vdGUgdGhhdCBPcGVuTGF5ZXJzIGRvZXMgbm90IHN0cmljdGx5IGNvbXBseSB3aXRoIHRoZSBFUFNHIGRlZmluaXRpb24uXG4gKiBUaGUgRVBTRyByZWdpc3RyeSBkZWZpbmVzIDQzMjYgYXMgYSBDUlMgZm9yIExhdGl0dWRlLExvbmdpdHVkZSAoeSx4KS5cbiAqIE9wZW5MYXllcnMgdHJlYXRzIEVQU0c6NDMyNiBhcyBhIHBzZXVkby1wcm9qZWN0aW9uLCB3aXRoIHgseSBjb29yZGluYXRlcy5cbiAqL1xudmFyIEVQU0c0MzI2UHJvamVjdGlvbiA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFByb2plY3Rpb24pIHtcbiAgZnVuY3Rpb24gRVBTRzQzMjZQcm9qZWN0aW9uKGNvZGUsIG9wdF9heGlzT3JpZW50YXRpb24pIHtcbiAgICBQcm9qZWN0aW9uLmNhbGwodGhpcywge1xuICAgICAgY29kZTogY29kZSxcbiAgICAgIHVuaXRzOiBVbml0cy5ERUdSRUVTLFxuICAgICAgZXh0ZW50OiBFWFRFTlQsXG4gICAgICBheGlzT3JpZW50YXRpb246IG9wdF9heGlzT3JpZW50YXRpb24sXG4gICAgICBnbG9iYWw6IHRydWUsXG4gICAgICBtZXRlcnNQZXJVbml0OiBNRVRFUlNfUEVSX1VOSVQsXG4gICAgICB3b3JsZEV4dGVudDogRVhURU5UXG4gICAgfSk7XG5cbiAgfVxuXG4gIGlmICggUHJvamVjdGlvbiApIEVQU0c0MzI2UHJvamVjdGlvbi5fX3Byb3RvX18gPSBQcm9qZWN0aW9uO1xuICBFUFNHNDMyNlByb2plY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUHJvamVjdGlvbiAmJiBQcm9qZWN0aW9uLnByb3RvdHlwZSApO1xuICBFUFNHNDMyNlByb2plY3Rpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRVBTRzQzMjZQcm9qZWN0aW9uO1xuXG4gIHJldHVybiBFUFNHNDMyNlByb2plY3Rpb247XG59KFByb2plY3Rpb24pKTtcblxuXG4vKipcbiAqIFByb2plY3Rpb25zIGVxdWFsIHRvIEVQU0c6NDMyNi5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKi9cbmV4cG9ydCB2YXIgUFJPSkVDVElPTlMgPSBbXG4gIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ0NSUzo4NCcpLFxuICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCdFUFNHOjQzMjYnLCAnbmV1JyksXG4gIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ3VybjpvZ2M6ZGVmOmNyczpFUFNHOjo0MzI2JywgJ25ldScpLFxuICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCd1cm46b2djOmRlZjpjcnM6RVBTRzo2LjY6NDMyNicsICduZXUnKSxcbiAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbigndXJuOm9nYzpkZWY6Y3JzOk9HQzoxLjM6Q1JTODQnKSxcbiAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbigndXJuOm9nYzpkZWY6Y3JzOk9HQzoyOjg0JyksXG4gIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ2h0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCM0MzI2JywgJ25ldScpLFxuICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCd1cm46eC1vZ2M6ZGVmOmNyczpFUFNHOjQzMjYnLCAnbmV1Jylcbl07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVwc2c0MzI2LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wcm9qL3Byb2plY3Rpb25zXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKi9cbnZhciBjYWNoZSA9IHt9O1xuXG5cbi8qKlxuICogQ2xlYXIgdGhlIHByb2plY3Rpb25zIGNhY2hlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXIoKSB7XG4gIGNhY2hlID0ge307XG59XG5cblxuLyoqXG4gKiBHZXQgYSBjYWNoZWQgcHJvamVjdGlvbiBieSBjb2RlLlxuICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgVGhlIGNvZGUgZm9yIHRoZSBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IFRoZSBwcm9qZWN0aW9uIChpZiBjYWNoZWQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0KGNvZGUpIHtcbiAgcmV0dXJuIGNhY2hlW2NvZGVdIHx8IG51bGw7XG59XG5cblxuLyoqXG4gKiBBZGQgYSBwcm9qZWN0aW9uIHRvIHRoZSBjYWNoZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIFRoZSBwcm9qZWN0aW9uIGNvZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFRoZSBwcm9qZWN0aW9uIHRvIGNhY2hlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkKGNvZGUsIHByb2plY3Rpb24pIHtcbiAgY2FjaGVbY29kZV0gPSBwcm9qZWN0aW9uO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9qZWN0aW9ucy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai90cmFuc2Zvcm1zXG4gKi9cbmltcG9ydCB7aXNFbXB0eX0gZnJvbSAnLi4vb2JqLmpzJztcblxuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIE9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb24+Pn1cbiAqL1xudmFyIHRyYW5zZm9ybXMgPSB7fTtcblxuXG4vKipcbiAqIENsZWFyIHRoZSB0cmFuc2Zvcm0gY2FjaGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhcigpIHtcbiAgdHJhbnNmb3JtcyA9IHt9O1xufVxuXG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgY29udmVyc2lvbiBmdW5jdGlvbiB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGZyb20gdGhlIHNvdXJjZVxuICogcHJvamVjdGlvbiB0byB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2UgU291cmNlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gZGVzdGluYXRpb24gRGVzdGluYXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZChzb3VyY2UsIGRlc3RpbmF0aW9uLCB0cmFuc2Zvcm1Gbikge1xuICB2YXIgc291cmNlQ29kZSA9IHNvdXJjZS5nZXRDb2RlKCk7XG4gIHZhciBkZXN0aW5hdGlvbkNvZGUgPSBkZXN0aW5hdGlvbi5nZXRDb2RlKCk7XG4gIGlmICghKHNvdXJjZUNvZGUgaW4gdHJhbnNmb3JtcykpIHtcbiAgICB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdID0ge307XG4gIH1cbiAgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXVtkZXN0aW5hdGlvbkNvZGVdID0gdHJhbnNmb3JtRm47XG59XG5cblxuLyoqXG4gKiBVbnJlZ2lzdGVycyB0aGUgY29udmVyc2lvbiBmdW5jdGlvbiB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGZyb20gdGhlIHNvdXJjZVxuICogcHJvamVjdGlvbiB0byB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi4gIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY2xlYW4gdXBcbiAqIGNhY2hlZCB0cmFuc2Zvcm1zIGR1cmluZyB0ZXN0aW5nLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZSBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSB0cmFuc2Zvcm1GbiBUaGUgdW5yZWdpc3RlcmVkIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZShzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gIHZhciBzb3VyY2VDb2RlID0gc291cmNlLmdldENvZGUoKTtcbiAgdmFyIGRlc3RpbmF0aW9uQ29kZSA9IGRlc3RpbmF0aW9uLmdldENvZGUoKTtcbiAgdmFyIHRyYW5zZm9ybSA9IHRyYW5zZm9ybXNbc291cmNlQ29kZV1bZGVzdGluYXRpb25Db2RlXTtcbiAgZGVsZXRlIHRyYW5zZm9ybXNbc291cmNlQ29kZV1bZGVzdGluYXRpb25Db2RlXTtcbiAgaWYgKGlzRW1wdHkodHJhbnNmb3Jtc1tzb3VyY2VDb2RlXSkpIHtcbiAgICBkZWxldGUgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXTtcbiAgfVxuICByZXR1cm4gdHJhbnNmb3JtO1xufVxuXG5cbi8qKlxuICogR2V0IGEgdHJhbnNmb3JtIGdpdmVuIGEgc291cmNlIGNvZGUgYW5kIGEgZGVzdGluYXRpb24gY29kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2VDb2RlIFRoZSBjb2RlIGZvciB0aGUgc291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzdGluYXRpb25Db2RlIFRoZSBjb2RlIGZvciB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb258dW5kZWZpbmVkfSBUaGUgdHJhbnNmb3JtIGZ1bmN0aW9uIChpZiBmb3VuZCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXQoc291cmNlQ29kZSwgZGVzdGluYXRpb25Db2RlKSB7XG4gIHZhciB0cmFuc2Zvcm07XG4gIGlmIChzb3VyY2VDb2RlIGluIHRyYW5zZm9ybXMgJiYgZGVzdGluYXRpb25Db2RlIGluIHRyYW5zZm9ybXNbc291cmNlQ29kZV0pIHtcbiAgICB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdW2Rlc3RpbmF0aW9uQ29kZV07XG4gIH1cbiAgcmV0dXJuIHRyYW5zZm9ybTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNmb3Jtcy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvalxuICovXG5cbi8qKlxuICogVGhlIG9sL3Byb2ogbW9kdWxlIHN0b3JlczpcbiAqICogYSBsaXN0IG9mIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufVxuICogb2JqZWN0cywgb25lIGZvciBlYWNoIHByb2plY3Rpb24gc3VwcG9ydGVkIGJ5IHRoZSBhcHBsaWNhdGlvblxuICogKiBhIGxpc3Qgb2YgdHJhbnNmb3JtIGZ1bmN0aW9ucyBuZWVkZWQgdG8gY29udmVydCBjb29yZGluYXRlcyBpbiBvbmUgcHJvamVjdGlvblxuICogaW50byBhbm90aGVyLlxuICpcbiAqIFRoZSBzdGF0aWMgZnVuY3Rpb25zIGFyZSB0aGUgbWV0aG9kcyB1c2VkIHRvIG1haW50YWluIHRoZXNlLlxuICogRWFjaCB0cmFuc2Zvcm0gZnVuY3Rpb24gY2FuIGhhbmRsZSBub3Qgb25seSBzaW1wbGUgY29vcmRpbmF0ZSBwYWlycywgYnV0IGFsc29cbiAqIGxhcmdlIGFycmF5cyBvZiBjb29yZGluYXRlcyBzdWNoIGFzIHZlY3RvciBnZW9tZXRyaWVzLlxuICpcbiAqIFdoZW4gbG9hZGVkLCB0aGUgbGlicmFyeSBhZGRzIHByb2plY3Rpb24gb2JqZWN0cyBmb3IgRVBTRzo0MzI2IChXR1M4NFxuICogZ2VvZ3JhcGhpYyBjb29yZGluYXRlcykgYW5kIEVQU0c6Mzg1NyAoV2ViIG9yIFNwaGVyaWNhbCBNZXJjYXRvciwgYXMgdXNlZFxuICogZm9yIGV4YW1wbGUgYnkgQmluZyBNYXBzIG9yIE9wZW5TdHJlZXRNYXApLCB0b2dldGhlciB3aXRoIHRoZSByZWxldmFudFxuICogdHJhbnNmb3JtIGZ1bmN0aW9ucy5cbiAqXG4gKiBBZGRpdGlvbmFsIHRyYW5zZm9ybXMgbWF5IGJlIGFkZGVkIGJ5IHVzaW5nIHRoZSBodHRwOi8vcHJvajRqcy5vcmcvXG4gKiBsaWJyYXJ5ICh2ZXJzaW9uIDIuMiBvciBsYXRlcikuIFlvdSBjYW4gdXNlIHRoZSBmdWxsIGJ1aWxkIHN1cHBsaWVkIGJ5XG4gKiBQcm9qNGpzLCBvciBjcmVhdGUgYSBjdXN0b20gYnVpbGQgdG8gc3VwcG9ydCB0aG9zZSBwcm9qZWN0aW9ucyB5b3UgbmVlZDsgc2VlXG4gKiB0aGUgUHJvajRqcyB3ZWJzaXRlIGZvciBob3cgdG8gZG8gdGhpcy4gWW91IGFsc28gbmVlZCB0aGUgUHJvajRqcyBkZWZpbml0aW9uc1xuICogZm9yIHRoZSByZXF1aXJlZCBwcm9qZWN0aW9ucy4gVGhlc2UgZGVmaW5pdGlvbnMgY2FuIGJlIG9idGFpbmVkIGZyb21cbiAqIGh0dHBzOi8vZXBzZy5pby8sIGFuZCBhcmUgYSBKUyBmdW5jdGlvbiwgc28gY2FuIGJlIGxvYWRlZCBpbiBhIHNjcmlwdFxuICogdGFnIChhcyBpbiB0aGUgZXhhbXBsZXMpIG9yIHBhc3RlZCBpbnRvIHlvdXIgYXBwbGljYXRpb24uXG4gKlxuICogQWZ0ZXIgYWxsIHJlcXVpcmVkIHByb2plY3Rpb24gZGVmaW5pdGlvbnMgYXJlIGFkZGVkIHRvIHByb2o0J3MgcmVnaXN0cnkgKGJ5XG4gKiB1c2luZyBgcHJvajQuZGVmcygpYCksIHNpbXBseSBjYWxsIGByZWdpc3Rlcihwcm9qNClgIGZyb20gdGhlIGBvbC9wcm9qL3Byb2o0YFxuICogcGFja2FnZS4gRXhpc3RpbmcgdHJhbnNmb3JtcyBhcmUgbm90IGNoYW5nZWQgYnkgdGhpcyBmdW5jdGlvbi4gU2VlXG4gKiBleGFtcGxlcy93bXMtaW1hZ2UtY3VzdG9tLXByb2ogZm9yIGFuIGV4YW1wbGUgb2YgdGhpcy5cbiAqXG4gKiBBZGRpdGlvbmFsIHByb2plY3Rpb24gZGVmaW5pdGlvbnMgY2FuIGJlIHJlZ2lzdGVyZWQgd2l0aCBgcHJvajQuZGVmcygpYCBhbnlcbiAqIHRpbWUuIEp1c3QgbWFrZSBzdXJlIHRvIGNhbGwgYHJlZ2lzdGVyKHByb2o0KWAgYWdhaW47IGZvciBleGFtcGxlLCB3aXRoIHVzZXItc3VwcGxpZWQgZGF0YSB3aGVyZSB5b3UgZG9uJ3RcbiAqIGtub3cgaW4gYWR2YW5jZSB3aGF0IHByb2plY3Rpb25zIGFyZSBuZWVkZWQsIHlvdSBjYW4gaW5pdGlhbGx5IGxvYWQgbWluaW1hbFxuICogc3VwcG9ydCBhbmQgdGhlbiBsb2FkIHdoaWNoZXZlciBhcmUgcmVxdWVzdGVkLlxuICpcbiAqIE5vdGUgdGhhdCBQcm9qNGpzIGRvZXMgbm90IHN1cHBvcnQgcHJvamVjdGlvbiBleHRlbnRzLiBJZiB5b3Ugd2FudCB0byBhZGRcbiAqIG9uZSBmb3IgY3JlYXRpbmcgZGVmYXVsdCB0aWxlIGdyaWRzLCB5b3UgY2FuIGFkZCBpdCBhZnRlciB0aGUgUHJvamVjdGlvblxuICogb2JqZWN0IGhhcyBiZWVuIGNyZWF0ZWQgd2l0aCBgc2V0RXh0ZW50YCwgZm9yIGV4YW1wbGUsXG4gKiBgZ2V0KCdFUFNHOjEyMzQnKS5zZXRFeHRlbnQoZXh0ZW50KWAuXG4gKlxuICogSW4gYWRkaXRpb24gdG8gUHJvajRqcyBzdXBwb3J0LCBhbnkgdHJhbnNmb3JtIGZ1bmN0aW9ucyBjYW4gYmUgYWRkZWQgd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9wcm9qfmFkZENvb3JkaW5hdGVUcmFuc2Zvcm1zfS4gVG8gdXNlIHRoaXMsIHlvdSBtdXN0IGZpcnN0IGNyZWF0ZVxuICogYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn0gb2JqZWN0IGZvciB0aGUgbmV3IHByb2plY3Rpb24gYW5kIGFkZCBpdCB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2p+YWRkUHJvamVjdGlvbn0uIFlvdSBjYW4gdGhlbiBhZGQgdGhlIGZvcndhcmQgYW5kIGludmVyc2VcbiAqIGZ1bmN0aW9ucyB3aXRoIHtAbGluayBtb2R1bGU6b2wvcHJvan5hZGRDb29yZGluYXRlVHJhbnNmb3Jtc30uIFNlZVxuICogZXhhbXBsZXMvd21zLWN1c3RvbS1wcm9qIGZvciBhbiBleGFtcGxlIG9mIHRoaXMuXG4gKlxuICogTm90ZSB0aGF0IGlmIG5vIHRyYW5zZm9ybXMgYXJlIG5lZWRlZCBhbmQgeW91IG9ubHkgbmVlZCB0byBkZWZpbmUgdGhlXG4gKiBwcm9qZWN0aW9uLCBqdXN0IGFkZCBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2p+YWRkUHJvamVjdGlvbn0uIFNlZSBleGFtcGxlcy93bXMtbm8tcHJvaiBmb3IgYW4gZXhhbXBsZSBvZlxuICogdGhpcy5cbiAqL1xuaW1wb3J0IHtnZXREaXN0YW5jZX0gZnJvbSAnLi9zcGhlcmUuanMnO1xuaW1wb3J0IHthcHBseVRyYW5zZm9ybX0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHttb2R1bG99IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQge3RvRVBTRzQzMjYsIGZyb21FUFNHNDMyNiwgUFJPSkVDVElPTlMgYXMgRVBTRzM4NTdfUFJPSkVDVElPTlN9IGZyb20gJy4vcHJvai9lcHNnMzg1Ny5qcyc7XG5pbXBvcnQge1BST0pFQ1RJT05TIGFzIEVQU0c0MzI2X1BST0pFQ1RJT05TfSBmcm9tICcuL3Byb2ovZXBzZzQzMjYuanMnO1xuaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnLi9wcm9qL1Byb2plY3Rpb24uanMnO1xuaW1wb3J0IFVuaXRzLCB7TUVURVJTX1BFUl9VTklUfSBmcm9tICcuL3Byb2ovVW5pdHMuanMnO1xuaW1wb3J0ICogYXMgcHJvamVjdGlvbnMgZnJvbSAnLi9wcm9qL3Byb2plY3Rpb25zLmpzJztcbmltcG9ydCB7YWRkIGFzIGFkZFRyYW5zZm9ybUZ1bmMsIGNsZWFyIGFzIGNsZWFyVHJhbnNmb3JtRnVuY3MsIGdldCBhcyBnZXRUcmFuc2Zvcm1GdW5jfSBmcm9tICcuL3Byb2ovdHJhbnNmb3Jtcy5qcyc7XG5cblxuLyoqXG4gKiBBIHByb2plY3Rpb24gYXMge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259LCBTUlMgaWRlbnRpZmllclxuICogc3RyaW5nIG9yIHVuZGVmaW5lZC5cbiAqIEB0eXBlZGVmIHtQcm9qZWN0aW9ufHN0cmluZ3x1bmRlZmluZWR9IFByb2plY3Rpb25MaWtlXG4gKiBAYXBpXG4gKi9cblxuXG4vKipcbiAqIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIGFjY2VwdHMgYW4gYXJyYXkgb2YgaW5wdXQgY29vcmRpbmF0ZSB2YWx1ZXMsIGFuIG9wdGlvbmFsXG4gKiBvdXRwdXQgYXJyYXksIGFuZCBhbiBvcHRpb25hbCBkaW1lbnNpb24gKGRlZmF1bHQgc2hvdWxkIGJlIDIpLiAgVGhlIGZ1bmN0aW9uXG4gKiB0cmFuc2Zvcm1zIHRoZSBpbnB1dCBjb29yZGluYXRlIHZhbHVlcywgcG9wdWxhdGVzIHRoZSBvdXRwdXQgYXJyYXksIGFuZFxuICogcmV0dXJucyB0aGUgb3V0cHV0IGFycmF5LlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihBcnJheTxudW1iZXI+LCBBcnJheTxudW1iZXI+PSwgbnVtYmVyPSk6IEFycmF5PG51bWJlcj59IFRyYW5zZm9ybUZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cblxuXG5leHBvcnQge01FVEVSU19QRVJfVU5JVH07XG5cbmV4cG9ydCB7UHJvamVjdGlvbn07XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBjb29yZGluYXRlIGFycmF5LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X291dHB1dCBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9kaW1lbnNpb24gRGltZW5zaW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3V0cHV0IGNvb3JkaW5hdGUgYXJyYXkgKG5ldyBhcnJheSwgc2FtZSBjb29yZGluYXRlXG4gKiAgICAgdmFsdWVzKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lVHJhbnNmb3JtKGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gIHZhciBvdXRwdXQ7XG4gIGlmIChvcHRfb3V0cHV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnB1dC5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBvcHRfb3V0cHV0W2ldID0gaW5wdXRbaV07XG4gICAgfVxuICAgIG91dHB1dCA9IG9wdF9vdXRwdXQ7XG4gIH0gZWxzZSB7XG4gICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgfVxuICByZXR1cm4gb3V0cHV0O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBjb29yZGluYXRlIGFycmF5LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X291dHB1dCBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9kaW1lbnNpb24gRGltZW5zaW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gSW5wdXQgY29vcmRpbmF0ZSBhcnJheSAoc2FtZSBhcnJheSBhcyBpbnB1dCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eVRyYW5zZm9ybShpbnB1dCwgb3B0X291dHB1dCwgb3B0X2RpbWVuc2lvbikge1xuICBpZiAob3B0X291dHB1dCAhPT0gdW5kZWZpbmVkICYmIGlucHV0ICE9PSBvcHRfb3V0cHV0KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gaW5wdXQubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgb3B0X291dHB1dFtpXSA9IGlucHV0W2ldO1xuICAgIH1cbiAgICBpbnB1dCA9IG9wdF9vdXRwdXQ7XG4gIH1cbiAgcmV0dXJuIGlucHV0O1xufVxuXG5cbi8qKlxuICogQWRkIGEgUHJvamVjdGlvbiBvYmplY3QgdG8gdGhlIGxpc3Qgb2Ygc3VwcG9ydGVkIHByb2plY3Rpb25zIHRoYXQgY2FuIGJlXG4gKiBsb29rZWQgdXAgYnkgdGhlaXIgY29kZS5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHByb2plY3Rpb24gUHJvamVjdGlvbiBpbnN0YW5jZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICBwcm9qZWN0aW9ucy5hZGQocHJvamVjdGlvbi5nZXRDb2RlKCksIHByb2plY3Rpb24pO1xuICBhZGRUcmFuc2Zvcm1GdW5jKHByb2plY3Rpb24sIHByb2plY3Rpb24sIGNsb25lVHJhbnNmb3JtKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8UHJvamVjdGlvbj59IHByb2plY3Rpb25zIFByb2plY3Rpb25zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUHJvamVjdGlvbnMocHJvamVjdGlvbnMpIHtcbiAgcHJvamVjdGlvbnMuZm9yRWFjaChhZGRQcm9qZWN0aW9uKTtcbn1cblxuXG4vKipcbiAqIEZldGNoZXMgYSBQcm9qZWN0aW9uIG9iamVjdCBmb3IgdGhlIGNvZGUgc3BlY2lmaWVkLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb25MaWtlIEVpdGhlciBhIGNvZGUgc3RyaW5nIHdoaWNoIGlzXG4gKiAgICAgYSBjb21iaW5hdGlvbiBvZiBhdXRob3JpdHkgYW5kIGlkZW50aWZpZXIgc3VjaCBhcyBcIkVQU0c6NDMyNlwiLCBvciBhblxuICogICAgIGV4aXN0aW5nIHByb2plY3Rpb24gb2JqZWN0LCBvciB1bmRlZmluZWQuXG4gKiBAcmV0dXJuIHtQcm9qZWN0aW9ufSBQcm9qZWN0aW9uIG9iamVjdCwgb3IgbnVsbCBpZiBub3QgaW4gbGlzdC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldChwcm9qZWN0aW9uTGlrZSkge1xuICByZXR1cm4gdHlwZW9mIHByb2plY3Rpb25MaWtlID09PSAnc3RyaW5nJyA/XG4gICAgcHJvamVjdGlvbnMuZ2V0KC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAocHJvamVjdGlvbkxpa2UpKSA6XG4gICAgKC8qKiBAdHlwZSB7UHJvamVjdGlvbn0gKi8gKHByb2plY3Rpb25MaWtlKSB8fCBudWxsKTtcbn1cblxuXG4vKipcbiAqIEdldCB0aGUgcmVzb2x1dGlvbiBvZiB0aGUgcG9pbnQgaW4gZGVncmVlcyBvciBkaXN0YW5jZSB1bml0cy5cbiAqIEZvciBwcm9qZWN0aW9ucyB3aXRoIGRlZ3JlZXMgYXMgdGhlIHVuaXQgdGhpcyB3aWxsIHNpbXBseSByZXR1cm4gdGhlXG4gKiBwcm92aWRlZCByZXNvbHV0aW9uLiBGb3Igb3RoZXIgcHJvamVjdGlvbnMgdGhlIHBvaW50IHJlc29sdXRpb24gaXNcbiAqIGJ5IGRlZmF1bHQgZXN0aW1hdGVkIGJ5IHRyYW5zZm9ybWluZyB0aGUgJ3BvaW50JyBwaXhlbCB0byBFUFNHOjQzMjYsXG4gKiBtZWFzdXJpbmcgaXRzIHdpZHRoIGFuZCBoZWlnaHQgb24gdGhlIG5vcm1hbCBzcGhlcmUsXG4gKiBhbmQgdGFraW5nIHRoZSBhdmVyYWdlIG9mIHRoZSB3aWR0aCBhbmQgaGVpZ2h0LlxuICogQSBjdXN0b20gZnVuY3Rpb24gY2FuIGJlIHByb3ZpZGVkIGZvciBhIHNwZWNpZmljIHByb2plY3Rpb24sIGVpdGhlclxuICogYnkgc2V0dGluZyB0aGUgYGdldFBvaW50UmVzb2x1dGlvbmAgb3B0aW9uIGluIHRoZVxuICoge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbn0gY29uc3RydWN0b3Igb3IgYnkgdXNpbmdcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb24jc2V0R2V0UG9pbnRSZXNvbHV0aW9ufSB0byBjaGFuZ2UgYW4gZXhpc3RpbmdcbiAqIHByb2plY3Rpb24gb2JqZWN0LlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBUaGUgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIE5vbWluYWwgcmVzb2x1dGlvbiBpbiBwcm9qZWN0aW9uIHVuaXRzLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnQgUG9pbnQgdG8gZmluZCBhZGp1c3RlZCByZXNvbHV0aW9uIGF0LlxuICogQHBhcmFtIHtVbml0cz19IG9wdF91bml0cyBVbml0cyB0byBnZXQgdGhlIHBvaW50IHJlc29sdXRpb24gaW4uXG4gKiBEZWZhdWx0IGlzIHRoZSBwcm9qZWN0aW9uJ3MgdW5pdHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFBvaW50IHJlc29sdXRpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb2ludFJlc29sdXRpb24ocHJvamVjdGlvbiwgcmVzb2x1dGlvbiwgcG9pbnQsIG9wdF91bml0cykge1xuICBwcm9qZWN0aW9uID0gZ2V0KHByb2plY3Rpb24pO1xuICB2YXIgcG9pbnRSZXNvbHV0aW9uO1xuICB2YXIgZ2V0dGVyID0gcHJvamVjdGlvbi5nZXRQb2ludFJlc29sdXRpb25GdW5jKCk7XG4gIGlmIChnZXR0ZXIpIHtcbiAgICBwb2ludFJlc29sdXRpb24gPSBnZXR0ZXIocmVzb2x1dGlvbiwgcG9pbnQpO1xuICB9IGVsc2Uge1xuICAgIHZhciB1bml0cyA9IHByb2plY3Rpb24uZ2V0VW5pdHMoKTtcbiAgICBpZiAodW5pdHMgPT0gVW5pdHMuREVHUkVFUyAmJiAhb3B0X3VuaXRzIHx8IG9wdF91bml0cyA9PSBVbml0cy5ERUdSRUVTKSB7XG4gICAgICBwb2ludFJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBFc3RpbWF0ZSBwb2ludCByZXNvbHV0aW9uIGJ5IHRyYW5zZm9ybWluZyB0aGUgY2VudGVyIHBpeGVsIHRvIEVQU0c6NDMyNixcbiAgICAgIC8vIG1lYXN1cmluZyBpdHMgd2lkdGggYW5kIGhlaWdodCBvbiB0aGUgbm9ybWFsIHNwaGVyZSwgYW5kIHRha2luZyB0aGVcbiAgICAgIC8vIGF2ZXJhZ2Ugb2YgdGhlIHdpZHRoIGFuZCBoZWlnaHQuXG4gICAgICB2YXIgdG9FUFNHNDMyNiA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhwcm9qZWN0aW9uLCBnZXQoJ0VQU0c6NDMyNicpKTtcbiAgICAgIHZhciB2ZXJ0aWNlcyA9IFtcbiAgICAgICAgcG9pbnRbMF0gLSByZXNvbHV0aW9uIC8gMiwgcG9pbnRbMV0sXG4gICAgICAgIHBvaW50WzBdICsgcmVzb2x1dGlvbiAvIDIsIHBvaW50WzFdLFxuICAgICAgICBwb2ludFswXSwgcG9pbnRbMV0gLSByZXNvbHV0aW9uIC8gMixcbiAgICAgICAgcG9pbnRbMF0sIHBvaW50WzFdICsgcmVzb2x1dGlvbiAvIDJcbiAgICAgIF07XG4gICAgICB2ZXJ0aWNlcyA9IHRvRVBTRzQzMjYodmVydGljZXMsIHZlcnRpY2VzLCAyKTtcbiAgICAgIHZhciB3aWR0aCA9IGdldERpc3RhbmNlKHZlcnRpY2VzLnNsaWNlKDAsIDIpLCB2ZXJ0aWNlcy5zbGljZSgyLCA0KSk7XG4gICAgICB2YXIgaGVpZ2h0ID0gZ2V0RGlzdGFuY2UodmVydGljZXMuc2xpY2UoNCwgNiksIHZlcnRpY2VzLnNsaWNlKDYsIDgpKTtcbiAgICAgIHBvaW50UmVzb2x1dGlvbiA9ICh3aWR0aCArIGhlaWdodCkgLyAyO1xuICAgICAgdmFyIG1ldGVyc1BlclVuaXQgPSBvcHRfdW5pdHMgP1xuICAgICAgICBNRVRFUlNfUEVSX1VOSVRbb3B0X3VuaXRzXSA6XG4gICAgICAgIHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgaWYgKG1ldGVyc1BlclVuaXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwb2ludFJlc29sdXRpb24gLz0gbWV0ZXJzUGVyVW5pdDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBvaW50UmVzb2x1dGlvbjtcbn1cblxuXG4vKipcbiAqIFJlZ2lzdGVycyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnMgdGhhdCBkb24ndCBhbHRlciBjb29yZGluYXRlcy4gVGhvc2UgYWxsb3dcbiAqIHRvIHRyYW5zZm9ybSBiZXR3ZWVuIHByb2plY3Rpb25zIHdpdGggZXF1YWwgbWVhbmluZy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PFByb2plY3Rpb24+fSBwcm9qZWN0aW9ucyBQcm9qZWN0aW9ucy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyhwcm9qZWN0aW9ucykge1xuICBhZGRQcm9qZWN0aW9ucyhwcm9qZWN0aW9ucyk7XG4gIHByb2plY3Rpb25zLmZvckVhY2goZnVuY3Rpb24oc291cmNlKSB7XG4gICAgcHJvamVjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihkZXN0aW5hdGlvbikge1xuICAgICAgaWYgKHNvdXJjZSAhPT0gZGVzdGluYXRpb24pIHtcbiAgICAgICAgYWRkVHJhbnNmb3JtRnVuYyhzb3VyY2UsIGRlc3RpbmF0aW9uLCBjbG9uZVRyYW5zZm9ybSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5cbi8qKlxuICogUmVnaXN0ZXJzIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucyB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGluIGFueSBwcm9qZWN0aW9uXG4gKiBpbiBwcm9qZWN0aW9uMSB0byBhbnkgcHJvamVjdGlvbiBpbiBwcm9qZWN0aW9uMi5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PFByb2plY3Rpb24+fSBwcm9qZWN0aW9uczEgUHJvamVjdGlvbnMgd2l0aCBlcXVhbFxuICogICAgIG1lYW5pbmcuXG4gKiBAcGFyYW0ge0FycmF5PFByb2plY3Rpb24+fSBwcm9qZWN0aW9uczIgUHJvamVjdGlvbnMgd2l0aCBlcXVhbFxuICogICAgIG1lYW5pbmcuXG4gKiBAcGFyYW0ge1RyYW5zZm9ybUZ1bmN0aW9ufSBmb3J3YXJkVHJhbnNmb3JtIFRyYW5zZm9ybWF0aW9uIGZyb20gYW55XG4gKiAgIHByb2plY3Rpb24gaW4gcHJvamVjdGlvbjEgdG8gYW55IHByb2plY3Rpb24gaW4gcHJvamVjdGlvbjIuXG4gKiBAcGFyYW0ge1RyYW5zZm9ybUZ1bmN0aW9ufSBpbnZlcnNlVHJhbnNmb3JtIFRyYW5zZm9ybSBmcm9tIGFueSBwcm9qZWN0aW9uXG4gKiAgIGluIHByb2plY3Rpb24yIHRvIGFueSBwcm9qZWN0aW9uIGluIHByb2plY3Rpb24xLi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEVxdWl2YWxlbnRUcmFuc2Zvcm1zKHByb2plY3Rpb25zMSwgcHJvamVjdGlvbnMyLCBmb3J3YXJkVHJhbnNmb3JtLCBpbnZlcnNlVHJhbnNmb3JtKSB7XG4gIHByb2plY3Rpb25zMS5mb3JFYWNoKGZ1bmN0aW9uKHByb2plY3Rpb24xKSB7XG4gICAgcHJvamVjdGlvbnMyLmZvckVhY2goZnVuY3Rpb24ocHJvamVjdGlvbjIpIHtcbiAgICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbjEsIHByb2plY3Rpb24yLCBmb3J3YXJkVHJhbnNmb3JtKTtcbiAgICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbjIsIHByb2plY3Rpb24xLCBpbnZlcnNlVHJhbnNmb3JtKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cblxuLyoqXG4gKiBDbGVhciBhbGwgY2FjaGVkIHByb2plY3Rpb25zIGFuZCB0cmFuc2Zvcm1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJBbGxQcm9qZWN0aW9ucygpIHtcbiAgcHJvamVjdGlvbnMuY2xlYXIoKTtcbiAgY2xlYXJUcmFuc2Zvcm1GdW5jcygpO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufHN0cmluZ3x1bmRlZmluZWR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkZWZhdWx0Q29kZSBEZWZhdWx0IGNvZGUuXG4gKiBAcmV0dXJuIHtQcm9qZWN0aW9ufSBQcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvamVjdGlvbihwcm9qZWN0aW9uLCBkZWZhdWx0Q29kZSkge1xuICBpZiAoIXByb2plY3Rpb24pIHtcbiAgICByZXR1cm4gZ2V0KGRlZmF1bHRDb2RlKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgcHJvamVjdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZ2V0KHByb2plY3Rpb24pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAoXG4gICAgICAvKiogQHR5cGUge1Byb2plY3Rpb259ICovIChwcm9qZWN0aW9uKVxuICAgICk7XG4gIH1cbn1cblxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2p+VHJhbnNmb3JtRnVuY3Rpb259IGZyb20gYSBzaW1wbGUgMkQgY29vcmRpbmF0ZSB0cmFuc2Zvcm1cbiAqIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZFRyYW5zZm9ybSBDb29yZGluYXRlXG4gKiAgICAgdHJhbnNmb3JtLlxuICogQHJldHVybiB7VHJhbnNmb3JtRnVuY3Rpb259IFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRyYW5zZm9ybUZyb21Db29yZGluYXRlVHJhbnNmb3JtKGNvb3JkVHJhbnNmb3JtKSB7XG4gIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfb3V0cHV0IE91dHB1dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9kaW1lbnNpb24gRGltZW5zaW9uLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE91dHB1dC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbihpbnB1dCwgb3B0X291dHB1dCwgb3B0X2RpbWVuc2lvbikge1xuICAgICAgdmFyIGxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICAgIHZhciBkaW1lbnNpb24gPSBvcHRfZGltZW5zaW9uICE9PSB1bmRlZmluZWQgPyBvcHRfZGltZW5zaW9uIDogMjtcbiAgICAgIHZhciBvdXRwdXQgPSBvcHRfb3V0cHV0ICE9PSB1bmRlZmluZWQgPyBvcHRfb3V0cHV0IDogbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSBkaW1lbnNpb24pIHtcbiAgICAgICAgdmFyIHBvaW50ID0gY29vcmRUcmFuc2Zvcm0oW2lucHV0W2ldLCBpbnB1dFtpICsgMV1dKTtcbiAgICAgICAgb3V0cHV0W2ldID0gcG9pbnRbMF07XG4gICAgICAgIG91dHB1dFtpICsgMV0gPSBwb2ludFsxXTtcbiAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDE7IGogPj0gMjsgLS1qKSB7XG4gICAgICAgICAgb3V0cHV0W2kgKyBqXSA9IGlucHV0W2kgKyBqXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9KTtcbn1cblxuXG4vKipcbiAqIFJlZ2lzdGVycyBjb29yZGluYXRlIHRyYW5zZm9ybSBmdW5jdGlvbnMgdG8gY29udmVydCBjb29yZGluYXRlcyBiZXR3ZWVuIHRoZVxuICogc291cmNlIHByb2plY3Rpb24gYW5kIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogVGhlIGZvcndhcmQgYW5kIGludmVyc2UgZnVuY3Rpb25zIGNvbnZlcnQgY29vcmRpbmF0ZSBwYWlyczsgdGhpcyBmdW5jdGlvblxuICogY29udmVydHMgdGhlc2UgaW50byB0aGUgZnVuY3Rpb25zIHVzZWQgaW50ZXJuYWxseSB3aGljaCBhbHNvIGhhbmRsZVxuICogZXh0ZW50cyBhbmQgY29vcmRpbmF0ZSBhcnJheXMuXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZm9yd2FyZCBUaGUgZm9yd2FyZCB0cmFuc2Zvcm1cbiAqICAgICBmdW5jdGlvbiAodGhhdCBpcywgZnJvbSB0aGUgc291cmNlIHByb2plY3Rpb24gdG8gdGhlIGRlc3RpbmF0aW9uXG4gKiAgICAgcHJvamVjdGlvbikgdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfSBhcyBhcmd1bWVudCBhbmQgcmV0dXJuc1xuICogICAgIHRoZSB0cmFuc2Zvcm1lZCB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGludmVyc2UgVGhlIGludmVyc2UgdHJhbnNmb3JtXG4gKiAgICAgZnVuY3Rpb24gKHRoYXQgaXMsIGZyb20gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24gdG8gdGhlIHNvdXJjZVxuICogICAgIHByb2plY3Rpb24pIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gYXMgYXJndW1lbnQgYW5kIHJldHVybnNcbiAqICAgICB0aGUgdHJhbnNmb3JtZWQge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29vcmRpbmF0ZVRyYW5zZm9ybXMoc291cmNlLCBkZXN0aW5hdGlvbiwgZm9yd2FyZCwgaW52ZXJzZSkge1xuICB2YXIgc291cmNlUHJvaiA9IGdldChzb3VyY2UpO1xuICB2YXIgZGVzdFByb2ogPSBnZXQoZGVzdGluYXRpb24pO1xuICBhZGRUcmFuc2Zvcm1GdW5jKHNvdXJjZVByb2osIGRlc3RQcm9qLCBjcmVhdGVUcmFuc2Zvcm1Gcm9tQ29vcmRpbmF0ZVRyYW5zZm9ybShmb3J3YXJkKSk7XG4gIGFkZFRyYW5zZm9ybUZ1bmMoZGVzdFByb2osIHNvdXJjZVByb2osIGNyZWF0ZVRyYW5zZm9ybUZyb21Db29yZGluYXRlVHJhbnNmb3JtKGludmVyc2UpKTtcbn1cblxuXG4vKipcbiAqIFRyYW5zZm9ybXMgYSBjb29yZGluYXRlIGZyb20gbG9uZ2l0dWRlL2xhdGl0dWRlIHRvIGEgZGlmZmVyZW50IHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUgYXMgbG9uZ2l0dWRlIGFuZCBsYXRpdHVkZSwgaS5lLlxuICogICAgIGFuIGFycmF5IHdpdGggbG9uZ2l0dWRlIGFzIDFzdCBhbmQgbGF0aXR1ZGUgYXMgMm5kIGVsZW1lbnQuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlPX0gb3B0X3Byb2plY3Rpb24gVGFyZ2V0IHByb2plY3Rpb24uIFRoZVxuICogICAgIGRlZmF1bHQgaXMgV2ViIE1lcmNhdG9yLCBpLmUuICdFUFNHOjM4NTcnLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUgcHJvamVjdGVkIHRvIHRoZSB0YXJnZXQgcHJvamVjdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21Mb25MYXQoY29vcmRpbmF0ZSwgb3B0X3Byb2plY3Rpb24pIHtcbiAgcmV0dXJuIHRyYW5zZm9ybShjb29yZGluYXRlLCAnRVBTRzo0MzI2JyxcbiAgICBvcHRfcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X3Byb2plY3Rpb24gOiAnRVBTRzozODU3Jyk7XG59XG5cblxuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgY29vcmRpbmF0ZSB0byBsb25naXR1ZGUvbGF0aXR1ZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIFByb2plY3RlZCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZT19IG9wdF9wcm9qZWN0aW9uIFByb2plY3Rpb24gb2YgdGhlIGNvb3JkaW5hdGUuXG4gKiAgICAgVGhlIGRlZmF1bHQgaXMgV2ViIE1lcmNhdG9yLCBpLmUuICdFUFNHOjM4NTcnLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUgYXMgbG9uZ2l0dWRlIGFuZCBsYXRpdHVkZSwgaS5lLiBhbiBhcnJheVxuICogICAgIHdpdGggbG9uZ2l0dWRlIGFzIDFzdCBhbmQgbGF0aXR1ZGUgYXMgMm5kIGVsZW1lbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0xvbkxhdChjb29yZGluYXRlLCBvcHRfcHJvamVjdGlvbikge1xuICB2YXIgbG9uTGF0ID0gdHJhbnNmb3JtKGNvb3JkaW5hdGUsXG4gICAgb3B0X3Byb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9wcm9qZWN0aW9uIDogJ0VQU0c6Mzg1NycsICdFUFNHOjQzMjYnKTtcbiAgdmFyIGxvbiA9IGxvbkxhdFswXTtcbiAgaWYgKGxvbiA8IC0xODAgfHwgbG9uID4gMTgwKSB7XG4gICAgbG9uTGF0WzBdID0gbW9kdWxvKGxvbiArIDE4MCwgMzYwKSAtIDE4MDtcbiAgfVxuICByZXR1cm4gbG9uTGF0O1xufVxuXG5cbi8qKlxuICogQ2hlY2tzIGlmIHR3byBwcm9qZWN0aW9ucyBhcmUgdGhlIHNhbWUsIHRoYXQgaXMgZXZlcnkgY29vcmRpbmF0ZSBpbiBvbmVcbiAqIHByb2plY3Rpb24gZG9lcyByZXByZXNlbnQgdGhlIHNhbWUgZ2VvZ3JhcGhpYyBwb2ludCBhcyB0aGUgc2FtZSBjb29yZGluYXRlIGluXG4gKiB0aGUgb3RoZXIgcHJvamVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHByb2plY3Rpb24xIFByb2plY3Rpb24gMS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gcHJvamVjdGlvbjIgUHJvamVjdGlvbiAyLlxuICogQHJldHVybiB7Ym9vbGVhbn0gRXF1aXZhbGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWl2YWxlbnQocHJvamVjdGlvbjEsIHByb2plY3Rpb24yKSB7XG4gIGlmIChwcm9qZWN0aW9uMSA9PT0gcHJvamVjdGlvbjIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICB2YXIgZXF1YWxVbml0cyA9IHByb2plY3Rpb24xLmdldFVuaXRzKCkgPT09IHByb2plY3Rpb24yLmdldFVuaXRzKCk7XG4gIGlmIChwcm9qZWN0aW9uMS5nZXRDb2RlKCkgPT09IHByb2plY3Rpb24yLmdldENvZGUoKSkge1xuICAgIHJldHVybiBlcXVhbFVuaXRzO1xuICB9IGVsc2Uge1xuICAgIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHByb2plY3Rpb24xLCBwcm9qZWN0aW9uMik7XG4gICAgcmV0dXJuIHRyYW5zZm9ybUZ1bmMgPT09IGNsb25lVHJhbnNmb3JtICYmIGVxdWFsVW5pdHM7XG4gIH1cbn1cblxuXG4vKipcbiAqIFNlYXJjaGVzIGluIHRoZSBsaXN0IG9mIHRyYW5zZm9ybSBmdW5jdGlvbnMgZm9yIHRoZSBmdW5jdGlvbiBmb3IgY29udmVydGluZ1xuICogY29vcmRpbmF0ZXMgZnJvbSB0aGUgc291cmNlIHByb2plY3Rpb24gdG8gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBzb3VyY2VQcm9qZWN0aW9uIFNvdXJjZSBQcm9qZWN0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gZGVzdGluYXRpb25Qcm9qZWN0aW9uIERlc3RpbmF0aW9uIFByb2plY3Rpb25cbiAqICAgICBvYmplY3QuXG4gKiBAcmV0dXJuIHtUcmFuc2Zvcm1GdW5jdGlvbn0gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbikge1xuICB2YXIgc291cmNlQ29kZSA9IHNvdXJjZVByb2plY3Rpb24uZ2V0Q29kZSgpO1xuICB2YXIgZGVzdGluYXRpb25Db2RlID0gZGVzdGluYXRpb25Qcm9qZWN0aW9uLmdldENvZGUoKTtcbiAgdmFyIHRyYW5zZm9ybUZ1bmMgPSBnZXRUcmFuc2Zvcm1GdW5jKHNvdXJjZUNvZGUsIGRlc3RpbmF0aW9uQ29kZSk7XG4gIGlmICghdHJhbnNmb3JtRnVuYykge1xuICAgIHRyYW5zZm9ybUZ1bmMgPSBpZGVudGl0eVRyYW5zZm9ybTtcbiAgfVxuICByZXR1cm4gdHJhbnNmb3JtRnVuYztcbn1cblxuXG4vKipcbiAqIEdpdmVuIHRoZSBwcm9qZWN0aW9uLWxpa2Ugb2JqZWN0cywgc2VhcmNoZXMgZm9yIGEgdHJhbnNmb3JtYXRpb25cbiAqIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBjb29yZGluYXRlcyBhcnJheSBmcm9tIHRoZSBzb3VyY2UgcHJvamVjdGlvbiB0byB0aGVcbiAqIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7VHJhbnNmb3JtRnVuY3Rpb259IFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zZm9ybShzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gIHZhciBzb3VyY2VQcm9qZWN0aW9uID0gZ2V0KHNvdXJjZSk7XG4gIHZhciBkZXN0aW5hdGlvblByb2plY3Rpb24gPSBnZXQoZGVzdGluYXRpb24pO1xuICByZXR1cm4gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbik7XG59XG5cblxuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgY29vcmRpbmF0ZSBmcm9tIHNvdXJjZSBwcm9qZWN0aW9uIHRvIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBUaGlzIHJldHVybnMgYSBuZXcgY29vcmRpbmF0ZSAoYW5kIGRvZXMgbm90IG1vZGlmeSB0aGUgb3JpZ2luYWwpLlxuICpcbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2p+dHJhbnNmb3JtRXh0ZW50fSBmb3IgZXh0ZW50IHRyYW5zZm9ybWF0aW9uLlxuICogU2VlIHRoZSB0cmFuc2Zvcm0gbWV0aG9kIG9mIHtAbGluayBtb2R1bGU6b2wvZ2VvbS9HZW9tZXRyeX5HZW9tZXRyeX0gYW5kIGl0c1xuICogc3ViY2xhc3NlcyBmb3IgZ2VvbWV0cnkgdHJhbnNmb3Jtcy5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2UgU291cmNlIHByb2plY3Rpb24tbGlrZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24tbGlrZS5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtKGNvb3JkaW5hdGUsIHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgdmFyIHRyYW5zZm9ybUZ1bmMgPSBnZXRUcmFuc2Zvcm0oc291cmNlLCBkZXN0aW5hdGlvbik7XG4gIHJldHVybiB0cmFuc2Zvcm1GdW5jKGNvb3JkaW5hdGUsIHVuZGVmaW5lZCwgY29vcmRpbmF0ZS5sZW5ndGgpO1xufVxuXG5cbi8qKlxuICogVHJhbnNmb3JtcyBhbiBleHRlbnQgZnJvbSBzb3VyY2UgcHJvamVjdGlvbiB0byBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLiAgVGhpc1xuICogcmV0dXJucyBhIG5ldyBleHRlbnQgKGFuZCBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQgdG8gdHJhbnNmb3JtLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLWxpa2UuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLWxpa2UuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFRoZSB0cmFuc2Zvcm1lZCBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1FeHRlbnQoZXh0ZW50LCBzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtKHNvdXJjZSwgZGVzdGluYXRpb24pO1xuICByZXR1cm4gYXBwbHlUcmFuc2Zvcm0oZXh0ZW50LCB0cmFuc2Zvcm1GdW5jKTtcbn1cblxuXG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIGdpdmVuIHBvaW50IHRvIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50IFBvaW50LlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBzb3VyY2VQcm9qZWN0aW9uIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBkZXN0aW5hdGlvblByb2plY3Rpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBQb2ludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybVdpdGhQcm9qZWN0aW9ucyhwb2ludCwgc291cmNlUHJvamVjdGlvbiwgZGVzdGluYXRpb25Qcm9qZWN0aW9uKSB7XG4gIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbik7XG4gIHJldHVybiB0cmFuc2Zvcm1GdW5jKHBvaW50KTtcbn1cblxuLyoqXG4gKiBBZGQgdHJhbnNmb3JtcyB0byBhbmQgZnJvbSBFUFNHOjQzMjYgYW5kIEVQU0c6Mzg1Ny4gIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkXG4gKiBieSB3aGVuIHRoaXMgbW9kdWxlIGlzIGV4ZWN1dGVkIGFuZCBzaG91bGQgb25seSBuZWVkIHRvIGJlIGNhbGxlZCBhZ2FpbiBhZnRlclxuICogYGNsZWFyQWxsUHJvamVjdGlvbnMoKWAgaXMgY2FsbGVkIChlLmcuIGluIHRlc3RzKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZENvbW1vbigpIHtcbiAgLy8gQWRkIHRyYW5zZm9ybWF0aW9ucyB0aGF0IGRvbid0IGFsdGVyIGNvb3JkaW5hdGVzIHRvIGNvbnZlcnQgd2l0aGluIHNldCBvZlxuICAvLyBwcm9qZWN0aW9ucyB3aXRoIGVxdWFsIG1lYW5pbmcuXG4gIGFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyhFUFNHMzg1N19QUk9KRUNUSU9OUyk7XG4gIGFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyhFUFNHNDMyNl9QUk9KRUNUSU9OUyk7XG4gIC8vIEFkZCB0cmFuc2Zvcm1hdGlvbnMgdG8gY29udmVydCBFUFNHOjQzMjYgbGlrZSBjb29yZGluYXRlcyB0byBFUFNHOjM4NTcgbGlrZVxuICAvLyBjb29yZGluYXRlcyBhbmQgYmFjay5cbiAgYWRkRXF1aXZhbGVudFRyYW5zZm9ybXMoRVBTRzQzMjZfUFJPSkVDVElPTlMsIEVQU0czODU3X1BST0pFQ1RJT05TLCBmcm9tRVBTRzQzMjYsIHRvRVBTRzQzMjYpO1xufVxuXG5hZGRDb21tb24oKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvai5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdHJhbnNmb3JtXG4gKi9cbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuL2Fzc2VydHMuanMnO1xuXG5cbi8qKlxuICogQW4gYXJyYXkgcmVwcmVzZW50aW5nIGFuIGFmZmluZSAyZCB0cmFuc2Zvcm1hdGlvbiBmb3IgdXNlIHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvdHJhbnNmb3JtfSBmdW5jdGlvbnMuIFRoZSBhcnJheSBoYXMgNiBlbGVtZW50cy5cbiAqIEB0eXBlZGVmIHshQXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtXG4gKi9cblxuXG4vKipcbiAqIENvbGxlY3Rpb24gb2YgYWZmaW5lIDJkIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucy4gVGhlIGZ1bmN0aW9ucyB3b3JrIG9uIGFuXG4gKiBhcnJheSBvZiA2IGVsZW1lbnRzLiBUaGUgZWxlbWVudCBvcmRlciBpcyBjb21wYXRpYmxlIHdpdGggdGhlIFtTVkdNYXRyaXhcbiAqIGludGVyZmFjZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NWR01hdHJpeCkgYW5kIGlzXG4gKiBhIHN1YnNldCAoZWxlbWVudHMgYSB0byBmKSBvZiBhIDPDlzMgbWF0cml4OlxuICogYGBgXG4gKiBbIGEgYyBlIF1cbiAqIFsgYiBkIGYgXVxuICogWyAwIDAgMSBdXG4gKiBgYGBcbiAqL1xuXG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEB0eXBlIHtUcmFuc2Zvcm19XG4gKi9cbnZhciB0bXBfID0gbmV3IEFycmF5KDYpO1xuXG5cbi8qKlxuICogQ3JlYXRlIGFuIGlkZW50aXR5IHRyYW5zZm9ybS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IElkZW50aXR5IHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgcmV0dXJuIFsxLCAwLCAwLCAxLCAwLCAwXTtcbn1cblxuXG4vKipcbiAqIFJlc2V0cyB0aGUgZ2l2ZW4gdHJhbnNmb3JtIHRvIGFuIGlkZW50aXR5IHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0KHRyYW5zZm9ybSkge1xuICByZXR1cm4gc2V0KHRyYW5zZm9ybSwgMSwgMCwgMCwgMSwgMCwgMCk7XG59XG5cblxuLyoqXG4gKiBNdWx0aXBseSB0aGUgdW5kZXJseWluZyBtYXRyaWNlcyBvZiB0d28gdHJhbnNmb3JtcyBhbmQgcmV0dXJuIHRoZSByZXN1bHQgaW5cbiAqIHRoZSBmaXJzdCB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTEgVHJhbnNmb3JtIHBhcmFtZXRlcnMgb2YgbWF0cml4IDEuXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTIgVHJhbnNmb3JtIHBhcmFtZXRlcnMgb2YgbWF0cml4IDIuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0xIG11bHRpcGxpZWQgd2l0aCB0cmFuc2Zvcm0yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkodHJhbnNmb3JtMSwgdHJhbnNmb3JtMikge1xuICB2YXIgYTEgPSB0cmFuc2Zvcm0xWzBdO1xuICB2YXIgYjEgPSB0cmFuc2Zvcm0xWzFdO1xuICB2YXIgYzEgPSB0cmFuc2Zvcm0xWzJdO1xuICB2YXIgZDEgPSB0cmFuc2Zvcm0xWzNdO1xuICB2YXIgZTEgPSB0cmFuc2Zvcm0xWzRdO1xuICB2YXIgZjEgPSB0cmFuc2Zvcm0xWzVdO1xuICB2YXIgYTIgPSB0cmFuc2Zvcm0yWzBdO1xuICB2YXIgYjIgPSB0cmFuc2Zvcm0yWzFdO1xuICB2YXIgYzIgPSB0cmFuc2Zvcm0yWzJdO1xuICB2YXIgZDIgPSB0cmFuc2Zvcm0yWzNdO1xuICB2YXIgZTIgPSB0cmFuc2Zvcm0yWzRdO1xuICB2YXIgZjIgPSB0cmFuc2Zvcm0yWzVdO1xuXG4gIHRyYW5zZm9ybTFbMF0gPSBhMSAqIGEyICsgYzEgKiBiMjtcbiAgdHJhbnNmb3JtMVsxXSA9IGIxICogYTIgKyBkMSAqIGIyO1xuICB0cmFuc2Zvcm0xWzJdID0gYTEgKiBjMiArIGMxICogZDI7XG4gIHRyYW5zZm9ybTFbM10gPSBiMSAqIGMyICsgZDEgKiBkMjtcbiAgdHJhbnNmb3JtMVs0XSA9IGExICogZTIgKyBjMSAqIGYyICsgZTE7XG4gIHRyYW5zZm9ybTFbNV0gPSBiMSAqIGUyICsgZDEgKiBmMiArIGYxO1xuXG4gIHJldHVybiB0cmFuc2Zvcm0xO1xufVxuXG4vKipcbiAqIFNldCB0aGUgdHJhbnNmb3JtIGNvbXBvbmVudHMgYS1mIG9uIGEgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGEgVGhlIGEgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gYiBUaGUgYiBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBjIFRoZSBjIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGQgVGhlIGQgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gZSBUaGUgZSBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmIFRoZSBmIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gTWF0cml4IHdpdGggdHJhbnNmb3JtIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXQodHJhbnNmb3JtLCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIHRyYW5zZm9ybVswXSA9IGE7XG4gIHRyYW5zZm9ybVsxXSA9IGI7XG4gIHRyYW5zZm9ybVsyXSA9IGM7XG4gIHRyYW5zZm9ybVszXSA9IGQ7XG4gIHRyYW5zZm9ybVs0XSA9IGU7XG4gIHRyYW5zZm9ybVs1XSA9IGY7XG4gIHJldHVybiB0cmFuc2Zvcm07XG59XG5cblxuLyoqXG4gKiBTZXQgdHJhbnNmb3JtIG9uIG9uZSBtYXRyaXggZnJvbSBhbm90aGVyIG1hdHJpeC5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSBNYXRyaXggdG8gc2V0IHRyYW5zZm9ybSB0by5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMiBNYXRyaXggdG8gc2V0IHRyYW5zZm9ybSBmcm9tLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSB3aXRoIHRyYW5zZm9ybSBmcm9tIHRyYW5zZm9ybTIgYXBwbGllZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEZyb21BcnJheSh0cmFuc2Zvcm0xLCB0cmFuc2Zvcm0yKSB7XG4gIHRyYW5zZm9ybTFbMF0gPSB0cmFuc2Zvcm0yWzBdO1xuICB0cmFuc2Zvcm0xWzFdID0gdHJhbnNmb3JtMlsxXTtcbiAgdHJhbnNmb3JtMVsyXSA9IHRyYW5zZm9ybTJbMl07XG4gIHRyYW5zZm9ybTFbM10gPSB0cmFuc2Zvcm0yWzNdO1xuICB0cmFuc2Zvcm0xWzRdID0gdHJhbnNmb3JtMls0XTtcbiAgdHJhbnNmb3JtMVs1XSA9IHRyYW5zZm9ybTJbNV07XG4gIHJldHVybiB0cmFuc2Zvcm0xO1xufVxuXG5cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgZ2l2ZW4gY29vcmRpbmF0ZSB3aXRoIHRoZSBnaXZlbiB0cmFuc2Zvcm0gcmV0dXJuaW5nIHRoZVxuICogcmVzdWx0aW5nLCB0cmFuc2Zvcm1lZCBjb29yZGluYXRlLiBUaGUgY29vcmRpbmF0ZSB3aWxsIGJlIG1vZGlmaWVkIGluLXBsYWNlLlxuICpcbiAqIEBwYXJhbSB7VHJhbnNmb3JtfSB0cmFuc2Zvcm0gVGhlIHRyYW5zZm9ybWF0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXxpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlIHRvIHRyYW5zZm9ybS5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfGltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHJldHVybiBjb29yZGluYXRlIHNvIHRoYXQgb3BlcmF0aW9ucyBjYW4gYmVcbiAqICAgICBjaGFpbmVkIHRvZ2V0aGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHkodHJhbnNmb3JtLCBjb29yZGluYXRlKSB7XG4gIHZhciB4ID0gY29vcmRpbmF0ZVswXTtcbiAgdmFyIHkgPSBjb29yZGluYXRlWzFdO1xuICBjb29yZGluYXRlWzBdID0gdHJhbnNmb3JtWzBdICogeCArIHRyYW5zZm9ybVsyXSAqIHkgKyB0cmFuc2Zvcm1bNF07XG4gIGNvb3JkaW5hdGVbMV0gPSB0cmFuc2Zvcm1bMV0gKiB4ICsgdHJhbnNmb3JtWzNdICogeSArIHRyYW5zZm9ybVs1XTtcbiAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG5cblxuLyoqXG4gKiBBcHBsaWVzIHJvdGF0aW9uIHRvIHRoZSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgQW5nbGUgaW4gcmFkaWFucy5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSByb3RhdGVkIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZSh0cmFuc2Zvcm0sIGFuZ2xlKSB7XG4gIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gIHZhciBzaW4gPSBNYXRoLnNpbihhbmdsZSk7XG4gIHJldHVybiBtdWx0aXBseSh0cmFuc2Zvcm0sIHNldCh0bXBfLCBjb3MsIHNpbiwgLXNpbiwgY29zLCAwLCAwKSk7XG59XG5cblxuLyoqXG4gKiBBcHBsaWVzIHNjYWxlIHRvIGEgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IHggU2NhbGUgZmFjdG9yIHguXG4gKiBAcGFyYW0ge251bWJlcn0geSBTY2FsZSBmYWN0b3IgeS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBzY2FsZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUodHJhbnNmb3JtLCB4LCB5KSB7XG4gIHJldHVybiBtdWx0aXBseSh0cmFuc2Zvcm0sIHNldCh0bXBfLCB4LCAwLCAwLCB5LCAwLCAwKSk7XG59XG5cblxuLyoqXG4gKiBBcHBsaWVzIHRyYW5zbGF0aW9uIHRvIHRoZSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gZHggVHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeSBUcmFuc2xhdGlvbiB5LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIHRyYW5zbGF0ZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKHRyYW5zZm9ybSwgZHgsIGR5KSB7XG4gIHJldHVybiBtdWx0aXBseSh0cmFuc2Zvcm0sIHNldCh0bXBfLCAxLCAwLCAwLCAxLCBkeCwgZHkpKTtcbn1cblxuXG4vKipcbiAqIENyZWF0ZXMgYSBjb21wb3NpdGUgdHJhbnNmb3JtIGdpdmVuIGFuIGluaXRpYWwgdHJhbnNsYXRpb24sIHNjYWxlLCByb3RhdGlvbiwgYW5kXG4gKiBmaW5hbCB0cmFuc2xhdGlvbiAoaW4gdGhhdCBvcmRlciBvbmx5LCBub3QgY29tbXV0YXRpdmUpLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVGhlIHRyYW5zZm9ybSAod2lsbCBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gKiBAcGFyYW0ge251bWJlcn0gZHgxIEluaXRpYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTEgSW5pdGlhbCB0cmFuc2xhdGlvbiB5LlxuICogQHBhcmFtIHtudW1iZXJ9IHN4IFNjYWxlIGZhY3RvciB4LlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciB5LlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIChpbiBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeDIgRmluYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTIgRmluYWwgdHJhbnNsYXRpb24geS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBjb21wb3NpdGUgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcG9zZSh0cmFuc2Zvcm0sIGR4MSwgZHkxLCBzeCwgc3ksIGFuZ2xlLCBkeDIsIGR5Mikge1xuICB2YXIgc2luID0gTWF0aC5zaW4oYW5nbGUpO1xuICB2YXIgY29zID0gTWF0aC5jb3MoYW5nbGUpO1xuICB0cmFuc2Zvcm1bMF0gPSBzeCAqIGNvcztcbiAgdHJhbnNmb3JtWzFdID0gc3kgKiBzaW47XG4gIHRyYW5zZm9ybVsyXSA9IC1zeCAqIHNpbjtcbiAgdHJhbnNmb3JtWzNdID0gc3kgKiBjb3M7XG4gIHRyYW5zZm9ybVs0XSA9IGR4MiAqIHN4ICogY29zIC0gZHkyICogc3ggKiBzaW4gKyBkeDE7XG4gIHRyYW5zZm9ybVs1XSA9IGR4MiAqIHN5ICogc2luICsgZHkyICogc3kgKiBjb3MgKyBkeTE7XG4gIHJldHVybiB0cmFuc2Zvcm07XG59XG5cblxuLyoqXG4gKiBJbnZlcnQgdGhlIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IEludmVyc2Ugb2YgdGhlIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludmVydCh0cmFuc2Zvcm0pIHtcbiAgdmFyIGRldCA9IGRldGVybWluYW50KHRyYW5zZm9ybSk7XG4gIGFzc2VydChkZXQgIT09IDAsIDMyKTsgLy8gVHJhbnNmb3JtYXRpb24gbWF0cml4IGNhbm5vdCBiZSBpbnZlcnRlZFxuXG4gIHZhciBhID0gdHJhbnNmb3JtWzBdO1xuICB2YXIgYiA9IHRyYW5zZm9ybVsxXTtcbiAgdmFyIGMgPSB0cmFuc2Zvcm1bMl07XG4gIHZhciBkID0gdHJhbnNmb3JtWzNdO1xuICB2YXIgZSA9IHRyYW5zZm9ybVs0XTtcbiAgdmFyIGYgPSB0cmFuc2Zvcm1bNV07XG5cbiAgdHJhbnNmb3JtWzBdID0gZCAvIGRldDtcbiAgdHJhbnNmb3JtWzFdID0gLWIgLyBkZXQ7XG4gIHRyYW5zZm9ybVsyXSA9IC1jIC8gZGV0O1xuICB0cmFuc2Zvcm1bM10gPSBhIC8gZGV0O1xuICB0cmFuc2Zvcm1bNF0gPSAoYyAqIGYgLSBkICogZSkgLyBkZXQ7XG4gIHRyYW5zZm9ybVs1XSA9IC0oYSAqIGYgLSBiICogZSkgLyBkZXQ7XG5cbiAgcmV0dXJuIHRyYW5zZm9ybTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgdGhlIGRldGVybWluYW50IG9mIHRoZSBnaXZlbiBtYXRyaXguXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IG1hdCBNYXRyaXguXG4gKiBAcmV0dXJuIHtudW1iZXJ9IERldGVybWluYW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGV0ZXJtaW5hbnQobWF0KSB7XG4gIHJldHVybiBtYXRbMF0gKiBtYXRbM10gLSBtYXRbMV0gKiBtYXRbMl07XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9HZW9tZXRyeVxuICovXG5pbXBvcnQge2Fic3RyYWN0fSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQge2NyZWF0ZUVtcHR5LCBnZXRIZWlnaHQsIHJldHVybk9yVXBkYXRlfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHt0cmFuc2Zvcm0yRH0gZnJvbSAnLi9mbGF0L3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQge2dldCBhcyBnZXRQcm9qZWN0aW9uLCBnZXRUcmFuc2Zvcm19IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IFVuaXRzIGZyb20gJy4uL3Byb2ovVW5pdHMuanMnO1xuaW1wb3J0IHtjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm19IGZyb20gJy4uL3RyYW5zZm9ybS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAqL1xudmFyIHRtcFRyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQmFzZSBjbGFzcyBmb3IgdmVjdG9yIGdlb21ldHJpZXMuXG4gKlxuICogVG8gZ2V0IG5vdGlmaWVkIG9mIGNoYW5nZXMgdG8gdGhlIGdlb21ldHJ5LCByZWdpc3RlciBhIGxpc3RlbmVyIGZvciB0aGVcbiAqIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgb24geW91ciBnZW9tZXRyeSBpbnN0YW5jZS5cbiAqXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xudmFyIEdlb21ldHJ5ID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoQmFzZU9iamVjdCkge1xuICBmdW5jdGlvbiBHZW9tZXRyeSgpIHtcblxuICAgIEJhc2VPYmplY3QuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICovXG4gICAgdGhpcy5leHRlbnRfID0gY3JlYXRlRW1wdHkoKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmV4dGVudFJldmlzaW9uXyA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBHZW9tZXRyeT59XG4gICAgICovXG4gICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlDYWNoZSA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24gPSAwO1xuXG4gIH1cblxuICBpZiAoIEJhc2VPYmplY3QgKSBHZW9tZXRyeS5fX3Byb3RvX18gPSBCYXNlT2JqZWN0O1xuICBHZW9tZXRyeS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBCYXNlT2JqZWN0ICYmIEJhc2VPYmplY3QucHJvdG90eXBlICk7XG4gIEdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdlb21ldHJ5O1xuXG4gIC8qKlxuICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcmV0dXJuIHshR2VvbWV0cnl9IENsb25lLlxuICAgKi9cbiAgR2VvbWV0cnkucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gY2xvbmUgKCkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAqL1xuICBHZW9tZXRyeS5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiBjbG9zZXN0UG9pbnRYWSAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICAgKi9cbiAgR2VvbWV0cnkucHJvdG90eXBlLmNvbnRhaW5zWFkgPSBmdW5jdGlvbiBjb250YWluc1hZICh4LCB5KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGNsb3Nlc3QgcG9pbnQgb2YgdGhlIGdlb21ldHJ5IHRvIHRoZSBwYXNzZWQgcG9pbnQgYXNcbiAgICoge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGUgY29vcmRpbmF0ZX0uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludCBQb2ludC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU9fSBvcHRfY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ2xvc2VzdCBwb2ludC5cbiAgICogQGFwaVxuICAgKi9cbiAgR2VvbWV0cnkucHJvdG90eXBlLmdldENsb3Nlc3RQb2ludCA9IGZ1bmN0aW9uIGdldENsb3Nlc3RQb2ludCAocG9pbnQsIG9wdF9jbG9zZXN0UG9pbnQpIHtcbiAgICB2YXIgY2xvc2VzdFBvaW50ID0gb3B0X2Nsb3Nlc3RQb2ludCA/IG9wdF9jbG9zZXN0UG9pbnQgOiBbTmFOLCBOYU5dO1xuICAgIHRoaXMuY2xvc2VzdFBvaW50WFkocG9pbnRbMF0sIHBvaW50WzFdLCBjbG9zZXN0UG9pbnQsIEluZmluaXR5KTtcbiAgICByZXR1cm4gY2xvc2VzdFBvaW50O1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBnZW9tZXRyeSBpbmNsdWRlcyB0aGUgc3BlY2lmaWVkIGNvb3JkaW5hdGUuIElmIHRoZVxuICAgKiBjb29yZGluYXRlIGlzIG9uIHRoZSBib3VuZGFyeSBvZiB0aGUgZ2VvbWV0cnksIHJldHVybnMgZmFsc2UuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIGNvb3JkaW5hdGUuXG4gICAqIEBhcGlcbiAgICovXG4gIEdlb21ldHJ5LnByb3RvdHlwZS5pbnRlcnNlY3RzQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uIGludGVyc2VjdHNDb29yZGluYXRlIChjb29yZGluYXRlKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbnNYWShjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdKTtcbiAgfTtcblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKi9cbiAgR2VvbWV0cnkucHJvdG90eXBlLmNvbXB1dGVFeHRlbnQgPSBmdW5jdGlvbiBjb21wdXRlRXh0ZW50IChleHRlbnQpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBleHRlbnQgb2YgdGhlIGdlb21ldHJ5LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ9fSBvcHRfZXh0ZW50IEV4dGVudC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgR2VvbWV0cnkucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uIGdldEV4dGVudCAob3B0X2V4dGVudCkge1xuICAgIGlmICh0aGlzLmV4dGVudFJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgIHRoaXMuZXh0ZW50XyA9IHRoaXMuY29tcHV0ZUV4dGVudCh0aGlzLmV4dGVudF8pO1xuICAgICAgdGhpcy5leHRlbnRSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgfVxuICAgIHJldHVybiByZXR1cm5PclVwZGF0ZSh0aGlzLmV4dGVudF8sIG9wdF9leHRlbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSb3RhdGUgdGhlIGdlb21ldHJ5IGFyb3VuZCBhIGdpdmVuIGNvb3JkaW5hdGUuIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5XG4gICAqIGNvb3JkaW5hdGVzIGluIHBsYWNlLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIGFuZ2xlIGluIHJhZGlhbnMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhbmNob3IgVGhlIHJvdGF0aW9uIGNlbnRlci5cbiAgICogQGFwaVxuICAgKi9cbiAgR2VvbWV0cnkucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uIHJvdGF0ZSAoYW5nbGUsIGFuY2hvcikge1xuICAgIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNjYWxlIHRoZSBnZW9tZXRyeSAod2l0aCBhbiBvcHRpb25hbCBvcmlnaW4pLiAgVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnlcbiAgICogY29vcmRpbmF0ZXMgaW4gcGxhY2UuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge251bWJlcn0gc3ggVGhlIHNjYWxpbmcgZmFjdG9yIGluIHRoZSB4LWRpcmVjdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfc3kgVGhlIHNjYWxpbmcgZmFjdG9yIGluIHRoZSB5LWRpcmVjdGlvbiAoZGVmYXVsdHMgdG9cbiAgICogICAgIHN4KS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU9fSBvcHRfYW5jaG9yIFRoZSBzY2FsZSBvcmlnaW4gKGRlZmF1bHRzIHRvIHRoZSBjZW50ZXJcbiAgICogICAgIG9mIHRoZSBnZW9tZXRyeSBleHRlbnQpLlxuICAgKiBAYXBpXG4gICAqL1xuICBHZW9tZXRyeS5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbiBzY2FsZSAoc3gsIG9wdF9zeSwgb3B0X2FuY2hvcikge1xuICAgIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGlzIGdlb21ldHJ5LiAgRm9yIGxpbmVzdHJpbmdzLCB0aGlzIHVzZXNcbiAgICogdGhlIHRoZSB7QGxpbmtcbiAgICogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmFtZXItRG91Z2xhcy1QZXVja2VyX2FsZ29yaXRobVxuICAgKiBEb3VnbGFzIFBldWNrZXJ9IGFsZ29yaXRobS4gIEZvciBwb2x5Z29ucywgYSBxdWFudGl6YXRpb24tYmFzZWRcbiAgICogc2ltcGxpZmljYXRpb24gaXMgdXNlZCB0byBwcmVzZXJ2ZSB0b3BvbG9neS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUaGUgdG9sZXJhbmNlIGRpc3RhbmNlIGZvciBzaW1wbGlmaWNhdGlvbi5cbiAgICogQHJldHVybiB7R2VvbWV0cnl9IEEgbmV3LCBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhlIG9yaWdpbmFsIGdlb21ldHJ5LlxuICAgKiBAYXBpXG4gICAqL1xuICBHZW9tZXRyeS5wcm90b3R5cGUuc2ltcGxpZnkgPSBmdW5jdGlvbiBzaW1wbGlmeSAodG9sZXJhbmNlKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U2ltcGxpZmllZEdlb21ldHJ5KHRvbGVyYW5jZSAqIHRvbGVyYW5jZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGlzIGdlb21ldHJ5IHVzaW5nIHRoZSBEb3VnbGFzIFBldWNrZXJcbiAgICogYWxnb3JpdGhtLlxuICAgKiBTZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmFtZXItRG91Z2xhcy1QZXVja2VyX2FsZ29yaXRobS5cbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICovXG4gIEdlb21ldHJ5LnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkgPSBmdW5jdGlvbiBnZXRTaW1wbGlmaWVkR2VvbWV0cnkgKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSB0eXBlIG9mIHRoaXMgZ2VvbWV0cnkuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5VHlwZS5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeSB0eXBlLlxuICAgKi9cbiAgR2VvbWV0cnkucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiBnZXRUeXBlICgpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogQXBwbHkgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gZWFjaCBjb29yZGluYXRlIG9mIHRoZSBnZW9tZXRyeS5cbiAgICogVGhlIGdlb21ldHJ5IGlzIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgKiBJZiB5b3UgZG8gbm90IHdhbnQgdGhlIGdlb21ldHJ5IG1vZGlmaWVkIGluIHBsYWNlLCBmaXJzdCBgY2xvbmUoKWAgaXQgYW5kXG4gICAqIHRoZW4gdXNlIHRoaXMgZnVuY3Rpb24gb24gdGhlIGNsb25lLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSB0cmFuc2Zvcm1GbiBUcmFuc2Zvcm0uXG4gICAqL1xuICBHZW9tZXRyeS5wcm90b3R5cGUuYXBwbHlUcmFuc2Zvcm0gPSBmdW5jdGlvbiBhcHBseVRyYW5zZm9ybSAodHJhbnNmb3JtRm4pIHtcbiAgICBhYnN0cmFjdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAgICovXG4gIEdlb21ldHJ5LnByb3RvdHlwZS5pbnRlcnNlY3RzRXh0ZW50ID0gZnVuY3Rpb24gaW50ZXJzZWN0c0V4dGVudCAoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0ZSB0aGUgZ2VvbWV0cnkuICBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeSBjb29yZGluYXRlcyBpbiBwbGFjZS4gIElmXG4gICAqIGluc3RlYWQgeW91IHdhbnQgYSBuZXcgZ2VvbWV0cnksIGZpcnN0IGBjbG9uZSgpYCB0aGlzIGdlb21ldHJ5LlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWCBEZWx0YSBYLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFZIERlbHRhIFkuXG4gICAqIEBhcGlcbiAgICovXG4gIEdlb21ldHJ5LnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbiB0cmFuc2xhdGUgKGRlbHRhWCwgZGVsdGFZKSB7XG4gICAgYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogVHJhbnNmb3JtIGVhY2ggY29vcmRpbmF0ZSBvZiB0aGUgZ2VvbWV0cnkgZnJvbSBvbmUgY29vcmRpbmF0ZSByZWZlcmVuY2VcbiAgICogc3lzdGVtIHRvIGFub3RoZXIuIFRoZSBnZW9tZXRyeSBpcyBtb2RpZmllZCBpbiBwbGFjZS5cbiAgICogRm9yIGV4YW1wbGUsIGEgbGluZSB3aWxsIGJlIHRyYW5zZm9ybWVkIHRvIGEgbGluZSBhbmQgYSBjaXJjbGUgdG8gYSBjaXJjbGUuXG4gICAqIElmIHlvdSBkbyBub3Qgd2FudCB0aGUgZ2VvbWV0cnkgbW9kaWZpZWQgaW4gcGxhY2UsIGZpcnN0IGBjbG9uZSgpYCBpdCBhbmRcbiAgICogdGhlbiB1c2UgdGhpcyBmdW5jdGlvbiBvbiB0aGUgY2xvbmUuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gc291cmNlIFRoZSBjdXJyZW50IHByb2plY3Rpb24uICBDYW4gYmUgYVxuICAgKiAgICAgc3RyaW5nIGlkZW50aWZpZXIgb3IgYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9ufSBvYmplY3QuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gVGhlIGRlc2lyZWQgcHJvamVjdGlvbi4gIENhbiBiZSBhXG4gICAqICAgICBzdHJpbmcgaWRlbnRpZmllciBvciBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb259IG9iamVjdC5cbiAgICogQHJldHVybiB7R2VvbWV0cnl9IFRoaXMgZ2VvbWV0cnkuICBOb3RlIHRoYXQgb3JpZ2luYWwgZ2VvbWV0cnkgaXNcbiAgICogICAgIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgKiBAYXBpXG4gICAqL1xuICBHZW9tZXRyeS5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gdHJhbnNmb3JtIChzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gKi9cbiAgICB2YXIgc291cmNlUHJvaiA9IGdldFByb2plY3Rpb24oc291cmNlKTtcbiAgICB2YXIgdHJhbnNmb3JtRm4gPSBzb3VyY2VQcm9qLmdldFVuaXRzKCkgPT0gVW5pdHMuVElMRV9QSVhFTFMgP1xuICAgICAgZnVuY3Rpb24oaW5Db29yZGluYXRlcywgb3V0Q29vcmRpbmF0ZXMsIHN0cmlkZSkge1xuICAgICAgICB2YXIgcGl4ZWxFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgICAgICB2YXIgcHJvamVjdGVkRXh0ZW50ID0gc291cmNlUHJvai5nZXRXb3JsZEV4dGVudCgpO1xuICAgICAgICB2YXIgc2NhbGUgPSBnZXRIZWlnaHQocHJvamVjdGVkRXh0ZW50KSAvIGdldEhlaWdodChwaXhlbEV4dGVudCk7XG4gICAgICAgIGNvbXBvc2VUcmFuc2Zvcm0odG1wVHJhbnNmb3JtLFxuICAgICAgICAgIHByb2plY3RlZEV4dGVudFswXSwgcHJvamVjdGVkRXh0ZW50WzNdLFxuICAgICAgICAgIHNjYWxlLCAtc2NhbGUsIDAsXG4gICAgICAgICAgMCwgMCk7XG4gICAgICAgIHRyYW5zZm9ybTJEKGluQ29vcmRpbmF0ZXMsIDAsIGluQ29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsXG4gICAgICAgICAgdG1wVHJhbnNmb3JtLCBvdXRDb29yZGluYXRlcyk7XG4gICAgICAgIHJldHVybiBnZXRUcmFuc2Zvcm0oc291cmNlUHJvaiwgZGVzdGluYXRpb24pKGluQ29vcmRpbmF0ZXMsIG91dENvb3JkaW5hdGVzLCBzdHJpZGUpO1xuICAgICAgfSA6XG4gICAgICBnZXRUcmFuc2Zvcm0oc291cmNlUHJvaiwgZGVzdGluYXRpb24pO1xuICAgIHRoaXMuYXBwbHlUcmFuc2Zvcm0odHJhbnNmb3JtRm4pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHJldHVybiBHZW9tZXRyeTtcbn0oQmFzZU9iamVjdCkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IEdlb21ldHJ5O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1HZW9tZXRyeS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9TaW1wbGVHZW9tZXRyeVxuICovXG5pbXBvcnQge2Fic3RyYWN0fSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7Y3JlYXRlT3JVcGRhdGVGcm9tRmxhdENvb3JkaW5hdGVzLCBnZXRDZW50ZXJ9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgR2VvbWV0cnkgZnJvbSAnLi9HZW9tZXRyeS5qcyc7XG5pbXBvcnQgR2VvbWV0cnlMYXlvdXQgZnJvbSAnLi9HZW9tZXRyeUxheW91dC5qcyc7XG5pbXBvcnQge3JvdGF0ZSwgc2NhbGUsIHRyYW5zbGF0ZSwgdHJhbnNmb3JtMkR9IGZyb20gJy4vZmxhdC90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHtjbGVhcn0gZnJvbSAnLi4vb2JqLmpzJztcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXM7IGRvIG5vdCBpbnN0YW50aWF0ZVxuICogaW4gYXBwcywgYXMgY2Fubm90IGJlIHJlbmRlcmVkLlxuICpcbiAqIEBhYnN0cmFjdFxuICogQGFwaVxuICovXG52YXIgU2ltcGxlR2VvbWV0cnkgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChHZW9tZXRyeSkge1xuICBmdW5jdGlvbiBTaW1wbGVHZW9tZXRyeSgpIHtcblxuICAgIEdlb21ldHJ5LmNhbGwodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge0dlb21ldHJ5TGF5b3V0fVxuICAgICAqL1xuICAgIHRoaXMubGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnN0cmlkZSA9IDI7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBudWxsO1xuXG4gIH1cblxuICBpZiAoIEdlb21ldHJ5ICkgU2ltcGxlR2VvbWV0cnkuX19wcm90b19fID0gR2VvbWV0cnk7XG4gIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEdlb21ldHJ5ICYmIEdlb21ldHJ5LnByb3RvdHlwZSApO1xuICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTaW1wbGVHZW9tZXRyeTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5jb21wdXRlRXh0ZW50ID0gZnVuY3Rpb24gY29tcHV0ZUV4dGVudCAoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlRnJvbUZsYXRDb29yZGluYXRlcyh0aGlzLmZsYXRDb29yZGluYXRlcyxcbiAgICAgIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsIGV4dGVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcmV0dXJuIHtBcnJheX0gQ29vcmRpbmF0ZXMuXG4gICAqL1xuICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBnZXRDb29yZGluYXRlcyAoKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgZmlyc3QgY29vcmRpbmF0ZSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gRmlyc3QgY29vcmRpbmF0ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldEZpcnN0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIGdldEZpcnN0Q29vcmRpbmF0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKDAsIHRoaXMuc3RyaWRlKTtcbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gRmxhdCBjb29yZGluYXRlcy5cbiAgICovXG4gIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRGbGF0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBnZXRGbGF0Q29vcmRpbmF0ZXMgKCkge1xuICAgIHJldHVybiB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBsYXN0IGNvb3JkaW5hdGUgb2YgdGhlIGdlb21ldHJ5LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IExhc3QgcG9pbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRMYXN0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIGdldExhc3RDb29yZGluYXRlICgpIHtcbiAgICByZXR1cm4gdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UodGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIC0gdGhpcy5zdHJpZGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHtAbGluayBtb2R1bGU6b2wvZ2VvbS9HZW9tZXRyeUxheW91dCBsYXlvdXR9IG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7R2VvbWV0cnlMYXlvdXR9IExheW91dC5cbiAgICogQGFwaVxuICAgKi9cbiAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldExheW91dCA9IGZ1bmN0aW9uIGdldExheW91dCAoKSB7XG4gICAgcmV0dXJuIHRoaXMubGF5b3V0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeSA9IGZ1bmN0aW9uIGdldFNpbXBsaWZpZWRHZW9tZXRyeSAoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgIGlmICh0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeVJldmlzaW9uICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgY2xlYXIodGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlDYWNoZSk7XG4gICAgICB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UgPSAwO1xuICAgICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlSZXZpc2lvbiA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICB9XG4gICAgLy8gSWYgc3F1YXJlZFRvbGVyYW5jZSBpcyBuZWdhdGl2ZSBvciBpZiB3ZSBrbm93IHRoYXQgc2ltcGxpZmljYXRpb24gd2lsbCBub3RcbiAgICAvLyBoYXZlIGFueSBlZmZlY3QgdGhlbiBqdXN0IHJldHVybiB0aGlzLlxuICAgIGlmIChzcXVhcmVkVG9sZXJhbmNlIDwgMCB8fFxuICAgICAgICAodGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlICE9PSAwICYmXG4gICAgICAgICBzcXVhcmVkVG9sZXJhbmNlIDw9IHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSkpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB2YXIga2V5ID0gc3F1YXJlZFRvbGVyYW5jZS50b1N0cmluZygpO1xuICAgIGlmICh0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeUNhY2hlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHJldHVybiB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeUNhY2hlW2tleV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBzaW1wbGlmaWVkR2VvbWV0cnkgPVxuICAgICAgICAgIHRoaXMuZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwoc3F1YXJlZFRvbGVyYW5jZSk7XG4gICAgICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IHNpbXBsaWZpZWRHZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIGlmIChzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA8IHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeUNhY2hlW2tleV0gPSBzaW1wbGlmaWVkR2VvbWV0cnk7XG4gICAgICAgIHJldHVybiBzaW1wbGlmaWVkR2VvbWV0cnk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTaW1wbGlmaWNhdGlvbiBkaWQgbm90IGFjdHVhbGx5IHJlbW92ZSBhbnkgY29vcmRpbmF0ZXMuICBXZSBub3cga25vd1xuICAgICAgICAvLyB0aGF0IGFueSBjYWxscyB0byBnZXRTaW1wbGlmaWVkR2VvbWV0cnkgd2l0aCBhIHNxdWFyZWRUb2xlcmFuY2UgbGVzc1xuICAgICAgICAvLyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBjdXJyZW50IHNxdWFyZWRUb2xlcmFuY2Ugd2lsbCBhbHNvIG5vdCBoYXZlIGFueVxuICAgICAgICAvLyBlZmZlY3QuICBUaGlzIGFsbG93cyB1cyB0byBzaG9ydCBjaXJjdWl0IHNpbXBsaWZpY2F0aW9uIChzYXZpbmcgQ1BVXG4gICAgICAgIC8vIGN5Y2xlcykgYW5kIHByZXZlbnRzIHRoZSBjYWNoZSBvZiBzaW1wbGlmaWVkIGdlb21ldHJpZXMgZnJvbSBmaWxsaW5nXG4gICAgICAgIC8vIHVwIHdpdGggdXNlbGVzcyBpZGVudGljYWwgY29waWVzIG9mIHRoaXMgZ2VvbWV0cnkgKHNhdmluZyBtZW1vcnkpLlxuICAgICAgICB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UgPSBzcXVhcmVkVG9sZXJhbmNlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgKiBAcmV0dXJuIHtTaW1wbGVHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsID0gZnVuY3Rpb24gZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwgKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfSBTdHJpZGUuXG4gICAqL1xuICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0U3RyaWRlID0gZnVuY3Rpb24gZ2V0U3RyaWRlICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdHJpZGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7R2VvbWV0cnlMYXlvdXR9IGxheW91dCBMYXlvdXQuXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gICAqL1xuICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuc2V0RmxhdENvb3JkaW5hdGVzID0gZnVuY3Rpb24gc2V0RmxhdENvb3JkaW5hdGVzIChsYXlvdXQsIGZsYXRDb29yZGluYXRlcykge1xuICAgIHRoaXMuc3RyaWRlID0gZ2V0U3RyaWRlRm9yTGF5b3V0KGxheW91dCk7XG4gICAgdGhpcy5sYXlvdXQgPSBsYXlvdXQ7XG4gICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBmbGF0Q29vcmRpbmF0ZXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0geyFBcnJheX0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7R2VvbWV0cnlMYXlvdXQ9fSBvcHRfbGF5b3V0IExheW91dC5cbiAgICovXG4gIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIHNldENvb3JkaW5hdGVzIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7R2VvbWV0cnlMYXlvdXR8dW5kZWZpbmVkfSBsYXlvdXQgTGF5b3V0LlxuICAgKiBAcGFyYW0ge0FycmF5fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG5lc3RpbmcgTmVzdGluZy5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLnNldExheW91dCA9IGZ1bmN0aW9uIHNldExheW91dCAobGF5b3V0LCBjb29yZGluYXRlcywgbmVzdGluZykge1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIHZhciBzdHJpZGU7XG4gICAgaWYgKGxheW91dCkge1xuICAgICAgc3RyaWRlID0gZ2V0U3RyaWRlRm9yTGF5b3V0KGxheW91dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmVzdGluZzsgKytpKSB7XG4gICAgICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLmxheW91dCA9IEdlb21ldHJ5TGF5b3V0LlhZO1xuICAgICAgICAgIHRoaXMuc3RyaWRlID0gMjtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge0FycmF5fSAqLyAoY29vcmRpbmF0ZXNbMF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzdHJpZGUgPSBjb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICBsYXlvdXQgPSBnZXRMYXlvdXRGb3JTdHJpZGUoc3RyaWRlKTtcbiAgICB9XG4gICAgdGhpcy5sYXlvdXQgPSBsYXlvdXQ7XG4gICAgdGhpcy5zdHJpZGUgPSBzdHJpZGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5hcHBseVRyYW5zZm9ybSA9IGZ1bmN0aW9uIGFwcGx5VHJhbnNmb3JtICh0cmFuc2Zvcm1Gbikge1xuICAgIGlmICh0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgdHJhbnNmb3JtRm4odGhpcy5mbGF0Q29vcmRpbmF0ZXMsIHRoaXMuZmxhdENvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSk7XG4gICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbiByb3RhdGUkMSAoYW5nbGUsIGFuY2hvcikge1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgIGlmIChmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgIHZhciBzdHJpZGUgPSB0aGlzLmdldFN0cmlkZSgpO1xuICAgICAgcm90YXRlKFxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsXG4gICAgICAgIHN0cmlkZSwgYW5nbGUsIGFuY2hvciwgZmxhdENvb3JkaW5hdGVzKTtcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICogQGFwaVxuICAgKi9cbiAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLnNjYWxlID0gZnVuY3Rpb24gc2NhbGUkMSAoc3gsIG9wdF9zeSwgb3B0X2FuY2hvcikge1xuICAgIHZhciBzeSA9IG9wdF9zeTtcbiAgICBpZiAoc3kgPT09IHVuZGVmaW5lZCkge1xuICAgICAgc3kgPSBzeDtcbiAgICB9XG4gICAgdmFyIGFuY2hvciA9IG9wdF9hbmNob3I7XG4gICAgaWYgKCFhbmNob3IpIHtcbiAgICAgIGFuY2hvciA9IGdldENlbnRlcih0aGlzLmdldEV4dGVudCgpKTtcbiAgICB9XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgaWYgKGZsYXRDb29yZGluYXRlcykge1xuICAgICAgdmFyIHN0cmlkZSA9IHRoaXMuZ2V0U3RyaWRlKCk7XG4gICAgICBzY2FsZShcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLFxuICAgICAgICBzdHJpZGUsIHN4LCBzeSwgYW5jaG9yLCBmbGF0Q29vcmRpbmF0ZXMpO1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKiBAYXBpXG4gICAqL1xuICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24gdHJhbnNsYXRlJDEgKGRlbHRhWCwgZGVsdGFZKSB7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgaWYgKGZsYXRDb29yZGluYXRlcykge1xuICAgICAgdmFyIHN0cmlkZSA9IHRoaXMuZ2V0U3RyaWRlKCk7XG4gICAgICB0cmFuc2xhdGUoXG4gICAgICAgIGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlLFxuICAgICAgICBkZWx0YVgsIGRlbHRhWSwgZmxhdENvb3JkaW5hdGVzKTtcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gU2ltcGxlR2VvbWV0cnk7XG59KEdlb21ldHJ5KSk7XG5cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge0dlb21ldHJ5TGF5b3V0fSBsYXlvdXQgTGF5b3V0LlxuICovXG5mdW5jdGlvbiBnZXRMYXlvdXRGb3JTdHJpZGUoc3RyaWRlKSB7XG4gIHZhciBsYXlvdXQ7XG4gIGlmIChzdHJpZGUgPT0gMikge1xuICAgIGxheW91dCA9IEdlb21ldHJ5TGF5b3V0LlhZO1xuICB9IGVsc2UgaWYgKHN0cmlkZSA9PSAzKSB7XG4gICAgbGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFlaO1xuICB9IGVsc2UgaWYgKHN0cmlkZSA9PSA0KSB7XG4gICAgbGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFlaTTtcbiAgfVxuICByZXR1cm4gKFxuICAgIC8qKiBAdHlwZSB7R2VvbWV0cnlMYXlvdXR9ICovIChsYXlvdXQpXG4gICk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0dlb21ldHJ5TGF5b3V0fSBsYXlvdXQgTGF5b3V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTdHJpZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdHJpZGVGb3JMYXlvdXQobGF5b3V0KSB7XG4gIHZhciBzdHJpZGU7XG4gIGlmIChsYXlvdXQgPT0gR2VvbWV0cnlMYXlvdXQuWFkpIHtcbiAgICBzdHJpZGUgPSAyO1xuICB9IGVsc2UgaWYgKGxheW91dCA9PSBHZW9tZXRyeUxheW91dC5YWVogfHwgbGF5b3V0ID09IEdlb21ldHJ5TGF5b3V0LlhZTSkge1xuICAgIHN0cmlkZSA9IDM7XG4gIH0gZWxzZSBpZiAobGF5b3V0ID09IEdlb21ldHJ5TGF5b3V0LlhZWk0pIHtcbiAgICBzdHJpZGUgPSA0O1xuICB9XG4gIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHN0cmlkZSk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge1NpbXBsZUdlb21ldHJ5fSBzaW1wbGVHZW9tZXRyeSBTaW1wbGUgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfZGVzdCBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGZsYXQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1HZW9tMkQoc2ltcGxlR2VvbWV0cnksIHRyYW5zZm9ybSwgb3B0X2Rlc3QpIHtcbiAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHNpbXBsZUdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICBpZiAoIWZsYXRDb29yZGluYXRlcykge1xuICAgIHJldHVybiBudWxsO1xuICB9IGVsc2Uge1xuICAgIHZhciBzdHJpZGUgPSBzaW1wbGVHZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICByZXR1cm4gdHJhbnNmb3JtMkQoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSxcbiAgICAgIHRyYW5zZm9ybSwgb3B0X2Rlc3QpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNpbXBsZUdlb21ldHJ5O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TaW1wbGVHZW9tZXRyeS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2FyZWFcbiAqL1xuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gQXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gIHZhciB0d2ljZUFyZWEgPSAwO1xuICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlXTtcbiAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgIHR3aWNlQXJlYSArPSB5MSAqIHgyIC0geDEgKiB5MjtcbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gIH1cbiAgcmV0dXJuIHR3aWNlQXJlYSAvIDI7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSkge1xuICB2YXIgYXJlYSA9IDA7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgIGFyZWEgKz0gbGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgIG9mZnNldCA9IGVuZDtcbiAgfVxuICByZXR1cm4gYXJlYTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUpIHtcbiAgdmFyIGFyZWEgPSAwO1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICBhcmVhICs9IGxpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUpO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICByZXR1cm4gYXJlYTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJlYS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2Nsb3Nlc3RcbiAqL1xuaW1wb3J0IHtsZXJwLCBzcXVhcmVkRGlzdGFuY2UgYXMgc3F1YXJlZER4fSBmcm9tICcuLi8uLi9tYXRoLmpzJztcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHBvaW50IG9uIHRoZSAyRCBsaW5lIHNlZ21lbnQgZmxhdENvb3JkaW5hdGVzW29mZnNldDFdIHRvXG4gKiBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0Ml0gdGhhdCBpcyBjbG9zZXN0IHRvIHRoZSBwb2ludCAoeCwgeSkuICBFeHRyYVxuICogZGltZW5zaW9ucyBhcmUgbGluZWFybHkgaW50ZXJwb2xhdGVkLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQxIE9mZnNldCAxLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldDIgT2Zmc2V0IDIuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqL1xuZnVuY3Rpb24gYXNzaWduQ2xvc2VzdChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldDEsIG9mZnNldDIsIHN0cmlkZSwgeCwgeSwgY2xvc2VzdFBvaW50KSB7XG4gIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQxXTtcbiAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldDEgKyAxXTtcbiAgdmFyIGR4ID0gZmxhdENvb3JkaW5hdGVzW29mZnNldDJdIC0geDE7XG4gIHZhciBkeSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQyICsgMV0gLSB5MTtcbiAgdmFyIG9mZnNldDtcbiAgaWYgKGR4ID09PSAwICYmIGR5ID09PSAwKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0MTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdCA9ICgoeCAtIHgxKSAqIGR4ICsgKHkgLSB5MSkgKiBkeSkgLyAoZHggKiBkeCArIGR5ICogZHkpO1xuICAgIGlmICh0ID4gMSkge1xuICAgICAgb2Zmc2V0ID0gb2Zmc2V0MjtcbiAgICB9IGVsc2UgaWYgKHQgPiAwKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgIGNsb3Nlc3RQb2ludFtpXSA9IGxlcnAoZmxhdENvb3JkaW5hdGVzW29mZnNldDEgKyBpXSxcbiAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MiArIGldLCB0KTtcbiAgICAgIH1cbiAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIG9mZnNldCA9IG9mZnNldDE7XG4gICAgfVxuICB9XG4gIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IHN0cmlkZTsgKytpJDEpIHtcbiAgICBjbG9zZXN0UG9pbnRbaSQxXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpJDFdO1xuICB9XG4gIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG59XG5cblxuLyoqXG4gKiBSZXR1cm4gdGhlIHNxdWFyZWQgb2YgdGhlIGxhcmdlc3QgZGlzdGFuY2UgYmV0d2VlbiBhbnkgcGFpciBvZiBjb25zZWN1dGl2ZVxuICogY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXhTcXVhcmVkRGVsdGEoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBtYXgpIHtcbiAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgZm9yIChvZmZzZXQgKz0gc3RyaWRlOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgdmFyIHNxdWFyZWREZWx0YSA9IHNxdWFyZWREeCh4MSwgeTEsIHgyLCB5Mik7XG4gICAgaWYgKHNxdWFyZWREZWx0YSA+IG1heCkge1xuICAgICAgbWF4ID0gc3F1YXJlZERlbHRhO1xuICAgIH1cbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gIH1cbiAgcmV0dXJuIG1heDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IE1heCBzcXVhcmVkIGRlbHRhLlxuICogQHJldHVybiB7bnVtYmVyfSBNYXggc3F1YXJlZCBkZWx0YS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFycmF5TWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG1heCkge1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICBtYXggPSBtYXhTcXVhcmVkRGVsdGEoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heCk7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIHJldHVybiBtYXg7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aUFycmF5TWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBtYXgpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgbWF4ID0gYXJyYXlNYXhTcXVhcmVkRGVsdGEoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtYXgpO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICByZXR1cm4gbWF4O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfdG1wUG9pbnQgVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdFBvaW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsXG4gIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsXG4gIG9wdF90bXBQb2ludCkge1xuICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gIH1cbiAgdmFyIGksIHNxdWFyZWREaXN0YW5jZTtcbiAgaWYgKG1heERlbHRhID09PSAwKSB7XG4gICAgLy8gQWxsIHBvaW50cyBhcmUgaWRlbnRpY2FsLCBzbyBqdXN0IHRlc3QgdGhlIGZpcnN0IHBvaW50LlxuICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeChcbiAgICAgIHgsIHksIGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0pO1xuICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaV07XG4gICAgICB9XG4gICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgICAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICB9XG4gIH1cbiAgdmFyIHRtcFBvaW50ID0gb3B0X3RtcFBvaW50ID8gb3B0X3RtcFBvaW50IDogW05hTiwgTmFOXTtcbiAgdmFyIGluZGV4ID0gb2Zmc2V0ICsgc3RyaWRlO1xuICB3aGlsZSAoaW5kZXggPCBlbmQpIHtcbiAgICBhc3NpZ25DbG9zZXN0KFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBpbmRleCAtIHN0cmlkZSwgaW5kZXgsIHN0cmlkZSwgeCwgeSwgdG1wUG9pbnQpO1xuICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCB0bXBQb2ludFswXSwgdG1wUG9pbnRbMV0pO1xuICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgIG1pblNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREaXN0YW5jZTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSB0bXBQb2ludFtpXTtcbiAgICAgIH1cbiAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICBpbmRleCArPSBzdHJpZGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNraXAgYWhlYWQgbXVsdGlwbGUgcG9pbnRzLCBiZWNhdXNlIHdlIGtub3cgdGhhdCBhbGwgdGhlIHNraXBwZWRcbiAgICAgIC8vIHBvaW50cyBjYW5ub3QgYmUgYW55IGNsb3NlciB0aGFuIHRoZSBjbG9zZXN0IHBvaW50IHdlIGhhdmUgZm91bmQgc29cbiAgICAgIC8vIGZhci4gIFdlIGtub3cgdGhpcyBiZWNhdXNlIHdlIGtub3cgaG93IGNsb3NlIHRoZSBjdXJyZW50IHBvaW50IGlzLCBob3dcbiAgICAgIC8vIGNsb3NlIHRoZSBjbG9zZXN0IHBvaW50IHdlIGhhdmUgZm91bmQgc28gZmFyIGlzLCBhbmQgdGhlIG1heGltdW1cbiAgICAgIC8vIGRpc3RhbmNlIGJldHdlZW4gY29uc2VjdXRpdmUgcG9pbnRzLiAgRm9yIGV4YW1wbGUsIGlmIHdlJ3JlIGN1cnJlbnRseVxuICAgICAgLy8gYXQgZGlzdGFuY2UgMTAsIHRoZSBiZXN0IHdlJ3ZlIGZvdW5kIHNvIGZhciBpcyAzLCBhbmQgdGhhdCB0aGUgbWF4aW11bVxuICAgICAgLy8gZGlzdGFuY2UgYmV0d2VlbiBjb25zZWN1dGl2ZSBwb2ludHMgaXMgMiwgdGhlbiB3ZSdsbCBuZWVkIHRvIHNraXAgYXRcbiAgICAgIC8vIGxlYXN0ICgxMCAtIDMpIC8gMiA9PSAzIChyb3VuZGVkIGRvd24pIHBvaW50cyB0byBoYXZlIGFueSBjaGFuY2Ugb2ZcbiAgICAgIC8vIGZpbmRpbmcgYSBjbG9zZXIgcG9pbnQuICBXZSB1c2UgTWF0aC5tYXgoLi4uLCAxKSB0byBlbnN1cmUgdGhhdCB3ZVxuICAgICAgLy8gYWx3YXlzIGFkdmFuY2UgYXQgbGVhc3Qgb25lIHBvaW50LCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wLlxuICAgICAgaW5kZXggKz0gc3RyaWRlICogTWF0aC5tYXgoXG4gICAgICAgICgoTWF0aC5zcXJ0KHNxdWFyZWREaXN0YW5jZSkgLVxuICAgICAgICAgICAgTWF0aC5zcXJ0KG1pblNxdWFyZWREaXN0YW5jZSkpIC8gbWF4RGVsdGEpIHwgMCwgMSk7XG4gICAgfVxuICB9XG4gIGlmIChpc1JpbmcpIHtcbiAgICAvLyBDaGVjayB0aGUgY2xvc2luZyBzZWdtZW50LlxuICAgIGFzc2lnbkNsb3Nlc3QoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIGVuZCAtIHN0cmlkZSwgb2Zmc2V0LCBzdHJpZGUsIHgsIHksIHRtcFBvaW50KTtcbiAgICBzcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRHgoeCwgeSwgdG1wUG9pbnRbMF0sIHRtcFBvaW50WzFdKTtcbiAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gdG1wUG9pbnRbaV07XG4gICAgICB9XG4gICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfdG1wUG9pbnQgVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsXG4gIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsXG4gIG9wdF90bXBQb2ludCkge1xuICB2YXIgdG1wUG9pbnQgPSBvcHRfdG1wUG9pbnQgPyBvcHRfdG1wUG9pbnQgOiBbTmFOLCBOYU5dO1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBhc3NpZ25DbG9zZXN0UG9pbnQoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsXG4gICAgICBtYXhEZWx0YSwgaXNSaW5nLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSwgdG1wUG9pbnQpO1xuICAgIG9mZnNldCA9IGVuZDtcbiAgfVxuICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfdG1wUG9pbnQgVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdE11bHRpQXJyYXlQb2ludChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCxcbiAgZW5kc3MsIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsXG4gIG9wdF90bXBQb2ludCkge1xuICB2YXIgdG1wUG9pbnQgPSBvcHRfdG1wUG9pbnQgPyBvcHRfdG1wUG9pbnQgOiBbTmFOLCBOYU5dO1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBhc3NpZ25DbG9zZXN0QXJyYXlQb2ludChcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsXG4gICAgICBtYXhEZWx0YSwgaXNSaW5nLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSwgdG1wUG9pbnQpO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbG9zZXN0LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvZGVmbGF0ZVxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlQ29vcmRpbmF0ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZSwgc3RyaWRlKSB7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGUubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQrK10gPSBjb29yZGluYXRlW2ldO1xuICB9XG4gIHJldHVybiBvZmZzZXQ7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzLCBzdHJpZGUpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBjb29yZGluYXRlID0gY29vcmRpbmF0ZXNbaV07XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdHJpZGU7ICsraikge1xuICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCsrXSA9IGNvb3JkaW5hdGVbal07XG4gICAgfVxuICB9XG4gIHJldHVybiBvZmZzZXQ7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBjb29yZGluYXRlc3MgQ29vcmRpbmF0ZXNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfZW5kcyBFbmRzLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gRW5kcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlc3MsIHN0cmlkZSwgb3B0X2VuZHMpIHtcbiAgdmFyIGVuZHMgPSBvcHRfZW5kcyA/IG9wdF9lbmRzIDogW107XG4gIHZhciBpID0gMDtcbiAgZm9yICh2YXIgaiA9IDAsIGpqID0gY29vcmRpbmF0ZXNzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICB2YXIgZW5kID0gZGVmbGF0ZUNvb3JkaW5hdGVzKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzc1tqXSwgc3RyaWRlKTtcbiAgICBlbmRzW2krK10gPSBlbmQ7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIGVuZHMubGVuZ3RoID0gaTtcbiAgcmV0dXJuIGVuZHM7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+Pn0gY29vcmRpbmF0ZXNzcyBDb29yZGluYXRlc3NzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+PX0gb3B0X2VuZHNzIEVuZHNzLlxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IEVuZHNzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZXNzcywgc3RyaWRlLCBvcHRfZW5kc3MpIHtcbiAgdmFyIGVuZHNzID0gb3B0X2VuZHNzID8gb3B0X2VuZHNzIDogW107XG4gIHZhciBpID0gMDtcbiAgZm9yICh2YXIgaiA9IDAsIGpqID0gY29vcmRpbmF0ZXNzcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgdmFyIGVuZHMgPSBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheShcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlc3NzW2pdLCBzdHJpZGUsIGVuZHNzW2ldKTtcbiAgICBlbmRzc1tpKytdID0gZW5kcztcbiAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gIH1cbiAgZW5kc3MubGVuZ3RoID0gaTtcbiAgcmV0dXJuIGVuZHNzO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZsYXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvaW5mbGF0ZVxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+PX0gb3B0X2Nvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gQ29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBvcHRfY29vcmRpbmF0ZXMpIHtcbiAgdmFyIGNvb3JkaW5hdGVzID0gb3B0X2Nvb3JkaW5hdGVzICE9PSB1bmRlZmluZWQgPyBvcHRfY29vcmRpbmF0ZXMgOiBbXTtcbiAgdmFyIGkgPSAwO1xuICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgIGNvb3JkaW5hdGVzW2krK10gPSBmbGF0Q29vcmRpbmF0ZXMuc2xpY2UoaiwgaiArIHN0cmlkZSk7XG4gIH1cbiAgY29vcmRpbmF0ZXMubGVuZ3RoID0gaTtcbiAgcmV0dXJuIGNvb3JkaW5hdGVzO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj49fSBvcHRfY29vcmRpbmF0ZXNzIENvb3JkaW5hdGVzcy5cbiAqIEByZXR1cm4ge0FycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBDb29yZGluYXRlc3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBvcHRfY29vcmRpbmF0ZXNzKSB7XG4gIHZhciBjb29yZGluYXRlc3MgPSBvcHRfY29vcmRpbmF0ZXNzICE9PSB1bmRlZmluZWQgPyBvcHRfY29vcmRpbmF0ZXNzIDogW107XG4gIHZhciBpID0gMDtcbiAgZm9yICh2YXIgaiA9IDAsIGpqID0gZW5kcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgdmFyIGVuZCA9IGVuZHNbal07XG4gICAgY29vcmRpbmF0ZXNzW2krK10gPSBpbmZsYXRlQ29vcmRpbmF0ZXMoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGNvb3JkaW5hdGVzc1tpXSk7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIGNvb3JkaW5hdGVzcy5sZW5ndGggPSBpO1xuICByZXR1cm4gY29vcmRpbmF0ZXNzO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+PX0gb3B0X2Nvb3JkaW5hdGVzc3NcbiAqICAgICBDb29yZGluYXRlc3NzLlxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+fSBDb29yZGluYXRlc3NzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgb3B0X2Nvb3JkaW5hdGVzc3MpIHtcbiAgdmFyIGNvb3JkaW5hdGVzc3MgPSBvcHRfY29vcmRpbmF0ZXNzcyAhPT0gdW5kZWZpbmVkID8gb3B0X2Nvb3JkaW5hdGVzc3MgOiBbXTtcbiAgdmFyIGkgPSAwO1xuICBmb3IgKHZhciBqID0gMCwgamogPSBlbmRzcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgdmFyIGVuZHMgPSBlbmRzc1tqXTtcbiAgICBjb29yZGluYXRlc3NzW2krK10gPSBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGNvb3JkaW5hdGVzc3NbaV0pO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICBjb29yZGluYXRlc3NzLmxlbmd0aCA9IGk7XG4gIHJldHVybiBjb29yZGluYXRlc3NzO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmZsYXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvc2ltcGxpZnlcbiAqL1xuLy8gQmFzZWQgb24gc2ltcGxpZnktanMgaHR0cHM6Ly9naXRodWIuY29tL21vdXJuZXIvc2ltcGxpZnktanNcbi8vIENvcHlyaWdodCAoYykgMjAxMiwgVmxhZGltaXIgQWdhZm9ua2luXG4vLyBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy9cbi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuLy8gbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG4vL1xuLy8gICAgMS4gUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuLy8gICAgICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbi8vXG4vLyAgICAyLiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodFxuLy8gICAgICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZVxuLy8gICAgICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbi8vXG4vLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIlxuLy8gQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRVxuLy8gSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0Vcbi8vIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkVcbi8vIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1Jcbi8vIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GXG4vLyBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1Ncbi8vIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOXG4vLyBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKVxuLy8gQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEVcbi8vIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuXG5pbXBvcnQge3NxdWFyZWRTZWdtZW50RGlzdGFuY2UsIHNxdWFyZWREaXN0YW5jZX0gZnJvbSAnLi4vLi4vbWF0aC5qcyc7XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGhpZ2hRdWFsaXR5IEhpZ2hlc3QgcXVhbGl0eS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9zaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gU2ltcGxpZmllZCBsaW5lIHN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNpbXBsaWZ5TGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLFxuICBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIGhpZ2hRdWFsaXR5LCBvcHRfc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcykge1xuICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IG9wdF9zaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdF9zaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIDogW107XG4gIGlmICghaGlnaFF1YWxpdHkpIHtcbiAgICBlbmQgPSByYWRpYWxEaXN0YW5jZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLFxuICAgICAgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLFxuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgMCk7XG4gICAgZmxhdENvb3JkaW5hdGVzID0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcztcbiAgICBvZmZzZXQgPSAwO1xuICAgIHN0cmlkZSA9IDI7XG4gIH1cbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBkb3VnbGFzUGV1Y2tlcihcbiAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsXG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgMCk7XG4gIHJldHVybiBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZG91Z2xhc1BldWNrZXIoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCxcbiAgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0KSB7XG4gIHZhciBuID0gKGVuZCAtIG9mZnNldCkgLyBzdHJpZGU7XG4gIGlmIChuIDwgMykge1xuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG4gIH1cbiAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICB2YXIgbWFya2VycyA9IG5ldyBBcnJheShuKTtcbiAgbWFya2Vyc1swXSA9IDE7XG4gIG1hcmtlcnNbbiAtIDFdID0gMTtcbiAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICB2YXIgc3RhY2sgPSBbb2Zmc2V0LCBlbmQgLSBzdHJpZGVdO1xuICB2YXIgaW5kZXggPSAwO1xuICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgIHZhciBsYXN0ID0gc3RhY2sucG9wKCk7XG4gICAgdmFyIGZpcnN0ID0gc3RhY2sucG9wKCk7XG4gICAgdmFyIG1heFNxdWFyZWREaXN0YW5jZSA9IDA7XG4gICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW2ZpcnN0XTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZmlyc3QgKyAxXTtcbiAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbbGFzdF07XG4gICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW2xhc3QgKyAxXTtcbiAgICBmb3IgKHZhciBpID0gZmlyc3QgKyBzdHJpZGU7IGkgPCBsYXN0OyBpICs9IHN0cmlkZSkge1xuICAgICAgdmFyIHggPSBmbGF0Q29vcmRpbmF0ZXNbaV07XG4gICAgICB2YXIgeSA9IGZsYXRDb29yZGluYXRlc1tpICsgMV07XG4gICAgICB2YXIgc3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZFNlZ21lbnREaXN0YW5jZShcbiAgICAgICAgeCwgeSwgeDEsIHkxLCB4MiwgeTIpO1xuICAgICAgaWYgKHNxdWFyZWREaXN0YW5jZSA+IG1heFNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgIG1heFNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREaXN0YW5jZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG1heFNxdWFyZWREaXN0YW5jZSA+IHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgIG1hcmtlcnNbKGluZGV4IC0gb2Zmc2V0KSAvIHN0cmlkZV0gPSAxO1xuICAgICAgaWYgKGZpcnN0ICsgc3RyaWRlIDwgaW5kZXgpIHtcbiAgICAgICAgc3RhY2sucHVzaChmaXJzdCwgaW5kZXgpO1xuICAgICAgfVxuICAgICAgaWYgKGluZGV4ICsgc3RyaWRlIDwgbGFzdCkge1xuICAgICAgICBzdGFjay5wdXNoKGluZGV4LCBsYXN0KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZm9yICh2YXIgaSQxID0gMDsgaSQxIDwgbjsgKytpJDEpIHtcbiAgICBpZiAobWFya2Vyc1tpJDFdKSB7XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpJDEgKiBzdHJpZGVdO1xuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaSQxICogc3RyaWRlICsgMV07XG4gICAgfVxuICB9XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRFbmRzIFNpbXBsaWZpZWQgZW5kcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3VnbGFzUGV1Y2tlckFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LFxuICBlbmRzLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsXG4gIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKSB7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBkb3VnbGFzUGV1Y2tlcihcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSxcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpO1xuICAgIHNpbXBsaWZpZWRFbmRzLnB1c2goc2ltcGxpZmllZE9mZnNldCk7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBzaW1wbGlmaWVkRW5kc3MgU2ltcGxpZmllZCBlbmRzcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3VnbGFzUGV1Y2tlck11bHRpQXJyYXkoXG4gIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLFxuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0LCBzaW1wbGlmaWVkRW5kc3MpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgdmFyIHNpbXBsaWZpZWRFbmRzID0gW107XG4gICAgc2ltcGxpZmllZE9mZnNldCA9IGRvdWdsYXNQZXVja2VyQXJyYXkoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLFxuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHMpO1xuICAgIHNpbXBsaWZpZWRFbmRzcy5wdXNoKHNpbXBsaWZpZWRFbmRzKTtcbiAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gIH1cbiAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByYWRpYWxEaXN0YW5jZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLFxuICBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpIHtcbiAgaWYgKGVuZCA8PSBvZmZzZXQgKyBzdHJpZGUpIHtcbiAgICAvLyB6ZXJvIG9yIG9uZSBwb2ludCwgbm8gc2ltcGxpZmljYXRpb24gcG9zc2libGUsIHNvIGNvcHkgYW5kIHJldHVyblxuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICB9XG4gIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gIC8vIGNvcHkgZmlyc3QgcG9pbnRcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDE7XG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkxO1xuICB2YXIgeDIgPSB4MTtcbiAgdmFyIHkyID0geTE7XG4gIGZvciAob2Zmc2V0ICs9IHN0cmlkZTsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICBpZiAoc3F1YXJlZERpc3RhbmNlKHgxLCB5MSwgeDIsIHkyKSA+IHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgIC8vIGNvcHkgcG9pbnQgYXQgb2Zmc2V0XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkyO1xuICAgICAgeDEgPSB4MjtcbiAgICAgIHkxID0geTI7XG4gICAgfVxuICB9XG4gIGlmICh4MiAhPSB4MSB8fCB5MiAhPSB5MSkge1xuICAgIC8vIGNvcHkgbGFzdCBwb2ludFxuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkyO1xuICB9XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFJvdW5kZWQgdmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzbmFwKHZhbHVlLCB0b2xlcmFuY2UpIHtcbiAgcmV0dXJuIHRvbGVyYW5jZSAqIE1hdGgucm91bmQodmFsdWUgLyB0b2xlcmFuY2UpO1xufVxuXG5cbi8qKlxuICogU2ltcGxpZmllcyBhIGxpbmUgc3RyaW5nIHVzaW5nIGFuIGFsZ29yaXRobSBkZXNpZ25lZCBieSBUaW0gU2NoYXViLlxuICogQ29vcmRpbmF0ZXMgYXJlIHNuYXBwZWQgdG8gdGhlIG5lYXJlc3QgdmFsdWUgaW4gYSB2aXJ0dWFsIGdyaWQgYW5kXG4gKiBjb25zZWN1dGl2ZSBkdXBsaWNhdGUgY29vcmRpbmF0ZXMgYXJlIGRpc2NhcmRlZC4gIFRoaXMgZWZmZWN0aXZlbHkgcHJlc2VydmVzXG4gKiB0b3BvbG9neSBhcyB0aGUgc2ltcGxpZmljYXRpb24gb2YgYW55IHN1YnNlY3Rpb24gb2YgYSBsaW5lIHN0cmluZyBpc1xuICogaW5kZXBlbmRlbnQgb2YgdGhlIHJlc3Qgb2YgdGhlIGxpbmUgc3RyaW5nLiAgVGhpcyBtZWFucyB0aGF0LCBmb3IgZXhhbXBsZXMsXG4gKiB0aGUgY29tbW9uIGVkZ2UgYmV0d2VlbiB0d28gcG9seWdvbnMgd2lsbCBiZSBzaW1wbGlmaWVkIHRvIHRoZSBzYW1lIGxpbmVcbiAqIHN0cmluZyBpbmRlcGVuZGVudGx5IGluIGJvdGggcG9seWdvbnMuICBUaGlzIGltcGxlbWVudGF0aW9uIHVzZXMgYSBzaW5nbGVcbiAqIHBhc3Mgb3ZlciB0aGUgY29vcmRpbmF0ZXMgYW5kIGVsaW1pbmF0ZXMgaW50ZXJtZWRpYXRlIGNvbGxpbmVhciBwb2ludHMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl6ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsXG4gIHRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCkge1xuICAvLyBkbyBub3RoaW5nIGlmIHRoZSBsaW5lIGlzIGVtcHR5XG4gIGlmIChvZmZzZXQgPT0gZW5kKSB7XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG4gIH1cbiAgLy8gc25hcCB0aGUgZmlyc3QgY29vcmRpbmF0ZSAoUDEpXG4gIHZhciB4MSA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIHRvbGVyYW5jZSk7XG4gIHZhciB5MSA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdLCB0b2xlcmFuY2UpO1xuICBvZmZzZXQgKz0gc3RyaWRlO1xuICAvLyBhZGQgdGhlIGZpcnN0IGNvb3JkaW5hdGUgdG8gdGhlIG91dHB1dFxuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MTtcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTE7XG4gIC8vIGZpbmQgdGhlIG5leHQgY29vcmRpbmF0ZSB0aGF0IGRvZXMgbm90IHNuYXAgdG8gdGhlIHNhbWUgdmFsdWUgYXMgdGhlIGZpcnN0XG4gIC8vIGNvb3JkaW5hdGUgKFAyKVxuICB2YXIgeDIsIHkyO1xuICBkbyB7XG4gICAgeDIgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCB0b2xlcmFuY2UpO1xuICAgIHkyID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0sIHRvbGVyYW5jZSk7XG4gICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgICAgLy8gYWxsIGNvb3JkaW5hdGVzIHNuYXAgdG8gdGhlIHNhbWUgdmFsdWUsIHRoZSBsaW5lIGNvbGxhcHNlcyB0byBhIHBvaW50XG4gICAgICAvLyBwdXNoIHRoZSBsYXN0IHNuYXBwZWQgdmFsdWUgYW55d2F5IHRvIGVuc3VyZSB0aGF0IHRoZSBvdXRwdXQgY29udGFpbnNcbiAgICAgIC8vIGF0IGxlYXN0IHR3byBwb2ludHNcbiAgICAgIC8vIEZJWE1FIHNob3VsZCB3ZSByZWFsbHkgcmV0dXJuIGF0IGxlYXN0IHR3byBwb2ludHMgYW55d2F5P1xuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDI7XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICAgIH1cbiAgfSB3aGlsZSAoeDIgPT0geDEgJiYgeTIgPT0geTEpO1xuICB3aGlsZSAob2Zmc2V0IDwgZW5kKSB7XG4gICAgLy8gc25hcCB0aGUgbmV4dCBjb29yZGluYXRlIChQMylcbiAgICB2YXIgeDMgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCB0b2xlcmFuY2UpO1xuICAgIHZhciB5MyA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdLCB0b2xlcmFuY2UpO1xuICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgLy8gc2tpcCBQMyBpZiBpdCBpcyBlcXVhbCB0byBQMlxuICAgIGlmICh4MyA9PSB4MiAmJiB5MyA9PSB5Mikge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIGNhbGN1bGF0ZSB0aGUgZGVsdGEgYmV0d2VlbiBQMSBhbmQgUDJcbiAgICB2YXIgZHgxID0geDIgLSB4MTtcbiAgICB2YXIgZHkxID0geTIgLSB5MTtcbiAgICAvLyBjYWxjdWxhdGUgdGhlIGRlbHRhIGJldHdlZW4gUDMgYW5kIFAxXG4gICAgdmFyIGR4MiA9IHgzIC0geDE7XG4gICAgdmFyIGR5MiA9IHkzIC0geTE7XG4gICAgLy8gaWYgUDEsIFAyLCBhbmQgUDMgYXJlIGNvbGluZWFyIGFuZCBQMyBpcyBmdXJ0aGVyIGZyb20gUDEgdGhhbiBQMiBpcyBmcm9tXG4gICAgLy8gUDEgaW4gdGhlIHNhbWUgZGlyZWN0aW9uIHRoZW4gUDIgaXMgb24gdGhlIHN0cmFpZ2h0IGxpbmUgYmV0d2VlbiBQMSBhbmRcbiAgICAvLyBQM1xuICAgIGlmICgoZHgxICogZHkyID09IGR5MSAqIGR4MikgJiZcbiAgICAgICAgKChkeDEgPCAwICYmIGR4MiA8IGR4MSkgfHwgZHgxID09IGR4MiB8fCAoZHgxID4gMCAmJiBkeDIgPiBkeDEpKSAmJlxuICAgICAgICAoKGR5MSA8IDAgJiYgZHkyIDwgZHkxKSB8fCBkeTEgPT0gZHkyIHx8IChkeTEgPiAwICYmIGR5MiA+IGR5MSkpKSB7XG4gICAgICAvLyBkaXNjYXJkIFAyIGFuZCBzZXQgUDIgPSBQM1xuICAgICAgeDIgPSB4MztcbiAgICAgIHkyID0geTM7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gZWl0aGVyIFAxLCBQMiwgYW5kIFAzIGFyZSBub3QgY29saW5lYXIsIG9yIHRoZXkgYXJlIGNvbGluZWFyIGJ1dCBQMyBpc1xuICAgIC8vIGJldHdlZW4gUDMgYW5kIFAxIG9yIG9uIHRoZSBvcHBvc2l0ZSBoYWxmIG9mIHRoZSBsaW5lIHRvIFAyLiAgYWRkIFAyLFxuICAgIC8vIGFuZCBjb250aW51ZSB3aXRoIFAxID0gUDIgYW5kIFAyID0gUDNcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gICAgeDIgPSB4MztcbiAgICB5MiA9IHkzO1xuICB9XG4gIC8vIGFkZCB0aGUgbGFzdCBwb2ludCAoUDIpXG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEVuZHMgU2ltcGxpZmllZCBlbmRzLlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXplQXJyYXkoXG4gIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsXG4gIHRvbGVyYW5jZSxcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHMpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgc2ltcGxpZmllZE9mZnNldCA9IHF1YW50aXplKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLFxuICAgICAgdG9sZXJhbmNlLFxuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCk7XG4gICAgc2ltcGxpZmllZEVuZHMucHVzaChzaW1wbGlmaWVkT2Zmc2V0KTtcbiAgICBvZmZzZXQgPSBlbmQ7XG4gIH1cbiAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IHNpbXBsaWZpZWRFbmRzcyBTaW1wbGlmaWVkIGVuZHNzLlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXplTXVsdGlBcnJheShcbiAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsXG4gIHRvbGVyYW5jZSxcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHNzKSB7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgIHZhciBzaW1wbGlmaWVkRW5kcyA9IFtdO1xuICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBxdWFudGl6ZUFycmF5KFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSxcbiAgICAgIHRvbGVyYW5jZSxcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKTtcbiAgICBzaW1wbGlmaWVkRW5kc3MucHVzaChzaW1wbGlmaWVkRW5kcyk7XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaW1wbGlmeS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9MaW5lYXJSaW5nXG4gKi9cbmltcG9ydCB7Y2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IEdlb21ldHJ5TGF5b3V0IGZyb20gJy4vR2VvbWV0cnlMYXlvdXQuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgU2ltcGxlR2VvbWV0cnkgZnJvbSAnLi9TaW1wbGVHZW9tZXRyeS5qcyc7XG5pbXBvcnQge2xpbmVhclJpbmcgYXMgbGluZWFyUmluZ0FyZWF9IGZyb20gJy4vZmxhdC9hcmVhLmpzJztcbmltcG9ydCB7YXNzaWduQ2xvc2VzdFBvaW50LCBtYXhTcXVhcmVkRGVsdGF9IGZyb20gJy4vZmxhdC9jbG9zZXN0LmpzJztcbmltcG9ydCB7ZGVmbGF0ZUNvb3JkaW5hdGVzfSBmcm9tICcuL2ZsYXQvZGVmbGF0ZS5qcyc7XG5pbXBvcnQge2luZmxhdGVDb29yZGluYXRlc30gZnJvbSAnLi9mbGF0L2luZmxhdGUuanMnO1xuaW1wb3J0IHtkb3VnbGFzUGV1Y2tlcn0gZnJvbSAnLi9mbGF0L3NpbXBsaWZ5LmpzJztcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBMaW5lYXIgcmluZyBnZW9tZXRyeS4gT25seSB1c2VkIGFzIHBhcnQgb2YgcG9seWdvbjsgY2Fubm90IGJlIHJlbmRlcmVkXG4gKiBvbiBpdHMgb3duLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIExpbmVhclJpbmcgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChTaW1wbGVHZW9tZXRyeSkge1xuICBmdW5jdGlvbiBMaW5lYXJSaW5nKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG5cbiAgICBTaW1wbGVHZW9tZXRyeS5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWF4RGVsdGFfID0gLTE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IC0xO1xuXG4gICAgaWYgKG9wdF9sYXlvdXQgIT09IHVuZGVmaW5lZCAmJiAhQXJyYXkuaXNBcnJheShjb29yZGluYXRlc1swXSkpIHtcbiAgICAgIHRoaXMuc2V0RmxhdENvb3JkaW5hdGVzKG9wdF9sYXlvdXQsIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0Q29vcmRpbmF0ZXMoLyoqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSAqLyAoY29vcmRpbmF0ZXMpLCBvcHRfbGF5b3V0KTtcbiAgICB9XG5cbiAgfVxuXG4gIGlmICggU2ltcGxlR2VvbWV0cnkgKSBMaW5lYXJSaW5nLl9fcHJvdG9fXyA9IFNpbXBsZUdlb21ldHJ5O1xuICBMaW5lYXJSaW5nLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFNpbXBsZUdlb21ldHJ5ICYmIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZSApO1xuICBMaW5lYXJSaW5nLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExpbmVhclJpbmc7XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7IUxpbmVhclJpbmd9IENsb25lLlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgTGluZWFyUmluZy5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSAoKSB7XG4gICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHRoaXMubGF5b3V0KTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIExpbmVhclJpbmcucHJvdG90eXBlLmNsb3Nlc3RQb2ludFhZID0gZnVuY3Rpb24gY2xvc2VzdFBvaW50WFkgKHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgaWYgKG1pblNxdWFyZWREaXN0YW5jZSA8IGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSh0aGlzLmdldEV4dGVudCgpLCB4LCB5KSkge1xuICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICB9XG4gICAgaWYgKHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICB0aGlzLm1heERlbHRhXyA9IE1hdGguc3FydChtYXhTcXVhcmVkRGVsdGEoXG4gICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlLCAwKSk7XG4gICAgICB0aGlzLm1heERlbHRhUmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgIH1cbiAgICByZXR1cm4gYXNzaWduQ2xvc2VzdFBvaW50KFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsXG4gICAgICB0aGlzLm1heERlbHRhXywgdHJ1ZSwgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGFyZWEgb2YgdGhlIGxpbmVhciByaW5nIG9uIHByb2plY3RlZCBwbGFuZS5cbiAgICogQHJldHVybiB7bnVtYmVyfSBBcmVhIChvbiBwcm9qZWN0ZWQgcGxhbmUpLlxuICAgKiBAYXBpXG4gICAqL1xuICBMaW5lYXJSaW5nLnByb3RvdHlwZS5nZXRBcmVhID0gZnVuY3Rpb24gZ2V0QXJlYSAoKSB7XG4gICAgcmV0dXJuIGxpbmVhclJpbmdBcmVhKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbGluZWFyIHJpbmcuXG4gICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IENvb3JkaW5hdGVzLlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgTGluZWFyUmluZy5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBnZXRDb29yZGluYXRlcyAoKSB7XG4gICAgcmV0dXJuIGluZmxhdGVDb29yZGluYXRlcyhcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIExpbmVhclJpbmcucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsID0gZnVuY3Rpb24gZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwgKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZG91Z2xhc1BldWNrZXIoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSxcbiAgICAgIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIDApO1xuICAgIHJldHVybiBuZXcgTGluZWFyUmluZyhzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBHZW9tZXRyeUxheW91dC5YWSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIExpbmVhclJpbmcucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiBnZXRUeXBlICgpIHtcbiAgICByZXR1cm4gR2VvbWV0cnlUeXBlLkxJTkVBUl9SSU5HO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgTGluZWFyUmluZy5wcm90b3R5cGUuaW50ZXJzZWN0c0V4dGVudCA9IGZ1bmN0aW9uIGludGVyc2VjdHNFeHRlbnQgKGV4dGVudCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbGluZWFyIHJpbmcuXG4gICAqIEBwYXJhbSB7IUFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge0dlb21ldHJ5TGF5b3V0PX0gb3B0X2xheW91dCBMYXlvdXQuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBMaW5lYXJSaW5nLnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIHNldENvb3JkaW5hdGVzIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgIHRoaXMuc2V0TGF5b3V0KG9wdF9sYXlvdXQsIGNvb3JkaW5hdGVzLCAxKTtcbiAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBkZWZsYXRlQ29vcmRpbmF0ZXMoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgY29vcmRpbmF0ZXMsIHRoaXMuc3RyaWRlKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICByZXR1cm4gTGluZWFyUmluZztcbn0oU2ltcGxlR2VvbWV0cnkpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBMaW5lYXJSaW5nO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1MaW5lYXJSaW5nLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL1BvaW50XG4gKi9cbmltcG9ydCB7Y3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZSwgY29udGFpbnNYWX0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHtkZWZsYXRlQ29vcmRpbmF0ZX0gZnJvbSAnLi9mbGF0L2RlZmxhdGUuanMnO1xuaW1wb3J0IHtzcXVhcmVkRGlzdGFuY2UgYXMgc3F1YXJlZER4fSBmcm9tICcuLi9tYXRoLmpzJztcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQb2ludCBnZW9tZXRyeS5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBQb2ludCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFNpbXBsZUdlb21ldHJ5KSB7XG4gIGZ1bmN0aW9uIFBvaW50KGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG4gICAgU2ltcGxlR2VvbWV0cnkuY2FsbCh0aGlzKTtcbiAgICB0aGlzLnNldENvb3JkaW5hdGVzKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KTtcbiAgfVxuXG4gIGlmICggU2ltcGxlR2VvbWV0cnkgKSBQb2ludC5fX3Byb3RvX18gPSBTaW1wbGVHZW9tZXRyeTtcbiAgUG9pbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggU2ltcGxlR2VvbWV0cnkgJiYgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlICk7XG4gIFBvaW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBvaW50O1xuXG4gIC8qKlxuICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAqIEByZXR1cm4geyFQb2ludH0gQ2xvbmUuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBQb2ludC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSAoKSB7XG4gICAgdmFyIHBvaW50ID0gbmV3IFBvaW50KHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHRoaXMubGF5b3V0KTtcbiAgICByZXR1cm4gcG9pbnQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBQb2ludC5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiBjbG9zZXN0UG9pbnRYWSAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgdmFyIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCBmbGF0Q29vcmRpbmF0ZXNbMF0sIGZsYXRDb29yZGluYXRlc1sxXSk7XG4gICAgaWYgKHNxdWFyZWREaXN0YW5jZSA8IG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgdmFyIHN0cmlkZSA9IHRoaXMuc3RyaWRlO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSBmbGF0Q29vcmRpbmF0ZXNbaV07XG4gICAgICB9XG4gICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgICAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnQuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZXMuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBQb2ludC5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBnZXRDb29yZGluYXRlcyAoKSB7XG4gICAgcmV0dXJuICF0aGlzLmZsYXRDb29yZGluYXRlcyA/IFtdIDogdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFBvaW50LnByb3RvdHlwZS5jb21wdXRlRXh0ZW50ID0gZnVuY3Rpb24gY29tcHV0ZUV4dGVudCAoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIGV4dGVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIFBvaW50LnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gZ2V0VHlwZSAoKSB7XG4gICAgcmV0dXJuIEdlb21ldHJ5VHlwZS5QT0lOVDtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICogQGFwaVxuICAgKi9cbiAgUG9pbnQucHJvdG90eXBlLmludGVyc2VjdHNFeHRlbnQgPSBmdW5jdGlvbiBpbnRlcnNlY3RzRXh0ZW50IChleHRlbnQpIHtcbiAgICByZXR1cm4gY29udGFpbnNYWShleHRlbnQsIHRoaXMuZmxhdENvb3JkaW5hdGVzWzBdLCB0aGlzLmZsYXRDb29yZGluYXRlc1sxXSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIFBvaW50LnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIHNldENvb3JkaW5hdGVzIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgIHRoaXMuc2V0TGF5b3V0KG9wdF9sYXlvdXQsIGNvb3JkaW5hdGVzLCAwKTtcbiAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBkZWZsYXRlQ29vcmRpbmF0ZShcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCBjb29yZGluYXRlcywgdGhpcy5zdHJpZGUpO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9O1xuXG4gIHJldHVybiBQb2ludDtcbn0oU2ltcGxlR2VvbWV0cnkpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBQb2ludDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9pbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9jb250YWluc1xuICovXG5pbXBvcnQge2ZvckVhY2hDb3JuZXJ9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgZXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ0NvbnRhaW5zRXh0ZW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50KSB7XG4gIHZhciBvdXRzaWRlID0gZm9yRWFjaENvcm5lcihleHRlbnQsXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gICAgICovXG4gICAgZnVuY3Rpb24oY29vcmRpbmF0ZSkge1xuICAgICAgcmV0dXJuICFsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGNvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0pO1xuICAgIH0pO1xuICByZXR1cm4gIW91dHNpZGU7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHgsIHkpIHtcbiAgLy8gaHR0cDovL2dlb21hbGdvcml0aG1zLmNvbS9hMDMtX2luY2x1c2lvbi5odG1sXG4gIC8vIENvcHlyaWdodCAyMDAwIHNvZnRTdXJmZXIsIDIwMTIgRGFuIFN1bmRheVxuICAvLyBUaGlzIGNvZGUgbWF5IGJlIGZyZWVseSB1c2VkIGFuZCBtb2RpZmllZCBmb3IgYW55IHB1cnBvc2VcbiAgLy8gcHJvdmlkaW5nIHRoYXQgdGhpcyBjb3B5cmlnaHQgbm90aWNlIGlzIGluY2x1ZGVkIHdpdGggaXQuXG4gIC8vIFNvZnRTdXJmZXIgbWFrZXMgbm8gd2FycmFudHkgZm9yIHRoaXMgY29kZSwgYW5kIGNhbm5vdCBiZSBoZWxkXG4gIC8vIGxpYWJsZSBmb3IgYW55IHJlYWwgb3IgaW1hZ2luZWQgZGFtYWdlIHJlc3VsdGluZyBmcm9tIGl0cyB1c2UuXG4gIC8vIFVzZXJzIG9mIHRoaXMgY29kZSBtdXN0IHZlcmlmeSBjb3JyZWN0bmVzcyBmb3IgdGhlaXIgYXBwbGljYXRpb24uXG4gIHZhciB3biA9IDA7XG4gIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgMV07XG4gIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgaWYgKHkxIDw9IHkpIHtcbiAgICAgIGlmICh5MiA+IHkgJiYgKCh4MiAtIHgxKSAqICh5IC0geTEpKSAtICgoeCAtIHgxKSAqICh5MiAtIHkxKSkgPiAwKSB7XG4gICAgICAgIHduKys7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh5MiA8PSB5ICYmICgoeDIgLSB4MSkgKiAoeSAtIHkxKSkgLSAoKHggLSB4MSkgKiAoeTIgLSB5MSkpIDwgMCkge1xuICAgICAgd24tLTtcbiAgICB9XG4gICAgeDEgPSB4MjtcbiAgICB5MSA9IHkyO1xuICB9XG4gIHJldHVybiB3biAhPT0gMDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCB4LCB5KSB7XG4gIGlmIChlbmRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoIWxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzWzBdLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGZvciAodmFyIGkgPSAxLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIGVuZHNbaSAtIDFdLCBlbmRzW2ldLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NzQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgeCwgeSkge1xuICBpZiAoZW5kc3MubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgIGlmIChsaW5lYXJSaW5nc0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgeCwgeSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250YWlucy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2ludGVyaW9ycG9pbnRcbiAqL1xuaW1wb3J0IHtudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9ufSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG5pbXBvcnQge2xpbmVhclJpbmdzQ29udGFpbnNYWX0gZnJvbSAnLi9jb250YWlucy5qcyc7XG5cblxuLyoqXG4gKiBDYWxjdWxhdGVzIGEgcG9pbnQgdGhhdCBpcyBsaWtlbHkgdG8gbGllIGluIHRoZSBpbnRlcmlvciBvZiB0aGUgbGluZWFyIHJpbmdzLlxuICogSW5zcGlyZWQgYnkgSlRTJ3MgY29tLnZpdmlkc29sdXRpb25zLmp0cy5nZW9tLkdlb21ldHJ5I2dldEludGVyaW9yUG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q2VudGVycyBGbGF0IGNlbnRlcnMuXG4gKiBAcGFyYW0ge251bWJlcn0gZmxhdENlbnRlcnNPZmZzZXQgRmxhdCBjZW50ZXIgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X2Rlc3QgRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBEZXN0aW5hdGlvbiBwb2ludCBhcyBYWU0gY29vcmRpbmF0ZSwgd2hlcmUgTSBpcyB0aGVcbiAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyaW9yUG9pbnRPZkFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LFxuICBlbmRzLCBzdHJpZGUsIGZsYXRDZW50ZXJzLCBmbGF0Q2VudGVyc09mZnNldCwgb3B0X2Rlc3QpIHtcbiAgdmFyIGksIGlpLCB4LCB4MSwgeDIsIHkxLCB5MjtcbiAgdmFyIHkgPSBmbGF0Q2VudGVyc1tmbGF0Q2VudGVyc09mZnNldCArIDFdO1xuICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gIHZhciBpbnRlcnNlY3Rpb25zID0gW107XG4gIC8vIENhbGN1bGF0ZSBpbnRlcnNlY3Rpb25zIHdpdGggdGhlIGhvcml6b250YWwgbGluZVxuICBmb3IgKHZhciByID0gMCwgcnIgPSBlbmRzLmxlbmd0aDsgciA8IHJyOyArK3IpIHtcbiAgICB2YXIgZW5kID0gZW5kc1tyXTtcbiAgICB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICAgIHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICAgIGZvciAoaSA9IG9mZnNldDsgaSA8IGVuZDsgaSArPSBzdHJpZGUpIHtcbiAgICAgIHgyID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgICAgaWYgKCh5IDw9IHkxICYmIHkyIDw9IHkpIHx8ICh5MSA8PSB5ICYmIHkgPD0geTIpKSB7XG4gICAgICAgIHggPSAoeSAtIHkxKSAvICh5MiAtIHkxKSAqICh4MiAtIHgxKSArIHgxO1xuICAgICAgICBpbnRlcnNlY3Rpb25zLnB1c2goeCk7XG4gICAgICB9XG4gICAgICB4MSA9IHgyO1xuICAgICAgeTEgPSB5MjtcbiAgICB9XG4gIH1cbiAgLy8gRmluZCB0aGUgbG9uZ2VzdCBzZWdtZW50IG9mIHRoZSBob3Jpem9udGFsIGxpbmUgdGhhdCBoYXMgaXRzIGNlbnRlciBwb2ludFxuICAvLyBpbnNpZGUgdGhlIGxpbmVhciByaW5nLlxuICB2YXIgcG9pbnRYID0gTmFOO1xuICB2YXIgbWF4U2VnbWVudExlbmd0aCA9IC1JbmZpbml0eTtcbiAgaW50ZXJzZWN0aW9ucy5zb3J0KG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24pO1xuICB4MSA9IGludGVyc2VjdGlvbnNbMF07XG4gIGZvciAoaSA9IDEsIGlpID0gaW50ZXJzZWN0aW9ucy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgeDIgPSBpbnRlcnNlY3Rpb25zW2ldO1xuICAgIHZhciBzZWdtZW50TGVuZ3RoID0gTWF0aC5hYnMoeDIgLSB4MSk7XG4gICAgaWYgKHNlZ21lbnRMZW5ndGggPiBtYXhTZWdtZW50TGVuZ3RoKSB7XG4gICAgICB4ID0gKHgxICsgeDIpIC8gMjtcbiAgICAgIGlmIChsaW5lYXJSaW5nc0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgeCwgeSkpIHtcbiAgICAgICAgcG9pbnRYID0geDtcbiAgICAgICAgbWF4U2VnbWVudExlbmd0aCA9IHNlZ21lbnRMZW5ndGg7XG4gICAgICB9XG4gICAgfVxuICAgIHgxID0geDI7XG4gIH1cbiAgaWYgKGlzTmFOKHBvaW50WCkpIHtcbiAgICAvLyBUaGVyZSBpcyBubyBob3Jpem9udGFsIGxpbmUgdGhhdCBoYXMgaXRzIGNlbnRlciBwb2ludCBpbnNpZGUgdGhlIGxpbmVhclxuICAgIC8vIHJpbmcuICBVc2UgdGhlIGNlbnRlciBvZiB0aGUgdGhlIGxpbmVhciByaW5nJ3MgZXh0ZW50LlxuICAgIHBvaW50WCA9IGZsYXRDZW50ZXJzW2ZsYXRDZW50ZXJzT2Zmc2V0XTtcbiAgfVxuICBpZiAob3B0X2Rlc3QpIHtcbiAgICBvcHRfZGVzdC5wdXNoKHBvaW50WCwgeSwgbWF4U2VnbWVudExlbmd0aCk7XG4gICAgcmV0dXJuIG9wdF9kZXN0O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbcG9pbnRYLCB5LCBtYXhTZWdtZW50TGVuZ3RoXTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENlbnRlcnMgRmxhdCBjZW50ZXJzLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gSW50ZXJpb3IgcG9pbnRzIGFzIFhZTSBjb29yZGluYXRlcywgd2hlcmUgTSBpcyB0aGVcbiAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyaW9yUG9pbnRzT2ZNdWx0aUFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBmbGF0Q2VudGVycykge1xuICB2YXIgaW50ZXJpb3JQb2ludHMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgaW50ZXJpb3JQb2ludHMgPSBnZXRJbnRlcmlvclBvaW50T2ZBcnJheShmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZmxhdENlbnRlcnMsIDIgKiBpLCBpbnRlcmlvclBvaW50cyk7XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBpbnRlcmlvclBvaW50cztcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJpb3Jwb2ludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2ludGVyc2VjdHNleHRlbnRcbiAqL1xuaW1wb3J0IHtjb250YWluc0V4dGVudCwgY3JlYXRlRW1wdHksIGV4dGVuZEZsYXRDb29yZGluYXRlcywgaW50ZXJzZWN0cywgaW50ZXJzZWN0c1NlZ21lbnR9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQge2xpbmVhclJpbmdDb250YWluc1hZLCBsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnR9IGZyb20gJy4vY29udGFpbnMuanMnO1xuaW1wb3J0IHtmb3JFYWNoIGFzIGZvckVhY2hTZWdtZW50fSBmcm9tICcuL3NlZ21lbnRzLmpzJztcblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudCkge1xuICB2YXIgY29vcmRpbmF0ZXNFeHRlbnQgPSBleHRlbmRGbGF0Q29vcmRpbmF0ZXMoXG4gICAgY3JlYXRlRW1wdHkoKSwgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgaWYgKCFpbnRlcnNlY3RzKGV4dGVudCwgY29vcmRpbmF0ZXNFeHRlbnQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChjb250YWluc0V4dGVudChleHRlbnQsIGNvb3JkaW5hdGVzRXh0ZW50KSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChjb29yZGluYXRlc0V4dGVudFswXSA+PSBleHRlbnRbMF0gJiZcbiAgICAgIGNvb3JkaW5hdGVzRXh0ZW50WzJdIDw9IGV4dGVudFsyXSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChjb29yZGluYXRlc0V4dGVudFsxXSA+PSBleHRlbnRbMV0gJiZcbiAgICAgIGNvb3JkaW5hdGVzRXh0ZW50WzNdIDw9IGV4dGVudFszXSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmb3JFYWNoU2VnbWVudChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50MSBTdGFydCBwb2ludC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnQyIEVuZCBwb2ludC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIHNlZ21lbnQgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LFxuICAgICAqICAgICBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbihwb2ludDEsIHBvaW50Mikge1xuICAgICAgcmV0dXJuIGludGVyc2VjdHNTZWdtZW50KGV4dGVudCwgcG9pbnQxLCBwb2ludDIpO1xuICAgIH0pO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lU3RyaW5nQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZXh0ZW50KSB7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGlmIChpbnRlcnNlY3RzTGluZVN0cmluZyhcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzW2ldLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBvZmZzZXQgPSBlbmRzW2ldO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudCkge1xuICBpZiAoaW50ZXJzZWN0c0xpbmVTdHJpbmcoXG4gICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzBdLCBleHRlbnRbMV0pKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzBdLCBleHRlbnRbM10pKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzJdLCBleHRlbnRbMV0pKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzJdLCBleHRlbnRbM10pKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lYXJSaW5nQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZXh0ZW50KSB7XG4gIGlmICghaW50ZXJzZWN0c0xpbmVhclJpbmcoXG4gICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbMF0sIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoZW5kcy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBmb3IgKHZhciBpID0gMSwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBpZiAobGluZWFyUmluZ0NvbnRhaW5zRXh0ZW50KGZsYXRDb29yZGluYXRlcywgZW5kc1tpIC0gMV0sIGVuZHNbaV0sIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgaWYgKCFpbnRlcnNlY3RzTGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIGVuZHNbaSAtIDFdLCBlbmRzW2ldLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZWFyUmluZ011bHRpQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIGV4dGVudCkge1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICBpZiAoaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheShcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcnNlY3RzZXh0ZW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvc2VnbWVudHNcbiAqL1xuXG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBjYWxscyBgY2FsbGJhY2tgIGZvciBlYWNoIHNlZ21lbnQgb2YgdGhlIGZsYXQgY29vcmRpbmF0ZXNcbiAqIGFycmF5LiBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBhIHRydXRoeSB2YWx1ZSB0aGUgZnVuY3Rpb24gcmV0dXJucyB0aGF0XG4gKiB2YWx1ZSBpbW1lZGlhdGVseS4gT3RoZXJ3aXNlIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBTLCBpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUsIGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IFR9IGNhbGxiYWNrIEZ1bmN0aW9uXG4gKiAgICAgY2FsbGVkIGZvciBlYWNoIHNlZ21lbnQuXG4gKiBAcGFyYW0ge1M9fSBvcHRfdGhpcyBUaGUgb2JqZWN0IHRvIGJlIHVzZWQgYXMgdGhlIHZhbHVlIG9mICd0aGlzJ1xuICogICAgIHdpdGhpbiBjYWxsYmFjay5cbiAqIEByZXR1cm4ge1R8Ym9vbGVhbn0gVmFsdWUuXG4gKiBAdGVtcGxhdGUgVCxTXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgY2FsbGJhY2ssIG9wdF90aGlzKSB7XG4gIHZhciBwb2ludDEgPSBbZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXV07XG4gIHZhciBwb2ludDIgPSBbXTtcbiAgdmFyIHJldDtcbiAgZm9yICg7IChvZmZzZXQgKyBzdHJpZGUpIDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgcG9pbnQyWzBdID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIHN0cmlkZV07XG4gICAgcG9pbnQyWzFdID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIHN0cmlkZSArIDFdO1xuICAgIHJldCA9IGNhbGxiYWNrLmNhbGwob3B0X3RoaXMsIHBvaW50MSwgcG9pbnQyKTtcbiAgICBpZiAocmV0KSB7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICBwb2ludDFbMF0gPSBwb2ludDJbMF07XG4gICAgcG9pbnQxWzFdID0gcG9pbnQyWzFdO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VnbWVudHMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9yZXZlcnNlXG4gKi9cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgd2hpbGUgKG9mZnNldCA8IGVuZCAtIHN0cmlkZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgIHZhciB0bXAgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaV07XG4gICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaV0gPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgaV07XG4gICAgICBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgaV0gPSB0bXA7XG4gICAgfVxuICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgZW5kIC09IHN0cmlkZTtcbiAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXZlcnNlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvb3JpZW50XG4gKi9cbmltcG9ydCB7Y29vcmRpbmF0ZXMgYXMgcmV2ZXJzZUNvb3JkaW5hdGVzfSBmcm9tICcuL3JldmVyc2UuanMnO1xuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGNsb2Nrd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdJc0Nsb2Nrd2lzZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgLy8gaHR0cDovL3Rpbnl1cmwuY29tL2Nsb2Nrd2lzZS1tZXRob2RcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL09TR2VvL2dkYWwvYmxvYi90cnVuay9nZGFsL29nci9vZ3JsaW5lYXJyaW5nLmNwcFxuICB2YXIgZWRnZSA9IDA7XG4gIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgMV07XG4gIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgZWRnZSArPSAoeDIgLSB4MSkgKiAoeTIgKyB5MSk7XG4gICAgeDEgPSB4MjtcbiAgICB5MSA9IHkyO1xuICB9XG4gIHJldHVybiBlZGdlID4gMDtcbn1cblxuXG4vKipcbiAqIERldGVybWluZXMgaWYgbGluZWFyIHJpbmdzIGFyZSBvcmllbnRlZC4gIEJ5IGRlZmF1bHQsIGxlZnQtaGFuZCBvcmllbnRhdGlvblxuICogaXMgdGVzdGVkIChmaXJzdCByaW5nIG11c3QgYmUgY2xvY2t3aXNlLCByZW1haW5pbmcgcmluZ3MgY291bnRlci1jbG9ja3dpc2UpLlxuICogVG8gdGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvbiwgdXNlIHRoZSBgb3B0X3JpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgQXJyYXkgb2YgZW5kIGluZGV4ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9yaWdodCBUZXN0IGZvciByaWdodC1oYW5kIG9yaWVudGF0aW9uXG4gKiAgICAgKGNvdW50ZXItY2xvY2t3aXNlIGV4dGVyaW9yIHJpbmcgYW5kIGNsb2Nrd2lzZSBpbnRlcmlvciByaW5ncykuXG4gKiBAcmV0dXJuIHtib29sZWFufSBSaW5ncyBhcmUgY29ycmVjdGx5IG9yaWVudGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ0lzT3JpZW50ZWQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgb3B0X3JpZ2h0KSB7XG4gIHZhciByaWdodCA9IG9wdF9yaWdodCAhPT0gdW5kZWZpbmVkID8gb3B0X3JpZ2h0IDogZmFsc2U7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgIHZhciBpc0Nsb2Nrd2lzZSA9IGxpbmVhclJpbmdJc0Nsb2Nrd2lzZShcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgaWYgKGkgPT09IDApIHtcbiAgICAgIGlmICgocmlnaHQgJiYgaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICgocmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmIGlzQ2xvY2t3aXNlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIG9mZnNldCA9IGVuZDtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuXG4vKipcbiAqIERldGVybWluZXMgaWYgbGluZWFyIHJpbmdzIGFyZSBvcmllbnRlZC4gIEJ5IGRlZmF1bHQsIGxlZnQtaGFuZCBvcmllbnRhdGlvblxuICogaXMgdGVzdGVkIChmaXJzdCByaW5nIG11c3QgYmUgY2xvY2t3aXNlLCByZW1haW5pbmcgcmluZ3MgY291bnRlci1jbG9ja3dpc2UpLlxuICogVG8gdGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvbiwgdXNlIHRoZSBgb3B0X3JpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBBcnJheSBvZiBhcnJheSBvZiBlbmQgaW5kZXhlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3JpZ2h0IFRlc3QgZm9yIHJpZ2h0LWhhbmQgb3JpZW50YXRpb25cbiAqICAgICAoY291bnRlci1jbG9ja3dpc2UgZXh0ZXJpb3IgcmluZyBhbmQgY2xvY2t3aXNlIGludGVyaW9yIHJpbmdzKS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJpbmdzIGFyZSBjb3JyZWN0bHkgb3JpZW50ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc0FyZU9yaWVudGVkKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBvcHRfcmlnaHQpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGlmICghbGluZWFyUmluZ0lzT3JpZW50ZWQoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3NbaV0sIHN0cmlkZSwgb3B0X3JpZ2h0KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuXG4vKipcbiAqIE9yaWVudCBjb29yZGluYXRlcyBpbiBhIGZsYXQgYXJyYXkgb2YgbGluZWFyIHJpbmdzLiAgQnkgZGVmYXVsdCwgcmluZ3NcbiAqIGFyZSBvcmllbnRlZCBmb2xsb3dpbmcgdGhlIGxlZnQtaGFuZCBydWxlIChjbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZFxuICogY291bnRlci1jbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS4gIFRvIG9yaWVudCBhY2NvcmRpbmcgdG8gdGhlXG4gKiByaWdodC1oYW5kIHJ1bGUsIHVzZSB0aGUgYG9wdF9yaWdodGAgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9yaWdodCBGb2xsb3cgdGhlIHJpZ2h0LWhhbmQgcnVsZSBmb3Igb3JpZW50YXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEVuZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9yaWVudExpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG9wdF9yaWdodCkge1xuICB2YXIgcmlnaHQgPSBvcHRfcmlnaHQgIT09IHVuZGVmaW5lZCA/IG9wdF9yaWdodCA6IGZhbHNlO1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICB2YXIgaXNDbG9ja3dpc2UgPSBsaW5lYXJSaW5nSXNDbG9ja3dpc2UoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgIHZhciByZXZlcnNlID0gaSA9PT0gMCA/XG4gICAgICAocmlnaHQgJiYgaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSA6XG4gICAgICAocmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmIGlzQ2xvY2t3aXNlKTtcbiAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgcmV2ZXJzZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgfVxuICAgIG9mZnNldCA9IGVuZDtcbiAgfVxuICByZXR1cm4gb2Zmc2V0O1xufVxuXG5cbi8qKlxuICogT3JpZW50IGNvb3JkaW5hdGVzIGluIGEgZmxhdCBhcnJheSBvZiBsaW5lYXIgcmluZ3MuICBCeSBkZWZhdWx0LCByaW5nc1xuICogYXJlIG9yaWVudGVkIGZvbGxvd2luZyB0aGUgbGVmdC1oYW5kIHJ1bGUgKGNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kXG4gKiBjb3VudGVyLWNsb2Nrd2lzZSBmb3IgaW50ZXJpb3IgcmluZ3MpLiAgVG8gb3JpZW50IGFjY29yZGluZyB0byB0aGVcbiAqIHJpZ2h0LWhhbmQgcnVsZSwgdXNlIHRoZSBgb3B0X3JpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBBcnJheSBvZiBhcnJheSBvZiBlbmQgaW5kZXhlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3JpZ2h0IEZvbGxvdyB0aGUgcmlnaHQtaGFuZCBydWxlIGZvciBvcmllbnRhdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gRW5kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gb3JpZW50TGluZWFyUmluZ3NBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgb3B0X3JpZ2h0KSB7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBvZmZzZXQgPSBvcmllbnRMaW5lYXJSaW5ncyhcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzc1tpXSwgc3RyaWRlLCBvcHRfcmlnaHQpO1xuICB9XG4gIHJldHVybiBvZmZzZXQ7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9yaWVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9Qb2x5Z29uXG4gKi9cbmltcG9ydCB7ZXh0ZW5kfSBmcm9tICcuLi9hcnJheS5qcyc7XG5pbXBvcnQge2Nsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSwgZ2V0Q2VudGVyfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IEdlb21ldHJ5TGF5b3V0IGZyb20gJy4vR2VvbWV0cnlMYXlvdXQuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgTGluZWFyUmluZyBmcm9tICcuL0xpbmVhclJpbmcuanMnO1xuaW1wb3J0IFBvaW50IGZyb20gJy4vUG9pbnQuanMnO1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHtvZmZzZXQgYXMgc3BoZXJlT2Zmc2V0fSBmcm9tICcuLi9zcGhlcmUuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5ncyBhcyBsaW5lYXJSaW5nc0FyZWF9IGZyb20gJy4vZmxhdC9hcmVhLmpzJztcbmltcG9ydCB7YXNzaWduQ2xvc2VzdEFycmF5UG9pbnQsIGFycmF5TWF4U3F1YXJlZERlbHRhfSBmcm9tICcuL2ZsYXQvY2xvc2VzdC5qcyc7XG5pbXBvcnQge2xpbmVhclJpbmdzQ29udGFpbnNYWX0gZnJvbSAnLi9mbGF0L2NvbnRhaW5zLmpzJztcbmltcG9ydCB7ZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXl9IGZyb20gJy4vZmxhdC9kZWZsYXRlLmpzJztcbmltcG9ydCB7aW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXl9IGZyb20gJy4vZmxhdC9pbmZsYXRlLmpzJztcbmltcG9ydCB7Z2V0SW50ZXJpb3JQb2ludE9mQXJyYXl9IGZyb20gJy4vZmxhdC9pbnRlcmlvcnBvaW50LmpzJztcbmltcG9ydCB7aW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheX0gZnJvbSAnLi9mbGF0L2ludGVyc2VjdHNleHRlbnQuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5nSXNPcmllbnRlZCwgb3JpZW50TGluZWFyUmluZ3N9IGZyb20gJy4vZmxhdC9vcmllbnQuanMnO1xuaW1wb3J0IHtxdWFudGl6ZUFycmF5fSBmcm9tICcuL2ZsYXQvc2ltcGxpZnkuanMnO1xuaW1wb3J0IHttb2R1bG99IGZyb20gJy4uL21hdGguanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFBvbHlnb24gZ2VvbWV0cnkuXG4gKlxuICogQGFwaVxuICovXG52YXIgUG9seWdvbiA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFNpbXBsZUdlb21ldHJ5KSB7XG4gIGZ1bmN0aW9uIFBvbHlnb24oY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQsIG9wdF9lbmRzKSB7XG5cbiAgICBTaW1wbGVHZW9tZXRyeS5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmVuZHNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5mbGF0SW50ZXJpb3JQb2ludFJldmlzaW9uXyA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqL1xuICAgIHRoaXMuZmxhdEludGVyaW9yUG9pbnRfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heERlbHRhXyA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSAtMTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm9yaWVudGVkUmV2aXNpb25fID0gLTE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAqL1xuICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfID0gbnVsbDtcblxuICAgIGlmIChvcHRfbGF5b3V0ICE9PSB1bmRlZmluZWQgJiYgb3B0X2VuZHMpIHtcbiAgICAgIHRoaXMuc2V0RmxhdENvb3JkaW5hdGVzKG9wdF9sYXlvdXQsIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKSk7XG4gICAgICB0aGlzLmVuZHNfID0gb3B0X2VuZHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0Q29vcmRpbmF0ZXMoLyoqIEB0eXBlIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gKi8gKGNvb3JkaW5hdGVzKSwgb3B0X2xheW91dCk7XG4gICAgfVxuXG4gIH1cblxuICBpZiAoIFNpbXBsZUdlb21ldHJ5ICkgUG9seWdvbi5fX3Byb3RvX18gPSBTaW1wbGVHZW9tZXRyeTtcbiAgUG9seWdvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBTaW1wbGVHZW9tZXRyeSAmJiBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUgKTtcbiAgUG9seWdvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQb2x5Z29uO1xuXG4gIC8qKlxuICAgKiBBcHBlbmQgdGhlIHBhc3NlZCBsaW5lYXIgcmluZyB0byB0aGlzIHBvbHlnb24uXG4gICAqIEBwYXJhbSB7TGluZWFyUmluZ30gbGluZWFyUmluZyBMaW5lYXIgcmluZy5cbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuYXBwZW5kTGluZWFyUmluZyA9IGZ1bmN0aW9uIGFwcGVuZExpbmVhclJpbmcgKGxpbmVhclJpbmcpIHtcbiAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IGxpbmVhclJpbmcuZ2V0RmxhdENvb3JkaW5hdGVzKCkuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXh0ZW5kKHRoaXMuZmxhdENvb3JkaW5hdGVzLCBsaW5lYXJSaW5nLmdldEZsYXRDb29yZGluYXRlcygpKTtcbiAgICB9XG4gICAgdGhpcy5lbmRzXy5wdXNoKHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7IVBvbHlnb259IENsb25lLlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSAoKSB7XG4gICAgcmV0dXJuIG5ldyBQb2x5Z29uKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHRoaXMubGF5b3V0LCB0aGlzLmVuZHNfLnNsaWNlKCkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiBjbG9zZXN0UG9pbnRYWSAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICBpZiAobWluU3F1YXJlZERpc3RhbmNlIDwgY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZKHRoaXMuZ2V0RXh0ZW50KCksIHgsIHkpKSB7XG4gICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5tYXhEZWx0YVJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgIHRoaXMubWF4RGVsdGFfID0gTWF0aC5zcXJ0KGFycmF5TWF4U3F1YXJlZERlbHRhKFxuICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIDApKTtcbiAgICAgIHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgfVxuICAgIHJldHVybiBhc3NpZ25DbG9zZXN0QXJyYXlQb2ludChcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSxcbiAgICAgIHRoaXMubWF4RGVsdGFfLCB0cnVlLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBQb2x5Z29uLnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gY29udGFpbnNYWSAoeCwgeSkge1xuICAgIHJldHVybiBsaW5lYXJSaW5nc0NvbnRhaW5zWFkodGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgeCwgeSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgYXJlYSBvZiB0aGUgcG9seWdvbiBvbiBwcm9qZWN0ZWQgcGxhbmUuXG4gICAqIEByZXR1cm4ge251bWJlcn0gQXJlYSAob24gcHJvamVjdGVkIHBsYW5lKS5cbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuZ2V0QXJlYSA9IGZ1bmN0aW9uIGdldEFyZWEgKCkge1xuICAgIHJldHVybiBsaW5lYXJSaW5nc0FyZWEodGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY29vcmRpbmF0ZSBhcnJheSBmb3IgdGhpcyBnZW9tZXRyeS4gIFRoaXMgYXJyYXkgaGFzIHRoZSBzdHJ1Y3R1cmVcbiAgICogb2YgYSBHZW9KU09OIGNvb3JkaW5hdGUgYXJyYXkgZm9yIHBvbHlnb25zLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfcmlnaHQgT3JpZW50IGNvb3JkaW5hdGVzIGFjY29yZGluZyB0byB0aGUgcmlnaHQtaGFuZFxuICAgKiAgICAgcnVsZSAoY291bnRlci1jbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZCBjbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS5cbiAgICogICAgIElmIGBmYWxzZWAsIGNvb3JkaW5hdGVzIHdpbGwgYmUgb3JpZW50ZWQgYWNjb3JkaW5nIHRvIHRoZSBsZWZ0LWhhbmQgcnVsZVxuICAgKiAgICAgKGNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kIGNvdW50ZXItY2xvY2t3aXNlIGZvciBpbnRlcmlvciByaW5ncykuXG4gICAqICAgICBCeSBkZWZhdWx0LCBjb29yZGluYXRlIG9yaWVudGF0aW9uIHdpbGwgZGVwZW5kIG9uIGhvdyB0aGUgZ2VvbWV0cnkgd2FzXG4gICAqICAgICBjb25zdHJ1Y3RlZC5cbiAgICogQHJldHVybiB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IENvb3JkaW5hdGVzLlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBnZXRDb29yZGluYXRlcyAob3B0X3JpZ2h0KSB7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcztcbiAgICBpZiAob3B0X3JpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKS5zbGljZSgpO1xuICAgICAgb3JpZW50TGluZWFyUmluZ3MoXG4gICAgICAgIGZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIG9wdF9yaWdodCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgIH1cblxuICAgIHJldHVybiBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShcbiAgICAgIGZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBFbmRzLlxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuZ2V0RW5kcyA9IGZ1bmN0aW9uIGdldEVuZHMgKCkge1xuICAgIHJldHVybiB0aGlzLmVuZHNfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBJbnRlcmlvciBwb2ludC5cbiAgICovXG4gIFBvbHlnb24ucHJvdG90eXBlLmdldEZsYXRJbnRlcmlvclBvaW50ID0gZnVuY3Rpb24gZ2V0RmxhdEludGVyaW9yUG9pbnQgKCkge1xuICAgIGlmICh0aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgdmFyIGZsYXRDZW50ZXIgPSBnZXRDZW50ZXIodGhpcy5nZXRFeHRlbnQoKSk7XG4gICAgICB0aGlzLmZsYXRJbnRlcmlvclBvaW50XyA9IGdldEludGVyaW9yUG9pbnRPZkFycmF5KFxuICAgICAgICB0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLFxuICAgICAgICBmbGF0Q2VudGVyLCAwKTtcbiAgICAgIHRoaXMuZmxhdEludGVyaW9yUG9pbnRSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZsYXRJbnRlcmlvclBvaW50XztcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIGFuIGludGVyaW9yIHBvaW50IG9mIHRoZSBwb2x5Z29uLlxuICAgKiBAcmV0dXJuIHtQb2ludH0gSW50ZXJpb3IgcG9pbnQgYXMgWFlNIGNvb3JkaW5hdGUsIHdoZXJlIE0gaXMgdGhlXG4gICAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuZ2V0SW50ZXJpb3JQb2ludCA9IGZ1bmN0aW9uIGdldEludGVyaW9yUG9pbnQgKCkge1xuICAgIHJldHVybiBuZXcgUG9pbnQodGhpcy5nZXRGbGF0SW50ZXJpb3JQb2ludCgpLCBHZW9tZXRyeUxheW91dC5YWU0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG51bWJlciBvZiByaW5ncyBvZiB0aGUgcG9seWdvbiwgIHRoaXMgaW5jbHVkZXMgdGhlIGV4dGVyaW9yXG4gICAqIHJpbmcgYW5kIGFueSBpbnRlcmlvciByaW5ncy5cbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfSBOdW1iZXIgb2YgcmluZ3MuXG4gICAqIEBhcGlcbiAgICovXG4gIFBvbHlnb24ucHJvdG90eXBlLmdldExpbmVhclJpbmdDb3VudCA9IGZ1bmN0aW9uIGdldExpbmVhclJpbmdDb3VudCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW5kc18ubGVuZ3RoO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIE50aCBsaW5lYXIgcmluZyBvZiB0aGUgcG9seWdvbiBnZW9tZXRyeS4gUmV0dXJuIGBudWxsYCBpZiB0aGVcbiAgICogZ2l2ZW4gaW5kZXggaXMgb3V0IG9mIHJhbmdlLlxuICAgKiBUaGUgZXh0ZXJpb3IgbGluZWFyIHJpbmcgaXMgYXZhaWxhYmxlIGF0IGluZGV4IGAwYCBhbmQgdGhlIGludGVyaW9yIHJpbmdzXG4gICAqIGF0IGluZGV4IGAxYCBhbmQgYmV5b25kLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAqIEByZXR1cm4ge0xpbmVhclJpbmd9IExpbmVhciByaW5nLlxuICAgKiBAYXBpXG4gICAqL1xuICBQb2x5Z29uLnByb3RvdHlwZS5nZXRMaW5lYXJSaW5nID0gZnVuY3Rpb24gZ2V0TGluZWFyUmluZyAoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPCAwIHx8IHRoaXMuZW5kc18ubGVuZ3RoIDw9IGluZGV4KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKFxuICAgICAgaW5kZXggPT09IDAgPyAwIDogdGhpcy5lbmRzX1tpbmRleCAtIDFdLCB0aGlzLmVuZHNfW2luZGV4XSksIHRoaXMubGF5b3V0KTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBsaW5lYXIgcmluZ3Mgb2YgdGhlIHBvbHlnb24uXG4gICAqIEByZXR1cm4ge0FycmF5PExpbmVhclJpbmc+fSBMaW5lYXIgcmluZ3MuXG4gICAqIEBhcGlcbiAgICovXG4gIFBvbHlnb24ucHJvdG90eXBlLmdldExpbmVhclJpbmdzID0gZnVuY3Rpb24gZ2V0TGluZWFyUmluZ3MgKCkge1xuICAgIHZhciBsYXlvdXQgPSB0aGlzLmxheW91dDtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgdmFyIGVuZHMgPSB0aGlzLmVuZHNfO1xuICAgIHZhciBsaW5lYXJSaW5ncyA9IFtdO1xuICAgIHZhciBvZmZzZXQgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICB2YXIgbGluZWFyUmluZyA9IG5ldyBMaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcy5zbGljZShvZmZzZXQsIGVuZCksIGxheW91dCk7XG4gICAgICBsaW5lYXJSaW5ncy5wdXNoKGxpbmVhclJpbmcpO1xuICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gbGluZWFyUmluZ3M7XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE9yaWVudGVkIGZsYXQgY29vcmRpbmF0ZXMuXG4gICAqL1xuICBQb2x5Z29uLnByb3RvdHlwZS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIGdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzICgpIHtcbiAgICBpZiAodGhpcy5vcmllbnRlZFJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICAgIGlmIChsaW5lYXJSaW5nSXNPcmllbnRlZChcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSkpIHtcbiAgICAgICAgdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18gPSBmbGF0Q29vcmRpbmF0ZXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyA9IGZsYXRDb29yZGluYXRlcy5zbGljZSgpO1xuICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXy5sZW5ndGggPVxuICAgICAgICAgICAgb3JpZW50TGluZWFyUmluZ3MoXG4gICAgICAgICAgICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSk7XG4gICAgICB9XG4gICAgICB0aGlzLm9yaWVudGVkUmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc187XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBQb2x5Z29uLnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCA9IGZ1bmN0aW9uIGdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsIChzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgdmFyIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICB2YXIgc2ltcGxpZmllZEVuZHMgPSBbXTtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IHF1YW50aXplQXJyYXkoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsXG4gICAgICBNYXRoLnNxcnQoc3F1YXJlZFRvbGVyYW5jZSksXG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCAwLCBzaW1wbGlmaWVkRW5kcyk7XG4gICAgcmV0dXJuIG5ldyBQb2x5Z29uKHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBzaW1wbGlmaWVkRW5kcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIFBvbHlnb24ucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiBnZXRUeXBlICgpIHtcbiAgICByZXR1cm4gR2VvbWV0cnlUeXBlLlBPTFlHT047XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIFBvbHlnb24ucHJvdG90eXBlLmludGVyc2VjdHNFeHRlbnQgPSBmdW5jdGlvbiBpbnRlcnNlY3RzRXh0ZW50IChleHRlbnQpIHtcbiAgICByZXR1cm4gaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheShcbiAgICAgIHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSwgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIGV4dGVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIHBvbHlnb24uXG4gICAqIEBwYXJhbSB7IUFycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtHZW9tZXRyeUxheW91dD19IG9wdF9sYXlvdXQgTGF5b3V0LlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBzZXRDb29yZGluYXRlcyAoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICB0aGlzLnNldExheW91dChvcHRfbGF5b3V0LCBjb29yZGluYXRlcywgMik7XG4gICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICB9XG4gICAgdmFyIGVuZHMgPSBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheShcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCBjb29yZGluYXRlcywgdGhpcy5zdHJpZGUsIHRoaXMuZW5kc18pO1xuICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGVuZHMubGVuZ3RoID09PSAwID8gMCA6IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICByZXR1cm4gUG9seWdvbjtcbn0oU2ltcGxlR2VvbWV0cnkpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBQb2x5Z29uO1xuXG5cbi8qKlxuICogQ3JlYXRlIGFuIGFwcHJveGltYXRpb24gb2YgYSBjaXJjbGUgb24gdGhlIHN1cmZhY2Ugb2YgYSBzcGhlcmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlciAoYFtsb24sIGxhdF1gIGluIGRlZ3JlZXMpLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyBUaGUgZ3JlYXQtY2lyY2xlIGRpc3RhbmNlIGZyb20gdGhlIGNlbnRlciB0b1xuICogICAgIHRoZSBwb2x5Z29uIHZlcnRpY2VzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfbiBPcHRpb25hbCBudW1iZXIgb2YgdmVydGljZXMgZm9yIHRoZSByZXN1bHRpbmdcbiAqICAgICBwb2x5Z29uLiBEZWZhdWx0IGlzIGAzMmAuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9zcGhlcmVSYWRpdXMgT3B0aW9uYWwgcmFkaXVzIGZvciB0aGUgc3BoZXJlIChkZWZhdWx0cyB0b1xuICogICAgIHRoZSBFYXJ0aCdzIG1lYW4gcmFkaXVzIHVzaW5nIHRoZSBXR1M4NCBlbGxpcHNvaWQpLlxuICogQHJldHVybiB7UG9seWdvbn0gVGhlIFwiY2lyY3VsYXJcIiBwb2x5Z29uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2lyY3VsYXIoY2VudGVyLCByYWRpdXMsIG9wdF9uLCBvcHRfc3BoZXJlUmFkaXVzKSB7XG4gIHZhciBuID0gb3B0X24gPyBvcHRfbiA6IDMyO1xuICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICBleHRlbmQoZmxhdENvb3JkaW5hdGVzLCBzcGhlcmVPZmZzZXQoY2VudGVyLCByYWRpdXMsIDIgKiBNYXRoLlBJICogaSAvIG4sIG9wdF9zcGhlcmVSYWRpdXMpKTtcbiAgfVxuICBmbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMF0sIGZsYXRDb29yZGluYXRlc1sxXSk7XG4gIHJldHVybiBuZXcgUG9seWdvbihmbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBbZmxhdENvb3JkaW5hdGVzLmxlbmd0aF0pO1xufVxuXG5cbi8qKlxuICogQ3JlYXRlIGEgcG9seWdvbiBmcm9tIGFuIGV4dGVudC4gVGhlIGxheW91dCB1c2VkIGlzIGBYWWAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBUaGUgZXh0ZW50LlxuICogQHJldHVybiB7UG9seWdvbn0gVGhlIHBvbHlnb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRXh0ZW50KGV4dGVudCkge1xuICB2YXIgbWluWCA9IGV4dGVudFswXTtcbiAgdmFyIG1pblkgPSBleHRlbnRbMV07XG4gIHZhciBtYXhYID0gZXh0ZW50WzJdO1xuICB2YXIgbWF4WSA9IGV4dGVudFszXTtcbiAgdmFyIGZsYXRDb29yZGluYXRlcyA9XG4gICAgICBbbWluWCwgbWluWSwgbWluWCwgbWF4WSwgbWF4WCwgbWF4WSwgbWF4WCwgbWluWSwgbWluWCwgbWluWV07XG4gIHJldHVybiBuZXcgUG9seWdvbihmbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBbZmxhdENvb3JkaW5hdGVzLmxlbmd0aF0pO1xufVxuXG5cbi8qKlxuICogQ3JlYXRlIGEgcmVndWxhciBwb2x5Z29uIGZyb20gYSBjaXJjbGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGNpcmNsZSBDaXJjbGUgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9zaWRlcyBOdW1iZXIgb2Ygc2lkZXMgb2YgdGhlIHBvbHlnb24uIERlZmF1bHQgaXMgMzIuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9hbmdsZSBTdGFydCBhbmdsZSBmb3IgdGhlIGZpcnN0IHZlcnRleCBvZiB0aGUgcG9seWdvbiBpblxuICogICAgIHJhZGlhbnMuIERlZmF1bHQgaXMgMC5cbiAqIEByZXR1cm4ge1BvbHlnb259IFBvbHlnb24gZ2VvbWV0cnkuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQ2lyY2xlKGNpcmNsZSwgb3B0X3NpZGVzLCBvcHRfYW5nbGUpIHtcbiAgdmFyIHNpZGVzID0gb3B0X3NpZGVzID8gb3B0X3NpZGVzIDogMzI7XG4gIHZhciBzdHJpZGUgPSBjaXJjbGUuZ2V0U3RyaWRlKCk7XG4gIHZhciBsYXlvdXQgPSBjaXJjbGUuZ2V0TGF5b3V0KCk7XG4gIHZhciBjZW50ZXIgPSBjaXJjbGUuZ2V0Q2VudGVyKCk7XG4gIHZhciBhcnJheUxlbmd0aCA9IHN0cmlkZSAqIChzaWRlcyArIDEpO1xuICB2YXIgZmxhdENvb3JkaW5hdGVzID0gbmV3IEFycmF5KGFycmF5TGVuZ3RoKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheUxlbmd0aDsgaSArPSBzdHJpZGUpIHtcbiAgICBmbGF0Q29vcmRpbmF0ZXNbaV0gPSAwO1xuICAgIGZsYXRDb29yZGluYXRlc1tpICsgMV0gPSAwO1xuICAgIGZvciAodmFyIGogPSAyOyBqIDwgc3RyaWRlOyBqKyspIHtcbiAgICAgIGZsYXRDb29yZGluYXRlc1tpICsgal0gPSBjZW50ZXJbal07XG4gICAgfVxuICB9XG4gIHZhciBlbmRzID0gW2ZsYXRDb29yZGluYXRlcy5sZW5ndGhdO1xuICB2YXIgcG9seWdvbiA9IG5ldyBQb2x5Z29uKGZsYXRDb29yZGluYXRlcywgbGF5b3V0LCBlbmRzKTtcbiAgbWFrZVJlZ3VsYXIocG9seWdvbiwgY2VudGVyLCBjaXJjbGUuZ2V0UmFkaXVzKCksIG9wdF9hbmdsZSk7XG4gIHJldHVybiBwb2x5Z29uO1xufVxuXG5cbi8qKlxuICogTW9kaWZ5IHRoZSBjb29yZGluYXRlcyBvZiBhIHBvbHlnb24gdG8gbWFrZSBpdCBhIHJlZ3VsYXIgcG9seWdvbi5cbiAqIEBwYXJhbSB7UG9seWdvbn0gcG9seWdvbiBQb2x5Z29uIGdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIgb2YgdGhlIHJlZ3VsYXIgcG9seWdvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgUmFkaXVzIG9mIHRoZSByZWd1bGFyIHBvbHlnb24uXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9hbmdsZSBTdGFydCBhbmdsZSBmb3IgdGhlIGZpcnN0IHZlcnRleCBvZiB0aGUgcG9seWdvbiBpblxuICogICAgIHJhZGlhbnMuIERlZmF1bHQgaXMgMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VSZWd1bGFyKHBvbHlnb24sIGNlbnRlciwgcmFkaXVzLCBvcHRfYW5nbGUpIHtcbiAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHBvbHlnb24uZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gIHZhciBzdHJpZGUgPSBwb2x5Z29uLmdldFN0cmlkZSgpO1xuICB2YXIgc2lkZXMgPSBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIC8gc3RyaWRlIC0gMTtcbiAgdmFyIHN0YXJ0QW5nbGUgPSBvcHRfYW5nbGUgPyBvcHRfYW5nbGUgOiAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8PSBzaWRlczsgKytpKSB7XG4gICAgdmFyIG9mZnNldCA9IGkgKiBzdHJpZGU7XG4gICAgdmFyIGFuZ2xlID0gc3RhcnRBbmdsZSArIChtb2R1bG8oaSwgc2lkZXMpICogMiAqIE1hdGguUEkgLyBzaWRlcyk7XG4gICAgZmxhdENvb3JkaW5hdGVzW29mZnNldF0gPSBjZW50ZXJbMF0gKyAocmFkaXVzICogTWF0aC5jb3MoYW5nbGUpKTtcbiAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0gPSBjZW50ZXJbMV0gKyAocmFkaXVzICogTWF0aC5zaW4oYW5nbGUpKTtcbiAgfVxuICBwb2x5Z29uLmNoYW5nZWQoKTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9seWdvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVmlld1xuICovXG5pbXBvcnQge0RFRkFVTFRfVElMRV9TSVpFfSBmcm9tICcuL3RpbGVncmlkL2NvbW1vbi5qcyc7XG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCB7Vk9JRH0gZnJvbSAnLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHtjcmVhdGVFeHRlbnQsIG5vbmUgYXMgY2VudGVyTm9uZX0gZnJvbSAnLi9jZW50ZXJjb25zdHJhaW50LmpzJztcbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4vT2JqZWN0LmpzJztcbmltcG9ydCB7Y3JlYXRlU25hcFRvUmVzb2x1dGlvbnMsIGNyZWF0ZVNuYXBUb1Bvd2VyfSBmcm9tICcuL3Jlc29sdXRpb25jb25zdHJhaW50LmpzJztcbmltcG9ydCB7Y3JlYXRlU25hcFRvWmVybywgY3JlYXRlU25hcFRvTiwgbm9uZSBhcyByb3RhdGlvbk5vbmUsIGRpc2FibGV9IGZyb20gJy4vcm90YXRpb25jb25zdHJhaW50LmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuL1ZpZXdIaW50LmpzJztcbmltcG9ydCBWaWV3UHJvcGVydHkgZnJvbSAnLi9WaWV3UHJvcGVydHkuanMnO1xuaW1wb3J0IHtsaW5lYXJGaW5kTmVhcmVzdH0gZnJvbSAnLi9hcnJheS5qcyc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7YWRkIGFzIGFkZENvb3JkaW5hdGUsIHJvdGF0ZSBhcyByb3RhdGVDb29yZGluYXRlLCBlcXVhbHMgYXMgY29vcmRpbmF0ZXNFcXVhbH0gZnJvbSAnLi9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7aW5BbmRPdXR9IGZyb20gJy4vZWFzaW5nLmpzJztcbmltcG9ydCB7Z2V0Rm9yVmlld0FuZFNpemUsIGdldENlbnRlciwgZ2V0SGVpZ2h0LCBnZXRXaWR0aCwgaXNFbXB0eX0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCB7ZnJvbUV4dGVudCBhcyBwb2x5Z29uRnJvbUV4dGVudH0gZnJvbSAnLi9nZW9tL1BvbHlnb24uanMnO1xuaW1wb3J0IHtjbGFtcCwgbW9kdWxvfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHthc3NpZ259IGZyb20gJy4vb2JqLmpzJztcbmltcG9ydCB7Y3JlYXRlUHJvamVjdGlvbiwgTUVURVJTX1BFUl9VTklUfSBmcm9tICcuL3Byb2ouanMnO1xuaW1wb3J0IFVuaXRzIGZyb20gJy4vcHJvai9Vbml0cy5qcyc7XG5cblxuLyoqXG4gKiBBbiBhbmltYXRpb24gY29uZmlndXJhdGlvblxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEFuaW1hdGlvblxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW3NvdXJjZUNlbnRlcl1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFt0YXJnZXRDZW50ZXJdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3NvdXJjZVJlc29sdXRpb25dXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RhcmdldFJlc29sdXRpb25dXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3NvdXJjZVJvdGF0aW9uXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0YXJnZXRSb3RhdGlvbl1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdXG4gKiBAcHJvcGVydHkge251bWJlcn0gc3RhcnRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBkdXJhdGlvblxuICogQHByb3BlcnR5IHtib29sZWFufSBjb21wbGV0ZVxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIpOm51bWJlcn0gZWFzaW5nXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGJvb2xlYW4pfSBjYWxsYmFja1xuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBDb25zdHJhaW50c1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2NlbnRlcmNvbnN0cmFpbnQuanNcIikuVHlwZX0gY2VudGVyXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcmVzb2x1dGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZX0gcmVzb2x1dGlvblxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3JvdGF0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlfSByb3RhdGlvblxuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGaXRPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbc2l6ZV0gVGhlIHNpemUgaW4gcGl4ZWxzIG9mIHRoZSBib3ggdG8gZml0XG4gKiB0aGUgZXh0ZW50IGludG8uIERlZmF1bHQgaXMgdGhlIGN1cnJlbnQgc2l6ZSBvZiB0aGUgZmlyc3QgbWFwIGluIHRoZSBET00gdGhhdFxuICogdXNlcyB0aGlzIHZpZXcsIG9yIGBbMTAwLCAxMDBdYCBpZiBubyBzdWNoIG1hcCBpcyBmb3VuZC5cbiAqIEBwcm9wZXJ0eSB7IUFycmF5PG51bWJlcj59IFtwYWRkaW5nPVswLCAwLCAwLCAwXV0gUGFkZGluZyAoaW4gcGl4ZWxzKSB0byBiZVxuICogY2xlYXJlZCBpbnNpZGUgdGhlIHZpZXcuIFZhbHVlcyBpbiB0aGUgYXJyYXkgYXJlIHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdFxuICogcGFkZGluZy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbnN0cmFpblJlc29sdXRpb249dHJ1ZV0gQ29uc3RyYWluIHRoZSByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbmVhcmVzdD1mYWxzZV0gSWYgYGNvbnN0cmFpblJlc29sdXRpb25gIGlzIGB0cnVlYCwgZ2V0XG4gKiB0aGUgbmVhcmVzdCBleHRlbnQgaW5zdGVhZCBvZiB0aGUgY2xvc2VzdCB0aGF0IGFjdHVhbGx5IGZpdHMgdGhlIHZpZXcuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb249MF0gTWluaW11bSByZXNvbHV0aW9uIHRoYXQgd2Ugem9vbSB0by5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gTWF4aW11bSB6b29tIGxldmVsIHRoYXQgd2Ugem9vbSB0by4gSWZcbiAqIGBtaW5SZXNvbHV0aW9uYCBpcyBnaXZlbiwgdGhpcyBwcm9wZXJ0eSBpcyBpZ25vcmVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbl0gVGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQnkgZGVmYXVsdCwgdGhlcmUgaXMgbm8gYW5pbWF0aW9uIHRvIHRoZSB0YXJnZXQgZXh0ZW50LlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIpOm51bWJlcn0gW2Vhc2luZ10gVGhlIGVhc2luZyBmdW5jdGlvbiB1c2VkIGR1cmluZ1xuICogdGhlIGFuaW1hdGlvbiAoZGVmYXVsdHMgdG8ge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmd+aW5BbmRPdXR9KS5cbiAqIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaCBmcmFtZSB3aXRoIGEgbnVtYmVyIHJlcHJlc2VudGluZyBhXG4gKiBmcmFjdGlvbiBvZiB0aGUgYW5pbWF0aW9uJ3MgZHVyYXRpb24uICBUaGUgZnVuY3Rpb24gc2hvdWxkIHJldHVybiBhIG51bWJlclxuICogYmV0d2VlbiAwIGFuZCAxIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3MgdG93YXJkIHRoZSBkZXN0aW5hdGlvbiBzdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oYm9vbGVhbil9IFtjYWxsYmFja10gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIHZpZXcgaXMgaW5cbiAqIGl0cyBmaW5hbCBwb3NpdGlvbi4gVGhlIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHdpdGggYHRydWVgIGlmIHRoZSBhbmltYXRpb25cbiAqIHNlcmllcyBjb21wbGV0ZWQgb24gaXRzIG93biBvciBgZmFsc2VgIGlmIGl0IHdhcyBjYW5jZWxsZWQuXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFZpZXdPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbY2VudGVyXSBUaGUgaW5pdGlhbCBjZW50ZXIgZm9yXG4gKiB0aGUgdmlldy4gVGhlIGNvb3JkaW5hdGUgc3lzdGVtIGZvciB0aGUgY2VudGVyIGlzIHNwZWNpZmllZCB3aXRoIHRoZVxuICogYHByb2plY3Rpb25gIG9wdGlvbi4gTGF5ZXIgc291cmNlcyB3aWxsIG5vdCBiZSBmZXRjaGVkIGlmIHRoaXMgaXMgbm90IHNldCxcbiAqIGJ1dCB0aGUgY2VudGVyIGNhbiBiZSBzZXQgbGF0ZXIgd2l0aCB7QGxpbmsgI3NldENlbnRlcn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW58bnVtYmVyfSBbY29uc3RyYWluUm90YXRpb249dHJ1ZV0gUm90YXRpb24gY29uc3RyYWludC5cbiAqIGBmYWxzZWAgbWVhbnMgbm8gY29uc3RyYWludC4gYHRydWVgIG1lYW5zIG5vIGNvbnN0cmFpbnQsIGJ1dCBzbmFwIHRvIHplcm9cbiAqIG5lYXIgemVyby4gQSBudW1iZXIgY29uc3RyYWlucyB0aGUgcm90YXRpb24gdG8gdGhhdCBudW1iZXIgb2YgdmFsdWVzLiBGb3JcbiAqIGV4YW1wbGUsIGA0YCB3aWxsIGNvbnN0cmFpbiB0aGUgcm90YXRpb24gdG8gMCwgOTAsIDE4MCwgYW5kIDI3MCBkZWdyZWVzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZW5hYmxlUm90YXRpb249dHJ1ZV0gRW5hYmxlIHJvdGF0aW9uLlxuICogSWYgYGZhbHNlYCwgYSByb3RhdGlvbiBjb25zdHJhaW50IHRoYXQgYWx3YXlzIHNldHMgdGhlIHJvdGF0aW9uIHRvIHplcm8gaXNcbiAqIHVzZWQuIFRoZSBgY29uc3RyYWluUm90YXRpb25gIG9wdGlvbiBoYXMgbm8gZWZmZWN0IGlmIGBlbmFibGVSb3RhdGlvbmAgaXNcbiAqIGBmYWxzZWAuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGV4dGVudCB0aGF0IGNvbnN0cmFpbnMgdGhlXG4gKiBjZW50ZXIsIGluIG90aGVyIHdvcmRzLCBjZW50ZXIgY2Fubm90IGJlIHNldCBvdXRzaWRlIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJdCBpcyB1c2VkIHRvZ2V0aGVyIHdpdGggYG1pblJlc29sdXRpb25gIChvclxuICogYG1heFpvb21gKSBhbmQgYHpvb21GYWN0b3JgLiBJZiB1bnNwZWNpZmllZCBpdCBpcyBjYWxjdWxhdGVkIGluIHN1Y2ggYSB3YXlcbiAqIHRoYXQgdGhlIHByb2plY3Rpb24ncyB2YWxpZGl0eSBleHRlbnQgZml0cyBpbiBhIDI1NngyNTYgcHggdGlsZS4gSWYgdGhlXG4gKiBwcm9qZWN0aW9uIGlzIFNwaGVyaWNhbCBNZXJjYXRvciAodGhlIGRlZmF1bHQpIHRoZW4gYG1heFJlc29sdXRpb25gIGRlZmF1bHRzXG4gKiB0byBgNDAwNzUwMTYuNjg1NTc4NDkgLyAyNTYgPSAxNTY1NDMuMDMzOTI4MDQwOTdgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LiAgSXQgaXMgdXNlZCB0b2dldGhlciB3aXRoIGBtYXhSZXNvbHV0aW9uYCAob3JcbiAqIGBtaW5ab29tYCkgYW5kIGB6b29tRmFjdG9yYC4gIElmIHVuc3BlY2lmaWVkIGl0IGlzIGNhbGN1bGF0ZWQgYXNzdW1pbmcgMjlcbiAqIHpvb20gbGV2ZWxzICh3aXRoIGEgZmFjdG9yIG9mIDIpLiBJZiB0aGUgcHJvamVjdGlvbiBpcyBTcGhlcmljYWwgTWVyY2F0b3JcbiAqICh0aGUgZGVmYXVsdCkgdGhlbiBgbWluUmVzb2x1dGlvbmAgZGVmYXVsdHMgdG9cbiAqIGA0MDA3NTAxNi42ODU1Nzg0OSAvIDI1NiAvIE1hdGgucG93KDIsIDI4KSA9IDAuMDAwNTgzMTY4MjQ1NTgzOTI1M2AuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb209MjhdIFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gKiByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWluWm9vbWAgKG9yXG4gKiBgbWF4UmVzb2x1dGlvbmApIGFuZCBgem9vbUZhY3RvcmAuICBOb3RlIHRoYXQgaWYgYG1pblJlc29sdXRpb25gIGlzIGFsc29cbiAqIHByb3ZpZGVkLCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgYG1heFpvb21gLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gKiByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWF4Wm9vbWAgKG9yXG4gKiBgbWluUmVzb2x1dGlvbmApIGFuZCBgem9vbUZhY3RvcmAuICBOb3RlIHRoYXQgaWYgYG1heFJlc29sdXRpb25gIGlzIGFsc29cbiAqIHByb3ZpZGVkLCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgYG1pblpvb21gLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uPSdFUFNHOjM4NTcnXSBUaGVcbiAqIHByb2plY3Rpb24uIFRoZSBkZWZhdWx0IGlzIFNwaGVyaWNhbCBNZXJjYXRvci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVzb2x1dGlvbl0gVGhlIGluaXRpYWwgcmVzb2x1dGlvbiBmb3IgdGhlIHZpZXcuIFRoZVxuICogdW5pdHMgYXJlIGBwcm9qZWN0aW9uYCB1bml0cyBwZXIgcGl4ZWwgKGUuZy4gbWV0ZXJzIHBlciBwaXhlbCkuIEFuXG4gKiBhbHRlcm5hdGl2ZSB0byBzZXR0aW5nIHRoaXMgaXMgdG8gc2V0IGB6b29tYC4gTGF5ZXIgc291cmNlcyB3aWxsIG5vdCBiZVxuICogZmV0Y2hlZCBpZiBuZWl0aGVyIHRoaXMgbm9yIGB6b29tYCBhcmUgZGVmaW5lZCwgYnV0IHRoZXkgY2FuIGJlIHNldCBsYXRlclxuICogd2l0aCB7QGxpbmsgI3NldFpvb219IG9yIHtAbGluayAjc2V0UmVzb2x1dGlvbn0uXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtyZXNvbHV0aW9uc10gUmVzb2x1dGlvbnMgdG8gZGV0ZXJtaW5lIHRoZVxuICogcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJZiBzZXQgdGhlIGBtYXhSZXNvbHV0aW9uYCwgYG1pblJlc29sdXRpb25gLFxuICogYG1pblpvb21gLCBgbWF4Wm9vbWAsIGFuZCBgem9vbUZhY3RvcmAgb3B0aW9ucyBhcmUgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcm90YXRpb249MF0gVGhlIGluaXRpYWwgcm90YXRpb24gZm9yIHRoZSB2aWV3IGluIHJhZGlhbnNcbiAqIChwb3NpdGl2ZSByb3RhdGlvbiBjbG9ja3dpc2UsIDAgbWVhbnMgTm9ydGgpLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tXSBPbmx5IHVzZWQgaWYgYHJlc29sdXRpb25gIGlzIG5vdCBkZWZpbmVkLiBab29tXG4gKiBsZXZlbCB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgaW5pdGlhbCByZXNvbHV0aW9uIGZvciB0aGUgdmlldy4gVGhlIGluaXRpYWxcbiAqIHJlc29sdXRpb24gaXMgZGV0ZXJtaW5lZCB1c2luZyB0aGUge0BsaW5rICNjb25zdHJhaW5SZXNvbHV0aW9ufSBtZXRob2QuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21GYWN0b3I9Ml0gVGhlIHpvb20gZmFjdG9yIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZVxuICogcmVzb2x1dGlvbiBjb25zdHJhaW50LlxuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBbmltYXRpb25PcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbY2VudGVyXSBUaGUgY2VudGVyIG9mIHRoZSB2aWV3IGF0IHRoZSBlbmQgb2ZcbiAqIHRoZSBhbmltYXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21dIFRoZSB6b29tIGxldmVsIG9mIHRoZSB2aWV3IGF0IHRoZSBlbmQgb2YgdGhlXG4gKiBhbmltYXRpb24uIFRoaXMgdGFrZXMgcHJlY2VkZW5jZSBvdmVyIGByZXNvbHV0aW9uYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVzb2x1dGlvbl0gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcgYXQgdGhlIGVuZFxuICogb2YgdGhlIGFuaW1hdGlvbi4gIElmIGB6b29tYCBpcyBhbHNvIHByb3ZpZGVkLCB0aGlzIG9wdGlvbiB3aWxsIGJlIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JvdGF0aW9uXSBUaGUgcm90YXRpb24gb2YgdGhlIHZpZXcgYXQgdGhlIGVuZCBvZlxuICogdGhlIGFuaW1hdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIE9wdGlvbmFsIGFuY2hvciB0byByZW1haW5lZCBmaXhlZFxuICogZHVyaW5nIGEgcm90YXRpb24gb3IgcmVzb2x1dGlvbiBhbmltYXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTEwMDBdIFRoZSBkdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTpudW1iZXJ9IFtlYXNpbmddIFRoZSBlYXNpbmcgZnVuY3Rpb24gdXNlZFxuICogZHVyaW5nIHRoZSBhbmltYXRpb24gKGRlZmF1bHRzIHRvIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nfmluQW5kT3V0fSkuXG4gKiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggZnJhbWUgd2l0aCBhIG51bWJlciByZXByZXNlbnRpbmcgYVxuICogZnJhY3Rpb24gb2YgdGhlIGFuaW1hdGlvbidzIGR1cmF0aW9uLiAgVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBudW1iZXJcbiAqIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIHRvd2FyZCB0aGUgZGVzdGluYXRpb24gc3RhdGUuXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0YXRlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXJcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvblxuICogQHByb3BlcnR5IHtudW1iZXJ9IHJlc29sdXRpb25cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSByb3RhdGlvblxuICogQHByb3BlcnR5IHtudW1iZXJ9IHpvb21cbiAqL1xuXG5cbi8qKlxuICogRGVmYXVsdCBtaW4gem9vbSBsZXZlbCBmb3IgdGhlIG1hcCB2aWV3LlxuICogQHR5cGUge251bWJlcn1cbiAqL1xudmFyIERFRkFVTFRfTUlOX1pPT00gPSAwO1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBWaWV3IG9iamVjdCByZXByZXNlbnRzIGEgc2ltcGxlIDJEIHZpZXcgb2YgdGhlIG1hcC5cbiAqXG4gKiBUaGlzIGlzIHRoZSBvYmplY3QgdG8gYWN0IHVwb24gdG8gY2hhbmdlIHRoZSBjZW50ZXIsIHJlc29sdXRpb24sXG4gKiBhbmQgcm90YXRpb24gb2YgdGhlIG1hcC5cbiAqXG4gKiAjIyMgVGhlIHZpZXcgc3RhdGVzXG4gKlxuICogQW4gVmlldyBpcyBkZXRlcm1pbmVkIGJ5IHRocmVlIHN0YXRlczogYGNlbnRlcmAsIGByZXNvbHV0aW9uYCxcbiAqIGFuZCBgcm90YXRpb25gLiBFYWNoIHN0YXRlIGhhcyBhIGNvcnJlc3BvbmRpbmcgZ2V0dGVyIGFuZCBzZXR0ZXIsIGUuZy5cbiAqIGBnZXRDZW50ZXJgIGFuZCBgc2V0Q2VudGVyYCBmb3IgdGhlIGBjZW50ZXJgIHN0YXRlLlxuICpcbiAqIEFuIFZpZXcgaGFzIGEgYHByb2plY3Rpb25gLiBUaGUgcHJvamVjdGlvbiBkZXRlcm1pbmVzIHRoZVxuICogY29vcmRpbmF0ZSBzeXN0ZW0gb2YgdGhlIGNlbnRlciwgYW5kIGl0cyB1bml0cyBkZXRlcm1pbmUgdGhlIHVuaXRzIG9mIHRoZVxuICogcmVzb2x1dGlvbiAocHJvamVjdGlvbiB1bml0cyBwZXIgcGl4ZWwpLiBUaGUgZGVmYXVsdCBwcm9qZWN0aW9uIGlzXG4gKiBTcGhlcmljYWwgTWVyY2F0b3IgKEVQU0c6Mzg1NykuXG4gKlxuICogIyMjIFRoZSBjb25zdHJhaW50c1xuICpcbiAqIGBzZXRDZW50ZXJgLCBgc2V0UmVzb2x1dGlvbmAgYW5kIGBzZXRSb3RhdGlvbmAgY2FuIGJlIHVzZWQgdG8gY2hhbmdlIHRoZVxuICogc3RhdGVzIG9mIHRoZSB2aWV3LiBBbnkgdmFsdWUgY2FuIGJlIHBhc3NlZCB0byB0aGUgc2V0dGVycy4gQW5kIHRoZSB2YWx1ZVxuICogdGhhdCBpcyBwYXNzZWQgdG8gYSBzZXR0ZXIgd2lsbCBlZmZlY3RpdmVseSBiZSB0aGUgdmFsdWUgc2V0IGluIHRoZSB2aWV3LFxuICogYW5kIHJldHVybmVkIGJ5IHRoZSBjb3JyZXNwb25kaW5nIGdldHRlci5cbiAqXG4gKiBCdXQgYSBWaWV3IG9iamVjdCBhbHNvIGhhcyBhICpyZXNvbHV0aW9uIGNvbnN0cmFpbnQqLCBhXG4gKiAqcm90YXRpb24gY29uc3RyYWludCogYW5kIGEgKmNlbnRlciBjb25zdHJhaW50Ki5cbiAqXG4gKiBBcyBzYWlkIGFib3ZlLCBubyBjb25zdHJhaW50cyBhcmUgYXBwbGllZCB3aGVuIHRoZSBzZXR0ZXJzIGFyZSB1c2VkIHRvIHNldFxuICogbmV3IHN0YXRlcyBmb3IgdGhlIHZpZXcuIEFwcGx5aW5nIGNvbnN0cmFpbnRzIGlzIGRvbmUgZXhwbGljaXRseSB0aHJvdWdoXG4gKiB0aGUgdXNlIG9mIHRoZSBgY29uc3RyYWluKmAgZnVuY3Rpb25zIChgY29uc3RyYWluUmVzb2x1dGlvbmAgYW5kXG4gKiBgY29uc3RyYWluUm90YXRpb25gIGFuZCBgY29uc3RyYWluQ2VudGVyYCkuXG4gKlxuICogVGhlIG1haW4gdXNlcnMgb2YgdGhlIGNvbnN0cmFpbnRzIGFyZSB0aGUgaW50ZXJhY3Rpb25zIGFuZCB0aGVcbiAqIGNvbnRyb2xzLiBGb3IgZXhhbXBsZSwgZG91YmxlLWNsaWNraW5nIG9uIHRoZSBtYXAgY2hhbmdlcyB0aGUgdmlldyB0b1xuICogdGhlIFwibmV4dFwiIHJlc29sdXRpb24uIEFuZCByZWxlYXNpbmcgdGhlIGZpbmdlcnMgYWZ0ZXIgcGluY2gtem9vbWluZ1xuICogc25hcHMgdG8gdGhlIGNsb3Nlc3QgcmVzb2x1dGlvbiAod2l0aCBhbiBhbmltYXRpb24pLlxuICpcbiAqIFRoZSAqcmVzb2x1dGlvbiBjb25zdHJhaW50KiBzbmFwcyB0byBzcGVjaWZpYyByZXNvbHV0aW9ucy4gSXQgaXNcbiAqIGRldGVybWluZWQgYnkgdGhlIGZvbGxvd2luZyBvcHRpb25zOiBgcmVzb2x1dGlvbnNgLCBgbWF4UmVzb2x1dGlvbmAsXG4gKiBgbWF4Wm9vbWAsIGFuZCBgem9vbUZhY3RvcmAuIElmIGByZXNvbHV0aW9uc2AgaXMgc2V0LCB0aGUgb3RoZXIgdGhyZWVcbiAqIG9wdGlvbnMgYXJlIGlnbm9yZWQuIFNlZSBkb2N1bWVudGF0aW9uIGZvciBlYWNoIG9wdGlvbiBmb3IgbW9yZVxuICogaW5mb3JtYXRpb24uXG4gKlxuICogVGhlICpyb3RhdGlvbiBjb25zdHJhaW50KiBzbmFwcyB0byBzcGVjaWZpYyBhbmdsZXMuIEl0IGlzIGRldGVybWluZWRcbiAqIGJ5IHRoZSBmb2xsb3dpbmcgb3B0aW9uczogYGVuYWJsZVJvdGF0aW9uYCBhbmQgYGNvbnN0cmFpblJvdGF0aW9uYC5cbiAqIEJ5IGRlZmF1bHQgdGhlIHJvdGF0aW9uIHZhbHVlIGlzIHNuYXBwZWQgdG8gemVybyB3aGVuIGFwcHJvYWNoaW5nIHRoZVxuICogaG9yaXpvbnRhbC5cbiAqXG4gKiBUaGUgKmNlbnRlciBjb25zdHJhaW50KiBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBgZXh0ZW50YCBvcHRpb24uIEJ5XG4gKiBkZWZhdWx0IHRoZSBjZW50ZXIgaXMgbm90IGNvbnN0cmFpbmVkIGF0IGFsbC5cbiAqXG4gICogQGFwaVxuICovXG52YXIgVmlldyA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEJhc2VPYmplY3QpIHtcbiAgZnVuY3Rpb24gVmlldyhvcHRfb3B0aW9ucykge1xuICAgIEJhc2VPYmplY3QuY2FsbCh0aGlzKTtcblxuICAgIHZhciBvcHRpb25zID0gYXNzaWduKHt9LCBvcHRfb3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAqL1xuICAgIHRoaXMuaGludHNfID0gWzAsIDBdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7QXJyYXk8QXJyYXk8QW5pbWF0aW9uPj59XG4gICAgICovXG4gICAgdGhpcy5hbmltYXRpb25zXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV87XG5cbiAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbnNfID0gdGhpcy51cGRhdGVBbmltYXRpb25zXy5iaW5kKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLnByb2plY3Rpb25fID0gY3JlYXRlUHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24sICdFUFNHOjM4NTcnKTtcblxuICAgIHRoaXMuYXBwbHlPcHRpb25zXyhvcHRpb25zKTtcbiAgfVxuXG4gIGlmICggQmFzZU9iamVjdCApIFZpZXcuX19wcm90b19fID0gQmFzZU9iamVjdDtcbiAgVmlldy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBCYXNlT2JqZWN0ICYmIEJhc2VPYmplY3QucHJvdG90eXBlICk7XG4gIFZpZXcucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVmlldztcblxuICAvKipcbiAgICogU2V0IHVwIHRoZSB2aWV3IHdpdGggdGhlIGdpdmVuIG9wdGlvbnMuXG4gICAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuYXBwbHlPcHRpb25zXyA9IGZ1bmN0aW9uIGFwcGx5T3B0aW9uc18gKG9wdGlvbnMpIHtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCAqPn1cbiAgICAgKi9cbiAgICB2YXIgcHJvcGVydGllcyA9IHt9O1xuICAgIHByb3BlcnRpZXNbVmlld1Byb3BlcnR5LkNFTlRFUl0gPSBvcHRpb25zLmNlbnRlciAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdGlvbnMuY2VudGVyIDogbnVsbDtcblxuICAgIHZhciByZXNvbHV0aW9uQ29uc3RyYWludEluZm8gPSBjcmVhdGVSZXNvbHV0aW9uQ29uc3RyYWludChvcHRpb25zKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heFJlc29sdXRpb25fID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLm1heFJlc29sdXRpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5taW5SZXNvbHV0aW9uXyA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby5taW5SZXNvbHV0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuem9vbUZhY3Rvcl8gPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8uem9vbUZhY3RvcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMucmVzb2x1dGlvbnNfID0gb3B0aW9ucy5yZXNvbHV0aW9ucztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1pblpvb21fID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLm1pblpvb207XG5cbiAgICB2YXIgY2VudGVyQ29uc3RyYWludCA9IGNyZWF0ZUNlbnRlckNvbnN0cmFpbnQob3B0aW9ucyk7XG4gICAgdmFyIHJlc29sdXRpb25Db25zdHJhaW50ID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLmNvbnN0cmFpbnQ7XG4gICAgdmFyIHJvdGF0aW9uQ29uc3RyYWludCA9IGNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludChvcHRpb25zKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0NvbnN0cmFpbnRzfVxuICAgICAqL1xuICAgIHRoaXMuY29uc3RyYWludHNfID0ge1xuICAgICAgY2VudGVyOiBjZW50ZXJDb25zdHJhaW50LFxuICAgICAgcmVzb2x1dGlvbjogcmVzb2x1dGlvbkNvbnN0cmFpbnQsXG4gICAgICByb3RhdGlvbjogcm90YXRpb25Db25zdHJhaW50XG4gICAgfTtcblxuICAgIGlmIChvcHRpb25zLnJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcHJvcGVydGllc1tWaWV3UHJvcGVydHkuUkVTT0xVVElPTl0gPSBvcHRpb25zLnJlc29sdXRpb247XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLnpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcHJvcGVydGllc1tWaWV3UHJvcGVydHkuUkVTT0xVVElPTl0gPSB0aGlzLmNvbnN0cmFpblJlc29sdXRpb24oXG4gICAgICAgIHRoaXMubWF4UmVzb2x1dGlvbl8sIG9wdGlvbnMuem9vbSAtIHRoaXMubWluWm9vbV8pO1xuXG4gICAgICBpZiAodGhpcy5yZXNvbHV0aW9uc18pIHsgLy8gaW4gY2FzZSBtYXAgem9vbSBpcyBvdXQgb2YgbWluL21heCB6b29tIHJhbmdlXG4gICAgICAgIHByb3BlcnRpZXNbVmlld1Byb3BlcnR5LlJFU09MVVRJT05dID0gY2xhbXAoXG4gICAgICAgICAgTnVtYmVyKHRoaXMuZ2V0UmVzb2x1dGlvbigpIHx8IHByb3BlcnRpZXNbVmlld1Byb3BlcnR5LlJFU09MVVRJT05dKSxcbiAgICAgICAgICB0aGlzLm1pblJlc29sdXRpb25fLCB0aGlzLm1heFJlc29sdXRpb25fKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcHJvcGVydGllc1tWaWV3UHJvcGVydHkuUk9UQVRJT05dID0gb3B0aW9ucy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yb3RhdGlvbiA6IDA7XG4gICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Vmlld09wdGlvbnN9XG4gICAgICovXG4gICAgdGhpcy5vcHRpb25zXyA9IG9wdGlvbnM7XG5cbiAgfTtcblxuICAvKipcbiAgICogR2V0IGFuIHVwZGF0ZWQgdmVyc2lvbiBvZiB0aGUgdmlldyBvcHRpb25zIHVzZWQgdG8gY29uc3RydWN0IHRoZSB2aWV3LiAgVGhlXG4gICAqIGN1cnJlbnQgcmVzb2x1dGlvbiAob3Igem9vbSksIGNlbnRlciwgYW5kIHJvdGF0aW9uIGFyZSBhcHBsaWVkIHRvIGFueSBzdG9yZWRcbiAgICogb3B0aW9ucy4gIFRoZSBwcm92aWRlZCBvcHRpb25zIGNhbiBiZSB1c2VkIHRvIGFwcGx5IG5ldyBtaW4vbWF4IHpvb20gb3JcbiAgICogcmVzb2x1dGlvbiBsaW1pdHMuXG4gICAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG5ld09wdGlvbnMgTmV3IG9wdGlvbnMgdG8gYmUgYXBwbGllZC5cbiAgICogQHJldHVybiB7Vmlld09wdGlvbnN9IE5ldyBvcHRpb25zIHVwZGF0ZWQgd2l0aCB0aGUgY3VycmVudCB2aWV3IHN0YXRlLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0VXBkYXRlZE9wdGlvbnNfID0gZnVuY3Rpb24gZ2V0VXBkYXRlZE9wdGlvbnNfIChuZXdPcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhc3NpZ24oe30sIHRoaXMub3B0aW9uc18pO1xuXG4gICAgLy8gcHJlc2VydmUgcmVzb2x1dGlvbiAob3Igem9vbSlcbiAgICBpZiAob3B0aW9ucy5yZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9wdGlvbnMucmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zLnpvb20gPSB0aGlzLmdldFpvb20oKTtcbiAgICB9XG5cbiAgICAvLyBwcmVzZXJ2ZSBjZW50ZXJcbiAgICBvcHRpb25zLmNlbnRlciA9IHRoaXMuZ2V0Q2VudGVyKCk7XG5cbiAgICAvLyBwcmVzZXJ2ZSByb3RhdGlvblxuICAgIG9wdGlvbnMucm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG5cbiAgICByZXR1cm4gYXNzaWduKHt9LCBvcHRpb25zLCBuZXdPcHRpb25zKTtcbiAgfTtcblxuICAvKipcbiAgICogQW5pbWF0ZSB0aGUgdmlldy4gIFRoZSB2aWV3J3MgY2VudGVyLCB6b29tIChvciByZXNvbHV0aW9uKSwgYW5kIHJvdGF0aW9uXG4gICAqIGNhbiBiZSBhbmltYXRlZCBmb3Igc21vb3RoIHRyYW5zaXRpb25zIGJldHdlZW4gdmlldyBzdGF0ZXMuICBGb3IgZXhhbXBsZSxcbiAgICogdG8gYW5pbWF0ZSB0aGUgdmlldyB0byBhIG5ldyB6b29tIGxldmVsOlxuICAgKlxuICAgKiAgICAgdmlldy5hbmltYXRlKHt6b29tOiB2aWV3LmdldFpvb20oKSArIDF9KTtcbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhlIGFuaW1hdGlvbiBsYXN0cyBvbmUgc2Vjb25kIGFuZCB1c2VzIGluLWFuZC1vdXQgZWFzaW5nLiAgWW91XG4gICAqIGNhbiBjdXN0b21pemUgdGhpcyBiZWhhdmlvciBieSBpbmNsdWRpbmcgYGR1cmF0aW9uYCAoaW4gbWlsbGlzZWNvbmRzKSBhbmRcbiAgICogYGVhc2luZ2Agb3B0aW9ucyAoc2VlIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nfSkuXG4gICAqXG4gICAqIFRvIGNoYWluIHRvZ2V0aGVyIG11bHRpcGxlIGFuaW1hdGlvbnMsIGNhbGwgdGhlIG1ldGhvZCB3aXRoIG11bHRpcGxlXG4gICAqIGFuaW1hdGlvbiBvYmplY3RzLiAgRm9yIGV4YW1wbGUsIHRvIGZpcnN0IHpvb20gYW5kIHRoZW4gcGFuOlxuICAgKlxuICAgKiAgICAgdmlldy5hbmltYXRlKHt6b29tOiAxMH0sIHtjZW50ZXI6IFswLCAwXX0pO1xuICAgKlxuICAgKiBJZiB5b3UgcHJvdmlkZSBhIGZ1bmN0aW9uIGFzIHRoZSBsYXN0IGFyZ3VtZW50IHRvIHRoZSBhbmltYXRlIG1ldGhvZCwgaXRcbiAgICogd2lsbCBnZXQgY2FsbGVkIGF0IHRoZSBlbmQgb2YgYW4gYW5pbWF0aW9uIHNlcmllcy4gIFRoZSBjYWxsYmFjayB3aWxsIGJlXG4gICAqIGNhbGxlZCB3aXRoIGB0cnVlYCBpZiB0aGUgYW5pbWF0aW9uIHNlcmllcyBjb21wbGV0ZWQgb24gaXRzIG93biBvciBgZmFsc2VgXG4gICAqIGlmIGl0IHdhcyBjYW5jZWxsZWQuXG4gICAqXG4gICAqIEFuaW1hdGlvbnMgYXJlIGNhbmNlbGxlZCBieSB1c2VyIGludGVyYWN0aW9ucyAoZS5nLiBkcmFnZ2luZyB0aGUgbWFwKSBvciBieVxuICAgKiBjYWxsaW5nIGB2aWV3LnNldENlbnRlcigpYCwgYHZpZXcuc2V0UmVzb2x1dGlvbigpYCwgb3IgYHZpZXcuc2V0Um90YXRpb24oKWBcbiAgICogKG9yIGFub3RoZXIgbWV0aG9kIHRoYXQgY2FsbHMgb25lIG9mIHRoZXNlKS5cbiAgICpcbiAgICogQHBhcmFtIHsuLi4oQW5pbWF0aW9uT3B0aW9uc3xmdW5jdGlvbihib29sZWFuKSl9IHZhcl9hcmdzIEFuaW1hdGlvblxuICAgKiAgICAgb3B0aW9ucy4gIE11bHRpcGxlIGFuaW1hdGlvbnMgY2FuIGJlIHJ1biBpbiBzZXJpZXMgYnkgcGFzc2luZyBtdWx0aXBsZVxuICAgKiAgICAgb3B0aW9ucyBvYmplY3RzLiAgVG8gcnVuIG11bHRpcGxlIGFuaW1hdGlvbnMgaW4gcGFyYWxsZWwsIGNhbGwgdGhlIG1ldGhvZFxuICAgKiAgICAgbXVsdGlwbGUgdGltZXMuICBBbiBvcHRpb25hbCBjYWxsYmFjayBjYW4gYmUgcHJvdmlkZWQgYXMgYSBmaW5hbFxuICAgKiAgICAgYXJndW1lbnQuICBUaGUgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgd2l0aCBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyXG4gICAqICAgICB0aGUgYW5pbWF0aW9uIGNvbXBsZXRlZCB3aXRob3V0IGJlaW5nIGNhbmNlbGxlZC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uIGFuaW1hdGUgKHZhcl9hcmdzKSB7XG4gICAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzO1xuXG4gICAgdmFyIGFuaW1hdGlvbkNvdW50ID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB2YXIgY2FsbGJhY2s7XG4gICAgaWYgKGFuaW1hdGlvbkNvdW50ID4gMSAmJiB0eXBlb2YgYXJndW1lbnRzW2FuaW1hdGlvbkNvdW50IC0gMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNhbGxiYWNrID0gYXJndW1lbnRzW2FuaW1hdGlvbkNvdW50IC0gMV07XG4gICAgICAtLWFuaW1hdGlvbkNvdW50O1xuICAgIH1cbiAgICBpZiAoIXRoaXMuaXNEZWYoKSkge1xuICAgICAgLy8gaWYgdmlldyBwcm9wZXJ0aWVzIGFyZSBub3QgeWV0IHNldCwgc2hvcnRjdXQgdG8gdGhlIGZpbmFsIHN0YXRlXG4gICAgICB2YXIgc3RhdGUgPSBhcmd1bWVudHNbYW5pbWF0aW9uQ291bnQgLSAxXTtcbiAgICAgIGlmIChzdGF0ZS5jZW50ZXIpIHtcbiAgICAgICAgdGhpcy5zZXRDZW50ZXIoc3RhdGUuY2VudGVyKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS56b29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5zZXRab29tKHN0YXRlLnpvb20pO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLnJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5zZXRSb3RhdGlvbihzdGF0ZS5yb3RhdGlvbik7XG4gICAgICB9XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHRydWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIHZhciBjZW50ZXIgPSB0aGlzLmdldENlbnRlcigpLnNsaWNlKCk7XG4gICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICB2YXIgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgdmFyIHNlcmllcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWF0aW9uQ291bnQ7ICsraSkge1xuICAgICAgdmFyIG9wdGlvbnMgPSAvKiogQHR5cGUge0FuaW1hdGlvbk9wdGlvbnN9ICovIChhcmd1bWVudHMkMVtpXSk7XG5cbiAgICAgIHZhciBhbmltYXRpb24gPSAvKiogQHR5cGUge0FuaW1hdGlvbn0gKi8gKHtcbiAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgIGFuY2hvcjogb3B0aW9ucy5hbmNob3IsXG4gICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMTAwMCxcbiAgICAgICAgZWFzaW5nOiBvcHRpb25zLmVhc2luZyB8fCBpbkFuZE91dFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgICBhbmltYXRpb24uc291cmNlQ2VudGVyID0gY2VudGVyO1xuICAgICAgICBhbmltYXRpb24udGFyZ2V0Q2VudGVyID0gb3B0aW9ucy5jZW50ZXI7XG4gICAgICAgIGNlbnRlciA9IGFuaW1hdGlvbi50YXJnZXRDZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLnpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgICAgIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uID0gdGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uKFxuICAgICAgICAgIHRoaXMubWF4UmVzb2x1dGlvbl8sIG9wdGlvbnMuem9vbSAtIHRoaXMubWluWm9vbV8sIDApO1xuICAgICAgICByZXNvbHV0aW9uID0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb247XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVzb2x1dGlvbikge1xuICAgICAgICBhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgICAgIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uID0gb3B0aW9ucy5yZXNvbHV0aW9uO1xuICAgICAgICByZXNvbHV0aW9uID0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb247XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLnJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uID0gcm90YXRpb247XG4gICAgICAgIHZhciBkZWx0YSA9IG1vZHVsbyhvcHRpb25zLnJvdGF0aW9uIC0gcm90YXRpb24gKyBNYXRoLlBJLCAyICogTWF0aC5QSSkgLSBNYXRoLlBJO1xuICAgICAgICBhbmltYXRpb24udGFyZ2V0Um90YXRpb24gPSByb3RhdGlvbiArIGRlbHRhO1xuICAgICAgICByb3RhdGlvbiA9IGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbjtcbiAgICAgIH1cblxuICAgICAgYW5pbWF0aW9uLmNhbGxiYWNrID0gY2FsbGJhY2s7XG5cbiAgICAgIC8vIGNoZWNrIGlmIGFuaW1hdGlvbiBpcyBhIG5vLW9wXG4gICAgICBpZiAoaXNOb29wQW5pbWF0aW9uKGFuaW1hdGlvbikpIHtcbiAgICAgICAgYW5pbWF0aW9uLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgLy8gd2Ugc3RpbGwgcHVzaCBpdCBvbnRvIHRoZSBzZXJpZXMgZm9yIGNhbGxiYWNrIGhhbmRsaW5nXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFydCArPSBhbmltYXRpb24uZHVyYXRpb247XG4gICAgICB9XG4gICAgICBzZXJpZXMucHVzaChhbmltYXRpb24pO1xuICAgIH1cbiAgICB0aGlzLmFuaW1hdGlvbnNfLnB1c2goc2VyaWVzKTtcbiAgICB0aGlzLnNldEhpbnQoVmlld0hpbnQuQU5JTUFUSU5HLCAxKTtcbiAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbnNfKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBpZiB0aGUgdmlldyBpcyBiZWluZyBhbmltYXRlZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHZpZXcgaXMgYmVpbmcgYW5pbWF0ZWQuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldEFuaW1hdGluZyA9IGZ1bmN0aW9uIGdldEFuaW1hdGluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGludHNfW1ZpZXdIaW50LkFOSU1BVElOR10gPiAwO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgaWYgdGhlIHVzZXIgaXMgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgdmlldywgc3VjaCBhcyBwYW5uaW5nIG9yIHpvb21pbmcuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB2aWV3IGlzIGJlaW5nIGludGVyYWN0ZWQgd2l0aC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0SW50ZXJhY3RpbmcgPSBmdW5jdGlvbiBnZXRJbnRlcmFjdGluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGludHNfW1ZpZXdIaW50LklOVEVSQUNUSU5HXSA+IDA7XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbmNlbCBhbnkgb25nb2luZyBhbmltYXRpb25zLlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5jYW5jZWxBbmltYXRpb25zID0gZnVuY3Rpb24gY2FuY2VsQW5pbWF0aW9ucyAoKSB7XG4gICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgLXRoaXMuaGludHNfW1ZpZXdIaW50LkFOSU1BVElOR10pO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIHNlcmllcyA9IHRoaXMuYW5pbWF0aW9uc19baV07XG4gICAgICBpZiAoc2VyaWVzWzBdLmNhbGxiYWNrKSB7XG4gICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKHNlcmllc1swXS5jYWxsYmFjaywgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmFuaW1hdGlvbnNfLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhbGwgYW5pbWF0aW9ucy5cbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnVwZGF0ZUFuaW1hdGlvbnNfID0gZnVuY3Rpb24gdXBkYXRlQW5pbWF0aW9uc18gKCkge1xuICAgIGlmICh0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVBbmltYXRpb25LZXlfKTtcbiAgICAgIHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgIHZhciBtb3JlID0gZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIHZhciBzZXJpZXMgPSB0aGlzLmFuaW1hdGlvbnNfW2ldO1xuICAgICAgdmFyIHNlcmllc0NvbXBsZXRlID0gdHJ1ZTtcbiAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IHNlcmllcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIHZhciBhbmltYXRpb24gPSBzZXJpZXNbal07XG4gICAgICAgIGlmIChhbmltYXRpb24uY29tcGxldGUpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWxhcHNlZCA9IG5vdyAtIGFuaW1hdGlvbi5zdGFydDtcbiAgICAgICAgdmFyIGZyYWN0aW9uID0gYW5pbWF0aW9uLmR1cmF0aW9uID4gMCA/IGVsYXBzZWQgLyBhbmltYXRpb24uZHVyYXRpb24gOiAxO1xuICAgICAgICBpZiAoZnJhY3Rpb24gPj0gMSkge1xuICAgICAgICAgIGFuaW1hdGlvbi5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgZnJhY3Rpb24gPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlcmllc0NvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByb2dyZXNzID0gYW5pbWF0aW9uLmVhc2luZyhmcmFjdGlvbik7XG4gICAgICAgIGlmIChhbmltYXRpb24uc291cmNlQ2VudGVyKSB7XG4gICAgICAgICAgdmFyIHgwID0gYW5pbWF0aW9uLnNvdXJjZUNlbnRlclswXTtcbiAgICAgICAgICB2YXIgeTAgPSBhbmltYXRpb24uc291cmNlQ2VudGVyWzFdO1xuICAgICAgICAgIHZhciB4MSA9IGFuaW1hdGlvbi50YXJnZXRDZW50ZXJbMF07XG4gICAgICAgICAgdmFyIHkxID0gYW5pbWF0aW9uLnRhcmdldENlbnRlclsxXTtcbiAgICAgICAgICB2YXIgeCA9IHgwICsgcHJvZ3Jlc3MgKiAoeDEgLSB4MCk7XG4gICAgICAgICAgdmFyIHkgPSB5MCArIHByb2dyZXNzICogKHkxIC0geTApO1xuICAgICAgICAgIHRoaXMuc2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIsIFt4LCB5XSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uICYmIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgdmFyIHJlc29sdXRpb24gPSBwcm9ncmVzcyA9PT0gMSA/XG4gICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiA6XG4gICAgICAgICAgICBhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiArIHByb2dyZXNzICogKGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uIC0gYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24pO1xuICAgICAgICAgIGlmIChhbmltYXRpb24uYW5jaG9yKSB7XG4gICAgICAgICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuQ0VOVEVSLFxuICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUNlbnRlclpvb20ocmVzb2x1dGlvbiwgYW5pbWF0aW9uLmFuY2hvcikpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuUkVTT0xVVElPTiwgcmVzb2x1dGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbiAhPT0gdW5kZWZpbmVkICYmIGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdmFyIHJvdGF0aW9uID0gcHJvZ3Jlc3MgPT09IDEgP1xuICAgICAgICAgICAgbW9kdWxvKGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiArIE1hdGguUEksIDIgKiBNYXRoLlBJKSAtIE1hdGguUEkgOlxuICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uICsgcHJvZ3Jlc3MgKiAoYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uIC0gYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uKTtcbiAgICAgICAgICBpZiAoYW5pbWF0aW9uLmFuY2hvcikge1xuICAgICAgICAgICAgdGhpcy5zZXQoVmlld1Byb3BlcnR5LkNFTlRFUixcbiAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVDZW50ZXJSb3RhdGUocm90YXRpb24sIGFuaW1hdGlvbi5hbmNob3IpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5zZXQoVmlld1Byb3BlcnR5LlJPVEFUSU9OLCByb3RhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgbW9yZSA9IHRydWU7XG4gICAgICAgIGlmICghYW5pbWF0aW9uLmNvbXBsZXRlKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzZXJpZXNDb21wbGV0ZSkge1xuICAgICAgICB0aGlzLmFuaW1hdGlvbnNfW2ldID0gbnVsbDtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgLTEpO1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBzZXJpZXNbMF0uY2FsbGJhY2s7XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBwcnVuZSBjb21wbGV0ZWQgc2VyaWVzXG4gICAgdGhpcy5hbmltYXRpb25zXyA9IHRoaXMuYW5pbWF0aW9uc18uZmlsdGVyKEJvb2xlYW4pO1xuICAgIGlmIChtb3JlICYmIHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVBbmltYXRpb25zXyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gVGFyZ2V0IHJvdGF0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhbmNob3IgUm90YXRpb24gYW5jaG9yLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlciBmb3Igcm90YXRpb24gYW5kIGFuY2hvci5cbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmNhbGN1bGF0ZUNlbnRlclJvdGF0ZSA9IGZ1bmN0aW9uIGNhbGN1bGF0ZUNlbnRlclJvdGF0ZSAocm90YXRpb24sIGFuY2hvcikge1xuICAgIHZhciBjZW50ZXI7XG4gICAgdmFyIGN1cnJlbnRDZW50ZXIgPSB0aGlzLmdldENlbnRlcigpO1xuICAgIGlmIChjdXJyZW50Q2VudGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNlbnRlciA9IFtjdXJyZW50Q2VudGVyWzBdIC0gYW5jaG9yWzBdLCBjdXJyZW50Q2VudGVyWzFdIC0gYW5jaG9yWzFdXTtcbiAgICAgIHJvdGF0ZUNvb3JkaW5hdGUoY2VudGVyLCByb3RhdGlvbiAtIHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICBhZGRDb29yZGluYXRlKGNlbnRlciwgYW5jaG9yKTtcbiAgICB9XG4gICAgcmV0dXJuIGNlbnRlcjtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFuY2hvciBab29tIGFuY2hvci5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIgZm9yIHJlc29sdXRpb24gYW5kIGFuY2hvci5cbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmNhbGN1bGF0ZUNlbnRlclpvb20gPSBmdW5jdGlvbiBjYWxjdWxhdGVDZW50ZXJab29tIChyZXNvbHV0aW9uLCBhbmNob3IpIHtcbiAgICB2YXIgY2VudGVyO1xuICAgIHZhciBjdXJyZW50Q2VudGVyID0gdGhpcy5nZXRDZW50ZXIoKTtcbiAgICB2YXIgY3VycmVudFJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICBpZiAoY3VycmVudENlbnRlciAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciB4ID0gYW5jaG9yWzBdIC0gcmVzb2x1dGlvbiAqIChhbmNob3JbMF0gLSBjdXJyZW50Q2VudGVyWzBdKSAvIGN1cnJlbnRSZXNvbHV0aW9uO1xuICAgICAgdmFyIHkgPSBhbmNob3JbMV0gLSByZXNvbHV0aW9uICogKGFuY2hvclsxXSAtIGN1cnJlbnRDZW50ZXJbMV0pIC8gY3VycmVudFJlc29sdXRpb247XG4gICAgICBjZW50ZXIgPSBbeCwgeV07XG4gICAgfVxuICAgIHJldHVybiBjZW50ZXI7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBWaWV3cG9ydCBzaXplIG9yIGBbMTAwLCAxMDBdYCB3aGVuIG5vIHZpZXdwb3J0IGlzIGZvdW5kLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0U2l6ZUZyb21WaWV3cG9ydF8gPSBmdW5jdGlvbiBnZXRTaXplRnJvbVZpZXdwb3J0XyAoKSB7XG4gICAgdmFyIHNpemUgPSBbMTAwLCAxMDBdO1xuICAgIHZhciBzZWxlY3RvciA9ICcub2wtdmlld3BvcnRbZGF0YS12aWV3PVwiJyArIGdldFVpZCh0aGlzKSArICdcIl0nO1xuICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgIHZhciBtZXRyaWNzID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICAgIHNpemVbMF0gPSBwYXJzZUludChtZXRyaWNzLndpZHRoLCAxMCk7XG4gICAgICBzaXplWzFdID0gcGFyc2VJbnQobWV0cmljcy5oZWlnaHQsIDEwKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpemU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY29uc3RyYWluZWQgY2VudGVyIG9mIHRoaXMgdmlldy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IGNlbnRlciBDZW50ZXIuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gQ29uc3RyYWluZWQgY2VudGVyLlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5jb25zdHJhaW5DZW50ZXIgPSBmdW5jdGlvbiBjb25zdHJhaW5DZW50ZXIgKGNlbnRlcikge1xuICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXy5jZW50ZXIoY2VudGVyKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBjb25zdHJhaW5lZCByZXNvbHV0aW9uIG9mIHRoaXMgdmlldy5cbiAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2RlbHRhIERlbHRhLiBEZWZhdWx0IGlzIGAwYC5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGlyZWN0aW9uIERpcmVjdGlvbi4gRGVmYXVsdCBpcyBgMGAuXG4gICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IENvbnN0cmFpbmVkIHJlc29sdXRpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmNvbnN0cmFpblJlc29sdXRpb24gPSBmdW5jdGlvbiBjb25zdHJhaW5SZXNvbHV0aW9uIChyZXNvbHV0aW9uLCBvcHRfZGVsdGEsIG9wdF9kaXJlY3Rpb24pIHtcbiAgICB2YXIgZGVsdGEgPSBvcHRfZGVsdGEgfHwgMDtcbiAgICB2YXIgZGlyZWN0aW9uID0gb3B0X2RpcmVjdGlvbiB8fCAwO1xuICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHJlc29sdXRpb24sIGRlbHRhLCBkaXJlY3Rpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvbnN0cmFpbmVkIHJvdGF0aW9uIG9mIHRoaXMgdmlldy5cbiAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGVsdGEgRGVsdGEuIERlZmF1bHQgaXMgYDBgLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBDb25zdHJhaW5lZCByb3RhdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuY29uc3RyYWluUm90YXRpb24gPSBmdW5jdGlvbiBjb25zdHJhaW5Sb3RhdGlvbiAocm90YXRpb24sIG9wdF9kZWx0YSkge1xuICAgIHZhciBkZWx0YSA9IG9wdF9kZWx0YSB8fCAwO1xuICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXy5yb3RhdGlvbihyb3RhdGlvbiwgZGVsdGEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgY2VudGVyLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldENlbnRlciA9IGZ1bmN0aW9uIGdldENlbnRlciAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoVmlld1Byb3BlcnR5LkNFTlRFUikpXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7Q29uc3RyYWludHN9IENvbnN0cmFpbnRzLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0Q29uc3RyYWludHMgPSBmdW5jdGlvbiBnZXRDb25zdHJhaW50cyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3RyYWludHNfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfaGludHMgRGVzdGluYXRpb24gYXJyYXkuXG4gICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEhpbnQuXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5nZXRIaW50cyA9IGZ1bmN0aW9uIGdldEhpbnRzIChvcHRfaGludHMpIHtcbiAgICBpZiAob3B0X2hpbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9wdF9oaW50c1swXSA9IHRoaXMuaGludHNfWzBdO1xuICAgICAgb3B0X2hpbnRzWzFdID0gdGhpcy5oaW50c19bMV07XG4gICAgICByZXR1cm4gb3B0X2hpbnRzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5oaW50c18uc2xpY2UoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB0aGUgZXh0ZW50IGZvciB0aGUgY3VycmVudCB2aWV3IHN0YXRlIGFuZCB0aGUgcGFzc2VkIHNpemUuXG4gICAqIFRoZSBzaXplIGlzIHRoZSBwaXhlbCBkaW1lbnNpb25zIG9mIHRoZSBib3ggaW50byB3aGljaCB0aGUgY2FsY3VsYXRlZCBleHRlbnRcbiAgICogc2hvdWxkIGZpdC4gSW4gbW9zdCBjYXNlcyB5b3Ugd2FudCB0byBnZXQgdGhlIGV4dGVudCBvZiB0aGUgZW50aXJlIG1hcCxcbiAgICogdGhhdCBpcyBgbWFwLmdldFNpemUoKWAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemU9fSBvcHRfc2l6ZSBCb3ggcGl4ZWwgc2l6ZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgc2l6ZSBvZiB0aGVcbiAgICogZmlyc3QgbWFwIHRoYXQgdXNlcyB0aGlzIHZpZXcgd2lsbCBiZSB1c2VkLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuY2FsY3VsYXRlRXh0ZW50ID0gZnVuY3Rpb24gY2FsY3VsYXRlRXh0ZW50IChvcHRfc2l6ZSkge1xuICAgIHZhciBzaXplID0gb3B0X3NpemUgfHwgdGhpcy5nZXRTaXplRnJvbVZpZXdwb3J0XygpO1xuICAgIHZhciBjZW50ZXIgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gKi8gKHRoaXMuZ2V0Q2VudGVyKCkpO1xuICAgIGFzc2VydChjZW50ZXIsIDEpOyAvLyBUaGUgdmlldyBjZW50ZXIgaXMgbm90IGRlZmluZWRcbiAgICB2YXIgcmVzb2x1dGlvbiA9IC8qKiBAdHlwZSB7IW51bWJlcn0gKi8gKHRoaXMuZ2V0UmVzb2x1dGlvbigpKTtcbiAgICBhc3NlcnQocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkLCAyKTsgLy8gVGhlIHZpZXcgcmVzb2x1dGlvbiBpcyBub3QgZGVmaW5lZFxuICAgIHZhciByb3RhdGlvbiA9IC8qKiBAdHlwZSB7IW51bWJlcn0gKi8gKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgYXNzZXJ0KHJvdGF0aW9uICE9PSB1bmRlZmluZWQsIDMpOyAvLyBUaGUgdmlldyByb3RhdGlvbiBpcyBub3QgZGVmaW5lZFxuXG4gICAgcmV0dXJuIGdldEZvclZpZXdBbmRTaXplKGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIHNpemUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5nZXRNYXhSZXNvbHV0aW9uID0gZnVuY3Rpb24gZ2V0TWF4UmVzb2x1dGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWF4UmVzb2x1dGlvbl87XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldE1pblJlc29sdXRpb24gPSBmdW5jdGlvbiBnZXRNaW5SZXNvbHV0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5taW5SZXNvbHV0aW9uXztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSB2aWV3LlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldE1heFpvb20gPSBmdW5jdGlvbiBnZXRNYXhab29tICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHRoaXMubWluUmVzb2x1dGlvbl8pKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IGEgbmV3IG1heGltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnNldE1heFpvb20gPSBmdW5jdGlvbiBzZXRNYXhab29tICh6b29tKSB7XG4gICAgdGhpcy5hcHBseU9wdGlvbnNfKHRoaXMuZ2V0VXBkYXRlZE9wdGlvbnNfKHttYXhab29tOiB6b29tfSkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1pbmltdW0gem9vbSBsZXZlbC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0TWluWm9vbSA9IGZ1bmN0aW9uIGdldE1pblpvb20gKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24odGhpcy5tYXhSZXNvbHV0aW9uXykpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgYSBuZXcgbWluaW11bSB6b29tIGxldmVsIGZvciB0aGUgdmlldy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gVGhlIG1pbmltdW0gem9vbSBsZXZlbC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuc2V0TWluWm9vbSA9IGZ1bmN0aW9uIHNldE1pblpvb20gKHpvb20pIHtcbiAgICB0aGlzLmFwcGx5T3B0aW9uc18odGhpcy5nZXRVcGRhdGVkT3B0aW9uc18oe21pblpvb206IHpvb219KSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBUaGUgcHJvamVjdGlvbiBvZiB0aGUgdmlldy5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uIGdldFByb2plY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnByb2plY3Rpb25fO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgcmVzb2x1dGlvbi5cbiAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldFJlc29sdXRpb24gPSBmdW5jdGlvbiBnZXRSZXNvbHV0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoVmlld1Byb3BlcnR5LlJFU09MVVRJT04pKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSByZXNvbHV0aW9ucyBmb3IgdGhlIHZpZXcuIFRoaXMgcmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzb2x1dGlvbnNcbiAgICogcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgVmlldywgb3IgdW5kZWZpbmVkIGlmIG5vbmUgd2VyZSBnaXZlbi5cbiAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9IFRoZSByZXNvbHV0aW9ucyBvZiB0aGUgdmlldy5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiBnZXRSZXNvbHV0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIGEgcHJvdmlkZWQgZXh0ZW50IChpbiBtYXAgdW5pdHMpIGFuZCBzaXplIChpbiBwaXhlbHMpLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZT19IG9wdF9zaXplIEJveCBwaXhlbCBzaXplLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBwcm92aWRlZCBleHRlbnQgd2lsbCByZW5kZXIgYXRcbiAgICogICAgIHRoZSBnaXZlbiBzaXplLlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50ID0gZnVuY3Rpb24gZ2V0UmVzb2x1dGlvbkZvckV4dGVudCAoZXh0ZW50LCBvcHRfc2l6ZSkge1xuICAgIHZhciBzaXplID0gb3B0X3NpemUgfHwgdGhpcy5nZXRTaXplRnJvbVZpZXdwb3J0XygpO1xuICAgIHZhciB4UmVzb2x1dGlvbiA9IGdldFdpZHRoKGV4dGVudCkgLyBzaXplWzBdO1xuICAgIHZhciB5UmVzb2x1dGlvbiA9IGdldEhlaWdodChleHRlbnQpIC8gc2l6ZVsxXTtcbiAgICByZXR1cm4gTWF0aC5tYXgoeFJlc29sdXRpb24sIHlSZXNvbHV0aW9uKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxIGZvciBhXG4gICAqIHJlc29sdXRpb24uIEV4cG9uZW50aWFsIHNjYWxpbmcgaXMgYXNzdW1lZC5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfcG93ZXIgUG93ZXIuXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlcik6IG51bWJlcn0gUmVzb2x1dGlvbiBmb3IgdmFsdWUgZnVuY3Rpb24uXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yVmFsdWVGdW5jdGlvbiA9IGZ1bmN0aW9uIGdldFJlc29sdXRpb25Gb3JWYWx1ZUZ1bmN0aW9uIChvcHRfcG93ZXIpIHtcbiAgICB2YXIgcG93ZXIgPSBvcHRfcG93ZXIgfHwgMjtcbiAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IHRoaXMubWF4UmVzb2x1dGlvbl87XG4gICAgdmFyIG1pblJlc29sdXRpb24gPSB0aGlzLm1pblJlc29sdXRpb25fO1xuICAgIHZhciBtYXggPSBNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gbWluUmVzb2x1dGlvbikgLyBNYXRoLmxvZyhwb3dlcik7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlLlxuICAgICAgICogQHJldHVybiB7bnVtYmVyfSBSZXNvbHV0aW9uLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdyhwb3dlciwgdmFsdWUgKiBtYXgpO1xuICAgICAgICByZXR1cm4gcmVzb2x1dGlvbjtcbiAgICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgcm90YXRpb24uXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3IGluIHJhZGlhbnMuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldFJvdGF0aW9uID0gZnVuY3Rpb24gZ2V0Um90YXRpb24gKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5ST1RBVElPTikpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSByZXNvbHV0aW9uIGZvciBhIHZhbHVlIGJldHdlZW5cbiAgICogMCBhbmQgMS4gRXhwb25lbnRpYWwgc2NhbGluZyBpcyBhc3N1bWVkLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9wb3dlciBQb3dlci5cbiAgICogQHJldHVybiB7ZnVuY3Rpb24obnVtYmVyKTogbnVtYmVyfSBWYWx1ZSBmb3IgcmVzb2x1dGlvbiBmdW5jdGlvbi5cbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldFZhbHVlRm9yUmVzb2x1dGlvbkZ1bmN0aW9uID0gZnVuY3Rpb24gZ2V0VmFsdWVGb3JSZXNvbHV0aW9uRnVuY3Rpb24gKG9wdF9wb3dlcikge1xuICAgIHZhciBwb3dlciA9IG9wdF9wb3dlciB8fCAyO1xuICAgIHZhciBtYXhSZXNvbHV0aW9uID0gdGhpcy5tYXhSZXNvbHV0aW9uXztcbiAgICB2YXIgbWluUmVzb2x1dGlvbiA9IHRoaXMubWluUmVzb2x1dGlvbl87XG4gICAgdmFyIG1heCA9IE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBtaW5SZXNvbHV0aW9uKSAvIE1hdGgubG9nKHBvd2VyKTtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAgICogQHJldHVybiB7bnVtYmVyfSBWYWx1ZS5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24ocmVzb2x1dGlvbikge1xuICAgICAgICB2YXIgdmFsdWUgPSAoTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIHJlc29sdXRpb24pIC8gTWF0aC5sb2cocG93ZXIpKSAvIG1heDtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvIGZvciBjZW50ZXIgcm91bmRpbmcuXG4gICAqIEByZXR1cm4ge1N0YXRlfSBWaWV3IHN0YXRlLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiBnZXRTdGF0ZSAocGl4ZWxSYXRpbykge1xuICAgIHZhciBjZW50ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSAqLyAodGhpcy5nZXRDZW50ZXIoKSk7XG4gICAgdmFyIHByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICB2YXIgcmVzb2x1dGlvbiA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXRSZXNvbHV0aW9uKCkpO1xuICAgIHZhciBwaXhlbFJlc29sdXRpb24gPSByZXNvbHV0aW9uIC8gcGl4ZWxSYXRpbztcbiAgICB2YXIgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKiBAdHlwZSB7U3RhdGV9ICovICh7XG4gICAgICAgIGNlbnRlcjogW1xuICAgICAgICAgIE1hdGgucm91bmQoY2VudGVyWzBdIC8gcGl4ZWxSZXNvbHV0aW9uKSAqIHBpeGVsUmVzb2x1dGlvbixcbiAgICAgICAgICBNYXRoLnJvdW5kKGNlbnRlclsxXSAvIHBpeGVsUmVzb2x1dGlvbikgKiBwaXhlbFJlc29sdXRpb25cbiAgICAgICAgXSxcbiAgICAgICAgcHJvamVjdGlvbjogcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gcHJvamVjdGlvbiA6IG51bGwsXG4gICAgICAgIHJlc29sdXRpb246IHJlc29sdXRpb24sXG4gICAgICAgIHJvdGF0aW9uOiByb3RhdGlvbixcbiAgICAgICAgem9vbTogdGhpcy5nZXRab29tKClcbiAgICAgIH0pXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IHpvb20gbGV2ZWwuICBJZiB5b3UgY29uZmlndXJlZCB5b3VyIHZpZXcgd2l0aCBhIHJlc29sdXRpb25zXG4gICAqIGFycmF5ICh0aGlzIGlzIHJhcmUpLCB0aGlzIG1ldGhvZCBtYXkgcmV0dXJuIG5vbi1pbnRlZ2VyIHpvb20gbGV2ZWxzIChzb1xuICAgKiB0aGUgem9vbSBsZXZlbCBpcyBub3Qgc2FmZSB0byB1c2UgYXMgYW4gaW5kZXggaW50byBhIHJlc29sdXRpb25zIGFycmF5KS5cbiAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gWm9vbS5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0Wm9vbSA9IGZ1bmN0aW9uIGdldFpvb20gKCkge1xuICAgIHZhciB6b29tO1xuICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgem9vbSA9IHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24ocmVzb2x1dGlvbik7XG4gICAgfVxuICAgIHJldHVybiB6b29tO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHpvb20gbGV2ZWwgZm9yIGEgcmVzb2x1dGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gVGhlIHJlc29sdXRpb24uXG4gICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSB6b29tIGxldmVsIGZvciB0aGUgcHJvdmlkZWQgcmVzb2x1dGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0Wm9vbUZvclJlc29sdXRpb24gPSBmdW5jdGlvbiBnZXRab29tRm9yUmVzb2x1dGlvbiAocmVzb2x1dGlvbikge1xuICAgIHZhciBvZmZzZXQgPSB0aGlzLm1pblpvb21fIHx8IDA7XG4gICAgdmFyIG1heCwgem9vbUZhY3RvcjtcbiAgICBpZiAodGhpcy5yZXNvbHV0aW9uc18pIHtcbiAgICAgIHZhciBuZWFyZXN0ID0gbGluZWFyRmluZE5lYXJlc3QodGhpcy5yZXNvbHV0aW9uc18sIHJlc29sdXRpb24sIDEpO1xuICAgICAgb2Zmc2V0ID0gbmVhcmVzdDtcbiAgICAgIG1heCA9IHRoaXMucmVzb2x1dGlvbnNfW25lYXJlc3RdO1xuICAgICAgaWYgKG5lYXJlc3QgPT0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMSkge1xuICAgICAgICB6b29tRmFjdG9yID0gMjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHpvb21GYWN0b3IgPSBtYXggLyB0aGlzLnJlc29sdXRpb25zX1tuZWFyZXN0ICsgMV07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG1heCA9IHRoaXMubWF4UmVzb2x1dGlvbl87XG4gICAgICB6b29tRmFjdG9yID0gdGhpcy56b29tRmFjdG9yXztcbiAgICB9XG4gICAgcmV0dXJuIG9mZnNldCArIE1hdGgubG9nKG1heCAvIHJlc29sdXRpb24pIC8gTWF0aC5sb2coem9vbUZhY3Rvcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcmVzb2x1dGlvbiBmb3IgYSB6b29tIGxldmVsLlxuICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBab29tIGxldmVsLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSB2aWV3IHJlc29sdXRpb24gZm9yIHRoZSBwcm92aWRlZCB6b29tIGxldmVsLlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yWm9vbSA9IGZ1bmN0aW9uIGdldFJlc29sdXRpb25Gb3Jab29tICh6b29tKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uKFxuICAgICAgdGhpcy5tYXhSZXNvbHV0aW9uXywgem9vbSAtIHRoaXMubWluWm9vbV8sIDApKTtcbiAgfTtcblxuICAvKipcbiAgICogRml0IHRoZSBnaXZlbiBnZW9tZXRyeSBvciBleHRlbnQgYmFzZWQgb24gdGhlIGdpdmVuIG1hcCBzaXplIGFuZCBib3JkZXIuXG4gICAqIFRoZSBzaXplIGlzIHBpeGVsIGRpbWVuc2lvbnMgb2YgdGhlIGJveCB0byBmaXQgdGhlIGV4dGVudCBpbnRvLlxuICAgKiBJbiBtb3N0IGNhc2VzIHlvdSB3aWxsIHdhbnQgdG8gdXNlIHRoZSBtYXAgc2l6ZSwgdGhhdCBpcyBgbWFwLmdldFNpemUoKWAuXG4gICAqIFRha2VzIGNhcmUgb2YgdGhlIG1hcCBhbmdsZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGdlb21ldHJ5T3JFeHRlbnQgVGhlIGdlb21ldHJ5IG9yXG4gICAqICAgICBleHRlbnQgdG8gZml0IHRoZSB2aWV3IHRvLlxuICAgKiBAcGFyYW0ge0ZpdE9wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25zLlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5maXQgPSBmdW5jdGlvbiBmaXQgKGdlb21ldHJ5T3JFeHRlbnQsIG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgc2l6ZSA9IG9wdGlvbnMuc2l6ZTtcbiAgICBpZiAoIXNpemUpIHtcbiAgICAgIHNpemUgPSB0aGlzLmdldFNpemVGcm9tVmlld3BvcnRfKCk7XG4gICAgfVxuICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovXG4gICAgdmFyIGdlb21ldHJ5O1xuICAgIGFzc2VydChBcnJheS5pc0FycmF5KGdlb21ldHJ5T3JFeHRlbnQpIHx8IHR5cGVvZiAvKiogQHR5cGUgez99ICovIChnZW9tZXRyeU9yRXh0ZW50KS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkgPT09ICdmdW5jdGlvbicsXG4gICAgICAyNCk7IC8vIEludmFsaWQgZXh0ZW50IG9yIGdlb21ldHJ5IHByb3ZpZGVkIGFzIGBnZW9tZXRyeWBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShnZW9tZXRyeU9yRXh0ZW50KSkge1xuICAgICAgYXNzZXJ0KCFpc0VtcHR5KGdlb21ldHJ5T3JFeHRlbnQpLFxuICAgICAgICAyNSk7IC8vIENhbm5vdCBmaXQgZW1wdHkgZXh0ZW50IHByb3ZpZGVkIGFzIGBnZW9tZXRyeWBcbiAgICAgIGdlb21ldHJ5ID0gcG9seWdvbkZyb21FeHRlbnQoZ2VvbWV0cnlPckV4dGVudCk7XG4gICAgfSBlbHNlIGlmIChnZW9tZXRyeU9yRXh0ZW50LmdldFR5cGUoKSA9PT0gR2VvbWV0cnlUeXBlLkNJUkNMRSkge1xuICAgICAgZ2VvbWV0cnlPckV4dGVudCA9IGdlb21ldHJ5T3JFeHRlbnQuZ2V0RXh0ZW50KCk7XG4gICAgICBnZW9tZXRyeSA9IHBvbHlnb25Gcm9tRXh0ZW50KGdlb21ldHJ5T3JFeHRlbnQpO1xuICAgICAgZ2VvbWV0cnkucm90YXRlKHRoaXMuZ2V0Um90YXRpb24oKSwgZ2V0Q2VudGVyKGdlb21ldHJ5T3JFeHRlbnQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeU9yRXh0ZW50O1xuICAgIH1cblxuICAgIHZhciBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBhZGRpbmcgOiBbMCwgMCwgMCwgMF07XG4gICAgdmFyIGNvbnN0cmFpblJlc29sdXRpb24gPSBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24gIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24gOiB0cnVlO1xuICAgIHZhciBuZWFyZXN0ID0gb3B0aW9ucy5uZWFyZXN0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5lYXJlc3QgOiBmYWxzZTtcbiAgICB2YXIgbWluUmVzb2x1dGlvbjtcbiAgICBpZiAob3B0aW9ucy5taW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG1pblJlc29sdXRpb24gPSBvcHRpb25zLm1pblJlc29sdXRpb247XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgbWluUmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbihcbiAgICAgICAgdGhpcy5tYXhSZXNvbHV0aW9uXywgb3B0aW9ucy5tYXhab29tIC0gdGhpcy5taW5ab29tXywgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1pblJlc29sdXRpb24gPSAwO1xuICAgIH1cbiAgICB2YXIgY29vcmRzID0gZ2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG5cbiAgICAvLyBjYWxjdWxhdGUgcm90YXRlZCBleHRlbnRcbiAgICB2YXIgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgdmFyIGNvc0FuZ2xlID0gTWF0aC5jb3MoLXJvdGF0aW9uKTtcbiAgICB2YXIgc2luQW5nbGUgPSBNYXRoLnNpbigtcm90YXRpb24pO1xuICAgIHZhciBtaW5Sb3RYID0gK0luZmluaXR5O1xuICAgIHZhciBtaW5Sb3RZID0gK0luZmluaXR5O1xuICAgIHZhciBtYXhSb3RYID0gLUluZmluaXR5O1xuICAgIHZhciBtYXhSb3RZID0gLUluZmluaXR5O1xuICAgIHZhciBzdHJpZGUgPSBnZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZHMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gc3RyaWRlKSB7XG4gICAgICB2YXIgcm90WCA9IGNvb3Jkc1tpXSAqIGNvc0FuZ2xlIC0gY29vcmRzW2kgKyAxXSAqIHNpbkFuZ2xlO1xuICAgICAgdmFyIHJvdFkgPSBjb29yZHNbaV0gKiBzaW5BbmdsZSArIGNvb3Jkc1tpICsgMV0gKiBjb3NBbmdsZTtcbiAgICAgIG1pblJvdFggPSBNYXRoLm1pbihtaW5Sb3RYLCByb3RYKTtcbiAgICAgIG1pblJvdFkgPSBNYXRoLm1pbihtaW5Sb3RZLCByb3RZKTtcbiAgICAgIG1heFJvdFggPSBNYXRoLm1heChtYXhSb3RYLCByb3RYKTtcbiAgICAgIG1heFJvdFkgPSBNYXRoLm1heChtYXhSb3RZLCByb3RZKTtcbiAgICB9XG5cbiAgICAvLyBjYWxjdWxhdGUgcmVzb2x1dGlvblxuICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50KFxuICAgICAgW21pblJvdFgsIG1pblJvdFksIG1heFJvdFgsIG1heFJvdFldLFxuICAgICAgW3NpemVbMF0gLSBwYWRkaW5nWzFdIC0gcGFkZGluZ1szXSwgc2l6ZVsxXSAtIHBhZGRpbmdbMF0gLSBwYWRkaW5nWzJdXSk7XG4gICAgcmVzb2x1dGlvbiA9IGlzTmFOKHJlc29sdXRpb24pID8gbWluUmVzb2x1dGlvbiA6XG4gICAgICBNYXRoLm1heChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uKTtcbiAgICBpZiAoY29uc3RyYWluUmVzb2x1dGlvbikge1xuICAgICAgdmFyIGNvbnN0cmFpbmVkUmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbihyZXNvbHV0aW9uLCAwLCAwKTtcbiAgICAgIGlmICghbmVhcmVzdCAmJiBjb25zdHJhaW5lZFJlc29sdXRpb24gPCByZXNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0cmFpbmVkUmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbihcbiAgICAgICAgICBjb25zdHJhaW5lZFJlc29sdXRpb24sIC0xLCAwKTtcbiAgICAgIH1cbiAgICAgIHJlc29sdXRpb24gPSBjb25zdHJhaW5lZFJlc29sdXRpb247XG4gICAgfVxuXG4gICAgLy8gY2FsY3VsYXRlIGNlbnRlclxuICAgIHNpbkFuZ2xlID0gLXNpbkFuZ2xlOyAvLyBnbyBiYWNrIHRvIG9yaWdpbmFsIHJvdGF0aW9uXG4gICAgdmFyIGNlbnRlclJvdFggPSAobWluUm90WCArIG1heFJvdFgpIC8gMjtcbiAgICB2YXIgY2VudGVyUm90WSA9IChtaW5Sb3RZICsgbWF4Um90WSkgLyAyO1xuICAgIGNlbnRlclJvdFggKz0gKHBhZGRpbmdbMV0gLSBwYWRkaW5nWzNdKSAvIDIgKiByZXNvbHV0aW9uO1xuICAgIGNlbnRlclJvdFkgKz0gKHBhZGRpbmdbMF0gLSBwYWRkaW5nWzJdKSAvIDIgKiByZXNvbHV0aW9uO1xuICAgIHZhciBjZW50ZXJYID0gY2VudGVyUm90WCAqIGNvc0FuZ2xlIC0gY2VudGVyUm90WSAqIHNpbkFuZ2xlO1xuICAgIHZhciBjZW50ZXJZID0gY2VudGVyUm90WSAqIGNvc0FuZ2xlICsgY2VudGVyUm90WCAqIHNpbkFuZ2xlO1xuICAgIHZhciBjZW50ZXIgPSBbY2VudGVyWCwgY2VudGVyWV07XG4gICAgdmFyIGNhbGxiYWNrID0gb3B0aW9ucy5jYWxsYmFjayA/IG9wdGlvbnMuY2FsbGJhY2sgOiBWT0lEO1xuXG4gICAgaWYgKG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5hbmltYXRlKHtcbiAgICAgICAgcmVzb2x1dGlvbjogcmVzb2x1dGlvbixcbiAgICAgICAgY2VudGVyOiBjZW50ZXIsXG4gICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICBlYXNpbmc6IG9wdGlvbnMuZWFzaW5nXG4gICAgICB9LCBjYWxsYmFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0UmVzb2x1dGlvbihyZXNvbHV0aW9uKTtcbiAgICAgIHRoaXMuc2V0Q2VudGVyKGNlbnRlcik7XG4gICAgICBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgdHJ1ZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDZW50ZXIgb24gY29vcmRpbmF0ZSBhbmQgdmlldyBwb3NpdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIEJveCBwaXhlbCBzaXplLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBvc2l0aW9uIFBvc2l0aW9uIG9uIHRoZSB2aWV3IHRvIGNlbnRlciBvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuY2VudGVyT24gPSBmdW5jdGlvbiBjZW50ZXJPbiAoY29vcmRpbmF0ZSwgc2l6ZSwgcG9zaXRpb24pIHtcbiAgICAvLyBjYWxjdWxhdGUgcm90YXRlZCBwb3NpdGlvblxuICAgIHZhciByb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICB2YXIgY29zQW5nbGUgPSBNYXRoLmNvcygtcm90YXRpb24pO1xuICAgIHZhciBzaW5BbmdsZSA9IE1hdGguc2luKC1yb3RhdGlvbik7XG4gICAgdmFyIHJvdFggPSBjb29yZGluYXRlWzBdICogY29zQW5nbGUgLSBjb29yZGluYXRlWzFdICogc2luQW5nbGU7XG4gICAgdmFyIHJvdFkgPSBjb29yZGluYXRlWzFdICogY29zQW5nbGUgKyBjb29yZGluYXRlWzBdICogc2luQW5nbGU7XG4gICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICByb3RYICs9IChzaXplWzBdIC8gMiAtIHBvc2l0aW9uWzBdKSAqIHJlc29sdXRpb247XG4gICAgcm90WSArPSAocG9zaXRpb25bMV0gLSBzaXplWzFdIC8gMikgKiByZXNvbHV0aW9uO1xuXG4gICAgLy8gZ28gYmFjayB0byBvcmlnaW5hbCBhbmdsZVxuICAgIHNpbkFuZ2xlID0gLXNpbkFuZ2xlOyAvLyBnbyBiYWNrIHRvIG9yaWdpbmFsIHJvdGF0aW9uXG4gICAgdmFyIGNlbnRlclggPSByb3RYICogY29zQW5nbGUgLSByb3RZICogc2luQW5nbGU7XG4gICAgdmFyIGNlbnRlclkgPSByb3RZICogY29zQW5nbGUgKyByb3RYICogc2luQW5nbGU7XG5cbiAgICB0aGlzLnNldENlbnRlcihbY2VudGVyWCwgY2VudGVyWV0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBkZWZpbmVkLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuaXNEZWYgPSBmdW5jdGlvbiBpc0RlZiAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5nZXRDZW50ZXIoKSAmJiB0aGlzLmdldFJlc29sdXRpb24oKSAhPT0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSb3RhdGUgdGhlIHZpZXcgYXJvdW5kIGEgZ2l2ZW4gY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIE5ldyByb3RhdGlvbiB2YWx1ZSBmb3IgdGhlIHZpZXcuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU9fSBvcHRfYW5jaG9yIFRoZSByb3RhdGlvbiBjZW50ZXIuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uIHJvdGF0ZSAocm90YXRpb24sIG9wdF9hbmNob3IpIHtcbiAgICBpZiAob3B0X2FuY2hvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YXIgY2VudGVyID0gdGhpcy5jYWxjdWxhdGVDZW50ZXJSb3RhdGUocm90YXRpb24sIG9wdF9hbmNob3IpO1xuICAgICAgdGhpcy5zZXRDZW50ZXIoY2VudGVyKTtcbiAgICB9XG4gICAgdGhpcy5zZXRSb3RhdGlvbihyb3RhdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY2VudGVyIG9mIHRoZSBjdXJyZW50IHZpZXcuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBjZW50ZXIgVGhlIGNlbnRlciBvZiB0aGUgdmlldy5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuc2V0Q2VudGVyID0gZnVuY3Rpb24gc2V0Q2VudGVyIChjZW50ZXIpIHtcbiAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuQ0VOVEVSLCBjZW50ZXIpO1xuICAgIGlmICh0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICB0aGlzLmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Vmlld0hpbnR9IGhpbnQgSGludC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIERlbHRhLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE5ldyB2YWx1ZS5cbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnNldEhpbnQgPSBmdW5jdGlvbiBzZXRIaW50IChoaW50LCBkZWx0YSkge1xuICAgIHRoaXMuaGludHNfW2hpbnRdICs9IGRlbHRhO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIHJldHVybiB0aGlzLmhpbnRzX1toaW50XTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSByZXNvbHV0aW9uIGZvciB0aGlzIHZpZXcuXG4gICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBUaGUgcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuc2V0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uIHNldFJlc29sdXRpb24gKHJlc29sdXRpb24pIHtcbiAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuUkVTT0xVVElPTiwgcmVzb2x1dGlvbik7XG4gICAgaWYgKHRoaXMuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgIHRoaXMuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSByb3RhdGlvbiBmb3IgdGhpcyB2aWV3LlxuICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gVGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3IGluIHJhZGlhbnMuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnNldFJvdGF0aW9uID0gZnVuY3Rpb24gc2V0Um90YXRpb24gKHJvdGF0aW9uKSB7XG4gICAgdGhpcy5zZXQoVmlld1Byb3BlcnR5LlJPVEFUSU9OLCByb3RhdGlvbik7XG4gICAgaWYgKHRoaXMuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgIHRoaXMuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogWm9vbSB0byBhIHNwZWNpZmljIHpvb20gbGV2ZWwuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnNldFpvb20gPSBmdW5jdGlvbiBzZXRab29tICh6b29tKSB7XG4gICAgdGhpcy5zZXRSZXNvbHV0aW9uKHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20oem9vbSkpO1xuICB9O1xuXG4gIHJldHVybiBWaWV3O1xufShCYXNlT2JqZWN0KSk7XG5cblxuLyoqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjay5cbiAqIEBwYXJhbSB7Kn0gcmV0dXJuVmFsdWUgUmV0dXJuIHZhbHVlLlxuICovXG5mdW5jdGlvbiBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgcmV0dXJuVmFsdWUpIHtcbiAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBjYWxsYmFjayhyZXR1cm5WYWx1ZSk7XG4gIH0sIDApO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2NlbnRlcmNvbnN0cmFpbnQuanNcIikuVHlwZX0gVGhlIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDZW50ZXJDb25zdHJhaW50KG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gY3JlYXRlRXh0ZW50KG9wdGlvbnMuZXh0ZW50KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY2VudGVyTm9uZTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gKiBAcmV0dXJuIHt7Y29uc3RyYWludDogaW1wb3J0KFwiLi9yZXNvbHV0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlLCBtYXhSZXNvbHV0aW9uOiBudW1iZXIsXG4gKiAgICAgbWluUmVzb2x1dGlvbjogbnVtYmVyLCBtaW5ab29tOiBudW1iZXIsIHpvb21GYWN0b3I6IG51bWJlcn19IFRoZSBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVzb2x1dGlvbkNvbnN0cmFpbnQob3B0aW9ucykge1xuICB2YXIgcmVzb2x1dGlvbkNvbnN0cmFpbnQ7XG4gIHZhciBtYXhSZXNvbHV0aW9uO1xuICB2YXIgbWluUmVzb2x1dGlvbjtcblxuICAvLyBUT0RPOiBtb3ZlIHRoZXNlIHRvIGJlIG9sIGNvbnN0YW50c1xuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL29wZW5sYXllcnMvb3BlbmxheWVycy9pc3N1ZXMvMjA3NlxuICB2YXIgZGVmYXVsdE1heFpvb20gPSAyODtcbiAgdmFyIGRlZmF1bHRab29tRmFjdG9yID0gMjtcblxuICB2YXIgbWluWm9vbSA9IG9wdGlvbnMubWluWm9vbSAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRpb25zLm1pblpvb20gOiBERUZBVUxUX01JTl9aT09NO1xuXG4gIHZhciBtYXhab29tID0gb3B0aW9ucy5tYXhab29tICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdGlvbnMubWF4Wm9vbSA6IGRlZmF1bHRNYXhab29tO1xuXG4gIHZhciB6b29tRmFjdG9yID0gb3B0aW9ucy56b29tRmFjdG9yICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdGlvbnMuem9vbUZhY3RvciA6IGRlZmF1bHRab29tRmFjdG9yO1xuXG4gIGlmIChvcHRpb25zLnJlc29sdXRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgcmVzb2x1dGlvbnMgPSBvcHRpb25zLnJlc29sdXRpb25zO1xuICAgIG1heFJlc29sdXRpb24gPSByZXNvbHV0aW9uc1ttaW5ab29tXTtcbiAgICBtaW5SZXNvbHV0aW9uID0gcmVzb2x1dGlvbnNbbWF4Wm9vbV0gIT09IHVuZGVmaW5lZCA/XG4gICAgICByZXNvbHV0aW9uc1ttYXhab29tXSA6IHJlc29sdXRpb25zW3Jlc29sdXRpb25zLmxlbmd0aCAtIDFdO1xuICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMoXG4gICAgICByZXNvbHV0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgLy8gY2FsY3VsYXRlIHRoZSBkZWZhdWx0IG1pbiBhbmQgbWF4IHJlc29sdXRpb25cbiAgICB2YXIgcHJvamVjdGlvbiA9IGNyZWF0ZVByb2plY3Rpb24ob3B0aW9ucy5wcm9qZWN0aW9uLCAnRVBTRzozODU3Jyk7XG4gICAgdmFyIGV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgdmFyIHNpemUgPSAhZXh0ZW50ID9cbiAgICAgIC8vIHVzZSBhbiBleHRlbnQgdGhhdCBjYW4gZml0IHRoZSB3aG9sZSB3b3JsZCBpZiBuZWVkIGJlXG4gICAgICAzNjAgKiBNRVRFUlNfUEVSX1VOSVRbVW5pdHMuREVHUkVFU10gL1xuICAgICAgICAgICAgcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KCkgOlxuICAgICAgTWF0aC5tYXgoZ2V0V2lkdGgoZXh0ZW50KSwgZ2V0SGVpZ2h0KGV4dGVudCkpO1xuXG4gICAgdmFyIGRlZmF1bHRNYXhSZXNvbHV0aW9uID0gc2l6ZSAvIERFRkFVTFRfVElMRV9TSVpFIC8gTWF0aC5wb3coXG4gICAgICBkZWZhdWx0Wm9vbUZhY3RvciwgREVGQVVMVF9NSU5fWk9PTSk7XG5cbiAgICB2YXIgZGVmYXVsdE1pblJlc29sdXRpb24gPSBkZWZhdWx0TWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KFxuICAgICAgZGVmYXVsdFpvb21GYWN0b3IsIGRlZmF1bHRNYXhab29tIC0gREVGQVVMVF9NSU5fWk9PTSk7XG5cbiAgICAvLyB1c2VyIHByb3ZpZGVkIG1heFJlc29sdXRpb24gdGFrZXMgcHJlY2VkZW5jZVxuICAgIG1heFJlc29sdXRpb24gPSBvcHRpb25zLm1heFJlc29sdXRpb247XG4gICAgaWYgKG1heFJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgbWluWm9vbSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1heFJlc29sdXRpb24gPSBkZWZhdWx0TWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHpvb21GYWN0b3IsIG1pblpvb20pO1xuICAgIH1cblxuICAgIC8vIHVzZXIgcHJvdmlkZWQgbWluUmVzb2x1dGlvbiB0YWtlcyBwcmVjZWRlbmNlXG4gICAgbWluUmVzb2x1dGlvbiA9IG9wdGlvbnMubWluUmVzb2x1dGlvbjtcbiAgICBpZiAobWluUmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAob3B0aW9ucy5tYXhab29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMubWF4UmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbWluUmVzb2x1dGlvbiA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtYXhab29tKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gZGVmYXVsdE1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtYXhab29tKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWluUmVzb2x1dGlvbiA9IGRlZmF1bHRNaW5SZXNvbHV0aW9uO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGdpdmVuIGRpc2NyZXRlIHpvb20gbGV2ZWxzLCBtaW5SZXNvbHV0aW9uIG1heSBiZSBkaWZmZXJlbnQgdGhhbiBwcm92aWRlZFxuICAgIG1heFpvb20gPSBtaW5ab29tICsgTWF0aC5mbG9vcihcbiAgICAgIE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBtaW5SZXNvbHV0aW9uKSAvIE1hdGgubG9nKHpvb21GYWN0b3IpKTtcbiAgICBtaW5SZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHpvb21GYWN0b3IsIG1heFpvb20gLSBtaW5ab29tKTtcblxuICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlU25hcFRvUG93ZXIoXG4gICAgICB6b29tRmFjdG9yLCBtYXhSZXNvbHV0aW9uLCBtYXhab29tIC0gbWluWm9vbSk7XG4gIH1cbiAgcmV0dXJuIHtjb25zdHJhaW50OiByZXNvbHV0aW9uQ29uc3RyYWludCwgbWF4UmVzb2x1dGlvbjogbWF4UmVzb2x1dGlvbixcbiAgICBtaW5SZXNvbHV0aW9uOiBtaW5SZXNvbHV0aW9uLCBtaW5ab29tOiBtaW5ab29tLCB6b29tRmFjdG9yOiB6b29tRmFjdG9yfTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9yb3RhdGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZX0gUm90YXRpb24gY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludChvcHRpb25zKSB7XG4gIHZhciBlbmFibGVSb3RhdGlvbiA9IG9wdGlvbnMuZW5hYmxlUm90YXRpb24gIT09IHVuZGVmaW5lZCA/XG4gICAgb3B0aW9ucy5lbmFibGVSb3RhdGlvbiA6IHRydWU7XG4gIGlmIChlbmFibGVSb3RhdGlvbikge1xuICAgIHZhciBjb25zdHJhaW5Sb3RhdGlvbiA9IG9wdGlvbnMuY29uc3RyYWluUm90YXRpb247XG4gICAgaWYgKGNvbnN0cmFpblJvdGF0aW9uID09PSB1bmRlZmluZWQgfHwgY29uc3RyYWluUm90YXRpb24gPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBjcmVhdGVTbmFwVG9aZXJvKCk7XG4gICAgfSBlbHNlIGlmIChjb25zdHJhaW5Sb3RhdGlvbiA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiByb3RhdGlvbk5vbmU7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29uc3RyYWluUm90YXRpb24gPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gY3JlYXRlU25hcFRvTihjb25zdHJhaW5Sb3RhdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByb3RhdGlvbk5vbmU7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBkaXNhYmxlO1xuICB9XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYW4gYW5pbWF0aW9uIGludm9sdmVzIG5vIHZpZXcgY2hhbmdlLlxuICogQHBhcmFtIHtBbmltYXRpb259IGFuaW1hdGlvbiBUaGUgYW5pbWF0aW9uLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGFuaW1hdGlvbiBpbnZvbHZlcyBubyB2aWV3IGNoYW5nZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTm9vcEFuaW1hdGlvbihhbmltYXRpb24pIHtcbiAgaWYgKGFuaW1hdGlvbi5zb3VyY2VDZW50ZXIgJiYgYW5pbWF0aW9uLnRhcmdldENlbnRlcikge1xuICAgIGlmICghY29vcmRpbmF0ZXNFcXVhbChhbmltYXRpb24uc291cmNlQ2VudGVyLCBhbmltYXRpb24udGFyZ2V0Q2VudGVyKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICBpZiAoYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gIT09IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChhbmltYXRpb24uc291cmNlUm90YXRpb24gIT09IGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgVmlldztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Vmlldy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZG9tXG4gKi9cblxuXG4vKipcbiAqIENyZWF0ZSBhbiBodG1sIGNhbnZhcyBlbGVtZW50IGFuZCByZXR1cm5zIGl0cyAyZCBjb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfd2lkdGggQ2FudmFzIHdpZHRoLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaGVpZ2h0IENhbnZhcyBoZWlnaHQuXG4gKiBAcmV0dXJuIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IFRoZSBjb250ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FudmFzQ29udGV4dDJEKG9wdF93aWR0aCwgb3B0X2hlaWdodCkge1xuICB2YXIgY2FudmFzID0gLyoqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudH0gKi8gKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpKTtcbiAgaWYgKG9wdF93aWR0aCkge1xuICAgIGNhbnZhcy53aWR0aCA9IG9wdF93aWR0aDtcbiAgfVxuICBpZiAob3B0X2hlaWdodCkge1xuICAgIGNhbnZhcy5oZWlnaHQgPSBvcHRfaGVpZ2h0O1xuICB9XG4gIHJldHVybiAvKiogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gKi8gKGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpKTtcbn1cblxuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBjb21wdXRlZCB3aWR0aCBmb3IgdGhlIGdpdmVuIGVsZW1lbnQgaW5jbHVkaW5nIG1hcmdpbixcbiAqIHBhZGRpbmcgYW5kIGJvcmRlci5cbiAqIEVxdWl2YWxlbnQgdG8galF1ZXJ5J3MgYCQoZWwpLm91dGVyV2lkdGgodHJ1ZSlgLlxuICogQHBhcmFtIHshSFRNTEVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHdpZHRoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gb3V0ZXJXaWR0aChlbGVtZW50KSB7XG4gIHZhciB3aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gIHdpZHRoICs9IHBhcnNlSW50KHN0eWxlLm1hcmdpbkxlZnQsIDEwKSArIHBhcnNlSW50KHN0eWxlLm1hcmdpblJpZ2h0LCAxMCk7XG5cbiAgcmV0dXJuIHdpZHRoO1xufVxuXG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGNvbXB1dGVkIGhlaWdodCBmb3IgdGhlIGdpdmVuIGVsZW1lbnQgaW5jbHVkaW5nIG1hcmdpbixcbiAqIHBhZGRpbmcgYW5kIGJvcmRlci5cbiAqIEVxdWl2YWxlbnQgdG8galF1ZXJ5J3MgYCQoZWwpLm91dGVySGVpZ2h0KHRydWUpYC5cbiAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbGVtZW50IEVsZW1lbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBoZWlnaHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvdXRlckhlaWdodChlbGVtZW50KSB7XG4gIHZhciBoZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgaGVpZ2h0ICs9IHBhcnNlSW50KHN0eWxlLm1hcmdpblRvcCwgMTApICsgcGFyc2VJbnQoc3R5bGUubWFyZ2luQm90dG9tLCAxMCk7XG5cbiAgcmV0dXJuIGhlaWdodDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge05vZGV9IG5ld05vZGUgTm9kZSB0byByZXBsYWNlIG9sZCBub2RlXG4gKiBAcGFyYW0ge05vZGV9IG9sZE5vZGUgVGhlIG5vZGUgdG8gYmUgcmVwbGFjZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VOb2RlKG5ld05vZGUsIG9sZE5vZGUpIHtcbiAgdmFyIHBhcmVudCA9IG9sZE5vZGUucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkge1xuICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgb2xkTm9kZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIG5vZGUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge05vZGV9IFRoZSBub2RlIHRoYXQgd2FzIHJlbW92ZWQgb3IgbnVsbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkge1xuICByZXR1cm4gbm9kZSAmJiBub2RlLnBhcmVudE5vZGUgPyBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSkgOiBudWxsO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZSBUaGUgbm9kZSB0byByZW1vdmUgdGhlIGNoaWxkcmVuIGZyb20uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDaGlsZHJlbihub2RlKSB7XG4gIHdoaWxlIChub2RlLmxhc3RDaGlsZCkge1xuICAgIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5sYXN0Q2hpbGQpO1xuICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvbS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvUHJvcGVydHlcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgT1BBQ0lUWTogJ29wYWNpdHknLFxuICBWSVNJQkxFOiAndmlzaWJsZScsXG4gIEVYVEVOVDogJ2V4dGVudCcsXG4gIFpfSU5ERVg6ICd6SW5kZXgnLFxuICBNQVhfUkVTT0xVVElPTjogJ21heFJlc29sdXRpb24nLFxuICBNSU5fUkVTT0xVVElPTjogJ21pblJlc29sdXRpb24nLFxuICBTT1VSQ0U6ICdzb3VyY2UnXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9wZXJ0eS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvQmFzZVxuICovXG5pbXBvcnQge2Fic3RyYWN0fSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgTGF5ZXJQcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCB7Y2xhbXB9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IHthc3NpZ259IGZyb20gJy4uL29iai5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogTm90ZSB0aGF0IHdpdGgge0BsaW5rIG1vZHVsZTpvbC9sYXllci9CYXNlfSBhbmQgYWxsIGl0cyBzdWJjbGFzc2VzLCBhbnkgcHJvcGVydHkgc2V0IGluXG4gKiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH0gcHJvcGVydHkgb24gdGhlIGxheWVyIG9iamVjdCwgc29cbiAqIGlzIG9ic2VydmFibGUsIGFuZCBoYXMgZ2V0L3NldCBhY2Nlc3NvcnMuXG4gKlxuICogQGFwaVxuICovXG52YXIgQmFzZUxheWVyID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoQmFzZU9iamVjdCkge1xuICBmdW5jdGlvbiBCYXNlTGF5ZXIob3B0aW9ucykge1xuXG4gICAgQmFzZU9iamVjdC5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsICo+fVxuICAgICAqL1xuICAgIHZhciBwcm9wZXJ0aWVzID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuT1BBQ0lUWV0gPVxuICAgICAgIG9wdGlvbnMub3BhY2l0eSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vcGFjaXR5IDogMTtcbiAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuVklTSUJMRV0gPVxuICAgICAgIG9wdGlvbnMudmlzaWJsZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy52aXNpYmxlIDogdHJ1ZTtcbiAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuWl9JTkRFWF0gPSBvcHRpb25zLnpJbmRleDtcbiAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT05dID1cbiAgICAgICBvcHRpb25zLm1heFJlc29sdXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4UmVzb2x1dGlvbiA6IEluZmluaXR5O1xuICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTl0gPVxuICAgICAgIG9wdGlvbnMubWluUmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5taW5SZXNvbHV0aW9uIDogMDtcblxuICAgIHRoaXMuc2V0UHJvcGVydGllcyhwcm9wZXJ0aWVzKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zdGF0ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGxheWVyIHR5cGUuXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL0xheWVyVHlwZS5qc1wiKS5kZWZhdWx0fVxuICAgICAqIEBwcm90ZWN0ZWQ7XG4gICAgICovXG4gICAgdGhpcy50eXBlO1xuXG4gIH1cblxuICBpZiAoIEJhc2VPYmplY3QgKSBCYXNlTGF5ZXIuX19wcm90b19fID0gQmFzZU9iamVjdDtcbiAgQmFzZUxheWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEJhc2VPYmplY3QgJiYgQmFzZU9iamVjdC5wcm90b3R5cGUgKTtcbiAgQmFzZUxheWVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJhc2VMYXllcjtcblxuICAvKipcbiAgICogR2V0IHRoZSBsYXllciB0eXBlICh1c2VkIHdoZW4gY3JlYXRpbmcgYSBsYXllciByZW5kZXJlcikuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL0xheWVyVHlwZS5qc1wiKS5kZWZhdWx0fSBUaGUgbGF5ZXIgdHlwZS5cbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uIGdldFR5cGUgKCkge1xuICAgIHJldHVybiB0aGlzLnR5cGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGV9IExheWVyIHN0YXRlLlxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRMYXllclN0YXRlID0gZnVuY3Rpb24gZ2V0TGF5ZXJTdGF0ZSAoKSB7XG4gICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlfSAqL1xuICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGVfIHx8IC8qKiBAdHlwZSB7P30gKi8gKHtcbiAgICAgIGxheWVyOiB0aGlzLFxuICAgICAgbWFuYWdlZDogdHJ1ZVxuICAgIH0pO1xuICAgIHN0YXRlLm9wYWNpdHkgPSBjbGFtcCh0aGlzLmdldE9wYWNpdHkoKSwgMCwgMSk7XG4gICAgc3RhdGUuc291cmNlU3RhdGUgPSB0aGlzLmdldFNvdXJjZVN0YXRlKCk7XG4gICAgc3RhdGUudmlzaWJsZSA9IHRoaXMuZ2V0VmlzaWJsZSgpO1xuICAgIHN0YXRlLmV4dGVudCA9IHRoaXMuZ2V0RXh0ZW50KCk7XG4gICAgc3RhdGUuekluZGV4ID0gdGhpcy5nZXRaSW5kZXgoKSB8fCAwO1xuICAgIHN0YXRlLm1heFJlc29sdXRpb24gPSB0aGlzLmdldE1heFJlc29sdXRpb24oKTtcbiAgICBzdGF0ZS5taW5SZXNvbHV0aW9uID0gTWF0aC5tYXgodGhpcy5nZXRNaW5SZXNvbHV0aW9uKCksIDApO1xuICAgIHRoaXMuc3RhdGVfID0gc3RhdGU7XG5cbiAgICByZXR1cm4gc3RhdGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD49fSBvcHRfYXJyYXkgQXJyYXkgb2YgbGF5ZXJzICh0byBiZVxuICAgKiAgICAgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBBcnJheSBvZiBsYXllcnMuXG4gICAqL1xuICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldExheWVyc0FycmF5ID0gZnVuY3Rpb24gZ2V0TGF5ZXJzQXJyYXkgKG9wdF9hcnJheSkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPj19IG9wdF9zdGF0ZXMgT3B0aW9uYWwgbGlzdCBvZiBsYXllclxuICAgKiAgICAgc3RhdGVzICh0byBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBMaXN0IG9mIGxheWVyIHN0YXRlcy5cbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TGF5ZXJTdGF0ZXNBcnJheSA9IGZ1bmN0aW9uIGdldExheWVyU3RhdGVzQXJyYXkgKG9wdF9zdGF0ZXMpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSB7QGxpbmsgbW9kdWxlOm9sL2V4dGVudH5FeHRlbnQgZXh0ZW50fSBvZiB0aGUgbGF5ZXIgb3IgYHVuZGVmaW5lZGAgaWYgaXRcbiAgICogd2lsbCBiZSB2aXNpYmxlIHJlZ2FyZGxlc3Mgb2YgZXh0ZW50LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fHVuZGVmaW5lZH0gVGhlIGxheWVyIGV4dGVudC5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiBnZXRFeHRlbnQgKCkge1xuICAgIHJldHVybiAoXG4gICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5FWFRFTlQpKVxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRNYXhSZXNvbHV0aW9uID0gZnVuY3Rpb24gZ2V0TWF4UmVzb2x1dGlvbiAoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5NQVhfUkVTT0xVVElPTikpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TWluUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIGdldE1pblJlc29sdXRpb24gKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUlOX1JFU09MVVRJT04pKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBvcGFjaXR5IG9mIHRoZSBsYXllciAoYmV0d2VlbiAwIGFuZCAxKS5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0T3BhY2l0eSA9IGZ1bmN0aW9uIGdldE9wYWNpdHkgKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuT1BBQ0lUWSkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc291cmNlL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFNvdXJjZSBzdGF0ZS5cbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0U291cmNlU3RhdGUgPSBmdW5jdGlvbiBnZXRTb3VyY2VTdGF0ZSAoKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIgKGB0cnVlYCBvciBgZmFsc2VgKS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHZpc2liaWxpdHkgb2YgdGhlIGxheWVyLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldFZpc2libGUgPSBmdW5jdGlvbiBnZXRWaXNpYmxlICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtib29sZWFufSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5WSVNJQkxFKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgWi1pbmRleCBvZiB0aGUgbGF5ZXIsIHdoaWNoIGlzIHVzZWQgdG8gb3JkZXIgbGF5ZXJzIGJlZm9yZVxuICAgKiByZW5kZXJpbmcuIFRoZSBkZWZhdWx0IFotaW5kZXggaXMgMC5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgWi1pbmRleCBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0WkluZGV4ID0gZnVuY3Rpb24gZ2V0WkluZGV4ICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5LlpfSU5ERVgpKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBleHRlbnQgYXQgd2hpY2ggdGhlIGxheWVyIGlzIHZpc2libGUuICBJZiBgdW5kZWZpbmVkYCwgdGhlIGxheWVyXG4gICAqIHdpbGwgYmUgdmlzaWJsZSBhdCBhbGwgZXh0ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fHVuZGVmaW5lZH0gZXh0ZW50IFRoZSBleHRlbnQgb2YgdGhlIGxheWVyLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldEV4dGVudCA9IGZ1bmN0aW9uIHNldEV4dGVudCAoZXh0ZW50KSB7XG4gICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5FWFRFTlQsIGV4dGVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgbWF4aW11bSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWF4UmVzb2x1dGlvbiBUaGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRNYXhSZXNvbHV0aW9uID0gZnVuY3Rpb24gc2V0TWF4UmVzb2x1dGlvbiAobWF4UmVzb2x1dGlvbikge1xuICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT04sIG1heFJlc29sdXRpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIG1pbmltdW0gcmVzb2x1dGlvbiBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pblJlc29sdXRpb24gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuc2V0TWluUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIHNldE1pblJlc29sdXRpb24gKG1pblJlc29sdXRpb24pIHtcbiAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk1JTl9SRVNPTFVUSU9OLCBtaW5SZXNvbHV0aW9uKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBvcGFjaXR5IG9mIHRoZSBsYXllciwgYWxsb3dlZCB2YWx1ZXMgcmFuZ2UgZnJvbSAwIHRvIDEuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IFRoZSBvcGFjaXR5IG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRPcGFjaXR5ID0gZnVuY3Rpb24gc2V0T3BhY2l0eSAob3BhY2l0eSkge1xuICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuT1BBQ0lUWSwgb3BhY2l0eSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIgKGB0cnVlYCBvciBgZmFsc2VgKS5cbiAgICogQHBhcmFtIHtib29sZWFufSB2aXNpYmxlIFRoZSB2aXNpYmlsaXR5IG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRWaXNpYmxlID0gZnVuY3Rpb24gc2V0VmlzaWJsZSAodmlzaWJsZSkge1xuICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuVklTSUJMRSwgdmlzaWJsZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCBaLWluZGV4IG9mIHRoZSBsYXllciwgd2hpY2ggaXMgdXNlZCB0byBvcmRlciBsYXllcnMgYmVmb3JlIHJlbmRlcmluZy5cbiAgICogVGhlIGRlZmF1bHQgWi1pbmRleCBpcyAwLlxuICAgKiBAcGFyYW0ge251bWJlcn0gemluZGV4IFRoZSB6LWluZGV4IG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRaSW5kZXggPSBmdW5jdGlvbiBzZXRaSW5kZXggKHppbmRleCkge1xuICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuWl9JTkRFWCwgemluZGV4KTtcbiAgfTtcblxuICByZXR1cm4gQmFzZUxheWVyO1xufShCYXNlT2JqZWN0KSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgQmFzZUxheWVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1CYXNlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvU3RhdGVcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBTdGF0ZSBvZiB0aGUgc291cmNlLCBvbmUgb2YgJ3VuZGVmaW5lZCcsICdsb2FkaW5nJywgJ3JlYWR5JyBvciAnZXJyb3InLlxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIFVOREVGSU5FRDogJ3VuZGVmaW5lZCcsXG4gIExPQURJTkc6ICdsb2FkaW5nJyxcbiAgUkVBRFk6ICdyZWFkeScsXG4gIEVSUk9SOiAnZXJyb3InXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdGF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvR3JvdXBcbiAqL1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbkV2ZW50VHlwZSBmcm9tICcuLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7Z2V0Q2hhbmdlRXZlbnRUeXBlfSBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IE9iamVjdEV2ZW50VHlwZSBmcm9tICcuLi9PYmplY3RFdmVudFR5cGUuanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHtsaXN0ZW4sIHVubGlzdGVuQnlLZXl9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHtnZXRJbnRlcnNlY3Rpb259IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgQmFzZUxheWVyIGZyb20gJy4vQmFzZS5qcyc7XG5pbXBvcnQge2Fzc2lnbiwgY2xlYXJ9IGZyb20gJy4uL29iai5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vc291cmNlL1N0YXRlLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb3BhY2l0eT0xXSBPcGFjaXR5ICgwLCAxKS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Zpc2libGU9dHJ1ZV0gVmlzaWJpbGl0eS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGJvdW5kaW5nIGV4dGVudCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgVGhlIGxheWVyIHdpbGwgbm90IGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXhdIFRoZSB6LWluZGV4IGZvciBsYXllciByZW5kZXJpbmcuICBBdCByZW5kZXJpbmcgdGltZSwgdGhlIGxheWVyc1xuICogd2lsbCBiZSBvcmRlcmVkLCBmaXJzdCBieSBaLWluZGV4IGFuZCB0aGVuIGJ5IHBvc2l0aW9uLiBXaGVuIGB1bmRlZmluZWRgLCBhIGB6SW5kZXhgIG9mIDAgaXMgYXNzdW1lZFxuICogZm9yIGxheWVycyB0aGF0IGFyZSBhZGRlZCB0byB0aGUgbWFwJ3MgYGxheWVyc2AgY29sbGVjdGlvbiwgb3IgYEluZmluaXR5YCB3aGVuIHRoZSBsYXllcidzIGBzZXRNYXAoKWBcbiAqIG1ldGhvZCB3YXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gKGV4Y2x1c2l2ZSkgYmVsb3cgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD58aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0Pn0gW2xheWVyc10gQ2hpbGQgbGF5ZXJzLlxuICovXG5cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xudmFyIFByb3BlcnR5ID0ge1xuICBMQVlFUlM6ICdsYXllcnMnXG59O1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0gb2YgbGF5ZXJzIHRoYXQgYXJlIGhhbmRsZWQgdG9nZXRoZXIuXG4gKlxuICogQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIHRyaWdnZXJlZCB3aGVuIHRoZSBncm91cC9Db2xsZWN0aW9uIGNoYW5nZXMuXG4gKlxuICogQGFwaVxuICovXG52YXIgTGF5ZXJHcm91cCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEJhc2VMYXllcikge1xuICBmdW5jdGlvbiBMYXllckdyb3VwKG9wdF9vcHRpb25zKSB7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgIHZhciBiYXNlT3B0aW9ucyA9IC8qKiBAdHlwZSB7T3B0aW9uc30gKi8gKGFzc2lnbih7fSwgb3B0aW9ucykpO1xuICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5sYXllcnM7XG5cbiAgICB2YXIgbGF5ZXJzID0gb3B0aW9ucy5sYXllcnM7XG5cbiAgICBCYXNlTGF5ZXIuY2FsbCh0aGlzLCBiYXNlT3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLmxheWVyc0xpc3RlbmVyS2V5c18gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIEFycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+Pn1cbiAgICAgKi9cbiAgICB0aGlzLmxpc3RlbmVyS2V5c18gPSB7fTtcblxuICAgIGxpc3Rlbih0aGlzLFxuICAgICAgZ2V0Q2hhbmdlRXZlbnRUeXBlKFByb3BlcnR5LkxBWUVSUyksXG4gICAgICB0aGlzLmhhbmRsZUxheWVyc0NoYW5nZWRfLCB0aGlzKTtcblxuICAgIGlmIChsYXllcnMpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGxheWVycykpIHtcbiAgICAgICAgbGF5ZXJzID0gbmV3IENvbGxlY3Rpb24obGF5ZXJzLnNsaWNlKCksIHt1bmlxdWU6IHRydWV9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFzc2VydCh0eXBlb2YgLyoqIEB0eXBlIHs/fSAqLyAobGF5ZXJzKS5nZXRBcnJheSA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAgICAgICA0Myk7IC8vIEV4cGVjdGVkIGBsYXllcnNgIHRvIGJlIGFuIGFycmF5IG9yIGEgYENvbGxlY3Rpb25gXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxheWVycyA9IG5ldyBDb2xsZWN0aW9uKHVuZGVmaW5lZCwge3VuaXF1ZTogdHJ1ZX0pO1xuICAgIH1cblxuICAgIHRoaXMuc2V0TGF5ZXJzKGxheWVycyk7XG5cbiAgfVxuXG4gIGlmICggQmFzZUxheWVyICkgTGF5ZXJHcm91cC5fX3Byb3RvX18gPSBCYXNlTGF5ZXI7XG4gIExheWVyR3JvdXAucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggQmFzZUxheWVyICYmIEJhc2VMYXllci5wcm90b3R5cGUgKTtcbiAgTGF5ZXJHcm91cC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBMYXllckdyb3VwO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTGF5ZXJHcm91cC5wcm90b3R5cGUuaGFuZGxlTGF5ZXJDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlTGF5ZXJDaGFuZ2VfICgpIHtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyc0NoYW5nZWRfID0gZnVuY3Rpb24gaGFuZGxlTGF5ZXJzQ2hhbmdlZF8gKCkge1xuICAgIHRoaXMubGF5ZXJzTGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgIHRoaXMubGF5ZXJzTGlzdGVuZXJLZXlzXy5sZW5ndGggPSAwO1xuXG4gICAgdmFyIGxheWVycyA9IHRoaXMuZ2V0TGF5ZXJzKCk7XG4gICAgdGhpcy5sYXllcnNMaXN0ZW5lcktleXNfLnB1c2goXG4gICAgICBsaXN0ZW4obGF5ZXJzLCBDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgdGhpcy5oYW5kbGVMYXllcnNBZGRfLCB0aGlzKSxcbiAgICAgIGxpc3RlbihsYXllcnMsIENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCB0aGlzLmhhbmRsZUxheWVyc1JlbW92ZV8sIHRoaXMpXG4gICAgKTtcblxuICAgIGZvciAodmFyIGlkIGluIHRoaXMubGlzdGVuZXJLZXlzXykge1xuICAgICAgdGhpcy5saXN0ZW5lcktleXNfW2lkXS5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgIH1cbiAgICBjbGVhcih0aGlzLmxpc3RlbmVyS2V5c18pO1xuXG4gICAgdmFyIGxheWVyc0FycmF5ID0gbGF5ZXJzLmdldEFycmF5KCk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJzQXJyYXkubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgdmFyIGxheWVyID0gbGF5ZXJzQXJyYXlbaV07XG4gICAgICB0aGlzLmxpc3RlbmVyS2V5c19bZ2V0VWlkKGxheWVyKV0gPSBbXG4gICAgICAgIGxpc3RlbihsYXllciwgT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFLCB0aGlzLmhhbmRsZUxheWVyQ2hhbmdlXywgdGhpcyksXG4gICAgICAgIGxpc3RlbihsYXllciwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVMYXllckNoYW5nZV8sIHRoaXMpXG4gICAgICBdO1xuICAgIH1cblxuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBjb2xsZWN0aW9uRXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTGF5ZXJHcm91cC5wcm90b3R5cGUuaGFuZGxlTGF5ZXJzQWRkXyA9IGZ1bmN0aW9uIGhhbmRsZUxheWVyc0FkZF8gKGNvbGxlY3Rpb25FdmVudCkge1xuICAgIHZhciBsYXllciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHR9ICovIChjb2xsZWN0aW9uRXZlbnQuZWxlbWVudCk7XG4gICAgdGhpcy5saXN0ZW5lcktleXNfW2dldFVpZChsYXllcildID0gW1xuICAgICAgbGlzdGVuKGxheWVyLCBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsIHRoaXMuaGFuZGxlTGF5ZXJDaGFuZ2VfLCB0aGlzKSxcbiAgICAgIGxpc3RlbihsYXllciwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVMYXllckNoYW5nZV8sIHRoaXMpXG4gICAgXTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gY29sbGVjdGlvbkV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyc1JlbW92ZV8gPSBmdW5jdGlvbiBoYW5kbGVMYXllcnNSZW1vdmVfIChjb2xsZWN0aW9uRXZlbnQpIHtcbiAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0fSAqLyAoY29sbGVjdGlvbkV2ZW50LmVsZW1lbnQpO1xuICAgIHZhciBrZXkgPSBnZXRVaWQobGF5ZXIpO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzX1trZXldLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgZGVsZXRlIHRoaXMubGlzdGVuZXJLZXlzX1trZXldO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb24gY29sbGVjdGlvbn0gb2Yge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllciBsYXllcnN9XG4gICAqIGluIHRoaXMgZ3JvdXAuXG4gICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBDb2xsZWN0aW9uIG9mXG4gICAqICAge0BsaW5rIG1vZHVsZTpvbC9sYXllci9CYXNlIGxheWVyc30gdGhhdCBhcmUgcGFydCBvZiB0aGlzIGdyb3VwLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBMYXllckdyb3VwLnByb3RvdHlwZS5nZXRMYXllcnMgPSBmdW5jdGlvbiBnZXRMYXllcnMgKCkge1xuICAgIHJldHVybiAoXG4gICAgICAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSAqLyAodGhpcy5nZXQoUHJvcGVydHkuTEFZRVJTKSlcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbiBjb2xsZWN0aW9ufSBvZiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyfkxheWVyIGxheWVyc31cbiAgICogaW4gdGhpcyBncm91cC5cbiAgICogQHBhcmFtIHshaW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0Pn0gbGF5ZXJzIENvbGxlY3Rpb24gb2ZcbiAgICogICB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2UgbGF5ZXJzfSB0aGF0IGFyZSBwYXJ0IG9mIHRoaXMgZ3JvdXAuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIExheWVyR3JvdXAucHJvdG90eXBlLnNldExheWVycyA9IGZ1bmN0aW9uIHNldExheWVycyAobGF5ZXJzKSB7XG4gICAgdGhpcy5zZXQoUHJvcGVydHkuTEFZRVJTLCBsYXllcnMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgTGF5ZXJHcm91cC5wcm90b3R5cGUuZ2V0TGF5ZXJzQXJyYXkgPSBmdW5jdGlvbiBnZXRMYXllcnNBcnJheSAob3B0X2FycmF5KSB7XG4gICAgdmFyIGFycmF5ID0gb3B0X2FycmF5ICE9PSB1bmRlZmluZWQgPyBvcHRfYXJyYXkgOiBbXTtcbiAgICB0aGlzLmdldExheWVycygpLmZvckVhY2goZnVuY3Rpb24obGF5ZXIpIHtcbiAgICAgIGxheWVyLmdldExheWVyc0FycmF5KGFycmF5KTtcbiAgICB9KTtcbiAgICByZXR1cm4gYXJyYXk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBMYXllckdyb3VwLnByb3RvdHlwZS5nZXRMYXllclN0YXRlc0FycmF5ID0gZnVuY3Rpb24gZ2V0TGF5ZXJTdGF0ZXNBcnJheSAob3B0X3N0YXRlcykge1xuICAgIHZhciBzdGF0ZXMgPSBvcHRfc3RhdGVzICE9PSB1bmRlZmluZWQgPyBvcHRfc3RhdGVzIDogW107XG5cbiAgICB2YXIgcG9zID0gc3RhdGVzLmxlbmd0aDtcblxuICAgIHRoaXMuZ2V0TGF5ZXJzKCkuZm9yRWFjaChmdW5jdGlvbihsYXllcikge1xuICAgICAgbGF5ZXIuZ2V0TGF5ZXJTdGF0ZXNBcnJheShzdGF0ZXMpO1xuICAgIH0pO1xuXG4gICAgdmFyIG93bkxheWVyU3RhdGUgPSB0aGlzLmdldExheWVyU3RhdGUoKTtcbiAgICBmb3IgKHZhciBpID0gcG9zLCBpaSA9IHN0YXRlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICB2YXIgbGF5ZXJTdGF0ZSA9IHN0YXRlc1tpXTtcbiAgICAgIGxheWVyU3RhdGUub3BhY2l0eSAqPSBvd25MYXllclN0YXRlLm9wYWNpdHk7XG4gICAgICBsYXllclN0YXRlLnZpc2libGUgPSBsYXllclN0YXRlLnZpc2libGUgJiYgb3duTGF5ZXJTdGF0ZS52aXNpYmxlO1xuICAgICAgbGF5ZXJTdGF0ZS5tYXhSZXNvbHV0aW9uID0gTWF0aC5taW4oXG4gICAgICAgIGxheWVyU3RhdGUubWF4UmVzb2x1dGlvbiwgb3duTGF5ZXJTdGF0ZS5tYXhSZXNvbHV0aW9uKTtcbiAgICAgIGxheWVyU3RhdGUubWluUmVzb2x1dGlvbiA9IE1hdGgubWF4KFxuICAgICAgICBsYXllclN0YXRlLm1pblJlc29sdXRpb24sIG93bkxheWVyU3RhdGUubWluUmVzb2x1dGlvbik7XG4gICAgICBpZiAob3duTGF5ZXJTdGF0ZS5leHRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAobGF5ZXJTdGF0ZS5leHRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGxheWVyU3RhdGUuZXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKGxheWVyU3RhdGUuZXh0ZW50LCBvd25MYXllclN0YXRlLmV4dGVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGF5ZXJTdGF0ZS5leHRlbnQgPSBvd25MYXllclN0YXRlLmV4dGVudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzdGF0ZXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBMYXllckdyb3VwLnByb3RvdHlwZS5nZXRTb3VyY2VTdGF0ZSA9IGZ1bmN0aW9uIGdldFNvdXJjZVN0YXRlICgpIHtcbiAgICByZXR1cm4gU291cmNlU3RhdGUuUkVBRFk7XG4gIH07XG5cbiAgcmV0dXJuIExheWVyR3JvdXA7XG59KEJhc2VMYXllcikpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IExheWVyR3JvdXA7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdyb3VwLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zaXplXG4gKi9cblxuXG4vKipcbiAqIEFuIGFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGEgc2l6ZTogYFt3aWR0aCwgaGVpZ2h0XWAuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gU2l6ZVxuICogQGFwaVxuICovXG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgYnVmZmVyZWQgc2l6ZS5cbiAqIEBwYXJhbSB7U2l6ZX0gc2l6ZSBTaXplLlxuICogQHBhcmFtIHtudW1iZXJ9IG51bSBUaGUgYW1vdW50IGJ5IHdoaWNoIHRvIGJ1ZmZlci5cbiAqIEBwYXJhbSB7U2l6ZT19IG9wdF9zaXplIE9wdGlvbmFsIHJldXNhYmxlIHNpemUgYXJyYXkuXG4gKiBAcmV0dXJuIHtTaXplfSBUaGUgYnVmZmVyZWQgc2l6ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlcihzaXplLCBudW0sIG9wdF9zaXplKSB7XG4gIGlmIChvcHRfc2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgb3B0X3NpemUgPSBbMCwgMF07XG4gIH1cbiAgb3B0X3NpemVbMF0gPSBzaXplWzBdICsgMiAqIG51bTtcbiAgb3B0X3NpemVbMV0gPSBzaXplWzFdICsgMiAqIG51bTtcbiAgcmV0dXJuIG9wdF9zaXplO1xufVxuXG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiBhIHNpemUgaGFzIGEgcG9zaXRpdmUgYXJlYS5cbiAqIEBwYXJhbSB7U2l6ZX0gc2l6ZSBUaGUgc2l6ZSB0byB0ZXN0LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHNpemUgaGFzIGEgcG9zaXRpdmUgYXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc0FyZWEoc2l6ZSkge1xuICByZXR1cm4gc2l6ZVswXSA+IDAgJiYgc2l6ZVsxXSA+IDA7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2l6ZSBzY2FsZWQgYnkgYSByYXRpby4gVGhlIHJlc3VsdCB3aWxsIGJlIGFuIGFycmF5IG9mIGludGVnZXJzLlxuICogQHBhcmFtIHtTaXplfSBzaXplIFNpemUuXG4gKiBAcGFyYW0ge251bWJlcn0gcmF0aW8gUmF0aW8uXG4gKiBAcGFyYW0ge1NpemU9fSBvcHRfc2l6ZSBPcHRpb25hbCByZXVzYWJsZSBzaXplIGFycmF5LlxuICogQHJldHVybiB7U2l6ZX0gVGhlIHNjYWxlZCBzaXplLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUoc2l6ZSwgcmF0aW8sIG9wdF9zaXplKSB7XG4gIGlmIChvcHRfc2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgb3B0X3NpemUgPSBbMCwgMF07XG4gIH1cbiAgb3B0X3NpemVbMF0gPSAoc2l6ZVswXSAqIHJhdGlvICsgMC41KSB8IDA7XG4gIG9wdF9zaXplWzFdID0gKHNpemVbMV0gKiByYXRpbyArIDAuNSkgfCAwO1xuICByZXR1cm4gb3B0X3NpemU7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGBTaXplYCBhcnJheSBmb3IgdGhlIHBhc3NlZCBpbiBudW1iZXIgKG1lYW5pbmc6IHNxdWFyZSkgb3JcbiAqIGBTaXplYCBhcnJheS5cbiAqIChtZWFuaW5nOiBub24tc3F1YXJlKSxcbiAqIEBwYXJhbSB7bnVtYmVyfFNpemV9IHNpemUgV2lkdGggYW5kIGhlaWdodC5cbiAqIEBwYXJhbSB7U2l6ZT19IG9wdF9zaXplIE9wdGlvbmFsIHJldXNhYmxlIHNpemUgYXJyYXkuXG4gKiBAcmV0dXJuIHtTaXplfSBTaXplLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9TaXplKHNpemUsIG9wdF9zaXplKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHNpemUpKSB7XG4gICAgcmV0dXJuIHNpemU7XG4gIH0gZWxzZSB7XG4gICAgaWYgKG9wdF9zaXplID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG9wdF9zaXplID0gW3NpemUsIHNpemVdO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRfc2l6ZVswXSA9IG9wdF9zaXplWzFdID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChzaXplKTtcbiAgICB9XG4gICAgcmV0dXJuIG9wdF9zaXplO1xuICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNpemUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1BsdWdnYWJsZU1hcFxuICovXG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbkV2ZW50VHlwZSBmcm9tICcuL0NvbGxlY3Rpb25FdmVudFR5cGUuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudCBmcm9tICcuL01hcEJyb3dzZXJFdmVudC5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50SGFuZGxlciBmcm9tICcuL01hcEJyb3dzZXJFdmVudEhhbmRsZXIuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbmltcG9ydCBNYXBFdmVudCBmcm9tICcuL01hcEV2ZW50LmpzJztcbmltcG9ydCBNYXBFdmVudFR5cGUgZnJvbSAnLi9NYXBFdmVudFR5cGUuanMnO1xuaW1wb3J0IE1hcFByb3BlcnR5IGZyb20gJy4vTWFwUHJvcGVydHkuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuL3JlbmRlci9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEJhc2VPYmplY3QsIHtnZXRDaGFuZ2VFdmVudFR5cGV9IGZyb20gJy4vT2JqZWN0LmpzJztcbmltcG9ydCBPYmplY3RFdmVudFR5cGUgZnJvbSAnLi9PYmplY3RFdmVudFR5cGUuanMnO1xuaW1wb3J0IFRpbGVRdWV1ZSBmcm9tICcuL1RpbGVRdWV1ZS5qcyc7XG5pbXBvcnQgVmlldyBmcm9tICcuL1ZpZXcuanMnO1xuaW1wb3J0IFZpZXdIaW50IGZyb20gJy4vVmlld0hpbnQuanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQge3JlbW92ZU5vZGV9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7bGlzdGVuLCB1bmxpc3RlbkJ5S2V5LCB1bmxpc3Rlbn0gZnJvbSAnLi9ldmVudHMuanMnO1xuaW1wb3J0IHtzdG9wUHJvcGFnYXRpb259IGZyb20gJy4vZXZlbnRzL0V2ZW50LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7Y3JlYXRlRW1wdHksIGNsb25lLCBjcmVhdGVPclVwZGF0ZUVtcHR5LCBlcXVhbHMsIGdldEZvclZpZXdBbmRTaXplLCBpc0VtcHR5fSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQge1RSVUV9IGZyb20gJy4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7REVWSUNFX1BJWEVMX1JBVElPLCBUT1VDSH0gZnJvbSAnLi9oYXMuanMnO1xuaW1wb3J0IExheWVyR3JvdXAgZnJvbSAnLi9sYXllci9Hcm91cC5qcyc7XG5pbXBvcnQge2hhc0FyZWF9IGZyb20gJy4vc2l6ZS5qcyc7XG5pbXBvcnQge0RST1B9IGZyb20gJy4vc3RydWN0cy9Qcmlvcml0eVF1ZXVlLmpzJztcbmltcG9ydCB7Y3JlYXRlIGFzIGNyZWF0ZVRyYW5zZm9ybSwgYXBwbHkgYXMgYXBwbHlUcmFuc2Zvcm19IGZyb20gJy4vdHJhbnNmb3JtLmpzJztcblxuXG4vKipcbiAqIFN0YXRlIG9mIHRoZSBjdXJyZW50IGZyYW1lLiBPbmx5IGBwaXhlbFJhdGlvYCwgYHRpbWVgIGFuZCBgdmlld1N0YXRlYCBzaG91bGRcbiAqIGJlIHVzZWQgaW4gYXBwbGljYXRpb25zLlxuICogQHR5cGVkZWYge09iamVjdH0gRnJhbWVTdGF0ZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IHBpeGVsUmF0aW8gVGhlIHBpeGVsIHJhdGlvIG9mIHRoZSBmcmFtZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0aW1lIFRoZSB0aW1lIHdoZW4gcmVuZGVyaW5nIG9mIHRoZSBmcmFtZSB3YXMgcmVxdWVzdGVkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1ZpZXcuanNcIikuU3RhdGV9IHZpZXdTdGF0ZSBUaGUgc3RhdGUgb2YgdGhlIGN1cnJlbnQgdmlldy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gYW5pbWF0ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtXG4gKiBAcHJvcGVydHkge251bGx8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnRcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGZvY3VzXG4gKiBAcHJvcGVydHkge251bWJlcn0gaW5kZXhcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5TdGF0ZT59IGxheWVyU3RhdGVzXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuU3RhdGU+fSBsYXllclN0YXRlc0FycmF5XG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gcGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8UG9zdFJlbmRlckZ1bmN0aW9uPn0gcG9zdFJlbmRlckZ1bmN0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZVxuICogQHByb3BlcnR5IHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHNraXBwZWRGZWF0dXJlVWlkc1xuICogQHByb3BlcnR5IHtUaWxlUXVldWV9IHRpbGVRdWV1ZVxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0Pj59IHVzZWRUaWxlc1xuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSB2aWV3SGludHNcbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIE9iamVjdDxzdHJpbmcsIGJvb2xlYW4+Pn0gd2FudGVkVGlsZXNcbiAqL1xuXG5cbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKFBsdWdnYWJsZU1hcCwgP0ZyYW1lU3RhdGUpOiBib29sZWFufSBQb3N0UmVuZGVyRnVuY3Rpb25cbiAqL1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQXRQaXhlbE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7dW5kZWZpbmVkfGZ1bmN0aW9uKGltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGxheWVyRmlsdGVyIExheWVyIGZpbHRlclxuICogZnVuY3Rpb24uIFRoZSBmaWx0ZXIgZnVuY3Rpb24gd2lsbCByZWNlaXZlIG9uZSBhcmd1bWVudCwgdGhlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyIGxheWVyLWNhbmRpZGF0ZX0gYW5kIGl0IHNob3VsZCByZXR1cm4gYSBib29sZWFuIHZhbHVlLlxuICogT25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgXG4gKiB3aWxsIGJlIHRlc3RlZCBmb3IgZmVhdHVyZXMuIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbaGl0VG9sZXJhbmNlPTBdIEhpdC1kZXRlY3Rpb24gdG9sZXJhbmNlIGluIHBpeGVscy4gUGl4ZWxzXG4gKiBpbnNpZGUgdGhlIHJhZGl1cyBhcm91bmQgdGhlIGdpdmVuIHBvc2l0aW9uIHdpbGwgYmUgY2hlY2tlZCBmb3IgZmVhdHVyZXMuIFRoaXMgb25seVxuICogd29ya3MgZm9yIHRoZSBjYW52YXMgcmVuZGVyZXIgYW5kIG5vdCBmb3IgV2ViR0wuXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE1hcE9wdGlvbnNJbnRlcm5hbFxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fSBbY29udHJvbHNdXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn0gW2ludGVyYWN0aW9uc11cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8RG9jdW1lbnR9IGtleWJvYXJkRXZlbnRUYXJnZXRcbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59IG92ZXJsYXlzXG4gKiBAcHJvcGVydHkge09iamVjdDxzdHJpbmcsICo+fSB2YWx1ZXNcbiAqL1xuXG5cbi8qKlxuICogT2JqZWN0IGxpdGVyYWwgd2l0aCBjb25maWcgb3B0aW9ucyBmb3IgdGhlIG1hcC5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IE1hcE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0PnxBcnJheTxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gW2NvbnRyb2xzXVxuICogQ29udHJvbHMgaW5pdGlhbGx5IGFkZGVkIHRvIHRoZSBtYXAuIElmIG5vdCBzcGVjaWZpZWQsXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2x+ZGVmYXVsdHN9IGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3BpeGVsUmF0aW89d2luZG93LmRldmljZVBpeGVsUmF0aW9dIFRoZSByYXRpbyBiZXR3ZWVuXG4gKiBwaHlzaWNhbCBwaXhlbHMgYW5kIGRldmljZS1pbmRlcGVuZGVudCBwaXhlbHMgKGRpcHMpIG9uIHRoZSBkZXZpY2UuXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0PnxBcnJheTxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fSBbaW50ZXJhY3Rpb25zXVxuICogSW50ZXJhY3Rpb25zIHRoYXQgYXJlIGluaXRpYWxseSBhZGRlZCB0byB0aGUgbWFwLiBJZiBub3Qgc3BlY2lmaWVkLFxuICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbn5kZWZhdWx0c30gaXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8RG9jdW1lbnR8c3RyaW5nfSBba2V5Ym9hcmRFdmVudFRhcmdldF0gVGhlIGVsZW1lbnQgdG9cbiAqIGxpc3RlbiB0byBrZXlib2FyZCBldmVudHMgb24uIFRoaXMgZGV0ZXJtaW5lcyB3aGVuIHRoZSBgS2V5Ym9hcmRQYW5gIGFuZFxuICogYEtleWJvYXJkWm9vbWAgaW50ZXJhY3Rpb25zIHRyaWdnZXIuIEZvciBleGFtcGxlLCBpZiB0aGlzIG9wdGlvbiBpcyBzZXQgdG9cbiAqIGBkb2N1bWVudGAgdGhlIGtleWJvYXJkIGludGVyYWN0aW9ucyB3aWxsIGFsd2F5cyB0cmlnZ2VyLiBJZiB0aGlzIG9wdGlvbiBpc1xuICogbm90IHNwZWNpZmllZCwgdGhlIGVsZW1lbnQgdGhlIGxpYnJhcnkgbGlzdGVucyB0byBrZXlib2FyZCBldmVudHMgb24gaXMgdGhlXG4gKiBtYXAgdGFyZ2V0IChpLmUuIHRoZSB1c2VyLXByb3ZpZGVkIGRpdiBmb3IgdGhlIG1hcCkuIElmIHRoaXMgaXMgbm90XG4gKiBgZG9jdW1lbnRgLCB0aGUgdGFyZ2V0IGVsZW1lbnQgbmVlZHMgdG8gYmUgZm9jdXNlZCBmb3Iga2V5IGV2ZW50cyB0byBiZVxuICogZW1pdHRlZCwgcmVxdWlyaW5nIHRoYXQgdGhlIHRhcmdldCBlbGVtZW50IGhhcyBhIGB0YWJpbmRleGAgYXR0cmlidXRlLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdD58Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdD58TGF5ZXJHcm91cH0gW2xheWVyc11cbiAqIExheWVycy4gSWYgdGhpcyBpcyBub3QgZGVmaW5lZCwgYSBtYXAgd2l0aCBubyBsYXllcnMgd2lsbCBiZSByZW5kZXJlZC4gTm90ZVxuICogdGhhdCBsYXllcnMgYXJlIHJlbmRlcmVkIGluIHRoZSBvcmRlciBzdXBwbGllZCwgc28gaWYgeW91IHdhbnQsIGZvciBleGFtcGxlLFxuICogYSB2ZWN0b3IgbGF5ZXIgdG8gYXBwZWFyIG9uIHRvcCBvZiBhIHRpbGUgbGF5ZXIsIGl0IG11c3QgY29tZSBhZnRlciB0aGUgdGlsZVxuICogbGF5ZXIuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFRpbGVzTG9hZGluZz0xNl0gTWF4aW11bSBudW1iZXIgdGlsZXMgdG8gbG9hZFxuICogc2ltdWx0YW5lb3VzbHkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtsb2FkVGlsZXNXaGlsZUFuaW1hdGluZz1mYWxzZV0gV2hlbiBzZXQgdG8gYHRydWVgLCB0aWxlc1xuICogd2lsbCBiZSBsb2FkZWQgZHVyaW5nIGFuaW1hdGlvbnMuIFRoaXMgbWF5IGltcHJvdmUgdGhlIHVzZXIgZXhwZXJpZW5jZSwgYnV0XG4gKiBjYW4gYWxzbyBtYWtlIGFuaW1hdGlvbnMgc3R1dHRlciBvbiBkZXZpY2VzIHdpdGggc2xvdyBtZW1vcnkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtsb2FkVGlsZXNXaGlsZUludGVyYWN0aW5nPWZhbHNlXSBXaGVuIHNldCB0byBgdHJ1ZWAsXG4gKiB0aWxlcyB3aWxsIGJlIGxvYWRlZCB3aGlsZSBpbnRlcmFjdGluZyB3aXRoIHRoZSBtYXAuIFRoaXMgbWF5IGltcHJvdmUgdGhlXG4gKiB1c2VyIGV4cGVyaWVuY2UsIGJ1dCBjYW4gYWxzbyBtYWtlIG1hcCBwYW5uaW5nIGFuZCB6b29taW5nIGNob3BweSBvbiBkZXZpY2VzXG4gKiB3aXRoIHNsb3cgbWVtb3J5LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttb3ZlVG9sZXJhbmNlPTFdIFRoZSBtaW5pbXVtIGRpc3RhbmNlIGluIHBpeGVscyB0aGVcbiAqIGN1cnNvciBtdXN0IG1vdmUgdG8gYmUgZGV0ZWN0ZWQgYXMgYSBtYXAgbW92ZSBldmVudCBpbnN0ZWFkIG9mIGEgY2xpY2suXG4gKiBJbmNyZWFzaW5nIHRoaXMgdmFsdWUgY2FuIG1ha2UgaXQgZWFzaWVyIHRvIGNsaWNrIG9uIHRoZSBtYXAuXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fEFycmF5PGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gW292ZXJsYXlzXVxuICogT3ZlcmxheXMgaW5pdGlhbGx5IGFkZGVkIHRvIHRoZSBtYXAuIEJ5IGRlZmF1bHQsIG5vIG92ZXJsYXlzIGFyZSBhZGRlZC5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBUaGUgY29udGFpbmVyIGZvciB0aGUgbWFwLCBlaXRoZXIgdGhlXG4gKiBlbGVtZW50IGl0c2VsZiBvciB0aGUgYGlkYCBvZiB0aGUgZWxlbWVudC4gSWYgbm90IHNwZWNpZmllZCBhdCBjb25zdHJ1Y3Rpb25cbiAqIHRpbWUsIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcCNzZXRUYXJnZXR9IG11c3QgYmUgY2FsbGVkIGZvciB0aGUgbWFwIHRvIGJlXG4gKiByZW5kZXJlZC5cbiAqIEBwcm9wZXJ0eSB7Vmlld30gW3ZpZXddIFRoZSBtYXAncyB2aWV3LiAgTm8gbGF5ZXIgc291cmNlcyB3aWxsIGJlXG4gKiBmZXRjaGVkIHVubGVzcyB0aGlzIGlzIHNwZWNpZmllZCBhdCBjb25zdHJ1Y3Rpb24gdGltZSBvciB0aHJvdWdoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXAjc2V0Vmlld30uXG4gKi9cblxuXG4vKipcbiAqIEBmaXJlcyBpbXBvcnQoXCIuL01hcEJyb3dzZXJFdmVudC5qc1wiKS5NYXBCcm93c2VyRXZlbnRcbiAqIEBmaXJlcyBpbXBvcnQoXCIuL01hcEV2ZW50LmpzXCIpLk1hcEV2ZW50XG4gKiBAZmlyZXMgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudCNwb3N0Y29tcG9zZVxuICogQGZpcmVzIG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcHJlY29tcG9zZVxuICogQGZpcmVzIG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcmVuZGVyY29tcGxldGVcbiAqIEBhcGlcbiAqL1xudmFyIFBsdWdnYWJsZU1hcCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEJhc2VPYmplY3QpIHtcbiAgZnVuY3Rpb24gUGx1Z2dhYmxlTWFwKG9wdGlvbnMpIHtcblxuICAgIEJhc2VPYmplY3QuY2FsbCh0aGlzKTtcblxuICAgIHZhciBvcHRpb25zSW50ZXJuYWwgPSBjcmVhdGVPcHRpb25zSW50ZXJuYWwob3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5tYXhUaWxlc0xvYWRpbmdfID0gb3B0aW9ucy5tYXhUaWxlc0xvYWRpbmcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4VGlsZXNMb2FkaW5nIDogMTY7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubG9hZFRpbGVzV2hpbGVBbmltYXRpbmdfID1cbiAgICAgICAgb3B0aW9ucy5sb2FkVGlsZXNXaGlsZUFuaW1hdGluZyAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgICBvcHRpb25zLmxvYWRUaWxlc1doaWxlQW5pbWF0aW5nIDogZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubG9hZFRpbGVzV2hpbGVJbnRlcmFjdGluZ18gPVxuICAgICAgICBvcHRpb25zLmxvYWRUaWxlc1doaWxlSW50ZXJhY3RpbmcgIT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgb3B0aW9ucy5sb2FkVGlsZXNXaGlsZUludGVyYWN0aW5nIDogZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5waXhlbFJhdGlvXyA9IG9wdGlvbnMucGl4ZWxSYXRpbyAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdGlvbnMucGl4ZWxSYXRpbyA6IERFVklDRV9QSVhFTF9SQVRJTztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5hbmltYXRpb25EZWxheUtleV87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlfID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XyA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMucmVuZGVyRnJhbWVfLmNhbGwodGhpcywgRGF0ZS5ub3coKSk7XG4gICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAqL1xuICAgIHRoaXMuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICovXG4gICAgdGhpcy5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmZyYW1lSW5kZXhfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9GcmFtZVN0YXRlfVxuICAgICAqL1xuICAgIHRoaXMuZnJhbWVTdGF0ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGV4dGVudCBhdCB0aGUgcHJldmlvdXMgJ21vdmVlbmQnIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgKi9cbiAgICB0aGlzLnByZXZpb3VzRXh0ZW50XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAqL1xuICAgIHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICovXG4gICAgdGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgeyFIVE1MRWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLnZpZXdwb3J0XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMudmlld3BvcnRfLmNsYXNzTmFtZSA9ICdvbC12aWV3cG9ydCcgKyAoVE9VQ0ggPyAnIG9sLXRvdWNoJyA6ICcnKTtcbiAgICB0aGlzLnZpZXdwb3J0Xy5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgdGhpcy52aWV3cG9ydF8uc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICB0aGlzLnZpZXdwb3J0Xy5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICB0aGlzLnZpZXdwb3J0Xy5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgLy8gcHJldmVudCBwYWdlIHpvb20gb24gSUUgPj0gMTAgYnJvd3NlcnNcbiAgICB0aGlzLnZpZXdwb3J0Xy5zdHlsZS5tc1RvdWNoQWN0aW9uID0gJ25vbmUnO1xuICAgIHRoaXMudmlld3BvcnRfLnN0eWxlLnRvdWNoQWN0aW9uID0gJ25vbmUnO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IUhUTUxFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lcl8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLm92ZXJsYXlDb250YWluZXJfLmNsYXNzTmFtZSA9ICdvbC1vdmVybGF5Y29udGFpbmVyJztcbiAgICB0aGlzLnZpZXdwb3J0Xy5hcHBlbmRDaGlsZCh0aGlzLm92ZXJsYXlDb250YWluZXJfKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgeyFIVE1MRWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5jbGFzc05hbWUgPSAnb2wtb3ZlcmxheWNvbnRhaW5lci1zdG9wZXZlbnQnO1xuICAgIHZhciBvdmVybGF5RXZlbnRzID0gW1xuICAgICAgRXZlbnRUeXBlLkNMSUNLLFxuICAgICAgRXZlbnRUeXBlLkRCTENMSUNLLFxuICAgICAgRXZlbnRUeXBlLk1PVVNFRE9XTixcbiAgICAgIEV2ZW50VHlwZS5UT1VDSFNUQVJULFxuICAgICAgRXZlbnRUeXBlLk1TUE9JTlRFUkRPV04sXG4gICAgICBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOLFxuICAgICAgRXZlbnRUeXBlLk1PVVNFV0hFRUwsXG4gICAgICBFdmVudFR5cGUuV0hFRUxcbiAgICBdO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG92ZXJsYXlFdmVudHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgbGlzdGVuKHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8sIG92ZXJsYXlFdmVudHNbaV0sIHN0b3BQcm9wYWdhdGlvbik7XG4gICAgfVxuICAgIHRoaXMudmlld3BvcnRfLmFwcGVuZENoaWxkKHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8pO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7TWFwQnJvd3NlckV2ZW50SGFuZGxlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfID0gbmV3IE1hcEJyb3dzZXJFdmVudEhhbmRsZXIodGhpcywgb3B0aW9ucy5tb3ZlVG9sZXJhbmNlKTtcbiAgICBmb3IgKHZhciBrZXkgaW4gTWFwQnJvd3NlckV2ZW50VHlwZSkge1xuICAgICAgbGlzdGVuKHRoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8sIE1hcEJyb3dzZXJFdmVudFR5cGVba2V5XSxcbiAgICAgICAgdGhpcy5oYW5kbGVNYXBCcm93c2VyRXZlbnQsIHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0hUTUxFbGVtZW50fERvY3VtZW50fVxuICAgICAqL1xuICAgIHRoaXMua2V5Ym9hcmRFdmVudFRhcmdldF8gPSBvcHRpb25zSW50ZXJuYWwua2V5Ym9hcmRFdmVudFRhcmdldDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5rZXlIYW5kbGVyS2V5c18gPSBudWxsO1xuXG4gICAgbGlzdGVuKHRoaXMudmlld3BvcnRfLCBFdmVudFR5cGUuQ09OVEVYVE1FTlUsIHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LCB0aGlzKTtcbiAgICBsaXN0ZW4odGhpcy52aWV3cG9ydF8sIEV2ZW50VHlwZS5XSEVFTCwgdGhpcy5oYW5kbGVCcm93c2VyRXZlbnQsIHRoaXMpO1xuICAgIGxpc3Rlbih0aGlzLnZpZXdwb3J0XywgRXZlbnRUeXBlLk1PVVNFV0hFRUwsIHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LCB0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICB0aGlzLmNvbnRyb2xzID0gb3B0aW9uc0ludGVybmFsLmNvbnRyb2xzIHx8IG5ldyBDb2xsZWN0aW9uKCk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICB0aGlzLmludGVyYWN0aW9ucyA9IG9wdGlvbnNJbnRlcm5hbC5pbnRlcmFjdGlvbnMgfHwgbmV3IENvbGxlY3Rpb24oKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMub3ZlcmxheXNfID0gb3B0aW9uc0ludGVybmFsLm92ZXJsYXlzO1xuXG4gICAgLyoqXG4gICAgICogQSBsb29rdXAgb2Ygb3ZlcmxheXMgYnkgaWQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqL1xuICAgIHRoaXMub3ZlcmxheUlkSW5kZXhfID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9yZW5kZXJlci9NYXAuanNcIikuZGVmYXVsdH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZXJfID0gdGhpcy5jcmVhdGVSZW5kZXJlcigpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Z1bmN0aW9uKEV2ZW50KXx1bmRlZmluZWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmhhbmRsZVJlc2l6ZV87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgKi9cbiAgICB0aGlzLmZvY3VzXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshQXJyYXk8UG9zdFJlbmRlckZ1bmN0aW9uPn1cbiAgICAgKi9cbiAgICB0aGlzLnBvc3RSZW5kZXJGdW5jdGlvbnNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtUaWxlUXVldWV9XG4gICAgICovXG4gICAgdGhpcy50aWxlUXVldWVfID0gbmV3IFRpbGVRdWV1ZShcbiAgICAgIHRoaXMuZ2V0VGlsZVByaW9yaXR5LmJpbmQodGhpcyksXG4gICAgICB0aGlzLmhhbmRsZVRpbGVDaGFuZ2VfLmJpbmQodGhpcykpO1xuXG4gICAgLyoqXG4gICAgICogVWlkcyBvZiBmZWF0dXJlcyB0byBza2lwIGF0IHJlbmRlcmluZyB0aW1lLlxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuc2tpcHBlZEZlYXR1cmVVaWRzXyA9IHt9O1xuXG4gICAgbGlzdGVuKFxuICAgICAgdGhpcywgZ2V0Q2hhbmdlRXZlbnRUeXBlKE1hcFByb3BlcnR5LkxBWUVSR1JPVVApLFxuICAgICAgdGhpcy5oYW5kbGVMYXllckdyb3VwQ2hhbmdlZF8sIHRoaXMpO1xuICAgIGxpc3Rlbih0aGlzLCBnZXRDaGFuZ2VFdmVudFR5cGUoTWFwUHJvcGVydHkuVklFVyksXG4gICAgICB0aGlzLmhhbmRsZVZpZXdDaGFuZ2VkXywgdGhpcyk7XG4gICAgbGlzdGVuKHRoaXMsIGdldENoYW5nZUV2ZW50VHlwZShNYXBQcm9wZXJ0eS5TSVpFKSxcbiAgICAgIHRoaXMuaGFuZGxlU2l6ZUNoYW5nZWRfLCB0aGlzKTtcbiAgICBsaXN0ZW4odGhpcywgZ2V0Q2hhbmdlRXZlbnRUeXBlKE1hcFByb3BlcnR5LlRBUkdFVCksXG4gICAgICB0aGlzLmhhbmRsZVRhcmdldENoYW5nZWRfLCB0aGlzKTtcblxuICAgIC8vIHNldFByb3BlcnRpZXMgd2lsbCB0cmlnZ2VyIHRoZSByZW5kZXJpbmcgb2YgdGhlIG1hcCBpZiB0aGUgbWFwXG4gICAgLy8gaXMgXCJkZWZpbmVkXCIgYWxyZWFkeS5cbiAgICB0aGlzLnNldFByb3BlcnRpZXMob3B0aW9uc0ludGVybmFsLnZhbHVlcyk7XG5cbiAgICB0aGlzLmNvbnRyb2xzLmZvckVhY2goXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdH0gY29udHJvbCBDb250cm9sLlxuICAgICAgICogQHRoaXMge1BsdWdnYWJsZU1hcH1cbiAgICAgICAqL1xuICAgICAgKGZ1bmN0aW9uKGNvbnRyb2wpIHtcbiAgICAgICAgY29udHJvbC5zZXRNYXAodGhpcyk7XG4gICAgICB9KS5iaW5kKHRoaXMpKTtcblxuICAgIGxpc3Rlbih0aGlzLmNvbnRyb2xzLCBDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCxcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKHRoaXMpO1xuICAgICAgfSwgdGhpcyk7XG5cbiAgICBsaXN0ZW4odGhpcy5jb250cm9scywgQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcChudWxsKTtcbiAgICAgIH0sIHRoaXMpO1xuXG4gICAgdGhpcy5pbnRlcmFjdGlvbnMuZm9yRWFjaChcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHR9IGludGVyYWN0aW9uIEludGVyYWN0aW9uLlxuICAgICAgICogQHRoaXMge1BsdWdnYWJsZU1hcH1cbiAgICAgICAqL1xuICAgICAgKGZ1bmN0aW9uKGludGVyYWN0aW9uKSB7XG4gICAgICAgIGludGVyYWN0aW9uLnNldE1hcCh0aGlzKTtcbiAgICAgIH0pLmJpbmQodGhpcykpO1xuXG4gICAgbGlzdGVuKHRoaXMuaW50ZXJhY3Rpb25zLCBDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCxcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKHRoaXMpO1xuICAgICAgfSwgdGhpcyk7XG5cbiAgICBsaXN0ZW4odGhpcy5pbnRlcmFjdGlvbnMsIENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuZWxlbWVudC5zZXRNYXAobnVsbCk7XG4gICAgICB9LCB0aGlzKTtcblxuICAgIHRoaXMub3ZlcmxheXNfLmZvckVhY2godGhpcy5hZGRPdmVybGF5SW50ZXJuYWxfLmJpbmQodGhpcykpO1xuXG4gICAgbGlzdGVuKHRoaXMub3ZlcmxheXNfLCBDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCxcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuYWRkT3ZlcmxheUludGVybmFsXygvKiogQHR5cGUge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQuZWxlbWVudCkpO1xuICAgICAgfSwgdGhpcyk7XG5cbiAgICBsaXN0ZW4odGhpcy5vdmVybGF5c18sIENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgdmFyIG92ZXJsYXkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQuZWxlbWVudCk7XG4gICAgICAgIHZhciBpZCA9IG92ZXJsYXkuZ2V0SWQoKTtcbiAgICAgICAgaWYgKGlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBkZWxldGUgdGhpcy5vdmVybGF5SWRJbmRleF9baWQudG9TdHJpbmcoKV07XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQuZWxlbWVudC5zZXRNYXAobnVsbCk7XG4gICAgICB9LCB0aGlzKTtcblxuICB9XG5cbiAgaWYgKCBCYXNlT2JqZWN0ICkgUGx1Z2dhYmxlTWFwLl9fcHJvdG9fXyA9IEJhc2VPYmplY3Q7XG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBCYXNlT2JqZWN0ICYmIEJhc2VPYmplY3QucHJvdG90eXBlICk7XG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQbHVnZ2FibGVNYXA7XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3JlbmRlcmVyL01hcC5qc1wiKS5kZWZhdWx0fSBUaGUgbWFwIHJlbmRlcmVyXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gY3JlYXRlUmVuZGVyZXIgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVXNlIGEgbWFwIHR5cGUgdGhhdCBoYXMgYSBjcmVhdGVSZW5kZXJlciBtZXRob2QnKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkIHRoZSBnaXZlbiBjb250cm9sIHRvIHRoZSBtYXAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdH0gY29udHJvbCBDb250cm9sLlxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmFkZENvbnRyb2wgPSBmdW5jdGlvbiBhZGRDb250cm9sIChjb250cm9sKSB7XG4gICAgdGhpcy5nZXRDb250cm9scygpLnB1c2goY29udHJvbCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCB0aGUgZ2l2ZW4gaW50ZXJhY3Rpb24gdG8gdGhlIG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHR9IGludGVyYWN0aW9uIEludGVyYWN0aW9uIHRvIGFkZC5cbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIGFkZEludGVyYWN0aW9uIChpbnRlcmFjdGlvbikge1xuICAgIHRoaXMuZ2V0SW50ZXJhY3Rpb25zKCkucHVzaChpbnRlcmFjdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIGdpdmVuIGxheWVyIHRvIHRoZSB0b3Agb2YgdGhpcyBtYXAuIElmIHlvdSB3YW50IHRvIGFkZCBhIGxheWVyXG4gICAqIGVsc2V3aGVyZSBpbiB0aGUgc3RhY2ssIHVzZSBgZ2V0TGF5ZXJzKClgIGFuZCB0aGUgbWV0aG9kcyBhdmFpbGFibGUgb25cbiAgICoge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRMYXllciA9IGZ1bmN0aW9uIGFkZExheWVyIChsYXllcikge1xuICAgIHZhciBsYXllcnMgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKTtcbiAgICBsYXllcnMucHVzaChsYXllcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCB0aGUgZ2l2ZW4gb3ZlcmxheSB0byB0aGUgbWFwLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSBvdmVybGF5IE92ZXJsYXkuXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuYWRkT3ZlcmxheSA9IGZ1bmN0aW9uIGFkZE92ZXJsYXkgKG92ZXJsYXkpIHtcbiAgICB0aGlzLmdldE92ZXJsYXlzKCkucHVzaChvdmVybGF5KTtcbiAgfTtcblxuICAvKipcbiAgICogVGhpcyBkZWFscyB3aXRoIG1hcCdzIG92ZXJsYXkgY29sbGVjdGlvbiBjaGFuZ2VzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSBvdmVybGF5IE92ZXJsYXkuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmFkZE92ZXJsYXlJbnRlcm5hbF8gPSBmdW5jdGlvbiBhZGRPdmVybGF5SW50ZXJuYWxfIChvdmVybGF5KSB7XG4gICAgdmFyIGlkID0gb3ZlcmxheS5nZXRJZCgpO1xuICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLm92ZXJsYXlJZEluZGV4X1tpZC50b1N0cmluZygpXSA9IG92ZXJsYXk7XG4gICAgfVxuICAgIG92ZXJsYXkuc2V0TWFwKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiBkaXNwb3NlSW50ZXJuYWwgKCkge1xuICAgIHRoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8uZGlzcG9zZSgpO1xuICAgIHVubGlzdGVuKHRoaXMudmlld3BvcnRfLCBFdmVudFR5cGUuQ09OVEVYVE1FTlUsIHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LCB0aGlzKTtcbiAgICB1bmxpc3Rlbih0aGlzLnZpZXdwb3J0XywgRXZlbnRUeXBlLldIRUVMLCB0aGlzLmhhbmRsZUJyb3dzZXJFdmVudCwgdGhpcyk7XG4gICAgdW5saXN0ZW4odGhpcy52aWV3cG9ydF8sIEV2ZW50VHlwZS5NT1VTRVdIRUVMLCB0aGlzLmhhbmRsZUJyb3dzZXJFdmVudCwgdGhpcyk7XG4gICAgaWYgKHRoaXMuaGFuZGxlUmVzaXplXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5SRVNJWkUsIHRoaXMuaGFuZGxlUmVzaXplXywgZmFsc2UpO1xuICAgICAgdGhpcy5oYW5kbGVSZXNpemVfID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5hbmltYXRpb25EZWxheUtleV8pIHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKTtcbiAgICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICB0aGlzLnNldFRhcmdldChudWxsKTtcbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogRGV0ZWN0IGZlYXR1cmVzIHRoYXQgaW50ZXJzZWN0IGEgcGl4ZWwgb24gdGhlIHZpZXdwb3J0LCBhbmQgZXhlY3V0ZSBhXG4gICAqIGNhbGxiYWNrIHdpdGggZWFjaCBpbnRlcnNlY3RpbmcgZmVhdHVyZS4gTGF5ZXJzIGluY2x1ZGVkIGluIHRoZSBkZXRlY3Rpb24gY2FuXG4gICAqIGJlIGNvbmZpZ3VyZWQgdGhyb3VnaCB0aGUgYGxheWVyRmlsdGVyYCBvcHRpb24gaW4gYG9wdF9vcHRpb25zYC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBTLCBpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2UsXG4gICAqICAgICBpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBUfSBjYWxsYmFjayBGZWF0dXJlIGNhbGxiYWNrLiBUaGUgY2FsbGJhY2sgd2lsbCBiZVxuICAgKiAgICAgY2FsbGVkIHdpdGggdHdvIGFyZ3VtZW50cy4gVGhlIGZpcnN0IGFyZ3VtZW50IGlzIG9uZVxuICAgKiAgICAge0BsaW5rIG1vZHVsZTpvbC9GZWF0dXJlIGZlYXR1cmV9IG9yXG4gICAqICAgICB7QGxpbmsgbW9kdWxlOm9sL3JlbmRlci9GZWF0dXJlIHJlbmRlciBmZWF0dXJlfSBhdCB0aGUgcGl4ZWwsIHRoZSBzZWNvbmQgaXNcbiAgICogICAgIHRoZSB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyIGxheWVyfSBvZiB0aGUgZmVhdHVyZSBhbmQgd2lsbCBiZSBudWxsIGZvclxuICAgKiAgICAgdW5tYW5hZ2VkIGxheWVycy4gVG8gc3RvcCBkZXRlY3Rpb24sIGNhbGxiYWNrIGZ1bmN0aW9ucyBjYW4gcmV0dXJuIGFcbiAgICogICAgIHRydXRoeSB2YWx1ZS5cbiAgICogQHBhcmFtIHtBdFBpeGVsT3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbmFsIG9wdGlvbnMuXG4gICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQsIGkuZS4gdGhlIHJldHVybiB2YWx1ZSBvZiBsYXN0XG4gICAqIGNhbGxiYWNrIGV4ZWN1dGlvbiwgb3IgdGhlIGZpcnN0IHRydXRoeSBjYWxsYmFjayByZXR1cm4gdmFsdWUuXG4gICAqIEB0ZW1wbGF0ZSBTLFRcbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwgPSBmdW5jdGlvbiBmb3JFYWNoRmVhdHVyZUF0UGl4ZWwgKHBpeGVsLCBjYWxsYmFjaywgb3B0X29wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuZnJhbWVTdGF0ZV8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGNvb3JkaW5hdGUgPSB0aGlzLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwocGl4ZWwpO1xuICAgIG9wdF9vcHRpb25zID0gb3B0X29wdGlvbnMgIT09IHVuZGVmaW5lZCA/IG9wdF9vcHRpb25zIDpcbiAgICAgIC8qKiBAdHlwZSB7QXRQaXhlbE9wdGlvbnN9ICovICh7fSk7XG4gICAgdmFyIGhpdFRvbGVyYW5jZSA9IG9wdF9vcHRpb25zLmhpdFRvbGVyYW5jZSAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdF9vcHRpb25zLmhpdFRvbGVyYW5jZSAqIHRoaXMuZnJhbWVTdGF0ZV8ucGl4ZWxSYXRpbyA6IDA7XG4gICAgdmFyIGxheWVyRmlsdGVyID0gb3B0X29wdGlvbnMubGF5ZXJGaWx0ZXIgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRfb3B0aW9ucy5sYXllckZpbHRlciA6IFRSVUU7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKFxuICAgICAgY29vcmRpbmF0ZSwgdGhpcy5mcmFtZVN0YXRlXywgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgbnVsbCxcbiAgICAgIGxheWVyRmlsdGVyLCBudWxsKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IGFsbCBmZWF0dXJlcyB0aGF0IGludGVyc2VjdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICogQHBhcmFtIHtBdFBpeGVsT3B0aW9ucz19IG9wdF9vcHRpb25zIE9wdGlvbmFsIG9wdGlvbnMuXG4gICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZT59IFRoZSBkZXRlY3RlZCBmZWF0dXJlcyBvclxuICAgKiBgbnVsbGAgaWYgbm9uZSB3ZXJlIGZvdW5kLlxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldEZlYXR1cmVzQXRQaXhlbCA9IGZ1bmN0aW9uIGdldEZlYXR1cmVzQXRQaXhlbCAocGl4ZWwsIG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIGZlYXR1cmVzID0gbnVsbDtcbiAgICB0aGlzLmZvckVhY2hGZWF0dXJlQXRQaXhlbChwaXhlbCwgZnVuY3Rpb24oZmVhdHVyZSkge1xuICAgICAgaWYgKCFmZWF0dXJlcykge1xuICAgICAgICBmZWF0dXJlcyA9IFtdO1xuICAgICAgfVxuICAgICAgZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICB9LCBvcHRfb3B0aW9ucyk7XG4gICAgcmV0dXJuIGZlYXR1cmVzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEZXRlY3QgbGF5ZXJzIHRoYXQgaGF2ZSBhIGNvbG9yIHZhbHVlIGF0IGEgcGl4ZWwgb24gdGhlIHZpZXdwb3J0LCBhbmRcbiAgICogZXhlY3V0ZSBhIGNhbGxiYWNrIHdpdGggZWFjaCBtYXRjaGluZyBsYXllci4gTGF5ZXJzIGluY2x1ZGVkIGluIHRoZVxuICAgKiBkZXRlY3Rpb24gY2FuIGJlIGNvbmZpZ3VyZWQgdGhyb3VnaCBgb3B0X2xheWVyRmlsdGVyYC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBTLCBpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQsIChVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5KSk6IFR9IGNhbGxiYWNrXG4gICAqICAgICBMYXllciBjYWxsYmFjay4gVGhpcyBjYWxsYmFjayB3aWxsIHJlY2VpdmUgdHdvIGFyZ3VtZW50czogZmlyc3QgaXMgdGhlXG4gICAqICAgICB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyIGxheWVyfSwgc2Vjb25kIGFyZ3VtZW50IGlzIGFuIGFycmF5IHJlcHJlc2VudGluZ1xuICAgKiAgICAgW1IsIEcsIEIsIEFdIHBpeGVsIHZhbHVlcyAoMCAtIDI1NSkgYW5kIHdpbGwgYmUgYG51bGxgIGZvciBsYXllciB0eXBlc1xuICAgKiAgICAgdGhhdCBkbyBub3QgY3VycmVudGx5IHN1cHBvcnQgdGhpcyBhcmd1bWVudC4gVG8gc3RvcCBkZXRlY3Rpb24sIGNhbGxiYWNrXG4gICAqICAgICBmdW5jdGlvbnMgY2FuIHJldHVybiBhIHRydXRoeSB2YWx1ZS5cbiAgICogQHBhcmFtIHtBdFBpeGVsT3B0aW9ucz19IG9wdF9vcHRpb25zIENvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdCwgaS5lLiB0aGUgcmV0dXJuIHZhbHVlIG9mIGxhc3RcbiAgICogY2FsbGJhY2sgZXhlY3V0aW9uLCBvciB0aGUgZmlyc3QgdHJ1dGh5IGNhbGxiYWNrIHJldHVybiB2YWx1ZS5cbiAgICogQHRlbXBsYXRlIFMsVFxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmZvckVhY2hMYXllckF0UGl4ZWwgPSBmdW5jdGlvbiBmb3JFYWNoTGF5ZXJBdFBpeGVsIChwaXhlbCwgY2FsbGJhY2ssIG9wdF9vcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmZyYW1lU3RhdGVfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwgLyoqIEB0eXBlIHtBdFBpeGVsT3B0aW9uc30gKi8gKHt9KTtcbiAgICB2YXIgaGl0VG9sZXJhbmNlID0gb3B0aW9ucy5oaXRUb2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRfb3B0aW9ucy5oaXRUb2xlcmFuY2UgKiB0aGlzLmZyYW1lU3RhdGVfLnBpeGVsUmF0aW8gOiAwO1xuICAgIHZhciBsYXllckZpbHRlciA9IG9wdGlvbnMubGF5ZXJGaWx0ZXIgfHwgVFJVRTtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uZm9yRWFjaExheWVyQXRQaXhlbChcbiAgICAgIHBpeGVsLCB0aGlzLmZyYW1lU3RhdGVfLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCBudWxsLCBsYXllckZpbHRlciwgbnVsbCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIERldGVjdCBpZiBmZWF0dXJlcyBpbnRlcnNlY3QgYSBwaXhlbCBvbiB0aGUgdmlld3BvcnQuIExheWVycyBpbmNsdWRlZCBpbiB0aGVcbiAgICogZGV0ZWN0aW9uIGNhbiBiZSBjb25maWd1cmVkIHRocm91Z2ggYG9wdF9sYXllckZpbHRlcmAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAqIEBwYXJhbSB7QXRQaXhlbE9wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25hbCBvcHRpb25zLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyB0aGVyZSBhIGZlYXR1cmUgYXQgdGhlIGdpdmVuIHBpeGVsP1xuICAgKiBAdGVtcGxhdGUgVVxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhc0ZlYXR1cmVBdFBpeGVsID0gZnVuY3Rpb24gaGFzRmVhdHVyZUF0UGl4ZWwgKHBpeGVsLCBvcHRfb3B0aW9ucykge1xuICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgY29vcmRpbmF0ZSA9IHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbChwaXhlbCk7XG4gICAgb3B0X29wdGlvbnMgPSBvcHRfb3B0aW9ucyAhPT0gdW5kZWZpbmVkID8gb3B0X29wdGlvbnMgOlxuICAgICAgLyoqIEB0eXBlIHtBdFBpeGVsT3B0aW9uc30gKi8gKHt9KTtcbiAgICB2YXIgbGF5ZXJGaWx0ZXIgPSBvcHRfb3B0aW9ucy5sYXllckZpbHRlciAhPT0gdW5kZWZpbmVkID8gb3B0X29wdGlvbnMubGF5ZXJGaWx0ZXIgOiBUUlVFO1xuICAgIHZhciBoaXRUb2xlcmFuY2UgPSBvcHRfb3B0aW9ucy5oaXRUb2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRfb3B0aW9ucy5oaXRUb2xlcmFuY2UgKiB0aGlzLmZyYW1lU3RhdGVfLnBpeGVsUmF0aW8gOiAwO1xuICAgIHJldHVybiB0aGlzLnJlbmRlcmVyXy5oYXNGZWF0dXJlQXRDb29yZGluYXRlKFxuICAgICAgY29vcmRpbmF0ZSwgdGhpcy5mcmFtZVN0YXRlXywgaGl0VG9sZXJhbmNlLCBsYXllckZpbHRlciwgbnVsbCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGNvb3JkaW5hdGUgaW4gdmlldyBwcm9qZWN0aW9uIGZvciBhIGJyb3dzZXIgZXZlbnQuXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRFdmVudENvb3JkaW5hdGUgPSBmdW5jdGlvbiBnZXRFdmVudENvb3JkaW5hdGUgKGV2ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCh0aGlzLmdldEV2ZW50UGl4ZWwoZXZlbnQpKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbWFwIHBpeGVsIHBvc2l0aW9uIGZvciBhIGJyb3dzZXIgZXZlbnQgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0LlxuICAgKiBAcGFyYW0ge0V2ZW50fFRvdWNoRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBQaXhlbC5cbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRFdmVudFBpeGVsID0gZnVuY3Rpb24gZ2V0RXZlbnRQaXhlbCAoZXZlbnQpIHtcbiAgICB2YXIgdmlld3BvcnRQb3NpdGlvbiA9IHRoaXMudmlld3BvcnRfLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHZhciBldmVudFBvc2l0aW9uID0gJ2NoYW5nZWRUb3VjaGVzJyBpbiBldmVudCA/XG4gICAgICAvKiogQHR5cGUge1RvdWNoRXZlbnR9ICovIChldmVudCkuY2hhbmdlZFRvdWNoZXNbMF0gOlxuICAgICAgLyoqIEB0eXBlIHtNb3VzZUV2ZW50fSAqLyAoZXZlbnQpO1xuXG4gICAgcmV0dXJuIFtcbiAgICAgIGV2ZW50UG9zaXRpb24uY2xpZW50WCAtIHZpZXdwb3J0UG9zaXRpb24ubGVmdCxcbiAgICAgIGV2ZW50UG9zaXRpb24uY2xpZW50WSAtIHZpZXdwb3J0UG9zaXRpb24udG9wXG4gICAgXTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSB0YXJnZXQgaW4gd2hpY2ggdGhpcyBtYXAgaXMgcmVuZGVyZWQuXG4gICAqIE5vdGUgdGhhdCB0aGlzIHJldHVybnMgd2hhdCBpcyBlbnRlcmVkIGFzIGFuIG9wdGlvbiBvciBpbiBzZXRUYXJnZXQ6XG4gICAqIGlmIHRoYXQgd2FzIGFuIGVsZW1lbnQsIGl0IHJldHVybnMgYW4gZWxlbWVudDsgaWYgYSBzdHJpbmcsIGl0IHJldHVybnMgdGhhdC5cbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR8c3RyaW5nfHVuZGVmaW5lZH0gVGhlIEVsZW1lbnQgb3IgaWQgb2YgdGhlIEVsZW1lbnQgdGhhdCB0aGVcbiAgICogICAgIG1hcCBpcyByZW5kZXJlZCBpbi5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQgKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge0hUTUxFbGVtZW50fHN0cmluZ3x1bmRlZmluZWR9ICovICh0aGlzLmdldChNYXBQcm9wZXJ0eS5UQVJHRVQpKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBET00gZWxlbWVudCBpbnRvIHdoaWNoIHRoaXMgbWFwIGlzIHJlbmRlcmVkLiBJbiBjb250cmFzdCB0b1xuICAgKiBgZ2V0VGFyZ2V0YCB0aGlzIG1ldGhvZCBhbHdheXMgcmV0dXJuIGFuIGBFbGVtZW50YCwgb3IgYG51bGxgIGlmIHRoZVxuICAgKiBtYXAgaGFzIG5vIHRhcmdldC5cbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFRoZSBlbGVtZW50IHRoYXQgdGhlIG1hcCBpcyByZW5kZXJlZCBpbi5cbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRUYXJnZXRFbGVtZW50ID0gZnVuY3Rpb24gZ2V0VGFyZ2V0RWxlbWVudCAoKSB7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuZ2V0VGFyZ2V0KCk7XG4gICAgaWYgKHRhcmdldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXQpIDogdGFyZ2V0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY29vcmRpbmF0ZSBmb3IgYSBnaXZlbiBwaXhlbC4gIFRoaXMgcmV0dXJucyBhIGNvb3JkaW5hdGUgaW4gdGhlXG4gICAqIG1hcCB2aWV3IHByb2plY3Rpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwgcG9zaXRpb24gaW4gdGhlIG1hcCB2aWV3cG9ydC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRoZSBjb29yZGluYXRlIGZvciB0aGUgcGl4ZWwgcG9zaXRpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCA9IGZ1bmN0aW9uIGdldENvb3JkaW5hdGVGcm9tUGl4ZWwgKHBpeGVsKSB7XG4gICAgdmFyIGZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLCBwaXhlbC5zbGljZSgpKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWFwIGNvbnRyb2xzLiBNb2RpZnlpbmcgdGhpcyBjb2xsZWN0aW9uIGNoYW5nZXMgdGhlIGNvbnRyb2xzXG4gICAqIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWFwLlxuICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fSBDb250cm9scy5cbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRDb250cm9scyA9IGZ1bmN0aW9uIGdldENvbnRyb2xzICgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9scztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBtYXAgb3ZlcmxheXMuIE1vZGlmeWluZyB0aGlzIGNvbGxlY3Rpb24gY2hhbmdlcyB0aGUgb3ZlcmxheXNcbiAgICogYXNzb2NpYXRlZCB3aXRoIHRoZSBtYXAuXG4gICAqIEByZXR1cm4ge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fSBPdmVybGF5cy5cbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRPdmVybGF5cyA9IGZ1bmN0aW9uIGdldE92ZXJsYXlzICgpIHtcbiAgICByZXR1cm4gdGhpcy5vdmVybGF5c187XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCBhbiBvdmVybGF5IGJ5IGl0cyBpZGVudGlmaWVyICh0aGUgdmFsdWUgcmV0dXJuZWQgYnkgb3ZlcmxheS5nZXRJZCgpKS5cbiAgICogTm90ZSB0aGF0IHRoZSBpbmRleCB0cmVhdHMgc3RyaW5nIGFuZCBudW1lcmljIGlkZW50aWZpZXJzIGFzIHRoZSBzYW1lLiBTb1xuICAgKiBgbWFwLmdldE92ZXJsYXlCeUlkKDIpYCB3aWxsIHJldHVybiBhbiBvdmVybGF5IHdpdGggaWQgYCcyJ2Agb3IgYDJgLlxuICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGlkIE92ZXJsYXkgaWRlbnRpZmllci5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9IE92ZXJsYXkuXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0T3ZlcmxheUJ5SWQgPSBmdW5jdGlvbiBnZXRPdmVybGF5QnlJZCAoaWQpIHtcbiAgICB2YXIgb3ZlcmxheSA9IHRoaXMub3ZlcmxheUlkSW5kZXhfW2lkLnRvU3RyaW5nKCldO1xuICAgIHJldHVybiBvdmVybGF5ICE9PSB1bmRlZmluZWQgPyBvdmVybGF5IDogbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBtYXAgaW50ZXJhY3Rpb25zLiBNb2RpZnlpbmcgdGhpcyBjb2xsZWN0aW9uIGNoYW5nZXMgdGhlIGludGVyYWN0aW9uc1xuICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcC5cbiAgICpcbiAgICogSW50ZXJhY3Rpb25zIGFyZSB1c2VkIGZvciBlLmcuIHBhbiwgem9vbSBhbmQgcm90YXRlLlxuICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59IEludGVyYWN0aW9ucy5cbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRJbnRlcmFjdGlvbnMgPSBmdW5jdGlvbiBnZXRJbnRlcmFjdGlvbnMgKCkge1xuICAgIHJldHVybiB0aGlzLmludGVyYWN0aW9ucztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBsYXllcmdyb3VwIGFzc29jaWF0ZWQgd2l0aCB0aGlzIG1hcC5cbiAgICogQHJldHVybiB7TGF5ZXJHcm91cH0gQSBsYXllciBncm91cCBjb250YWluaW5nIHRoZSBsYXllcnMgaW4gdGhpcyBtYXAuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0TGF5ZXJHcm91cCA9IGZ1bmN0aW9uIGdldExheWVyR3JvdXAgKCkge1xuICAgIHJldHVybiAoXG4gICAgICAvKiogQHR5cGUge0xheWVyR3JvdXB9ICovICh0aGlzLmdldChNYXBQcm9wZXJ0eS5MQVlFUkdST1VQKSlcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvbGxlY3Rpb24gb2YgbGF5ZXJzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIG1hcC5cbiAgICogQHJldHVybiB7IUNvbGxlY3Rpb248aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBMYXllcnMuXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0TGF5ZXJzID0gZnVuY3Rpb24gZ2V0TGF5ZXJzICgpIHtcbiAgICB2YXIgbGF5ZXJzID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKCk7XG4gICAgcmV0dXJuIGxheWVycztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBwaXhlbCBmb3IgYSBjb29yZGluYXRlLiAgVGhpcyB0YWtlcyBhIGNvb3JkaW5hdGUgaW4gdGhlIG1hcCB2aWV3XG4gICAqIHByb2plY3Rpb24gYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcGl4ZWwuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQSBtYXAgY29vcmRpbmF0ZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gQSBwaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFBpeGVsRnJvbUNvb3JkaW5hdGUgPSBmdW5jdGlvbiBnZXRQaXhlbEZyb21Db29yZGluYXRlIChjb29yZGluYXRlKSB7XG4gICAgdmFyIGZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCBjb29yZGluYXRlLnNsaWNlKDAsIDIpKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWFwIHJlbmRlcmVyLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3JlbmRlcmVyL01hcC5qc1wiKS5kZWZhdWx0fSBSZW5kZXJlclxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRSZW5kZXJlciA9IGZ1bmN0aW9uIGdldFJlbmRlcmVyICgpIHtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl87XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc2l6ZSBvZiB0aGlzIG1hcC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV8dW5kZWZpbmVkfSBUaGUgc2l6ZSBpbiBwaXhlbHMgb2YgdGhlIG1hcCBpbiB0aGUgRE9NLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiBnZXRTaXplICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZXx1bmRlZmluZWR9ICovICh0aGlzLmdldChNYXBQcm9wZXJ0eS5TSVpFKSlcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbWFwLiBBIHZpZXcgbWFuYWdlcyBwcm9wZXJ0aWVzIHN1Y2ggYXNcbiAgICogY2VudGVyIGFuZCByZXNvbHV0aW9uLlxuICAgKiBAcmV0dXJuIHtWaWV3fSBUaGUgdmlldyB0aGF0IGNvbnRyb2xzIHRoaXMgbWFwLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFZpZXcgPSBmdW5jdGlvbiBnZXRWaWV3ICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqIEB0eXBlIHtWaWV3fSAqLyAodGhpcy5nZXQoTWFwUHJvcGVydHkuVklFVykpXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBlbGVtZW50IHRoYXQgc2VydmVzIGFzIHRoZSBtYXAgdmlld3BvcnQuXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBWaWV3cG9ydC5cbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRWaWV3cG9ydCA9IGZ1bmN0aW9uIGdldFZpZXdwb3J0ICgpIHtcbiAgICByZXR1cm4gdGhpcy52aWV3cG9ydF87XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZWxlbWVudCB0aGF0IHNlcnZlcyBhcyB0aGUgY29udGFpbmVyIGZvciBvdmVybGF5cy4gIEVsZW1lbnRzIGFkZGVkIHRvXG4gICAqIHRoaXMgY29udGFpbmVyIHdpbGwgbGV0IG1vdXNlZG93biBhbmQgdG91Y2hzdGFydCBldmVudHMgdGhyb3VnaCB0byB0aGUgbWFwLFxuICAgKiBzbyBjbGlja3MgYW5kIGdlc3R1cmVzIG9uIGFuIG92ZXJsYXkgd2lsbCB0cmlnZ2VyIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH1cbiAgICogZXZlbnRzLlxuICAgKiBAcmV0dXJuIHshSFRNTEVsZW1lbnR9IFRoZSBtYXAncyBvdmVybGF5IGNvbnRhaW5lci5cbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0T3ZlcmxheUNvbnRhaW5lciA9IGZ1bmN0aW9uIGdldE92ZXJsYXlDb250YWluZXIgKCkge1xuICAgIHJldHVybiB0aGlzLm92ZXJsYXlDb250YWluZXJfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGVsZW1lbnQgdGhhdCBzZXJ2ZXMgYXMgYSBjb250YWluZXIgZm9yIG92ZXJsYXlzIHRoYXQgZG9uJ3QgYWxsb3dcbiAgICogZXZlbnQgcHJvcGFnYXRpb24uIEVsZW1lbnRzIGFkZGVkIHRvIHRoaXMgY29udGFpbmVyIHdvbid0IGxldCBtb3VzZWRvd24gYW5kXG4gICAqIHRvdWNoc3RhcnQgZXZlbnRzIHRocm91Z2ggdG8gdGhlIG1hcCwgc28gY2xpY2tzIGFuZCBnZXN0dXJlcyBvbiBhbiBvdmVybGF5XG4gICAqIGRvbid0IHRyaWdnZXIgYW55IHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0uXG4gICAqIEByZXR1cm4geyFIVE1MRWxlbWVudH0gVGhlIG1hcCdzIG92ZXJsYXkgY29udGFpbmVyIHRoYXQgc3RvcHMgZXZlbnRzLlxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50ID0gZnVuY3Rpb24gZ2V0T3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF87XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRpbGVTb3VyY2VLZXkgVGlsZSBzb3VyY2Uga2V5LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSB0aWxlQ2VudGVyIFRpbGUgY2VudGVyLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdGlsZVJlc29sdXRpb24gVGlsZSByZXNvbHV0aW9uLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcHJpb3JpdHkuXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFRpbGVQcmlvcml0eSA9IGZ1bmN0aW9uIGdldFRpbGVQcmlvcml0eSAodGlsZSwgdGlsZVNvdXJjZUtleSwgdGlsZUNlbnRlciwgdGlsZVJlc29sdXRpb24pIHtcbiAgICAvLyBGaWx0ZXIgb3V0IHRpbGVzIGF0IGhpZ2hlciB6b29tIGxldmVscyB0aGFuIHRoZSBjdXJyZW50IHpvb20gbGV2ZWwsIG9yIHRoYXRcbiAgICAvLyBhcmUgb3V0c2lkZSB0aGUgdmlzaWJsZSBleHRlbnQuXG4gICAgdmFyIGZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgIGlmICghZnJhbWVTdGF0ZSB8fCAhKHRpbGVTb3VyY2VLZXkgaW4gZnJhbWVTdGF0ZS53YW50ZWRUaWxlcykpIHtcbiAgICAgIHJldHVybiBEUk9QO1xuICAgIH1cbiAgICBpZiAoIWZyYW1lU3RhdGUud2FudGVkVGlsZXNbdGlsZVNvdXJjZUtleV1bdGlsZS5nZXRLZXkoKV0pIHtcbiAgICAgIHJldHVybiBEUk9QO1xuICAgIH1cbiAgICAvLyBQcmlvcml0aXplIHRoZSBoaWdoZXN0IHpvb20gbGV2ZWwgdGlsZXMgY2xvc2VzdCB0byB0aGUgZm9jdXMuXG4gICAgLy8gVGlsZXMgYXQgaGlnaGVyIHpvb20gbGV2ZWxzIGFyZSBwcmlvcml0aXplZCB1c2luZyBNYXRoLmxvZyh0aWxlUmVzb2x1dGlvbikuXG4gICAgLy8gV2l0aGluIGEgem9vbSBsZXZlbCwgdGlsZXMgYXJlIHByaW9yaXRpemVkIGJ5IHRoZSBkaXN0YW5jZSBpbiBwaXhlbHNcbiAgICAvLyBiZXR3ZWVuIHRoZSBjZW50ZXIgb2YgdGhlIHRpbGUgYW5kIHRoZSBmb2N1cy4gIFRoZSBmYWN0b3Igb2YgNjU1MzYgbWVhbnNcbiAgICAvLyB0aGF0IHRoZSBwcmlvcml0aXphdGlvbiBzaG91bGQgYmVoYXZlIGFzIGRlc2lyZWQgZm9yIHRpbGVzIHVwIHRvXG4gICAgLy8gNjU1MzYgKiBNYXRoLmxvZygyKSA9IDQ1NDI2IHBpeGVscyBmcm9tIHRoZSBmb2N1cy5cbiAgICB2YXIgZGVsdGFYID0gdGlsZUNlbnRlclswXSAtIGZyYW1lU3RhdGUuZm9jdXNbMF07XG4gICAgdmFyIGRlbHRhWSA9IHRpbGVDZW50ZXJbMV0gLSBmcmFtZVN0YXRlLmZvY3VzWzFdO1xuICAgIHJldHVybiA2NTUzNiAqIE1hdGgubG9nKHRpbGVSZXNvbHV0aW9uKSArXG4gICAgICAgIE1hdGguc3FydChkZWx0YVggKiBkZWx0YVggKyBkZWx0YVkgKiBkZWx0YVkpIC8gdGlsZVJlc29sdXRpb247XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7RXZlbnR9IGJyb3dzZXJFdmVudCBCcm93c2VyIGV2ZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF90eXBlIFR5cGUuXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZUJyb3dzZXJFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZUJyb3dzZXJFdmVudCAoYnJvd3NlckV2ZW50LCBvcHRfdHlwZSkge1xuICAgIHZhciB0eXBlID0gb3B0X3R5cGUgfHwgYnJvd3NlckV2ZW50LnR5cGU7XG4gICAgdmFyIG1hcEJyb3dzZXJFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQodHlwZSwgdGhpcywgYnJvd3NlckV2ZW50KTtcbiAgICB0aGlzLmhhbmRsZU1hcEJyb3dzZXJFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge01hcEJyb3dzZXJFdmVudH0gbWFwQnJvd3NlckV2ZW50IFRoZSBldmVudCB0byBoYW5kbGUuXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZU1hcEJyb3dzZXJFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZU1hcEJyb3dzZXJFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLmZyYW1lU3RhdGVfKSB7XG4gICAgICAvLyBXaXRoIG5vIHZpZXcgZGVmaW5lZCwgd2UgY2Fubm90IHRyYW5zbGF0ZSBwaXhlbHMgaW50byBnZW9ncmFwaGljYWxcbiAgICAgIC8vIGNvb3JkaW5hdGVzIHNvIGludGVyYWN0aW9ucyBjYW5ub3QgYmUgdXNlZC5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5mb2N1c18gPSBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZTtcbiAgICBtYXBCcm93c2VyRXZlbnQuZnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZV87XG4gICAgdmFyIGludGVyYWN0aW9uc0FycmF5ID0gdGhpcy5nZXRJbnRlcmFjdGlvbnMoKS5nZXRBcnJheSgpO1xuICAgIGlmICh0aGlzLmRpc3BhdGNoRXZlbnQobWFwQnJvd3NlckV2ZW50KSAhPT0gZmFsc2UpIHtcbiAgICAgIGZvciAodmFyIGkgPSBpbnRlcmFjdGlvbnNBcnJheS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB2YXIgaW50ZXJhY3Rpb24gPSBpbnRlcmFjdGlvbnNBcnJheVtpXTtcbiAgICAgICAgaWYgKCFpbnRlcmFjdGlvbi5nZXRBY3RpdmUoKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb250ID0gaW50ZXJhY3Rpb24uaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgaWYgKCFjb250KSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlUG9zdFJlbmRlciA9IGZ1bmN0aW9uIGhhbmRsZVBvc3RSZW5kZXIgKCkge1xuXG4gICAgdmFyIGZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuXG4gICAgLy8gTWFuYWdlIHRoZSB0aWxlIHF1ZXVlXG4gICAgLy8gSW1hZ2UgbG9hZHMgYXJlIGV4cGVuc2l2ZSBhbmQgYSBsaW1pdGVkIHJlc291cmNlLCBzbyB0cnkgdG8gdXNlIHRoZW1cbiAgICAvLyBlZmZpY2llbnRseTpcbiAgICAvLyAqIFdoZW4gdGhlIHZpZXcgaXMgc3RhdGljIHdlIGFsbG93IGEgbGFyZ2UgbnVtYmVyIG9mIHBhcmFsbGVsIHRpbGUgbG9hZHNcbiAgICAvLyAgIHRvIGNvbXBsZXRlIHRoZSBmcmFtZSBhcyBxdWlja2x5IGFzIHBvc3NpYmxlLlxuICAgIC8vICogV2hlbiBhbmltYXRpbmcgb3IgaW50ZXJhY3RpbmcsIGltYWdlIGxvYWRzIGNhbiBjYXVzZSBqYW5rcywgc28gd2UgcmVkdWNlXG4gICAgLy8gICB0aGUgbWF4aW11bSBudW1iZXIgb2YgbG9hZHMgcGVyIGZyYW1lIGFuZCBsaW1pdCB0aGUgbnVtYmVyIG9mIHBhcmFsbGVsXG4gICAgLy8gICB0aWxlIGxvYWRzIHRvIHJlbWFpbiByZWFjdGl2ZSB0byB2aWV3IGNoYW5nZXMgYW5kIHRvIHJlZHVjZSB0aGUgY2hhbmNlIG9mXG4gICAgLy8gICBsb2FkaW5nIHRpbGVzIHRoYXQgd2lsbCBxdWlja2x5IGRpc2FwcGVhciBmcm9tIHZpZXcuXG4gICAgdmFyIHRpbGVRdWV1ZSA9IHRoaXMudGlsZVF1ZXVlXztcbiAgICBpZiAoIXRpbGVRdWV1ZS5pc0VtcHR5KCkpIHtcbiAgICAgIHZhciBtYXhUb3RhbExvYWRpbmcgPSB0aGlzLm1heFRpbGVzTG9hZGluZ187XG4gICAgICB2YXIgbWF4TmV3TG9hZHMgPSBtYXhUb3RhbExvYWRpbmc7XG4gICAgICBpZiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgaGludHMgPSBmcmFtZVN0YXRlLnZpZXdIaW50cztcbiAgICAgICAgaWYgKGhpbnRzW1ZpZXdIaW50LkFOSU1BVElOR10pIHtcbiAgICAgICAgICBtYXhUb3RhbExvYWRpbmcgPSB0aGlzLmxvYWRUaWxlc1doaWxlQW5pbWF0aW5nXyA/IDggOiAwO1xuICAgICAgICAgIG1heE5ld0xvYWRzID0gMjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddKSB7XG4gICAgICAgICAgbWF4VG90YWxMb2FkaW5nID0gdGhpcy5sb2FkVGlsZXNXaGlsZUludGVyYWN0aW5nXyA/IDggOiAwO1xuICAgICAgICAgIG1heE5ld0xvYWRzID0gMjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRpbGVRdWV1ZS5nZXRUaWxlc0xvYWRpbmcoKSA8IG1heFRvdGFsTG9hZGluZykge1xuICAgICAgICB0aWxlUXVldWUucmVwcmlvcml0aXplKCk7IC8vIEZJWE1FIG9ubHkgY2FsbCBpZiB2aWV3IGhhcyBjaGFuZ2VkXG4gICAgICAgIHRpbGVRdWV1ZS5sb2FkTW9yZVRpbGVzKG1heFRvdGFsTG9hZGluZywgbWF4TmV3TG9hZHMpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZnJhbWVTdGF0ZSAmJiB0aGlzLmhhc0xpc3RlbmVyKFJlbmRlckV2ZW50VHlwZS5SRU5ERVJDT01QTEVURSkgJiYgIWZyYW1lU3RhdGUuYW5pbWF0ZSAmJlxuICAgICAgICAhdGhpcy50aWxlUXVldWVfLmdldFRpbGVzTG9hZGluZygpICYmICFnZXRMb2FkaW5nKHRoaXMuZ2V0TGF5ZXJzKCkuZ2V0QXJyYXkoKSkpIHtcbiAgICAgIHRoaXMucmVuZGVyZXJfLmRpc3BhdGNoUmVuZGVyRXZlbnQoUmVuZGVyRXZlbnRUeXBlLlJFTkRFUkNPTVBMRVRFLCBmcmFtZVN0YXRlKTtcbiAgICB9XG5cbiAgICB2YXIgcG9zdFJlbmRlckZ1bmN0aW9ucyA9IHRoaXMucG9zdFJlbmRlckZ1bmN0aW9uc187XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcG9zdFJlbmRlckZ1bmN0aW9ucy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBwb3N0UmVuZGVyRnVuY3Rpb25zW2ldKHRoaXMsIGZyYW1lU3RhdGUpO1xuICAgIH1cbiAgICBwb3N0UmVuZGVyRnVuY3Rpb25zLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVNpemVDaGFuZ2VkXyA9IGZ1bmN0aW9uIGhhbmRsZVNpemVDaGFuZ2VkXyAoKSB7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlVGFyZ2V0Q2hhbmdlZF8gPSBmdW5jdGlvbiBoYW5kbGVUYXJnZXRDaGFuZ2VkXyAoKSB7XG4gICAgLy8gdGFyZ2V0IG1heSBiZSB1bmRlZmluZWQsIG51bGwsIGEgc3RyaW5nIG9yIGFuIEVsZW1lbnQuXG4gICAgLy8gSWYgaXQncyBhIHN0cmluZyB3ZSBjb252ZXJ0IGl0IHRvIGFuIEVsZW1lbnQgYmVmb3JlIHByb2NlZWRpbmcuXG4gICAgLy8gSWYgaXQncyBub3Qgbm93IGFuIEVsZW1lbnQgd2UgcmVtb3ZlIHRoZSB2aWV3cG9ydCBmcm9tIHRoZSBET00uXG4gICAgLy8gSWYgaXQncyBhbiBFbGVtZW50IHdlIGFwcGVuZCB0aGUgdmlld3BvcnQgZWxlbWVudCB0byBpdC5cblxuICAgIHZhciB0YXJnZXRFbGVtZW50O1xuICAgIGlmICh0aGlzLmdldFRhcmdldCgpKSB7XG4gICAgICB0YXJnZXRFbGVtZW50ID0gdGhpcy5nZXRUYXJnZXRFbGVtZW50KCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMua2V5SGFuZGxlcktleXNfKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmtleUhhbmRsZXJLZXlzXy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5rZXlIYW5kbGVyS2V5c19baV0pO1xuICAgICAgfVxuICAgICAgdGhpcy5rZXlIYW5kbGVyS2V5c18gPSBudWxsO1xuICAgIH1cblxuICAgIGlmICghdGFyZ2V0RWxlbWVudCkge1xuICAgICAgdGhpcy5yZW5kZXJlcl8ucmVtb3ZlTGF5ZXJSZW5kZXJlcnMoKTtcbiAgICAgIHJlbW92ZU5vZGUodGhpcy52aWV3cG9ydF8pO1xuICAgICAgaWYgKHRoaXMuaGFuZGxlUmVzaXplXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLlJFU0laRSwgdGhpcy5oYW5kbGVSZXNpemVfLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuaGFuZGxlUmVzaXplXyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnZpZXdwb3J0Xyk7XG5cbiAgICAgIHZhciBrZXlib2FyZEV2ZW50VGFyZ2V0ID0gIXRoaXMua2V5Ym9hcmRFdmVudFRhcmdldF8gP1xuICAgICAgICB0YXJnZXRFbGVtZW50IDogdGhpcy5rZXlib2FyZEV2ZW50VGFyZ2V0XztcbiAgICAgIHRoaXMua2V5SGFuZGxlcktleXNfID0gW1xuICAgICAgICBsaXN0ZW4oa2V5Ym9hcmRFdmVudFRhcmdldCwgRXZlbnRUeXBlLktFWURPV04sIHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LCB0aGlzKSxcbiAgICAgICAgbGlzdGVuKGtleWJvYXJkRXZlbnRUYXJnZXQsIEV2ZW50VHlwZS5LRVlQUkVTUywgdGhpcy5oYW5kbGVCcm93c2VyRXZlbnQsIHRoaXMpXG4gICAgICBdO1xuXG4gICAgICBpZiAoIXRoaXMuaGFuZGxlUmVzaXplXykge1xuICAgICAgICB0aGlzLmhhbmRsZVJlc2l6ZV8gPSB0aGlzLnVwZGF0ZVNpemUuYmluZCh0aGlzKTtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuUkVTSVpFLCB0aGlzLmhhbmRsZVJlc2l6ZV8sIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVNpemUoKTtcbiAgICAvLyB1cGRhdGVTaXplIGNhbGxzIHNldFNpemUsIHNvIG5vIG5lZWQgdG8gY2FsbCB0aGlzLnJlbmRlclxuICAgIC8vIG91cnNlbHZlcyBoZXJlLlxuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVUaWxlQ2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZVRpbGVDaGFuZ2VfICgpIHtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVWaWV3UHJvcGVydHlDaGFuZ2VkXyA9IGZ1bmN0aW9uIGhhbmRsZVZpZXdQcm9wZXJ0eUNoYW5nZWRfICgpIHtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVWaWV3Q2hhbmdlZF8gPSBmdW5jdGlvbiBoYW5kbGVWaWV3Q2hhbmdlZF8gKCkge1xuICAgIGlmICh0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5Xykge1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5Xyk7XG4gICAgICB0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLnZpZXdDaGFuZ2VMaXN0ZW5lcktleV8pIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfKTtcbiAgICAgIHRoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgfVxuICAgIHZhciB2aWV3ID0gdGhpcy5nZXRWaWV3KCk7XG4gICAgaWYgKHZpZXcpIHtcbiAgICAgIHRoaXMudmlld3BvcnRfLnNldEF0dHJpYnV0ZSgnZGF0YS12aWV3JywgZ2V0VWlkKHZpZXcpKTtcbiAgICAgIHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfID0gbGlzdGVuKFxuICAgICAgICB2aWV3LCBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsXG4gICAgICAgIHRoaXMuaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8sIHRoaXMpO1xuICAgICAgdGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfID0gbGlzdGVuKFxuICAgICAgICB2aWV3LCBFdmVudFR5cGUuQ0hBTkdFLFxuICAgICAgICB0aGlzLmhhbmRsZVZpZXdQcm9wZXJ0eUNoYW5nZWRfLCB0aGlzKTtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlTGF5ZXJHcm91cENoYW5nZWRfID0gZnVuY3Rpb24gaGFuZGxlTGF5ZXJHcm91cENoYW5nZWRfICgpIHtcbiAgICBpZiAodGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfKSB7XG4gICAgICB0aGlzLmxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgIHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXyA9IG51bGw7XG4gICAgfVxuICAgIHZhciBsYXllckdyb3VwID0gdGhpcy5nZXRMYXllckdyb3VwKCk7XG4gICAgaWYgKGxheWVyR3JvdXApIHtcbiAgICAgIHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXyA9IFtcbiAgICAgICAgbGlzdGVuKFxuICAgICAgICAgIGxheWVyR3JvdXAsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSxcbiAgICAgICAgICB0aGlzLnJlbmRlciwgdGhpcyksXG4gICAgICAgIGxpc3RlbihcbiAgICAgICAgICBsYXllckdyb3VwLCBFdmVudFR5cGUuQ0hBTkdFLFxuICAgICAgICAgIHRoaXMucmVuZGVyLCB0aGlzKVxuICAgICAgXTtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgcmVuZGVyZWQuXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmlzUmVuZGVyZWQgPSBmdW5jdGlvbiBpc1JlbmRlcmVkICgpIHtcbiAgICByZXR1cm4gISF0aGlzLmZyYW1lU3RhdGVfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXF1ZXN0cyBhbiBpbW1lZGlhdGUgcmVuZGVyIGluIGEgc3luY2hyb25vdXMgbWFubmVyLlxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbmRlclN5bmMgPSBmdW5jdGlvbiByZW5kZXJTeW5jICgpIHtcbiAgICBpZiAodGhpcy5hbmltYXRpb25EZWxheUtleV8pIHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKTtcbiAgICB9XG4gICAgdGhpcy5hbmltYXRpb25EZWxheV8oKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVxdWVzdCBhIG1hcCByZW5kZXJpbmcgKGF0IHRoZSBuZXh0IGFuaW1hdGlvbiBmcmFtZSkuXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyICgpIHtcbiAgICBpZiAodGhpcy5hbmltYXRpb25EZWxheUtleV8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5hbmltYXRpb25EZWxheUtleV8gPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25EZWxheV8pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBnaXZlbiBjb250cm9sIGZyb20gdGhlIG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0fSBjb250cm9sIENvbnRyb2wuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgcmVtb3ZlZCBjb250cm9sIChvciB1bmRlZmluZWRcbiAgICogICAgIGlmIHRoZSBjb250cm9sIHdhcyBub3QgZm91bmQpLlxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbW92ZUNvbnRyb2wgPSBmdW5jdGlvbiByZW1vdmVDb250cm9sIChjb250cm9sKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29udHJvbHMoKS5yZW1vdmUoY29udHJvbCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgZ2l2ZW4gaW50ZXJhY3Rpb24gZnJvbSB0aGUgbWFwLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdH0gaW50ZXJhY3Rpb24gSW50ZXJhY3Rpb24gdG8gcmVtb3ZlLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgcmVtb3ZlZCBpbnRlcmFjdGlvbiAob3JcbiAgICogICAgIHVuZGVmaW5lZCBpZiB0aGUgaW50ZXJhY3Rpb24gd2FzIG5vdCBmb3VuZCkuXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVtb3ZlSW50ZXJhY3Rpb24gPSBmdW5jdGlvbiByZW1vdmVJbnRlcmFjdGlvbiAoaW50ZXJhY3Rpb24pIHtcbiAgICByZXR1cm4gdGhpcy5nZXRJbnRlcmFjdGlvbnMoKS5yZW1vdmUoaW50ZXJhY3Rpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBnaXZlbiBsYXllciBmcm9tIHRoZSBtYXAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGxheWVyIChvciB1bmRlZmluZWQgaWYgdGhlXG4gICAqICAgICBsYXllciB3YXMgbm90IGZvdW5kKS5cbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW1vdmVMYXllciA9IGZ1bmN0aW9uIHJlbW92ZUxheWVyIChsYXllcikge1xuICAgIHZhciBsYXllcnMgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKTtcbiAgICByZXR1cm4gbGF5ZXJzLnJlbW92ZShsYXllcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgZ2l2ZW4gb3ZlcmxheSBmcm9tIHRoZSBtYXAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9IG92ZXJsYXkgT3ZlcmxheS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgcmVtb3ZlZCBvdmVybGF5IChvciB1bmRlZmluZWRcbiAgICogICAgIGlmIHRoZSBvdmVybGF5IHdhcyBub3QgZm91bmQpLlxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbW92ZU92ZXJsYXkgPSBmdW5jdGlvbiByZW1vdmVPdmVybGF5IChvdmVybGF5KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0T3ZlcmxheXMoKS5yZW1vdmUob3ZlcmxheSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIFRpbWUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbmRlckZyYW1lXyA9IGZ1bmN0aW9uIHJlbmRlckZyYW1lXyAodGltZSkge1xuICAgIHZhciB2aWV3U3RhdGU7XG5cbiAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpO1xuICAgIHZhciB2aWV3ID0gdGhpcy5nZXRWaWV3KCk7XG4gICAgdmFyIGV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG4gICAgdmFyIHByZXZpb3VzRnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZV87XG4gICAgLyoqIEB0eXBlIHs/RnJhbWVTdGF0ZX0gKi9cbiAgICB2YXIgZnJhbWVTdGF0ZSA9IG51bGw7XG4gICAgaWYgKHNpemUgIT09IHVuZGVmaW5lZCAmJiBoYXNBcmVhKHNpemUpICYmIHZpZXcgJiYgdmlldy5pc0RlZigpKSB7XG4gICAgICB2YXIgdmlld0hpbnRzID0gdmlldy5nZXRIaW50cyh0aGlzLmZyYW1lU3RhdGVfID8gdGhpcy5mcmFtZVN0YXRlXy52aWV3SGludHMgOiB1bmRlZmluZWQpO1xuICAgICAgdmFyIGxheWVyU3RhdGVzQXJyYXkgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllclN0YXRlc0FycmF5KCk7XG4gICAgICB2YXIgbGF5ZXJTdGF0ZXMgPSB7fTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVyU3RhdGVzQXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBsYXllclN0YXRlc1tnZXRVaWQobGF5ZXJTdGF0ZXNBcnJheVtpXS5sYXllcildID0gbGF5ZXJTdGF0ZXNBcnJheVtpXTtcbiAgICAgIH1cbiAgICAgIHZpZXdTdGF0ZSA9IHZpZXcuZ2V0U3RhdGUodGhpcy5waXhlbFJhdGlvXyk7XG4gICAgICBmcmFtZVN0YXRlID0gLyoqIEB0eXBlIHtGcmFtZVN0YXRlfSAqLyAoe1xuICAgICAgICBhbmltYXRlOiBmYWxzZSxcbiAgICAgICAgY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm06IHRoaXMuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fLFxuICAgICAgICBleHRlbnQ6IGV4dGVudCxcbiAgICAgICAgZm9jdXM6IHRoaXMuZm9jdXNfID8gdGhpcy5mb2N1c18gOiB2aWV3U3RhdGUuY2VudGVyLFxuICAgICAgICBpbmRleDogdGhpcy5mcmFtZUluZGV4XysrLFxuICAgICAgICBsYXllclN0YXRlczogbGF5ZXJTdGF0ZXMsXG4gICAgICAgIGxheWVyU3RhdGVzQXJyYXk6IGxheWVyU3RhdGVzQXJyYXksXG4gICAgICAgIHBpeGVsUmF0aW86IHRoaXMucGl4ZWxSYXRpb18sXG4gICAgICAgIHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtOiB0aGlzLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtXyxcbiAgICAgICAgcG9zdFJlbmRlckZ1bmN0aW9uczogW10sXG4gICAgICAgIHNpemU6IHNpemUsXG4gICAgICAgIHNraXBwZWRGZWF0dXJlVWlkczogdGhpcy5za2lwcGVkRmVhdHVyZVVpZHNfLFxuICAgICAgICB0aWxlUXVldWU6IHRoaXMudGlsZVF1ZXVlXyxcbiAgICAgICAgdGltZTogdGltZSxcbiAgICAgICAgdXNlZFRpbGVzOiB7fSxcbiAgICAgICAgdmlld1N0YXRlOiB2aWV3U3RhdGUsXG4gICAgICAgIHZpZXdIaW50czogdmlld0hpbnRzLFxuICAgICAgICB3YW50ZWRUaWxlczoge31cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChmcmFtZVN0YXRlKSB7XG4gICAgICBmcmFtZVN0YXRlLmV4dGVudCA9IGdldEZvclZpZXdBbmRTaXplKHZpZXdTdGF0ZS5jZW50ZXIsXG4gICAgICAgIHZpZXdTdGF0ZS5yZXNvbHV0aW9uLCB2aWV3U3RhdGUucm90YXRpb24sIGZyYW1lU3RhdGUuc2l6ZSwgZXh0ZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLmZyYW1lU3RhdGVfID0gZnJhbWVTdGF0ZTtcbiAgICB0aGlzLnJlbmRlcmVyXy5yZW5kZXJGcmFtZShmcmFtZVN0YXRlKTtcblxuICAgIGlmIChmcmFtZVN0YXRlKSB7XG4gICAgICBpZiAoZnJhbWVTdGF0ZS5hbmltYXRlKSB7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICB9XG4gICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLnBvc3RSZW5kZXJGdW5jdGlvbnNfLCBmcmFtZVN0YXRlLnBvc3RSZW5kZXJGdW5jdGlvbnMpO1xuXG4gICAgICBpZiAocHJldmlvdXNGcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciBtb3ZlU3RhcnQgPSAhdGhpcy5wcmV2aW91c0V4dGVudF8gfHxcbiAgICAgICAgICAgICAgICAgICAgKCFpc0VtcHR5KHRoaXMucHJldmlvdXNFeHRlbnRfKSAmJlxuICAgICAgICAgICAgICAgICAgICAhZXF1YWxzKGZyYW1lU3RhdGUuZXh0ZW50LCB0aGlzLnByZXZpb3VzRXh0ZW50XykpO1xuICAgICAgICBpZiAobW92ZVN0YXJ0KSB7XG4gICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgbmV3IE1hcEV2ZW50KE1hcEV2ZW50VHlwZS5NT1ZFU1RBUlQsIHRoaXMsIHByZXZpb3VzRnJhbWVTdGF0ZSkpO1xuICAgICAgICAgIHRoaXMucHJldmlvdXNFeHRlbnRfID0gY3JlYXRlT3JVcGRhdGVFbXB0eSh0aGlzLnByZXZpb3VzRXh0ZW50Xyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGlkbGUgPSB0aGlzLnByZXZpb3VzRXh0ZW50XyAmJlxuICAgICAgICAgICFmcmFtZVN0YXRlLnZpZXdIaW50c1tWaWV3SGludC5BTklNQVRJTkddICYmXG4gICAgICAgICAgIWZyYW1lU3RhdGUudmlld0hpbnRzW1ZpZXdIaW50LklOVEVSQUNUSU5HXSAmJlxuICAgICAgICAgICFlcXVhbHMoZnJhbWVTdGF0ZS5leHRlbnQsIHRoaXMucHJldmlvdXNFeHRlbnRfKTtcblxuICAgICAgaWYgKGlkbGUpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBNYXBFdmVudChNYXBFdmVudFR5cGUuTU9WRUVORCwgdGhpcywgZnJhbWVTdGF0ZSkpO1xuICAgICAgICBjbG9uZShmcmFtZVN0YXRlLmV4dGVudCwgdGhpcy5wcmV2aW91c0V4dGVudF8pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgTWFwRXZlbnQoTWFwRXZlbnRUeXBlLlBPU1RSRU5ERVIsIHRoaXMsIGZyYW1lU3RhdGUpKTtcblxuICAgIHNldFRpbWVvdXQodGhpcy5oYW5kbGVQb3N0UmVuZGVyLmJpbmQodGhpcyksIDApO1xuXG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGxheWVyZ3JvdXAgb2YgdGhpcyBtYXAuXG4gICAqIEBwYXJhbSB7TGF5ZXJHcm91cH0gbGF5ZXJHcm91cCBBIGxheWVyIGdyb3VwIGNvbnRhaW5pbmcgdGhlIGxheWVycyBpbiB0aGlzIG1hcC5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5zZXRMYXllckdyb3VwID0gZnVuY3Rpb24gc2V0TGF5ZXJHcm91cCAobGF5ZXJHcm91cCkge1xuICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LkxBWUVSR1JPVVAsIGxheWVyR3JvdXApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHNpemUgb2YgdGhpcyBtYXAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV8dW5kZWZpbmVkfSBzaXplIFRoZSBzaXplIGluIHBpeGVscyBvZiB0aGUgbWFwIGluIHRoZSBET00uXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuc2V0U2l6ZSA9IGZ1bmN0aW9uIHNldFNpemUgKHNpemUpIHtcbiAgICB0aGlzLnNldChNYXBQcm9wZXJ0eS5TSVpFLCBzaXplKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB0YXJnZXQgZWxlbWVudCB0byByZW5kZXIgdGhpcyBtYXAgaW50by5cbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxzdHJpbmd8dW5kZWZpbmVkfSB0YXJnZXQgVGhlIEVsZW1lbnQgb3IgaWQgb2YgdGhlIEVsZW1lbnRcbiAgICogICAgIHRoYXQgdGhlIG1hcCBpcyByZW5kZXJlZCBpbi5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5zZXRUYXJnZXQgPSBmdW5jdGlvbiBzZXRUYXJnZXQgKHRhcmdldCkge1xuICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LlRBUkdFVCwgdGFyZ2V0KTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB2aWV3IGZvciB0aGlzIG1hcC5cbiAgICogQHBhcmFtIHtWaWV3fSB2aWV3IFRoZSB2aWV3IHRoYXQgY29udHJvbHMgdGhpcyBtYXAuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuc2V0VmlldyA9IGZ1bmN0aW9uIHNldFZpZXcgKHZpZXcpIHtcbiAgICB0aGlzLnNldChNYXBQcm9wZXJ0eS5WSUVXLCB2aWV3KTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5za2lwRmVhdHVyZSA9IGZ1bmN0aW9uIHNraXBGZWF0dXJlIChmZWF0dXJlKSB7XG4gICAgdGhpcy5za2lwcGVkRmVhdHVyZVVpZHNfW2dldFVpZChmZWF0dXJlKV0gPSB0cnVlO1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEZvcmNlIGEgcmVjYWxjdWxhdGlvbiBvZiB0aGUgbWFwIHZpZXdwb3J0IHNpemUuICBUaGlzIHNob3VsZCBiZSBjYWxsZWQgd2hlblxuICAgKiB0aGlyZC1wYXJ0eSBjb2RlIGNoYW5nZXMgdGhlIHNpemUgb2YgdGhlIG1hcCB2aWV3cG9ydC5cbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS51cGRhdGVTaXplID0gZnVuY3Rpb24gdXBkYXRlU2l6ZSAoKSB7XG4gICAgdmFyIHRhcmdldEVsZW1lbnQgPSB0aGlzLmdldFRhcmdldEVsZW1lbnQoKTtcblxuICAgIGlmICghdGFyZ2V0RWxlbWVudCkge1xuICAgICAgdGhpcy5zZXRTaXplKHVuZGVmaW5lZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXRFbGVtZW50KTtcbiAgICAgIHRoaXMuc2V0U2l6ZShbXG4gICAgICAgIHRhcmdldEVsZW1lbnQub2Zmc2V0V2lkdGggLVxuICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydib3JkZXJMZWZ0V2lkdGgnXSkgLVxuICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydwYWRkaW5nTGVmdCddKSAtXG4gICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdSaWdodCddKSAtXG4gICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ2JvcmRlclJpZ2h0V2lkdGgnXSksXG4gICAgICAgIHRhcmdldEVsZW1lbnQub2Zmc2V0SGVpZ2h0IC1cbiAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsnYm9yZGVyVG9wV2lkdGgnXSkgLVxuICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydwYWRkaW5nVG9wJ10pIC1cbiAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsncGFkZGluZ0JvdHRvbSddKSAtXG4gICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ2JvcmRlckJvdHRvbVdpZHRoJ10pXG4gICAgICBdKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUudW5za2lwRmVhdHVyZSA9IGZ1bmN0aW9uIHVuc2tpcEZlYXR1cmUgKGZlYXR1cmUpIHtcbiAgICBkZWxldGUgdGhpcy5za2lwcGVkRmVhdHVyZVVpZHNfW2dldFVpZChmZWF0dXJlKV07XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfTtcblxuICByZXR1cm4gUGx1Z2dhYmxlTWFwO1xufShCYXNlT2JqZWN0KSk7XG5cblxuLyoqXG4gKiBAcGFyYW0ge01hcE9wdGlvbnN9IG9wdGlvbnMgTWFwIG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtNYXBPcHRpb25zSW50ZXJuYWx9IEludGVybmFsIG1hcCBvcHRpb25zLlxuICovXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zSW50ZXJuYWwob3B0aW9ucykge1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR8RG9jdW1lbnR9XG4gICAqL1xuICB2YXIga2V5Ym9hcmRFdmVudFRhcmdldCA9IG51bGw7XG4gIGlmIChvcHRpb25zLmtleWJvYXJkRXZlbnRUYXJnZXQgIT09IHVuZGVmaW5lZCkge1xuICAgIGtleWJvYXJkRXZlbnRUYXJnZXQgPSB0eXBlb2Ygb3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0ID09PSAnc3RyaW5nJyA/XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcHRpb25zLmtleWJvYXJkRXZlbnRUYXJnZXQpIDpcbiAgICAgIG9wdGlvbnMua2V5Ym9hcmRFdmVudFRhcmdldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgKj59XG4gICAqL1xuICB2YXIgdmFsdWVzID0ge307XG5cbiAgdmFyIGxheWVyR3JvdXAgPSBvcHRpb25zLmxheWVycyAmJiB0eXBlb2YgLyoqIEB0eXBlIHs/fSAqLyAob3B0aW9ucy5sYXllcnMpLmdldExheWVycyA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgLyoqIEB0eXBlIHtMYXllckdyb3VwfSAqLyAob3B0aW9ucy5sYXllcnMpIDogbmV3IExheWVyR3JvdXAoe2xheWVyczogLyoqIEB0eXBlIHtDb2xsZWN0aW9ufSAqLyAob3B0aW9ucy5sYXllcnMpfSk7XG4gIHZhbHVlc1tNYXBQcm9wZXJ0eS5MQVlFUkdST1VQXSA9IGxheWVyR3JvdXA7XG5cbiAgdmFsdWVzW01hcFByb3BlcnR5LlRBUkdFVF0gPSBvcHRpb25zLnRhcmdldDtcblxuICB2YWx1ZXNbTWFwUHJvcGVydHkuVklFV10gPSBvcHRpb25zLnZpZXcgIT09IHVuZGVmaW5lZCA/XG4gICAgb3B0aW9ucy52aWV3IDogbmV3IFZpZXcoKTtcblxuICB2YXIgY29udHJvbHM7XG4gIGlmIChvcHRpb25zLmNvbnRyb2xzICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLmNvbnRyb2xzKSkge1xuICAgICAgY29udHJvbHMgPSBuZXcgQ29sbGVjdGlvbihvcHRpb25zLmNvbnRyb2xzLnNsaWNlKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhc3NlcnQodHlwZW9mIC8qKiBAdHlwZSB7P30gKi8gKG9wdGlvbnMuY29udHJvbHMpLmdldEFycmF5ID09PSAnZnVuY3Rpb24nLFxuICAgICAgICA0Nyk7IC8vIEV4cGVjdGVkIGBjb250cm9sc2AgdG8gYmUgYW4gYXJyYXkgb3IgYW4gYGltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uYFxuICAgICAgY29udHJvbHMgPSAvKiogQHR5cGUge0NvbGxlY3Rpb259ICovIChvcHRpb25zLmNvbnRyb2xzKTtcbiAgICB9XG4gIH1cblxuICB2YXIgaW50ZXJhY3Rpb25zO1xuICBpZiAob3B0aW9ucy5pbnRlcmFjdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMuaW50ZXJhY3Rpb25zKSkge1xuICAgICAgaW50ZXJhY3Rpb25zID0gbmV3IENvbGxlY3Rpb24ob3B0aW9ucy5pbnRlcmFjdGlvbnMuc2xpY2UoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFzc2VydCh0eXBlb2YgLyoqIEB0eXBlIHs/fSAqLyAob3B0aW9ucy5pbnRlcmFjdGlvbnMpLmdldEFycmF5ID09PSAnZnVuY3Rpb24nLFxuICAgICAgICA0OCk7IC8vIEV4cGVjdGVkIGBpbnRlcmFjdGlvbnNgIHRvIGJlIGFuIGFycmF5IG9yIGFuIGBpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbmBcbiAgICAgIGludGVyYWN0aW9ucyA9IC8qKiBAdHlwZSB7Q29sbGVjdGlvbn0gKi8gKG9wdGlvbnMuaW50ZXJhY3Rpb25zKTtcbiAgICB9XG4gIH1cblxuICB2YXIgb3ZlcmxheXM7XG4gIGlmIChvcHRpb25zLm92ZXJsYXlzICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLm92ZXJsYXlzKSkge1xuICAgICAgb3ZlcmxheXMgPSBuZXcgQ29sbGVjdGlvbihvcHRpb25zLm92ZXJsYXlzLnNsaWNlKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhc3NlcnQodHlwZW9mIC8qKiBAdHlwZSB7P30gKi8gKG9wdGlvbnMub3ZlcmxheXMpLmdldEFycmF5ID09PSAnZnVuY3Rpb24nLFxuICAgICAgICA0OSk7IC8vIEV4cGVjdGVkIGBvdmVybGF5c2AgdG8gYmUgYW4gYXJyYXkgb3IgYW4gYGltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uYFxuICAgICAgb3ZlcmxheXMgPSBvcHRpb25zLm92ZXJsYXlzO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBvdmVybGF5cyA9IG5ldyBDb2xsZWN0aW9uKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGNvbnRyb2xzOiBjb250cm9scyxcbiAgICBpbnRlcmFjdGlvbnM6IGludGVyYWN0aW9ucyxcbiAgICBrZXlib2FyZEV2ZW50VGFyZ2V0OiBrZXlib2FyZEV2ZW50VGFyZ2V0LFxuICAgIG92ZXJsYXlzOiBvdmVybGF5cyxcbiAgICB2YWx1ZXM6IHZhbHVlc1xuICB9O1xuXG59XG5leHBvcnQgZGVmYXVsdCBQbHVnZ2FibGVNYXA7XG5cbi8qKlxuICogQHBhcmFtICB7QXJyYXk8aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBsYXllcnMgTGF5ZXJzLlxuICogQHJldHVybiB7Ym9vbGVhbn0gTGF5ZXJzIGhhdmUgc291cmNlcyB0aGF0IGFyZSBzdGlsbCBsb2FkaW5nLlxuICovXG5mdW5jdGlvbiBnZXRMb2FkaW5nKGxheWVycykge1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBsYXllcnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBsYXllciA9IGxheWVyc1tpXTtcbiAgICBpZiAodHlwZW9mIC8qKiBAdHlwZSB7P30gKi8gKGxheWVyKS5nZXRMYXllcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBnZXRMb2FkaW5nKC8qKiBAdHlwZSB7TGF5ZXJHcm91cH0gKi8gKGxheWVyKS5nZXRMYXllcnMoKS5nZXRBcnJheSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHNvdXJjZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSAqLyAoXG4gICAgICAgIGxheWVyKS5nZXRTb3VyY2UoKTtcbiAgICAgIGlmIChzb3VyY2UgJiYgc291cmNlLmxvYWRpbmcpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGx1Z2dhYmxlTWFwLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL0NvbnRyb2xcbiAqL1xuaW1wb3J0IHtWT0lEfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IE1hcEV2ZW50VHlwZSBmcm9tICcuLi9NYXBFdmVudFR5cGUuanMnO1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCB7cmVtb3ZlTm9kZX0gZnJvbSAnLi4vZG9tLmpzJztcbmltcG9ydCB7bGlzdGVuLCB1bmxpc3RlbkJ5S2V5fSBmcm9tICcuLi9ldmVudHMuanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudH0gW2VsZW1lbnRdIFRoZSBlbGVtZW50IGlzIHRoZSBjb250cm9sJ3NcbiAqIGNvbnRhaW5lciBlbGVtZW50LiBUaGlzIG9ubHkgbmVlZHMgdG8gYmUgc3BlY2lmaWVkIGlmIHlvdSdyZSBkZXZlbG9waW5nXG4gKiBhIGN1c3RvbSBjb250cm9sLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0KX0gW3JlbmRlcl0gRnVuY3Rpb24gY2FsbGVkIHdoZW5cbiAqIHRoZSBjb250cm9sIHNob3VsZCBiZSByZS1yZW5kZXJlZC4gVGhpcyBpcyBjYWxsZWQgaW4gYSBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYFxuICogY2FsbGJhY2suXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudFxuICogdGhlIGNvbnRyb2wgdG8gYmUgcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3Mgdmlld3BvcnQuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgY29udHJvbCBpcyBhIHZpc2libGUgd2lkZ2V0IHdpdGggYSBET00gZWxlbWVudCBpbiBhIGZpeGVkIHBvc2l0aW9uIG9uIHRoZVxuICogc2NyZWVuLiBUaGV5IGNhbiBpbnZvbHZlIHVzZXIgaW5wdXQgKGJ1dHRvbnMpLCBvciBiZSBpbmZvcm1hdGlvbmFsIG9ubHk7XG4gKiB0aGUgcG9zaXRpb24gaXMgZGV0ZXJtaW5lZCB1c2luZyBDU1MuIEJ5IGRlZmF1bHQgdGhlc2UgYXJlIHBsYWNlZCBpbiB0aGVcbiAqIGNvbnRhaW5lciB3aXRoIENTUyBjbGFzcyBuYW1lIGBvbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudGAsIGJ1dCBjYW4gdXNlXG4gKiBhbnkgb3V0c2lkZSBET00gZWxlbWVudC5cbiAqXG4gKiBUaGlzIGlzIHRoZSBiYXNlIGNsYXNzIGZvciBjb250cm9scy4gWW91IGNhbiB1c2UgaXQgZm9yIHNpbXBsZSBjdXN0b21cbiAqIGNvbnRyb2xzIGJ5IGNyZWF0aW5nIHRoZSBlbGVtZW50IHdpdGggbGlzdGVuZXJzLCBjcmVhdGluZyBhbiBpbnN0YW5jZTpcbiAqIGBgYGpzXG4gKiB2YXIgbXlDb250cm9sID0gbmV3IENvbnRyb2woe2VsZW1lbnQ6IG15RWxlbWVudH0pO1xuICogYGBgXG4gKiBhbmQgdGhlbiBhZGRpbmcgdGhpcyB0byB0aGUgbWFwLlxuICpcbiAqIFRoZSBtYWluIGFkdmFudGFnZSBvZiBoYXZpbmcgdGhpcyBhcyBhIGNvbnRyb2wgcmF0aGVyIHRoYW4gYSBzaW1wbGUgc2VwYXJhdGVcbiAqIERPTSBlbGVtZW50IGlzIHRoYXQgcHJldmVudGluZyBwcm9wYWdhdGlvbiBpcyBoYW5kbGVkIGZvciB5b3UuIENvbnRyb2xzXG4gKiB3aWxsIGFsc28gYmUgb2JqZWN0cyBpbiBhIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSwgc28geW91IGNhbiB1c2UgdGhlaXIgbWV0aG9kcy5cbiAqXG4gKiBZb3UgY2FuIGFsc28gZXh0ZW5kIHRoaXMgYmFzZSBmb3IgeW91ciBvd24gY29udHJvbCBjbGFzcy4gU2VlXG4gKiBleGFtcGxlcy9jdXN0b20tY29udHJvbHMgZm9yIGFuIGV4YW1wbGUgb2YgaG93IHRvIGRvIHRoaXMuXG4gKlxuICogQGFwaVxuICovXG52YXIgQ29udHJvbCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEJhc2VPYmplY3QpIHtcbiAgZnVuY3Rpb24gQ29udHJvbChvcHRpb25zKSB7XG5cbiAgICBCYXNlT2JqZWN0LmNhbGwodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMuZWxlbWVudCA9IG9wdGlvbnMuZWxlbWVudCA/IG9wdGlvbnMuZWxlbWVudCA6IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLnRhcmdldF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5tYXBfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7IUFycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMubGlzdGVuZXJLZXlzID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdCl9XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXIgPSBvcHRpb25zLnJlbmRlciA/IG9wdGlvbnMucmVuZGVyIDogVk9JRDtcblxuICAgIGlmIChvcHRpb25zLnRhcmdldCkge1xuICAgICAgdGhpcy5zZXRUYXJnZXQob3B0aW9ucy50YXJnZXQpO1xuICAgIH1cblxuICB9XG5cbiAgaWYgKCBCYXNlT2JqZWN0ICkgQ29udHJvbC5fX3Byb3RvX18gPSBCYXNlT2JqZWN0O1xuICBDb250cm9sLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEJhc2VPYmplY3QgJiYgQmFzZU9iamVjdC5wcm90b3R5cGUgKTtcbiAgQ29udHJvbC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDb250cm9sO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ29udHJvbC5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gZGlzcG9zZUludGVybmFsICgpIHtcbiAgICByZW1vdmVOb2RlKHRoaXMuZWxlbWVudCk7XG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWFwIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGNvbnRyb2wuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBNYXAuXG4gICAqIEBhcGlcbiAgICovXG4gIENvbnRyb2wucHJvdG90eXBlLmdldE1hcCA9IGZ1bmN0aW9uIGdldE1hcCAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwXztcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBjb250cm9sIGZyb20gaXRzIGN1cnJlbnQgbWFwIGFuZCBhdHRhY2ggaXQgdG8gdGhlIG5ldyBtYXAuXG4gICAqIFN1YmNsYXNzZXMgbWF5IHNldCB1cCBldmVudCBoYW5kbGVycyB0byBnZXQgbm90aWZpZWQgYWJvdXQgY2hhbmdlcyB0b1xuICAgKiB0aGUgbWFwIGhlcmUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAqIEBhcGlcbiAgICovXG4gIENvbnRyb2wucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIHNldE1hcCAobWFwKSB7XG4gICAgaWYgKHRoaXMubWFwXykge1xuICAgICAgcmVtb3ZlTm9kZSh0aGlzLmVsZW1lbnQpO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmxpc3RlbmVyS2V5cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMubGlzdGVuZXJLZXlzW2ldKTtcbiAgICB9XG4gICAgdGhpcy5saXN0ZW5lcktleXMubGVuZ3RoID0gMDtcbiAgICB0aGlzLm1hcF8gPSBtYXA7XG4gICAgaWYgKHRoaXMubWFwXykge1xuICAgICAgdmFyIHRhcmdldCA9IHRoaXMudGFyZ2V0XyA/XG4gICAgICAgIHRoaXMudGFyZ2V0XyA6IG1hcC5nZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50KCk7XG4gICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgIGlmICh0aGlzLnJlbmRlciAhPT0gVk9JRCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVyS2V5cy5wdXNoKGxpc3RlbihtYXAsXG4gICAgICAgICAgTWFwRXZlbnRUeXBlLlBPU1RSRU5ERVIsIHRoaXMucmVuZGVyLCB0aGlzKSk7XG4gICAgICB9XG4gICAgICBtYXAucmVuZGVyKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gc2V0IGEgdGFyZ2V0IGVsZW1lbnQgZm9yIHRoZSBjb250cm9sLiBJdCBoYXMgbm9cbiAgICogZWZmZWN0IGlmIGl0IGlzIGNhbGxlZCBhZnRlciB0aGUgY29udHJvbCBoYXMgYmVlbiBhZGRlZCB0byB0aGUgbWFwIChpLmUuXG4gICAqIGFmdGVyIGBzZXRNYXBgIGlzIGNhbGxlZCBvbiB0aGUgY29udHJvbCkuIElmIG5vIGB0YXJnZXRgIGlzIHNldCBpbiB0aGVcbiAgICogb3B0aW9ucyBwYXNzZWQgdG8gdGhlIGNvbnRyb2wgY29uc3RydWN0b3IgYW5kIGlmIGBzZXRUYXJnZXRgIGlzIG5vdCBjYWxsZWRcbiAgICogdGhlbiB0aGUgY29udHJvbCBpcyBhZGRlZCB0byB0aGUgbWFwJ3Mgb3ZlcmxheSBjb250YWluZXIuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8c3RyaW5nfSB0YXJnZXQgVGFyZ2V0LlxuICAgKiBAYXBpXG4gICAqL1xuICBDb250cm9sLnByb3RvdHlwZS5zZXRUYXJnZXQgPSBmdW5jdGlvbiBzZXRUYXJnZXQgKHRhcmdldCkge1xuICAgIHRoaXMudGFyZ2V0XyA9IHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnID9cbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldCkgOlxuICAgICAgdGFyZ2V0O1xuICB9O1xuXG4gIHJldHVybiBDb250cm9sO1xufShCYXNlT2JqZWN0KSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgQ29udHJvbDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29udHJvbC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY3NzXG4gKi9cblxuXG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgZm9yIGhpZGRlbiBmZWF0dXJlLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19ISURERU4gPSAnb2wtaGlkZGVuJztcblxuXG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgdGhhdCB3ZSdsbCBnaXZlIHRoZSBET00gZWxlbWVudHMgdG8gaGF2ZSB0aGVtIHNlbGVjdGFibGUuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX1NFTEVDVEFCTEUgPSAnb2wtc2VsZWN0YWJsZSc7XG5cblxuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIHRoYXQgd2UnbGwgZ2l2ZSB0aGUgRE9NIGVsZW1lbnRzIHRvIGhhdmUgdGhlbSB1bnNlbGVjdGFibGUuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX1VOU0VMRUNUQUJMRSA9ICdvbC11bnNlbGVjdGFibGUnO1xuXG5cbi8qKlxuICogVGhlIENTUyBjbGFzcyBmb3IgdW5zdXBwb3J0ZWQgZmVhdHVyZS5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfVU5TVVBQT1JURUQgPSAnb2wtdW5zdXBwb3J0ZWQnO1xuXG5cbi8qKlxuICogVGhlIENTUyBjbGFzcyBmb3IgY29udHJvbHMuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX0NPTlRST0wgPSAnb2wtY29udHJvbCc7XG5cblxuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIHRoYXQgd2UnbGwgZ2l2ZSB0aGUgRE9NIGVsZW1lbnRzIHRoYXQgYXJlIGNvbGxhcHNlZCwgaS5lLlxuICogdG8gdGhvc2UgZWxlbWVudHMgd2hpY2ggdXN1YWxseSBjYW4gYmUgZXhwYW5kZWQuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX0NPTExBUFNFRCA9ICdvbC1jb2xsYXBzZWQnO1xuXG5cbi8qKlxuICogR2V0IHRoZSBsaXN0IG9mIGZvbnQgZmFtaWxpZXMgZnJvbSBhIGZvbnQgc3BlYy4gIE5vdGUgdGhhdCB0aGlzIGRvZXNuJ3Qgd29ya1xuICogZm9yIGZvbnQgZmFtaWxpZXMgdGhhdCBoYXZlIGNvbW1hcyBpbiB0aGVtLlxuICogQHBhcmFtIHtzdHJpbmd9IFRoZSBDU1MgZm9udCBwcm9wZXJ0eS5cbiAqIEByZXR1cm4ge09iamVjdDxzdHJpbmc+fSBUaGUgZm9udCBmYW1pbGllcyAob3IgbnVsbCBpZiB0aGUgaW5wdXQgc3BlYyBpcyBpbnZhbGlkKS5cbiAqL1xuZXhwb3J0IHZhciBnZXRGb250RmFtaWxpZXMgPSAoZnVuY3Rpb24oKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIGNhY2hlID0ge307XG4gIHJldHVybiBmdW5jdGlvbihmb250KSB7XG4gICAgaWYgKCFzdHlsZSkge1xuICAgICAgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKS5zdHlsZTtcbiAgICB9XG4gICAgaWYgKCEoZm9udCBpbiBjYWNoZSkpIHtcbiAgICAgIHN0eWxlLmZvbnQgPSBmb250O1xuICAgICAgdmFyIGZhbWlseSA9IHN0eWxlLmZvbnRGYW1pbHk7XG4gICAgICBzdHlsZS5mb250ID0gJyc7XG4gICAgICBpZiAoIWZhbWlseSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNhY2hlW2ZvbnRdID0gZmFtaWx5LnNwbGl0KC8sXFxzPy8pO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVbZm9udF07XG4gIH07XG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jc3MuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0xheWVyXG4gKi9cbmltcG9ydCB7bGlzdGVuLCB1bmxpc3RlbkJ5S2V5fSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7Z2V0VWlkfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7Z2V0Q2hhbmdlRXZlbnRUeXBlfSBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IEJhc2VMYXllciBmcm9tICcuL0Jhc2UuanMnO1xuaW1wb3J0IExheWVyUHJvcGVydHkgZnJvbSAnLi9Qcm9wZXJ0eS5qcyc7XG5pbXBvcnQge2Fzc2lnbn0gZnJvbSAnLi4vb2JqLmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vc291cmNlL1N0YXRlLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb3BhY2l0eT0xXSBPcGFjaXR5ICgwLCAxKS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Zpc2libGU9dHJ1ZV0gVmlzaWJpbGl0eS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGJvdW5kaW5nIGV4dGVudCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgVGhlIGxheWVyIHdpbGwgbm90IGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXhdIFRoZSB6LWluZGV4IGZvciBsYXllciByZW5kZXJpbmcuICBBdCByZW5kZXJpbmcgdGltZSwgdGhlIGxheWVyc1xuICogd2lsbCBiZSBvcmRlcmVkLCBmaXJzdCBieSBaLWluZGV4IGFuZCB0aGVuIGJ5IHBvc2l0aW9uLiBXaGVuIGB1bmRlZmluZWRgLCBhIGB6SW5kZXhgIG9mIDAgaXMgYXNzdW1lZFxuICogZm9yIGxheWVycyB0aGF0IGFyZSBhZGRlZCB0byB0aGUgbWFwJ3MgYGxheWVyc2AgY29sbGVjdGlvbiwgb3IgYEluZmluaXR5YCB3aGVuIHRoZSBsYXllcidzIGBzZXRNYXAoKWBcbiAqIG1ldGhvZCB3YXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gKGV4Y2x1c2l2ZSkgYmVsb3cgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zb3VyY2UvU291cmNlLmpzXCIpLmRlZmF1bHR9IFtzb3VyY2VdIFNvdXJjZSBmb3IgdGhpcyBsYXllci4gIElmIG5vdCBwcm92aWRlZCB0byB0aGUgY29uc3RydWN0b3IsXG4gKiB0aGUgc291cmNlIGNhbiBiZSBzZXQgYnkgY2FsbGluZyB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyI3NldFNvdXJjZSBsYXllci5zZXRTb3VyY2Uoc291cmNlKX0gYWZ0ZXJcbiAqIGNvbnN0cnVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IFttYXBdIE1hcC5cbiAqL1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHR9IGxheWVyXG4gKiBAcHJvcGVydHkge251bWJlcn0gb3BhY2l0eVxuICogQHByb3BlcnR5IHtTb3VyY2VTdGF0ZX0gc291cmNlU3RhdGVcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gdmlzaWJsZVxuICogQHByb3BlcnR5IHtib29sZWFufSBtYW5hZ2VkXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdXG4gKiBAcHJvcGVydHkge251bWJlcn0gekluZGV4XG4gKiBAcHJvcGVydHkge251bWJlcn0gbWF4UmVzb2x1dGlvblxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1pblJlc29sdXRpb25cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEEgdmlzdWFsIHJlcHJlc2VudGF0aW9uIG9mIHJhc3RlciBvciB2ZWN0b3IgbWFwIGRhdGEuXG4gKiBMYXllcnMgZ3JvdXAgdG9nZXRoZXIgdGhvc2UgcHJvcGVydGllcyB0aGF0IHBlcnRhaW4gdG8gaG93IHRoZSBkYXRhIGlzIHRvIGJlXG4gKiBkaXNwbGF5ZWQsIGlycmVzcGVjdGl2ZSBvZiB0aGUgc291cmNlIG9mIHRoYXQgZGF0YS5cbiAqXG4gKiBMYXllcnMgYXJlIHVzdWFsbHkgYWRkZWQgdG8gYSBtYXAgd2l0aCB7QGxpbmsgbW9kdWxlOm9sL01hcCNhZGRMYXllcn0uIENvbXBvbmVudHNcbiAqIGxpa2Uge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9TZWxlY3R+U2VsZWN0fSB1c2UgdW5tYW5hZ2VkIGxheWVyc1xuICogaW50ZXJuYWxseS4gVGhlc2UgdW5tYW5hZ2VkIGxheWVycyBhcmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBtYXAgdXNpbmdcbiAqIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIjc2V0TWFwfSBpbnN0ZWFkLlxuICpcbiAqIEEgZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBpcyBmaXJlZCB3aGVuIHRoZSBzdGF0ZSBvZiB0aGUgc291cmNlIGNoYW5nZXMuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4uL3JlbmRlci9FdmVudC5qc1wiKS5SZW5kZXJFdmVudFxuICovXG52YXIgTGF5ZXIgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChCYXNlTGF5ZXIpIHtcbiAgZnVuY3Rpb24gTGF5ZXIob3B0aW9ucykge1xuXG4gICAgdmFyIGJhc2VPcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICBkZWxldGUgYmFzZU9wdGlvbnMuc291cmNlO1xuXG4gICAgQmFzZUxheWVyLmNhbGwodGhpcywgYmFzZU9wdGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICovXG4gICAgdGhpcy5tYXBQcmVjb21wb3NlS2V5XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgKi9cbiAgICB0aGlzLm1hcFJlbmRlcktleV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICovXG4gICAgdGhpcy5zb3VyY2VDaGFuZ2VLZXlfID0gbnVsbDtcblxuICAgIGlmIChvcHRpb25zLm1hcCkge1xuICAgICAgdGhpcy5zZXRNYXAob3B0aW9ucy5tYXApO1xuICAgIH1cblxuICAgIGxpc3Rlbih0aGlzLFxuICAgICAgZ2V0Q2hhbmdlRXZlbnRUeXBlKExheWVyUHJvcGVydHkuU09VUkNFKSxcbiAgICAgIHRoaXMuaGFuZGxlU291cmNlUHJvcGVydHlDaGFuZ2VfLCB0aGlzKTtcblxuICAgIHZhciBzb3VyY2UgPSBvcHRpb25zLnNvdXJjZSA/IG9wdGlvbnMuc291cmNlIDogbnVsbDtcbiAgICB0aGlzLnNldFNvdXJjZShzb3VyY2UpO1xuICB9XG5cbiAgaWYgKCBCYXNlTGF5ZXIgKSBMYXllci5fX3Byb3RvX18gPSBCYXNlTGF5ZXI7XG4gIExheWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEJhc2VMYXllciAmJiBCYXNlTGF5ZXIucHJvdG90eXBlICk7XG4gIExheWVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExheWVyO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgTGF5ZXIucHJvdG90eXBlLmdldExheWVyc0FycmF5ID0gZnVuY3Rpb24gZ2V0TGF5ZXJzQXJyYXkgKG9wdF9hcnJheSkge1xuICAgIHZhciBhcnJheSA9IG9wdF9hcnJheSA/IG9wdF9hcnJheSA6IFtdO1xuICAgIGFycmF5LnB1c2godGhpcyk7XG4gICAgcmV0dXJuIGFycmF5O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgTGF5ZXIucHJvdG90eXBlLmdldExheWVyU3RhdGVzQXJyYXkgPSBmdW5jdGlvbiBnZXRMYXllclN0YXRlc0FycmF5IChvcHRfc3RhdGVzKSB7XG4gICAgdmFyIHN0YXRlcyA9IG9wdF9zdGF0ZXMgPyBvcHRfc3RhdGVzIDogW107XG4gICAgc3RhdGVzLnB1c2godGhpcy5nZXRMYXllclN0YXRlKCkpO1xuICAgIHJldHVybiBzdGF0ZXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGF5ZXIgc291cmNlLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zb3VyY2UvU291cmNlLmpzXCIpLmRlZmF1bHR9IFRoZSBsYXllciBzb3VyY2UgKG9yIGBudWxsYCBpZiBub3QgeWV0IHNldCkuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIExheWVyLnByb3RvdHlwZS5nZXRTb3VyY2UgPSBmdW5jdGlvbiBnZXRTb3VyY2UgKCkge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldChMYXllclByb3BlcnR5LlNPVVJDRSk7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vc291cmNlL1NvdXJjZS5qc1wiKS5kZWZhdWx0fSAqLyAoc291cmNlKSB8fCBudWxsXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICAqIEBpbmhlcml0RG9jXG4gICAgKi9cbiAgTGF5ZXIucHJvdG90eXBlLmdldFNvdXJjZVN0YXRlID0gZnVuY3Rpb24gZ2V0U291cmNlU3RhdGUgKCkge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldFNvdXJjZSgpO1xuICAgIHJldHVybiAhc291cmNlID8gU291cmNlU3RhdGUuVU5ERUZJTkVEIDogc291cmNlLmdldFN0YXRlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBMYXllci5wcm90b3R5cGUuaGFuZGxlU291cmNlQ2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZVNvdXJjZUNoYW5nZV8gKCkge1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTGF5ZXIucHJvdG90eXBlLmhhbmRsZVNvdXJjZVByb3BlcnR5Q2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZVNvdXJjZVByb3BlcnR5Q2hhbmdlXyAoKSB7XG4gICAgaWYgKHRoaXMuc291cmNlQ2hhbmdlS2V5Xykge1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnNvdXJjZUNoYW5nZUtleV8pO1xuICAgICAgdGhpcy5zb3VyY2VDaGFuZ2VLZXlfID0gbnVsbDtcbiAgICB9XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMuZ2V0U291cmNlKCk7XG4gICAgaWYgKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2VDaGFuZ2VLZXlfID0gbGlzdGVuKHNvdXJjZSxcbiAgICAgICAgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVTb3VyY2VDaGFuZ2VfLCB0aGlzKTtcbiAgICB9XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGxheWVyIHRvIGJlIHJlbmRlcmVkIG9uIHRvcCBvZiBvdGhlciBsYXllcnMgb24gYSBtYXAuIFRoZSBtYXAgd2lsbFxuICAgKiBub3QgbWFuYWdlIHRoaXMgbGF5ZXIgaW4gaXRzIGxheWVycyBjb2xsZWN0aW9uLCBhbmQgdGhlIGNhbGxiYWNrIGluXG4gICAqIHtAbGluayBtb2R1bGU6b2wvTWFwI2ZvckVhY2hMYXllckF0UGl4ZWx9IHdpbGwgcmVjZWl2ZSBgbnVsbGAgYXMgbGF5ZXIuIFRoaXNcbiAgICogaXMgdXNlZnVsIGZvciB0ZW1wb3JhcnkgbGF5ZXJzLiBUbyByZW1vdmUgYW4gdW5tYW5hZ2VkIGxheWVyIGZyb20gdGhlIG1hcCxcbiAgICogdXNlIGAjc2V0TWFwKG51bGwpYC5cbiAgICpcbiAgICogVG8gYWRkIHRoZSBsYXllciB0byBhIG1hcCBhbmQgaGF2ZSBpdCBtYW5hZ2VkIGJ5IHRoZSBtYXAsIHVzZVxuICAgKiB7QGxpbmsgbW9kdWxlOm9sL01hcCNhZGRMYXllcn0gaW5zdGVhZC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICogQGFwaVxuICAgKi9cbiAgTGF5ZXIucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIHNldE1hcCAobWFwKSB7XG4gICAgaWYgKHRoaXMubWFwUHJlY29tcG9zZUtleV8pIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5tYXBQcmVjb21wb3NlS2V5Xyk7XG4gICAgICB0aGlzLm1hcFByZWNvbXBvc2VLZXlfID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKCFtYXApIHtcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tYXBSZW5kZXJLZXlfKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMubWFwUmVuZGVyS2V5Xyk7XG4gICAgICB0aGlzLm1hcFJlbmRlcktleV8gPSBudWxsO1xuICAgIH1cbiAgICBpZiAobWFwKSB7XG4gICAgICB0aGlzLm1hcFByZWNvbXBvc2VLZXlfID0gbGlzdGVuKG1hcCwgUmVuZGVyRXZlbnRUeXBlLlBSRUNPTVBPU0UsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICB2YXIgcmVuZGVyRXZlbnQgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL3JlbmRlci9FdmVudC5qc1wiKS5kZWZhdWx0fSAqLyAoZXZ0KTtcbiAgICAgICAgdmFyIGxheWVyU3RhdGUgPSB0aGlzLmdldExheWVyU3RhdGUoKTtcbiAgICAgICAgbGF5ZXJTdGF0ZS5tYW5hZ2VkID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmdldFpJbmRleCgpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBsYXllclN0YXRlLnpJbmRleCA9IEluZmluaXR5O1xuICAgICAgICB9XG4gICAgICAgIHJlbmRlckV2ZW50LmZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheS5wdXNoKGxheWVyU3RhdGUpO1xuICAgICAgICByZW5kZXJFdmVudC5mcmFtZVN0YXRlLmxheWVyU3RhdGVzW2dldFVpZCh0aGlzKV0gPSBsYXllclN0YXRlO1xuICAgICAgfSwgdGhpcyk7XG4gICAgICB0aGlzLm1hcFJlbmRlcktleV8gPSBsaXN0ZW4odGhpcywgRXZlbnRUeXBlLkNIQU5HRSwgbWFwLnJlbmRlciwgbWFwKTtcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBsYXllciBzb3VyY2UuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc291cmNlL1NvdXJjZS5qc1wiKS5kZWZhdWx0fSBzb3VyY2UgVGhlIGxheWVyIHNvdXJjZS5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgTGF5ZXIucHJvdG90eXBlLnNldFNvdXJjZSA9IGZ1bmN0aW9uIHNldFNvdXJjZSAoc291cmNlKSB7XG4gICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UsIHNvdXJjZSk7XG4gIH07XG5cbiAgcmV0dXJuIExheWVyO1xufShCYXNlTGF5ZXIpKTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGxheWVyIGlzIHZpc2libGUsIGFuZCBpZiB0aGUgcGFzc2VkIHJlc29sdXRpb24gaXNcbiAqIGJldHdlZW4gdGhlIGxheWVyJ3MgbWluUmVzb2x1dGlvbiBhbmQgbWF4UmVzb2x1dGlvbi4gVGhlIGNvbXBhcmlzb24gaXNcbiAqIGluY2x1c2l2ZSBmb3IgYG1pblJlc29sdXRpb25gIGFuZCBleGNsdXNpdmUgZm9yIGBtYXhSZXNvbHV0aW9uYC5cbiAqIEBwYXJhbSB7U3RhdGV9IGxheWVyU3RhdGUgTGF5ZXIgc3RhdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGxheWVyIGlzIHZpc2libGUgYXQgdGhlIGdpdmVuIHJlc29sdXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2aXNpYmxlQXRSZXNvbHV0aW9uKGxheWVyU3RhdGUsIHJlc29sdXRpb24pIHtcbiAgcmV0dXJuIGxheWVyU3RhdGUudmlzaWJsZSAmJiByZXNvbHV0aW9uID49IGxheWVyU3RhdGUubWluUmVzb2x1dGlvbiAmJlxuICAgICAgcmVzb2x1dGlvbiA8IGxheWVyU3RhdGUubWF4UmVzb2x1dGlvbjtcbn1cblxuXG5leHBvcnQgZGVmYXVsdCBMYXllcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGF5ZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2wvQXR0cmlidXRpb25cbiAqL1xuaW1wb3J0IHtlcXVhbHN9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCBDb250cm9sIGZyb20gJy4vQ29udHJvbC5qcyc7XG5pbXBvcnQge0NMQVNTX0NPTlRST0wsIENMQVNTX1VOU0VMRUNUQUJMRSwgQ0xBU1NfQ09MTEFQU0VEfSBmcm9tICcuLi9jc3MuanMnO1xuaW1wb3J0IHtyZW1vdmVDaGlsZHJlbiwgcmVwbGFjZU5vZGV9IGZyb20gJy4uL2RvbS5qcyc7XG5pbXBvcnQge2xpc3Rlbn0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge3Zpc2libGVBdFJlc29sdXRpb259IGZyb20gJy4uL2xheWVyL0xheWVyLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1hdHRyaWJ1dGlvbiddIENTUyBjbGFzcyBuYW1lLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91XG4gKiB3YW50IHRoZSBjb250cm9sIHRvIGJlIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzXG4gKiB2aWV3cG9ydC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbGxhcHNpYmxlXSBTcGVjaWZ5IGlmIGF0dHJpYnV0aW9ucyBjYW5cbiAqIGJlIGNvbGxhcHNlZC4gSWYgbm90IHNwZWNpZmllZCwgc291cmNlcyBjb250cm9sIHRoaXMgYmVoYXZpb3Igd2l0aCB0aGVpclxuICogYGF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlYCBzZXR0aW5nLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29sbGFwc2VkPXRydWVdIFNwZWNpZnkgaWYgYXR0cmlidXRpb25zIHNob3VsZFxuICogYmUgY29sbGFwc2VkIGF0IHN0YXJ0dXAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3RpcExhYmVsPSdBdHRyaWJ1dGlvbnMnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIGJ1dHRvbiB0aXAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2xhYmVsPSdpJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZVxuICogY29sbGFwc2VkIGF0dHJpYnV0aW9ucyBidXR0b24uXG4gKiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEhUTUxFbGVtZW50fSBbY29sbGFwc2VMYWJlbD0nwrsnXSBUZXh0IGxhYmVsIHRvIHVzZVxuICogZm9yIHRoZSBleHBhbmRlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHQpfSBbcmVuZGVyXSBGdW5jdGlvbiBjYWxsZWQgd2hlblxuICogdGhlIGNvbnRyb2wgc2hvdWxkIGJlIHJlLXJlbmRlcmVkLiBUaGlzIGlzIGNhbGxlZCBpbiBhIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgXG4gKiBjYWxsYmFjay5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ29udHJvbCB0byBzaG93IGFsbCB0aGUgYXR0cmlidXRpb25zIGFzc29jaWF0ZWQgd2l0aCB0aGUgbGF5ZXIgc291cmNlc1xuICogaW4gdGhlIG1hcC4gVGhpcyBjb250cm9sIGlzIG9uZSBvZiB0aGUgZGVmYXVsdCBjb250cm9scyBpbmNsdWRlZCBpbiBtYXBzLlxuICogQnkgZGVmYXVsdCBpdCB3aWxsIHNob3cgaW4gdGhlIGJvdHRvbSByaWdodCBwb3J0aW9uIG9mIHRoZSBtYXAsIGJ1dCB0aGlzIGNhblxuICogYmUgY2hhbmdlZCBieSB1c2luZyBhIGNzcyBzZWxlY3RvciBmb3IgYC5vbC1hdHRyaWJ1dGlvbmAuXG4gKlxuICogQGFwaVxuICovXG52YXIgQXR0cmlidXRpb24gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChDb250cm9sKSB7XG4gIGZ1bmN0aW9uIEF0dHJpYnV0aW9uKG9wdF9vcHRpb25zKSB7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcblxuICAgIENvbnRyb2wuY2FsbCh0aGlzLCB7XG4gICAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgIHJlbmRlcjogb3B0aW9ucy5yZW5kZXIgfHwgcmVuZGVyLFxuICAgICAgdGFyZ2V0OiBvcHRpb25zLnRhcmdldFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy51bEVsZW1lbnRfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5jb2xsYXBzZWRfID0gb3B0aW9ucy5jb2xsYXBzZWQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGFwc2VkIDogdHJ1ZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5vdmVycmlkZUNvbGxhcHNpYmxlXyA9IG9wdGlvbnMuY29sbGFwc2libGUgIT09IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5jb2xsYXBzaWJsZV8gPSBvcHRpb25zLmNvbGxhcHNpYmxlICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0aW9ucy5jb2xsYXBzaWJsZSA6IHRydWU7XG5cbiAgICBpZiAoIXRoaXMuY29sbGFwc2libGVfKSB7XG4gICAgICB0aGlzLmNvbGxhcHNlZF8gPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc05hbWUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xhc3NOYW1lIDogJ29sLWF0dHJpYnV0aW9uJztcblxuICAgIHZhciB0aXBMYWJlbCA9IG9wdGlvbnMudGlwTGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGlwTGFiZWwgOiAnQXR0cmlidXRpb25zJztcblxuICAgIHZhciBjb2xsYXBzZUxhYmVsID0gb3B0aW9ucy5jb2xsYXBzZUxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxhcHNlTGFiZWwgOiAnXFx1MDBCQic7XG5cbiAgICBpZiAodHlwZW9mIGNvbGxhcHNlTGFiZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvKipcbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgKi9cbiAgICAgIHRoaXMuY29sbGFwc2VMYWJlbF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICB0aGlzLmNvbGxhcHNlTGFiZWxfLnRleHRDb250ZW50ID0gY29sbGFwc2VMYWJlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb2xsYXBzZUxhYmVsXyA9IGNvbGxhcHNlTGFiZWw7XG4gICAgfVxuXG4gICAgdmFyIGxhYmVsID0gb3B0aW9ucy5sYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5sYWJlbCA6ICdpJztcblxuICAgIGlmICh0eXBlb2YgbGFiZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvKipcbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgKi9cbiAgICAgIHRoaXMubGFiZWxfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgdGhpcy5sYWJlbF8udGV4dENvbnRlbnQgPSBsYWJlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sYWJlbF8gPSBsYWJlbDtcbiAgICB9XG5cblxuICAgIHZhciBhY3RpdmVMYWJlbCA9ICh0aGlzLmNvbGxhcHNpYmxlXyAmJiAhdGhpcy5jb2xsYXBzZWRfKSA/XG4gICAgICB0aGlzLmNvbGxhcHNlTGFiZWxfIDogdGhpcy5sYWJlbF87XG4gICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgYnV0dG9uLnRpdGxlID0gdGlwTGFiZWw7XG4gICAgYnV0dG9uLmFwcGVuZENoaWxkKGFjdGl2ZUxhYmVsKTtcblxuICAgIGxpc3RlbihidXR0b24sIEV2ZW50VHlwZS5DTElDSywgdGhpcy5oYW5kbGVDbGlja18sIHRoaXMpO1xuXG4gICAgdmFyIGNzc0NsYXNzZXMgPSBjbGFzc05hbWUgKyAnICcgKyBDTEFTU19VTlNFTEVDVEFCTEUgKyAnICcgKyBDTEFTU19DT05UUk9MICtcbiAgICAgICAgKHRoaXMuY29sbGFwc2VkXyAmJiB0aGlzLmNvbGxhcHNpYmxlXyA/ICcgJyArIENMQVNTX0NPTExBUFNFRCA6ICcnKSArXG4gICAgICAgICh0aGlzLmNvbGxhcHNpYmxlXyA/ICcnIDogJyBvbC11bmNvbGxhcHNpYmxlJyk7XG4gICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSBjc3NDbGFzc2VzO1xuICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy51bEVsZW1lbnRfKTtcbiAgICBlbGVtZW50LmFwcGVuZENoaWxkKGJ1dHRvbik7XG5cbiAgICAvKipcbiAgICAgKiBBIGxpc3Qgb2YgY3VycmVudGx5IHJlbmRlcmVkIHJlc29sdXRpb25zLlxuICAgICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZEF0dHJpYnV0aW9uc18gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdHJ1ZTtcblxuICB9XG5cbiAgaWYgKCBDb250cm9sICkgQXR0cmlidXRpb24uX19wcm90b19fID0gQ29udHJvbDtcbiAgQXR0cmlidXRpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggQ29udHJvbCAmJiBDb250cm9sLnByb3RvdHlwZSApO1xuICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBdHRyaWJ1dGlvbjtcblxuICAvKipcbiAgICogQ29sbGVjdCBhIGxpc3Qgb2YgdmlzaWJsZSBhdHRyaWJ1dGlvbnMgYW5kIHNldCB0aGUgY29sbGFwc2libGUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IEF0dHJpYnV0aW9ucy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5jb2xsZWN0U291cmNlQXR0cmlidXRpb25zXyA9IGZ1bmN0aW9uIGNvbGxlY3RTb3VyY2VBdHRyaWJ1dGlvbnNfIChmcmFtZVN0YXRlKSB7XG4gICAgLyoqXG4gICAgICogVXNlZCB0byBkZXRlcm1pbmUgaWYgYW4gYXR0cmlidXRpb24gYWxyZWFkeSBleGlzdHMuXG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAgICAgKi9cbiAgICB2YXIgbG9va3VwID0ge307XG5cbiAgICAvKipcbiAgICAgKiBBIGxpc3Qgb2YgdmlzaWJsZSBhdHRyaWJ1dGlvbnMuXG4gICAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAgICovXG4gICAgdmFyIHZpc2libGVBdHRyaWJ1dGlvbnMgPSBbXTtcblxuICAgIHZhciBsYXllclN0YXRlc0FycmF5ID0gZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5O1xuICAgIHZhciByZXNvbHV0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucmVzb2x1dGlvbjtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsYXllclN0YXRlc0FycmF5Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHZhciBsYXllclN0YXRlID0gbGF5ZXJTdGF0ZXNBcnJheVtpXTtcbiAgICAgIGlmICghdmlzaWJsZUF0UmVzb2x1dGlvbihsYXllclN0YXRlLCByZXNvbHV0aW9uKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNvdXJjZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gKi8gKGxheWVyU3RhdGUubGF5ZXIpLmdldFNvdXJjZSgpO1xuICAgICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBhdHRyaWJ1dGlvbkdldHRlciA9IHNvdXJjZS5nZXRBdHRyaWJ1dGlvbnMoKTtcbiAgICAgIGlmICghYXR0cmlidXRpb25HZXR0ZXIpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBhdHRyaWJ1dGlvbnMgPSBhdHRyaWJ1dGlvbkdldHRlcihmcmFtZVN0YXRlKTtcbiAgICAgIGlmICghYXR0cmlidXRpb25zKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMub3ZlcnJpZGVDb2xsYXBzaWJsZV8gJiYgc291cmNlLmdldEF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlKCkgPT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuc2V0Q29sbGFwc2libGUoZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhdHRyaWJ1dGlvbnMpKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGF0dHJpYnV0aW9ucy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgaWYgKCEoYXR0cmlidXRpb25zW2pdIGluIGxvb2t1cCkpIHtcbiAgICAgICAgICAgIHZpc2libGVBdHRyaWJ1dGlvbnMucHVzaChhdHRyaWJ1dGlvbnNbal0pO1xuICAgICAgICAgICAgbG9va3VwW2F0dHJpYnV0aW9uc1tqXV0gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCEoYXR0cmlidXRpb25zIGluIGxvb2t1cCkpIHtcbiAgICAgICAgICB2aXNpYmxlQXR0cmlidXRpb25zLnB1c2goYXR0cmlidXRpb25zKTtcbiAgICAgICAgICBsb29rdXBbYXR0cmlidXRpb25zXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZpc2libGVBdHRyaWJ1dGlvbnM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKi9cbiAgQXR0cmlidXRpb24ucHJvdG90eXBlLnVwZGF0ZUVsZW1lbnRfID0gZnVuY3Rpb24gdXBkYXRlRWxlbWVudF8gKGZyYW1lU3RhdGUpIHtcbiAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgIGlmICh0aGlzLnJlbmRlcmVkVmlzaWJsZV8pIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlXyA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBhdHRyaWJ1dGlvbnMgPSB0aGlzLmNvbGxlY3RTb3VyY2VBdHRyaWJ1dGlvbnNfKGZyYW1lU3RhdGUpO1xuXG4gICAgdmFyIHZpc2libGUgPSBhdHRyaWJ1dGlvbnMubGVuZ3RoID4gMDtcbiAgICBpZiAodGhpcy5yZW5kZXJlZFZpc2libGVfICE9IHZpc2libGUpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gdmlzaWJsZSA/ICcnIDogJ25vbmUnO1xuICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdmlzaWJsZTtcbiAgICB9XG5cbiAgICBpZiAoZXF1YWxzKGF0dHJpYnV0aW9ucywgdGhpcy5yZW5kZXJlZEF0dHJpYnV0aW9uc18pKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmVtb3ZlQ2hpbGRyZW4odGhpcy51bEVsZW1lbnRfKTtcblxuICAgIC8vIGFwcGVuZCB0aGUgYXR0cmlidXRpb25zXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYXR0cmlidXRpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gYXR0cmlidXRpb25zW2ldO1xuICAgICAgdGhpcy51bEVsZW1lbnRfLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIHRoaXMucmVuZGVyZWRBdHRyaWJ1dGlvbnNfID0gYXR0cmlidXRpb25zO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBoYW5kbGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5oYW5kbGVDbGlja18gPSBmdW5jdGlvbiBoYW5kbGVDbGlja18gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLmhhbmRsZVRvZ2dsZV8oKTtcbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5oYW5kbGVUb2dnbGVfID0gZnVuY3Rpb24gaGFuZGxlVG9nZ2xlXyAoKSB7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoQ0xBU1NfQ09MTEFQU0VEKTtcbiAgICBpZiAodGhpcy5jb2xsYXBzZWRfKSB7XG4gICAgICByZXBsYWNlTm9kZSh0aGlzLmNvbGxhcHNlTGFiZWxfLCB0aGlzLmxhYmVsXyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcGxhY2VOb2RlKHRoaXMubGFiZWxfLCB0aGlzLmNvbGxhcHNlTGFiZWxfKTtcbiAgICB9XG4gICAgdGhpcy5jb2xsYXBzZWRfID0gIXRoaXMuY29sbGFwc2VkXztcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgYXR0cmlidXRpb24gaXMgY29sbGFwc2libGUsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2libGUuXG4gICAqIEBhcGlcbiAgICovXG4gIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5nZXRDb2xsYXBzaWJsZSA9IGZ1bmN0aW9uIGdldENvbGxhcHNpYmxlICgpIHtcbiAgICByZXR1cm4gdGhpcy5jb2xsYXBzaWJsZV87XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB3aGV0aGVyIHRoZSBhdHRyaWJ1dGlvbiBzaG91bGQgYmUgY29sbGFwc2libGUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gY29sbGFwc2libGUgVHJ1ZSBpZiB0aGUgd2lkZ2V0IGlzIGNvbGxhcHNpYmxlLlxuICAgKiBAYXBpXG4gICAqL1xuICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuc2V0Q29sbGFwc2libGUgPSBmdW5jdGlvbiBzZXRDb2xsYXBzaWJsZSAoY29sbGFwc2libGUpIHtcbiAgICBpZiAodGhpcy5jb2xsYXBzaWJsZV8gPT09IGNvbGxhcHNpYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuY29sbGFwc2libGVfID0gY29sbGFwc2libGU7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ29sLXVuY29sbGFwc2libGUnKTtcbiAgICBpZiAoIWNvbGxhcHNpYmxlICYmIHRoaXMuY29sbGFwc2VkXykge1xuICAgICAgdGhpcy5oYW5kbGVUb2dnbGVfKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDb2xsYXBzZSBvciBleHBhbmQgdGhlIGF0dHJpYnV0aW9uIGFjY29yZGluZyB0byB0aGUgcGFzc2VkIHBhcmFtZXRlci4gV2lsbFxuICAgKiBub3QgZG8gYW55dGhpbmcgaWYgdGhlIGF0dHJpYnV0aW9uIGlzbid0IGNvbGxhcHNpYmxlIG9yIGlmIHRoZSBjdXJyZW50XG4gICAqIGNvbGxhcHNlZCBzdGF0ZSBpcyBhbHJlYWR5IHRoZSBvbmUgcmVxdWVzdGVkLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbGxhcHNlZCBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2VkLlxuICAgKiBAYXBpXG4gICAqL1xuICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuc2V0Q29sbGFwc2VkID0gZnVuY3Rpb24gc2V0Q29sbGFwc2VkIChjb2xsYXBzZWQpIHtcbiAgICBpZiAoIXRoaXMuY29sbGFwc2libGVfIHx8IHRoaXMuY29sbGFwc2VkXyA9PT0gY29sbGFwc2VkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaGFuZGxlVG9nZ2xlXygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gYHRydWVgIHdoZW4gdGhlIGF0dHJpYnV0aW9uIGlzIGN1cnJlbnRseSBjb2xsYXBzZWQgb3IgYGZhbHNlYFxuICAgKiBvdGhlcndpc2UuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHdpZGdldCBpcyBjb2xsYXBzZWQuXG4gICAqIEBhcGlcbiAgICovXG4gIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5nZXRDb2xsYXBzZWQgPSBmdW5jdGlvbiBnZXRDb2xsYXBzZWQgKCkge1xuICAgIHJldHVybiB0aGlzLmNvbGxhcHNlZF87XG4gIH07XG5cbiAgcmV0dXJuIEF0dHJpYnV0aW9uO1xufShDb250cm9sKSk7XG5cblxuLyoqXG4gKiBVcGRhdGUgdGhlIGF0dHJpYnV0aW9uIGVsZW1lbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEV2ZW50IE1hcCBldmVudC5cbiAqIEB0aGlzIHtBdHRyaWJ1dGlvbn1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihtYXBFdmVudCkge1xuICB0aGlzLnVwZGF0ZUVsZW1lbnRfKG1hcEV2ZW50LmZyYW1lU3RhdGUpO1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IEF0dHJpYnV0aW9uO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdHRyaWJ1dGlvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC9Sb3RhdGVcbiAqL1xuaW1wb3J0IENvbnRyb2wgZnJvbSAnLi9Db250cm9sLmpzJztcbmltcG9ydCB7Q0xBU1NfQ09OVFJPTCwgQ0xBU1NfSElEREVOLCBDTEFTU19VTlNFTEVDVEFCTEV9IGZyb20gJy4uL2Nzcy5qcyc7XG5pbXBvcnQge2Vhc2VPdXR9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG5pbXBvcnQge2xpc3Rlbn0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtcm90YXRlJ10gQ1NTIGNsYXNzIG5hbWUuXG4gKiBAcHJvcGVydHkge3N0cmluZ3xIVE1MRWxlbWVudH0gW2xhYmVsPSfih6cnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIHJvdGF0ZSBidXR0b24uXG4gKiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdGlwTGFiZWw9J1Jlc2V0IHJvdGF0aW9uJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSByb3RhdGUgdGlwLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdXRvSGlkZT10cnVlXSBIaWRlIHRoZSBjb250cm9sIHdoZW4gcm90YXRpb24gaXMgMC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdCl9IFtyZW5kZXJdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIHRoZSBjb250cm9sIHNob3VsZFxuICogYmUgcmUtcmVuZGVyZWQuIFRoaXMgaXMgY2FsbGVkIGluIGEgYHJlcXVlc3RBbmltYXRpb25GcmFtZWAgY2FsbGJhY2suXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKCl9IFtyZXNldE5vcnRoXSBGdW5jdGlvbiBjYWxsZWQgd2hlbiB0aGUgY29udHJvbCBpcyBjbGlja2VkLlxuICogVGhpcyB3aWxsIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGByZXNldE5vcnRoYC5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdSB3YW50IHRoZSBjb250cm9sIHRvIGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAncyB2aWV3cG9ydC5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBidXR0b24gY29udHJvbCB0byByZXNldCByb3RhdGlvbiB0byAwLlxuICogVG8gc3R5bGUgdGhpcyBjb250cm9sIHVzZSBjc3Mgc2VsZWN0b3IgYC5vbC1yb3RhdGVgLiBBIGAub2wtaGlkZGVuYCBjc3NcbiAqIHNlbGVjdG9yIGlzIGFkZGVkIHRvIHRoZSBidXR0b24gd2hlbiB0aGUgcm90YXRpb24gaXMgMC5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBSb3RhdGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChDb250cm9sKSB7XG4gIGZ1bmN0aW9uIFJvdGF0ZShvcHRfb3B0aW9ucykge1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICBDb250cm9sLmNhbGwodGhpcywge1xuICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICByZW5kZXI6IG9wdGlvbnMucmVuZGVyIHx8IHJlbmRlcixcbiAgICAgIHRhcmdldDogb3B0aW9ucy50YXJnZXRcbiAgICB9KTtcblxuICAgIHZhciBjbGFzc05hbWUgPSBvcHRpb25zLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnb2wtcm90YXRlJztcblxuICAgIHZhciBsYWJlbCA9IG9wdGlvbnMubGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubGFiZWwgOiAnXFx1MjFFNyc7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmxhYmVsXyA9IG51bGw7XG5cbiAgICBpZiAodHlwZW9mIGxhYmVsID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5sYWJlbF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICB0aGlzLmxhYmVsXy5jbGFzc05hbWUgPSAnb2wtY29tcGFzcyc7XG4gICAgICB0aGlzLmxhYmVsXy50ZXh0Q29udGVudCA9IGxhYmVsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxhYmVsXyA9IGxhYmVsO1xuICAgICAgdGhpcy5sYWJlbF8uY2xhc3NMaXN0LmFkZCgnb2wtY29tcGFzcycpO1xuICAgIH1cblxuICAgIHZhciB0aXBMYWJlbCA9IG9wdGlvbnMudGlwTGFiZWwgPyBvcHRpb25zLnRpcExhYmVsIDogJ1Jlc2V0IHJvdGF0aW9uJztcblxuICAgIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBidXR0b24uY2xhc3NOYW1lID0gY2xhc3NOYW1lICsgJy1yZXNldCc7XG4gICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICBidXR0b24udGl0bGUgPSB0aXBMYWJlbDtcbiAgICBidXR0b24uYXBwZW5kQ2hpbGQodGhpcy5sYWJlbF8pO1xuXG4gICAgbGlzdGVuKGJ1dHRvbiwgRXZlbnRUeXBlLkNMSUNLLCB0aGlzLmhhbmRsZUNsaWNrXywgdGhpcyk7XG5cbiAgICB2YXIgY3NzQ2xhc3NlcyA9IGNsYXNzTmFtZSArICcgJyArIENMQVNTX1VOU0VMRUNUQUJMRSArICcgJyArIENMQVNTX0NPTlRST0w7XG4gICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSBjc3NDbGFzc2VzO1xuICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcblxuICAgIHRoaXMuY2FsbFJlc2V0Tm9ydGhfID0gb3B0aW9ucy5yZXNldE5vcnRoID8gb3B0aW9ucy5yZXNldE5vcnRoIDogdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5hdXRvSGlkZV8gPSBvcHRpb25zLmF1dG9IaWRlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmF1dG9IaWRlIDogdHJ1ZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5yb3RhdGlvbl8gPSB1bmRlZmluZWQ7XG5cbiAgICBpZiAodGhpcy5hdXRvSGlkZV8pIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTX0hJRERFTik7XG4gICAgfVxuXG4gIH1cblxuICBpZiAoIENvbnRyb2wgKSBSb3RhdGUuX19wcm90b19fID0gQ29udHJvbDtcbiAgUm90YXRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIENvbnRyb2wgJiYgQ29udHJvbC5wcm90b3R5cGUgKTtcbiAgUm90YXRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJvdGF0ZTtcblxuICAvKipcbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBUaGUgZXZlbnQgdG8gaGFuZGxlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBSb3RhdGUucHJvdG90eXBlLmhhbmRsZUNsaWNrXyA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrXyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmICh0aGlzLmNhbGxSZXNldE5vcnRoXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmNhbGxSZXNldE5vcnRoXygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlc2V0Tm9ydGhfKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgUm90YXRlLnByb3RvdHlwZS5yZXNldE5vcnRoXyA9IGZ1bmN0aW9uIHJlc2V0Tm9ydGhfICgpIHtcbiAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgaWYgKCF2aWV3KSB7XG4gICAgICAvLyB0aGUgbWFwIGRvZXMgbm90IGhhdmUgYSB2aWV3LCBzbyB3ZSBjYW4ndCBhY3RcbiAgICAgIC8vIHVwb24gaXRcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHZpZXcuZ2V0Um90YXRpb24oKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAodGhpcy5kdXJhdGlvbl8gPiAwKSB7XG4gICAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgICAgcm90YXRpb246IDAsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb25fLFxuICAgICAgICAgIGVhc2luZzogZWFzZU91dFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZpZXcuc2V0Um90YXRpb24oMCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBSb3RhdGU7XG59KENvbnRyb2wpKTtcblxuXG4vKipcbiAqIFVwZGF0ZSB0aGUgcm90YXRlIGNvbnRyb2wgZWxlbWVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwRXZlbnQgTWFwIGV2ZW50LlxuICogQHRoaXMge1JvdGF0ZX1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihtYXBFdmVudCkge1xuICB2YXIgZnJhbWVTdGF0ZSA9IG1hcEV2ZW50LmZyYW1lU3RhdGU7XG4gIGlmICghZnJhbWVTdGF0ZSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgcm90YXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgaWYgKHJvdGF0aW9uICE9IHRoaXMucm90YXRpb25fKSB7XG4gICAgdmFyIHRyYW5zZm9ybSA9ICdyb3RhdGUoJyArIHJvdGF0aW9uICsgJ3JhZCknO1xuICAgIGlmICh0aGlzLmF1dG9IaWRlXykge1xuICAgICAgdmFyIGNvbnRhaW5zID0gdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU19ISURERU4pO1xuICAgICAgaWYgKCFjb250YWlucyAmJiByb3RhdGlvbiA9PT0gMCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19ISURERU4pO1xuICAgICAgfSBlbHNlIGlmIChjb250YWlucyAmJiByb3RhdGlvbiAhPT0gMCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU19ISURERU4pO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmxhYmVsXy5zdHlsZS5tc1RyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICB0aGlzLmxhYmVsXy5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgdGhpcy5sYWJlbF8uc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICB9XG4gIHRoaXMucm90YXRpb25fID0gcm90YXRpb247XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJvdGF0ZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Um90YXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL1pvb21cbiAqL1xuaW1wb3J0IHtsaXN0ZW59IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IENvbnRyb2wgZnJvbSAnLi9Db250cm9sLmpzJztcbmltcG9ydCB7Q0xBU1NfQ09OVFJPTCwgQ0xBU1NfVU5TRUxFQ1RBQkxFfSBmcm9tICcuLi9jc3MuanMnO1xuaW1wb3J0IHtlYXNlT3V0fSBmcm9tICcuLi9lYXNpbmcuanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtem9vbSddIENTUyBjbGFzcyBuYW1lLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFt6b29tSW5MYWJlbD0nKyddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgem9vbS1pblxuICogYnV0dG9uLiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEhUTUxFbGVtZW50fSBbem9vbU91dExhYmVsPSctJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSB6b29tLW91dCBidXR0b24uXG4gKiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbem9vbUluVGlwTGFiZWw9J1pvb20gaW4nXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIGJ1dHRvbiB0aXAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3pvb21PdXRUaXBMYWJlbD0nWm9vbSBvdXQnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIGJ1dHRvbiB0aXAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2RlbHRhPTFdIFRoZSB6b29tIGRlbHRhIGFwcGxpZWQgb24gZWFjaCBjbGljay5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdSB3YW50IHRoZSBjb250cm9sIHRvIGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAncyB2aWV3cG9ydC5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBjb250cm9sIHdpdGggMiBidXR0b25zLCBvbmUgZm9yIHpvb20gaW4gYW5kIG9uZSBmb3Igem9vbSBvdXQuXG4gKiBUaGlzIGNvbnRyb2wgaXMgb25lIG9mIHRoZSBkZWZhdWx0IGNvbnRyb2xzIG9mIGEgbWFwLiBUbyBzdHlsZSB0aGlzIGNvbnRyb2xcbiAqIHVzZSBjc3Mgc2VsZWN0b3JzIGAub2wtem9vbS1pbmAgYW5kIGAub2wtem9vbS1vdXRgLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFpvb20gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChDb250cm9sKSB7XG4gIGZ1bmN0aW9uIFpvb20ob3B0X29wdGlvbnMpIHtcblxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gICAgQ29udHJvbC5jYWxsKHRoaXMsIHtcbiAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgdGFyZ2V0OiBvcHRpb25zLnRhcmdldFxuICAgIH0pO1xuXG4gICAgdmFyIGNsYXNzTmFtZSA9IG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC16b29tJztcblxuICAgIHZhciBkZWx0YSA9IG9wdGlvbnMuZGVsdGEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZGVsdGEgOiAxO1xuXG4gICAgdmFyIHpvb21JbkxhYmVsID0gb3B0aW9ucy56b29tSW5MYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tSW5MYWJlbCA6ICcrJztcbiAgICB2YXIgem9vbU91dExhYmVsID0gb3B0aW9ucy56b29tT3V0TGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuem9vbU91dExhYmVsIDogJ1xcdTIyMTInO1xuXG4gICAgdmFyIHpvb21JblRpcExhYmVsID0gb3B0aW9ucy56b29tSW5UaXBMYWJlbCAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdGlvbnMuem9vbUluVGlwTGFiZWwgOiAnWm9vbSBpbic7XG4gICAgdmFyIHpvb21PdXRUaXBMYWJlbCA9IG9wdGlvbnMuem9vbU91dFRpcExhYmVsICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0aW9ucy56b29tT3V0VGlwTGFiZWwgOiAnWm9vbSBvdXQnO1xuXG4gICAgdmFyIGluRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGluRWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWUgKyAnLWluJztcbiAgICBpbkVsZW1lbnQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgIGluRWxlbWVudC50aXRsZSA9IHpvb21JblRpcExhYmVsO1xuICAgIGluRWxlbWVudC5hcHBlbmRDaGlsZChcbiAgICAgIHR5cGVvZiB6b29tSW5MYWJlbCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh6b29tSW5MYWJlbCkgOiB6b29tSW5MYWJlbFxuICAgICk7XG5cbiAgICBsaXN0ZW4oaW5FbGVtZW50LCBFdmVudFR5cGUuQ0xJQ0ssIHRoaXMuaGFuZGxlQ2xpY2tfLmJpbmQodGhpcywgZGVsdGEpKTtcblxuICAgIHZhciBvdXRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgb3V0RWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWUgKyAnLW91dCc7XG4gICAgb3V0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgb3V0RWxlbWVudC50aXRsZSA9IHpvb21PdXRUaXBMYWJlbDtcbiAgICBvdXRFbGVtZW50LmFwcGVuZENoaWxkKFxuICAgICAgdHlwZW9mIHpvb21PdXRMYWJlbCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh6b29tT3V0TGFiZWwpIDogem9vbU91dExhYmVsXG4gICAgKTtcblxuICAgIGxpc3RlbihvdXRFbGVtZW50LCBFdmVudFR5cGUuQ0xJQ0ssIHRoaXMuaGFuZGxlQ2xpY2tfLmJpbmQodGhpcywgLWRlbHRhKSk7XG5cbiAgICB2YXIgY3NzQ2xhc3NlcyA9IGNsYXNzTmFtZSArICcgJyArIENMQVNTX1VOU0VMRUNUQUJMRSArICcgJyArIENMQVNTX0NPTlRST0w7XG4gICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSBjc3NDbGFzc2VzO1xuICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5FbGVtZW50KTtcbiAgICBlbGVtZW50LmFwcGVuZENoaWxkKG91dEVsZW1lbnQpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcblxuICB9XG5cbiAgaWYgKCBDb250cm9sICkgWm9vbS5fX3Byb3RvX18gPSBDb250cm9sO1xuICBab29tLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIENvbnRyb2wgJiYgQ29udHJvbC5wcm90b3R5cGUgKTtcbiAgWm9vbS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBab29tO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgWm9vbSBkZWx0YS5cbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBUaGUgZXZlbnQgdG8gaGFuZGxlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBab29tLnByb3RvdHlwZS5oYW5kbGVDbGlja18gPSBmdW5jdGlvbiBoYW5kbGVDbGlja18gKGRlbHRhLCBldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy56b29tQnlEZWx0YV8oZGVsdGEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgWm9vbSBkZWx0YS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIFpvb20ucHJvdG90eXBlLnpvb21CeURlbHRhXyA9IGZ1bmN0aW9uIHpvb21CeURlbHRhXyAoZGVsdGEpIHtcbiAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgaWYgKCF2aWV3KSB7XG4gICAgICAvLyB0aGUgbWFwIGRvZXMgbm90IGhhdmUgYSB2aWV3LCBzbyB3ZSBjYW4ndCBhY3RcbiAgICAgIC8vIHVwb24gaXRcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGN1cnJlbnRSZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgaWYgKGN1cnJlbnRSZXNvbHV0aW9uKSB7XG4gICAgICB2YXIgbmV3UmVzb2x1dGlvbiA9IHZpZXcuY29uc3RyYWluUmVzb2x1dGlvbihjdXJyZW50UmVzb2x1dGlvbiwgZGVsdGEpO1xuICAgICAgaWYgKHRoaXMuZHVyYXRpb25fID4gMCkge1xuICAgICAgICBpZiAodmlldy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgIHZpZXcuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgICB9XG4gICAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgICAgcmVzb2x1dGlvbjogbmV3UmVzb2x1dGlvbixcbiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbl8sXG4gICAgICAgICAgZWFzaW5nOiBlYXNlT3V0XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmlldy5zZXRSZXNvbHV0aW9uKG5ld1Jlc29sdXRpb24pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gWm9vbTtcbn0oQ29udHJvbCkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IFpvb207XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVpvb20uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0tpbmV0aWNcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEltcGxlbWVudGF0aW9uIG9mIGluZXJ0aWFsIGRlY2VsZXJhdGlvbiBmb3IgbWFwIG1vdmVtZW50LlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIEtpbmV0aWMgPSBmdW5jdGlvbiBLaW5ldGljKGRlY2F5LCBtaW5WZWxvY2l0eSwgZGVsYXkpIHtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHRoaXMuZGVjYXlfID0gZGVjYXk7XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICB0aGlzLm1pblZlbG9jaXR5XyA9IG1pblZlbG9jaXR5O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgdGhpcy5kZWxheV8gPSBkZWxheTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAqL1xuICB0aGlzLnBvaW50c18gPSBbXTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHRoaXMuYW5nbGVfID0gMDtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHRoaXMuaW5pdGlhbFZlbG9jaXR5XyA9IDA7XG59O1xuXG4vKipcbiAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICovXG5LaW5ldGljLnByb3RvdHlwZS5iZWdpbiA9IGZ1bmN0aW9uIGJlZ2luICgpIHtcbiAgdGhpcy5wb2ludHNfLmxlbmd0aCA9IDA7XG4gIHRoaXMuYW5nbGVfID0gMDtcbiAgdGhpcy5pbml0aWFsVmVsb2NpdHlfID0gMDtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKi9cbktpbmV0aWMucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSAoeCwgeSkge1xuICB0aGlzLnBvaW50c18ucHVzaCh4LCB5LCBEYXRlLm5vdygpKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB3ZSBzaG91bGQgZG8ga2luZXRpYyBhbmltYXRpb24uXG4gKi9cbktpbmV0aWMucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uIGVuZCAoKSB7XG4gIGlmICh0aGlzLnBvaW50c18ubGVuZ3RoIDwgNikge1xuICAgIC8vIGF0IGxlYXN0IDIgcG9pbnRzIGFyZSByZXF1aXJlZCAoaS5lLiB0aGVyZSBtdXN0IGJlIGF0IGxlYXN0IDYgZWxlbWVudHNcbiAgICAvLyBpbiB0aGUgYXJyYXkpXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBkZWxheSA9IERhdGUubm93KCkgLSB0aGlzLmRlbGF5XztcbiAgdmFyIGxhc3RJbmRleCA9IHRoaXMucG9pbnRzXy5sZW5ndGggLSAzO1xuICBpZiAodGhpcy5wb2ludHNfW2xhc3RJbmRleCArIDJdIDwgZGVsYXkpIHtcbiAgICAvLyB0aGUgbGFzdCB0cmFja2VkIHBvaW50IGlzIHRvbyBvbGQsIHdoaWNoIG1lYW5zIHRoYXQgdGhlIHVzZXIgc3RvcHBlZFxuICAgIC8vIHBhbm5pbmcgYmVmb3JlIHJlbGVhc2luZyB0aGUgbWFwXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gZ2V0IHRoZSBmaXJzdCBwb2ludCB3aGljaCBzdGlsbCBmYWxscyBpbnRvIHRoZSBkZWxheSB0aW1lXG4gIHZhciBmaXJzdEluZGV4ID0gbGFzdEluZGV4IC0gMztcbiAgd2hpbGUgKGZpcnN0SW5kZXggPiAwICYmIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMl0gPiBkZWxheSkge1xuICAgIGZpcnN0SW5kZXggLT0gMztcbiAgfVxuXG4gIHZhciBkdXJhdGlvbiA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXggKyAyXSAtIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMl07XG4gIC8vIHdlIGRvbid0IHdhbnQgYSBkdXJhdGlvbiBvZiAwIChkaXZpZGUgYnkgemVybylcbiAgLy8gd2UgYWxzbyBtYWtlIHN1cmUgdGhlIHVzZXIgcGFubmVkIGZvciBhIGR1cmF0aW9uIG9mIGF0IGxlYXN0IG9uZSBmcmFtZVxuICAvLyAoMS82MHMpIHRvIGNvbXB1dGUgc2FuZSBkaXNwbGFjZW1lbnQgdmFsdWVzXG4gIGlmIChkdXJhdGlvbiA8IDEwMDAgLyA2MCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBkeCA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXhdIC0gdGhpcy5wb2ludHNfW2ZpcnN0SW5kZXhdO1xuICB2YXIgZHkgPSB0aGlzLnBvaW50c19bbGFzdEluZGV4ICsgMV0gLSB0aGlzLnBvaW50c19bZmlyc3RJbmRleCArIDFdO1xuICB0aGlzLmFuZ2xlXyA9IE1hdGguYXRhbjIoZHksIGR4KTtcbiAgdGhpcy5pbml0aWFsVmVsb2NpdHlfID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KSAvIGR1cmF0aW9uO1xuICByZXR1cm4gdGhpcy5pbml0aWFsVmVsb2NpdHlfID4gdGhpcy5taW5WZWxvY2l0eV87XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge251bWJlcn0gVG90YWwgZGlzdGFuY2UgdHJhdmVsbGVkIChwaXhlbHMpLlxuICovXG5LaW5ldGljLnByb3RvdHlwZS5nZXREaXN0YW5jZSA9IGZ1bmN0aW9uIGdldERpc3RhbmNlICgpIHtcbiAgcmV0dXJuICh0aGlzLm1pblZlbG9jaXR5XyAtIHRoaXMuaW5pdGlhbFZlbG9jaXR5XykgLyB0aGlzLmRlY2F5Xztcbn07XG5cbi8qKlxuICogQHJldHVybiB7bnVtYmVyfSBBbmdsZSBvZiB0aGUga2luZXRpYyBwYW5uaW5nIGFuaW1hdGlvbiAocmFkaWFucykuXG4gKi9cbktpbmV0aWMucHJvdG90eXBlLmdldEFuZ2xlID0gZnVuY3Rpb24gZ2V0QW5nbGUgKCkge1xuICByZXR1cm4gdGhpcy5hbmdsZV87XG59O1xuXG5leHBvcnQgZGVmYXVsdCBLaW5ldGljO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1LaW5ldGljLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Qcm9wZXJ0eVxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBBQ1RJVkU6ICdhY3RpdmUnXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9wZXJ0eS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb25cbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCB7ZWFzZU91dCwgbGluZWFyfSBmcm9tICcuLi9lYXNpbmcuanMnO1xuaW1wb3J0IEludGVyYWN0aW9uUHJvcGVydHkgZnJvbSAnLi9Qcm9wZXJ0eS5qcyc7XG5pbXBvcnQge2NsYW1wfSBmcm9tICcuLi9tYXRoLmpzJztcblxuXG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggY29uZmlnIG9wdGlvbnMgZm9yIGludGVyYWN0aW9ucy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEludGVyYWN0aW9uT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gaGFuZGxlRXZlbnRcbiAqIE1ldGhvZCBjYWxsZWQgYnkgdGhlIG1hcCB0byBub3RpZnkgdGhlIGludGVyYWN0aW9uIHRoYXQgYSBicm93c2VyIGV2ZW50IHdhc1xuICogZGlzcGF0Y2hlZCB0byB0aGUgbWFwLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBwcm9wYWdhdGlvbiBvZlxuICogdGhlIGV2ZW50IHRvIG90aGVyIGludGVyYWN0aW9ucyBpbiB0aGUgbWFwJ3MgaW50ZXJhY3Rpb25zIGNoYWluIHdpbGwgYmVcbiAqIHByZXZlbnRlZCAodGhpcyBpbmNsdWRlcyBmdW5jdGlvbnMgd2l0aCBubyBleHBsaWNpdCByZXR1cm4pLlxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBVc2VyIGFjdGlvbnMgdGhhdCBjaGFuZ2UgdGhlIHN0YXRlIG9mIHRoZSBtYXAuIFNvbWUgYXJlIHNpbWlsYXIgdG8gY29udHJvbHMsXG4gKiBidXQgYXJlIG5vdCBhc3NvY2lhdGVkIHdpdGggYSBET00gZWxlbWVudC5cbiAqIEZvciBleGFtcGxlLCB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbX5LZXlib2FyZFpvb219IGlzXG4gKiBmdW5jdGlvbmFsbHkgdGhlIHNhbWUgYXMge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX0sIGJ1dCB0cmlnZ2VyZWRcbiAqIGJ5IGEga2V5Ym9hcmQgZXZlbnQgbm90IGEgYnV0dG9uIGVsZW1lbnQgZXZlbnQuXG4gKiBBbHRob3VnaCBpbnRlcmFjdGlvbnMgZG8gbm90IGhhdmUgYSBET00gZWxlbWVudCwgc29tZSBvZiB0aGVtIGRvIHJlbmRlclxuICogdmVjdG9ycyBhbmQgc28gYXJlIHZpc2libGUgb24gdGhlIHNjcmVlbi5cbiAqIEBhcGlcbiAqL1xudmFyIEludGVyYWN0aW9uID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoQmFzZU9iamVjdCkge1xuICBmdW5jdGlvbiBJbnRlcmFjdGlvbihvcHRpb25zKSB7XG4gICAgQmFzZU9iamVjdC5jYWxsKHRoaXMpO1xuXG4gICAgaWYgKG9wdGlvbnMuaGFuZGxlRXZlbnQpIHtcbiAgICAgIHRoaXMuaGFuZGxlRXZlbnQgPSBvcHRpb25zLmhhbmRsZUV2ZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMubWFwXyA9IG51bGw7XG5cbiAgICB0aGlzLnNldEFjdGl2ZSh0cnVlKTtcbiAgfVxuXG4gIGlmICggQmFzZU9iamVjdCApIEludGVyYWN0aW9uLl9fcHJvdG9fXyA9IEJhc2VPYmplY3Q7XG4gIEludGVyYWN0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEJhc2VPYmplY3QgJiYgQmFzZU9iamVjdC5wcm90b3R5cGUgKTtcbiAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSW50ZXJhY3Rpb247XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoZSBpbnRlcmFjdGlvbiBpcyBjdXJyZW50bHkgYWN0aXZlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGludGVyYWN0aW9uIGlzIGFjdGl2ZSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEludGVyYWN0aW9uLnByb3RvdHlwZS5nZXRBY3RpdmUgPSBmdW5jdGlvbiBnZXRBY3RpdmUgKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge2Jvb2xlYW59ICovICh0aGlzLmdldChJbnRlcmFjdGlvblByb3BlcnR5LkFDVElWRSkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1hcCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnRlcmFjdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IE1hcC5cbiAgICogQGFwaVxuICAgKi9cbiAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLmdldE1hcCA9IGZ1bmN0aW9uIGdldE1hcCAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwXztcbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBvciBkZWFjdGl2YXRlIHRoZSBpbnRlcmFjdGlvbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBhY3RpdmUgQWN0aXZlLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBJbnRlcmFjdGlvbi5wcm90b3R5cGUuc2V0QWN0aXZlID0gZnVuY3Rpb24gc2V0QWN0aXZlIChhY3RpdmUpIHtcbiAgICB0aGlzLnNldChJbnRlcmFjdGlvblByb3BlcnR5LkFDVElWRSwgYWN0aXZlKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBpbnRlcmFjdGlvbiBmcm9tIGl0cyBjdXJyZW50IG1hcCBhbmQgYXR0YWNoIGl0IHRvIHRoZSBuZXcgbWFwLlxuICAgKiBTdWJjbGFzc2VzIG1heSBzZXQgdXAgZXZlbnQgaGFuZGxlcnMgdG8gZ2V0IG5vdGlmaWVkIGFib3V0IGNoYW5nZXMgdG9cbiAgICogdGhlIG1hcCBoZXJlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgKi9cbiAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIHNldE1hcCAobWFwKSB7XG4gICAgdGhpcy5tYXBfID0gbWFwO1xuICB9O1xuXG4gIHJldHVybiBJbnRlcmFjdGlvbjtcbn0oQmFzZU9iamVjdCkpO1xuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9IHZpZXcgVmlldy5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBkZWx0YSBEZWx0YS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2R1cmF0aW9uIER1cmF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFuKHZpZXcsIGRlbHRhLCBvcHRfZHVyYXRpb24pIHtcbiAgdmFyIGN1cnJlbnRDZW50ZXIgPSB2aWV3LmdldENlbnRlcigpO1xuICBpZiAoY3VycmVudENlbnRlcikge1xuICAgIHZhciBjZW50ZXIgPSB2aWV3LmNvbnN0cmFpbkNlbnRlcihcbiAgICAgIFtjdXJyZW50Q2VudGVyWzBdICsgZGVsdGFbMF0sIGN1cnJlbnRDZW50ZXJbMV0gKyBkZWx0YVsxXV0pO1xuICAgIGlmIChvcHRfZHVyYXRpb24pIHtcbiAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgIGR1cmF0aW9uOiBvcHRfZHVyYXRpb24sXG4gICAgICAgIGVhc2luZzogbGluZWFyLFxuICAgICAgICBjZW50ZXI6IGNlbnRlclxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZpZXcuc2V0Q2VudGVyKGNlbnRlcik7XG4gICAgfVxuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1ZpZXcuanNcIikuZGVmYXVsdH0gdmlldyBWaWV3LlxuICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2FuY2hvciBBbmNob3IgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2R1cmF0aW9uIER1cmF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKHZpZXcsIHJvdGF0aW9uLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pIHtcbiAgcm90YXRpb24gPSB2aWV3LmNvbnN0cmFpblJvdGF0aW9uKHJvdGF0aW9uLCAwKTtcbiAgcm90YXRlV2l0aG91dENvbnN0cmFpbnRzKHZpZXcsIHJvdGF0aW9uLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9IHZpZXcgVmlldy5cbiAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IG9wdF9hbmNob3IgQW5jaG9yIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9kdXJhdGlvbiBEdXJhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVdpdGhvdXRDb25zdHJhaW50cyh2aWV3LCByb3RhdGlvbiwgb3B0X2FuY2hvciwgb3B0X2R1cmF0aW9uKSB7XG4gIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIGN1cnJlbnRSb3RhdGlvbiA9IHZpZXcuZ2V0Um90YXRpb24oKTtcbiAgICB2YXIgY3VycmVudENlbnRlciA9IHZpZXcuZ2V0Q2VudGVyKCk7XG4gICAgaWYgKGN1cnJlbnRSb3RhdGlvbiAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRDZW50ZXIgJiYgb3B0X2R1cmF0aW9uID4gMCkge1xuICAgICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgcm90YXRpb246IHJvdGF0aW9uLFxuICAgICAgICBhbmNob3I6IG9wdF9hbmNob3IsXG4gICAgICAgIGR1cmF0aW9uOiBvcHRfZHVyYXRpb24sXG4gICAgICAgIGVhc2luZzogZWFzZU91dFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZpZXcucm90YXRlKHJvdGF0aW9uLCBvcHRfYW5jaG9yKTtcbiAgICB9XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSB2aWV3IFZpZXcuXG4gKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbiB0byBnbyB0by5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2FuY2hvciBBbmNob3IgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2R1cmF0aW9uIER1cmF0aW9uLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGlyZWN0aW9uIFpvb21pbmcgZGlyZWN0aW9uOyA+IDAgaW5kaWNhdGVzXG4gKiAgICAgem9vbWluZyBvdXQsIGluIHdoaWNoIGNhc2UgdGhlIGNvbnN0cmFpbnRzIHN5c3RlbSB3aWxsIHNlbGVjdFxuICogICAgIHRoZSBsYXJnZXN0IG5lYXJlc3QgcmVzb2x1dGlvbjsgPCAwIGluZGljYXRlcyB6b29taW5nIGluLCBpblxuICogICAgIHdoaWNoIGNhc2UgdGhlIGNvbnN0cmFpbnRzIHN5c3RlbSB3aWxsIHNlbGVjdCB0aGUgc21hbGxlc3RcbiAqICAgICBuZWFyZXN0IHJlc29sdXRpb247ID09IDAgaW5kaWNhdGVzIHRoYXQgdGhlIHpvb21pbmcgZGlyZWN0aW9uXG4gKiAgICAgaXMgdW5rbm93bi9ub3QgcmVsZXZhbnQsIGluIHdoaWNoIGNhc2UgdGhlIGNvbnN0cmFpbnRzIHN5c3RlbVxuICogICAgIHdpbGwgc2VsZWN0IHRoZSBuZWFyZXN0IHJlc29sdXRpb24uIElmIG5vdCBkZWZpbmVkIDAgaXNcbiAqICAgICBhc3N1bWVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gem9vbSh2aWV3LCByZXNvbHV0aW9uLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24sIG9wdF9kaXJlY3Rpb24pIHtcbiAgcmVzb2x1dGlvbiA9IHZpZXcuY29uc3RyYWluUmVzb2x1dGlvbihyZXNvbHV0aW9uLCAwLCBvcHRfZGlyZWN0aW9uKTtcbiAgem9vbVdpdGhvdXRDb25zdHJhaW50cyh2aWV3LCByZXNvbHV0aW9uLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9IHZpZXcgVmlldy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBEZWx0YSBmcm9tIHByZXZpb3VzIHpvb20gbGV2ZWwuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IG9wdF9hbmNob3IgQW5jaG9yIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9kdXJhdGlvbiBEdXJhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pIHtcbiAgdmFyIGN1cnJlbnRSZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCk7XG4gIHZhciByZXNvbHV0aW9uID0gdmlldy5jb25zdHJhaW5SZXNvbHV0aW9uKGN1cnJlbnRSZXNvbHV0aW9uLCBkZWx0YSwgMCk7XG5cbiAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciByZXNvbHV0aW9ucyA9IHZpZXcuZ2V0UmVzb2x1dGlvbnMoKTtcbiAgICByZXNvbHV0aW9uID0gY2xhbXAoXG4gICAgICByZXNvbHV0aW9uLFxuICAgICAgdmlldy5nZXRNaW5SZXNvbHV0aW9uKCkgfHwgcmVzb2x1dGlvbnNbcmVzb2x1dGlvbnMubGVuZ3RoIC0gMV0sXG4gICAgICB2aWV3LmdldE1heFJlc29sdXRpb24oKSB8fCByZXNvbHV0aW9uc1swXSk7XG4gIH1cblxuICAvLyBJZiB3ZSBoYXZlIGEgY29uc3RyYWludCBvbiBjZW50ZXIsIHdlIG5lZWQgdG8gY2hhbmdlIHRoZSBhbmNob3Igc28gdGhhdCB0aGVcbiAgLy8gbmV3IGNlbnRlciBpcyB3aXRoaW4gdGhlIGV4dGVudC4gV2UgZmlyc3QgY2FsY3VsYXRlIHRoZSBuZXcgY2VudGVyLCBhcHBseVxuICAvLyB0aGUgY29uc3RyYWludCB0byBpdCwgYW5kIHRoZW4gY2FsY3VsYXRlIGJhY2sgdGhlIGFuY2hvclxuICBpZiAob3B0X2FuY2hvciAmJiByZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgJiYgcmVzb2x1dGlvbiAhPT0gY3VycmVudFJlc29sdXRpb24pIHtcbiAgICB2YXIgY3VycmVudENlbnRlciA9IHZpZXcuZ2V0Q2VudGVyKCk7XG4gICAgdmFyIGNlbnRlciA9IHZpZXcuY2FsY3VsYXRlQ2VudGVyWm9vbShyZXNvbHV0aW9uLCBvcHRfYW5jaG9yKTtcbiAgICBjZW50ZXIgPSB2aWV3LmNvbnN0cmFpbkNlbnRlcihjZW50ZXIpO1xuXG4gICAgb3B0X2FuY2hvciA9IFtcbiAgICAgIChyZXNvbHV0aW9uICogY3VycmVudENlbnRlclswXSAtIGN1cnJlbnRSZXNvbHV0aW9uICogY2VudGVyWzBdKSAvXG4gICAgICAgICAgKHJlc29sdXRpb24gLSBjdXJyZW50UmVzb2x1dGlvbiksXG4gICAgICAocmVzb2x1dGlvbiAqIGN1cnJlbnRDZW50ZXJbMV0gLSBjdXJyZW50UmVzb2x1dGlvbiAqIGNlbnRlclsxXSkgL1xuICAgICAgICAgIChyZXNvbHV0aW9uIC0gY3VycmVudFJlc29sdXRpb24pXG4gICAgXTtcbiAgfVxuXG4gIHpvb21XaXRob3V0Q29uc3RyYWludHModmlldywgcmVzb2x1dGlvbiwgb3B0X2FuY2hvciwgb3B0X2R1cmF0aW9uKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSB2aWV3IFZpZXcuXG4gKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbiB0byBnbyB0by5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2FuY2hvciBBbmNob3IgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2R1cmF0aW9uIER1cmF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gem9vbVdpdGhvdXRDb25zdHJhaW50cyh2aWV3LCByZXNvbHV0aW9uLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pIHtcbiAgaWYgKHJlc29sdXRpb24pIHtcbiAgICB2YXIgY3VycmVudFJlc29sdXRpb24gPSB2aWV3LmdldFJlc29sdXRpb24oKTtcbiAgICB2YXIgY3VycmVudENlbnRlciA9IHZpZXcuZ2V0Q2VudGVyKCk7XG4gICAgaWYgKGN1cnJlbnRSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgJiYgY3VycmVudENlbnRlciAmJlxuICAgICAgICByZXNvbHV0aW9uICE9PSBjdXJyZW50UmVzb2x1dGlvbiAmJiBvcHRfZHVyYXRpb24pIHtcbiAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgIHJlc29sdXRpb246IHJlc29sdXRpb24sXG4gICAgICAgIGFuY2hvcjogb3B0X2FuY2hvcixcbiAgICAgICAgZHVyYXRpb246IG9wdF9kdXJhdGlvbixcbiAgICAgICAgZWFzaW5nOiBlYXNlT3V0XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIGNlbnRlciA9IHZpZXcuY2FsY3VsYXRlQ2VudGVyWm9vbShyZXNvbHV0aW9uLCBvcHRfYW5jaG9yKTtcbiAgICAgICAgdmlldy5zZXRDZW50ZXIoY2VudGVyKTtcbiAgICAgIH1cbiAgICAgIHZpZXcuc2V0UmVzb2x1dGlvbihyZXNvbHV0aW9uKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSW50ZXJhY3Rpb247XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUludGVyYWN0aW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb21cbiAqL1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb24sIHt6b29tQnlEZWx0YX0gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGVsdGE9MV0gVGhlIHpvb20gZGVsdGEgYXBwbGllZCBvbiBlYWNoIGRvdWJsZSBjbGljay5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gYnkgZG91YmxlLWNsaWNraW5nIG9uIHRoZSBtYXAuXG4gKiBAYXBpXG4gKi9cbnZhciBEb3VibGVDbGlja1pvb20gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChJbnRlcmFjdGlvbikge1xuICBmdW5jdGlvbiBEb3VibGVDbGlja1pvb20ob3B0X29wdGlvbnMpIHtcbiAgICBJbnRlcmFjdGlvbi5jYWxsKHRoaXMsIHtcbiAgICAgIGhhbmRsZUV2ZW50OiBoYW5kbGVFdmVudFxuICAgIH0pO1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kZWx0YV8gPSBvcHRpb25zLmRlbHRhID8gb3B0aW9ucy5kZWx0YSA6IDE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuXG4gIH1cblxuICBpZiAoIEludGVyYWN0aW9uICkgRG91YmxlQ2xpY2tab29tLl9fcHJvdG9fXyA9IEludGVyYWN0aW9uO1xuICBEb3VibGVDbGlja1pvb20ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggSW50ZXJhY3Rpb24gJiYgSW50ZXJhY3Rpb24ucHJvdG90eXBlICk7XG4gIERvdWJsZUNsaWNrWm9vbS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBEb3VibGVDbGlja1pvb207XG5cbiAgcmV0dXJuIERvdWJsZUNsaWNrWm9vbTtcbn0oSW50ZXJhY3Rpb24pKTtcblxuXG4vKipcbiAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSAoaWYgaXQgd2FzIGFcbiAqIGRvdWJsZWNsaWNrKSBhbmQgZXZlbnR1YWxseSB6b29tcyB0aGUgbWFwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICogQHRoaXMge0RvdWJsZUNsaWNrWm9vbX1cbiAqL1xuZnVuY3Rpb24gaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0spIHtcbiAgICB2YXIgYnJvd3NlckV2ZW50ID0gLyoqIEB0eXBlIHtNb3VzZUV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIHZhciBhbmNob3IgPSBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZTtcbiAgICB2YXIgZGVsdGEgPSBicm93c2VyRXZlbnQuc2hpZnRLZXkgPyAtdGhpcy5kZWx0YV8gOiB0aGlzLmRlbHRhXztcbiAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgem9vbUJ5RGVsdGEodmlldywgZGVsdGEsIGFuY2hvciwgdGhpcy5kdXJhdGlvbl8pO1xuICAgIG1hcEJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHN0b3BFdmVudCA9IHRydWU7XG4gIH1cbiAgcmV0dXJuICFzdG9wRXZlbnQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IERvdWJsZUNsaWNrWm9vbTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RG91YmxlQ2xpY2tab29tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvY29uZGl0aW9uXG4gKi9cbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4uL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHtUUlVFLCBGQUxTRX0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7V0VCS0lULCBNQUN9IGZyb20gJy4uL2hhcy5qcyc7XG5cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGB7Ym9vbGVhbn1gLiBJZiB0aGUgY29uZGl0aW9uIGlzIG1ldCwgdHJ1ZSBzaG91bGQgYmUgcmV0dXJuZWQuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKHRoaXM6ID8sIGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gQ29uZGl0aW9uXG4gKi9cblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgYWx0LWtleSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuXG4gKiBhZGRpdGlvbmFsbHkgdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIGFsdCBrZXkgaXMgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBhbHRLZXlPbmx5ID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgcmV0dXJuIChcbiAgICBvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgIW9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgYWx0LWtleSBhbmQgc2hpZnQta2V5IGlzIHByZXNzZWQsIGBmYWxzZWAgb3RoZXJ3aXNlXG4gKiAoZS5nLiB3aGVuIGFkZGl0aW9uYWxseSB0aGUgcGxhdGZvcm0tbW9kaWZpZXIta2V5IGlzIHByZXNzZWQpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgb25seSB0aGUgYWx0IGFuZCBzaGlmdCBrZXlzIGFyZSBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGFsdFNoaWZ0S2V5c09ubHkgPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICByZXR1cm4gKFxuICAgIG9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgICBvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5KTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBtYXAgaGFzIHRoZSBmb2N1cy4gVGhpcyBjb25kaXRpb24gcmVxdWlyZXMgYSBtYXAgdGFyZ2V0XG4gKiBlbGVtZW50IHdpdGggYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSwgZS5nLiBgPGRpdiBpZD1cIm1hcFwiIHRhYmluZGV4PVwiMVwiPmAuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgZm9jdXMgPSBmdW5jdGlvbihldmVudCkge1xuICByZXR1cm4gZXZlbnQudGFyZ2V0LmdldFRhcmdldEVsZW1lbnQoKSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm4gYWx3YXlzIHRydWUuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBhbHdheXMgPSBUUlVFO1xuXG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaXMgYSBgY2xpY2tgIGV2ZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgY2xpY2tgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGNsaWNrID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLkNMSUNLO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGhhcyBhbiBcImFjdGlvblwiLXByb2R1Y2luZyBtb3VzZSBidXR0b24uXG4gKlxuICogQnkgZGVmaW5pdGlvbiwgdGhpcyBpbmNsdWRlcyBsZWZ0LWNsaWNrIG9uIHdpbmRvd3MvbGludXgsIGFuZCBsZWZ0LWNsaWNrXG4gKiB3aXRob3V0IHRoZSBjdHJsIGtleSBvbiBNYWNzLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSByZXN1bHQuXG4gKi9cbmV4cG9ydCB2YXIgbW91c2VBY3Rpb25CdXR0b24gPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge01vdXNlRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gIHJldHVybiBvcmlnaW5hbEV2ZW50LmJ1dHRvbiA9PSAwICYmXG4gICAgICAhKFdFQktJVCAmJiBNQUMgJiYgb3JpZ2luYWxFdmVudC5jdHJsS2V5KTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm4gYWx3YXlzIGZhbHNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IEZhbHNlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIG5ldmVyID0gRkFMU0U7XG5cblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBicm93c2VyIGV2ZW50IGlzIGEgYHBvaW50ZXJtb3ZlYCBldmVudCwgYGZhbHNlYFxuICogb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGJyb3dzZXIgZXZlbnQgaXMgYSBgcG9pbnRlcm1vdmVgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHBvaW50ZXJNb3ZlID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSAncG9pbnRlcm1vdmUnO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgc2luZ2xlQ2xpY2sgPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuU0lOR0xFQ0xJQ0s7XG59O1xuXG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaXMgYSBtYXAgYGRibGNsaWNrYCBldmVudCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgaXMgYSBtYXAgYGRibGNsaWNrYCBldmVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBkb3VibGVDbGljayA9IGZ1bmN0aW9uKG1hcEJyb3dzZXJFdmVudCkge1xuICByZXR1cm4gbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5EQkxDTElDSztcbn07XG5cblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG5vIG1vZGlmaWVyIGtleSAoYWx0LSwgc2hpZnQtIG9yIHBsYXRmb3JtLW1vZGlmaWVyLWtleSkgaXNcbiAqIHByZXNzZWQuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBvbmx5IGlmIHRoZXJlIG5vIG1vZGlmaWVyIGtleXMgYXJlIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgbm9Nb2RpZmllcktleXMgPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICByZXR1cm4gKFxuICAgICFvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgIW9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgcGxhdGZvcm0tbW9kaWZpZXIta2V5ICh0aGUgbWV0YS1rZXkgb24gTWFjLFxuICogY3RybC1rZXkgb3RoZXJ3aXNlKSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuIGFkZGl0aW9uYWxseVxuICogdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIHBsYXRmb3JtIG1vZGlmaWVyIGtleSBpcyBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHBsYXRmb3JtTW9kaWZpZXJLZXlPbmx5ID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgcmV0dXJuICFvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgIChNQUMgPyBvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgOiBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgIW9yaWdpbmFsRXZlbnQuc2hpZnRLZXk7XG59O1xuXG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBvbmx5IHRoZSBzaGlmdC1rZXkgaXMgcHJlc3NlZCwgYGZhbHNlYCBvdGhlcndpc2UgKGUuZy4gd2hlblxuICogYWRkaXRpb25hbGx5IHRoZSBhbHQta2V5IGlzIHByZXNzZWQpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgb25seSB0aGUgc2hpZnQga2V5IGlzIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgc2hpZnRLZXlPbmx5ID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgcmV0dXJuIChcbiAgICAhb3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAgICEob3JpZ2luYWxFdmVudC5tZXRhS2V5IHx8IG9yaWdpbmFsRXZlbnQuY3RybEtleSkgJiZcbiAgICAgIG9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIG5vdCBlZGl0YWJsZSwgaS5lLiBub3QgYSBgPGlucHV0PmAtLFxuICogYDxzZWxlY3Q+YC0gb3IgYDx0ZXh0YXJlYT5gLWVsZW1lbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgb25seSBpZiB0aGUgdGFyZ2V0IGVsZW1lbnQgaXMgbm90IGVkaXRhYmxlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHRhcmdldE5vdEVkaXRhYmxlID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciB0YXJnZXQgPSBtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudC50YXJnZXQ7XG4gIHZhciB0YWdOYW1lID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAodGFyZ2V0KS50YWdOYW1lO1xuICByZXR1cm4gKFxuICAgIHRhZ05hbWUgIT09ICdJTlBVVCcgJiZcbiAgICAgIHRhZ05hbWUgIT09ICdTRUxFQ1QnICYmXG4gICAgICB0YWdOYW1lICE9PSAnVEVYVEFSRUEnKTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBtb3VzZSBkZXZpY2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgbW91c2UgZGV2aWNlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIG1vdXNlT25seSA9IGZ1bmN0aW9uKG1hcEJyb3dzZXJFdmVudCkge1xuICB2YXIgcG9pbnRlckV2ZW50ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50XCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpLnBvaW50ZXJFdmVudDtcbiAgYXNzZXJ0KHBvaW50ZXJFdmVudCAhPT0gdW5kZWZpbmVkLCA1Nik7IC8vIG1hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudFxuICAvLyBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jd2lkbC1Qb2ludGVyRXZlbnQtcG9pbnRlclR5cGVcbiAgcmV0dXJuIHBvaW50ZXJFdmVudC5wb2ludGVyVHlwZSA9PSAnbW91c2UnO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHByaW1hcnkgcG9pbnRlciBpblxuICogY29udGFjdCB3aXRoIHRoZSBzdXJmYWNlIG9yIGlmIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiBpcyBwcmVzc2VkLlxuICogU2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI2J1dHRvbi1zdGF0ZXMuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgcHJpbWFyeSBwb2ludGVyLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHByaW1hcnlBY3Rpb24gPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgdmFyIHBvaW50ZXJFdmVudCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlclBvaW50ZXJFdmVudFwiKS5kZWZhdWx0fSAqLyAobWFwQnJvd3NlckV2ZW50KS5wb2ludGVyRXZlbnQ7XG4gIGFzc2VydChwb2ludGVyRXZlbnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgcmV0dXJuIHBvaW50ZXJFdmVudC5pc1ByaW1hcnkgJiYgcG9pbnRlckV2ZW50LmJ1dHRvbiA9PT0gMDtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmRpdGlvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUG9pbnRlclxuICovXG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCB7Z2V0VmFsdWVzfSBmcm9tICcuLi9vYmouanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHQpOmJvb2xlYW59IFtoYW5kbGVEb3duRXZlbnRdXG4gKiBGdW5jdGlvbiBoYW5kbGluZyBcImRvd25cIiBldmVudHMuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYCB0aGVuIGEgZHJhZ1xuICogc2VxdWVuY2UgaXMgc3RhcnRlZC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwQnJvd3NlclBvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0KX0gW2hhbmRsZURyYWdFdmVudF1cbiAqIEZ1bmN0aW9uIGhhbmRsaW5nIFwiZHJhZ1wiIGV2ZW50cy4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb24gXCJtb3ZlXCIgZXZlbnRzXG4gKiBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZUV2ZW50XVxuICogTWV0aG9kIGNhbGxlZCBieSB0aGUgbWFwIHRvIG5vdGlmeSB0aGUgaW50ZXJhY3Rpb24gdGhhdCBhIGJyb3dzZXIgZXZlbnQgd2FzXG4gKiBkaXNwYXRjaGVkIHRvIHRoZSBtYXAuIFRoZSBmdW5jdGlvbiBtYXkgcmV0dXJuIGBmYWxzZWAgdG8gcHJldmVudCB0aGVcbiAqIHByb3BhZ2F0aW9uIG9mIHRoZSBldmVudCB0byBvdGhlciBpbnRlcmFjdGlvbnMgaW4gdGhlIG1hcCdzIGludGVyYWN0aW9uc1xuICogY2hhaW4uXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJQb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdCl9IFtoYW5kbGVNb3ZlRXZlbnRdXG4gKiBGdW5jdGlvbiBoYW5kbGluZyBcIm1vdmVcIiBldmVudHMuIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIFwibW92ZVwiIGV2ZW50cyxcbiAqIGFsc28gZHVyaW5nIGEgZHJhZyBzZXF1ZW5jZSAoc28gZHVyaW5nIGEgZHJhZyBzZXF1ZW5jZSBib3RoIHRoZVxuICogYGhhbmRsZURyYWdFdmVudGAgZnVuY3Rpb24gYW5kIHRoaXMgZnVuY3Rpb24gYXJlIGNhbGxlZCkuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJQb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZVVwRXZlbnRdXG4gKiAgRnVuY3Rpb24gaGFuZGxpbmcgXCJ1cFwiIGV2ZW50cy4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYCB0aGVuIHRoZVxuICogY3VycmVudCBkcmFnIHNlcXVlbmNlIGlzIHN0b3BwZWQuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGJvb2xlYW4pOmJvb2xlYW59IFtzdG9wRG93bl1cbiAqIFNob3VsZCB0aGUgZG93biBldmVudCBiZSBwcm9wYWdhdGVkIHRvIG90aGVyIGludGVyYWN0aW9ucywgb3Igc2hvdWxkIGJlXG4gKiBzdG9wcGVkP1xuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIHRoYXQgY2FsbHMgdXNlci1kZWZpbmVkIGZ1bmN0aW9ucyBvbiBgZG93bmAsIGBtb3ZlYCBhbmQgYHVwYFxuICogZXZlbnRzLiBUaGlzIGNsYXNzIGFsc28gbWFuYWdlcyBcImRyYWcgc2VxdWVuY2VzXCIuXG4gKlxuICogV2hlbiB0aGUgYGhhbmRsZURvd25FdmVudGAgdXNlciBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYCBhIGRyYWcgc2VxdWVuY2UgaXNcbiAqIHN0YXJ0ZWQuIER1cmluZyBhIGRyYWcgc2VxdWVuY2UgdGhlIGBoYW5kbGVEcmFnRXZlbnRgIHVzZXIgZnVuY3Rpb24gaXNcbiAqIGNhbGxlZCBvbiBgbW92ZWAgZXZlbnRzLiBUaGUgZHJhZyBzZXF1ZW5jZSBlbmRzIHdoZW4gdGhlIGBoYW5kbGVVcEV2ZW50YFxuICogdXNlciBmdW5jdGlvbiBpcyBjYWxsZWQgYW5kIHJldHVybnMgYGZhbHNlYC5cbiAqIEBhcGlcbiAqL1xudmFyIFBvaW50ZXJJbnRlcmFjdGlvbiA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEludGVyYWN0aW9uKSB7XG4gIGZ1bmN0aW9uIFBvaW50ZXJJbnRlcmFjdGlvbihvcHRfb3B0aW9ucykge1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICBJbnRlcmFjdGlvbi5jYWxsKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9JbnRlcmFjdGlvbi5qc1wiKS5JbnRlcmFjdGlvbk9wdGlvbnN9ICovIHRoaXMsIChvcHRpb25zKSk7XG5cbiAgICBpZiAob3B0aW9ucy5oYW5kbGVEb3duRXZlbnQpIHtcbiAgICAgIHRoaXMuaGFuZGxlRG93bkV2ZW50ID0gb3B0aW9ucy5oYW5kbGVEb3duRXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuaGFuZGxlRHJhZ0V2ZW50KSB7XG4gICAgICB0aGlzLmhhbmRsZURyYWdFdmVudCA9IG9wdGlvbnMuaGFuZGxlRHJhZ0V2ZW50O1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmhhbmRsZU1vdmVFdmVudCkge1xuICAgICAgdGhpcy5oYW5kbGVNb3ZlRXZlbnQgPSBvcHRpb25zLmhhbmRsZU1vdmVFdmVudDtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5oYW5kbGVVcEV2ZW50KSB7XG4gICAgICB0aGlzLmhhbmRsZVVwRXZlbnQgPSBvcHRpb25zLmhhbmRsZVVwRXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgIHRoaXMuc3RvcERvd24gPSBvcHRpb25zLnN0b3BEb3duO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vcG9pbnRlci9Qb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdD59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnRyYWNrZWRQb2ludGVyc18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9wb2ludGVyL1BvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgdGhpcy50YXJnZXRQb2ludGVycyA9IFtdO1xuXG4gIH1cblxuICBpZiAoIEludGVyYWN0aW9uICkgUG9pbnRlckludGVyYWN0aW9uLl9fcHJvdG9fXyA9IEludGVyYWN0aW9uO1xuICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggSW50ZXJhY3Rpb24gJiYgSW50ZXJhY3Rpb24ucHJvdG90eXBlICk7XG4gIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQb2ludGVySW50ZXJhY3Rpb247XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJQb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURvd25FdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVEcmFnRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge307XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSBhbmQgbWF5IGNhbGwgaW50b1xuICAgKiBvdGhlciBmdW5jdGlvbnMsIGlmIGV2ZW50IHNlcXVlbmNlcyBsaWtlIGUuZy4gJ2RyYWcnIG9yICdkb3duLXVwJyBldGMuIGFyZVxuICAgKiBkZXRlY3RlZC5cbiAgICogQG92ZXJyaWRlXG4gICAqIEBhcGlcbiAgICovXG4gIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCEoLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpLnBvaW50ZXJFdmVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICB0aGlzLnVwZGF0ZVRyYWNrZWRQb2ludGVyc18obWFwQnJvd3NlckV2ZW50KTtcbiAgICBpZiAodGhpcy5oYW5kbGluZ0Rvd25VcFNlcXVlbmNlKSB7XG4gICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRFJBRykge1xuICAgICAgICB0aGlzLmhhbmRsZURyYWdFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgfSBlbHNlIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCkge1xuICAgICAgICB2YXIgaGFuZGxlZFVwID0gdGhpcy5oYW5kbGVVcEV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgIHRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSA9IGhhbmRsZWRVcCAmJiB0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+IDA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOKSB7XG4gICAgICAgIHZhciBoYW5kbGVkID0gdGhpcy5oYW5kbGVEb3duRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgaWYgKGhhbmRsZWQpIHtcbiAgICAgICAgICBtYXBCcm93c2VyRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPSBoYW5kbGVkO1xuICAgICAgICBzdG9wRXZlbnQgPSB0aGlzLnN0b3BEb3duKGhhbmRsZWQpO1xuICAgICAgfSBlbHNlIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJNT1ZFKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlTW92ZUV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciBtb3ZlIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVNb3ZlRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVNb3ZlRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge307XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlVXBFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIFwiZG93blwiIGV2ZW50cyBzaG91bGQgYmUgcHJvcGFnYXRlZFxuICAgKiB0byBvdGhlciBpbnRlcmFjdGlvbnMgb3Igc2hvdWxkIGJlIHN0b3BwZWQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFuZGxlZCBXYXMgdGhlIGV2ZW50IGhhbmRsZWQgYnkgdGhlIGludGVyYWN0aW9uP1xuICAgKiBAcmV0dXJuIHtib29sZWFufSBTaG91bGQgdGhlIGBkb3duYCBldmVudCBiZSBzdG9wcGVkP1xuICAgKi9cbiAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5zdG9wRG93biA9IGZ1bmN0aW9uIHN0b3BEb3duIChoYW5kbGVkKSB7XG4gICAgcmV0dXJuIGhhbmRsZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlclBvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLnVwZGF0ZVRyYWNrZWRQb2ludGVyc18gPSBmdW5jdGlvbiB1cGRhdGVUcmFja2VkUG9pbnRlcnNfIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoaXNQb2ludGVyRHJhZ2dpbmdFdmVudChtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICB2YXIgZXZlbnQgPSBtYXBCcm93c2VyRXZlbnQucG9pbnRlckV2ZW50O1xuXG4gICAgICB2YXIgaWQgPSBldmVudC5wb2ludGVySWQudG9TdHJpbmcoKTtcbiAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCkge1xuICAgICAgICBkZWxldGUgdGhpcy50cmFja2VkUG9pbnRlcnNfW2lkXTtcbiAgICAgIH0gZWxzZSBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT1cbiAgICAgICAgICBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOKSB7XG4gICAgICAgIHRoaXMudHJhY2tlZFBvaW50ZXJzX1tpZF0gPSBldmVudDtcbiAgICAgIH0gZWxzZSBpZiAoaWQgaW4gdGhpcy50cmFja2VkUG9pbnRlcnNfKSB7XG4gICAgICAgIC8vIHVwZGF0ZSBvbmx5IHdoZW4gdGhlcmUgd2FzIGEgcG9pbnRlcmRvd24gZXZlbnQgZm9yIHRoaXMgcG9pbnRlclxuICAgICAgICB0aGlzLnRyYWNrZWRQb2ludGVyc19baWRdID0gZXZlbnQ7XG4gICAgICB9XG4gICAgICB0aGlzLnRhcmdldFBvaW50ZXJzID0gZ2V0VmFsdWVzKHRoaXMudHJhY2tlZFBvaW50ZXJzXyk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBQb2ludGVySW50ZXJhY3Rpb247XG59KEludGVyYWN0aW9uKSk7XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uL3BvaW50ZXIvUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHQ+fSBwb2ludGVyRXZlbnRzIExpc3Qgb2YgZXZlbnRzLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IENlbnRyb2lkIHBpeGVsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2VudHJvaWQocG9pbnRlckV2ZW50cykge1xuICB2YXIgbGVuZ3RoID0gcG9pbnRlckV2ZW50cy5sZW5ndGg7XG4gIHZhciBjbGllbnRYID0gMDtcbiAgdmFyIGNsaWVudFkgPSAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgY2xpZW50WCArPSBwb2ludGVyRXZlbnRzW2ldLmNsaWVudFg7XG4gICAgY2xpZW50WSArPSBwb2ludGVyRXZlbnRzW2ldLmNsaWVudFk7XG4gIH1cbiAgcmV0dXJuIFtjbGllbnRYIC8gbGVuZ3RoLCBjbGllbnRZIC8gbGVuZ3RoXTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlclBvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBldmVudCBpcyBhIHBvaW50ZXJkb3duLCBwb2ludGVyZHJhZ1xuICogICAgIG9yIHBvaW50ZXJ1cCBldmVudC5cbiAqL1xuZnVuY3Rpb24gaXNQb2ludGVyRHJhZ2dpbmdFdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgdmFyIHR5cGUgPSBtYXBCcm93c2VyRXZlbnQudHlwZTtcbiAgcmV0dXJuIHR5cGUgPT09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04gfHxcbiAgICB0eXBlID09PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJEUkFHIHx8XG4gICAgdHlwZSA9PT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVA7XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgUG9pbnRlckludGVyYWN0aW9uO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb2ludGVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnUGFuXG4gKi9cbmltcG9ydCBWaWV3SGludCBmcm9tICcuLi9WaWV3SGludC5qcyc7XG5pbXBvcnQge3NjYWxlIGFzIHNjYWxlQ29vcmRpbmF0ZSwgcm90YXRlIGFzIHJvdGF0ZUNvb3JkaW5hdGUsIGFkZCBhcyBhZGRDb29yZGluYXRlfSBmcm9tICcuLi9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7ZWFzZU91dH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbmltcG9ydCB7bm9Nb2RpZmllcktleXN9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHtGQUxTRX0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHtjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVyc30gZnJvbSAnLi9Qb2ludGVyLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGEgYm9vbGVhblxuICogdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb25+bm9Nb2RpZmllcktleXN9LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9LaW5ldGljLmpzXCIpLmRlZmF1bHR9IFtraW5ldGljXSBLaW5ldGljIGluZXJ0aWEgdG8gYXBwbHkgdG8gdGhlIHBhbi5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHBhbiB0aGUgbWFwIGJ5IGRyYWdnaW5nIHRoZSBtYXAuXG4gKiBAYXBpXG4gKi9cbnZhciBEcmFnUGFuID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoUG9pbnRlckludGVyYWN0aW9uKSB7XG4gIGZ1bmN0aW9uIERyYWdQYW4ob3B0X29wdGlvbnMpIHtcblxuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5jYWxsKHRoaXMsIHtcbiAgICAgIHN0b3BEb3duOiBGQUxTRVxuICAgIH0pO1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9LaW5ldGljLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMua2luZXRpY18gPSBvcHRpb25zLmtpbmV0aWM7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICovXG4gICAgdGhpcy5sYXN0Q2VudHJvaWQgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmxhc3RQb2ludGVyc0NvdW50XztcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMucGFubmluZ18gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBub01vZGlmaWVyS2V5cztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5ub0tpbmV0aWNfID0gZmFsc2U7XG5cbiAgfVxuXG4gIGlmICggUG9pbnRlckludGVyYWN0aW9uICkgRHJhZ1Bhbi5fX3Byb3RvX18gPSBQb2ludGVySW50ZXJhY3Rpb247XG4gIERyYWdQYW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUG9pbnRlckludGVyYWN0aW9uICYmIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUgKTtcbiAgRHJhZ1Bhbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBEcmFnUGFuO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgRHJhZ1Bhbi5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRHJhZ0V2ZW50IChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMucGFubmluZ18pIHtcbiAgICAgIHRoaXMucGFubmluZ18gPSB0cnVlO1xuICAgICAgdGhpcy5nZXRNYXAoKS5nZXRWaWV3KCkuc2V0SGludChWaWV3SGludC5JTlRFUkFDVElORywgMSk7XG4gICAgfVxuICAgIHZhciB0YXJnZXRQb2ludGVycyA9IHRoaXMudGFyZ2V0UG9pbnRlcnM7XG4gICAgdmFyIGNlbnRyb2lkID0gY2VudHJvaWRGcm9tUG9pbnRlcnModGFyZ2V0UG9pbnRlcnMpO1xuICAgIGlmICh0YXJnZXRQb2ludGVycy5sZW5ndGggPT0gdGhpcy5sYXN0UG9pbnRlcnNDb3VudF8pIHtcbiAgICAgIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgIHRoaXMua2luZXRpY18udXBkYXRlKGNlbnRyb2lkWzBdLCBjZW50cm9pZFsxXSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5sYXN0Q2VudHJvaWQpIHtcbiAgICAgICAgdmFyIGRlbHRhWCA9IHRoaXMubGFzdENlbnRyb2lkWzBdIC0gY2VudHJvaWRbMF07XG4gICAgICAgIHZhciBkZWx0YVkgPSBjZW50cm9pZFsxXSAtIHRoaXMubGFzdENlbnRyb2lkWzFdO1xuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICB2YXIgY2VudGVyID0gW2RlbHRhWCwgZGVsdGFZXTtcbiAgICAgICAgc2NhbGVDb29yZGluYXRlKGNlbnRlciwgdmlldy5nZXRSZXNvbHV0aW9uKCkpO1xuICAgICAgICByb3RhdGVDb29yZGluYXRlKGNlbnRlciwgdmlldy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgYWRkQ29vcmRpbmF0ZShjZW50ZXIsIHZpZXcuZ2V0Q2VudGVyKCkpO1xuICAgICAgICBjZW50ZXIgPSB2aWV3LmNvbnN0cmFpbkNlbnRlcihjZW50ZXIpO1xuICAgICAgICB2aWV3LnNldENlbnRlcihjZW50ZXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgLy8gcmVzZXQgc28gd2UgZG9uJ3Qgb3ZlcmVzdGltYXRlIHRoZSBraW5ldGljIGVuZXJneSBhZnRlclxuICAgICAgLy8gYWZ0ZXIgb25lIGZpbmdlciBkb3duLCB0aW55IGRyYWcsIHNlY29uZCBmaW5nZXIgZG93blxuICAgICAgdGhpcy5raW5ldGljXy5iZWdpbigpO1xuICAgIH1cbiAgICB0aGlzLmxhc3RDZW50cm9pZCA9IGNlbnRyb2lkO1xuICAgIHRoaXMubGFzdFBvaW50ZXJzQ291bnRfID0gdGFyZ2V0UG9pbnRlcnMubGVuZ3RoO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgRHJhZ1Bhbi5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZVVwRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgIGlmICghdGhpcy5ub0tpbmV0aWNfICYmIHRoaXMua2luZXRpY18gJiYgdGhpcy5raW5ldGljXy5lbmQoKSkge1xuICAgICAgICB2YXIgZGlzdGFuY2UgPSB0aGlzLmtpbmV0aWNfLmdldERpc3RhbmNlKCk7XG4gICAgICAgIHZhciBhbmdsZSA9IHRoaXMua2luZXRpY18uZ2V0QW5nbGUoKTtcbiAgICAgICAgdmFyIGNlbnRlciA9IC8qKiBAdHlwZSB7IWltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gKi8gKHZpZXcuZ2V0Q2VudGVyKCkpO1xuICAgICAgICB2YXIgY2VudGVycHggPSBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZShjZW50ZXIpO1xuICAgICAgICB2YXIgZGVzdCA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsKFtcbiAgICAgICAgICBjZW50ZXJweFswXSAtIGRpc3RhbmNlICogTWF0aC5jb3MoYW5nbGUpLFxuICAgICAgICAgIGNlbnRlcnB4WzFdIC0gZGlzdGFuY2UgKiBNYXRoLnNpbihhbmdsZSlcbiAgICAgICAgXSk7XG4gICAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgICAgY2VudGVyOiB2aWV3LmNvbnN0cmFpbkNlbnRlcihkZXN0KSxcbiAgICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgICAgICAgIGVhc2luZzogZWFzZU91dFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnBhbm5pbmdfKSB7XG4gICAgICAgIHRoaXMucGFubmluZ18gPSBmYWxzZTtcbiAgICAgICAgdmlldy5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAtMSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgIC8vIHJlc2V0IHNvIHdlIGRvbid0IG92ZXJlc3RpbWF0ZSB0aGUga2luZXRpYyBlbmVyZ3kgYWZ0ZXJcbiAgICAgICAgLy8gYWZ0ZXIgb25lIGZpbmdlciB1cCwgdGlueSBkcmFnLCBzZWNvbmQgZmluZ2VyIHVwXG4gICAgICAgIHRoaXMua2luZXRpY18uYmVnaW4oKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubGFzdENlbnRyb2lkID0gbnVsbDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIERyYWdQYW4ucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURvd25FdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID4gMCAmJiB0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICB0aGlzLmxhc3RDZW50cm9pZCA9IG51bGw7XG4gICAgICAvLyBzdG9wIGFueSBjdXJyZW50IGFuaW1hdGlvblxuICAgICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgdmlldy5zZXRDZW50ZXIobWFwQnJvd3NlckV2ZW50LmZyYW1lU3RhdGUudmlld1N0YXRlLmNlbnRlcik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgICB0aGlzLmtpbmV0aWNfLmJlZ2luKCk7XG4gICAgICB9XG4gICAgICAvLyBObyBraW5ldGljIGFzIHNvb24gYXMgbW9yZSB0aGFuIG9uZSBwb2ludGVyIG9uIHRoZSBzY3JlZW4gaXNcbiAgICAgIC8vIGRldGVjdGVkLiBUaGlzIGlzIHRvIHByZXZlbnQgbmFzdHkgcGFucyBhZnRlciBwaW5jaC5cbiAgICAgIHRoaXMubm9LaW5ldGljXyA9IHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID4gMTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBEcmFnUGFuO1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcblxuZXhwb3J0IGRlZmF1bHQgRHJhZ1BhbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RHJhZ1Bhbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZVxuICovXG5pbXBvcnQge2Rpc2FibGV9IGZyb20gJy4uL3JvdGF0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQgVmlld0hpbnQgZnJvbSAnLi4vVmlld0hpbnQuanMnO1xuaW1wb3J0IHthbHRTaGlmdEtleXNPbmx5LCBtb3VzZU9ubHksIG1vdXNlQWN0aW9uQnV0dG9ufSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbmltcG9ydCB7RkFMU0V9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQge3JvdGF0ZSwgcm90YXRlV2l0aG91dENvbnN0cmFpbnRzfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24gZnJvbSAnLi9Qb2ludGVyLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhblxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhIGJvb2xlYW5cbiAqIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufmFsdFNoaWZ0S2V5c09ubHl9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byByb3RhdGUgdGhlIG1hcCBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmcgb24gdGhlIG1hcCxcbiAqIG5vcm1hbGx5IGNvbWJpbmVkIHdpdGggYW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufSB0aGF0IGxpbWl0c1xuICogaXQgdG8gd2hlbiB0aGUgYWx0IGFuZCBzaGlmdCBrZXlzIGFyZSBoZWxkIGRvd24uXG4gKlxuICogVGhpcyBpbnRlcmFjdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBmb3IgbW91c2UgZGV2aWNlcy5cbiAqIEBhcGlcbiAqL1xudmFyIERyYWdSb3RhdGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChQb2ludGVySW50ZXJhY3Rpb24pIHtcbiAgZnVuY3Rpb24gRHJhZ1JvdGF0ZShvcHRfb3B0aW9ucykge1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICBQb2ludGVySW50ZXJhY3Rpb24uY2FsbCh0aGlzLCB7XG4gICAgICBzdG9wRG93bjogRkFMU0VcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBhbHRTaGlmdEtleXNPbmx5O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuXG4gIH1cblxuICBpZiAoIFBvaW50ZXJJbnRlcmFjdGlvbiApIERyYWdSb3RhdGUuX19wcm90b19fID0gUG9pbnRlckludGVyYWN0aW9uO1xuICBEcmFnUm90YXRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBvaW50ZXJJbnRlcmFjdGlvbiAmJiBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlICk7XG4gIERyYWdSb3RhdGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRHJhZ1JvdGF0ZTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIERyYWdSb3RhdGUucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURyYWdFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCFtb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAodmlldy5nZXRDb25zdHJhaW50cygpLnJvdGF0aW9uID09PSBkaXNhYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzaXplID0gbWFwLmdldFNpemUoKTtcbiAgICB2YXIgb2Zmc2V0ID0gbWFwQnJvd3NlckV2ZW50LnBpeGVsO1xuICAgIHZhciB0aGV0YSA9XG4gICAgICAgIE1hdGguYXRhbjIoc2l6ZVsxXSAvIDIgLSBvZmZzZXRbMV0sIG9mZnNldFswXSAtIHNpemVbMF0gLyAyKTtcbiAgICBpZiAodGhpcy5sYXN0QW5nbGVfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBkZWx0YSA9IHRoZXRhIC0gdGhpcy5sYXN0QW5nbGVfO1xuICAgICAgdmFyIHJvdGF0aW9uID0gdmlldy5nZXRSb3RhdGlvbigpO1xuICAgICAgcm90YXRlV2l0aG91dENvbnN0cmFpbnRzKHZpZXcsIHJvdGF0aW9uIC0gZGVsdGEpO1xuICAgIH1cbiAgICB0aGlzLmxhc3RBbmdsZV8gPSB0aGV0YTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgRHJhZ1JvdGF0ZS5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZVVwRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICB2aWV3LnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIC0xKTtcbiAgICB2YXIgcm90YXRpb24gPSB2aWV3LmdldFJvdGF0aW9uKCk7XG4gICAgcm90YXRlKHZpZXcsIHJvdGF0aW9uLCB1bmRlZmluZWQsIHRoaXMuZHVyYXRpb25fKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIERyYWdSb3RhdGUucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURvd25FdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCFtb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChtb3VzZUFjdGlvbkJ1dHRvbihtYXBCcm93c2VyRXZlbnQpICYmIHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIG1hcC5nZXRWaWV3KCkuc2V0SGludChWaWV3SGludC5JTlRFUkFDVElORywgMSk7XG4gICAgICB0aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gRHJhZ1JvdGF0ZTtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5cbmV4cG9ydCBkZWZhdWx0IERyYWdSb3RhdGU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURyYWdSb3RhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9Cb3hcbiAqL1xuXG5pbXBvcnQgRGlzcG9zYWJsZSBmcm9tICcuLi9EaXNwb3NhYmxlLmpzJztcbmltcG9ydCBQb2x5Z29uIGZyb20gJy4uL2dlb20vUG9seWdvbi5qcyc7XG5cbnZhciBSZW5kZXJCb3ggPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChEaXNwb3NhYmxlKSB7XG4gIGZ1bmN0aW9uIFJlbmRlckJveChjbGFzc05hbWUpIHtcbiAgICBEaXNwb3NhYmxlLmNhbGwodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmdlb21ldHJ5XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmVsZW1lbnRfID0gLyoqIEB0eXBlIHtIVE1MRGl2RWxlbWVudH0gKi8gKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcbiAgICB0aGlzLmVsZW1lbnRfLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICB0aGlzLmVsZW1lbnRfLmNsYXNzTmFtZSA9ICdvbC1ib3ggJyArIGNsYXNzTmFtZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMubWFwXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgKi9cbiAgICB0aGlzLnN0YXJ0UGl4ZWxfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAqL1xuICAgIHRoaXMuZW5kUGl4ZWxfID0gbnVsbDtcblxuICB9XG5cbiAgaWYgKCBEaXNwb3NhYmxlICkgUmVuZGVyQm94Ll9fcHJvdG9fXyA9IERpc3Bvc2FibGU7XG4gIFJlbmRlckJveC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBEaXNwb3NhYmxlICYmIERpc3Bvc2FibGUucHJvdG90eXBlICk7XG4gIFJlbmRlckJveC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSZW5kZXJCb3g7XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBSZW5kZXJCb3gucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uIGRpc3Bvc2VJbnRlcm5hbCAoKSB7XG4gICAgdGhpcy5zZXRNYXAobnVsbCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBSZW5kZXJCb3gucHJvdG90eXBlLnJlbmRlcl8gPSBmdW5jdGlvbiByZW5kZXJfICgpIHtcbiAgICB2YXIgc3RhcnRQaXhlbCA9IHRoaXMuc3RhcnRQaXhlbF87XG4gICAgdmFyIGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbF87XG4gICAgdmFyIHB4ID0gJ3B4JztcbiAgICB2YXIgc3R5bGUgPSB0aGlzLmVsZW1lbnRfLnN0eWxlO1xuICAgIHN0eWxlLmxlZnQgPSBNYXRoLm1pbihzdGFydFBpeGVsWzBdLCBlbmRQaXhlbFswXSkgKyBweDtcbiAgICBzdHlsZS50b3AgPSBNYXRoLm1pbihzdGFydFBpeGVsWzFdLCBlbmRQaXhlbFsxXSkgKyBweDtcbiAgICBzdHlsZS53aWR0aCA9IE1hdGguYWJzKGVuZFBpeGVsWzBdIC0gc3RhcnRQaXhlbFswXSkgKyBweDtcbiAgICBzdHlsZS5oZWlnaHQgPSBNYXRoLmFicyhlbmRQaXhlbFsxXSAtIHN0YXJ0UGl4ZWxbMV0pICsgcHg7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAqL1xuICBSZW5kZXJCb3gucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIHNldE1hcCAobWFwKSB7XG4gICAgaWYgKHRoaXMubWFwXykge1xuICAgICAgdGhpcy5tYXBfLmdldE92ZXJsYXlDb250YWluZXIoKS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnRfKTtcbiAgICAgIHZhciBzdHlsZSA9IHRoaXMuZWxlbWVudF8uc3R5bGU7XG4gICAgICBzdHlsZS5sZWZ0ID0gc3R5bGUudG9wID0gc3R5bGUud2lkdGggPSBzdHlsZS5oZWlnaHQgPSAnaW5oZXJpdCc7XG4gICAgfVxuICAgIHRoaXMubWFwXyA9IG1hcDtcbiAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICB0aGlzLm1hcF8uZ2V0T3ZlcmxheUNvbnRhaW5lcigpLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudF8pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gc3RhcnRQaXhlbCBTdGFydCBwaXhlbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gZW5kUGl4ZWwgRW5kIHBpeGVsLlxuICAgKi9cbiAgUmVuZGVyQm94LnByb3RvdHlwZS5zZXRQaXhlbHMgPSBmdW5jdGlvbiBzZXRQaXhlbHMgKHN0YXJ0UGl4ZWwsIGVuZFBpeGVsKSB7XG4gICAgdGhpcy5zdGFydFBpeGVsXyA9IHN0YXJ0UGl4ZWw7XG4gICAgdGhpcy5lbmRQaXhlbF8gPSBlbmRQaXhlbDtcbiAgICB0aGlzLmNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkoKTtcbiAgICB0aGlzLnJlbmRlcl8oKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBvciB1cGRhdGVzIHRoZSBjYWNoZWQgZ2VvbWV0cnkuXG4gICAqL1xuICBSZW5kZXJCb3gucHJvdG90eXBlLmNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkgPSBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUdlb21ldHJ5ICgpIHtcbiAgICB2YXIgc3RhcnRQaXhlbCA9IHRoaXMuc3RhcnRQaXhlbF87XG4gICAgdmFyIGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbF87XG4gICAgdmFyIHBpeGVscyA9IFtcbiAgICAgIHN0YXJ0UGl4ZWwsXG4gICAgICBbc3RhcnRQaXhlbFswXSwgZW5kUGl4ZWxbMV1dLFxuICAgICAgZW5kUGl4ZWwsXG4gICAgICBbZW5kUGl4ZWxbMF0sIHN0YXJ0UGl4ZWxbMV1dXG4gICAgXTtcbiAgICB2YXIgY29vcmRpbmF0ZXMgPSBwaXhlbHMubWFwKHRoaXMubWFwXy5nZXRDb29yZGluYXRlRnJvbVBpeGVsLCB0aGlzLm1hcF8pO1xuICAgIC8vIGNsb3NlIHRoZSBwb2x5Z29uXG4gICAgY29vcmRpbmF0ZXNbNF0gPSBjb29yZGluYXRlc1swXS5zbGljZSgpO1xuICAgIGlmICghdGhpcy5nZW9tZXRyeV8pIHtcbiAgICAgIHRoaXMuZ2VvbWV0cnlfID0gbmV3IFBvbHlnb24oW2Nvb3JkaW5hdGVzXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZ2VvbWV0cnlfLnNldENvb3JkaW5hdGVzKFtjb29yZGluYXRlc10pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5LlxuICAgKi9cbiAgUmVuZGVyQm94LnByb3RvdHlwZS5nZXRHZW9tZXRyeSA9IGZ1bmN0aW9uIGdldEdlb21ldHJ5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZW9tZXRyeV87XG4gIH07XG5cbiAgcmV0dXJuIFJlbmRlckJveDtcbn0oRGlzcG9zYWJsZSkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlckJveDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Qm94LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnQm94XG4gKi9cbi8vIEZJWE1FIGRyYXcgZHJhZyBib3hcbmltcG9ydCBFdmVudCBmcm9tICcuLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IHthbHdheXMsIG1vdXNlT25seSwgbW91c2VBY3Rpb25CdXR0b259IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHtWT0lEfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IFJlbmRlckJveCBmcm9tICcuLi9yZW5kZXIvQm94LmpzJztcblxuXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fSBhbmQgdHdvXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3BpeGVsflBpeGVsfXMgYW5kIHJldHVybnMgYSBge2Jvb2xlYW59YC4gSWYgdGhlIGNvbmRpdGlvbiBpcyBtZXQsXG4gKiB0cnVlIHNob3VsZCBiZSByZXR1cm5lZC5cbiAqIEB0eXBlZGVmIHtmdW5jdGlvbih0aGlzOiA/LCBpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWwsIGltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsKTpib29sZWFufSBFbmRDb25kaXRpb25cbiAqL1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWRyYWdib3gnXSBDU1MgY2xhc3MgbmFtZSBmb3Igc3R5bGluZyB0aGUgYm94LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYSBib29sZWFuXG4gKiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBvbC9ldmVudHMvY29uZGl0aW9ufmFsd2F5c30uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pbkFyZWE9NjRdIFRoZSBtaW5pbXVtIGFyZWEgb2YgdGhlIGJveCBpbiBwaXhlbCwgdGhpcyB2YWx1ZSBpcyB1c2VkIGJ5IHRoZSBkZWZhdWx0XG4gKiBgYm94RW5kQ29uZGl0aW9uYCBmdW5jdGlvbi5cbiAqIEBwcm9wZXJ0eSB7RW5kQ29uZGl0aW9ufSBbYm94RW5kQ29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCB0d29cbiAqIHtAbGluayBtb2R1bGU6b2wvcGl4ZWx+UGl4ZWx9cyB0byBpbmRpY2F0ZSB3aGV0aGVyIGEgYGJveGVuZGAgZXZlbnQgc2hvdWxkIGJlIGZpcmVkLlxuICogRGVmYXVsdCBpcyBgdHJ1ZWAgaWYgdGhlIGFyZWEgb2YgdGhlIGJveCBpcyBiaWdnZXIgdGhhbiB0aGUgYG1pbkFyZWFgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24odGhpczpEcmFnQm94LCBpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCl9IG9uQm94RW5kIENvZGUgdG8gZXhlY3V0ZSBqdXN0XG4gKiBiZWZvcmUgYGJveGVuZGAgaXMgZmlyZWQuXG4gKi9cblxuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbnZhciBEcmFnQm94RXZlbnRUeXBlID0ge1xuICAvKipcbiAgICogVHJpZ2dlcmVkIHVwb24gZHJhZyBib3ggc3RhcnQuXG4gICAqIEBldmVudCBEcmFnQm94RXZlbnQjYm94c3RhcnRcbiAgICogQGFwaVxuICAgKi9cbiAgQk9YU1RBUlQ6ICdib3hzdGFydCcsXG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCBvbiBkcmFnIHdoZW4gYm94IGlzIGFjdGl2ZS5cbiAgICogQGV2ZW50IERyYWdCb3hFdmVudCNib3hkcmFnXG4gICAqIEBhcGlcbiAgICovXG4gIEJPWERSQUc6ICdib3hkcmFnJyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIHVwb24gZHJhZyBib3ggZW5kLlxuICAgKiBAZXZlbnQgRHJhZ0JveEV2ZW50I2JveGVuZFxuICAgKiBAYXBpXG4gICAqL1xuICBCT1hFTkQ6ICdib3hlbmQnXG59O1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnQm94fkRyYWdCb3h9IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mXG4gKiB0aGlzIHR5cGUuXG4gKi9cbnZhciBEcmFnQm94RXZlbnQgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudCkge1xuICBmdW5jdGlvbiBEcmFnQm94RXZlbnQodHlwZSwgY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSB7XG4gICAgRXZlbnQuY2FsbCh0aGlzLCB0eXBlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBjb29yZGluYXRlIG9mIHRoZSBkcmFnIGV2ZW50LlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuY29vcmRpbmF0ZSA9IGNvb3JkaW5hdGU7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMubWFwQnJvd3NlckV2ZW50ID0gbWFwQnJvd3NlckV2ZW50O1xuXG4gIH1cblxuICBpZiAoIEV2ZW50ICkgRHJhZ0JveEV2ZW50Ll9fcHJvdG9fXyA9IEV2ZW50O1xuICBEcmFnQm94RXZlbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnQgJiYgRXZlbnQucHJvdG90eXBlICk7XG4gIERyYWdCb3hFdmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBEcmFnQm94RXZlbnQ7XG5cbiAgcmV0dXJuIERyYWdCb3hFdmVudDtcbn0oRXZlbnQpKTtcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byBkcmF3IGEgdmVjdG9yIGJveCBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmcgb24gdGhlIG1hcCxcbiAqIG5vcm1hbGx5IGNvbWJpbmVkIHdpdGggYW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufSB0aGF0IGxpbWl0c1xuICogaXQgdG8gd2hlbiB0aGUgc2hpZnQgb3Igb3RoZXIga2V5IGlzIGhlbGQgZG93bi4gVGhpcyBpcyB1c2VkLCBmb3IgZXhhbXBsZSxcbiAqIGZvciB6b29taW5nIHRvIGEgc3BlY2lmaWMgYXJlYSBvZiB0aGUgbWFwXG4gKiAoc2VlIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1pvb21+RHJhZ1pvb219IGFuZFxuICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnUm90YXRlQW5kWm9vbX0pLlxuICpcbiAqIFRoaXMgaW50ZXJhY3Rpb24gaXMgb25seSBzdXBwb3J0ZWQgZm9yIG1vdXNlIGRldmljZXMuXG4gKlxuICogQGZpcmVzIERyYWdCb3hFdmVudFxuICogQGFwaVxuICovXG52YXIgRHJhZ0JveCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFBvaW50ZXJJbnRlcmFjdGlvbikge1xuICBmdW5jdGlvbiBEcmFnQm94KG9wdF9vcHRpb25zKSB7XG5cbiAgICBQb2ludGVySW50ZXJhY3Rpb24uY2FsbCh0aGlzKTtcblxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gICAgLyoqXG4gICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyL0JveC5qc1wiKS5kZWZhdWx0fVxuICAgICogQHByaXZhdGVcbiAgICAqL1xuICAgIHRoaXMuYm94XyA9IG5ldyBSZW5kZXJCb3gob3B0aW9ucy5jbGFzc05hbWUgfHwgJ29sLWRyYWdib3gnKTtcblxuICAgIC8qKlxuICAgICogQHR5cGUge251bWJlcn1cbiAgICAqIEBwcml2YXRlXG4gICAgKi9cbiAgICB0aGlzLm1pbkFyZWFfID0gb3B0aW9ucy5taW5BcmVhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pbkFyZWEgOiA2NDtcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRvIGV4ZWN1dGUganVzdCBiZWZvcmUgYG9uYm94ZW5kYCBpcyBmaXJlZFxuICAgICAqIEB0eXBlIHtmdW5jdGlvbih0aGlzOkRyYWdCb3gsIGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMub25Cb3hFbmRfID0gb3B0aW9ucy5vbkJveEVuZCA/IG9wdGlvbnMub25Cb3hFbmQgOiBWT0lEO1xuXG4gICAgLyoqXG4gICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgKiBAcHJpdmF0ZVxuICAgICovXG4gICAgdGhpcy5zdGFydFBpeGVsXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAqIEBwcml2YXRlXG4gICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgKi9cbiAgICB0aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogYWx3YXlzO1xuXG4gICAgLyoqXG4gICAgKiBAcHJpdmF0ZVxuICAgICogQHR5cGUge0VuZENvbmRpdGlvbn1cbiAgICAqL1xuICAgIHRoaXMuYm94RW5kQ29uZGl0aW9uXyA9IG9wdGlvbnMuYm94RW5kQ29uZGl0aW9uID9cbiAgICAgIG9wdGlvbnMuYm94RW5kQ29uZGl0aW9uIDogdGhpcy5kZWZhdWx0Qm94RW5kQ29uZGl0aW9uO1xuICB9XG5cbiAgaWYgKCBQb2ludGVySW50ZXJhY3Rpb24gKSBEcmFnQm94Ll9fcHJvdG9fXyA9IFBvaW50ZXJJbnRlcmFjdGlvbjtcbiAgRHJhZ0JveC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQb2ludGVySW50ZXJhY3Rpb24gJiYgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZSApO1xuICBEcmFnQm94LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IERyYWdCb3g7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGNvbmRpdGlvbiBmb3IgZGV0ZXJtaW5pbmcgd2hldGhlciB0aGUgYm94ZW5kIGV2ZW50XG4gICAqIHNob3VsZCBmaXJlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgVGhlIG9yaWdpbmF0aW5nIE1hcEJyb3dzZXJFdmVudFxuICAgKiAgICAgbGVhZGluZyB0byB0aGUgYm94IGVuZC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gc3RhcnRQaXhlbCBUaGUgc3RhcnRpbmcgcGl4ZWwgb2YgdGhlIGJveC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gZW5kUGl4ZWwgVGhlIGVuZCBwaXhlbCBvZiB0aGUgYm94LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIG9yIG5vdCB0aGUgYm94ZW5kIGNvbmRpdGlvbiBzaG91bGQgYmUgZmlyZWQuXG4gICAqL1xuICBEcmFnQm94LnByb3RvdHlwZS5kZWZhdWx0Qm94RW5kQ29uZGl0aW9uID0gZnVuY3Rpb24gZGVmYXVsdEJveEVuZENvbmRpdGlvbiAobWFwQnJvd3NlckV2ZW50LCBzdGFydFBpeGVsLCBlbmRQaXhlbCkge1xuICAgIHZhciB3aWR0aCA9IGVuZFBpeGVsWzBdIC0gc3RhcnRQaXhlbFswXTtcbiAgICB2YXIgaGVpZ2h0ID0gZW5kUGl4ZWxbMV0gLSBzdGFydFBpeGVsWzFdO1xuICAgIHJldHVybiB3aWR0aCAqIHdpZHRoICsgaGVpZ2h0ICogaGVpZ2h0ID49IHRoaXMubWluQXJlYV87XG4gIH07XG5cbiAgLyoqXG4gICogUmV0dXJucyBnZW9tZXRyeSBvZiBsYXN0IGRyYXduIGJveC5cbiAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gR2VvbWV0cnkuXG4gICogQGFwaVxuICAqL1xuICBEcmFnQm94LnByb3RvdHlwZS5nZXRHZW9tZXRyeSA9IGZ1bmN0aW9uIGdldEdlb21ldHJ5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5ib3hfLmdldEdlb21ldHJ5KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBEcmFnQm94LnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVEcmFnRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmJveF8uc2V0UGl4ZWxzKHRoaXMuc3RhcnRQaXhlbF8sIG1hcEJyb3dzZXJFdmVudC5waXhlbCk7XG5cbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IERyYWdCb3hFdmVudChEcmFnQm94RXZlbnRUeXBlLkJPWERSQUcsXG4gICAgICBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBEcmFnQm94LnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlVXBFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCFtb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5ib3hfLnNldE1hcChudWxsKTtcblxuICAgIGlmICh0aGlzLmJveEVuZENvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50LCB0aGlzLnN0YXJ0UGl4ZWxfLCBtYXBCcm93c2VyRXZlbnQucGl4ZWwpKSB7XG4gICAgICB0aGlzLm9uQm94RW5kXyhtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBEcmFnQm94RXZlbnQoRHJhZ0JveEV2ZW50VHlwZS5CT1hFTkQsXG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlLCBtYXBCcm93c2VyRXZlbnQpKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgRHJhZ0JveC5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRG93bkV2ZW50IChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoIW1vdXNlT25seShtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKG1vdXNlQWN0aW9uQnV0dG9uKG1hcEJyb3dzZXJFdmVudCkgJiZcbiAgICAgICAgdGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgIHRoaXMuc3RhcnRQaXhlbF8gPSBtYXBCcm93c2VyRXZlbnQucGl4ZWw7XG4gICAgICB0aGlzLmJveF8uc2V0TWFwKG1hcEJyb3dzZXJFdmVudC5tYXApO1xuICAgICAgdGhpcy5ib3hfLnNldFBpeGVscyh0aGlzLnN0YXJ0UGl4ZWxfLCB0aGlzLnN0YXJ0UGl4ZWxfKTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRHJhZ0JveEV2ZW50KERyYWdCb3hFdmVudFR5cGUuQk9YU1RBUlQsXG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlLCBtYXBCcm93c2VyRXZlbnQpKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBEcmFnQm94O1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcblxuXG5leHBvcnQgZGVmYXVsdCBEcmFnQm94O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EcmFnQm94LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnWm9vbVxuICovXG5pbXBvcnQge2Vhc2VPdXR9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG5pbXBvcnQge3NoaWZ0S2V5T25seX0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQge2NyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGVzLCBnZXRCb3R0b21MZWZ0LCBnZXRDZW50ZXIsIGdldFRvcFJpZ2h0LCBzY2FsZUZyb21DZW50ZXJ9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgRHJhZ0JveCBmcm9tICcuL0RyYWdCb3guanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWRyYWd6b29tJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHN0eWxpbmcgdGhlXG4gKiBib3guXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn5zaGlmdEtleU9ubHl9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yMDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvdXQ9ZmFsc2VdIFVzZSBpbnRlcmFjdGlvbiBmb3Igem9vbWluZyBvdXQuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgYnkgY2xpY2tpbmcgYW5kIGRyYWdnaW5nIG9uIHRoZSBtYXAsXG4gKiBub3JtYWxseSBjb21iaW5lZCB3aXRoIGFuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn0gdGhhdCBsaW1pdHNcbiAqIGl0IHRvIHdoZW4gYSBrZXksIHNoaWZ0IGJ5IGRlZmF1bHQsIGlzIGhlbGQgZG93bi5cbiAqXG4gKiBUbyBjaGFuZ2UgdGhlIHN0eWxlIG9mIHRoZSBib3gsIHVzZSBDU1MgYW5kIHRoZSBgLm9sLWRyYWd6b29tYCBzZWxlY3Rvciwgb3JcbiAqIHlvdXIgY3VzdG9tIG9uZSBjb25maWd1cmVkIHdpdGggYGNsYXNzTmFtZWAuXG4gKiBAYXBpXG4gKi9cbnZhciBEcmFnWm9vbSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKERyYWdCb3gpIHtcbiAgZnVuY3Rpb24gRHJhZ1pvb20ob3B0X29wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcblxuICAgIHZhciBjb25kaXRpb24gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogc2hpZnRLZXlPbmx5O1xuXG4gICAgRHJhZ0JveC5jYWxsKHRoaXMsIHtcbiAgICAgIGNvbmRpdGlvbjogY29uZGl0aW9uLFxuICAgICAgY2xhc3NOYW1lOiBvcHRpb25zLmNsYXNzTmFtZSB8fCAnb2wtZHJhZ3pvb20nLFxuICAgICAgb25Cb3hFbmQ6IG9uQm94RW5kXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLm91dF8gPSBvcHRpb25zLm91dCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vdXQgOiBmYWxzZTtcbiAgfVxuXG4gIGlmICggRHJhZ0JveCApIERyYWdab29tLl9fcHJvdG9fXyA9IERyYWdCb3g7XG4gIERyYWdab29tLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIERyYWdCb3ggJiYgRHJhZ0JveC5wcm90b3R5cGUgKTtcbiAgRHJhZ1pvb20ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRHJhZ1pvb207XG5cbiAgcmV0dXJuIERyYWdab29tO1xufShEcmFnQm94KSk7XG5cblxuLyoqXG4gKiBAdGhpcyB7RHJhZ1pvb219XG4gKi9cbmZ1bmN0aW9uIG9uQm94RW5kKCkge1xuICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgdmFyIHZpZXcgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9ICovIChtYXAuZ2V0VmlldygpKTtcbiAgdmFyIHNpemUgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9ICovIChtYXAuZ2V0U2l6ZSgpKTtcbiAgdmFyIGV4dGVudCA9IHRoaXMuZ2V0R2VvbWV0cnkoKS5nZXRFeHRlbnQoKTtcblxuICBpZiAodGhpcy5vdXRfKSB7XG4gICAgdmFyIG1hcEV4dGVudCA9IHZpZXcuY2FsY3VsYXRlRXh0ZW50KHNpemUpO1xuICAgIHZhciBib3hQaXhlbEV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGVzKFtcbiAgICAgIG1hcC5nZXRQaXhlbEZyb21Db29yZGluYXRlKGdldEJvdHRvbUxlZnQoZXh0ZW50KSksXG4gICAgICBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZShnZXRUb3BSaWdodChleHRlbnQpKV0pO1xuICAgIHZhciBmYWN0b3IgPSB2aWV3LmdldFJlc29sdXRpb25Gb3JFeHRlbnQoYm94UGl4ZWxFeHRlbnQsIHNpemUpO1xuXG4gICAgc2NhbGVGcm9tQ2VudGVyKG1hcEV4dGVudCwgMSAvIGZhY3Rvcik7XG4gICAgZXh0ZW50ID0gbWFwRXh0ZW50O1xuICB9XG5cbiAgdmFyIHJlc29sdXRpb24gPSB2aWV3LmNvbnN0cmFpblJlc29sdXRpb24oXG4gICAgdmlldy5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50KGV4dGVudCwgc2l6ZSkpO1xuXG4gIHZhciBjZW50ZXIgPSBnZXRDZW50ZXIoZXh0ZW50KTtcbiAgY2VudGVyID0gdmlldy5jb25zdHJhaW5DZW50ZXIoY2VudGVyKTtcblxuICB2aWV3LmFuaW1hdGUoe1xuICAgIHJlc29sdXRpb246IHJlc29sdXRpb24sXG4gICAgY2VudGVyOiBjZW50ZXIsXG4gICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb25fLFxuICAgIGVhc2luZzogZWFzZU91dFxuICB9KTtcbn1cblxuXG5leHBvcnQgZGVmYXVsdCBEcmFnWm9vbTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RHJhZ1pvb20uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9LZXlDb2RlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQGNvbnN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgTEVGVDogMzcsXG4gIFVQOiAzOCxcbiAgUklHSFQ6IDM5LFxuICBET1dOOiA0MFxufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2V5Q29kZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW5cbiAqL1xuaW1wb3J0IHtyb3RhdGUgYXMgcm90YXRlQ29vcmRpbmF0ZX0gZnJvbSAnLi4vY29vcmRpbmF0ZS5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEtleUNvZGUgZnJvbSAnLi4vZXZlbnRzL0tleUNvZGUuanMnO1xuaW1wb3J0IHtub01vZGlmaWVyS2V5cywgdGFyZ2V0Tm90RWRpdGFibGV9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IEludGVyYWN0aW9uLCB7cGFufSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC4gRGVmYXVsdCBpc1xuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufm5vTW9kaWZpZXJLZXlzfSBhbmRcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn50YXJnZXROb3RFZGl0YWJsZX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTEwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcGl4ZWxEZWx0YT0xMjhdIFRoZSBhbW91bnQgb2YgcGl4ZWxzIHRvIHBhbiBvbiBlYWNoIGtleVxuICogcHJlc3MuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byBwYW4gdGhlIG1hcCB1c2luZyBrZXlib2FyZCBhcnJvd3MuXG4gKiBOb3RlIHRoYXQsIGFsdGhvdWdoIHRoaXMgaW50ZXJhY3Rpb24gaXMgYnkgZGVmYXVsdCBpbmNsdWRlZCBpbiBtYXBzLFxuICogdGhlIGtleXMgY2FuIG9ubHkgYmUgdXNlZCB3aGVuIGJyb3dzZXIgZm9jdXMgaXMgb24gdGhlIGVsZW1lbnQgdG8gd2hpY2hcbiAqIHRoZSBrZXlib2FyZCBldmVudHMgYXJlIGF0dGFjaGVkLiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSBtYXAgZGl2LFxuICogdGhvdWdoIHlvdSBjYW4gY2hhbmdlIHRoaXMgd2l0aCB0aGUgYGtleWJvYXJkRXZlbnRUYXJnZXRgIGluXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9LiBgZG9jdW1lbnRgIG5ldmVyIGxvc2VzIGZvY3VzIGJ1dCwgZm9yIGFueSBvdGhlclxuICogZWxlbWVudCwgZm9jdXMgd2lsbCBoYXZlIHRvIGJlIG9uLCBhbmQgcmV0dXJuZWQgdG8sIHRoaXMgZWxlbWVudCBpZiB0aGUga2V5c1xuICogYXJlIHRvIGZ1bmN0aW9uLlxuICogU2VlIGFsc28ge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21+S2V5Ym9hcmRab29tfS5cbiAqIEBhcGlcbiAqL1xudmFyIEtleWJvYXJkUGFuID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoSW50ZXJhY3Rpb24pIHtcbiAgZnVuY3Rpb24gS2V5Ym9hcmRQYW4ob3B0X29wdGlvbnMpIHtcblxuICAgIEludGVyYWN0aW9uLmNhbGwodGhpcywge1xuICAgICAgaGFuZGxlRXZlbnQ6IGhhbmRsZUV2ZW50XG4gICAgfSk7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgQnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb21iaW5lZCBjb25kaXRpb24gcmVzdWx0LlxuICAgICAqL1xuICAgIHRoaXMuZGVmYXVsdENvbmRpdGlvbl8gPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgIHJldHVybiBub01vZGlmaWVyS2V5cyhtYXBCcm93c2VyRXZlbnQpICYmXG4gICAgICAgIHRhcmdldE5vdEVkaXRhYmxlKG1hcEJyb3dzZXJFdmVudCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0aW9ucy5jb25kaXRpb24gOiB0aGlzLmRlZmF1bHRDb25kaXRpb25fO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnBpeGVsRGVsdGFfID0gb3B0aW9ucy5waXhlbERlbHRhICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0aW9ucy5waXhlbERlbHRhIDogMTI4O1xuXG4gIH1cblxuICBpZiAoIEludGVyYWN0aW9uICkgS2V5Ym9hcmRQYW4uX19wcm90b19fID0gSW50ZXJhY3Rpb247XG4gIEtleWJvYXJkUGFuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEludGVyYWN0aW9uICYmIEludGVyYWN0aW9uLnByb3RvdHlwZSApO1xuICBLZXlib2FyZFBhbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBLZXlib2FyZFBhbjtcblxuICByZXR1cm4gS2V5Ym9hcmRQYW47XG59KEludGVyYWN0aW9uKSk7XG5cblxuLyoqXG4gKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gaWYgaXQgd2FzIGFcbiAqIGBLZXlFdmVudGAsIGFuZCBkZWNpZGVzIHRoZSBkaXJlY3Rpb24gdG8gcGFuIHRvIChpZiBhbiBhcnJvdyBrZXkgd2FzXG4gKiBwcmVzc2VkKS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAqIEB0aGlzIHtLZXlib2FyZFBhbn1cbiAqL1xuZnVuY3Rpb24gaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IEV2ZW50VHlwZS5LRVlET1dOKSB7XG4gICAgdmFyIGtleUV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHZhciBrZXlDb2RlID0ga2V5RXZlbnQua2V5Q29kZTtcbiAgICBpZiAodGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkgJiZcbiAgICAgICAgKGtleUNvZGUgPT0gS2V5Q29kZS5ET1dOIHx8XG4gICAgICAgIGtleUNvZGUgPT0gS2V5Q29kZS5MRUZUIHx8XG4gICAgICAgIGtleUNvZGUgPT0gS2V5Q29kZS5SSUdIVCB8fFxuICAgICAgICBrZXlDb2RlID09IEtleUNvZGUuVVApKSB7XG4gICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgIHZhciBtYXBVbml0c0RlbHRhID0gdmlldy5nZXRSZXNvbHV0aW9uKCkgKiB0aGlzLnBpeGVsRGVsdGFfO1xuICAgICAgdmFyIGRlbHRhWCA9IDAsIGRlbHRhWSA9IDA7XG4gICAgICBpZiAoa2V5Q29kZSA9PSBLZXlDb2RlLkRPV04pIHtcbiAgICAgICAgZGVsdGFZID0gLW1hcFVuaXRzRGVsdGE7XG4gICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT0gS2V5Q29kZS5MRUZUKSB7XG4gICAgICAgIGRlbHRhWCA9IC1tYXBVbml0c0RlbHRhO1xuICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09IEtleUNvZGUuUklHSFQpIHtcbiAgICAgICAgZGVsdGFYID0gbWFwVW5pdHNEZWx0YTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlbHRhWSA9IG1hcFVuaXRzRGVsdGE7XG4gICAgICB9XG4gICAgICB2YXIgZGVsdGEgPSBbZGVsdGFYLCBkZWx0YVldO1xuICAgICAgcm90YXRlQ29vcmRpbmF0ZShkZWx0YSwgdmlldy5nZXRSb3RhdGlvbigpKTtcbiAgICAgIHBhbih2aWV3LCBkZWx0YSwgdGhpcy5kdXJhdGlvbl8pO1xuICAgICAgbWFwQnJvd3NlckV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBzdG9wRXZlbnQgPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gIXN0b3BFdmVudDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgS2V5Ym9hcmRQYW47XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtleWJvYXJkUGFuLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21cbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7dGFyZ2V0Tm90RWRpdGFibGV9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IEludGVyYWN0aW9uLCB7em9vbUJ5RGVsdGF9IGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0xMDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuIERlZmF1bHQgaXNcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn50YXJnZXROb3RFZGl0YWJsZX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2RlbHRhPTFdIFRoZSB6b29tIGxldmVsIGRlbHRhIG9uIGVhY2gga2V5IHByZXNzLlxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIHVzaW5nIGtleWJvYXJkICsgYW5kIC0uXG4gKiBOb3RlIHRoYXQsIGFsdGhvdWdoIHRoaXMgaW50ZXJhY3Rpb24gaXMgYnkgZGVmYXVsdCBpbmNsdWRlZCBpbiBtYXBzLFxuICogdGhlIGtleXMgY2FuIG9ubHkgYmUgdXNlZCB3aGVuIGJyb3dzZXIgZm9jdXMgaXMgb24gdGhlIGVsZW1lbnQgdG8gd2hpY2hcbiAqIHRoZSBrZXlib2FyZCBldmVudHMgYXJlIGF0dGFjaGVkLiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSBtYXAgZGl2LFxuICogdGhvdWdoIHlvdSBjYW4gY2hhbmdlIHRoaXMgd2l0aCB0aGUgYGtleWJvYXJkRXZlbnRUYXJnZXRgIGluXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9LiBgZG9jdW1lbnRgIG5ldmVyIGxvc2VzIGZvY3VzIGJ1dCwgZm9yIGFueSBvdGhlclxuICogZWxlbWVudCwgZm9jdXMgd2lsbCBoYXZlIHRvIGJlIG9uLCBhbmQgcmV0dXJuZWQgdG8sIHRoaXMgZWxlbWVudCBpZiB0aGUga2V5c1xuICogYXJlIHRvIGZ1bmN0aW9uLlxuICogU2VlIGFsc28ge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbn5LZXlib2FyZFBhbn0uXG4gKiBAYXBpXG4gKi9cbnZhciBLZXlib2FyZFpvb20gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChJbnRlcmFjdGlvbikge1xuICBmdW5jdGlvbiBLZXlib2FyZFpvb20ob3B0X29wdGlvbnMpIHtcblxuICAgIEludGVyYWN0aW9uLmNhbGwodGhpcywge1xuICAgICAgaGFuZGxlRXZlbnQ6IGhhbmRsZUV2ZW50XG4gICAgfSk7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiB0YXJnZXROb3RFZGl0YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmRlbHRhXyA9IG9wdGlvbnMuZGVsdGEgPyBvcHRpb25zLmRlbHRhIDogMTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAxMDA7XG5cbiAgfVxuXG4gIGlmICggSW50ZXJhY3Rpb24gKSBLZXlib2FyZFpvb20uX19wcm90b19fID0gSW50ZXJhY3Rpb247XG4gIEtleWJvYXJkWm9vbS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBJbnRlcmFjdGlvbiAmJiBJbnRlcmFjdGlvbi5wcm90b3R5cGUgKTtcbiAgS2V5Ym9hcmRab29tLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEtleWJvYXJkWm9vbTtcblxuICByZXR1cm4gS2V5Ym9hcmRab29tO1xufShJbnRlcmFjdGlvbikpO1xuXG5cbi8qKlxuICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IGlmIGl0IHdhcyBhXG4gKiBgS2V5RXZlbnRgLCBhbmQgZGVjaWRlcyB3aGV0aGVyIHRvIHpvb20gaW4gb3Igb3V0IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGVcbiAqIGtleSBwcmVzc2VkIHdhcyAnKycgb3IgJy0nKS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAqIEB0aGlzIHtLZXlib2FyZFpvb219XG4gKi9cbmZ1bmN0aW9uIGhhbmRsZUV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICB2YXIgc3RvcEV2ZW50ID0gZmFsc2U7XG4gIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuS0VZRE9XTiB8fFxuICAgICAgbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLktFWVBSRVNTKSB7XG4gICAgdmFyIGtleUV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHZhciBjaGFyQ29kZSA9IGtleUV2ZW50LmNoYXJDb2RlO1xuICAgIGlmICh0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSAmJlxuICAgICAgICAoY2hhckNvZGUgPT0gJysnLmNoYXJDb2RlQXQoMCkgfHwgY2hhckNvZGUgPT0gJy0nLmNoYXJDb2RlQXQoMCkpKSB7XG4gICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIHZhciBkZWx0YSA9IChjaGFyQ29kZSA9PSAnKycuY2hhckNvZGVBdCgwKSkgPyB0aGlzLmRlbHRhXyA6IC10aGlzLmRlbHRhXztcbiAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCB1bmRlZmluZWQsIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgIG1hcEJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgc3RvcEV2ZW50ID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuICFzdG9wRXZlbnQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEtleWJvYXJkWm9vbTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2V5Ym9hcmRab29tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbVxuICovXG5pbXBvcnQgVmlld0hpbnQgZnJvbSAnLi4vVmlld0hpbnQuanMnO1xuaW1wb3J0IHthbHdheXN9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHtlYXNlT3V0fSBmcm9tICcuLi9lYXNpbmcuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7REVWSUNFX1BJWEVMX1JBVElPLCBGSVJFRk9YLCBTQUZBUkl9IGZyb20gJy4uL2hhcy5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb24sIHt6b29tQnlEZWx0YX0gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQge2NsYW1wfSBmcm9tICcuLi9tYXRoLmpzJztcblxuXG4vKipcbiAqIE1heGltdW0gbW91c2Ugd2hlZWwgZGVsdGEuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG52YXIgTUFYX0RFTFRBID0gMTtcblxuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgTW9kZSA9IHtcbiAgVFJBQ0tQQUQ6ICd0cmFja3BhZCcsXG4gIFdIRUVMOiAnd2hlZWwnXG59O1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0XG4gKiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLiBEZWZhdWx0IGlzXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb25+YWx3YXlzfS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aW1lb3V0PTgwXSBNb3VzZSB3aGVlbCB0aW1lb3V0IGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbnN0cmFpblJlc29sdXRpb249ZmFsc2VdIFdoZW4gdXNpbmcgYSB0cmFja3BhZCBvclxuICogbWFnaWMgbW91c2UsIHpvb20gdG8gdGhlIGNsb3Nlc3QgaW50ZWdlciB6b29tIGxldmVsIGFmdGVyIHRoZSBzY3JvbGwgZ2VzdHVyZVxuICogZW5kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VzZUFuY2hvcj10cnVlXSBFbmFibGUgem9vbWluZyB1c2luZyB0aGUgbW91c2Unc1xuICogbG9jYXRpb24gYXMgdGhlIGFuY2hvci4gV2hlbiBzZXQgdG8gYGZhbHNlYCwgem9vbWluZyBpbiBhbmQgb3V0IHdpbGwgem9vbSB0b1xuICogdGhlIGNlbnRlciBvZiB0aGUgc2NyZWVuIGluc3RlYWQgb2Ygem9vbWluZyBvbiB0aGUgbW91c2UncyBsb2NhdGlvbi5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gdGhlIG1hcCBieSBzY3JvbGxpbmcgdGhlIG1vdXNlIHdoZWVsLlxuICogQGFwaVxuICovXG52YXIgTW91c2VXaGVlbFpvb20gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChJbnRlcmFjdGlvbikge1xuICBmdW5jdGlvbiBNb3VzZVdoZWVsWm9vbShvcHRfb3B0aW9ucykge1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICBJbnRlcmFjdGlvbi5jYWxsKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9JbnRlcmFjdGlvbi5qc1wiKS5JbnRlcmFjdGlvbk9wdGlvbnN9ICovIHRoaXMsIChvcHRpb25zKSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kZWx0YV8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbWVvdXRfID0gb3B0aW9ucy50aW1lb3V0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbWVvdXQgOiA4MDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy51c2VBbmNob3JfID0gb3B0aW9ucy51c2VBbmNob3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudXNlQW5jaG9yIDogdHJ1ZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uXyA9IG9wdGlvbnMuY29uc3RyYWluUmVzb2x1dGlvbiB8fCBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBhbHdheXM7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqL1xuICAgIHRoaXMubGFzdEFuY2hvcl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLnN0YXJ0VGltZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqL1xuICAgIHRoaXMudGltZW91dElkXztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge01vZGV8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMubW9kZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBUcmFja3BhZCBldmVudHMgc2VwYXJhdGVkIGJ5IHRoaXMgZGVsYXkgd2lsbCBiZSBjb25zaWRlcmVkIHNlcGFyYXRlXG4gICAgICogaW50ZXJhY3Rpb25zLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50cmFja3BhZEV2ZW50R2FwXyA9IDQwMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqL1xuICAgIHRoaXMudHJhY2twYWRUaW1lb3V0SWRfO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBkZWx0YSB2YWx1ZXMgcGVyIHpvb20gbGV2ZWxcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50cmFja3BhZERlbHRhUGVyWm9vbV8gPSAzMDA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgem9vbSBmYWN0b3IgYnkgd2hpY2ggc2Nyb2xsIHpvb21pbmcgaXMgYWxsb3dlZCB0byBleGNlZWQgdGhlIGxpbWl0cy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50cmFja3BhZFpvb21CdWZmZXJfID0gMS41O1xuXG4gIH1cblxuICBpZiAoIEludGVyYWN0aW9uICkgTW91c2VXaGVlbFpvb20uX19wcm90b19fID0gSW50ZXJhY3Rpb247XG4gIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEludGVyYWN0aW9uICYmIEludGVyYWN0aW9uLnByb3RvdHlwZSApO1xuICBNb3VzZVdoZWVsWm9vbS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNb3VzZVdoZWVsWm9vbTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5kZWNyZW1lbnRJbnRlcmFjdGluZ0hpbnRfID0gZnVuY3Rpb24gZGVjcmVtZW50SW50ZXJhY3RpbmdIaW50XyAoKSB7XG4gICAgdGhpcy50cmFja3BhZFRpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgdmFyIHZpZXcgPSB0aGlzLmdldE1hcCgpLmdldFZpZXcoKTtcbiAgICB2aWV3LnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIC0xKTtcbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IChpZiBpdCB3YXMgYSBtb3VzZXdoZWVsLWV2ZW50KSBhbmQgZXZlbnR1YWxseVxuICAgKiB6b29tcyB0aGUgbWFwLlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZUV2ZW50IChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIHR5cGUgPSBtYXBCcm93c2VyRXZlbnQudHlwZTtcbiAgICBpZiAodHlwZSAhPT0gRXZlbnRUeXBlLldIRUVMICYmIHR5cGUgIT09IEV2ZW50VHlwZS5NT1VTRVdIRUVMKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBtYXBCcm93c2VyRXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIHZhciB3aGVlbEV2ZW50ID0gLyoqIEB0eXBlIHtXaGVlbEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuXG4gICAgaWYgKHRoaXMudXNlQW5jaG9yXykge1xuICAgICAgdGhpcy5sYXN0QW5jaG9yXyA9IG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlO1xuICAgIH1cblxuICAgIC8vIERlbHRhIG5vcm1hbGlzYXRpb24gaW5zcGlyZWQgYnlcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L21hcGJveC1nbC1qcy9ibG9iLzAwMWM3YjkvanMvdWkvaGFuZGxlci9zY3JvbGxfem9vbS5qc1xuICAgIHZhciBkZWx0YTtcbiAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLldIRUVMKSB7XG4gICAgICBkZWx0YSA9IHdoZWVsRXZlbnQuZGVsdGFZO1xuICAgICAgaWYgKEZJUkVGT1ggJiZcbiAgICAgICAgICB3aGVlbEV2ZW50LmRlbHRhTW9kZSA9PT0gV2hlZWxFdmVudC5ET01fREVMVEFfUElYRUwpIHtcbiAgICAgICAgZGVsdGEgLz0gREVWSUNFX1BJWEVMX1JBVElPO1xuICAgICAgfVxuICAgICAgaWYgKHdoZWVsRXZlbnQuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9MSU5FKSB7XG4gICAgICAgIGRlbHRhICo9IDQwO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLk1PVVNFV0hFRUwpIHtcbiAgICAgIGRlbHRhID0gLXdoZWVsRXZlbnQud2hlZWxEZWx0YVk7XG4gICAgICBpZiAoU0FGQVJJKSB7XG4gICAgICAgIGRlbHRhIC89IDM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRlbHRhID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG5cbiAgICBpZiAodGhpcy5zdGFydFRpbWVfID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuc3RhcnRUaW1lXyA9IG5vdztcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubW9kZV8gfHwgbm93IC0gdGhpcy5zdGFydFRpbWVfID4gdGhpcy50cmFja3BhZEV2ZW50R2FwXykge1xuICAgICAgdGhpcy5tb2RlXyA9IE1hdGguYWJzKGRlbHRhKSA8IDQgP1xuICAgICAgICBNb2RlLlRSQUNLUEFEIDpcbiAgICAgICAgTW9kZS5XSEVFTDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5tb2RlXyA9PT0gTW9kZS5UUkFDS1BBRCkge1xuICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgaWYgKHRoaXMudHJhY2twYWRUaW1lb3V0SWRfKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRyYWNrcGFkVGltZW91dElkXyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2aWV3LnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIDEpO1xuICAgICAgfVxuICAgICAgdGhpcy50cmFja3BhZFRpbWVvdXRJZF8gPSBzZXRUaW1lb3V0KHRoaXMuZGVjcmVtZW50SW50ZXJhY3RpbmdIaW50Xy5iaW5kKHRoaXMpLCB0aGlzLnRyYWNrcGFkRXZlbnRHYXBfKTtcbiAgICAgIHZhciByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCkgKiBNYXRoLnBvdygyLCBkZWx0YSAvIHRoaXMudHJhY2twYWREZWx0YVBlclpvb21fKTtcbiAgICAgIHZhciBtaW5SZXNvbHV0aW9uID0gdmlldy5nZXRNaW5SZXNvbHV0aW9uKCk7XG4gICAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IHZpZXcuZ2V0TWF4UmVzb2x1dGlvbigpO1xuICAgICAgdmFyIHJlYm91bmQgPSAwO1xuICAgICAgaWYgKHJlc29sdXRpb24gPCBtaW5SZXNvbHV0aW9uKSB7XG4gICAgICAgIHJlc29sdXRpb24gPSBNYXRoLm1heChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uIC8gdGhpcy50cmFja3BhZFpvb21CdWZmZXJfKTtcbiAgICAgICAgcmVib3VuZCA9IDE7XG4gICAgICB9IGVsc2UgaWYgKHJlc29sdXRpb24gPiBtYXhSZXNvbHV0aW9uKSB7XG4gICAgICAgIHJlc29sdXRpb24gPSBNYXRoLm1pbihyZXNvbHV0aW9uLCBtYXhSZXNvbHV0aW9uICogdGhpcy50cmFja3BhZFpvb21CdWZmZXJfKTtcbiAgICAgICAgcmVib3VuZCA9IC0xO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubGFzdEFuY2hvcl8pIHtcbiAgICAgICAgdmFyIGNlbnRlciA9IHZpZXcuY2FsY3VsYXRlQ2VudGVyWm9vbShyZXNvbHV0aW9uLCB0aGlzLmxhc3RBbmNob3JfKTtcbiAgICAgICAgdmlldy5zZXRDZW50ZXIodmlldy5jb25zdHJhaW5DZW50ZXIoY2VudGVyKSk7XG4gICAgICB9XG4gICAgICB2aWV3LnNldFJlc29sdXRpb24ocmVzb2x1dGlvbik7XG5cbiAgICAgIGlmIChyZWJvdW5kID09PSAwICYmIHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbl8pIHtcbiAgICAgICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgICByZXNvbHV0aW9uOiB2aWV3LmNvbnN0cmFpblJlc29sdXRpb24ocmVzb2x1dGlvbiwgZGVsdGEgPiAwID8gLTEgOiAxKSxcbiAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgYW5jaG9yOiB0aGlzLmxhc3RBbmNob3JfLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uX1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlYm91bmQgPiAwKSB7XG4gICAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgICAgcmVzb2x1dGlvbjogbWluUmVzb2x1dGlvbixcbiAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgYW5jaG9yOiB0aGlzLmxhc3RBbmNob3JfLFxuICAgICAgICAgIGR1cmF0aW9uOiA1MDBcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHJlYm91bmQgPCAwKSB7XG4gICAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgICAgcmVzb2x1dGlvbjogbWF4UmVzb2x1dGlvbixcbiAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgYW5jaG9yOiB0aGlzLmxhc3RBbmNob3JfLFxuICAgICAgICAgIGR1cmF0aW9uOiA1MDBcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXJ0VGltZV8gPSBub3c7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5kZWx0YV8gKz0gZGVsdGE7XG5cbiAgICB2YXIgdGltZUxlZnQgPSBNYXRoLm1heCh0aGlzLnRpbWVvdXRfIC0gKG5vdyAtIHRoaXMuc3RhcnRUaW1lXyksIDApO1xuXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkXyk7XG4gICAgdGhpcy50aW1lb3V0SWRfID0gc2V0VGltZW91dCh0aGlzLmhhbmRsZVdoZWVsWm9vbV8uYmluZCh0aGlzLCBtYXApLCB0aW1lTGVmdCk7XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAqL1xuICBNb3VzZVdoZWVsWm9vbS5wcm90b3R5cGUuaGFuZGxlV2hlZWxab29tXyA9IGZ1bmN0aW9uIGhhbmRsZVdoZWVsWm9vbV8gKG1hcCkge1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAodmlldy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgfVxuICAgIHZhciBtYXhEZWx0YSA9IE1BWF9ERUxUQTtcbiAgICB2YXIgZGVsdGEgPSBjbGFtcCh0aGlzLmRlbHRhXywgLW1heERlbHRhLCBtYXhEZWx0YSk7XG4gICAgem9vbUJ5RGVsdGEodmlldywgLWRlbHRhLCB0aGlzLmxhc3RBbmNob3JfLCB0aGlzLmR1cmF0aW9uXyk7XG4gICAgdGhpcy5tb2RlXyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmRlbHRhXyA9IDA7XG4gICAgdGhpcy5sYXN0QW5jaG9yXyA9IG51bGw7XG4gICAgdGhpcy5zdGFydFRpbWVfID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudGltZW91dElkXyA9IHVuZGVmaW5lZDtcbiAgfTtcblxuICAvKipcbiAgICogRW5hYmxlIG9yIGRpc2FibGUgdXNpbmcgdGhlIG1vdXNlJ3MgbG9jYXRpb24gYXMgYW4gYW5jaG9yIHdoZW4gem9vbWluZ1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUFuY2hvciB0cnVlIHRvIHpvb20gdG8gdGhlIG1vdXNlJ3MgbG9jYXRpb24sIGZhbHNlXG4gICAqIHRvIHpvb20gdG8gdGhlIGNlbnRlciBvZiB0aGUgbWFwXG4gICAqIEBhcGlcbiAgICovXG4gIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5zZXRNb3VzZUFuY2hvciA9IGZ1bmN0aW9uIHNldE1vdXNlQW5jaG9yICh1c2VBbmNob3IpIHtcbiAgICB0aGlzLnVzZUFuY2hvcl8gPSB1c2VBbmNob3I7XG4gICAgaWYgKCF1c2VBbmNob3IpIHtcbiAgICAgIHRoaXMubGFzdEFuY2hvcl8gPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gTW91c2VXaGVlbFpvb207XG59KEludGVyYWN0aW9uKSk7XG5cbmV4cG9ydCBkZWZhdWx0IE1vdXNlV2hlZWxab29tO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Nb3VzZVdoZWVsWm9vbS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUGluY2hSb3RhdGVcbiAqL1xuaW1wb3J0IFZpZXdIaW50IGZyb20gJy4uL1ZpZXdIaW50LmpzJztcbmltcG9ydCB7RkFMU0V9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQge3JvdGF0ZSwgcm90YXRlV2l0aG91dENvbnN0cmFpbnRzfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHtjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVyc30gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCB7ZGlzYWJsZX0gZnJvbSAnLi4vcm90YXRpb25jb25zdHJhaW50LmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBUaGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbiBpblxuICogbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aHJlc2hvbGQ9MC4zXSBNaW5pbWFsIGFuZ2xlIGluIHJhZGlhbnMgdG8gc3RhcnQgYSByb3RhdGlvbi5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHJvdGF0ZSB0aGUgbWFwIGJ5IHR3aXN0aW5nIHdpdGggdHdvIGZpbmdlcnNcbiAqIG9uIGEgdG91Y2ggc2NyZWVuLlxuICogQGFwaVxuICovXG52YXIgUGluY2hSb3RhdGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChQb2ludGVySW50ZXJhY3Rpb24pIHtcbiAgZnVuY3Rpb24gUGluY2hSb3RhdGUob3B0X29wdGlvbnMpIHtcblxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gICAgdmFyIHBvaW50ZXJPcHRpb25zID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1BvaW50ZXIuanNcIikuT3B0aW9uc30gKi8gKG9wdGlvbnMpO1xuXG4gICAgaWYgKCFwb2ludGVyT3B0aW9ucy5zdG9wRG93bikge1xuICAgICAgcG9pbnRlck9wdGlvbnMuc3RvcERvd24gPSBGQUxTRTtcbiAgICB9XG5cbiAgICBQb2ludGVySW50ZXJhY3Rpb24uY2FsbCh0aGlzLCBwb2ludGVyT3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICovXG4gICAgdGhpcy5hbmNob3JfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnJvdGF0aW5nXyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucm90YXRpb25EZWx0YV8gPSAwLjA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50aHJlc2hvbGRfID0gb3B0aW9ucy50aHJlc2hvbGQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGhyZXNob2xkIDogMC4zO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcblxuICB9XG5cbiAgaWYgKCBQb2ludGVySW50ZXJhY3Rpb24gKSBQaW5jaFJvdGF0ZS5fX3Byb3RvX18gPSBQb2ludGVySW50ZXJhY3Rpb247XG4gIFBpbmNoUm90YXRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBvaW50ZXJJbnRlcmFjdGlvbiAmJiBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlICk7XG4gIFBpbmNoUm90YXRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBpbmNoUm90YXRlO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUGluY2hSb3RhdGUucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURyYWdFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHJvdGF0aW9uRGVsdGEgPSAwLjA7XG5cbiAgICB2YXIgdG91Y2gwID0gdGhpcy50YXJnZXRQb2ludGVyc1swXTtcbiAgICB2YXIgdG91Y2gxID0gdGhpcy50YXJnZXRQb2ludGVyc1sxXTtcblxuICAgIC8vIGFuZ2xlIGJldHdlZW4gdG91Y2hlc1xuICAgIHZhciBhbmdsZSA9IE1hdGguYXRhbjIoXG4gICAgICB0b3VjaDEuY2xpZW50WSAtIHRvdWNoMC5jbGllbnRZLFxuICAgICAgdG91Y2gxLmNsaWVudFggLSB0b3VjaDAuY2xpZW50WCk7XG5cbiAgICBpZiAodGhpcy5sYXN0QW5nbGVfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBkZWx0YSA9IGFuZ2xlIC0gdGhpcy5sYXN0QW5nbGVfO1xuICAgICAgdGhpcy5yb3RhdGlvbkRlbHRhXyArPSBkZWx0YTtcbiAgICAgIGlmICghdGhpcy5yb3RhdGluZ18gJiZcbiAgICAgICAgICBNYXRoLmFicyh0aGlzLnJvdGF0aW9uRGVsdGFfKSA+IHRoaXMudGhyZXNob2xkXykge1xuICAgICAgICB0aGlzLnJvdGF0aW5nXyA9IHRydWU7XG4gICAgICB9XG4gICAgICByb3RhdGlvbkRlbHRhID0gZGVsdGE7XG4gICAgfVxuICAgIHRoaXMubGFzdEFuZ2xlXyA9IGFuZ2xlO1xuXG4gICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIGlmICh2aWV3LmdldENvbnN0cmFpbnRzKCkucm90YXRpb24gPT09IGRpc2FibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyByb3RhdGUgYW5jaG9yIHBvaW50LlxuICAgIC8vIEZJWE1FOiBzaG91bGQgYmUgdGhlIGludGVyc2VjdGlvbiBwb2ludCBiZXR3ZWVuIHRoZSBsaW5lczpcbiAgICAvLyAgICAgdG91Y2gwLHRvdWNoMSBhbmQgcHJldmlvdXNUb3VjaDAscHJldmlvdXNUb3VjaDFcbiAgICB2YXIgdmlld3BvcnRQb3NpdGlvbiA9IG1hcC5nZXRWaWV3cG9ydCgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHZhciBjZW50cm9pZCA9IGNlbnRyb2lkRnJvbVBvaW50ZXJzKHRoaXMudGFyZ2V0UG9pbnRlcnMpO1xuICAgIGNlbnRyb2lkWzBdIC09IHZpZXdwb3J0UG9zaXRpb24ubGVmdDtcbiAgICBjZW50cm9pZFsxXSAtPSB2aWV3cG9ydFBvc2l0aW9uLnRvcDtcbiAgICB0aGlzLmFuY2hvcl8gPSBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbChjZW50cm9pZCk7XG5cbiAgICAvLyByb3RhdGVcbiAgICBpZiAodGhpcy5yb3RhdGluZ18pIHtcbiAgICAgIHZhciByb3RhdGlvbiA9IHZpZXcuZ2V0Um90YXRpb24oKTtcbiAgICAgIG1hcC5yZW5kZXIoKTtcbiAgICAgIHJvdGF0ZVdpdGhvdXRDb25zdHJhaW50cyh2aWV3LCByb3RhdGlvbiArIHJvdGF0aW9uRGVsdGEsIHRoaXMuYW5jaG9yXyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUGluY2hSb3RhdGUucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVVcEV2ZW50IChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPCAyKSB7XG4gICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgIHZpZXcuc2V0SGludChWaWV3SGludC5JTlRFUkFDVElORywgLTEpO1xuICAgICAgaWYgKHRoaXMucm90YXRpbmdfKSB7XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHZpZXcuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgcm90YXRlKHZpZXcsIHJvdGF0aW9uLCB0aGlzLmFuY2hvcl8sIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUGluY2hSb3RhdGUucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURvd25FdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID49IDIpIHtcbiAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgdGhpcy5hbmNob3JfID0gbnVsbDtcbiAgICAgIHRoaXMubGFzdEFuZ2xlXyA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMucm90YXRpbmdfID0gZmFsc2U7XG4gICAgICB0aGlzLnJvdGF0aW9uRGVsdGFfID0gMC4wO1xuICAgICAgaWYgKCF0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UpIHtcbiAgICAgICAgbWFwLmdldFZpZXcoKS5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAxKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBQaW5jaFJvdGF0ZTtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5cbmV4cG9ydCBkZWZhdWx0IFBpbmNoUm90YXRlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1QaW5jaFJvdGF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUGluY2hab29tXG4gKi9cbmltcG9ydCBWaWV3SGludCBmcm9tICcuLi9WaWV3SGludC5qcyc7XG5pbXBvcnQge0ZBTFNFfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHt6b29tLCB6b29tV2l0aG91dENvbnN0cmFpbnRzfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHtjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVyc30gZnJvbSAnLi9Qb2ludGVyLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249NDAwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29uc3RyYWluUmVzb2x1dGlvbj1mYWxzZV0gWm9vbSB0byB0aGUgY2xvc2VzdCBpbnRlZ2VyXG4gKiB6b29tIGxldmVsIGFmdGVyIHRoZSBwaW5jaCBnZXN0dXJlIGVuZHMuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgYnkgcGluY2hpbmcgd2l0aCB0d28gZmluZ2Vyc1xuICogb24gYSB0b3VjaCBzY3JlZW4uXG4gKiBAYXBpXG4gKi9cbnZhciBQaW5jaFpvb20gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChQb2ludGVySW50ZXJhY3Rpb24pIHtcbiAgZnVuY3Rpb24gUGluY2hab29tKG9wdF9vcHRpb25zKSB7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcblxuICAgIHZhciBwb2ludGVyT3B0aW9ucyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9Qb2ludGVyLmpzXCIpLk9wdGlvbnN9ICovIChvcHRpb25zKTtcblxuICAgIGlmICghcG9pbnRlck9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgIHBvaW50ZXJPcHRpb25zLnN0b3BEb3duID0gRkFMU0U7XG4gICAgfVxuXG4gICAgUG9pbnRlckludGVyYWN0aW9uLmNhbGwodGhpcywgcG9pbnRlck9wdGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmNvbnN0cmFpblJlc29sdXRpb25fID0gb3B0aW9ucy5jb25zdHJhaW5SZXNvbHV0aW9uIHx8IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqL1xuICAgIHRoaXMuYW5jaG9yXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogNDAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5sYXN0U2NhbGVEZWx0YV8gPSAxO1xuXG4gIH1cblxuICBpZiAoIFBvaW50ZXJJbnRlcmFjdGlvbiApIFBpbmNoWm9vbS5fX3Byb3RvX18gPSBQb2ludGVySW50ZXJhY3Rpb247XG4gIFBpbmNoWm9vbS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQb2ludGVySW50ZXJhY3Rpb24gJiYgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZSApO1xuICBQaW5jaFpvb20ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUGluY2hab29tO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUGluY2hab29tLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVEcmFnRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBzY2FsZURlbHRhID0gMS4wO1xuXG4gICAgdmFyIHRvdWNoMCA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMF07XG4gICAgdmFyIHRvdWNoMSA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMV07XG4gICAgdmFyIGR4ID0gdG91Y2gwLmNsaWVudFggLSB0b3VjaDEuY2xpZW50WDtcbiAgICB2YXIgZHkgPSB0b3VjaDAuY2xpZW50WSAtIHRvdWNoMS5jbGllbnRZO1xuXG4gICAgLy8gZGlzdGFuY2UgYmV0d2VlbiB0b3VjaGVzXG4gICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcblxuICAgIGlmICh0aGlzLmxhc3REaXN0YW5jZV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgc2NhbGVEZWx0YSA9IHRoaXMubGFzdERpc3RhbmNlXyAvIGRpc3RhbmNlO1xuICAgIH1cbiAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSBkaXN0YW5jZTtcblxuXG4gICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIHZhciByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgdmFyIG1heFJlc29sdXRpb24gPSB2aWV3LmdldE1heFJlc29sdXRpb24oKTtcbiAgICB2YXIgbWluUmVzb2x1dGlvbiA9IHZpZXcuZ2V0TWluUmVzb2x1dGlvbigpO1xuICAgIHZhciBuZXdSZXNvbHV0aW9uID0gcmVzb2x1dGlvbiAqIHNjYWxlRGVsdGE7XG4gICAgaWYgKG5ld1Jlc29sdXRpb24gPiBtYXhSZXNvbHV0aW9uKSB7XG4gICAgICBzY2FsZURlbHRhID0gbWF4UmVzb2x1dGlvbiAvIHJlc29sdXRpb247XG4gICAgICBuZXdSZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbjtcbiAgICB9IGVsc2UgaWYgKG5ld1Jlc29sdXRpb24gPCBtaW5SZXNvbHV0aW9uKSB7XG4gICAgICBzY2FsZURlbHRhID0gbWluUmVzb2x1dGlvbiAvIHJlc29sdXRpb247XG4gICAgICBuZXdSZXNvbHV0aW9uID0gbWluUmVzb2x1dGlvbjtcbiAgICB9XG5cbiAgICBpZiAoc2NhbGVEZWx0YSAhPSAxLjApIHtcbiAgICAgIHRoaXMubGFzdFNjYWxlRGVsdGFfID0gc2NhbGVEZWx0YTtcbiAgICB9XG5cbiAgICAvLyBzY2FsZSBhbmNob3IgcG9pbnQuXG4gICAgdmFyIHZpZXdwb3J0UG9zaXRpb24gPSBtYXAuZ2V0Vmlld3BvcnQoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgY2VudHJvaWQgPSBjZW50cm9pZEZyb21Qb2ludGVycyh0aGlzLnRhcmdldFBvaW50ZXJzKTtcbiAgICBjZW50cm9pZFswXSAtPSB2aWV3cG9ydFBvc2l0aW9uLmxlZnQ7XG4gICAgY2VudHJvaWRbMV0gLT0gdmlld3BvcnRQb3NpdGlvbi50b3A7XG4gICAgdGhpcy5hbmNob3JfID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwoY2VudHJvaWQpO1xuXG4gICAgLy8gc2NhbGUsIGJ5cGFzcyB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50XG4gICAgbWFwLnJlbmRlcigpO1xuICAgIHpvb21XaXRob3V0Q29uc3RyYWludHModmlldywgbmV3UmVzb2x1dGlvbiwgdGhpcy5hbmNob3JfKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFBpbmNoWm9vbS5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZVVwRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA8IDIpIHtcbiAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgdmlldy5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAtMSk7XG4gICAgICB2YXIgcmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbigpO1xuICAgICAgaWYgKHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbl8gfHxcbiAgICAgICAgICByZXNvbHV0aW9uIDwgdmlldy5nZXRNaW5SZXNvbHV0aW9uKCkgfHxcbiAgICAgICAgICByZXNvbHV0aW9uID4gdmlldy5nZXRNYXhSZXNvbHV0aW9uKCkpIHtcbiAgICAgICAgLy8gWm9vbSB0byBmaW5hbCByZXNvbHV0aW9uLCB3aXRoIGFuIGFuaW1hdGlvbiwgYW5kIHByb3ZpZGUgYVxuICAgICAgICAvLyBkaXJlY3Rpb24gbm90IHRvIHpvb20gb3V0L2luIGlmIHVzZXIgd2FzIHBpbmNoaW5nIGluL291dC5cbiAgICAgICAgLy8gRGlyZWN0aW9uIGlzID4gMCBpZiBwaW5jaGluZyBvdXQsIGFuZCA8IDAgaWYgcGluY2hpbmcgaW4uXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLmxhc3RTY2FsZURlbHRhXyAtIDE7XG4gICAgICAgIHpvb20odmlldywgcmVzb2x1dGlvbiwgdGhpcy5hbmNob3JfLCB0aGlzLmR1cmF0aW9uXywgZGlyZWN0aW9uKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUGluY2hab29tLnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVEb3duRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+PSAyKSB7XG4gICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIHRoaXMuYW5jaG9yXyA9IG51bGw7XG4gICAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmxhc3RTY2FsZURlbHRhXyA9IDE7XG4gICAgICBpZiAoIXRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSkge1xuICAgICAgICBtYXAuZ2V0VmlldygpLnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIDEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFBpbmNoWm9vbTtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5cbmV4cG9ydCBkZWZhdWx0IFBpbmNoWm9vbTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGluY2hab29tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2ovY29tbW9uXG4gKi9cblxuLyoqXG4gKiBEZWZhdWx0IG1heGltdW0gYWxsb3dlZCB0aHJlc2hvbGQgIChpbiBwaXhlbHMpIGZvciByZXByb2plY3Rpb25cbiAqIHRyaWFuZ3VsYXRpb24uXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIEVSUk9SX1RIUkVTSE9MRCA9IDAuNTtcblxuLyoqXG4gKiBFbmFibGUgYXV0b21hdGljIHJlcHJvamVjdGlvbiBvZiByYXN0ZXIgc291cmNlcy4gRGVmYXVsdCBpcyBgdHJ1ZWAuXG4gKiBUT0RPOiBkZWNpZGUgaWYgd2Ugd2FudCB0byBleHBvc2UgdGhpcyBhcyBhIGJ1aWxkIGZsYWcgb3IgcmVtb3ZlIGl0XG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiA9IHRydWU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvSW1hZ2VTdGF0ZVxuICovXG5cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBJRExFOiAwLFxuICBMT0FESU5HOiAxLFxuICBMT0FERUQ6IDIsXG4gIEVSUk9SOiAzXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZVN0YXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9JbWFnZUNhbnZhc1xuICovXG5pbXBvcnQgSW1hZ2VCYXNlIGZyb20gJy4vSW1hZ2VCYXNlLmpzJztcbmltcG9ydCBJbWFnZVN0YXRlIGZyb20gJy4vSW1hZ2VTdGF0ZS5qcyc7XG5cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHRvIHRyaWdnZXIgYXN5bmNocm9ub3VzIGNhbnZhcyBkcmF3aW5nLiAgSXQgaXNcbiAqIGNhbGxlZCB3aXRoIGEgXCJkb25lXCIgY2FsbGJhY2sgdGhhdCBzaG91bGQgYmUgY2FsbGVkIHdoZW4gZHJhd2luZyBpcyBkb25lLlxuICogSWYgYW55IGVycm9yIG9jY3VycyBkdXJpbmcgZHJhd2luZywgdGhlIFwiZG9uZVwiIGNhbGxiYWNrIHNob3VsZCBiZSBjYWxsZWQgd2l0aFxuICogdGhhdCBlcnJvci5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oZnVuY3Rpb24oRXJyb3I9KSl9IExvYWRlclxuICovXG5cblxudmFyIEltYWdlQ2FudmFzID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoSW1hZ2VCYXNlKSB7XG4gIGZ1bmN0aW9uIEltYWdlQ2FudmFzKGV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgY2FudmFzLCBvcHRfbG9hZGVyKSB7XG5cbiAgICB2YXIgc3RhdGUgPSBvcHRfbG9hZGVyICE9PSB1bmRlZmluZWQgPyBJbWFnZVN0YXRlLklETEUgOiBJbWFnZVN0YXRlLkxPQURFRDtcblxuICAgIEltYWdlQmFzZS5jYWxsKHRoaXMsIGV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgc3RhdGUpO1xuXG4gICAgLyoqXG4gICAgICogT3B0aW9uYWwgY2FudmFzIGxvYWRlciBmdW5jdGlvbi5cbiAgICAgKiBAdHlwZSB7P0xvYWRlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubG9hZGVyXyA9IG9wdF9sb2FkZXIgIT09IHVuZGVmaW5lZCA/IG9wdF9sb2FkZXIgOiBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5jYW52YXNfID0gY2FudmFzO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7RXJyb3J9XG4gICAgICovXG4gICAgdGhpcy5lcnJvcl8gPSBudWxsO1xuXG4gIH1cblxuICBpZiAoIEltYWdlQmFzZSApIEltYWdlQ2FudmFzLl9fcHJvdG9fXyA9IEltYWdlQmFzZTtcbiAgSW1hZ2VDYW52YXMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggSW1hZ2VCYXNlICYmIEltYWdlQmFzZS5wcm90b3R5cGUgKTtcbiAgSW1hZ2VDYW52YXMucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSW1hZ2VDYW52YXM7XG5cbiAgLyoqXG4gICAqIEdldCBhbnkgZXJyb3IgYXNzb2NpYXRlZCB3aXRoIGFzeW5jaHJvbm91cyByZW5kZXJpbmcuXG4gICAqIEByZXR1cm4ge0Vycm9yfSBBbnkgZXJyb3IgdGhhdCBvY2N1cnJlZCBkdXJpbmcgcmVuZGVyaW5nLlxuICAgKi9cbiAgSW1hZ2VDYW52YXMucHJvdG90eXBlLmdldEVycm9yID0gZnVuY3Rpb24gZ2V0RXJyb3IgKCkge1xuICAgIHJldHVybiB0aGlzLmVycm9yXztcbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlIGFzeW5jIGRyYXdpbmcgY29tcGxldGUuXG4gICAqIEBwYXJhbSB7RXJyb3I9fSBlcnIgQW55IGVycm9yIGR1cmluZyBkcmF3aW5nLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgSW1hZ2VDYW52YXMucHJvdG90eXBlLmhhbmRsZUxvYWRfID0gZnVuY3Rpb24gaGFuZGxlTG9hZF8gKGVycikge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHRoaXMuZXJyb3JfID0gZXJyO1xuICAgICAgdGhpcy5zdGF0ZSA9IEltYWdlU3RhdGUuRVJST1I7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBJbWFnZVN0YXRlLkxPQURFRDtcbiAgICB9XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBJbWFnZUNhbnZhcy5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIGxvYWQgKCkge1xuICAgIGlmICh0aGlzLnN0YXRlID09IEltYWdlU3RhdGUuSURMRSkge1xuICAgICAgdGhpcy5zdGF0ZSA9IEltYWdlU3RhdGUuTE9BRElORztcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgdGhpcy5sb2FkZXJfKHRoaXMuaGFuZGxlTG9hZF8uYmluZCh0aGlzKSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gQ2FudmFzIGVsZW1lbnQuXG4gICAqL1xuICBJbWFnZUNhbnZhcy5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiBnZXRJbWFnZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FudmFzXztcbiAgfTtcblxuICByZXR1cm4gSW1hZ2VDYW52YXM7XG59KEltYWdlQmFzZSkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IEltYWdlQ2FudmFzO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZUNhbnZhcy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvSW1hZ2VCYXNlXG4gKi9cbmltcG9ydCB7YWJzdHJhY3R9IGZyb20gJy4vdXRpbC5qcyc7XG5pbXBvcnQgRXZlbnRUYXJnZXQgZnJvbSAnLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcblxuLyoqXG4gKiBAYWJzdHJhY3RcbiAqL1xudmFyIEltYWdlQmFzZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50VGFyZ2V0KSB7XG4gIGZ1bmN0aW9uIEltYWdlQmFzZShleHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIHN0YXRlKSB7XG5cbiAgICBFdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICovXG4gICAgdGhpcy5leHRlbnQgPSBleHRlbnQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5waXhlbFJhdGlvXyA9IHBpeGVsUmF0aW87XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuXG4gIH1cblxuICBpZiAoIEV2ZW50VGFyZ2V0ICkgSW1hZ2VCYXNlLl9fcHJvdG9fXyA9IEV2ZW50VGFyZ2V0O1xuICBJbWFnZUJhc2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnRUYXJnZXQgJiYgRXZlbnRUYXJnZXQucHJvdG90eXBlICk7XG4gIEltYWdlQmFzZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBJbWFnZUJhc2U7XG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIEltYWdlQmFzZS5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uIGNoYW5nZWQgKCkge1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChFdmVudFR5cGUuQ0hBTkdFKTtcbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAqL1xuICBJbWFnZUJhc2UucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uIGdldEV4dGVudCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZXh0ZW50O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBJbWFnZS5cbiAgICovXG4gIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiBnZXRJbWFnZSAoKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gUGl4ZWxSYXRpby5cbiAgICovXG4gIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0UGl4ZWxSYXRpbyA9IGZ1bmN0aW9uIGdldFBpeGVsUmF0aW8gKCkge1xuICAgIHJldHVybiB0aGlzLnBpeGVsUmF0aW9fO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24uXG4gICAqL1xuICBJbWFnZUJhc2UucHJvdG90eXBlLmdldFJlc29sdXRpb24gPSBmdW5jdGlvbiBnZXRSZXNvbHV0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLnJlc29sdXRpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0ltYWdlU3RhdGUuanNcIikuZGVmYXVsdH0gU3RhdGUuXG4gICAqL1xuICBJbWFnZUJhc2UucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gZ2V0U3RhdGUgKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBMb2FkIG5vdCB5ZXQgbG9hZGVkIFVSSS5cbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBJbWFnZUJhc2UucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiBsb2FkICgpIHtcbiAgICBhYnN0cmFjdCgpO1xuICB9O1xuXG4gIHJldHVybiBJbWFnZUJhc2U7XG59KEV2ZW50VGFyZ2V0KSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VCYXNlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZUJhc2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0xheWVyVHlwZVxuICovXG5cbi8qKlxuICogQSBsYXllciB0eXBlIHVzZWQgd2hlbiBjcmVhdGluZyBsYXllciByZW5kZXJlcnMuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIElNQUdFOiAnSU1BR0UnLFxuICBUSUxFOiAnVElMRScsXG4gIFZFQ1RPUl9USUxFOiAnVkVDVE9SX1RJTEUnLFxuICBWRUNUT1I6ICdWRUNUT1InXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1MYXllclR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1ZlY3RvclJlbmRlclR5cGVcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBSZW5kZXIgbW9kZSBmb3IgdmVjdG9yIGxheWVyczpcbiAqICAqIGAnaW1hZ2UnYDogVmVjdG9yIGxheWVycyBhcmUgcmVuZGVyZWQgYXMgaW1hZ2VzLiBHcmVhdCBwZXJmb3JtYW5jZSwgYnV0XG4gKiAgICBwb2ludCBzeW1ib2xzIGFuZCB0ZXh0cyBhcmUgYWx3YXlzIHJvdGF0ZWQgd2l0aCB0aGUgdmlldyBhbmQgcGl4ZWxzIGFyZVxuICogICAgc2NhbGVkIGR1cmluZyB6b29tIGFuaW1hdGlvbnMuXG4gKiAgKiBgJ3ZlY3RvcidgOiBWZWN0b3IgbGF5ZXJzIGFyZSByZW5kZXJlZCBhcyB2ZWN0b3JzLiBNb3N0IGFjY3VyYXRlIHJlbmRlcmluZ1xuICogICAgZXZlbiBkdXJpbmcgYW5pbWF0aW9ucywgYnV0IHNsb3dlciBwZXJmb3JtYW5jZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBJTUFHRTogJ2ltYWdlJyxcbiAgVkVDVE9SOiAndmVjdG9yJ1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yUmVuZGVyVHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL0V2ZW50XG4gKi9cblxuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG5cbnZhciBSZW5kZXJFdmVudCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50KSB7XG4gIGZ1bmN0aW9uIFJlbmRlckV2ZW50KHR5cGUsIG9wdF92ZWN0b3JDb250ZXh0LCBvcHRfZnJhbWVTdGF0ZSwgb3B0X2NvbnRleHQsIG9wdF9nbENvbnRleHQpIHtcblxuICAgIEV2ZW50LmNhbGwodGhpcywgdHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBGb3IgY2FudmFzLCB0aGlzIGlzIGFuIGluc3RhbmNlIG9mIHtAbGluayBtb2R1bGU6b2wvcmVuZGVyL2NhbnZhcy9JbW1lZGlhdGV9LlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1ZlY3RvckNvbnRleHQuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMudmVjdG9yQ29udGV4dCA9IG9wdF92ZWN0b3JDb250ZXh0O1xuXG4gICAgLyoqXG4gICAgICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCByZW5kZXIgZnJhbWUgc3RhdGUuXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfHVuZGVmaW5lZH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5mcmFtZVN0YXRlID0gb3B0X2ZyYW1lU3RhdGU7XG5cbiAgICAvKipcbiAgICAgKiBDYW52YXMgY29udGV4dC4gT25seSBhdmFpbGFibGUgd2hlbiBhIENhbnZhcyByZW5kZXJlciBpcyB1c2VkLCBudWxsXG4gICAgICogb3RoZXJ3aXNlLlxuICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8bnVsbHx1bmRlZmluZWR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuY29udGV4dCA9IG9wdF9jb250ZXh0O1xuXG4gICAgLyoqXG4gICAgICogV2ViR0wgY29udGV4dC4gT25seSBhdmFpbGFibGUgd2hlbiBhIFdlYkdMIHJlbmRlcmVyIGlzIHVzZWQsIG51bGxcbiAgICAgKiBvdGhlcndpc2UuXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3dlYmdsL0NvbnRleHQuanNcIikuZGVmYXVsdHxudWxsfHVuZGVmaW5lZH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5nbENvbnRleHQgPSBvcHRfZ2xDb250ZXh0O1xuXG4gIH1cblxuICBpZiAoIEV2ZW50ICkgUmVuZGVyRXZlbnQuX19wcm90b19fID0gRXZlbnQ7XG4gIFJlbmRlckV2ZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2ZW50ICYmIEV2ZW50LnByb3RvdHlwZSApO1xuICBSZW5kZXJFdmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSZW5kZXJFdmVudDtcblxuICByZXR1cm4gUmVuZGVyRXZlbnQ7XG59KEV2ZW50KSk7XG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlckV2ZW50O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3RydWN0cy9MUlVDYWNoZVxuICovXG5cbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBFbnRyeVxuICogQHByb3BlcnR5IHtzdHJpbmd9IGtleV9cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBuZXdlclxuICogQHByb3BlcnR5IHtPYmplY3R9IG9sZGVyXG4gKiBAcHJvcGVydHkgeyp9IHZhbHVlX1xuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBJbXBsZW1lbnRzIGEgTGVhc3QtUmVjZW50bHktVXNlZCBjYWNoZSB3aGVyZSB0aGUga2V5cyBkbyBub3QgY29uZmxpY3Qgd2l0aFxuICogT2JqZWN0J3MgcHJvcGVydGllcyAoZS5nLiAnaGFzT3duUHJvcGVydHknIGlzIG5vdCBhbGxvd2VkIGFzIGEga2V5KS4gRXhwaXJpbmdcbiAqIGl0ZW1zIGZyb20gdGhlIGNhY2hlIGlzIHRoZSByZXNwb25zaWJpbGl0eSBvZiB0aGUgdXNlci5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLkV2ZW50XG4gKiBAdGVtcGxhdGUgVFxuICovXG52YXIgTFJVQ2FjaGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudFRhcmdldCkge1xuICBmdW5jdGlvbiBMUlVDYWNoZShvcHRfaGlnaFdhdGVyTWFyaykge1xuXG4gICAgRXZlbnRUYXJnZXQuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gb3B0X2hpZ2hXYXRlck1hcmsgIT09IHVuZGVmaW5lZCA/IG9wdF9oaWdoV2F0ZXJNYXJrIDogMjA0ODtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmNvdW50XyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgRW50cnk+fVxuICAgICAqL1xuICAgIHRoaXMuZW50cmllc18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9FbnRyeX1cbiAgICAgKi9cbiAgICB0aGlzLm9sZGVzdF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P0VudHJ5fVxuICAgICAqL1xuICAgIHRoaXMubmV3ZXN0XyA9IG51bGw7XG5cbiAgfVxuXG4gIGlmICggRXZlbnRUYXJnZXQgKSBMUlVDYWNoZS5fX3Byb3RvX18gPSBFdmVudFRhcmdldDtcbiAgTFJVQ2FjaGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnRUYXJnZXQgJiYgRXZlbnRUYXJnZXQucHJvdG90eXBlICk7XG4gIExSVUNhY2hlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExSVUNhY2hlO1xuXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbiBleHBpcmUgY2FjaGUuXG4gICAqL1xuICBMUlVDYWNoZS5wcm90b3R5cGUuY2FuRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiBjYW5FeHBpcmVDYWNoZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q291bnQoKSA+IHRoaXMuaGlnaFdhdGVyTWFyaztcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICovXG4gIExSVUNhY2hlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyICgpIHtcbiAgICB0aGlzLmNvdW50XyA9IDA7XG4gICAgdGhpcy5lbnRyaWVzXyA9IHt9O1xuICAgIHRoaXMub2xkZXN0XyA9IG51bGw7XG4gICAgdGhpcy5uZXdlc3RfID0gbnVsbDtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNMRUFSKTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMga2V5LlxuICAgKi9cbiAgTFJVQ2FjaGUucHJvdG90eXBlLmNvbnRhaW5zS2V5ID0gZnVuY3Rpb24gY29udGFpbnNLZXkgKGtleSkge1xuICAgIHJldHVybiB0aGlzLmVudHJpZXNfLmhhc093blByb3BlcnR5KGtleSk7XG4gIH07XG5cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBTLCBULCBzdHJpbmcsIExSVUNhY2hlKTogP30gZiBUaGUgZnVuY3Rpb25cbiAgICogICAgIHRvIGNhbGwgZm9yIGV2ZXJ5IGVudHJ5IGZyb20gdGhlIG9sZGVzdCB0byB0aGUgbmV3ZXIuIFRoaXMgZnVuY3Rpb24gdGFrZXNcbiAgICogICAgIDMgYXJndW1lbnRzICh0aGUgZW50cnkgdmFsdWUsIHRoZSBlbnRyeSBrZXkgYW5kIHRoZSBMUlVDYWNoZSBvYmplY3QpLlxuICAgKiAgICAgVGhlIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkLlxuICAgKiBAcGFyYW0ge1M9fSBvcHRfdGhpcyBUaGUgb2JqZWN0IHRvIHVzZSBhcyBgdGhpc2AgaW4gYGZgLlxuICAgKiBAdGVtcGxhdGUgU1xuICAgKi9cbiAgTFJVQ2FjaGUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiBmb3JFYWNoIChmLCBvcHRfdGhpcykge1xuICAgIHZhciBlbnRyeSA9IHRoaXMub2xkZXN0XztcbiAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgIGYuY2FsbChvcHRfdGhpcywgZW50cnkudmFsdWVfLCBlbnRyeS5rZXlfLCB0aGlzKTtcbiAgICAgIGVudHJ5ID0gZW50cnkubmV3ZXI7XG4gICAgfVxuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgKiBAcmV0dXJuIHtUfSBWYWx1ZS5cbiAgICovXG4gIExSVUNhY2hlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQgKGtleSkge1xuICAgIHZhciBlbnRyeSA9IHRoaXMuZW50cmllc19ba2V5XTtcbiAgICBhc3NlcnQoZW50cnkgIT09IHVuZGVmaW5lZCxcbiAgICAgIDE1KTsgLy8gVHJpZWQgdG8gZ2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGNhY2hlXG4gICAgaWYgKGVudHJ5ID09PSB0aGlzLm5ld2VzdF8pIHtcbiAgICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gICAgfSBlbHNlIGlmIChlbnRyeSA9PT0gdGhpcy5vbGRlc3RfKSB7XG4gICAgICB0aGlzLm9sZGVzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAodGhpcy5vbGRlc3RfLm5ld2VyKTtcbiAgICAgIHRoaXMub2xkZXN0Xy5vbGRlciA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXI7XG4gICAgICBlbnRyeS5vbGRlci5uZXdlciA9IGVudHJ5Lm5ld2VyO1xuICAgIH1cbiAgICBlbnRyeS5uZXdlciA9IG51bGw7XG4gICAgZW50cnkub2xkZXIgPSB0aGlzLm5ld2VzdF87XG4gICAgdGhpcy5uZXdlc3RfLm5ld2VyID0gZW50cnk7XG4gICAgdGhpcy5uZXdlc3RfID0gZW50cnk7XG4gICAgcmV0dXJuIGVudHJ5LnZhbHVlXztcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gZW50cnkgZnJvbSB0aGUgY2FjaGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGVudHJ5IGtleS5cbiAgICogQHJldHVybiB7VH0gVGhlIHJlbW92ZWQgZW50cnkuXG4gICAqL1xuICBMUlVDYWNoZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlIChrZXkpIHtcbiAgICB2YXIgZW50cnkgPSB0aGlzLmVudHJpZXNfW2tleV07XG4gICAgYXNzZXJ0KGVudHJ5ICE9PSB1bmRlZmluZWQsIDE1KTsgLy8gVHJpZWQgdG8gZ2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGNhY2hlXG4gICAgaWYgKGVudHJ5ID09PSB0aGlzLm5ld2VzdF8pIHtcbiAgICAgIHRoaXMubmV3ZXN0XyA9IC8qKiBAdHlwZSB7RW50cnl9ICovIChlbnRyeS5vbGRlcik7XG4gICAgICBpZiAodGhpcy5uZXdlc3RfKSB7XG4gICAgICAgIHRoaXMubmV3ZXN0Xy5uZXdlciA9IG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChlbnRyeSA9PT0gdGhpcy5vbGRlc3RfKSB7XG4gICAgICB0aGlzLm9sZGVzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAoZW50cnkubmV3ZXIpO1xuICAgICAgaWYgKHRoaXMub2xkZXN0Xykge1xuICAgICAgICB0aGlzLm9sZGVzdF8ub2xkZXIgPSBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyO1xuICAgICAgZW50cnkub2xkZXIubmV3ZXIgPSBlbnRyeS5uZXdlcjtcbiAgICB9XG4gICAgZGVsZXRlIHRoaXMuZW50cmllc19ba2V5XTtcbiAgICAtLXRoaXMuY291bnRfO1xuICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gIH07XG5cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfSBDb3VudC5cbiAgICovXG4gIExSVUNhY2hlLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uIGdldENvdW50ICgpIHtcbiAgICByZXR1cm4gdGhpcy5jb3VudF87XG4gIH07XG5cblxuICAvKipcbiAgICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gS2V5cy5cbiAgICovXG4gIExSVUNhY2hlLnByb3RvdHlwZS5nZXRLZXlzID0gZnVuY3Rpb24gZ2V0S2V5cyAoKSB7XG4gICAgdmFyIGtleXMgPSBuZXcgQXJyYXkodGhpcy5jb3VudF8pO1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgZW50cnk7XG4gICAgZm9yIChlbnRyeSA9IHRoaXMubmV3ZXN0XzsgZW50cnk7IGVudHJ5ID0gZW50cnkub2xkZXIpIHtcbiAgICAgIGtleXNbaSsrXSA9IGVudHJ5LmtleV87XG4gICAgfVxuICAgIHJldHVybiBrZXlzO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0FycmF5PFQ+fSBWYWx1ZXMuXG4gICAqL1xuICBMUlVDYWNoZS5wcm90b3R5cGUuZ2V0VmFsdWVzID0gZnVuY3Rpb24gZ2V0VmFsdWVzICgpIHtcbiAgICB2YXIgdmFsdWVzID0gbmV3IEFycmF5KHRoaXMuY291bnRfKTtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGVudHJ5O1xuICAgIGZvciAoZW50cnkgPSB0aGlzLm5ld2VzdF87IGVudHJ5OyBlbnRyeSA9IGVudHJ5Lm9sZGVyKSB7XG4gICAgICB2YWx1ZXNbaSsrXSA9IGVudHJ5LnZhbHVlXztcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtUfSBMYXN0IHZhbHVlLlxuICAgKi9cbiAgTFJVQ2FjaGUucHJvdG90eXBlLnBlZWtMYXN0ID0gZnVuY3Rpb24gcGVla0xhc3QgKCkge1xuICAgIHJldHVybiB0aGlzLm9sZGVzdF8udmFsdWVfO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ30gTGFzdCBrZXkuXG4gICAqL1xuICBMUlVDYWNoZS5wcm90b3R5cGUucGVla0xhc3RLZXkgPSBmdW5jdGlvbiBwZWVrTGFzdEtleSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2xkZXN0Xy5rZXlfO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEdldCB0aGUga2V5IG9mIHRoZSBuZXdlc3QgaXRlbSBpbiB0aGUgY2FjaGUuICBUaHJvd3MgaWYgdGhlIGNhY2hlIGlzIGVtcHR5LlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBuZXdlc3Qga2V5LlxuICAgKi9cbiAgTFJVQ2FjaGUucHJvdG90eXBlLnBlZWtGaXJzdEtleSA9IGZ1bmN0aW9uIHBlZWtGaXJzdEtleSAoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV3ZXN0Xy5rZXlfO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1R9IHZhbHVlIFZhbHVlLlxuICAgKi9cbiAgTFJVQ2FjaGUucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uIHBvcCAoKSB7XG4gICAgdmFyIGVudHJ5ID0gdGhpcy5vbGRlc3RfO1xuICAgIGRlbGV0ZSB0aGlzLmVudHJpZXNfW2VudHJ5LmtleV9dO1xuICAgIGlmIChlbnRyeS5uZXdlcikge1xuICAgICAgZW50cnkubmV3ZXIub2xkZXIgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLm9sZGVzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAoZW50cnkubmV3ZXIpO1xuICAgIGlmICghdGhpcy5vbGRlc3RfKSB7XG4gICAgICB0aGlzLm5ld2VzdF8gPSBudWxsO1xuICAgIH1cbiAgICAtLXRoaXMuY291bnRfO1xuICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gIH07XG5cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gICAqIEBwYXJhbSB7VH0gdmFsdWUgVmFsdWUuXG4gICAqL1xuICBMUlVDYWNoZS5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UgKGtleSwgdmFsdWUpIHtcbiAgICB0aGlzLmdldChrZXkpOyAvLyB1cGRhdGUgYG5ld2VzdF9gXG4gICAgdGhpcy5lbnRyaWVzX1trZXldLnZhbHVlXyA9IHZhbHVlO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgKiBAcGFyYW0ge1R9IHZhbHVlIFZhbHVlLlxuICAgKi9cbiAgTFJVQ2FjaGUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIHNldCAoa2V5LCB2YWx1ZSkge1xuICAgIGFzc2VydCghKGtleSBpbiB0aGlzLmVudHJpZXNfKSxcbiAgICAgIDE2KTsgLy8gVHJpZWQgdG8gc2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgaXMgdXNlZCBhbHJlYWR5XG4gICAgdmFyIGVudHJ5ID0gLyoqIEB0eXBlIHtFbnRyeX0gKi8gKHtcbiAgICAgIGtleV86IGtleSxcbiAgICAgIG5ld2VyOiBudWxsLFxuICAgICAgb2xkZXI6IHRoaXMubmV3ZXN0XyxcbiAgICAgIHZhbHVlXzogdmFsdWVcbiAgICB9KTtcbiAgICBpZiAoIXRoaXMubmV3ZXN0Xykge1xuICAgICAgdGhpcy5vbGRlc3RfID0gZW50cnk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubmV3ZXN0Xy5uZXdlciA9IGVudHJ5O1xuICAgIH1cbiAgICB0aGlzLm5ld2VzdF8gPSBlbnRyeTtcbiAgICB0aGlzLmVudHJpZXNfW2tleV0gPSBlbnRyeTtcbiAgICArK3RoaXMuY291bnRfO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIFNldCBhIG1heGltdW0gbnVtYmVyIG9mIGVudHJpZXMgZm9yIHRoZSBjYWNoZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgQ2FjaGUgc2l6ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgTFJVQ2FjaGUucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbiBzZXRTaXplIChzaXplKSB7XG4gICAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gc2l6ZTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBQcnVuZSB0aGUgY2FjaGUuXG4gICAqL1xuICBMUlVDYWNoZS5wcm90b3R5cGUucHJ1bmUgPSBmdW5jdGlvbiBwcnVuZSAoKSB7XG4gICAgd2hpbGUgKHRoaXMuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgdGhpcy5wb3AoKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIExSVUNhY2hlO1xufShFdmVudFRhcmdldCkpO1xuXG5leHBvcnQgZGVmYXVsdCBMUlVDYWNoZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TFJVQ2FjaGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9jYW52YXNcbiAqL1xuaW1wb3J0IHtnZXRGb250RmFtaWxpZXN9IGZyb20gJy4uL2Nzcy5qcyc7XG5pbXBvcnQge2NyZWF0ZUNhbnZhc0NvbnRleHQyRH0gZnJvbSAnLi4vZG9tLmpzJztcbmltcG9ydCB7Y2xlYXJ9IGZyb20gJy4uL29iai5qcyc7XG5pbXBvcnQgTFJVQ2FjaGUgZnJvbSAnLi4vc3RydWN0cy9MUlVDYWNoZS5qcyc7XG5pbXBvcnQge2NyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm19IGZyb20gJy4uL3RyYW5zZm9ybS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGaWxsU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gZmlsbFN0eWxlXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEZpbGxTdHJva2VTdGF0ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbY3VycmVudEZpbGxTdHlsZV1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gW2N1cnJlbnRTdHJva2VTdHlsZV1cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY3VycmVudExpbmVDYXBdXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IGN1cnJlbnRMaW5lRGFzaFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjdXJyZW50TGluZURhc2hPZmZzZXRdXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2N1cnJlbnRMaW5lSm9pbl1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY3VycmVudExpbmVXaWR0aF1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY3VycmVudE1pdGVyTGltaXRdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2xhc3RTdHJva2VdXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IFtmaWxsU3R5bGVdXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IFtzdHJva2VTdHlsZV1cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbGluZUNhcF1cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gbGluZURhc2hcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbGluZURhc2hPZmZzZXRdXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2xpbmVKb2luXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtsaW5lV2lkdGhdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pdGVyTGltaXRdXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0cm9rZVN0YXRlXG4gKiBAcHJvcGVydHkge3N0cmluZ30gbGluZUNhcFxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBsaW5lRGFzaFxuICogQHByb3BlcnR5IHtudW1iZXJ9IGxpbmVEYXNoT2Zmc2V0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gbGluZUpvaW5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsaW5lV2lkdGhcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaXRlckxpbWl0XG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IHN0cm9rZVN0eWxlXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFRleHRTdGF0ZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IGZvbnRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdGV4dEFsaWduXVxuICogQHByb3BlcnR5IHtzdHJpbmd9IHRleHRCYXNlbGluZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtwbGFjZW1lbnRdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heEFuZ2xlXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3ZlcmZsb3ddXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL0ZpbGwuanNcIikuZGVmYXVsdH0gW2JhY2tncm91bmRGaWxsXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zdHlsZS9TdHJva2UuanNcIikuZGVmYXVsdH0gW2JhY2tncm91bmRTdHJva2VdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3NjYWxlXVxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBbcGFkZGluZ11cbiAqL1xuXG5cbi8qKlxuICogQ29udGFpbmVyIGZvciBkZWNsdXR0ZXJlZCByZXBsYXkgaW5zdHJ1Y3Rpb25zIHRoYXQgbmVlZCB0byBiZSByZW5kZXJlZCBvclxuICogb21pdHRlZCB0b2dldGhlciwgaS5lLiB3aGVuIHN0eWxlcyByZW5kZXIgYm90aCBhbiBpbWFnZSBhbmQgdGV4dCwgb3IgZm9yIHRoZVxuICogY2hhcmFjdGVycyB0aGF0IGZvcm0gdGV4dCBhbG9uZyBsaW5lcy4gVGhlIGJhc2ljIGVsZW1lbnRzIG9mIHRoaXMgYXJyYXkgYXJlXG4gKiBgW21pblgsIG1pblksIG1heFgsIG1heFksIGNvdW50XWAsIHdoZXJlIHRoZSBmaXJzdCBmb3VyIGVudHJpZXMgYXJlIHRoZVxuICogcmVuZGVyZWQgZXh0ZW50IG9mIHRoZSBncm91cCBpbiBwaXhlbCBzcGFjZS4gYGNvdW50YCBpcyB0aGUgbnVtYmVyIG9mIHN0eWxlc1xuICogaW4gdGhlIGdyb3VwLCBpLmUuIDIgd2hlbiBhbiBpbWFnZSBhbmQgYSB0ZXh0IGFyZSBncm91cGVkLCBvciAxIG90aGVyd2lzZS5cbiAqIEluIGFkZGl0aW9uIHRvIHRoZXNlIGZvdXIgZWxlbWVudHMsIGRlY2x1dHRlciBpbnN0cnVjdGlvbiBhcnJheXMgKGkuZS4gdGhlXG4gKiBhcmd1bWVudHMgdG8ge0BsaW5rIG1vZHVsZTpvbC9yZW5kZXIvY2FudmFzfmRyYXdJbWFnZX0gYXJlIGFwcGVuZGVkIHRvIHRoZSBhcnJheS5cbiAqIEB0eXBlZGVmIHtBcnJheTwqPn0gRGVjbHV0dGVyR3JvdXBcbiAqL1xuXG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRGb250ID0gJzEwcHggc2Fucy1zZXJpZic7XG5cblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0RmlsbFN0eWxlID0gWzAsIDAsIDAsIDFdO1xuXG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRMaW5lQ2FwID0gJ3JvdW5kJztcblxuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdExpbmVEYXNoID0gW107XG5cblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdExpbmVEYXNoT2Zmc2V0ID0gMDtcblxuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZUpvaW4gPSAncm91bmQnO1xuXG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRNaXRlckxpbWl0ID0gMTA7XG5cblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0U3Ryb2tlU3R5bGUgPSBbMCwgMCwgMCwgMV07XG5cblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdFRleHRBbGlnbiA9ICdjZW50ZXInO1xuXG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRUZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcblxuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdFBhZGRpbmcgPSBbMCwgMCwgMCwgMF07XG5cblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdExpbmVXaWR0aCA9IDE7XG5cblxuLyoqXG4gKiBUaGUgbGFiZWwgY2FjaGUgZm9yIHRleHQgcmVuZGVyaW5nLiBUbyBjaGFuZ2UgdGhlIGRlZmF1bHQgY2FjaGUgc2l6ZSBvZiAyMDQ4XG4gKiBlbnRyaWVzLCB1c2Uge0BsaW5rIG1vZHVsZTpvbC9zdHJ1Y3RzL0xSVUNhY2hlI3NldFNpemV9LlxuICogQHR5cGUge0xSVUNhY2hlPEhUTUxDYW52YXNFbGVtZW50Pn1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBsYWJlbENhY2hlID0gbmV3IExSVUNhY2hlKCk7XG5cblxuLyoqXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgY2hlY2tlZEZvbnRzID0ge307XG5cblxuLyoqXG4gKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfVxuICovXG52YXIgbWVhc3VyZUNvbnRleHQgPSBudWxsO1xuXG5cbi8qKlxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICovXG5leHBvcnQgdmFyIHRleHRIZWlnaHRzID0ge307XG5cblxuLyoqXG4gKiBDbGVhcnMgdGhlIGxhYmVsIGNhY2hlIHdoZW4gYSBmb250IGJlY29tZXMgYXZhaWxhYmxlLlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnRTcGVjIENTUyBmb250IHNwZWMuXG4gKi9cbmV4cG9ydCB2YXIgY2hlY2tGb250ID0gKGZ1bmN0aW9uKCkge1xuICB2YXIgcmV0cmllcyA9IDYwO1xuICB2YXIgY2hlY2tlZCA9IGNoZWNrZWRGb250cztcbiAgdmFyIHNpemUgPSAnMzJweCAnO1xuICB2YXIgcmVmZXJlbmNlRm9udHMgPSBbJ21vbm9zcGFjZScsICdzZXJpZiddO1xuICB2YXIgbGVuID0gcmVmZXJlbmNlRm9udHMubGVuZ3RoO1xuICB2YXIgdGV4dCA9ICd3bXl0emlsV01ZVFpJTEAjLyY/JCUxMFxcdUYwMTMnO1xuICB2YXIgaW50ZXJ2YWwsIHJlZmVyZW5jZVdpZHRoO1xuXG4gIGZ1bmN0aW9uIGlzQXZhaWxhYmxlKGZvbnQpIHtcbiAgICB2YXIgY29udGV4dCA9IGdldE1lYXN1cmVDb250ZXh0KCk7XG4gICAgLy8gQ2hlY2sgd2VpZ2h0IHJhbmdlcyBhY2NvcmRpbmcgdG9cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvZm9udC13ZWlnaHQjRmFsbGJhY2tfd2VpZ2h0c1xuICAgIGZvciAodmFyIHdlaWdodCA9IDEwMDsgd2VpZ2h0IDw9IDcwMDsgd2VpZ2h0ICs9IDMwMCkge1xuICAgICAgdmFyIGZvbnRXZWlnaHQgPSB3ZWlnaHQgKyAnICc7XG4gICAgICB2YXIgYXZhaWxhYmxlID0gdHJ1ZTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgdmFyIHJlZmVyZW5jZUZvbnQgPSByZWZlcmVuY2VGb250c1tpXTtcbiAgICAgICAgY29udGV4dC5mb250ID0gZm9udFdlaWdodCArIHNpemUgKyByZWZlcmVuY2VGb250O1xuICAgICAgICByZWZlcmVuY2VXaWR0aCA9IGNvbnRleHQubWVhc3VyZVRleHQodGV4dCkud2lkdGg7XG4gICAgICAgIGlmIChmb250ICE9IHJlZmVyZW5jZUZvbnQpIHtcbiAgICAgICAgICBjb250ZXh0LmZvbnQgPSBmb250V2VpZ2h0ICsgc2l6ZSArIGZvbnQgKyAnLCcgKyByZWZlcmVuY2VGb250O1xuICAgICAgICAgIHZhciB3aWR0aCA9IGNvbnRleHQubWVhc3VyZVRleHQodGV4dCkud2lkdGg7XG4gICAgICAgICAgLy8gSWYgd2lkdGggYW5kIHJlZmVyZW5jZVdpZHRoIGFyZSB0aGUgc2FtZSwgdGhlbiB0aGUgZmFsbGJhY2sgd2FzIHVzZWRcbiAgICAgICAgICAvLyBpbnN0ZWFkIG9mIHRoZSBmb250IHdlIHdhbnRlZCwgc28gdGhlIGZvbnQgaXMgbm90IGF2YWlsYWJsZS5cbiAgICAgICAgICBhdmFpbGFibGUgPSBhdmFpbGFibGUgJiYgd2lkdGggIT0gcmVmZXJlbmNlV2lkdGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhdmFpbGFibGUpIHtcbiAgICAgICAgLy8gQ29uc2lkZXIgZm9udCBhdmFpbGFibGUgd2hlbiBpdCBpcyBhdmFpbGFibGUgaW4gb25lIHdlaWdodCByYW5nZS5cbiAgICAgICAgLy9GSVhNRSBXaXRoIHRoaXMgd2UgbWlzcyByYXJlIGNvcm5lciBjYXNlcywgc28gd2Ugc2hvdWxkIGNvbnNpZGVyXG4gICAgICAgIC8vRklYTUUgY2hlY2tpbmcgYXZhaWxhYmlsaXR5IGZvciBlYWNoIHJlcXVlc3RlZCB3ZWlnaHQgcmFuZ2UuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBjaGVjaygpIHtcbiAgICB2YXIgZG9uZSA9IHRydWU7XG4gICAgZm9yICh2YXIgZm9udCBpbiBjaGVja2VkKSB7XG4gICAgICBpZiAoY2hlY2tlZFtmb250XSA8IHJldHJpZXMpIHtcbiAgICAgICAgaWYgKGlzQXZhaWxhYmxlKGZvbnQpKSB7XG4gICAgICAgICAgY2hlY2tlZFtmb250XSA9IHJldHJpZXM7XG4gICAgICAgICAgY2xlYXIodGV4dEhlaWdodHMpO1xuICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IGxvYWRlZCBmb250cyBhcmUgcGlja2VkIHVwIGJ5IFNhZmFyaVxuICAgICAgICAgIG1lYXN1cmVDb250ZXh0ID0gbnVsbDtcbiAgICAgICAgICBsYWJlbENhY2hlLmNsZWFyKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgKytjaGVja2VkW2ZvbnRdO1xuICAgICAgICAgIGRvbmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZG9uZSkge1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICBpbnRlcnZhbCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24oZm9udFNwZWMpIHtcbiAgICB2YXIgZm9udEZhbWlsaWVzID0gZ2V0Rm9udEZhbWlsaWVzKGZvbnRTcGVjKTtcbiAgICBpZiAoIWZvbnRGYW1pbGllcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBmb250RmFtaWxpZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIGZvbnRGYW1pbHkgPSBmb250RmFtaWxpZXNbaV07XG4gICAgICBpZiAoIShmb250RmFtaWx5IGluIGNoZWNrZWQpKSB7XG4gICAgICAgIGNoZWNrZWRbZm9udEZhbWlseV0gPSByZXRyaWVzO1xuICAgICAgICBpZiAoIWlzQXZhaWxhYmxlKGZvbnRGYW1pbHkpKSB7XG4gICAgICAgICAgY2hlY2tlZFtmb250RmFtaWx5XSA9IDA7XG4gICAgICAgICAgaWYgKGludGVydmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwoY2hlY2ssIDMyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59KSgpO1xuXG5cbi8qKlxuICogQHJldHVybiB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBNZWFzdXJlIGNvbnRleHQuXG4gKi9cbmZ1bmN0aW9uIGdldE1lYXN1cmVDb250ZXh0KCkge1xuICBpZiAoIW1lYXN1cmVDb250ZXh0KSB7XG4gICAgbWVhc3VyZUNvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoMSwgMSk7XG4gIH1cbiAgcmV0dXJuIG1lYXN1cmVDb250ZXh0O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgRm9udCB0byB1c2UgZm9yIG1lYXN1cmluZy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gTWVhc3VyZW1lbnQuXG4gKi9cbmV4cG9ydCB2YXIgbWVhc3VyZVRleHRIZWlnaHQgPSAoZnVuY3Rpb24oKSB7XG4gIHZhciBzcGFuO1xuICB2YXIgaGVpZ2h0cyA9IHRleHRIZWlnaHRzO1xuICByZXR1cm4gZnVuY3Rpb24oZm9udCkge1xuICAgIHZhciBoZWlnaHQgPSBoZWlnaHRzW2ZvbnRdO1xuICAgIGlmIChoZWlnaHQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIXNwYW4pIHtcbiAgICAgICAgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9ICdNJztcbiAgICAgICAgc3Bhbi5zdHlsZS5tYXJnaW4gPSBzcGFuLnN0eWxlLnBhZGRpbmcgPSAnMCAhaW1wb3J0YW50JztcbiAgICAgICAgc3Bhbi5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSAhaW1wb3J0YW50JztcbiAgICAgICAgc3Bhbi5zdHlsZS5sZWZ0ID0gJy05OTk5OXB4ICFpbXBvcnRhbnQnO1xuICAgICAgfVxuICAgICAgc3Bhbi5zdHlsZS5mb250ID0gZm9udDtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgICBoZWlnaHQgPSBoZWlnaHRzW2ZvbnRdID0gc3Bhbi5vZmZzZXRIZWlnaHQ7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNwYW4pO1xuICAgIH1cbiAgICByZXR1cm4gaGVpZ2h0O1xuICB9O1xufSkoKTtcblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUZXh0LlxuICogQHJldHVybiB7bnVtYmVyfSBXaWR0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgdGV4dCkge1xuICB2YXIgbWVhc3VyZUNvbnRleHQgPSBnZXRNZWFzdXJlQ29udGV4dCgpO1xuICBpZiAoZm9udCAhPSBtZWFzdXJlQ29udGV4dC5mb250KSB7XG4gICAgbWVhc3VyZUNvbnRleHQuZm9udCA9IGZvbnQ7XG4gIH1cbiAgcmV0dXJuIG1lYXN1cmVDb250ZXh0Lm1lYXN1cmVUZXh0KHRleHQpLndpZHRoO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRYIFggb2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFkgWSBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVBdE9mZnNldChjb250ZXh0LCByb3RhdGlvbiwgb2Zmc2V0WCwgb2Zmc2V0WSkge1xuICBpZiAocm90YXRpb24gIT09IDApIHtcbiAgICBjb250ZXh0LnRyYW5zbGF0ZShvZmZzZXRYLCBvZmZzZXRZKTtcbiAgICBjb250ZXh0LnJvdGF0ZShyb3RhdGlvbik7XG4gICAgY29udGV4dC50cmFuc2xhdGUoLW9mZnNldFgsIC1vZmZzZXRZKTtcbiAgfVxufVxuXG5cbmV4cG9ydCB2YXIgcmVzZXRUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuXG4vKipcbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm18bnVsbH0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IE9wYWNpdHkuXG4gKiBAcGFyYW0ge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gaW1hZ2UgSW1hZ2UuXG4gKiBAcGFyYW0ge251bWJlcn0gb3JpZ2luWCBPcmlnaW4gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvcmlnaW5ZIE9yaWdpbiBZLlxuICogQHBhcmFtIHtudW1iZXJ9IHcgV2lkdGguXG4gKiBAcGFyYW0ge251bWJlcn0gaCBIZWlnaHQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzY2FsZSBTY2FsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRyYXdJbWFnZShjb250ZXh0LFxuICB0cmFuc2Zvcm0sIG9wYWNpdHksIGltYWdlLCBvcmlnaW5YLCBvcmlnaW5ZLCB3LCBoLCB4LCB5LCBzY2FsZSkge1xuICB2YXIgYWxwaGE7XG4gIGlmIChvcGFjaXR5ICE9IDEpIHtcbiAgICBhbHBoYSA9IGNvbnRleHQuZ2xvYmFsQWxwaGE7XG4gICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhICogb3BhY2l0eTtcbiAgfVxuICBpZiAodHJhbnNmb3JtKSB7XG4gICAgY29udGV4dC5zZXRUcmFuc2Zvcm0uYXBwbHkoY29udGV4dCwgdHJhbnNmb3JtKTtcbiAgfVxuXG4gIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCBvcmlnaW5YLCBvcmlnaW5ZLCB3LCBoLCB4LCB5LCB3ICogc2NhbGUsIGggKiBzY2FsZSk7XG5cbiAgaWYgKGFscGhhKSB7XG4gICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhO1xuICB9XG4gIGlmICh0cmFuc2Zvcm0pIHtcbiAgICBjb250ZXh0LnNldFRyYW5zZm9ybS5hcHBseShjb250ZXh0LCByZXNldFRyYW5zZm9ybSk7XG4gIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FudmFzLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jb2xvclxuICovXG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7Y2xhbXB9IGZyb20gJy4vbWF0aC5qcyc7XG5cblxuLyoqXG4gKiBBIGNvbG9yIHJlcHJlc2VudGVkIGFzIGEgc2hvcnQgYXJyYXkgW3JlZCwgZ3JlZW4sIGJsdWUsIGFscGhhXS5cbiAqIHJlZCwgZ3JlZW4sIGFuZCBibHVlIHNob3VsZCBiZSBpbnRlZ2VycyBpbiB0aGUgcmFuZ2UgMC4uMjU1IGluY2x1c2l2ZS5cbiAqIGFscGhhIHNob3VsZCBiZSBhIGZsb2F0IGluIHRoZSByYW5nZSAwLi4xIGluY2x1c2l2ZS4gSWYgbm8gYWxwaGEgdmFsdWUgaXNcbiAqIGdpdmVuIHRoZW4gYDFgIHdpbGwgYmUgdXNlZC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBDb2xvclxuICogQGFwaVxuICovXG5cblxuLyoqXG4gKiBUaGlzIFJlZ0V4cCBtYXRjaGVzICMgZm9sbG93ZWQgYnkgMywgNCwgNiwgb3IgOCBoZXggZGlnaXRzLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQHByaXZhdGVcbiAqL1xudmFyIEhFWF9DT0xPUl9SRV8gPSAvXiMoW2EtZjAtOV17M318W2EtZjAtOV17NH0oPzpbYS1mMC05XXsyfSl7MCwyfSkkL2k7XG5cblxuLyoqXG4gKiBSZWd1bGFyIGV4cHJlc3Npb24gZm9yIG1hdGNoaW5nIHBvdGVudGlhbCBuYW1lZCBjb2xvciBzdHlsZSBzdHJpbmdzLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQHByaXZhdGVcbiAqL1xudmFyIE5BTUVEX0NPTE9SX1JFXyA9IC9eKFthLXpdKikkL2k7XG5cblxuLyoqXG4gKiBSZXR1cm4gdGhlIGNvbG9yIGFzIGFuIHJnYmEgc3RyaW5nLlxuICogQHBhcmFtIHtDb2xvcnxzdHJpbmd9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBSZ2JhIHN0cmluZy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzU3RyaW5nKGNvbG9yKSB7XG4gIGlmICh0eXBlb2YgY29sb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGNvbG9yO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0b1N0cmluZyhjb2xvcik7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm4gbmFtZWQgY29sb3IgYXMgYW4gcmdiYSBzdHJpbmcuXG4gKiBAcGFyYW0ge3N0cmluZ30gY29sb3IgTmFtZWQgY29sb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFJnYiBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGZyb21OYW1lZChjb2xvcikge1xuICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZWwuc3R5bGUuY29sb3IgPSBjb2xvcjtcbiAgaWYgKGVsLnN0eWxlLmNvbG9yICE9PSAnJykge1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIHZhciByZ2IgPSBnZXRDb21wdXRlZFN0eWxlKGVsKS5jb2xvcjtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsKTtcbiAgICByZXR1cm4gcmdiO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnJztcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHMgU3RyaW5nLlxuICogQHJldHVybiB7Q29sb3J9IENvbG9yLlxuICovXG5leHBvcnQgdmFyIGZyb21TdHJpbmcgPSAoXG4gIGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gV2UgbWFpbnRhaW4gYSBzbWFsbCBjYWNoZSBvZiBwYXJzZWQgc3RyaW5ncy4gIFRvIHByb3ZpZGUgY2hlYXAgTFJVLWxpa2VcbiAgICAvLyBzZW1hbnRpY3MsIHdoZW5ldmVyIHRoZSBjYWNoZSBncm93cyB0b28gbGFyZ2Ugd2Ugc2ltcGx5IGRlbGV0ZSBhblxuICAgIC8vIGFyYml0cmFyeSAyNSUgb2YgdGhlIGVudHJpZXMuXG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHZhciBNQVhfQ0FDSEVfU0laRSA9IDEwMjQ7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgQ29sb3I+fVxuICAgICAqL1xuICAgIHZhciBjYWNoZSA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB2YXIgY2FjaGVTaXplID0gMDtcblxuICAgIHJldHVybiAoXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAgICAgICAqIEByZXR1cm4ge0NvbG9yfSBDb2xvci5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24ocykge1xuICAgICAgICB2YXIgY29sb3I7XG4gICAgICAgIGlmIChjYWNoZS5oYXNPd25Qcm9wZXJ0eShzKSkge1xuICAgICAgICAgIGNvbG9yID0gY2FjaGVbc107XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGNhY2hlU2l6ZSA+PSBNQVhfQ0FDSEVfU0laRSkge1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGNhY2hlKSB7XG4gICAgICAgICAgICAgIGlmICgoaSsrICYgMykgPT09IDApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgY2FjaGVba2V5XTtcbiAgICAgICAgICAgICAgICAtLWNhY2hlU2l6ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb2xvciA9IGZyb21TdHJpbmdJbnRlcm5hbF8ocyk7XG4gICAgICAgICAgY2FjaGVbc10gPSBjb2xvcjtcbiAgICAgICAgICArK2NhY2hlU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sb3I7XG4gICAgICB9XG4gICAgKTtcblxuICB9KSgpO1xuXG4vKipcbiAqIFJldHVybiB0aGUgY29sb3IgYXMgYW4gYXJyYXkuIFRoaXMgZnVuY3Rpb24gbWFpbnRhaW5zIGEgY2FjaGUgb2YgY2FsY3VsYXRlZFxuICogYXJyYXlzIHdoaWNoIG1lYW5zIHRoZSByZXN1bHQgc2hvdWxkIG5vdCBiZSBtb2RpZmllZC5cbiAqIEBwYXJhbSB7Q29sb3J8c3RyaW5nfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge0NvbG9yfSBDb2xvci5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzQXJyYXkoY29sb3IpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoY29sb3IpKSB7XG4gICAgcmV0dXJuIGNvbG9yO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmcm9tU3RyaW5nKGNvbG9yKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gKi9cbmZ1bmN0aW9uIGZyb21TdHJpbmdJbnRlcm5hbF8ocykge1xuICB2YXIgciwgZywgYiwgYSwgY29sb3I7XG5cbiAgaWYgKE5BTUVEX0NPTE9SX1JFXy5leGVjKHMpKSB7XG4gICAgcyA9IGZyb21OYW1lZChzKTtcbiAgfVxuXG4gIGlmIChIRVhfQ09MT1JfUkVfLmV4ZWMocykpIHsgLy8gaGV4XG4gICAgdmFyIG4gPSBzLmxlbmd0aCAtIDE7IC8vIG51bWJlciBvZiBoZXggZGlnaXRzXG4gICAgdmFyIGQ7IC8vIG51bWJlciBvZiBkaWdpdHMgcGVyIGNoYW5uZWxcbiAgICBpZiAobiA8PSA0KSB7XG4gICAgICBkID0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgZCA9IDI7XG4gICAgfVxuICAgIHZhciBoYXNBbHBoYSA9IG4gPT09IDQgfHwgbiA9PT0gODtcbiAgICByID0gcGFyc2VJbnQocy5zdWJzdHIoMSArIDAgKiBkLCBkKSwgMTYpO1xuICAgIGcgPSBwYXJzZUludChzLnN1YnN0cigxICsgMSAqIGQsIGQpLCAxNik7XG4gICAgYiA9IHBhcnNlSW50KHMuc3Vic3RyKDEgKyAyICogZCwgZCksIDE2KTtcbiAgICBpZiAoaGFzQWxwaGEpIHtcbiAgICAgIGEgPSBwYXJzZUludChzLnN1YnN0cigxICsgMyAqIGQsIGQpLCAxNik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGEgPSAyNTU7XG4gICAgfVxuICAgIGlmIChkID09IDEpIHtcbiAgICAgIHIgPSAociA8PCA0KSArIHI7XG4gICAgICBnID0gKGcgPDwgNCkgKyBnO1xuICAgICAgYiA9IChiIDw8IDQpICsgYjtcbiAgICAgIGlmIChoYXNBbHBoYSkge1xuICAgICAgICBhID0gKGEgPDwgNCkgKyBhO1xuICAgICAgfVxuICAgIH1cbiAgICBjb2xvciA9IFtyLCBnLCBiLCBhIC8gMjU1XTtcbiAgfSBlbHNlIGlmIChzLmluZGV4T2YoJ3JnYmEoJykgPT0gMCkgeyAvLyByZ2JhKClcbiAgICBjb2xvciA9IHMuc2xpY2UoNSwgLTEpLnNwbGl0KCcsJykubWFwKE51bWJlcik7XG4gICAgbm9ybWFsaXplKGNvbG9yKTtcbiAgfSBlbHNlIGlmIChzLmluZGV4T2YoJ3JnYignKSA9PSAwKSB7IC8vIHJnYigpXG4gICAgY29sb3IgPSBzLnNsaWNlKDQsIC0xKS5zcGxpdCgnLCcpLm1hcChOdW1iZXIpO1xuICAgIGNvbG9yLnB1c2goMSk7XG4gICAgbm9ybWFsaXplKGNvbG9yKTtcbiAgfSBlbHNlIHtcbiAgICBhc3NlcnQoZmFsc2UsIDE0KTsgLy8gSW52YWxpZCBjb2xvclxuICB9XG4gIHJldHVybiBjb2xvcjtcbn1cblxuXG4vKipcbiAqIFRPRE8gdGhpcyBmdW5jdGlvbiBpcyBvbmx5IHVzZWQgaW4gdGhlIHRlc3QsIHdlIHByb2JhYmx5IHNob3VsZG4ndCBleHBvcnQgaXRcbiAqIEBwYXJhbSB7Q29sb3J9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7Q29sb3J9IENsYW1wZWQgY29sb3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUoY29sb3IpIHtcbiAgY29sb3JbMF0gPSBjbGFtcCgoY29sb3JbMF0gKyAwLjUpIHwgMCwgMCwgMjU1KTtcbiAgY29sb3JbMV0gPSBjbGFtcCgoY29sb3JbMV0gKyAwLjUpIHwgMCwgMCwgMjU1KTtcbiAgY29sb3JbMl0gPSBjbGFtcCgoY29sb3JbMl0gKyAwLjUpIHwgMCwgMCwgMjU1KTtcbiAgY29sb3JbM10gPSBjbGFtcChjb2xvclszXSwgMCwgMSk7XG4gIHJldHVybiBjb2xvcjtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7Q29sb3J9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZyhjb2xvcikge1xuICB2YXIgciA9IGNvbG9yWzBdO1xuICBpZiAociAhPSAociB8IDApKSB7XG4gICAgciA9IChyICsgMC41KSB8IDA7XG4gIH1cbiAgdmFyIGcgPSBjb2xvclsxXTtcbiAgaWYgKGcgIT0gKGcgfCAwKSkge1xuICAgIGcgPSAoZyArIDAuNSkgfCAwO1xuICB9XG4gIHZhciBiID0gY29sb3JbMl07XG4gIGlmIChiICE9IChiIHwgMCkpIHtcbiAgICBiID0gKGIgKyAwLjUpIHwgMDtcbiAgfVxuICB2YXIgYSA9IGNvbG9yWzNdID09PSB1bmRlZmluZWQgPyAxIDogY29sb3JbM107XG4gIHJldHVybiAncmdiYSgnICsgciArICcsJyArIGcgKyAnLCcgKyBiICsgJywnICsgYSArICcpJztcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29sb3IuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbG9ybGlrZVxuICovXG5pbXBvcnQge3RvU3RyaW5nfSBmcm9tICcuL2NvbG9yLmpzJztcblxuXG4vKipcbiAqIEEgdHlwZSBhY2NlcHRlZCBieSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQuZmlsbFN0eWxlXG4gKiBvciBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQuc3Ryb2tlU3R5bGUuXG4gKiBSZXByZXNlbnRzIGEgY29sb3IsIHBhdHRlcm4sIG9yIGdyYWRpZW50LiBUaGUgb3JpZ2luIGZvciBwYXR0ZXJucyBhbmRcbiAqIGdyYWRpZW50cyBhcyBmaWxsIHN0eWxlIGlzIGFuIGluY3JlbWVudCBvZiA1MTIgY3NzIHBpeGVscyBmcm9tIG1hcCBjb29yZGluYXRlXG4gKiBgWzAsIDBdYC4gRm9yIHNlYW1sZXNzIHJlcGVhdCBwYXR0ZXJucywgd2lkdGggYW5kIGhlaWdodCBvZiB0aGUgcGF0dGVybiBpbWFnZVxuICogbXVzdCBiZSBhIGZhY3RvciBvZiB0d28gKDIsIDQsIDgsIC4uLiwgNTEyKS5cbiAqXG4gKiBAdHlwZWRlZiB7c3RyaW5nfENhbnZhc1BhdHRlcm58Q2FudmFzR3JhZGllbnR9IENvbG9yTGlrZVxuICogQGFwaVxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29sb3IuanNcIikuQ29sb3J8Q29sb3JMaWtlfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge0NvbG9yTGlrZX0gVGhlIGNvbG9yIGFzIGFuIHtAbGluayBvbC9jb2xvcmxpa2V+Q29sb3JMaWtlfS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzQ29sb3JMaWtlKGNvbG9yKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGNvbG9yKSkge1xuICAgIHJldHVybiB0b1N0cmluZyhjb2xvcik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNvbG9yO1xuICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbG9ybGlrZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL1ZlY3RvckNvbnRleHRcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENvbnRleHQgZm9yIGRyYXdpbmcgZ2VvbWV0cmllcy4gIEEgdmVjdG9yIGNvbnRleHQgaXMgYXZhaWxhYmxlIG9uIHJlbmRlclxuICogZXZlbnRzIGFuZCBkb2VzIG5vdCBuZWVkIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5LlxuICogQGFwaVxuICovXG52YXIgVmVjdG9yQ29udGV4dCA9IGZ1bmN0aW9uIFZlY3RvckNvbnRleHQgKCkge307XG5cblZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdDdXN0b20gPSBmdW5jdGlvbiBkcmF3Q3VzdG9tIChnZW9tZXRyeSwgZmVhdHVyZSwgcmVuZGVyZXIpIHt9O1xuXG4vKipcbiAqIFJlbmRlciBhIGdlb21ldHJ5LlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBUaGUgZ2VvbWV0cnkgdG8gcmVuZGVyLlxuICovXG5WZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3R2VvbWV0cnkgPSBmdW5jdGlvbiBkcmF3R2VvbWV0cnkgKGdlb21ldHJ5KSB7fTtcblxuLyoqXG4gKiBTZXQgdGhlIHJlbmRlcmluZyBzdHlsZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFRoZSByZW5kZXJpbmcgc3R5bGUuXG4gKi9cblZlY3RvckNvbnRleHQucHJvdG90eXBlLnNldFN0eWxlID0gZnVuY3Rpb24gc2V0U3R5bGUgKHN0eWxlKSB7fTtcblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGNpcmNsZUdlb21ldHJ5IENpcmNsZSBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gKi9cblZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdDaXJjbGUgPSBmdW5jdGlvbiBkcmF3Q2lyY2xlIChjaXJjbGVHZW9tZXRyeSwgZmVhdHVyZSkge307XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKi9cblZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdGZWF0dXJlID0gZnVuY3Rpb24gZHJhd0ZlYXR1cmUgKGZlYXR1cmUsIHN0eWxlKSB7fTtcblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5Q29sbGVjdGlvbkdlb21ldHJ5IEdlb21ldHJ5IGNvbGxlY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICovXG5WZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3R2VvbWV0cnlDb2xsZWN0aW9uID0gZnVuY3Rpb24gZHJhd0dlb21ldHJ5Q29sbGVjdGlvbiAoZ2VvbWV0cnlDb2xsZWN0aW9uR2VvbWV0cnksIGZlYXR1cmUpIHt9O1xuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9MaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGxpbmVTdHJpbmdHZW9tZXRyeSBMaW5lIHN0cmluZyBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gKi9cblZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdMaW5lU3RyaW5nID0gZnVuY3Rpb24gZHJhd0xpbmVTdHJpbmcgKGxpbmVTdHJpbmdHZW9tZXRyeSwgZmVhdHVyZSkge307XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL011bHRpTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBtdWx0aUxpbmVTdHJpbmdHZW9tZXRyeSBNdWx0aUxpbmVTdHJpbmcgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICovXG5WZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3TXVsdGlMaW5lU3RyaW5nID0gZnVuY3Rpb24gZHJhd011bHRpTGluZVN0cmluZyAobXVsdGlMaW5lU3RyaW5nR2VvbWV0cnksIGZlYXR1cmUpIHt9O1xuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9NdWx0aVBvaW50LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IG11bHRpUG9pbnRHZW9tZXRyeSBNdWx0aVBvaW50IGdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuVmVjdG9yQ29udGV4dC5wcm90b3R5cGUuZHJhd011bHRpUG9pbnQgPSBmdW5jdGlvbiBkcmF3TXVsdGlQb2ludCAobXVsdGlQb2ludEdlb21ldHJ5LCBmZWF0dXJlKSB7fTtcblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9IG11bHRpUG9seWdvbkdlb21ldHJ5IE11bHRpUG9seWdvbiBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gKi9cblZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdNdWx0aVBvbHlnb24gPSBmdW5jdGlvbiBkcmF3TXVsdGlQb2x5Z29uIChtdWx0aVBvbHlnb25HZW9tZXRyeSwgZmVhdHVyZSkge307XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL1BvaW50LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IHBvaW50R2VvbWV0cnkgUG9pbnQgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICovXG5WZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3UG9pbnQgPSBmdW5jdGlvbiBkcmF3UG9pbnQgKHBvaW50R2VvbWV0cnksIGZlYXR1cmUpIHt9O1xuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IHBvbHlnb25HZW9tZXRyeSBQb2x5Z29uIGdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuVmVjdG9yQ29udGV4dC5wcm90b3R5cGUuZHJhd1BvbHlnb24gPSBmdW5jdGlvbiBkcmF3UG9seWdvbiAocG9seWdvbkdlb21ldHJ5LCBmZWF0dXJlKSB7fTtcblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICovXG5WZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3VGV4dCA9IGZ1bmN0aW9uIGRyYXdUZXh0IChnZW9tZXRyeSwgZmVhdHVyZSkge307XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9GaWxsLmpzXCIpLmRlZmF1bHR9IGZpbGxTdHlsZSBGaWxsIHN0eWxlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHJva2UuanNcIikuZGVmYXVsdH0gc3Ryb2tlU3R5bGUgU3Ryb2tlIHN0eWxlLlxuICovXG5WZWN0b3JDb250ZXh0LnByb3RvdHlwZS5zZXRGaWxsU3Ryb2tlU3R5bGUgPSBmdW5jdGlvbiBzZXRGaWxsU3Ryb2tlU3R5bGUgKGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUpIHt9O1xuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvSW1hZ2UuanNcIikuZGVmYXVsdH0gaW1hZ2VTdHlsZSBJbWFnZSBzdHlsZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXA9fSBvcHRfZGVjbHV0dGVyR3JvdXAgRGVjbHV0dGVyLlxuICovXG5WZWN0b3JDb250ZXh0LnByb3RvdHlwZS5zZXRJbWFnZVN0eWxlID0gZnVuY3Rpb24gc2V0SW1hZ2VTdHlsZSAoaW1hZ2VTdHlsZSwgb3B0X2RlY2x1dHRlckdyb3VwKSB7fTtcblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1RleHQuanNcIikuZGVmYXVsdH0gdGV4dFN0eWxlIFRleHQgc3R5bGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3VwPX0gb3B0X2RlY2x1dHRlckdyb3VwIERlY2x1dHRlci5cbiAqL1xuVmVjdG9yQ29udGV4dC5wcm90b3R5cGUuc2V0VGV4dFN0eWxlID0gZnVuY3Rpb24gc2V0VGV4dFN0eWxlICh0ZXh0U3R5bGUsIG9wdF9kZWNsdXR0ZXJHcm91cCkge307XG5cbmV4cG9ydCBkZWZhdWx0IFZlY3RvckNvbnRleHQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZlY3RvckNvbnRleHQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9jYW52YXMvSW1tZWRpYXRlXG4gKi9cbi8vIEZJWE1FIHRlc3QsIGVzcGVjaWFsbHkgcG9seWdvbnMgd2l0aCBob2xlcyBhbmQgbXVsdGlwb2x5Z29uc1xuLy8gRklYTUUgbmVlZCB0byBoYW5kbGUgbGFyZ2UgdGhpY2sgZmVhdHVyZXMgKHdoZXJlIHBpeGVsIHNpemUgbWF0dGVycylcbi8vIEZJWE1FIGFkZCBvZmZzZXQgYW5kIGVuZCB0byBvbC9nZW9tL2ZsYXQvdHJhbnNmb3JtfnRyYW5zZm9ybTJEP1xuXG5pbXBvcnQge2VxdWFsc30gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuaW1wb3J0IHthc0NvbG9yTGlrZX0gZnJvbSAnLi4vLi4vY29sb3JsaWtlLmpzJztcbmltcG9ydCB7aW50ZXJzZWN0c30gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi4vLi4vZ2VvbS9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IHt0cmFuc2Zvcm1HZW9tMkR9IGZyb20gJy4uLy4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHt0cmFuc2Zvcm0yRH0gZnJvbSAnLi4vLi4vZ2VvbS9mbGF0L3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQge0NBTlZBU19MSU5FX0RBU0h9IGZyb20gJy4uLy4uL2hhcy5qcyc7XG5pbXBvcnQgVmVjdG9yQ29udGV4dCBmcm9tICcuLi9WZWN0b3JDb250ZXh0LmpzJztcbmltcG9ydCB7ZGVmYXVsdFRleHRBbGlnbiwgZGVmYXVsdEZpbGxTdHlsZSwgZGVmYXVsdExpbmVDYXAsIGRlZmF1bHRMaW5lRGFzaCwgZGVmYXVsdExpbmVEYXNoT2Zmc2V0LCBkZWZhdWx0TGluZUpvaW4sIGRlZmF1bHRMaW5lV2lkdGgsIGRlZmF1bHRNaXRlckxpbWl0LCBkZWZhdWx0U3Ryb2tlU3R5bGUsIGRlZmF1bHRUZXh0QmFzZWxpbmUsIGRlZmF1bHRGb250fSBmcm9tICcuLi9jYW52YXMuanMnO1xuaW1wb3J0IHtjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm19IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBjb25jcmV0ZSBzdWJjbGFzcyBvZiB7QGxpbmsgbW9kdWxlOm9sL3JlbmRlci9WZWN0b3JDb250ZXh0fSB0aGF0IGltcGxlbWVudHNcbiAqIGRpcmVjdCByZW5kZXJpbmcgb2YgZmVhdHVyZXMgYW5kIGdlb21ldHJpZXMgdG8gYW4gSFRNTDUgQ2FudmFzIGNvbnRleHQuXG4gKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgY3JlYXRlZCBpbnRlcm5hbGx5IGJ5IHRoZSBsaWJyYXJ5IGFuZFxuICogcHJvdmlkZWQgdG8gYXBwbGljYXRpb24gY29kZSBhcyB2ZWN0b3JDb250ZXh0IG1lbWJlciBvZiB0aGVcbiAqIHtAbGluayBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50fSBvYmplY3QgYXNzb2NpYXRlZCB3aXRoIHBvc3Rjb21wb3NlLCBwcmVjb21wb3NlIGFuZFxuICogcmVuZGVyIGV2ZW50cyBlbWl0dGVkIGJ5IGxheWVycyBhbmQgbWFwcy5cbiAqL1xudmFyIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoVmVjdG9yQ29udGV4dCkge1xuICBmdW5jdGlvbiBDYW52YXNJbW1lZGlhdGVSZW5kZXJlcihjb250ZXh0LCBwaXhlbFJhdGlvLCBleHRlbnQsIHRyYW5zZm9ybSwgdmlld1JvdGF0aW9uKSB7XG4gICAgVmVjdG9yQ29udGV4dC5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfVxuICAgICAqL1xuICAgIHRoaXMuY29udGV4dF8gPSBjb250ZXh0O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucGl4ZWxSYXRpb18gPSBwaXhlbFJhdGlvO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgKi9cbiAgICB0aGlzLmV4dGVudF8gPSBleHRlbnQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAqL1xuICAgIHRoaXMudHJhbnNmb3JtXyA9IHRyYW5zZm9ybTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnZpZXdSb3RhdGlvbl8gPSB2aWV3Um90YXRpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdGF0ZX1cbiAgICAgKi9cbiAgICB0aGlzLmNvbnRleHRGaWxsU3RhdGVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jYW52YXMuanNcIikuU3Ryb2tlU3RhdGV9XG4gICAgICovXG4gICAgdGhpcy5jb250ZXh0U3Ryb2tlU3RhdGVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jYW52YXMuanNcIikuVGV4dFN0YXRlfVxuICAgICAqL1xuICAgIHRoaXMuY29udGV4dFRleHRTdGF0ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3RhdGV9XG4gICAgICovXG4gICAgdGhpcy5maWxsU3RhdGVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jYW52YXMuanNcIikuU3Ryb2tlU3RhdGV9XG4gICAgICovXG4gICAgdGhpcy5zdHJva2VTdGF0ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMuaW1hZ2VfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmltYWdlQW5jaG9yWF8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuaW1hZ2VBbmNob3JZXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5pbWFnZUhlaWdodF8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuaW1hZ2VPcGFjaXR5XyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5pbWFnZU9yaWdpblhfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmltYWdlT3JpZ2luWV8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmltYWdlUm90YXRlV2l0aFZpZXdfID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5pbWFnZVJvdGF0aW9uXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5pbWFnZVNjYWxlXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5pbWFnZVdpZHRoXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy50ZXh0XyA9ICcnO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMudGV4dE9mZnNldFhfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRleHRPZmZzZXRZXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMudGV4dFJvdGF0ZVdpdGhWaWV3XyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMudGV4dFJvdGF0aW9uXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50ZXh0U2NhbGVfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0YXRlfVxuICAgICAqL1xuICAgIHRoaXMudGV4dEZpbGxTdGF0ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TdHJva2VTdGF0ZX1cbiAgICAgKi9cbiAgICB0aGlzLnRleHRTdHJva2VTdGF0ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5UZXh0U3RhdGV9XG4gICAgICovXG4gICAgdGhpcy50ZXh0U3RhdGVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5waXhlbENvb3JkaW5hdGVzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgKi9cbiAgICB0aGlzLnRtcExvY2FsVHJhbnNmb3JtXyA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuXG4gIH1cblxuICBpZiAoIFZlY3RvckNvbnRleHQgKSBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5fX3Byb3RvX18gPSBWZWN0b3JDb250ZXh0O1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBWZWN0b3JDb250ZXh0ICYmIFZlY3RvckNvbnRleHQucHJvdG90eXBlICk7XG4gIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLmRyYXdJbWFnZXNfID0gZnVuY3Rpb24gZHJhd0ltYWdlc18gKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIGlmICghdGhpcy5pbWFnZV8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHBpeGVsQ29vcmRpbmF0ZXMgPSB0cmFuc2Zvcm0yRChcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIDIsIHRoaXMudHJhbnNmb3JtXyxcbiAgICAgIHRoaXMucGl4ZWxDb29yZGluYXRlc18pO1xuICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICB2YXIgbG9jYWxUcmFuc2Zvcm0gPSB0aGlzLnRtcExvY2FsVHJhbnNmb3JtXztcbiAgICB2YXIgYWxwaGEgPSBjb250ZXh0Lmdsb2JhbEFscGhhO1xuICAgIGlmICh0aGlzLmltYWdlT3BhY2l0eV8gIT0gMSkge1xuICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhICogdGhpcy5pbWFnZU9wYWNpdHlfO1xuICAgIH1cbiAgICB2YXIgcm90YXRpb24gPSB0aGlzLmltYWdlUm90YXRpb25fO1xuICAgIGlmICh0aGlzLmltYWdlUm90YXRlV2l0aFZpZXdfKSB7XG4gICAgICByb3RhdGlvbiArPSB0aGlzLnZpZXdSb3RhdGlvbl87XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBpeGVsQ29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gMikge1xuICAgICAgdmFyIHggPSBwaXhlbENvb3JkaW5hdGVzW2ldIC0gdGhpcy5pbWFnZUFuY2hvclhfO1xuICAgICAgdmFyIHkgPSBwaXhlbENvb3JkaW5hdGVzW2kgKyAxXSAtIHRoaXMuaW1hZ2VBbmNob3JZXztcbiAgICAgIGlmIChyb3RhdGlvbiAhPT0gMCB8fCB0aGlzLmltYWdlU2NhbGVfICE9IDEpIHtcbiAgICAgICAgdmFyIGNlbnRlclggPSB4ICsgdGhpcy5pbWFnZUFuY2hvclhfO1xuICAgICAgICB2YXIgY2VudGVyWSA9IHkgKyB0aGlzLmltYWdlQW5jaG9yWV87XG4gICAgICAgIGNvbXBvc2VUcmFuc2Zvcm0obG9jYWxUcmFuc2Zvcm0sXG4gICAgICAgICAgY2VudGVyWCwgY2VudGVyWSxcbiAgICAgICAgICB0aGlzLmltYWdlU2NhbGVfLCB0aGlzLmltYWdlU2NhbGVfLFxuICAgICAgICAgIHJvdGF0aW9uLFxuICAgICAgICAgIC1jZW50ZXJYLCAtY2VudGVyWSk7XG4gICAgICAgIGNvbnRleHQuc2V0VHJhbnNmb3JtLmFwcGx5KGNvbnRleHQsIGxvY2FsVHJhbnNmb3JtKTtcbiAgICAgIH1cbiAgICAgIGNvbnRleHQuZHJhd0ltYWdlKHRoaXMuaW1hZ2VfLCB0aGlzLmltYWdlT3JpZ2luWF8sIHRoaXMuaW1hZ2VPcmlnaW5ZXyxcbiAgICAgICAgdGhpcy5pbWFnZVdpZHRoXywgdGhpcy5pbWFnZUhlaWdodF8sIHgsIHksXG4gICAgICAgIHRoaXMuaW1hZ2VXaWR0aF8sIHRoaXMuaW1hZ2VIZWlnaHRfKTtcbiAgICB9XG4gICAgaWYgKHJvdGF0aW9uICE9PSAwIHx8IHRoaXMuaW1hZ2VTY2FsZV8gIT0gMSkge1xuICAgICAgY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmltYWdlT3BhY2l0eV8gIT0gMSkge1xuICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5kcmF3VGV4dF8gPSBmdW5jdGlvbiBkcmF3VGV4dF8gKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIGlmICghdGhpcy50ZXh0U3RhdGVfIHx8IHRoaXMudGV4dF8gPT09ICcnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLnRleHRGaWxsU3RhdGVfKSB7XG4gICAgICB0aGlzLnNldENvbnRleHRGaWxsU3RhdGVfKHRoaXMudGV4dEZpbGxTdGF0ZV8pO1xuICAgIH1cbiAgICBpZiAodGhpcy50ZXh0U3Ryb2tlU3RhdGVfKSB7XG4gICAgICB0aGlzLnNldENvbnRleHRTdHJva2VTdGF0ZV8odGhpcy50ZXh0U3Ryb2tlU3RhdGVfKTtcbiAgICB9XG4gICAgdGhpcy5zZXRDb250ZXh0VGV4dFN0YXRlXyh0aGlzLnRleHRTdGF0ZV8pO1xuICAgIHZhciBwaXhlbENvb3JkaW5hdGVzID0gdHJhbnNmb3JtMkQoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRoaXMudHJhbnNmb3JtXyxcbiAgICAgIHRoaXMucGl4ZWxDb29yZGluYXRlc18pO1xuICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICB2YXIgcm90YXRpb24gPSB0aGlzLnRleHRSb3RhdGlvbl87XG4gICAgaWYgKHRoaXMudGV4dFJvdGF0ZVdpdGhWaWV3Xykge1xuICAgICAgcm90YXRpb24gKz0gdGhpcy52aWV3Um90YXRpb25fO1xuICAgIH1cbiAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICB2YXIgeCA9IHBpeGVsQ29vcmRpbmF0ZXNbb2Zmc2V0XSArIHRoaXMudGV4dE9mZnNldFhfO1xuICAgICAgdmFyIHkgPSBwaXhlbENvb3JkaW5hdGVzW29mZnNldCArIDFdICsgdGhpcy50ZXh0T2Zmc2V0WV87XG4gICAgICBpZiAocm90YXRpb24gIT09IDAgfHwgdGhpcy50ZXh0U2NhbGVfICE9IDEpIHtcbiAgICAgICAgdmFyIGxvY2FsVHJhbnNmb3JtID0gY29tcG9zZVRyYW5zZm9ybSh0aGlzLnRtcExvY2FsVHJhbnNmb3JtXyxcbiAgICAgICAgICB4LCB5LFxuICAgICAgICAgIHRoaXMudGV4dFNjYWxlXywgdGhpcy50ZXh0U2NhbGVfLFxuICAgICAgICAgIHJvdGF0aW9uLFxuICAgICAgICAgIC14LCAteSk7XG4gICAgICAgIGNvbnRleHQuc2V0VHJhbnNmb3JtLmFwcGx5KGNvbnRleHQsIGxvY2FsVHJhbnNmb3JtKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnRleHRTdHJva2VTdGF0ZV8pIHtcbiAgICAgICAgY29udGV4dC5zdHJva2VUZXh0KHRoaXMudGV4dF8sIHgsIHkpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMudGV4dEZpbGxTdGF0ZV8pIHtcbiAgICAgICAgY29udGV4dC5maWxsVGV4dCh0aGlzLnRleHRfLCB4LCB5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJvdGF0aW9uICE9PSAwIHx8IHRoaXMudGV4dFNjYWxlXyAhPSAxKSB7XG4gICAgICBjb250ZXh0LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gY2xvc2UgQ2xvc2UuXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge251bWJlcn0gZW5kIEVuZC5cbiAgICovXG4gIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5tb3ZlVG9MaW5lVG9fID0gZnVuY3Rpb24gbW92ZVRvTGluZVRvXyAoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBjbG9zZSkge1xuICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICB2YXIgcGl4ZWxDb29yZGluYXRlcyA9IHRyYW5zZm9ybTJEKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB0aGlzLnRyYW5zZm9ybV8sXG4gICAgICB0aGlzLnBpeGVsQ29vcmRpbmF0ZXNfKTtcbiAgICBjb250ZXh0Lm1vdmVUbyhwaXhlbENvb3JkaW5hdGVzWzBdLCBwaXhlbENvb3JkaW5hdGVzWzFdKTtcbiAgICB2YXIgbGVuZ3RoID0gcGl4ZWxDb29yZGluYXRlcy5sZW5ndGg7XG4gICAgaWYgKGNsb3NlKSB7XG4gICAgICBsZW5ndGggLT0gMjtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDI7IGkgPCBsZW5ndGg7IGkgKz0gMikge1xuICAgICAgY29udGV4dC5saW5lVG8ocGl4ZWxDb29yZGluYXRlc1tpXSwgcGl4ZWxDb29yZGluYXRlc1tpICsgMV0pO1xuICAgIH1cbiAgICBpZiAoY2xvc2UpIHtcbiAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgfVxuICAgIHJldHVybiBlbmQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge251bWJlcn0gRW5kLlxuICAgKi9cbiAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLmRyYXdSaW5nc18gPSBmdW5jdGlvbiBkcmF3UmluZ3NfIChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBvZmZzZXQgPSB0aGlzLm1vdmVUb0xpbmVUb18oZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbaV0sIHN0cmlkZSwgdHJ1ZSk7XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbmRlciBhIGNpcmNsZSBnZW9tZXRyeSBpbnRvIHRoZSBjYW52YXMuICBSZW5kZXJpbmcgaXMgaW1tZWRpYXRlIGFuZCB1c2VzXG4gICAqIHRoZSBjdXJyZW50IGZpbGwgYW5kIHN0cm9rZSBzdHlsZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgQ2lyY2xlIGdlb21ldHJ5LlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLmRyYXdDaXJjbGUgPSBmdW5jdGlvbiBkcmF3Q2lyY2xlIChnZW9tZXRyeSkge1xuICAgIGlmICghaW50ZXJzZWN0cyh0aGlzLmV4dGVudF8sIGdlb21ldHJ5LmdldEV4dGVudCgpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5maWxsU3RhdGVfIHx8IHRoaXMuc3Ryb2tlU3RhdGVfKSB7XG4gICAgICBpZiAodGhpcy5maWxsU3RhdGVfKSB7XG4gICAgICAgIHRoaXMuc2V0Q29udGV4dEZpbGxTdGF0ZV8odGhpcy5maWxsU3RhdGVfKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN0cm9rZVN0YXRlXykge1xuICAgICAgICB0aGlzLnNldENvbnRleHRTdHJva2VTdGF0ZV8odGhpcy5zdHJva2VTdGF0ZV8pO1xuICAgICAgfVxuICAgICAgdmFyIHBpeGVsQ29vcmRpbmF0ZXMgPSB0cmFuc2Zvcm1HZW9tMkQoXG4gICAgICAgIGdlb21ldHJ5LCB0aGlzLnRyYW5zZm9ybV8sIHRoaXMucGl4ZWxDb29yZGluYXRlc18pO1xuICAgICAgdmFyIGR4ID0gcGl4ZWxDb29yZGluYXRlc1syXSAtIHBpeGVsQ29vcmRpbmF0ZXNbMF07XG4gICAgICB2YXIgZHkgPSBwaXhlbENvb3JkaW5hdGVzWzNdIC0gcGl4ZWxDb29yZGluYXRlc1sxXTtcbiAgICAgIHZhciByYWRpdXMgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgIGNvbnRleHQuYXJjKFxuICAgICAgICBwaXhlbENvb3JkaW5hdGVzWzBdLCBwaXhlbENvb3JkaW5hdGVzWzFdLCByYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcbiAgICAgIGlmICh0aGlzLmZpbGxTdGF0ZV8pIHtcbiAgICAgICAgY29udGV4dC5maWxsKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zdHJva2VTdGF0ZV8pIHtcbiAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMudGV4dF8gIT09ICcnKSB7XG4gICAgICB0aGlzLmRyYXdUZXh0XyhnZW9tZXRyeS5nZXRDZW50ZXIoKSwgMCwgMiwgMik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHJlbmRlcmluZyBzdHlsZS4gIE5vdGUgdGhhdCBzaW5jZSB0aGlzIGlzIGFuIGltbWVkaWF0ZSByZW5kZXJpbmcgQVBJLFxuICAgKiBhbnkgYHpJbmRleGAgb24gdGhlIHByb3ZpZGVkIHN0eWxlIHdpbGwgYmUgaWdub3JlZC5cbiAgICpcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fSBzdHlsZSBUaGUgcmVuZGVyaW5nIHN0eWxlLlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLnNldFN0eWxlID0gZnVuY3Rpb24gc2V0U3R5bGUgKHN0eWxlKSB7XG4gICAgdGhpcy5zZXRGaWxsU3Ryb2tlU3R5bGUoc3R5bGUuZ2V0RmlsbCgpLCBzdHlsZS5nZXRTdHJva2UoKSk7XG4gICAgdGhpcy5zZXRJbWFnZVN0eWxlKHN0eWxlLmdldEltYWdlKCkpO1xuICAgIHRoaXMuc2V0VGV4dFN0eWxlKHN0eWxlLmdldFRleHQoKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbmRlciBhIGdlb21ldHJ5IGludG8gdGhlIGNhbnZhcy4gIENhbGxcbiAgICoge0BsaW5rIG1vZHVsZTpvbC9yZW5kZXIvY2FudmFzL0ltbWVkaWF0ZSNzZXRTdHlsZX0gZmlyc3QgdG8gc2V0IHRoZSByZW5kZXJpbmcgc3R5bGUuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgVGhlIGdlb21ldHJ5IHRvIHJlbmRlci5cbiAgICogQG92ZXJyaWRlXG4gICAqIEBhcGlcbiAgICovXG4gIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5kcmF3R2VvbWV0cnkgPSBmdW5jdGlvbiBkcmF3R2VvbWV0cnkgKGdlb21ldHJ5KSB7XG4gICAgdmFyIHR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICAgICAgdGhpcy5kcmF3UG9pbnQoLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL1BvaW50LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgICB0aGlzLmRyYXdMaW5lU3RyaW5nKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9MaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLlBPTFlHT046XG4gICAgICAgIHRoaXMuZHJhd1BvbHlnb24oLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6XG4gICAgICAgIHRoaXMuZHJhd011bHRpUG9pbnQoLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL011bHRpUG9pbnQuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkc6XG4gICAgICAgIHRoaXMuZHJhd011bHRpTGluZVN0cmluZygvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlMaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT046XG4gICAgICAgIHRoaXMuZHJhd011bHRpUG9seWdvbigvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT046XG4gICAgICAgIHRoaXMuZHJhd0dlb21ldHJ5Q29sbGVjdGlvbigvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkNJUkNMRTpcbiAgICAgICAgdGhpcy5kcmF3Q2lyY2xlKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbmRlciBhIGZlYXR1cmUgaW50byB0aGUgY2FudmFzLiAgTm90ZSB0aGF0IGFueSBgekluZGV4YCBvbiB0aGUgcHJvdmlkZWRcbiAgICogc3R5bGUgd2lsbCBiZSBpZ25vcmVkIC0gZmVhdHVyZXMgYXJlIHJlbmRlcmVkIGltbWVkaWF0ZWx5IGluIHRoZSBvcmRlciB0aGF0XG4gICAqIHRoaXMgbWV0aG9kIGlzIGNhbGxlZC4gIElmIHlvdSBuZWVkIGB6SW5kZXhgIHN1cHBvcnQsIHlvdSBzaG91bGQgYmUgdXNpbmcgYW5cbiAgICoge0BsaW5rIG1vZHVsZTpvbC9sYXllci9WZWN0b3J+VmVjdG9yTGF5ZXJ9IGluc3RlYWQuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd0ZlYXR1cmUgPSBmdW5jdGlvbiBkcmF3RmVhdHVyZSAoZmVhdHVyZSwgc3R5bGUpIHtcbiAgICB2YXIgZ2VvbWV0cnkgPSBzdHlsZS5nZXRHZW9tZXRyeUZ1bmN0aW9uKCkoZmVhdHVyZSk7XG4gICAgaWYgKCFnZW9tZXRyeSB8fCAhaW50ZXJzZWN0cyh0aGlzLmV4dGVudF8sIGdlb21ldHJ5LmdldEV4dGVudCgpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldFN0eWxlKHN0eWxlKTtcbiAgICB0aGlzLmRyYXdHZW9tZXRyeShnZW9tZXRyeSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbmRlciBhIEdlb21ldHJ5Q29sbGVjdGlvbiB0byB0aGUgY2FudmFzLiAgUmVuZGVyaW5nIGlzIGltbWVkaWF0ZSBhbmRcbiAgICogdXNlcyB0aGUgY3VycmVudCBzdHlsZXMgYXBwcm9wcmlhdGUgZm9yIGVhY2ggZ2VvbWV0cnkgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkgY29sbGVjdGlvbi5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd0dlb21ldHJ5Q29sbGVjdGlvbiA9IGZ1bmN0aW9uIGRyYXdHZW9tZXRyeUNvbGxlY3Rpb24gKGdlb21ldHJ5KSB7XG4gICAgdmFyIGdlb21ldHJpZXMgPSBnZW9tZXRyeS5nZXRHZW9tZXRyaWVzQXJyYXkoKTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBnZW9tZXRyaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHRoaXMuZHJhd0dlb21ldHJ5KGdlb21ldHJpZXNbaV0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVuZGVyIGEgUG9pbnQgZ2VvbWV0cnkgaW50byB0aGUgY2FudmFzLiAgUmVuZGVyaW5nIGlzIGltbWVkaWF0ZSBhbmQgdXNlc1xuICAgKiB0aGUgY3VycmVudCBzdHlsZS5cbiAgICpcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL1BvaW50LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBQb2ludCBnZW9tZXRyeS5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd1BvaW50ID0gZnVuY3Rpb24gZHJhd1BvaW50IChnZW9tZXRyeSkge1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgc3RyaWRlID0gZ2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgaWYgKHRoaXMuaW1hZ2VfKSB7XG4gICAgICB0aGlzLmRyYXdJbWFnZXNfKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlKTtcbiAgICB9XG4gICAgaWYgKHRoaXMudGV4dF8gIT09ICcnKSB7XG4gICAgICB0aGlzLmRyYXdUZXh0XyhmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW5kZXIgYSBNdWx0aVBvaW50IGdlb21ldHJ5ICBpbnRvIHRoZSBjYW52YXMuICBSZW5kZXJpbmcgaXMgaW1tZWRpYXRlIGFuZFxuICAgKiB1c2VzIHRoZSBjdXJyZW50IHN0eWxlLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlQb2ludC5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgTXVsdGlQb2ludCBnZW9tZXRyeS5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd011bHRpUG9pbnQgPSBmdW5jdGlvbiBkcmF3TXVsdGlQb2ludCAoZ2VvbWV0cnkpIHtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIHN0cmlkZSA9IGdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgIGlmICh0aGlzLmltYWdlXykge1xuICAgICAgdGhpcy5kcmF3SW1hZ2VzXyhmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSk7XG4gICAgfVxuICAgIGlmICh0aGlzLnRleHRfICE9PSAnJykge1xuICAgICAgdGhpcy5kcmF3VGV4dF8oZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVuZGVyIGEgTGluZVN0cmluZyBpbnRvIHRoZSBjYW52YXMuICBSZW5kZXJpbmcgaXMgaW1tZWRpYXRlIGFuZCB1c2VzXG4gICAqIHRoZSBjdXJyZW50IHN0eWxlLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgTGluZVN0cmluZyBnZW9tZXRyeS5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd0xpbmVTdHJpbmcgPSBmdW5jdGlvbiBkcmF3TGluZVN0cmluZyAoZ2VvbWV0cnkpIHtcbiAgICBpZiAoIWludGVyc2VjdHModGhpcy5leHRlbnRfLCBnZW9tZXRyeS5nZXRFeHRlbnQoKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3Ryb2tlU3RhdGVfKSB7XG4gICAgICB0aGlzLnNldENvbnRleHRTdHJva2VTdGF0ZV8odGhpcy5zdHJva2VTdGF0ZV8pO1xuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgIHRoaXMubW92ZVRvTGluZVRvXyhmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsXG4gICAgICAgIGdlb21ldHJ5LmdldFN0cmlkZSgpLCBmYWxzZSk7XG4gICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy50ZXh0XyAhPT0gJycpIHtcbiAgICAgIHZhciBmbGF0TWlkcG9pbnQgPSBnZW9tZXRyeS5nZXRGbGF0TWlkcG9pbnQoKTtcbiAgICAgIHRoaXMuZHJhd1RleHRfKGZsYXRNaWRwb2ludCwgMCwgMiwgMik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW5kZXIgYSBNdWx0aUxpbmVTdHJpbmcgZ2VvbWV0cnkgaW50byB0aGUgY2FudmFzLiAgUmVuZGVyaW5nIGlzIGltbWVkaWF0ZVxuICAgKiBhbmQgdXNlcyB0aGUgY3VycmVudCBzdHlsZS5cbiAgICpcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL011bHRpTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgTXVsdGlMaW5lU3RyaW5nIGdlb21ldHJ5LlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5kcmF3TXVsdGlMaW5lU3RyaW5nID0gZnVuY3Rpb24gZHJhd011bHRpTGluZVN0cmluZyAoZ2VvbWV0cnkpIHtcbiAgICB2YXIgZ2VvbWV0cnlFeHRlbnQgPSBnZW9tZXRyeS5nZXRFeHRlbnQoKTtcbiAgICBpZiAoIWludGVyc2VjdHModGhpcy5leHRlbnRfLCBnZW9tZXRyeUV4dGVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3Ryb2tlU3RhdGVfKSB7XG4gICAgICB0aGlzLnNldENvbnRleHRTdHJva2VTdGF0ZV8odGhpcy5zdHJva2VTdGF0ZV8pO1xuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgdmFyIG9mZnNldCA9IDA7XG4gICAgICB2YXIgZW5kcyA9IC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGdlb21ldHJ5LmdldEVuZHMoKSk7XG4gICAgICB2YXIgc3RyaWRlID0gZ2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIG9mZnNldCA9IHRoaXMubW92ZVRvTGluZVRvXyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1tpXSwgc3RyaWRlLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy50ZXh0XyAhPT0gJycpIHtcbiAgICAgIHZhciBmbGF0TWlkcG9pbnRzID0gZ2VvbWV0cnkuZ2V0RmxhdE1pZHBvaW50cygpO1xuICAgICAgdGhpcy5kcmF3VGV4dF8oZmxhdE1pZHBvaW50cywgMCwgZmxhdE1pZHBvaW50cy5sZW5ndGgsIDIpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVuZGVyIGEgUG9seWdvbiBnZW9tZXRyeSBpbnRvIHRoZSBjYW52YXMuICBSZW5kZXJpbmcgaXMgaW1tZWRpYXRlIGFuZCB1c2VzXG4gICAqIHRoZSBjdXJyZW50IHN0eWxlLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgUG9seWdvbiBnZW9tZXRyeS5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd1BvbHlnb24gPSBmdW5jdGlvbiBkcmF3UG9seWdvbiAoZ2VvbWV0cnkpIHtcbiAgICBpZiAoIWludGVyc2VjdHModGhpcy5leHRlbnRfLCBnZW9tZXRyeS5nZXRFeHRlbnQoKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3Ryb2tlU3RhdGVfIHx8IHRoaXMuZmlsbFN0YXRlXykge1xuICAgICAgaWYgKHRoaXMuZmlsbFN0YXRlXykge1xuICAgICAgICB0aGlzLnNldENvbnRleHRGaWxsU3RhdGVfKHRoaXMuZmlsbFN0YXRlXyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zdHJva2VTdGF0ZV8pIHtcbiAgICAgICAgdGhpcy5zZXRDb250ZXh0U3Ryb2tlU3RhdGVfKHRoaXMuc3Ryb2tlU3RhdGVfKTtcbiAgICAgIH1cbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICB0aGlzLmRyYXdSaW5nc18oZ2VvbWV0cnkuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSxcbiAgICAgICAgMCwgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqLyAoZ2VvbWV0cnkuZ2V0RW5kcygpKSwgZ2VvbWV0cnkuZ2V0U3RyaWRlKCkpO1xuICAgICAgaWYgKHRoaXMuZmlsbFN0YXRlXykge1xuICAgICAgICBjb250ZXh0LmZpbGwoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN0cm9rZVN0YXRlXykge1xuICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy50ZXh0XyAhPT0gJycpIHtcbiAgICAgIHZhciBmbGF0SW50ZXJpb3JQb2ludCA9IGdlb21ldHJ5LmdldEZsYXRJbnRlcmlvclBvaW50KCk7XG4gICAgICB0aGlzLmRyYXdUZXh0XyhmbGF0SW50ZXJpb3JQb2ludCwgMCwgMiwgMik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW5kZXIgTXVsdGlQb2x5Z29uIGdlb21ldHJ5IGludG8gdGhlIGNhbnZhcy4gIFJlbmRlcmluZyBpcyBpbW1lZGlhdGUgYW5kXG4gICAqIHVzZXMgdGhlIGN1cnJlbnQgc3R5bGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aVBvbHlnb24uanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgTXVsdGlQb2x5Z29uIGdlb21ldHJ5LlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5kcmF3TXVsdGlQb2x5Z29uID0gZnVuY3Rpb24gZHJhd011bHRpUG9seWdvbiAoZ2VvbWV0cnkpIHtcbiAgICBpZiAoIWludGVyc2VjdHModGhpcy5leHRlbnRfLCBnZW9tZXRyeS5nZXRFeHRlbnQoKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3Ryb2tlU3RhdGVfIHx8IHRoaXMuZmlsbFN0YXRlXykge1xuICAgICAgaWYgKHRoaXMuZmlsbFN0YXRlXykge1xuICAgICAgICB0aGlzLnNldENvbnRleHRGaWxsU3RhdGVfKHRoaXMuZmlsbFN0YXRlXyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zdHJva2VTdGF0ZV8pIHtcbiAgICAgICAgdGhpcy5zZXRDb250ZXh0U3Ryb2tlU3RhdGVfKHRoaXMuc3Ryb2tlU3RhdGVfKTtcbiAgICAgIH1cbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgdmFyIG9mZnNldCA9IDA7XG4gICAgICB2YXIgZW5kc3MgPSBnZW9tZXRyeS5nZXRFbmRzcygpO1xuICAgICAgdmFyIHN0cmlkZSA9IGdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgb2Zmc2V0ID0gdGhpcy5kcmF3UmluZ3NfKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZmlsbFN0YXRlXykge1xuICAgICAgICBjb250ZXh0LmZpbGwoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN0cm9rZVN0YXRlXykge1xuICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy50ZXh0XyAhPT0gJycpIHtcbiAgICAgIHZhciBmbGF0SW50ZXJpb3JQb2ludHMgPSBnZW9tZXRyeS5nZXRGbGF0SW50ZXJpb3JQb2ludHMoKTtcbiAgICAgIHRoaXMuZHJhd1RleHRfKGZsYXRJbnRlcmlvclBvaW50cywgMCwgZmxhdEludGVyaW9yUG9pbnRzLmxlbmd0aCwgMik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3RhdGV9IGZpbGxTdGF0ZSBGaWxsIHN0YXRlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLnNldENvbnRleHRGaWxsU3RhdGVfID0gZnVuY3Rpb24gc2V0Q29udGV4dEZpbGxTdGF0ZV8gKGZpbGxTdGF0ZSkge1xuICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICB2YXIgY29udGV4dEZpbGxTdGF0ZSA9IHRoaXMuY29udGV4dEZpbGxTdGF0ZV87XG4gICAgaWYgKCFjb250ZXh0RmlsbFN0YXRlKSB7XG4gICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGxTdGF0ZS5maWxsU3R5bGU7XG4gICAgICB0aGlzLmNvbnRleHRGaWxsU3RhdGVfID0ge1xuICAgICAgICBmaWxsU3R5bGU6IGZpbGxTdGF0ZS5maWxsU3R5bGVcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChjb250ZXh0RmlsbFN0YXRlLmZpbGxTdHlsZSAhPSBmaWxsU3RhdGUuZmlsbFN0eWxlKSB7XG4gICAgICAgIGNvbnRleHRGaWxsU3RhdGUuZmlsbFN0eWxlID0gY29udGV4dC5maWxsU3R5bGUgPSBmaWxsU3RhdGUuZmlsbFN0eWxlO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuU3Ryb2tlU3RhdGV9IHN0cm9rZVN0YXRlIFN0cm9rZSBzdGF0ZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5zZXRDb250ZXh0U3Ryb2tlU3RhdGVfID0gZnVuY3Rpb24gc2V0Q29udGV4dFN0cm9rZVN0YXRlXyAoc3Ryb2tlU3RhdGUpIHtcbiAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dF87XG4gICAgdmFyIGNvbnRleHRTdHJva2VTdGF0ZSA9IHRoaXMuY29udGV4dFN0cm9rZVN0YXRlXztcbiAgICBpZiAoIWNvbnRleHRTdHJva2VTdGF0ZSkge1xuICAgICAgY29udGV4dC5saW5lQ2FwID0gLyoqIEB0eXBlIHtDYW52YXNMaW5lQ2FwfSAqLyAoc3Ryb2tlU3RhdGUubGluZUNhcCk7XG4gICAgICBpZiAoQ0FOVkFTX0xJTkVfREFTSCkge1xuICAgICAgICBjb250ZXh0LnNldExpbmVEYXNoKHN0cm9rZVN0YXRlLmxpbmVEYXNoKTtcbiAgICAgICAgY29udGV4dC5saW5lRGFzaE9mZnNldCA9IHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0O1xuICAgICAgfVxuICAgICAgY29udGV4dC5saW5lSm9pbiA9IC8qKiBAdHlwZSB7Q2FudmFzTGluZUpvaW59ICovIChzdHJva2VTdGF0ZS5saW5lSm9pbik7XG4gICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IHN0cm9rZVN0YXRlLmxpbmVXaWR0aDtcbiAgICAgIGNvbnRleHQubWl0ZXJMaW1pdCA9IHN0cm9rZVN0YXRlLm1pdGVyTGltaXQ7XG4gICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgICB0aGlzLmNvbnRleHRTdHJva2VTdGF0ZV8gPSB7XG4gICAgICAgIGxpbmVDYXA6IHN0cm9rZVN0YXRlLmxpbmVDYXAsXG4gICAgICAgIGxpbmVEYXNoOiBzdHJva2VTdGF0ZS5saW5lRGFzaCxcbiAgICAgICAgbGluZURhc2hPZmZzZXQ6IHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0LFxuICAgICAgICBsaW5lSm9pbjogc3Ryb2tlU3RhdGUubGluZUpvaW4sXG4gICAgICAgIGxpbmVXaWR0aDogc3Ryb2tlU3RhdGUubGluZVdpZHRoLFxuICAgICAgICBtaXRlckxpbWl0OiBzdHJva2VTdGF0ZS5taXRlckxpbWl0LFxuICAgICAgICBzdHJva2VTdHlsZTogc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGVcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChjb250ZXh0U3Ryb2tlU3RhdGUubGluZUNhcCAhPSBzdHJva2VTdGF0ZS5saW5lQ2FwKSB7XG4gICAgICAgIGNvbnRleHRTdHJva2VTdGF0ZS5saW5lQ2FwID0gY29udGV4dC5saW5lQ2FwID0gLyoqIEB0eXBlIHtDYW52YXNMaW5lQ2FwfSAqLyAoc3Ryb2tlU3RhdGUubGluZUNhcCk7XG4gICAgICB9XG4gICAgICBpZiAoQ0FOVkFTX0xJTkVfREFTSCkge1xuICAgICAgICBpZiAoIWVxdWFscyhjb250ZXh0U3Ryb2tlU3RhdGUubGluZURhc2gsIHN0cm9rZVN0YXRlLmxpbmVEYXNoKSkge1xuICAgICAgICAgIGNvbnRleHQuc2V0TGluZURhc2goY29udGV4dFN0cm9rZVN0YXRlLmxpbmVEYXNoID0gc3Ryb2tlU3RhdGUubGluZURhc2gpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250ZXh0U3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQgIT0gc3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQpIHtcbiAgICAgICAgICBjb250ZXh0U3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQgPSBjb250ZXh0LmxpbmVEYXNoT2Zmc2V0ID1cbiAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjb250ZXh0U3Ryb2tlU3RhdGUubGluZUpvaW4gIT0gc3Ryb2tlU3RhdGUubGluZUpvaW4pIHtcbiAgICAgICAgY29udGV4dFN0cm9rZVN0YXRlLmxpbmVKb2luID0gY29udGV4dC5saW5lSm9pbiA9IC8qKiBAdHlwZSB7Q2FudmFzTGluZUpvaW59ICovIChzdHJva2VTdGF0ZS5saW5lSm9pbik7XG4gICAgICB9XG4gICAgICBpZiAoY29udGV4dFN0cm9rZVN0YXRlLmxpbmVXaWR0aCAhPSBzdHJva2VTdGF0ZS5saW5lV2lkdGgpIHtcbiAgICAgICAgY29udGV4dFN0cm9rZVN0YXRlLmxpbmVXaWR0aCA9IGNvbnRleHQubGluZVdpZHRoID0gc3Ryb2tlU3RhdGUubGluZVdpZHRoO1xuICAgICAgfVxuICAgICAgaWYgKGNvbnRleHRTdHJva2VTdGF0ZS5taXRlckxpbWl0ICE9IHN0cm9rZVN0YXRlLm1pdGVyTGltaXQpIHtcbiAgICAgICAgY29udGV4dFN0cm9rZVN0YXRlLm1pdGVyTGltaXQgPSBjb250ZXh0Lm1pdGVyTGltaXQgPVxuICAgICAgICAgICAgc3Ryb2tlU3RhdGUubWl0ZXJMaW1pdDtcbiAgICAgIH1cbiAgICAgIGlmIChjb250ZXh0U3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGUgIT0gc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGUpIHtcbiAgICAgICAgY29udGV4dFN0cm9rZVN0YXRlLnN0cm9rZVN0eWxlID0gY29udGV4dC5zdHJva2VTdHlsZSA9XG4gICAgICAgICAgICBzdHJva2VTdGF0ZS5zdHJva2VTdHlsZTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlRleHRTdGF0ZX0gdGV4dFN0YXRlIFRleHQgc3RhdGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuc2V0Q29udGV4dFRleHRTdGF0ZV8gPSBmdW5jdGlvbiBzZXRDb250ZXh0VGV4dFN0YXRlXyAodGV4dFN0YXRlKSB7XG4gICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgIHZhciBjb250ZXh0VGV4dFN0YXRlID0gdGhpcy5jb250ZXh0VGV4dFN0YXRlXztcbiAgICB2YXIgdGV4dEFsaWduID0gdGV4dFN0YXRlLnRleHRBbGlnbiA/XG4gICAgICB0ZXh0U3RhdGUudGV4dEFsaWduIDogZGVmYXVsdFRleHRBbGlnbjtcbiAgICBpZiAoIWNvbnRleHRUZXh0U3RhdGUpIHtcbiAgICAgIGNvbnRleHQuZm9udCA9IHRleHRTdGF0ZS5mb250O1xuICAgICAgY29udGV4dC50ZXh0QWxpZ24gPSAvKiogQHR5cGUge0NhbnZhc1RleHRBbGlnbn0gKi8gKHRleHRBbGlnbik7XG4gICAgICBjb250ZXh0LnRleHRCYXNlbGluZSA9IC8qKiBAdHlwZSB7Q2FudmFzVGV4dEJhc2VsaW5lfSAqLyAodGV4dFN0YXRlLnRleHRCYXNlbGluZSk7XG4gICAgICB0aGlzLmNvbnRleHRUZXh0U3RhdGVfID0ge1xuICAgICAgICBmb250OiB0ZXh0U3RhdGUuZm9udCxcbiAgICAgICAgdGV4dEFsaWduOiB0ZXh0QWxpZ24sXG4gICAgICAgIHRleHRCYXNlbGluZTogdGV4dFN0YXRlLnRleHRCYXNlbGluZVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNvbnRleHRUZXh0U3RhdGUuZm9udCAhPSB0ZXh0U3RhdGUuZm9udCkge1xuICAgICAgICBjb250ZXh0VGV4dFN0YXRlLmZvbnQgPSBjb250ZXh0LmZvbnQgPSB0ZXh0U3RhdGUuZm9udDtcbiAgICAgIH1cbiAgICAgIGlmIChjb250ZXh0VGV4dFN0YXRlLnRleHRBbGlnbiAhPSB0ZXh0QWxpZ24pIHtcbiAgICAgICAgY29udGV4dFRleHRTdGF0ZS50ZXh0QWxpZ24gPSBjb250ZXh0LnRleHRBbGlnbiA9IC8qKiBAdHlwZSB7Q2FudmFzVGV4dEFsaWdufSAqLyAodGV4dEFsaWduKTtcbiAgICAgIH1cbiAgICAgIGlmIChjb250ZXh0VGV4dFN0YXRlLnRleHRCYXNlbGluZSAhPSB0ZXh0U3RhdGUudGV4dEJhc2VsaW5lKSB7XG4gICAgICAgIGNvbnRleHRUZXh0U3RhdGUudGV4dEJhc2VsaW5lID0gY29udGV4dC50ZXh0QmFzZWxpbmUgPVxuICAgICAgICAgIC8qKiBAdHlwZSB7Q2FudmFzVGV4dEJhc2VsaW5lfSAqLyAodGV4dFN0YXRlLnRleHRCYXNlbGluZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGZpbGwgYW5kIHN0cm9rZSBzdHlsZSBmb3Igc3Vic2VxdWVudCBkcmF3IG9wZXJhdGlvbnMuICBUbyBjbGVhclxuICAgKiBlaXRoZXIgZmlsbCBvciBzdHJva2Ugc3R5bGVzLCBwYXNzIG51bGwgZm9yIHRoZSBhcHByb3ByaWF0ZSBwYXJhbWV0ZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc3R5bGUvRmlsbC5qc1wiKS5kZWZhdWx0fSBmaWxsU3R5bGUgRmlsbCBzdHlsZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zdHlsZS9TdHJva2UuanNcIikuZGVmYXVsdH0gc3Ryb2tlU3R5bGUgU3Ryb2tlIHN0eWxlLlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5zZXRGaWxsU3Ryb2tlU3R5bGUgPSBmdW5jdGlvbiBzZXRGaWxsU3Ryb2tlU3R5bGUgKGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUpIHtcbiAgICBpZiAoIWZpbGxTdHlsZSkge1xuICAgICAgdGhpcy5maWxsU3RhdGVfID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGZpbGxTdHlsZUNvbG9yID0gZmlsbFN0eWxlLmdldENvbG9yKCk7XG4gICAgICB0aGlzLmZpbGxTdGF0ZV8gPSB7XG4gICAgICAgIGZpbGxTdHlsZTogYXNDb2xvckxpa2UoZmlsbFN0eWxlQ29sb3IgP1xuICAgICAgICAgIGZpbGxTdHlsZUNvbG9yIDogZGVmYXVsdEZpbGxTdHlsZSlcbiAgICAgIH07XG4gICAgfVxuICAgIGlmICghc3Ryb2tlU3R5bGUpIHtcbiAgICAgIHRoaXMuc3Ryb2tlU3RhdGVfID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHN0cm9rZVN0eWxlQ29sb3IgPSBzdHJva2VTdHlsZS5nZXRDb2xvcigpO1xuICAgICAgdmFyIHN0cm9rZVN0eWxlTGluZUNhcCA9IHN0cm9rZVN0eWxlLmdldExpbmVDYXAoKTtcbiAgICAgIHZhciBzdHJva2VTdHlsZUxpbmVEYXNoID0gc3Ryb2tlU3R5bGUuZ2V0TGluZURhc2goKTtcbiAgICAgIHZhciBzdHJva2VTdHlsZUxpbmVEYXNoT2Zmc2V0ID0gc3Ryb2tlU3R5bGUuZ2V0TGluZURhc2hPZmZzZXQoKTtcbiAgICAgIHZhciBzdHJva2VTdHlsZUxpbmVKb2luID0gc3Ryb2tlU3R5bGUuZ2V0TGluZUpvaW4oKTtcbiAgICAgIHZhciBzdHJva2VTdHlsZVdpZHRoID0gc3Ryb2tlU3R5bGUuZ2V0V2lkdGgoKTtcbiAgICAgIHZhciBzdHJva2VTdHlsZU1pdGVyTGltaXQgPSBzdHJva2VTdHlsZS5nZXRNaXRlckxpbWl0KCk7XG4gICAgICB0aGlzLnN0cm9rZVN0YXRlXyA9IHtcbiAgICAgICAgbGluZUNhcDogc3Ryb2tlU3R5bGVMaW5lQ2FwICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgIHN0cm9rZVN0eWxlTGluZUNhcCA6IGRlZmF1bHRMaW5lQ2FwLFxuICAgICAgICBsaW5lRGFzaDogc3Ryb2tlU3R5bGVMaW5lRGFzaCA/XG4gICAgICAgICAgc3Ryb2tlU3R5bGVMaW5lRGFzaCA6IGRlZmF1bHRMaW5lRGFzaCxcbiAgICAgICAgbGluZURhc2hPZmZzZXQ6IHN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXQgP1xuICAgICAgICAgIHN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXQgOiBkZWZhdWx0TGluZURhc2hPZmZzZXQsXG4gICAgICAgIGxpbmVKb2luOiBzdHJva2VTdHlsZUxpbmVKb2luICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgIHN0cm9rZVN0eWxlTGluZUpvaW4gOiBkZWZhdWx0TGluZUpvaW4sXG4gICAgICAgIGxpbmVXaWR0aDogdGhpcy5waXhlbFJhdGlvXyAqIChzdHJva2VTdHlsZVdpZHRoICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgIHN0cm9rZVN0eWxlV2lkdGggOiBkZWZhdWx0TGluZVdpZHRoKSxcbiAgICAgICAgbWl0ZXJMaW1pdDogc3Ryb2tlU3R5bGVNaXRlckxpbWl0ICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgIHN0cm9rZVN0eWxlTWl0ZXJMaW1pdCA6IGRlZmF1bHRNaXRlckxpbWl0LFxuICAgICAgICBzdHJva2VTdHlsZTogYXNDb2xvckxpa2Uoc3Ryb2tlU3R5bGVDb2xvciA/XG4gICAgICAgICAgc3Ryb2tlU3R5bGVDb2xvciA6IGRlZmF1bHRTdHJva2VTdHlsZSlcbiAgICAgIH07XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGltYWdlIHN0eWxlIGZvciBzdWJzZXF1ZW50IGRyYXcgb3BlcmF0aW9ucy4gIFBhc3MgbnVsbCB0byByZW1vdmVcbiAgICogdGhlIGltYWdlIHN0eWxlLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3N0eWxlL0ltYWdlLmpzXCIpLmRlZmF1bHR9IGltYWdlU3R5bGUgSW1hZ2Ugc3R5bGUuXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLnNldEltYWdlU3R5bGUgPSBmdW5jdGlvbiBzZXRJbWFnZVN0eWxlIChpbWFnZVN0eWxlKSB7XG4gICAgaWYgKCFpbWFnZVN0eWxlKSB7XG4gICAgICB0aGlzLmltYWdlXyA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBpbWFnZUFuY2hvciA9IGltYWdlU3R5bGUuZ2V0QW5jaG9yKCk7XG4gICAgICAvLyBGSVhNRSBwaXhlbCByYXRpb1xuICAgICAgdmFyIGltYWdlSW1hZ2UgPSBpbWFnZVN0eWxlLmdldEltYWdlKDEpO1xuICAgICAgdmFyIGltYWdlT3JpZ2luID0gaW1hZ2VTdHlsZS5nZXRPcmlnaW4oKTtcbiAgICAgIHZhciBpbWFnZVNpemUgPSBpbWFnZVN0eWxlLmdldFNpemUoKTtcbiAgICAgIHRoaXMuaW1hZ2VBbmNob3JYXyA9IGltYWdlQW5jaG9yWzBdO1xuICAgICAgdGhpcy5pbWFnZUFuY2hvcllfID0gaW1hZ2VBbmNob3JbMV07XG4gICAgICB0aGlzLmltYWdlSGVpZ2h0XyA9IGltYWdlU2l6ZVsxXTtcbiAgICAgIHRoaXMuaW1hZ2VfID0gaW1hZ2VJbWFnZTtcbiAgICAgIHRoaXMuaW1hZ2VPcGFjaXR5XyA9IGltYWdlU3R5bGUuZ2V0T3BhY2l0eSgpO1xuICAgICAgdGhpcy5pbWFnZU9yaWdpblhfID0gaW1hZ2VPcmlnaW5bMF07XG4gICAgICB0aGlzLmltYWdlT3JpZ2luWV8gPSBpbWFnZU9yaWdpblsxXTtcbiAgICAgIHRoaXMuaW1hZ2VSb3RhdGVXaXRoVmlld18gPSBpbWFnZVN0eWxlLmdldFJvdGF0ZVdpdGhWaWV3KCk7XG4gICAgICB0aGlzLmltYWdlUm90YXRpb25fID0gaW1hZ2VTdHlsZS5nZXRSb3RhdGlvbigpO1xuICAgICAgdGhpcy5pbWFnZVNjYWxlXyA9IGltYWdlU3R5bGUuZ2V0U2NhbGUoKSAqIHRoaXMucGl4ZWxSYXRpb187XG4gICAgICB0aGlzLmltYWdlV2lkdGhfID0gaW1hZ2VTaXplWzBdO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB0ZXh0IHN0eWxlIGZvciBzdWJzZXF1ZW50IGRyYXcgb3BlcmF0aW9ucy4gIFBhc3MgbnVsbCB0b1xuICAgKiByZW1vdmUgdGhlIHRleHQgc3R5bGUuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc3R5bGUvVGV4dC5qc1wiKS5kZWZhdWx0fSB0ZXh0U3R5bGUgVGV4dCBzdHlsZS5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuc2V0VGV4dFN0eWxlID0gZnVuY3Rpb24gc2V0VGV4dFN0eWxlICh0ZXh0U3R5bGUpIHtcbiAgICBpZiAoIXRleHRTdHlsZSkge1xuICAgICAgdGhpcy50ZXh0XyA9ICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdGV4dEZpbGxTdHlsZSA9IHRleHRTdHlsZS5nZXRGaWxsKCk7XG4gICAgICBpZiAoIXRleHRGaWxsU3R5bGUpIHtcbiAgICAgICAgdGhpcy50ZXh0RmlsbFN0YXRlXyA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdGV4dEZpbGxTdHlsZUNvbG9yID0gdGV4dEZpbGxTdHlsZS5nZXRDb2xvcigpO1xuICAgICAgICB0aGlzLnRleHRGaWxsU3RhdGVfID0ge1xuICAgICAgICAgIGZpbGxTdHlsZTogYXNDb2xvckxpa2UodGV4dEZpbGxTdHlsZUNvbG9yID9cbiAgICAgICAgICAgIHRleHRGaWxsU3R5bGVDb2xvciA6IGRlZmF1bHRGaWxsU3R5bGUpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlID0gdGV4dFN0eWxlLmdldFN0cm9rZSgpO1xuICAgICAgaWYgKCF0ZXh0U3Ryb2tlU3R5bGUpIHtcbiAgICAgICAgdGhpcy50ZXh0U3Ryb2tlU3RhdGVfID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB0ZXh0U3Ryb2tlU3R5bGVDb2xvciA9IHRleHRTdHJva2VTdHlsZS5nZXRDb2xvcigpO1xuICAgICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlTGluZUNhcCA9IHRleHRTdHJva2VTdHlsZS5nZXRMaW5lQ2FwKCk7XG4gICAgICAgIHZhciB0ZXh0U3Ryb2tlU3R5bGVMaW5lRGFzaCA9IHRleHRTdHJva2VTdHlsZS5nZXRMaW5lRGFzaCgpO1xuICAgICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXQgPSB0ZXh0U3Ryb2tlU3R5bGUuZ2V0TGluZURhc2hPZmZzZXQoKTtcbiAgICAgICAgdmFyIHRleHRTdHJva2VTdHlsZUxpbmVKb2luID0gdGV4dFN0cm9rZVN0eWxlLmdldExpbmVKb2luKCk7XG4gICAgICAgIHZhciB0ZXh0U3Ryb2tlU3R5bGVXaWR0aCA9IHRleHRTdHJva2VTdHlsZS5nZXRXaWR0aCgpO1xuICAgICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlTWl0ZXJMaW1pdCA9IHRleHRTdHJva2VTdHlsZS5nZXRNaXRlckxpbWl0KCk7XG4gICAgICAgIHRoaXMudGV4dFN0cm9rZVN0YXRlXyA9IHtcbiAgICAgICAgICBsaW5lQ2FwOiB0ZXh0U3Ryb2tlU3R5bGVMaW5lQ2FwICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgdGV4dFN0cm9rZVN0eWxlTGluZUNhcCA6IGRlZmF1bHRMaW5lQ2FwLFxuICAgICAgICAgIGxpbmVEYXNoOiB0ZXh0U3Ryb2tlU3R5bGVMaW5lRGFzaCA/XG4gICAgICAgICAgICB0ZXh0U3Ryb2tlU3R5bGVMaW5lRGFzaCA6IGRlZmF1bHRMaW5lRGFzaCxcbiAgICAgICAgICBsaW5lRGFzaE9mZnNldDogdGV4dFN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXQgP1xuICAgICAgICAgICAgdGV4dFN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXQgOiBkZWZhdWx0TGluZURhc2hPZmZzZXQsXG4gICAgICAgICAgbGluZUpvaW46IHRleHRTdHJva2VTdHlsZUxpbmVKb2luICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgdGV4dFN0cm9rZVN0eWxlTGluZUpvaW4gOiBkZWZhdWx0TGluZUpvaW4sXG4gICAgICAgICAgbGluZVdpZHRoOiB0ZXh0U3Ryb2tlU3R5bGVXaWR0aCAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgIHRleHRTdHJva2VTdHlsZVdpZHRoIDogZGVmYXVsdExpbmVXaWR0aCxcbiAgICAgICAgICBtaXRlckxpbWl0OiB0ZXh0U3Ryb2tlU3R5bGVNaXRlckxpbWl0ICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgdGV4dFN0cm9rZVN0eWxlTWl0ZXJMaW1pdCA6IGRlZmF1bHRNaXRlckxpbWl0LFxuICAgICAgICAgIHN0cm9rZVN0eWxlOiBhc0NvbG9yTGlrZSh0ZXh0U3Ryb2tlU3R5bGVDb2xvciA/XG4gICAgICAgICAgICB0ZXh0U3Ryb2tlU3R5bGVDb2xvciA6IGRlZmF1bHRTdHJva2VTdHlsZSlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHZhciB0ZXh0Rm9udCA9IHRleHRTdHlsZS5nZXRGb250KCk7XG4gICAgICB2YXIgdGV4dE9mZnNldFggPSB0ZXh0U3R5bGUuZ2V0T2Zmc2V0WCgpO1xuICAgICAgdmFyIHRleHRPZmZzZXRZID0gdGV4dFN0eWxlLmdldE9mZnNldFkoKTtcbiAgICAgIHZhciB0ZXh0Um90YXRlV2l0aFZpZXcgPSB0ZXh0U3R5bGUuZ2V0Um90YXRlV2l0aFZpZXcoKTtcbiAgICAgIHZhciB0ZXh0Um90YXRpb24gPSB0ZXh0U3R5bGUuZ2V0Um90YXRpb24oKTtcbiAgICAgIHZhciB0ZXh0U2NhbGUgPSB0ZXh0U3R5bGUuZ2V0U2NhbGUoKTtcbiAgICAgIHZhciB0ZXh0VGV4dCA9IHRleHRTdHlsZS5nZXRUZXh0KCk7XG4gICAgICB2YXIgdGV4dFRleHRBbGlnbiA9IHRleHRTdHlsZS5nZXRUZXh0QWxpZ24oKTtcbiAgICAgIHZhciB0ZXh0VGV4dEJhc2VsaW5lID0gdGV4dFN0eWxlLmdldFRleHRCYXNlbGluZSgpO1xuICAgICAgdGhpcy50ZXh0U3RhdGVfID0ge1xuICAgICAgICBmb250OiB0ZXh0Rm9udCAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgICB0ZXh0Rm9udCA6IGRlZmF1bHRGb250LFxuICAgICAgICB0ZXh0QWxpZ246IHRleHRUZXh0QWxpZ24gIT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgdGV4dFRleHRBbGlnbiA6IGRlZmF1bHRUZXh0QWxpZ24sXG4gICAgICAgIHRleHRCYXNlbGluZTogdGV4dFRleHRCYXNlbGluZSAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgICB0ZXh0VGV4dEJhc2VsaW5lIDogZGVmYXVsdFRleHRCYXNlbGluZVxuICAgICAgfTtcbiAgICAgIHRoaXMudGV4dF8gPSB0ZXh0VGV4dCAhPT0gdW5kZWZpbmVkID8gdGV4dFRleHQgOiAnJztcbiAgICAgIHRoaXMudGV4dE9mZnNldFhfID1cbiAgICAgICAgICB0ZXh0T2Zmc2V0WCAhPT0gdW5kZWZpbmVkID8gKHRoaXMucGl4ZWxSYXRpb18gKiB0ZXh0T2Zmc2V0WCkgOiAwO1xuICAgICAgdGhpcy50ZXh0T2Zmc2V0WV8gPVxuICAgICAgICAgIHRleHRPZmZzZXRZICE9PSB1bmRlZmluZWQgPyAodGhpcy5waXhlbFJhdGlvXyAqIHRleHRPZmZzZXRZKSA6IDA7XG4gICAgICB0aGlzLnRleHRSb3RhdGVXaXRoVmlld18gPSB0ZXh0Um90YXRlV2l0aFZpZXcgIT09IHVuZGVmaW5lZCA/IHRleHRSb3RhdGVXaXRoVmlldyA6IGZhbHNlO1xuICAgICAgdGhpcy50ZXh0Um90YXRpb25fID0gdGV4dFJvdGF0aW9uICE9PSB1bmRlZmluZWQgPyB0ZXh0Um90YXRpb24gOiAwO1xuICAgICAgdGhpcy50ZXh0U2NhbGVfID0gdGhpcy5waXhlbFJhdGlvXyAqICh0ZXh0U2NhbGUgIT09IHVuZGVmaW5lZCA/XG4gICAgICAgIHRleHRTY2FsZSA6IDEpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXI7XG59KFZlY3RvckNvbnRleHQpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNJbW1lZGlhdGVSZW5kZXJlcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW1tZWRpYXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHlsZS9JY29uSW1hZ2VDYWNoZVxuICovXG5pbXBvcnQge2FzU3RyaW5nfSBmcm9tICcuLi9jb2xvci5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogU2luZ2xldG9uIGNsYXNzLiBBdmFpbGFibGUgdGhyb3VnaCB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlL0ljb25JbWFnZUNhY2hlfnNoYXJlZH0uXG4gKi9cbnZhciBJY29uSW1hZ2VDYWNoZSA9IGZ1bmN0aW9uIEljb25JbWFnZUNhY2hlKCkge1xuXG4gIC8qKlxuICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi9JY29uSW1hZ2UuanNcIikuZGVmYXVsdD59XG4gICogQHByaXZhdGVcbiAgKi9cbiAgdGhpcy5jYWNoZV8gPSB7fTtcblxuICAvKipcbiAgKiBAdHlwZSB7bnVtYmVyfVxuICAqIEBwcml2YXRlXG4gICovXG4gIHRoaXMuY2FjaGVTaXplXyA9IDA7XG5cbiAgLyoqXG4gICogQHR5cGUge251bWJlcn1cbiAgKiBAcHJpdmF0ZVxuICAqL1xuICB0aGlzLm1heENhY2hlU2l6ZV8gPSAzMjtcbn07XG5cbi8qKlxuKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiovXG5JY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiBjbGVhciAoKSB7XG4gIHRoaXMuY2FjaGVfID0ge307XG4gIHRoaXMuY2FjaGVTaXplXyA9IDA7XG59O1xuXG4vKipcbiogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4qL1xuSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLmV4cGlyZSA9IGZ1bmN0aW9uIGV4cGlyZSAoKSB7XG4gIGlmICh0aGlzLmNhY2hlU2l6ZV8gPiB0aGlzLm1heENhY2hlU2l6ZV8pIHtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMuY2FjaGVfKSB7XG4gICAgICB2YXIgaWNvbkltYWdlID0gdGhpcy5jYWNoZV9ba2V5XTtcbiAgICAgIGlmICgoaSsrICYgMykgPT09IDAgJiYgIWljb25JbWFnZS5oYXNMaXN0ZW5lcigpKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlX1trZXldO1xuICAgICAgICAtLXRoaXMuY2FjaGVTaXplXztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNyYy5cbiogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4qIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9IGNvbG9yIENvbG9yLlxuKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0fSBJY29uIGltYWdlLlxuKi9cbkljb25JbWFnZUNhY2hlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQgKHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKSB7XG4gIHZhciBrZXkgPSBnZXRLZXkoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpO1xuICByZXR1cm4ga2V5IGluIHRoaXMuY2FjaGVfID8gdGhpcy5jYWNoZV9ba2V5XSA6IG51bGw7XG59O1xuXG4vKipcbiogQHBhcmFtIHtzdHJpbmd9IHNyYyBTcmMuXG4qIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfSBjb2xvciBDb2xvci5cbiogQHBhcmFtIHtpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0fSBpY29uSW1hZ2UgSWNvbiBpbWFnZS5cbiovXG5JY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gc2V0IChzcmMsIGNyb3NzT3JpZ2luLCBjb2xvciwgaWNvbkltYWdlKSB7XG4gIHZhciBrZXkgPSBnZXRLZXkoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpO1xuICB0aGlzLmNhY2hlX1trZXldID0gaWNvbkltYWdlO1xuICArK3RoaXMuY2FjaGVTaXplXztcbn07XG5cbi8qKlxuKiBTZXQgdGhlIGNhY2hlIHNpemUgb2YgdGhlIGljb24gY2FjaGUuIERlZmF1bHQgaXMgYDMyYC4gQ2hhbmdlIHRoaXMgdmFsdWUgd2hlblxuKiB5b3VyIG1hcCB1c2VzIG1vcmUgdGhhbiAzMiBkaWZmZXJlbnQgaWNvbiBpbWFnZXMgYW5kIHlvdSBhcmUgbm90IGNhY2hpbmcgaWNvblxuKiBzdHlsZXMgb24gdGhlIGFwcGxpY2F0aW9uIGxldmVsLlxuKiBAcGFyYW0ge251bWJlcn0gbWF4Q2FjaGVTaXplIENhY2hlIG1heCBzaXplLlxuKiBAYXBpXG4qL1xuSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbiBzZXRTaXplIChtYXhDYWNoZVNpemUpIHtcbiAgdGhpcy5tYXhDYWNoZVNpemVfID0gbWF4Q2FjaGVTaXplO1xuICB0aGlzLmV4cGlyZSgpO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU3JjLlxuICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gQ2FjaGUga2V5LlxuICovXG5mdW5jdGlvbiBnZXRLZXkoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpIHtcbiAgdmFyIGNvbG9yU3RyaW5nID0gY29sb3IgPyBhc1N0cmluZyhjb2xvcikgOiAnbnVsbCc7XG4gIHJldHVybiBjcm9zc09yaWdpbiArICc6JyArIHNyYyArICc6JyArIGNvbG9yU3RyaW5nO1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IEljb25JbWFnZUNhY2hlO1xuXG5cbi8qKlxuICogVGhlIHtAbGluayBtb2R1bGU6b2wvc3R5bGUvSWNvbkltYWdlQ2FjaGV+SWNvbkltYWdlQ2FjaGV9IGZvclxuICoge0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9JY29ufkljb259IGltYWdlcy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBzaGFyZWQgPSBuZXcgSWNvbkltYWdlQ2FjaGUoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SWNvbkltYWdlQ2FjaGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL01hcFxuICovXG5pbXBvcnQge2Fic3RyYWN0LCBnZXRVaWR9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IERpc3Bvc2FibGUgZnJvbSAnLi4vRGlzcG9zYWJsZS5qcyc7XG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW5CeUtleX0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge2dldFdpZHRofSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHtUUlVFfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHt2aXNpYmxlQXRSZXNvbHV0aW9ufSBmcm9tICcuLi9sYXllci9MYXllci5qcyc7XG5pbXBvcnQge3NoYXJlZCBhcyBpY29uSW1hZ2VDYWNoZX0gZnJvbSAnLi4vc3R5bGUvSWNvbkltYWdlQ2FjaGUuanMnO1xuaW1wb3J0IHtjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIGludmVydCBhcyBpbnZlcnRUcmFuc2Zvcm0sIHNldEZyb21BcnJheSBhcyB0cmFuc2Zvcm1TZXRGcm9tQXJyYXl9IGZyb20gJy4uL3RyYW5zZm9ybS5qcyc7XG5cbi8qKlxuICogQGFic3RyYWN0XG4gKi9cbnZhciBNYXBSZW5kZXJlciA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKERpc3Bvc2FibGUpIHtcbiAgZnVuY3Rpb24gTWFwUmVuZGVyZXIobWFwKSB7XG4gICAgRGlzcG9zYWJsZS5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5tYXBfID0gbWFwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59XG4gICAgICovXG4gICAgdGhpcy5sYXllclJlbmRlcmVyc18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMubGF5ZXJSZW5kZXJlckxpc3RlbmVyc18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PHR5cGVvZiBpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqL1xuICAgIHRoaXMubGF5ZXJSZW5kZXJlckNvbnN0cnVjdG9yc18gPSBbXTtcblxuICB9XG5cbiAgaWYgKCBEaXNwb3NhYmxlICkgTWFwUmVuZGVyZXIuX19wcm90b19fID0gRGlzcG9zYWJsZTtcbiAgTWFwUmVuZGVyZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRGlzcG9zYWJsZSAmJiBEaXNwb3NhYmxlLnByb3RvdHlwZSApO1xuICBNYXBSZW5kZXJlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNYXBSZW5kZXJlcjtcblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIEV2ZW50IHR5cGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqL1xuICBNYXBSZW5kZXJlci5wcm90b3R5cGUuZGlzcGF0Y2hSZW5kZXJFdmVudCA9IGZ1bmN0aW9uIGRpc3BhdGNoUmVuZGVyRXZlbnQgKHR5cGUsIGZyYW1lU3RhdGUpIHtcbiAgICBhYnN0cmFjdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBsYXllciByZW5kZXJlciBjb25zdHJ1Y3RvcnMuXG4gICAqIEBwYXJhbSB7QXJyYXk8dHlwZW9mIGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IGNvbnN0cnVjdG9ycyBMYXllciByZW5kZXJlcnMuXG4gICAqL1xuICBNYXBSZW5kZXJlci5wcm90b3R5cGUucmVnaXN0ZXJMYXllclJlbmRlcmVycyA9IGZ1bmN0aW9uIHJlZ2lzdGVyTGF5ZXJSZW5kZXJlcnMgKGNvbnN0cnVjdG9ycykge1xuICAgIHRoaXMubGF5ZXJSZW5kZXJlckNvbnN0cnVjdG9yc18ucHVzaC5hcHBseSh0aGlzLmxheWVyUmVuZGVyZXJDb25zdHJ1Y3RvcnNfLCBjb25zdHJ1Y3RvcnMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5jYWxjdWxhdGVNYXRyaWNlczJEID0gZnVuY3Rpb24gY2FsY3VsYXRlTWF0cmljZXMyRCAoZnJhbWVTdGF0ZSkge1xuICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICB2YXIgY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0gPSBmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtO1xuICAgIHZhciBwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSA9IGZyYW1lU3RhdGUucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm07XG5cbiAgICBjb21wb3NlVHJhbnNmb3JtKGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLFxuICAgICAgZnJhbWVTdGF0ZS5zaXplWzBdIC8gMiwgZnJhbWVTdGF0ZS5zaXplWzFdIC8gMixcbiAgICAgIDEgLyB2aWV3U3RhdGUucmVzb2x1dGlvbiwgLTEgLyB2aWV3U3RhdGUucmVzb2x1dGlvbixcbiAgICAgIC12aWV3U3RhdGUucm90YXRpb24sXG4gICAgICAtdmlld1N0YXRlLmNlbnRlclswXSwgLXZpZXdTdGF0ZS5jZW50ZXJbMV0pO1xuXG4gICAgaW52ZXJ0VHJhbnNmb3JtKFxuICAgICAgdHJhbnNmb3JtU2V0RnJvbUFycmF5KHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLCBjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFsbCBsYXllciByZW5kZXJlcnMuXG4gICAqL1xuICBNYXBSZW5kZXJlci5wcm90b3R5cGUucmVtb3ZlTGF5ZXJSZW5kZXJlcnMgPSBmdW5jdGlvbiByZW1vdmVMYXllclJlbmRlcmVycyAoKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMubGF5ZXJSZW5kZXJlcnNfKSB7XG4gICAgICB0aGlzLnJlbW92ZUxheWVyUmVuZGVyZXJCeUtleV8oa2V5KS5kaXNwb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogUywgaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZSxcbiAgICogICAgIGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBUfSBjYWxsYmFjayBGZWF0dXJlIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge1N9IHRoaXNBcmcgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgY2FsbGJhY2tgLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6IFUsIGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBsYXllckZpbHRlciBMYXllciBmaWx0ZXJcbiAgICogICAgIGZ1bmN0aW9uLCBvbmx5IGxheWVycyB3aGljaCBhcmUgdmlzaWJsZSBhbmQgZm9yIHdoaWNoIHRoaXMgZnVuY3Rpb25cbiAgICogICAgIHJldHVybnMgYHRydWVgIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlXG4gICAqICAgICBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gICAqIEBwYXJhbSB7VX0gdGhpc0FyZzIgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgbGF5ZXJGaWx0ZXJgLlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgKiBAdGVtcGxhdGUgUyxULFVcbiAgICovXG4gIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIGZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlIChcbiAgICBjb29yZGluYXRlLFxuICAgIGZyYW1lU3RhdGUsXG4gICAgaGl0VG9sZXJhbmNlLFxuICAgIGNhbGxiYWNrLFxuICAgIHRoaXNBcmcsXG4gICAgbGF5ZXJGaWx0ZXIsXG4gICAgdGhpc0FyZzJcbiAgKSB7XG4gICAgdmFyIHJlc3VsdDtcbiAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgdmFyIHZpZXdSZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICAgICAqIEByZXR1cm4gez99IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShmZWF0dXJlLCBsYXllcikge1xuICAgICAgdmFyIG1hbmFnZWQgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzW2dldFVpZChsYXllcildLm1hbmFnZWQ7XG4gICAgICBpZiAoIShnZXRVaWQoZmVhdHVyZSkgaW4gZnJhbWVTdGF0ZS5za2lwcGVkRmVhdHVyZVVpZHMgJiYgIW1hbmFnZWQpKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIGZlYXR1cmUsIG1hbmFnZWQgPyBsYXllciA6IG51bGwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG5cbiAgICB2YXIgdHJhbnNsYXRlZENvb3JkaW5hdGUgPSBjb29yZGluYXRlO1xuICAgIGlmIChwcm9qZWN0aW9uLmNhbldyYXBYKCkpIHtcbiAgICAgIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICAgIHZhciB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG4gICAgICB2YXIgeCA9IGNvb3JkaW5hdGVbMF07XG4gICAgICBpZiAoeCA8IHByb2plY3Rpb25FeHRlbnRbMF0gfHwgeCA+IHByb2plY3Rpb25FeHRlbnRbMl0pIHtcbiAgICAgICAgdmFyIHdvcmxkc0F3YXkgPSBNYXRoLmNlaWwoKHByb2plY3Rpb25FeHRlbnRbMF0gLSB4KSAvIHdvcmxkV2lkdGgpO1xuICAgICAgICB0cmFuc2xhdGVkQ29vcmRpbmF0ZSA9IFt4ICsgd29ybGRXaWR0aCAqIHdvcmxkc0F3YXksIGNvb3JkaW5hdGVbMV1dO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBsYXllclN0YXRlcyA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheTtcbiAgICB2YXIgbnVtTGF5ZXJzID0gbGF5ZXJTdGF0ZXMubGVuZ3RoO1xuICAgIHZhciBpO1xuICAgIGZvciAoaSA9IG51bUxheWVycyAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzW2ldO1xuICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgIGlmICh2aXNpYmxlQXRSZXNvbHV0aW9uKGxheWVyU3RhdGUsIHZpZXdSZXNvbHV0aW9uKSAmJiBsYXllckZpbHRlci5jYWxsKHRoaXNBcmcyLCBsYXllcikpIHtcbiAgICAgICAgdmFyIGxheWVyUmVuZGVyZXIgPSB0aGlzLmdldExheWVyUmVuZGVyZXIobGF5ZXIpO1xuICAgICAgICB2YXIgc291cmNlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXIpLmdldFNvdXJjZSgpO1xuICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgcmVzdWx0ID0gbGF5ZXJSZW5kZXJlci5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShcbiAgICAgICAgICAgIHNvdXJjZS5nZXRXcmFwWCgpID8gdHJhbnNsYXRlZENvb3JkaW5hdGUgOiBjb29yZGluYXRlLFxuICAgICAgICAgICAgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfTtcblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogUywgaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCwgKFVpbnQ4Q2xhbXBlZEFycmF5fFVpbnQ4QXJyYXkpKTogVH0gY2FsbGJhY2sgTGF5ZXJcbiAgICogICAgIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge1N9IHRoaXNBcmcgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgY2FsbGJhY2tgLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6IFUsIGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBsYXllckZpbHRlciBMYXllciBmaWx0ZXJcbiAgICogICAgIGZ1bmN0aW9uLCBvbmx5IGxheWVycyB3aGljaCBhcmUgdmlzaWJsZSBhbmQgZm9yIHdoaWNoIHRoaXMgZnVuY3Rpb25cbiAgICogICAgIHJldHVybnMgYHRydWVgIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlXG4gICAqICAgICBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gICAqIEBwYXJhbSB7VX0gdGhpc0FyZzIgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgbGF5ZXJGaWx0ZXJgLlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgKiBAdGVtcGxhdGUgUyxULFVcbiAgICovXG4gIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5mb3JFYWNoTGF5ZXJBdFBpeGVsID0gZnVuY3Rpb24gZm9yRWFjaExheWVyQXRQaXhlbCAocGl4ZWwsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2ssIHRoaXNBcmcsIGxheWVyRmlsdGVyLCB0aGlzQXJnMikge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogVSwgaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGxheWVyRmlsdGVyIExheWVyIGZpbHRlclxuICAgKiAgICAgZnVuY3Rpb24sIG9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvblxuICAgKiAgICAgcmV0dXJucyBgdHJ1ZWAgd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiAgQnkgZGVmYXVsdCwgYWxsIHZpc2libGVcbiAgICogICAgIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAgICogQHBhcmFtIHtVfSB0aGlzQXJnIFZhbHVlIHRvIHVzZSBhcyBgdGhpc2Agd2hlbiBleGVjdXRpbmcgYGxheWVyRmlsdGVyYC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgdGhlcmUgYSBmZWF0dXJlIGF0IHRoZSBnaXZlbiBjb29yZGluYXRlP1xuICAgKiBAdGVtcGxhdGUgVVxuICAgKi9cbiAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmhhc0ZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiBoYXNGZWF0dXJlQXRDb29yZGluYXRlIChjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGxheWVyRmlsdGVyLCB0aGlzQXJnKSB7XG4gICAgdmFyIGhhc0ZlYXR1cmUgPSB0aGlzLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKFxuICAgICAgY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBUUlVFLCB0aGlzLCBsYXllckZpbHRlciwgdGhpc0FyZyk7XG5cbiAgICByZXR1cm4gaGFzRmVhdHVyZSAhPT0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0fSBMYXllciByZW5kZXJlci5cbiAgICovXG4gIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5nZXRMYXllclJlbmRlcmVyID0gZnVuY3Rpb24gZ2V0TGF5ZXJSZW5kZXJlciAobGF5ZXIpIHtcbiAgICB2YXIgbGF5ZXJLZXkgPSBnZXRVaWQobGF5ZXIpO1xuICAgIGlmIChsYXllcktleSBpbiB0aGlzLmxheWVyUmVuZGVyZXJzXykge1xuICAgICAgcmV0dXJuIHRoaXMubGF5ZXJSZW5kZXJlcnNfW2xheWVyS2V5XTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHJlbmRlcmVyO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5sYXllclJlbmRlcmVyQ29uc3RydWN0b3JzXy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBjYW5kaWRhdGUgPSB0aGlzLmxheWVyUmVuZGVyZXJDb25zdHJ1Y3RvcnNfW2ldO1xuICAgICAgICBpZiAoY2FuZGlkYXRlWydoYW5kbGVzJ10obGF5ZXIpKSB7XG4gICAgICAgICAgcmVuZGVyZXIgPSBjYW5kaWRhdGVbJ2NyZWF0ZSddKHRoaXMsIGxheWVyKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMubGF5ZXJSZW5kZXJlcnNfW2xheWVyS2V5XSA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmxheWVyUmVuZGVyZXJMaXN0ZW5lcnNfW2xheWVyS2V5XSA9IGxpc3RlbihyZW5kZXJlcixcbiAgICAgICAgICBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZUxheWVyUmVuZGVyZXJDaGFuZ2VfLCB0aGlzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGNyZWF0ZSByZW5kZXJlciBmb3IgbGF5ZXI6ICcgKyBsYXllci5nZXRUeXBlKCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlbmRlcmVyO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxheWVyS2V5IExheWVyIGtleS5cbiAgICogQHByb3RlY3RlZFxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHR9IExheWVyIHJlbmRlcmVyLlxuICAgKi9cbiAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmdldExheWVyUmVuZGVyZXJCeUtleSA9IGZ1bmN0aW9uIGdldExheWVyUmVuZGVyZXJCeUtleSAobGF5ZXJLZXkpIHtcbiAgICByZXR1cm4gdGhpcy5sYXllclJlbmRlcmVyc19bbGF5ZXJLZXldO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEByZXR1cm4ge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IExheWVyIHJlbmRlcmVycy5cbiAgICovXG4gIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5nZXRMYXllclJlbmRlcmVycyA9IGZ1bmN0aW9uIGdldExheWVyUmVuZGVyZXJzICgpIHtcbiAgICByZXR1cm4gdGhpcy5sYXllclJlbmRlcmVyc187XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBNYXAuXG4gICAqL1xuICBNYXBSZW5kZXJlci5wcm90b3R5cGUuZ2V0TWFwID0gZnVuY3Rpb24gZ2V0TWFwICgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXBfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgY2hhbmdlcyBpbiBhIGxheWVyIHJlbmRlcmVyLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmhhbmRsZUxheWVyUmVuZGVyZXJDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlTGF5ZXJSZW5kZXJlckNoYW5nZV8gKCkge1xuICAgIHRoaXMubWFwXy5yZW5kZXIoKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxheWVyS2V5IExheWVyIGtleS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0fSBMYXllciByZW5kZXJlci5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5yZW1vdmVMYXllclJlbmRlcmVyQnlLZXlfID0gZnVuY3Rpb24gcmVtb3ZlTGF5ZXJSZW5kZXJlckJ5S2V5XyAobGF5ZXJLZXkpIHtcbiAgICB2YXIgbGF5ZXJSZW5kZXJlciA9IHRoaXMubGF5ZXJSZW5kZXJlcnNfW2xheWVyS2V5XTtcbiAgICBkZWxldGUgdGhpcy5sYXllclJlbmRlcmVyc19bbGF5ZXJLZXldO1xuXG4gICAgdW5saXN0ZW5CeUtleSh0aGlzLmxheWVyUmVuZGVyZXJMaXN0ZW5lcnNfW2xheWVyS2V5XSk7XG4gICAgZGVsZXRlIHRoaXMubGF5ZXJSZW5kZXJlckxpc3RlbmVyc19bbGF5ZXJLZXldO1xuXG4gICAgcmV0dXJuIGxheWVyUmVuZGVyZXI7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBNYXBSZW5kZXJlci5wcm90b3R5cGUucmVtb3ZlVW51c2VkTGF5ZXJSZW5kZXJlcnNfID0gZnVuY3Rpb24gcmVtb3ZlVW51c2VkTGF5ZXJSZW5kZXJlcnNfIChtYXAsIGZyYW1lU3RhdGUpIHtcbiAgICBmb3IgKHZhciBsYXllcktleSBpbiB0aGlzLmxheWVyUmVuZGVyZXJzXykge1xuICAgICAgaWYgKCFmcmFtZVN0YXRlIHx8ICEobGF5ZXJLZXkgaW4gZnJhbWVTdGF0ZS5sYXllclN0YXRlcykpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMYXllclJlbmRlcmVyQnlLZXlfKGxheWVyS2V5KS5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW5kZXIuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICovXG4gIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJGcmFtZSA9IGZ1bmN0aW9uIHJlbmRlckZyYW1lIChmcmFtZVN0YXRlKSB7XG4gICAgYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgTWFwUmVuZGVyZXIucHJvdG90eXBlLnNjaGVkdWxlRXhwaXJlSWNvbkNhY2hlID0gZnVuY3Rpb24gc2NoZWR1bGVFeHBpcmVJY29uQ2FjaGUgKGZyYW1lU3RhdGUpIHtcbiAgICBmcmFtZVN0YXRlLnBvc3RSZW5kZXJGdW5jdGlvbnMucHVzaCgvKiogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5Qb3N0UmVuZGVyRnVuY3Rpb259ICovIChleHBpcmVJY29uQ2FjaGUpKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHshaW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5zY2hlZHVsZVJlbW92ZVVudXNlZExheWVyUmVuZGVyZXJzID0gZnVuY3Rpb24gc2NoZWR1bGVSZW1vdmVVbnVzZWRMYXllclJlbmRlcmVycyAoZnJhbWVTdGF0ZSkge1xuICAgIGZvciAodmFyIGxheWVyS2V5IGluIHRoaXMubGF5ZXJSZW5kZXJlcnNfKSB7XG4gICAgICBpZiAoIShsYXllcktleSBpbiBmcmFtZVN0YXRlLmxheWVyU3RhdGVzKSkge1xuICAgICAgICBmcmFtZVN0YXRlLnBvc3RSZW5kZXJGdW5jdGlvbnMucHVzaChcbiAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5Qb3N0UmVuZGVyRnVuY3Rpb259ICovICh0aGlzLnJlbW92ZVVudXNlZExheWVyUmVuZGVyZXJzXy5iaW5kKHRoaXMpKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBNYXBSZW5kZXJlcjtcbn0oRGlzcG9zYWJsZSkpO1xuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gKi9cbmZ1bmN0aW9uIGV4cGlyZUljb25DYWNoZShtYXAsIGZyYW1lU3RhdGUpIHtcbiAgaWNvbkltYWdlQ2FjaGUuZXhwaXJlKCk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLlN0YXRlfSBzdGF0ZTEgRmlyc3QgbGF5ZXIgc3RhdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLlN0YXRlfSBzdGF0ZTIgU2Vjb25kIGxheWVyIHN0YXRlLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgekluZGV4IGRpZmZlcmVuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb3J0QnlaSW5kZXgoc3RhdGUxLCBzdGF0ZTIpIHtcbiAgcmV0dXJuIHN0YXRlMS56SW5kZXggLSBzdGF0ZTIuekluZGV4O1xufVxuZXhwb3J0IGRlZmF1bHQgTWFwUmVuZGVyZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL01hcFxuICovXG5pbXBvcnQge2NyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm19IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQge2luY2x1ZGVzLCBzdGFibGVTb3J0fSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG5pbXBvcnQge0NMQVNTX1VOU0VMRUNUQUJMRX0gZnJvbSAnLi4vLi4vY3NzLmpzJztcbmltcG9ydCB7Y3JlYXRlQ2FudmFzQ29udGV4dDJEfSBmcm9tICcuLi8uLi9kb20uanMnO1xuaW1wb3J0IHt2aXNpYmxlQXRSZXNvbHV0aW9ufSBmcm9tICcuLi8uLi9sYXllci9MYXllci5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnQgZnJvbSAnLi4vLi4vcmVuZGVyL0V2ZW50LmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi4vLi4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge3JvdGF0ZUF0T2Zmc2V0fSBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzLmpzJztcbmltcG9ydCBDYW52YXNJbW1lZGlhdGVSZW5kZXJlciBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzL0ltbWVkaWF0ZS5qcyc7XG5pbXBvcnQgTWFwUmVuZGVyZXIsIHtzb3J0QnlaSW5kZXh9IGZyb20gJy4uL01hcC5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vLi4vc291cmNlL1N0YXRlLmpzJztcblxuXG4vKipcbiAqIEB0eXBlIHtBcnJheTx0eXBlb2YgaW1wb3J0KFwiLi4vTGF5ZXIuanNcIikuZGVmYXVsdD59XG4gKi9cbmV4cG9ydCB2YXIgbGF5ZXJSZW5kZXJlckNvbnN0cnVjdG9ycyA9IFtdO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENhbnZhcyBtYXAgcmVuZGVyZXIuXG4gKiBAYXBpXG4gKi9cbnZhciBDYW52YXNNYXBSZW5kZXJlciA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKE1hcFJlbmRlcmVyKSB7XG4gIGZ1bmN0aW9uIENhbnZhc01hcFJlbmRlcmVyKG1hcCkge1xuICAgIE1hcFJlbmRlcmVyLmNhbGwodGhpcywgbWFwKTtcblxuICAgIHZhciBjb250YWluZXIgPSBtYXAuZ2V0Vmlld3BvcnQoKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAgICAgKi9cbiAgICB0aGlzLmNvbnRleHRfID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKCk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLmNhbnZhc18gPSB0aGlzLmNvbnRleHRfLmNhbnZhcztcblxuICAgIHRoaXMuY2FudmFzXy5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICB0aGlzLmNhbnZhc18uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgIHRoaXMuY2FudmFzXy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB0aGlzLmNhbnZhc18uY2xhc3NOYW1lID0gQ0xBU1NfVU5TRUxFQ1RBQkxFO1xuICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUodGhpcy5jYW52YXNfLCBjb250YWluZXIuY2hpbGROb2Rlc1swXSB8fCBudWxsKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdHJ1ZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICovXG4gICAgdGhpcy50cmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG5cbiAgfVxuXG4gIGlmICggTWFwUmVuZGVyZXIgKSBDYW52YXNNYXBSZW5kZXJlci5fX3Byb3RvX18gPSBNYXBSZW5kZXJlcjtcbiAgQ2FudmFzTWFwUmVuZGVyZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTWFwUmVuZGVyZXIgJiYgTWFwUmVuZGVyZXIucHJvdG90eXBlICk7XG4gIENhbnZhc01hcFJlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc01hcFJlbmRlcmVyO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3JlbmRlci9FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBFdmVudCB0eXBlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKi9cbiAgQ2FudmFzTWFwUmVuZGVyZXIucHJvdG90eXBlLmRpc3BhdGNoUmVuZGVyRXZlbnQgPSBmdW5jdGlvbiBkaXNwYXRjaFJlbmRlckV2ZW50ICh0eXBlLCBmcmFtZVN0YXRlKSB7XG4gICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgIGlmIChtYXAuaGFzTGlzdGVuZXIodHlwZSkpIHtcbiAgICAgIHZhciBleHRlbnQgPSBmcmFtZVN0YXRlLmV4dGVudDtcbiAgICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgICAgdmFyIHJvdGF0aW9uID0gdmlld1N0YXRlLnJvdGF0aW9uO1xuXG4gICAgICB2YXIgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm0oZnJhbWVTdGF0ZSk7XG5cbiAgICAgIHZhciB2ZWN0b3JDb250ZXh0ID0gbmV3IENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyKGNvbnRleHQsIHBpeGVsUmF0aW8sXG4gICAgICAgIGV4dGVudCwgdHJhbnNmb3JtLCByb3RhdGlvbik7XG4gICAgICB2YXIgY29tcG9zZUV2ZW50ID0gbmV3IFJlbmRlckV2ZW50KHR5cGUsIHZlY3RvckNvbnRleHQsXG4gICAgICAgIGZyYW1lU3RhdGUsIGNvbnRleHQsIG51bGwpO1xuICAgICAgbWFwLmRpc3BhdGNoRXZlbnQoY29tcG9zZUV2ZW50KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQHJldHVybiB7IWltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IFRyYW5zZm9ybS5cbiAgICovXG4gIENhbnZhc01hcFJlbmRlcmVyLnByb3RvdHlwZS5nZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbiBnZXRUcmFuc2Zvcm0gKGZyYW1lU3RhdGUpIHtcbiAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgdmFyIGR4MSA9IHRoaXMuY2FudmFzXy53aWR0aCAvIDI7XG4gICAgdmFyIGR5MSA9IHRoaXMuY2FudmFzXy5oZWlnaHQgLyAyO1xuICAgIHZhciBzeCA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbyAvIHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgIHZhciBzeSA9IC1zeDtcbiAgICB2YXIgYW5nbGUgPSAtdmlld1N0YXRlLnJvdGF0aW9uO1xuICAgIHZhciBkeDIgPSAtdmlld1N0YXRlLmNlbnRlclswXTtcbiAgICB2YXIgZHkyID0gLXZpZXdTdGF0ZS5jZW50ZXJbMV07XG4gICAgcmV0dXJuIGNvbXBvc2VUcmFuc2Zvcm0odGhpcy50cmFuc2Zvcm1fLCBkeDEsIGR5MSwgc3gsIHN5LCBhbmdsZSwgZHgyLCBkeTIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzTWFwUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckZyYW1lID0gZnVuY3Rpb24gcmVuZGVyRnJhbWUgKGZyYW1lU3RhdGUpIHtcblxuICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgaWYgKHRoaXMucmVuZGVyZWRWaXNpYmxlXykge1xuICAgICAgICB0aGlzLmNhbnZhc18uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgIHZhciB3aWR0aCA9IE1hdGgucm91bmQoZnJhbWVTdGF0ZS5zaXplWzBdICogcGl4ZWxSYXRpbyk7XG4gICAgdmFyIGhlaWdodCA9IE1hdGgucm91bmQoZnJhbWVTdGF0ZS5zaXplWzFdICogcGl4ZWxSYXRpbyk7XG4gICAgaWYgKHRoaXMuY2FudmFzXy53aWR0aCAhPSB3aWR0aCB8fCB0aGlzLmNhbnZhc18uaGVpZ2h0ICE9IGhlaWdodCkge1xuICAgICAgdGhpcy5jYW52YXNfLndpZHRoID0gd2lkdGg7XG4gICAgICB0aGlzLmNhbnZhc18uaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG5cbiAgICB2YXIgcm90YXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcblxuICAgIHRoaXMuY2FsY3VsYXRlTWF0cmljZXMyRChmcmFtZVN0YXRlKTtcblxuICAgIHRoaXMuZGlzcGF0Y2hSZW5kZXJFdmVudChSZW5kZXJFdmVudFR5cGUuUFJFQ09NUE9TRSwgZnJhbWVTdGF0ZSk7XG5cbiAgICB2YXIgbGF5ZXJTdGF0ZXNBcnJheSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheTtcbiAgICBzdGFibGVTb3J0KGxheWVyU3RhdGVzQXJyYXksIHNvcnRCeVpJbmRleCk7XG5cbiAgICBpZiAocm90YXRpb24pIHtcbiAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgcm90YXRlQXRPZmZzZXQoY29udGV4dCwgcm90YXRpb24sIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMik7XG4gICAgfVxuXG4gICAgdmFyIHZpZXdSZXNvbHV0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucmVzb2x1dGlvbjtcbiAgICB2YXIgaSwgaWk7XG4gICAgZm9yIChpID0gMCwgaWkgPSBsYXllclN0YXRlc0FycmF5Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHZhciBsYXllclN0YXRlID0gbGF5ZXJTdGF0ZXNBcnJheVtpXTtcbiAgICAgIHZhciBsYXllciA9IGxheWVyU3RhdGUubGF5ZXI7XG4gICAgICB2YXIgbGF5ZXJSZW5kZXJlciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5nZXRMYXllclJlbmRlcmVyKGxheWVyKSk7XG4gICAgICBpZiAoIXZpc2libGVBdFJlc29sdXRpb24obGF5ZXJTdGF0ZSwgdmlld1Jlc29sdXRpb24pIHx8XG4gICAgICAgICAgbGF5ZXJTdGF0ZS5zb3VyY2VTdGF0ZSAhPSBTb3VyY2VTdGF0ZS5SRUFEWSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChsYXllclJlbmRlcmVyLnByZXBhcmVGcmFtZShmcmFtZVN0YXRlLCBsYXllclN0YXRlKSkge1xuICAgICAgICBsYXllclJlbmRlcmVyLmNvbXBvc2VGcmFtZShmcmFtZVN0YXRlLCBsYXllclN0YXRlLCBjb250ZXh0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocm90YXRpb24pIHtcbiAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgIH1cblxuICAgIHRoaXMuZGlzcGF0Y2hSZW5kZXJFdmVudChSZW5kZXJFdmVudFR5cGUuUE9TVENPTVBPU0UsIGZyYW1lU3RhdGUpO1xuXG4gICAgaWYgKCF0aGlzLnJlbmRlcmVkVmlzaWJsZV8pIHtcbiAgICAgIHRoaXMuY2FudmFzXy5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuc2NoZWR1bGVSZW1vdmVVbnVzZWRMYXllclJlbmRlcmVycyhmcmFtZVN0YXRlKTtcbiAgICB0aGlzLnNjaGVkdWxlRXhwaXJlSWNvbkNhY2hlKGZyYW1lU3RhdGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzTWFwUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hMYXllckF0UGl4ZWwgPSBmdW5jdGlvbiBmb3JFYWNoTGF5ZXJBdFBpeGVsIChwaXhlbCwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgdGhpc0FyZywgbGF5ZXJGaWx0ZXIsIHRoaXNBcmcyKSB7XG4gICAgdmFyIHJlc3VsdDtcbiAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgdmFyIHZpZXdSZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XG5cbiAgICB2YXIgbGF5ZXJTdGF0ZXMgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXk7XG4gICAgdmFyIG51bUxheWVycyA9IGxheWVyU3RhdGVzLmxlbmd0aDtcblxuICAgIHZhciBjb29yZGluYXRlID0gYXBwbHlUcmFuc2Zvcm0oXG4gICAgICBmcmFtZVN0YXRlLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLCBwaXhlbC5zbGljZSgpKTtcblxuICAgIHZhciBpO1xuICAgIGZvciAoaSA9IG51bUxheWVycyAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzW2ldO1xuICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgIGlmICh2aXNpYmxlQXRSZXNvbHV0aW9uKGxheWVyU3RhdGUsIHZpZXdSZXNvbHV0aW9uKSAmJiBsYXllckZpbHRlci5jYWxsKHRoaXNBcmcyLCBsYXllcikpIHtcbiAgICAgICAgdmFyIGxheWVyUmVuZGVyZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0TGF5ZXJSZW5kZXJlcihsYXllcikpO1xuICAgICAgICByZXN1bHQgPSBsYXllclJlbmRlcmVyLmZvckVhY2hMYXllckF0Q29vcmRpbmF0ZShcbiAgICAgICAgICBjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCB0aGlzQXJnKTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc01hcFJlbmRlcmVyLnByb3RvdHlwZS5yZWdpc3RlckxheWVyUmVuZGVyZXJzID0gZnVuY3Rpb24gcmVnaXN0ZXJMYXllclJlbmRlcmVycyAoY29uc3RydWN0b3JzKSB7XG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLnJlZ2lzdGVyTGF5ZXJSZW5kZXJlcnMuY2FsbCh0aGlzLCBjb25zdHJ1Y3RvcnMpO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvbnN0cnVjdG9ycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICB2YXIgY3RvciA9IGNvbnN0cnVjdG9yc1tpXTtcbiAgICAgIGlmICghaW5jbHVkZXMobGF5ZXJSZW5kZXJlckNvbnN0cnVjdG9ycywgY3RvcikpIHtcbiAgICAgICAgbGF5ZXJSZW5kZXJlckNvbnN0cnVjdG9ycy5wdXNoKGN0b3IpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQ2FudmFzTWFwUmVuZGVyZXI7XG59KE1hcFJlbmRlcmVyKSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzTWFwUmVuZGVyZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL0xheWVyXG4gKi9cbmltcG9ydCB7YWJzdHJhY3R9IGZyb20gJy4uLy4uL3V0aWwuanMnO1xuaW1wb3J0IHtnZXRCb3R0b21MZWZ0LCBnZXRCb3R0b21SaWdodCwgZ2V0VG9wTGVmdCwgZ2V0VG9wUmlnaHR9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQge1RSVUV9IGZyb20gJy4uLy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnQgZnJvbSAnLi4vLi4vcmVuZGVyL0V2ZW50LmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi4vLi4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge3JvdGF0ZUF0T2Zmc2V0fSBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzLmpzJztcbmltcG9ydCBDYW52YXNJbW1lZGlhdGVSZW5kZXJlciBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzL0ltbWVkaWF0ZS5qcyc7XG5pbXBvcnQgTGF5ZXJSZW5kZXJlciBmcm9tICcuLi9MYXllci5qcyc7XG5pbXBvcnQge2NyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm19IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5cbi8qKlxuICogQGFic3RyYWN0XG4gKi9cbnZhciBDYW52YXNMYXllclJlbmRlcmVyID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoTGF5ZXJSZW5kZXJlcikge1xuICBmdW5jdGlvbiBDYW52YXNMYXllclJlbmRlcmVyKGxheWVyKSB7XG5cbiAgICBMYXllclJlbmRlcmVyLmNhbGwodGhpcywgbGF5ZXIpO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZFJlc29sdXRpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAqL1xuICAgIHRoaXMudHJhbnNmb3JtXyA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuXG4gIH1cblxuICBpZiAoIExheWVyUmVuZGVyZXIgKSBDYW52YXNMYXllclJlbmRlcmVyLl9fcHJvdG9fXyA9IExheWVyUmVuZGVyZXI7XG4gIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTGF5ZXJSZW5kZXJlciAmJiBMYXllclJlbmRlcmVyLnByb3RvdHlwZSApO1xuICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc0xheWVyUmVuZGVyZXI7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IENsaXAgZXh0ZW50LlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jbGlwID0gZnVuY3Rpb24gY2xpcCAoY29udGV4dCwgZnJhbWVTdGF0ZSwgZXh0ZW50KSB7XG4gICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgdmFyIHdpZHRoID0gZnJhbWVTdGF0ZS5zaXplWzBdICogcGl4ZWxSYXRpbztcbiAgICB2YXIgaGVpZ2h0ID0gZnJhbWVTdGF0ZS5zaXplWzFdICogcGl4ZWxSYXRpbztcbiAgICB2YXIgcm90YXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICB2YXIgdG9wTGVmdCA9IGdldFRvcExlZnQoZXh0ZW50KTtcbiAgICB2YXIgdG9wUmlnaHQgPSBnZXRUb3BSaWdodChleHRlbnQpO1xuICAgIHZhciBib3R0b21SaWdodCA9IGdldEJvdHRvbVJpZ2h0KGV4dGVudCk7XG4gICAgdmFyIGJvdHRvbUxlZnQgPSBnZXRCb3R0b21MZWZ0KGV4dGVudCk7XG5cbiAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCB0b3BMZWZ0KTtcbiAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCB0b3BSaWdodCk7XG4gICAgYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgYm90dG9tUmlnaHQpO1xuICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIGJvdHRvbUxlZnQpO1xuXG4gICAgY29udGV4dC5zYXZlKCk7XG4gICAgcm90YXRlQXRPZmZzZXQoY29udGV4dCwgLXJvdGF0aW9uLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xuICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgY29udGV4dC5tb3ZlVG8odG9wTGVmdFswXSAqIHBpeGVsUmF0aW8sIHRvcExlZnRbMV0gKiBwaXhlbFJhdGlvKTtcbiAgICBjb250ZXh0LmxpbmVUbyh0b3BSaWdodFswXSAqIHBpeGVsUmF0aW8sIHRvcFJpZ2h0WzFdICogcGl4ZWxSYXRpbyk7XG4gICAgY29udGV4dC5saW5lVG8oYm90dG9tUmlnaHRbMF0gKiBwaXhlbFJhdGlvLCBib3R0b21SaWdodFsxXSAqIHBpeGVsUmF0aW8pO1xuICAgIGNvbnRleHQubGluZVRvKGJvdHRvbUxlZnRbMF0gKiBwaXhlbFJhdGlvLCBib3R0b21MZWZ0WzFdICogcGl4ZWxSYXRpbyk7XG4gICAgY29udGV4dC5jbGlwKCk7XG4gICAgcm90YXRlQXRPZmZzZXQoY29udGV4dCwgcm90YXRpb24sIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcmVuZGVyL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIEV2ZW50IHR5cGUuXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybT19IG9wdF90cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZGlzcGF0Y2hDb21wb3NlRXZlbnRfID0gZnVuY3Rpb24gZGlzcGF0Y2hDb21wb3NlRXZlbnRfICh0eXBlLCBjb250ZXh0LCBmcmFtZVN0YXRlLCBvcHRfdHJhbnNmb3JtKSB7XG4gICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgIGlmIChsYXllci5oYXNMaXN0ZW5lcih0eXBlKSkge1xuICAgICAgdmFyIHdpZHRoID0gZnJhbWVTdGF0ZS5zaXplWzBdICogZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgICAgdmFyIGhlaWdodCA9IGZyYW1lU3RhdGUuc2l6ZVsxXSAqIGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcbiAgICAgIHZhciByb3RhdGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnJvdGF0aW9uO1xuICAgICAgcm90YXRlQXRPZmZzZXQoY29udGV4dCwgLXJvdGF0aW9uLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xuICAgICAgdmFyIHRyYW5zZm9ybSA9IG9wdF90cmFuc2Zvcm0gIT09IHVuZGVmaW5lZCA/XG4gICAgICAgIG9wdF90cmFuc2Zvcm0gOiB0aGlzLmdldFRyYW5zZm9ybShmcmFtZVN0YXRlLCAwKTtcbiAgICAgIHZhciByZW5kZXIgPSBuZXcgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIoXG4gICAgICAgIGNvbnRleHQsIGZyYW1lU3RhdGUucGl4ZWxSYXRpbywgZnJhbWVTdGF0ZS5leHRlbnQsIHRyYW5zZm9ybSxcbiAgICAgICAgZnJhbWVTdGF0ZS52aWV3U3RhdGUucm90YXRpb24pO1xuICAgICAgdmFyIGNvbXBvc2VFdmVudCA9IG5ldyBSZW5kZXJFdmVudCh0eXBlLCByZW5kZXIsIGZyYW1lU3RhdGUsXG4gICAgICAgIGNvbnRleHQsIG51bGwpO1xuICAgICAgbGF5ZXIuZGlzcGF0Y2hFdmVudChjb21wb3NlRXZlbnQpO1xuICAgICAgcm90YXRlQXRPZmZzZXQoY29udGV4dCwgcm90YXRpb24sIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogUywgaW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCwgKFVpbnQ4Q2xhbXBlZEFycmF5fFVpbnQ4QXJyYXkpKTogVH0gY2FsbGJhY2sgTGF5ZXJcbiAgICogICAgIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge1N9IHRoaXNBcmcgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgY2FsbGJhY2tgLlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgKiBAdGVtcGxhdGUgUyxULFVcbiAgICovXG4gIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hMYXllckF0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIGZvckVhY2hMYXllckF0Q29vcmRpbmF0ZSAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIHZhciBoYXNGZWF0dXJlID0gdGhpcy5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIFRSVUUpO1xuXG4gICAgaWYgKGhhc0ZlYXR1cmUpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHRoaXMuZ2V0TGF5ZXIoKSwgbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2xheWVyL0xheWVyLmpzXCIpLlN0YXRlfSBsYXllclN0YXRlIExheWVyIHN0YXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm09fSBvcHRfdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucG9zdENvbXBvc2UgPSBmdW5jdGlvbiBwb3N0Q29tcG9zZSAoY29udGV4dCwgZnJhbWVTdGF0ZSwgbGF5ZXJTdGF0ZSwgb3B0X3RyYW5zZm9ybSkge1xuICAgIHRoaXMuZGlzcGF0Y2hDb21wb3NlRXZlbnRfKFJlbmRlckV2ZW50VHlwZS5QT1NUQ09NUE9TRSwgY29udGV4dCwgZnJhbWVTdGF0ZSwgb3B0X3RyYW5zZm9ybSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybT19IG9wdF90cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wcmVDb21wb3NlID0gZnVuY3Rpb24gcHJlQ29tcG9zZSAoY29udGV4dCwgZnJhbWVTdGF0ZSwgb3B0X3RyYW5zZm9ybSkge1xuICAgIHRoaXMuZGlzcGF0Y2hDb21wb3NlRXZlbnRfKFJlbmRlckV2ZW50VHlwZS5QUkVDT01QT1NFLCBjb250ZXh0LCBmcmFtZVN0YXRlLCBvcHRfdHJhbnNmb3JtKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtPX0gb3B0X3RyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmRpc3BhdGNoUmVuZGVyRXZlbnQgPSBmdW5jdGlvbiBkaXNwYXRjaFJlbmRlckV2ZW50IChjb250ZXh0LCBmcmFtZVN0YXRlLCBvcHRfdHJhbnNmb3JtKSB7XG4gICAgdGhpcy5kaXNwYXRjaENvbXBvc2VFdmVudF8oUmVuZGVyRXZlbnRUeXBlLlJFTkRFUiwgY29udGV4dCwgZnJhbWVTdGF0ZSwgb3B0X3RyYW5zZm9ybSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRYIE9mZnNldCBvbiB0aGUgeC1heGlzIGluIHZpZXcgY29vcmRpbmF0ZXMuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQHJldHVybiB7IWltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IFRyYW5zZm9ybS5cbiAgICovXG4gIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldFRyYW5zZm9ybSA9IGZ1bmN0aW9uIGdldFRyYW5zZm9ybSAoZnJhbWVTdGF0ZSwgb2Zmc2V0WCkge1xuICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICB2YXIgcGl4ZWxSYXRpbyA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcbiAgICB2YXIgZHgxID0gcGl4ZWxSYXRpbyAqIGZyYW1lU3RhdGUuc2l6ZVswXSAvIDI7XG4gICAgdmFyIGR5MSA9IHBpeGVsUmF0aW8gKiBmcmFtZVN0YXRlLnNpemVbMV0gLyAyO1xuICAgIHZhciBzeCA9IHBpeGVsUmF0aW8gLyB2aWV3U3RhdGUucmVzb2x1dGlvbjtcbiAgICB2YXIgc3kgPSAtc3g7XG4gICAgdmFyIGFuZ2xlID0gLXZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICB2YXIgZHgyID0gLXZpZXdTdGF0ZS5jZW50ZXJbMF0gKyBvZmZzZXRYO1xuICAgIHZhciBkeTIgPSAtdmlld1N0YXRlLmNlbnRlclsxXTtcbiAgICByZXR1cm4gY29tcG9zZVRyYW5zZm9ybSh0aGlzLnRyYW5zZm9ybV8sIGR4MSwgZHkxLCBzeCwgc3ksIGFuZ2xlLCBkeDIsIGR5Mik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2xheWVyL0xheWVyLmpzXCIpLlN0YXRlfSBsYXllclN0YXRlIExheWVyIHN0YXRlLlxuICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgKi9cbiAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuY29tcG9zZUZyYW1lID0gZnVuY3Rpb24gY29tcG9zZUZyYW1lIChmcmFtZVN0YXRlLCBsYXllclN0YXRlLCBjb250ZXh0KSB7XG4gICAgYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuU3RhdGV9IGxheWVyU3RhdGUgTGF5ZXIgc3RhdGUuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IHdoZXRoZXIgY29tcG9zZUZyYW1lIHNob3VsZCBiZSBjYWxsZWQuXG4gICAqL1xuICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wcmVwYXJlRnJhbWUgPSBmdW5jdGlvbiBwcmVwYXJlRnJhbWUgKGZyYW1lU3RhdGUsIGxheWVyU3RhdGUpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfTtcblxuICByZXR1cm4gQ2FudmFzTGF5ZXJSZW5kZXJlcjtcbn0oTGF5ZXJSZW5kZXJlcikpO1xuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNMYXllclJlbmRlcmVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1MYXllci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvTGF5ZXJcbiAqL1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IEltYWdlU3RhdGUgZnJvbSAnLi4vSW1hZ2VTdGF0ZS5qcyc7XG5pbXBvcnQgT2JzZXJ2YWJsZSBmcm9tICcuLi9PYnNlcnZhYmxlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7bGlzdGVufSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBTb3VyY2VTdGF0ZSBmcm9tICcuLi9zb3VyY2UvU3RhdGUuanMnO1xuXG52YXIgTGF5ZXJSZW5kZXJlciA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKE9ic2VydmFibGUpIHtcbiAgZnVuY3Rpb24gTGF5ZXJSZW5kZXJlcihsYXllcikge1xuXG4gICAgT2JzZXJ2YWJsZS5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLmxheWVyXyA9IGxheWVyO1xuXG4gIH1cblxuICBpZiAoIE9ic2VydmFibGUgKSBMYXllclJlbmRlcmVyLl9fcHJvdG9fXyA9IE9ic2VydmFibGU7XG4gIExheWVyUmVuZGVyZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggT2JzZXJ2YWJsZSAmJiBPYnNlcnZhYmxlLnByb3RvdHlwZSApO1xuICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExheWVyUmVuZGVyZXI7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgYWRkcyBsb2FkZWQgdGlsZXMgdG8gdGhlIHRpbGUgbG9va3VwLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uIG9mIHRoZSB0aWxlcy5cbiAgICogQHBhcmFtIHtPYmplY3Q8bnVtYmVyLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHQ+Pn0gdGlsZXMgTG9va3VwIG9mIGxvYWRlZCB0aWxlcyBieSB6b29tIGxldmVsLlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0KTpib29sZWFufSBBIGZ1bmN0aW9uIHRoYXQgY2FuIGJlXG4gICAqICAgICBjYWxsZWQgd2l0aCBhIHpvb20gbGV2ZWwgYW5kIGEgdGlsZSByYW5nZSB0byBhZGQgbG9hZGVkIHRpbGVzIHRvIHRoZSBsb29rdXAuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmNyZWF0ZUxvYWRlZFRpbGVGaW5kZXIgPSBmdW5jdGlvbiBjcmVhdGVMb2FkZWRUaWxlRmluZGVyIChzb3VyY2UsIHByb2plY3Rpb24sIHRpbGVzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gWm9vbSBsZXZlbC5cbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHRpbGUgcmFuZ2UgaXMgZnVsbHkgbG9hZGVkLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbih6b29tLCB0aWxlUmFuZ2UpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayh0aWxlKSB7XG4gICAgICAgICAgaWYgKCF0aWxlc1t6b29tXSkge1xuICAgICAgICAgICAgdGlsZXNbem9vbV0gPSB7fTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGlsZXNbem9vbV1bdGlsZS50aWxlQ29vcmQudG9TdHJpbmcoKV0gPSB0aWxlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb3VyY2UuZm9yRWFjaExvYWRlZFRpbGUocHJvamVjdGlvbiwgem9vbSwgdGlsZVJhbmdlLCBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZSwgaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IFR9IGNhbGxiYWNrIEZlYXR1cmUgY2FsbGJhY2suXG4gICAqIEByZXR1cm4ge1R8dm9pZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKi9cbiAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaykge307XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IExheWVyLlxuICAgKi9cbiAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0TGF5ZXIgPSBmdW5jdGlvbiBnZXRMYXllciAoKSB7XG4gICAgcmV0dXJuIHRoaXMubGF5ZXJfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgY2hhbmdlcyBpbiBpbWFnZSBzdGF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgSW1hZ2UgY2hhbmdlIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlSW1hZ2VDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlSW1hZ2VDaGFuZ2VfIChldmVudCkge1xuICAgIHZhciBpbWFnZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vSW1hZ2UuanNcIikuZGVmYXVsdH0gKi8gKGV2ZW50LnRhcmdldCk7XG4gICAgaWYgKGltYWdlLmdldFN0YXRlKCkgPT09IEltYWdlU3RhdGUuTE9BREVEKSB7XG4gICAgICB0aGlzLnJlbmRlcklmUmVhZHlBbmRWaXNpYmxlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyB0aGVyZSBhIGZlYXR1cmUgYXQgdGhlIGdpdmVuIGNvb3JkaW5hdGU/XG4gICAqL1xuICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5oYXNGZWF0dXJlQXRDb29yZGluYXRlID0gZnVuY3Rpb24gaGFzRmVhdHVyZUF0Q29vcmRpbmF0ZSAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogTG9hZCB0aGUgaW1hZ2UgaWYgbm90IGFscmVhZHkgbG9hZGVkLCBhbmQgcmVnaXN0ZXIgdGhlIGltYWdlIGNoYW5nZVxuICAgKiBsaXN0ZW5lciBpZiBuZWVkZWQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vSW1hZ2VCYXNlLmpzXCIpLmRlZmF1bHR9IGltYWdlIEltYWdlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGltYWdlIGlzIGFscmVhZHkgbG9hZGVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUubG9hZEltYWdlID0gZnVuY3Rpb24gbG9hZEltYWdlIChpbWFnZSkge1xuICAgIHZhciBpbWFnZVN0YXRlID0gaW1hZ2UuZ2V0U3RhdGUoKTtcbiAgICBpZiAoaW1hZ2VTdGF0ZSAhPSBJbWFnZVN0YXRlLkxPQURFRCAmJiBpbWFnZVN0YXRlICE9IEltYWdlU3RhdGUuRVJST1IpIHtcbiAgICAgIGxpc3RlbihpbWFnZSwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVJbWFnZUNoYW5nZV8sIHRoaXMpO1xuICAgIH1cbiAgICBpZiAoaW1hZ2VTdGF0ZSA9PSBJbWFnZVN0YXRlLklETEUpIHtcbiAgICAgIGltYWdlLmxvYWQoKTtcbiAgICAgIGltYWdlU3RhdGUgPSBpbWFnZS5nZXRTdGF0ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gaW1hZ2VTdGF0ZSA9PSBJbWFnZVN0YXRlLkxPQURFRDtcbiAgfTtcblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVySWZSZWFkeUFuZFZpc2libGUgPSBmdW5jdGlvbiByZW5kZXJJZlJlYWR5QW5kVmlzaWJsZSAoKSB7XG4gICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgIGlmIChsYXllci5nZXRWaXNpYmxlKCkgJiYgbGF5ZXIuZ2V0U291cmNlU3RhdGUoKSA9PSBTb3VyY2VTdGF0ZS5SRUFEWSkge1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIExheWVyUmVuZGVyZXIucHJvdG90eXBlLnNjaGVkdWxlRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiBzY2hlZHVsZUV4cGlyZUNhY2hlIChmcmFtZVN0YXRlLCB0aWxlU291cmNlKSB7XG4gICAgaWYgKHRpbGVTb3VyY2UuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgICAqL1xuICAgICAgdmFyIHBvc3RSZW5kZXJGdW5jdGlvbiA9IGZ1bmN0aW9uKHRpbGVTb3VyY2UsIG1hcCwgZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgdGlsZVNvdXJjZUtleSA9IGdldFVpZCh0aWxlU291cmNlKTtcbiAgICAgICAgaWYgKHRpbGVTb3VyY2VLZXkgaW4gZnJhbWVTdGF0ZS51c2VkVGlsZXMpIHtcbiAgICAgICAgICB0aWxlU291cmNlLmV4cGlyZUNhY2hlKGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb24sXG4gICAgICAgICAgICBmcmFtZVN0YXRlLnVzZWRUaWxlc1t0aWxlU291cmNlS2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH0uYmluZChudWxsLCB0aWxlU291cmNlKTtcblxuICAgICAgZnJhbWVTdGF0ZS5wb3N0UmVuZGVyRnVuY3Rpb25zLnB1c2goXG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLlBvc3RSZW5kZXJGdW5jdGlvbn0gKi8gKHBvc3RSZW5kZXJGdW5jdGlvbilcbiAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAhT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQ+Pn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZVNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHogWi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIExheWVyUmVuZGVyZXIucHJvdG90eXBlLnVwZGF0ZVVzZWRUaWxlcyA9IGZ1bmN0aW9uIHVwZGF0ZVVzZWRUaWxlcyAodXNlZFRpbGVzLCB0aWxlU291cmNlLCB6LCB0aWxlUmFuZ2UpIHtcbiAgICAvLyBGSVhNRSBzaG91bGQgd2UgdXNlIHRpbGVzVG9EcmF3QnlaIGluc3RlYWQ/XG4gICAgdmFyIHRpbGVTb3VyY2VLZXkgPSBnZXRVaWQodGlsZVNvdXJjZSk7XG4gICAgdmFyIHpLZXkgPSB6LnRvU3RyaW5nKCk7XG4gICAgaWYgKHRpbGVTb3VyY2VLZXkgaW4gdXNlZFRpbGVzKSB7XG4gICAgICBpZiAoektleSBpbiB1c2VkVGlsZXNbdGlsZVNvdXJjZUtleV0pIHtcbiAgICAgICAgdXNlZFRpbGVzW3RpbGVTb3VyY2VLZXldW3pLZXldLmV4dGVuZCh0aWxlUmFuZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXNlZFRpbGVzW3RpbGVTb3VyY2VLZXldW3pLZXldID0gdGlsZVJhbmdlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB1c2VkVGlsZXNbdGlsZVNvdXJjZUtleV0gPSB7fTtcbiAgICAgIHVzZWRUaWxlc1t0aWxlU291cmNlS2V5XVt6S2V5XSA9IHRpbGVSYW5nZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIE1hbmFnZSB0aWxlIHB5cmFtaWQuXG4gICAqIFRoaXMgZnVuY3Rpb24gcGVyZm9ybXMgYSBudW1iZXIgb2YgZnVuY3Rpb25zIHJlbGF0ZWQgdG8gdGhlIHRpbGVzIGF0IHRoZVxuICAgKiBjdXJyZW50IHpvb20gYW5kIGxvd2VyIHpvb20gbGV2ZWxzOlxuICAgKiAtIHJlZ2lzdGVycyBpZGxlIHRpbGVzIGluIGZyYW1lU3RhdGUud2FudGVkVGlsZXMgc28gdGhhdCB0aGV5IGFyZSBub3RcbiAgICogICBkaXNjYXJkZWQgYnkgdGhlIHRpbGUgcXVldWVcbiAgICogLSBlbnF1ZXVlcyBtaXNzaW5nIHRpbGVzXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZVNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGN1cnJlbnRaIEN1cnJlbnQgWi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHByZWxvYWQgTG9hZCBsb3cgcmVzb2x1dGlvbiB0aWxlcyB1cCB0byAncHJlbG9hZCcgbGV2ZWxzLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6IFQsIGltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdCk9fSBvcHRfdGlsZUNhbGxiYWNrIFRpbGUgY2FsbGJhY2suXG4gICAqIEBwYXJhbSB7VD19IG9wdF90aGlzIE9iamVjdCB0byB1c2UgYXMgYHRoaXNgIGluIGBvcHRfdGlsZUNhbGxiYWNrYC5cbiAgICogQHByb3RlY3RlZFxuICAgKiBAdGVtcGxhdGUgVFxuICAgKi9cbiAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUubWFuYWdlVGlsZVB5cmFtaWQgPSBmdW5jdGlvbiBtYW5hZ2VUaWxlUHlyYW1pZCAoXG4gICAgZnJhbWVTdGF0ZSxcbiAgICB0aWxlU291cmNlLFxuICAgIHRpbGVHcmlkLFxuICAgIHBpeGVsUmF0aW8sXG4gICAgcHJvamVjdGlvbixcbiAgICBleHRlbnQsXG4gICAgY3VycmVudFosXG4gICAgcHJlbG9hZCxcbiAgICBvcHRfdGlsZUNhbGxiYWNrLFxuICAgIG9wdF90aGlzXG4gICkge1xuICAgIHZhciB0aWxlU291cmNlS2V5ID0gZ2V0VWlkKHRpbGVTb3VyY2UpO1xuICAgIGlmICghKHRpbGVTb3VyY2VLZXkgaW4gZnJhbWVTdGF0ZS53YW50ZWRUaWxlcykpIHtcbiAgICAgIGZyYW1lU3RhdGUud2FudGVkVGlsZXNbdGlsZVNvdXJjZUtleV0gPSB7fTtcbiAgICB9XG4gICAgdmFyIHdhbnRlZFRpbGVzID0gZnJhbWVTdGF0ZS53YW50ZWRUaWxlc1t0aWxlU291cmNlS2V5XTtcbiAgICB2YXIgdGlsZVF1ZXVlID0gZnJhbWVTdGF0ZS50aWxlUXVldWU7XG4gICAgdmFyIG1pblpvb20gPSB0aWxlR3JpZC5nZXRNaW5ab29tKCk7XG4gICAgdmFyIHRpbGUsIHRpbGVSYW5nZSwgdGlsZVJlc29sdXRpb24sIHgsIHksIHo7XG4gICAgZm9yICh6ID0gbWluWm9vbTsgeiA8PSBjdXJyZW50WjsgKyt6KSB7XG4gICAgICB0aWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeiwgdGlsZVJhbmdlKTtcbiAgICAgIHRpbGVSZXNvbHV0aW9uID0gdGlsZUdyaWQuZ2V0UmVzb2x1dGlvbih6KTtcbiAgICAgIGZvciAoeCA9IHRpbGVSYW5nZS5taW5YOyB4IDw9IHRpbGVSYW5nZS5tYXhYOyArK3gpIHtcbiAgICAgICAgZm9yICh5ID0gdGlsZVJhbmdlLm1pblk7IHkgPD0gdGlsZVJhbmdlLm1heFk7ICsreSkge1xuICAgICAgICAgIGlmIChjdXJyZW50WiAtIHogPD0gcHJlbG9hZCkge1xuICAgICAgICAgICAgdGlsZSA9IHRpbGVTb3VyY2UuZ2V0VGlsZSh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgICAgd2FudGVkVGlsZXNbdGlsZS5nZXRLZXkoKV0gPSB0cnVlO1xuICAgICAgICAgICAgICBpZiAoIXRpbGVRdWV1ZS5pc0tleVF1ZXVlZCh0aWxlLmdldEtleSgpKSkge1xuICAgICAgICAgICAgICAgIHRpbGVRdWV1ZS5lbnF1ZXVlKFt0aWxlLCB0aWxlU291cmNlS2V5LFxuICAgICAgICAgICAgICAgICAgdGlsZUdyaWQuZ2V0VGlsZUNvb3JkQ2VudGVyKHRpbGUudGlsZUNvb3JkKSwgdGlsZVJlc29sdXRpb25dKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdF90aWxlQ2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBvcHRfdGlsZUNhbGxiYWNrLmNhbGwob3B0X3RoaXMsIHRpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aWxlU291cmNlLnVzZVRpbGUoeiwgeCwgeSwgcHJvamVjdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBMYXllclJlbmRlcmVyO1xufShPYnNlcnZhYmxlKSk7XG5cbmV4cG9ydCBkZWZhdWx0IExheWVyUmVuZGVyZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9jYW52YXMvSW50ZXJtZWRpYXRlQ2FudmFzXG4gKi9cbmltcG9ydCB7YWJzdHJhY3R9IGZyb20gJy4uLy4uL3V0aWwuanMnO1xuaW1wb3J0IHtzY2FsZSBhcyBzY2FsZUNvb3JkaW5hdGV9IGZyb20gJy4uLy4uL2Nvb3JkaW5hdGUuanMnO1xuaW1wb3J0IHtjcmVhdGVDYW52YXNDb250ZXh0MkR9IGZyb20gJy4uLy4uL2RvbS5qcyc7XG5pbXBvcnQge2NvbnRhaW5zRXh0ZW50LCBpbnRlcnNlY3RzfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IENhbnZhc0xheWVyUmVuZGVyZXIgZnJvbSAnLi9MYXllci5qcyc7XG5pbXBvcnQge2NyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtfSBmcm9tICcuLi8uLi90cmFuc2Zvcm0uanMnO1xuXG4vKipcbiAqIEBhYnN0cmFjdFxuICovXG52YXIgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChDYW52YXNMYXllclJlbmRlcmVyKSB7XG4gIGZ1bmN0aW9uIEludGVybWVkaWF0ZUNhbnZhc1JlbmRlcmVyKGxheWVyKSB7XG5cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLmNhbGwodGhpcywgbGF5ZXIpO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAqL1xuICAgIHRoaXMuY29vcmRpbmF0ZVRvQ2FudmFzUGl4ZWxUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAgICAgKi9cbiAgICB0aGlzLmhpdENhbnZhc0NvbnRleHRfID0gbnVsbDtcblxuICB9XG5cbiAgaWYgKCBDYW52YXNMYXllclJlbmRlcmVyICkgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIuX19wcm90b19fID0gQ2FudmFzTGF5ZXJSZW5kZXJlcjtcbiAgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggQ2FudmFzTGF5ZXJSZW5kZXJlciAmJiBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZSApO1xuICBJbnRlcm1lZGlhdGVDYW52YXNSZW5kZXJlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBJbnRlcm1lZGlhdGVDYW52YXNSZW5kZXJlcjtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIEludGVybWVkaWF0ZUNhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5jb21wb3NlRnJhbWUgPSBmdW5jdGlvbiBjb21wb3NlRnJhbWUgKGZyYW1lU3RhdGUsIGxheWVyU3RhdGUsIGNvbnRleHQpIHtcblxuICAgIHRoaXMucHJlQ29tcG9zZShjb250ZXh0LCBmcmFtZVN0YXRlKTtcblxuICAgIHZhciBpbWFnZSA9IHRoaXMuZ2V0SW1hZ2UoKTtcbiAgICBpZiAoaW1hZ2UpIHtcblxuICAgICAgLy8gY2xpcHBlZCByZW5kZXJpbmcgaWYgbGF5ZXIgZXh0ZW50IGlzIHNldFxuICAgICAgdmFyIGV4dGVudCA9IGxheWVyU3RhdGUuZXh0ZW50O1xuICAgICAgdmFyIGNsaXBwZWQgPSBleHRlbnQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICFjb250YWluc0V4dGVudChleHRlbnQsIGZyYW1lU3RhdGUuZXh0ZW50KSAmJlxuICAgICAgICAgIGludGVyc2VjdHMoZXh0ZW50LCBmcmFtZVN0YXRlLmV4dGVudCk7XG4gICAgICBpZiAoY2xpcHBlZCkge1xuICAgICAgICB0aGlzLmNsaXAoY29udGV4dCwgZnJhbWVTdGF0ZSwgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSAqLyAoZXh0ZW50KSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBpbWFnZVRyYW5zZm9ybSA9IHRoaXMuZ2V0SW1hZ2VUcmFuc2Zvcm0oKTtcbiAgICAgIC8vIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLCBjb250ZXh0LnNhdmUgLyBjb250ZXh0LnJlc3RvcmUgaXMgbm90IHVzZWRcbiAgICAgIC8vIHRvIHNhdmUgYW5kIHJlc3RvcmUgdGhlIHRyYW5zZm9ybWF0aW9uIG1hdHJpeCBhbmQgdGhlIG9wYWNpdHkuXG4gICAgICAvLyBzZWUgaHR0cDovL2pzcGVyZi5jb20vY29udGV4dC1zYXZlLXJlc3RvcmUtdmVyc3VzLXZhcmlhYmxlXG4gICAgICB2YXIgYWxwaGEgPSBjb250ZXh0Lmdsb2JhbEFscGhhO1xuICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IGxheWVyU3RhdGUub3BhY2l0eTtcblxuICAgICAgLy8gZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIGNvbnRleHQuc2V0VHJhbnNmb3JtIGlzIG9ubHkgdXNlZFxuICAgICAgLy8gd2hlbiB0aGUgdmlldyBpcyByb3RhdGVkLiBzZWUgaHR0cDovL2pzcGVyZi5jb20vY2FudmFzLXRyYW5zZm9ybVxuICAgICAgdmFyIGR4ID0gaW1hZ2VUcmFuc2Zvcm1bNF07XG4gICAgICB2YXIgZHkgPSBpbWFnZVRyYW5zZm9ybVs1XTtcbiAgICAgIHZhciBkdyA9IGltYWdlLndpZHRoICogaW1hZ2VUcmFuc2Zvcm1bMF07XG4gICAgICB2YXIgZGggPSBpbWFnZS5oZWlnaHQgKiBpbWFnZVRyYW5zZm9ybVszXTtcbiAgICAgIGlmIChkdyA+PSAwLjUgJiYgZGggPj0gMC41KSB7XG4gICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwLCAraW1hZ2Uud2lkdGgsICtpbWFnZS5oZWlnaHQsXG4gICAgICAgICAgTWF0aC5yb3VuZChkeCksIE1hdGgucm91bmQoZHkpLCBNYXRoLnJvdW5kKGR3KSwgTWF0aC5yb3VuZChkaCkpO1xuICAgICAgfVxuICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhO1xuXG4gICAgICBpZiAoY2xpcHBlZCkge1xuICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnBvc3RDb21wb3NlKGNvbnRleHQsIGZyYW1lU3RhdGUsIGxheWVyU3RhdGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fSBDYW52YXMuXG4gICAqL1xuICBJbnRlcm1lZGlhdGVDYW52YXNSZW5kZXJlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiBnZXRJbWFnZSAoKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gSW1hZ2UgdHJhbnNmb3JtLlxuICAgKi9cbiAgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLmdldEltYWdlVHJhbnNmb3JtID0gZnVuY3Rpb24gZ2V0SW1hZ2VUcmFuc2Zvcm0gKCkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hMYXllckF0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIGZvckVhY2hMYXllckF0Q29vcmRpbmF0ZSAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIGlmICghdGhpcy5nZXRJbWFnZSgpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHZhciBwaXhlbCA9IGFwcGx5VHJhbnNmb3JtKHRoaXMuY29vcmRpbmF0ZVRvQ2FudmFzUGl4ZWxUcmFuc2Zvcm0sIGNvb3JkaW5hdGUuc2xpY2UoKSk7XG4gICAgc2NhbGVDb29yZGluYXRlKHBpeGVsLCBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yZXNvbHV0aW9uIC8gdGhpcy5yZW5kZXJlZFJlc29sdXRpb24pO1xuXG4gICAgaWYgKCF0aGlzLmhpdENhbnZhc0NvbnRleHRfKSB7XG4gICAgICB0aGlzLmhpdENhbnZhc0NvbnRleHRfID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKDEsIDEpO1xuICAgIH1cblxuICAgIHRoaXMuaGl0Q2FudmFzQ29udGV4dF8uY2xlYXJSZWN0KDAsIDAsIDEsIDEpO1xuICAgIHRoaXMuaGl0Q2FudmFzQ29udGV4dF8uZHJhd0ltYWdlKHRoaXMuZ2V0SW1hZ2UoKSwgcGl4ZWxbMF0sIHBpeGVsWzFdLCAxLCAxLCAwLCAwLCAxLCAxKTtcblxuICAgIHZhciBpbWFnZURhdGEgPSB0aGlzLmhpdENhbnZhc0NvbnRleHRfLmdldEltYWdlRGF0YSgwLCAwLCAxLCAxKS5kYXRhO1xuICAgIGlmIChpbWFnZURhdGFbM10gPiAwKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB0aGlzLmdldExheWVyKCksIGltYWdlRGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBJbnRlcm1lZGlhdGVDYW52YXNSZW5kZXJlcjtcbn0oQ2FudmFzTGF5ZXJSZW5kZXJlcikpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IEludGVybWVkaWF0ZUNhbnZhc1JlbmRlcmVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlcm1lZGlhdGVDYW52YXMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL2NhbnZhcy9JbWFnZUxheWVyXG4gKi9cbmltcG9ydCB7RU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT059IGZyb20gJy4uLy4uL3JlcHJvai9jb21tb24uanMnO1xuaW1wb3J0IEltYWdlQ2FudmFzIGZyb20gJy4uLy4uL0ltYWdlQ2FudmFzLmpzJztcbmltcG9ydCBMYXllclR5cGUgZnJvbSAnLi4vLi4vTGF5ZXJUeXBlLmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuLi8uLi9WaWV3SGludC5qcyc7XG5pbXBvcnQge2VxdWFsc30gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuaW1wb3J0IHtnZXRIZWlnaHQsIGdldEludGVyc2VjdGlvbiwgZ2V0V2lkdGgsIGlzRW1wdHl9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgVmVjdG9yUmVuZGVyVHlwZSBmcm9tICcuLi8uLi9sYXllci9WZWN0b3JSZW5kZXJUeXBlLmpzJztcbmltcG9ydCB7YXNzaWdufSBmcm9tICcuLi8uLi9vYmouanMnO1xuaW1wb3J0IHtsYXllclJlbmRlcmVyQ29uc3RydWN0b3JzfSBmcm9tICcuL01hcC5qcyc7XG5pbXBvcnQgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIgZnJvbSAnLi9JbnRlcm1lZGlhdGVDYW52YXMuanMnO1xuaW1wb3J0IHtjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm19IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ2FudmFzIHJlbmRlcmVyIGZvciBpbWFnZSBsYXllcnMuXG4gKiBAYXBpXG4gKi9cbnZhciBDYW52YXNJbWFnZUxheWVyUmVuZGVyZXIgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChJbnRlcm1lZGlhdGVDYW52YXNSZW5kZXJlcikge1xuICBmdW5jdGlvbiBDYW52YXNJbWFnZUxheWVyUmVuZGVyZXIoaW1hZ2VMYXllcikge1xuXG4gICAgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIuY2FsbCh0aGlzLCBpbWFnZUxheWVyKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi8uLi9JbWFnZUJhc2UuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLmltYWdlXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAqL1xuICAgIHRoaXMuaW1hZ2VUcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7IUFycmF5PHN0cmluZz59XG4gICAgICovXG4gICAgdGhpcy5za2lwcGVkRmVhdHVyZXNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1ZlY3RvckxheWVyLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy52ZWN0b3JSZW5kZXJlcl8gPSBudWxsO1xuXG4gICAgaWYgKGltYWdlTGF5ZXIuZ2V0VHlwZSgpID09PSBMYXllclR5cGUuVkVDVE9SKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsYXllclJlbmRlcmVyQ29uc3RydWN0b3JzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGN0b3IgPSBsYXllclJlbmRlcmVyQ29uc3RydWN0b3JzW2ldO1xuICAgICAgICBpZiAoY3RvciAhPT0gQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyICYmIGN0b3JbJ2hhbmRsZXMnXShpbWFnZUxheWVyKSkge1xuICAgICAgICAgIHRoaXMudmVjdG9yUmVuZGVyZXJfID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1ZlY3RvckxheWVyLmpzXCIpLmRlZmF1bHR9ICovIChuZXcgY3RvcihpbWFnZUxheWVyKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgfVxuXG4gIGlmICggSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIgKSBDYW52YXNJbWFnZUxheWVyUmVuZGVyZXIuX19wcm90b19fID0gSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXI7XG4gIENhbnZhc0ltYWdlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBJbnRlcm1lZGlhdGVDYW52YXNSZW5kZXJlciAmJiBJbnRlcm1lZGlhdGVDYW52YXNSZW5kZXJlci5wcm90b3R5cGUgKTtcbiAgQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc0ltYWdlTGF5ZXJSZW5kZXJlcjtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc0ltYWdlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gZGlzcG9zZUludGVybmFsICgpIHtcbiAgICBpZiAodGhpcy52ZWN0b3JSZW5kZXJlcl8pIHtcbiAgICAgIHRoaXMudmVjdG9yUmVuZGVyZXJfLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uIGdldEltYWdlICgpIHtcbiAgICByZXR1cm4gIXRoaXMuaW1hZ2VfID8gbnVsbCA6IHRoaXMuaW1hZ2VfLmdldEltYWdlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNJbWFnZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldEltYWdlVHJhbnNmb3JtID0gZnVuY3Rpb24gZ2V0SW1hZ2VUcmFuc2Zvcm0gKCkge1xuICAgIHJldHVybiB0aGlzLmltYWdlVHJhbnNmb3JtXztcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc0ltYWdlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucHJlcGFyZUZyYW1lID0gZnVuY3Rpb24gcHJlcGFyZUZyYW1lIChmcmFtZVN0YXRlLCBsYXllclN0YXRlKSB7XG5cbiAgICB2YXIgcGl4ZWxSYXRpbyA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcbiAgICB2YXIgc2l6ZSA9IGZyYW1lU3RhdGUuc2l6ZTtcbiAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgdmFyIHZpZXdDZW50ZXIgPSB2aWV3U3RhdGUuY2VudGVyO1xuICAgIHZhciB2aWV3UmVzb2x1dGlvbiA9IHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuXG4gICAgdmFyIGltYWdlO1xuICAgIHZhciBpbWFnZUxheWVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9JbWFnZS5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5nZXRMYXllcigpKTtcbiAgICB2YXIgaW1hZ2VTb3VyY2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9JbWFnZS5qc1wiKS5kZWZhdWx0fSAqLyAoaW1hZ2VMYXllci5nZXRTb3VyY2UoKSk7XG5cbiAgICB2YXIgaGludHMgPSBmcmFtZVN0YXRlLnZpZXdIaW50cztcblxuICAgIHZhciB2ZWN0b3JSZW5kZXJlciA9IHRoaXMudmVjdG9yUmVuZGVyZXJfO1xuICAgIHZhciByZW5kZXJlZEV4dGVudCA9IGZyYW1lU3RhdGUuZXh0ZW50O1xuICAgIGlmICghdmVjdG9yUmVuZGVyZXIgJiYgbGF5ZXJTdGF0ZS5leHRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmVuZGVyZWRFeHRlbnQgPSBnZXRJbnRlcnNlY3Rpb24ocmVuZGVyZWRFeHRlbnQsIGxheWVyU3RhdGUuZXh0ZW50KTtcbiAgICB9XG5cbiAgICBpZiAoIWhpbnRzW1ZpZXdIaW50LkFOSU1BVElOR10gJiYgIWhpbnRzW1ZpZXdIaW50LklOVEVSQUNUSU5HXSAmJlxuICAgICAgICAhaXNFbXB0eShyZW5kZXJlZEV4dGVudCkpIHtcbiAgICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICAgIHZhciBzb3VyY2VQcm9qZWN0aW9uID0gaW1hZ2VTb3VyY2UuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICBpZiAoc291cmNlUHJvamVjdGlvbikge1xuICAgICAgICAgIHByb2plY3Rpb24gPSBzb3VyY2VQcm9qZWN0aW9uO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgc2tpcHBlZEZlYXR1cmVzID0gdGhpcy5za2lwcGVkRmVhdHVyZXNfO1xuICAgICAgaWYgKHZlY3RvclJlbmRlcmVyKSB7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdmVjdG9yUmVuZGVyZXIuY29udGV4dDtcbiAgICAgICAgdmFyIGltYWdlRnJhbWVTdGF0ZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9ICovIChhc3NpZ24oe30sIGZyYW1lU3RhdGUsIHtcbiAgICAgICAgICBzaXplOiBbXG4gICAgICAgICAgICBnZXRXaWR0aChyZW5kZXJlZEV4dGVudCkgLyB2aWV3UmVzb2x1dGlvbixcbiAgICAgICAgICAgIGdldEhlaWdodChyZW5kZXJlZEV4dGVudCkgLyB2aWV3UmVzb2x1dGlvblxuICAgICAgICAgIF0sXG4gICAgICAgICAgdmlld1N0YXRlOiAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL1ZpZXcuanNcIikuU3RhdGV9ICovIChhc3NpZ24oe30sIGZyYW1lU3RhdGUudmlld1N0YXRlLCB7XG4gICAgICAgICAgICByb3RhdGlvbjogMFxuICAgICAgICAgIH0pKVxuICAgICAgICB9KSk7XG4gICAgICAgIHZhciBuZXdTa2lwcGVkRmVhdHVyZXMgPSBPYmplY3Qua2V5cyhpbWFnZUZyYW1lU3RhdGUuc2tpcHBlZEZlYXR1cmVVaWRzKS5zb3J0KCk7XG4gICAgICAgIGltYWdlID0gbmV3IEltYWdlQ2FudmFzKHJlbmRlcmVkRXh0ZW50LCB2aWV3UmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgY29udGV4dC5jYW52YXMsIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgaWYgKHZlY3RvclJlbmRlcmVyLnByZXBhcmVGcmFtZShpbWFnZUZyYW1lU3RhdGUsIGxheWVyU3RhdGUpICYmXG4gICAgICAgICAgICAgICh2ZWN0b3JSZW5kZXJlci5yZXBsYXlHcm91cENoYW5nZWQgfHxcbiAgICAgICAgICAgICAgIWVxdWFscyhza2lwcGVkRmVhdHVyZXMsIG5ld1NraXBwZWRGZWF0dXJlcykpKSB7XG4gICAgICAgICAgICBjb250ZXh0LmNhbnZhcy53aWR0aCA9IGltYWdlRnJhbWVTdGF0ZS5zaXplWzBdICogcGl4ZWxSYXRpbztcbiAgICAgICAgICAgIGNvbnRleHQuY2FudmFzLmhlaWdodCA9IGltYWdlRnJhbWVTdGF0ZS5zaXplWzFdICogcGl4ZWxSYXRpbztcbiAgICAgICAgICAgIHZlY3RvclJlbmRlcmVyLmNvbXBvc2UoY29udGV4dCwgaW1hZ2VGcmFtZVN0YXRlLCBsYXllclN0YXRlKTtcbiAgICAgICAgICAgIHNraXBwZWRGZWF0dXJlcyA9IG5ld1NraXBwZWRGZWF0dXJlcztcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGltYWdlID0gaW1hZ2VTb3VyY2UuZ2V0SW1hZ2UoXG4gICAgICAgICAgcmVuZGVyZWRFeHRlbnQsIHZpZXdSZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgIH1cbiAgICAgIGlmIChpbWFnZSAmJiB0aGlzLmxvYWRJbWFnZShpbWFnZSkpIHtcbiAgICAgICAgdGhpcy5pbWFnZV8gPSBpbWFnZTtcbiAgICAgICAgdGhpcy5za2lwcGVkRmVhdHVyZXNfID0gc2tpcHBlZEZlYXR1cmVzO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmltYWdlXykge1xuICAgICAgaW1hZ2UgPSB0aGlzLmltYWdlXztcbiAgICAgIHZhciBpbWFnZUV4dGVudCA9IGltYWdlLmdldEV4dGVudCgpO1xuICAgICAgdmFyIGltYWdlUmVzb2x1dGlvbiA9IGltYWdlLmdldFJlc29sdXRpb24oKTtcbiAgICAgIHZhciBpbWFnZVBpeGVsUmF0aW8gPSBpbWFnZS5nZXRQaXhlbFJhdGlvKCk7XG4gICAgICB2YXIgc2NhbGUgPSBwaXhlbFJhdGlvICogaW1hZ2VSZXNvbHV0aW9uIC9cbiAgICAgICAgICAodmlld1Jlc29sdXRpb24gKiBpbWFnZVBpeGVsUmF0aW8pO1xuICAgICAgdmFyIHRyYW5zZm9ybSA9IGNvbXBvc2VUcmFuc2Zvcm0odGhpcy5pbWFnZVRyYW5zZm9ybV8sXG4gICAgICAgIHBpeGVsUmF0aW8gKiBzaXplWzBdIC8gMiwgcGl4ZWxSYXRpbyAqIHNpemVbMV0gLyAyLFxuICAgICAgICBzY2FsZSwgc2NhbGUsXG4gICAgICAgIDAsXG4gICAgICAgIGltYWdlUGl4ZWxSYXRpbyAqIChpbWFnZUV4dGVudFswXSAtIHZpZXdDZW50ZXJbMF0pIC8gaW1hZ2VSZXNvbHV0aW9uLFxuICAgICAgICBpbWFnZVBpeGVsUmF0aW8gKiAodmlld0NlbnRlclsxXSAtIGltYWdlRXh0ZW50WzNdKSAvIGltYWdlUmVzb2x1dGlvbik7XG4gICAgICBjb21wb3NlVHJhbnNmb3JtKHRoaXMuY29vcmRpbmF0ZVRvQ2FudmFzUGl4ZWxUcmFuc2Zvcm0sXG4gICAgICAgIHBpeGVsUmF0aW8gKiBzaXplWzBdIC8gMiAtIHRyYW5zZm9ybVs0XSwgcGl4ZWxSYXRpbyAqIHNpemVbMV0gLyAyIC0gdHJhbnNmb3JtWzVdLFxuICAgICAgICBwaXhlbFJhdGlvIC8gdmlld1Jlc29sdXRpb24sIC1waXhlbFJhdGlvIC8gdmlld1Jlc29sdXRpb24sXG4gICAgICAgIDAsXG4gICAgICAgIC12aWV3Q2VudGVyWzBdLCAtdmlld0NlbnRlclsxXSk7XG5cbiAgICAgIHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uID0gaW1hZ2VSZXNvbHV0aW9uICogcGl4ZWxSYXRpbyAvIGltYWdlUGl4ZWxSYXRpbztcbiAgICB9XG5cbiAgICByZXR1cm4gISF0aGlzLmltYWdlXztcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc0ltYWdlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLnZlY3RvclJlbmRlcmVyXykge1xuICAgICAgcmV0dXJuIHRoaXMudmVjdG9yUmVuZGVyZXJfLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKGNvb3JkaW5hdGUsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlLmNhbGwodGhpcywgY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjayk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBDYW52YXNJbWFnZUxheWVyUmVuZGVyZXI7XG59KEludGVybWVkaWF0ZUNhbnZhc1JlbmRlcmVyKSk7XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdGhpcyByZW5kZXJlciBoYW5kbGVzIHRoZSBwcm92aWRlZCBsYXllci5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXIgVGhlIGNhbmRpZGF0ZSBsYXllci5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSByZW5kZXJlciBjYW4gcmVuZGVyIHRoZSBsYXllci5cbiAqL1xuQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyWydoYW5kbGVzJ10gPSBmdW5jdGlvbihsYXllcikge1xuICByZXR1cm4gbGF5ZXIuZ2V0VHlwZSgpID09PSBMYXllclR5cGUuSU1BR0UgfHxcbiAgICBsYXllci5nZXRUeXBlKCkgPT09IExheWVyVHlwZS5WRUNUT1IgJiZcbiAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXIpLmdldFJlbmRlck1vZGUoKSA9PT0gVmVjdG9yUmVuZGVyVHlwZS5JTUFHRTtcbn07XG5cblxuLyoqXG4gKiBDcmVhdGUgYSBsYXllciByZW5kZXJlci5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLmRlZmF1bHR9IG1hcFJlbmRlcmVyIFRoZSBtYXAgcmVuZGVyZXIuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIFRoZSBsYXllciB0byBiZSByZW5kZXJlcmQuXG4gKiBAcmV0dXJuIHtDYW52YXNJbWFnZUxheWVyUmVuZGVyZXJ9IFRoZSBsYXllciByZW5kZXJlci5cbiAqL1xuQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyWydjcmVhdGUnXSA9IGZ1bmN0aW9uKG1hcFJlbmRlcmVyLCBsYXllcikge1xuICByZXR1cm4gbmV3IENhbnZhc0ltYWdlTGF5ZXJSZW5kZXJlcigvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL0ltYWdlLmpzXCIpLmRlZmF1bHR9ICovIChsYXllcikpO1xufTtcblxuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNJbWFnZUxheWVyUmVuZGVyZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlTGF5ZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVSYW5nZVxuICovXG5cbi8qKlxuICogQSByZXByZXNlbnRhdGlvbiBvZiBhIGNvbnRpZ3VvdXMgYmxvY2sgb2YgdGlsZXMuICBBIHRpbGUgcmFuZ2UgaXMgc3BlY2lmaWVkXG4gKiBieSBpdHMgbWluL21heCB0aWxlIGNvb3JkaW5hdGVzIGFuZCBpcyBpbmNsdXNpdmUgb2YgY29vcmRpbmF0ZXMuXG4gKi9cbnZhciBUaWxlUmFuZ2UgPSBmdW5jdGlvbiBUaWxlUmFuZ2UobWluWCwgbWF4WCwgbWluWSwgbWF4WSkge1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgdGhpcy5taW5YID0gbWluWDtcblxuICAvKipcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHRoaXMubWF4WCA9IG1heFg7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICB0aGlzLm1pblkgPSBtaW5ZO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgdGhpcy5tYXhZID0gbWF4WTtcblxufTtcblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIHRpbGUgY29vcmRpbmF0ZS5cbiAqL1xuVGlsZVJhbmdlLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uIGNvbnRhaW5zICh0aWxlQ29vcmQpIHtcbiAgcmV0dXJuIHRoaXMuY29udGFpbnNYWSh0aWxlQ29vcmRbMV0sIHRpbGVDb29yZFsyXSk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7VGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zLlxuICovXG5UaWxlUmFuZ2UucHJvdG90eXBlLmNvbnRhaW5zVGlsZVJhbmdlID0gZnVuY3Rpb24gY29udGFpbnNUaWxlUmFuZ2UgKHRpbGVSYW5nZSkge1xuICByZXR1cm4gdGhpcy5taW5YIDw9IHRpbGVSYW5nZS5taW5YICYmIHRpbGVSYW5nZS5tYXhYIDw9IHRoaXMubWF4WCAmJlxuICAgICB0aGlzLm1pblkgPD0gdGlsZVJhbmdlLm1pblkgJiYgdGlsZVJhbmdlLm1heFkgPD0gdGhpcy5tYXhZO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgY29vcmRpbmF0ZS5cbiAqL1xuVGlsZVJhbmdlLnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gY29udGFpbnNYWSAoeCwgeSkge1xuICByZXR1cm4gdGhpcy5taW5YIDw9IHggJiYgeCA8PSB0aGlzLm1heFggJiYgdGhpcy5taW5ZIDw9IHkgJiYgeSA8PSB0aGlzLm1heFk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7VGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IEVxdWFscy5cbiAqL1xuVGlsZVJhbmdlLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKHRpbGVSYW5nZSkge1xuICByZXR1cm4gdGhpcy5taW5YID09IHRpbGVSYW5nZS5taW5YICYmIHRoaXMubWluWSA9PSB0aWxlUmFuZ2UubWluWSAmJlxuICAgICB0aGlzLm1heFggPT0gdGlsZVJhbmdlLm1heFggJiYgdGhpcy5tYXhZID09IHRpbGVSYW5nZS5tYXhZO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge1RpbGVSYW5nZX0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gKi9cblRpbGVSYW5nZS5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24gZXh0ZW5kICh0aWxlUmFuZ2UpIHtcbiAgaWYgKHRpbGVSYW5nZS5taW5YIDwgdGhpcy5taW5YKSB7XG4gICAgdGhpcy5taW5YID0gdGlsZVJhbmdlLm1pblg7XG4gIH1cbiAgaWYgKHRpbGVSYW5nZS5tYXhYID4gdGhpcy5tYXhYKSB7XG4gICAgdGhpcy5tYXhYID0gdGlsZVJhbmdlLm1heFg7XG4gIH1cbiAgaWYgKHRpbGVSYW5nZS5taW5ZIDwgdGhpcy5taW5ZKSB7XG4gICAgdGhpcy5taW5ZID0gdGlsZVJhbmdlLm1pblk7XG4gIH1cbiAgaWYgKHRpbGVSYW5nZS5tYXhZID4gdGhpcy5tYXhZKSB7XG4gICAgdGhpcy5tYXhZID0gdGlsZVJhbmdlLm1heFk7XG4gIH1cbn07XG5cbi8qKlxuICogQHJldHVybiB7bnVtYmVyfSBIZWlnaHQuXG4gKi9cblRpbGVSYW5nZS5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gZ2V0SGVpZ2h0ICgpIHtcbiAgcmV0dXJuIHRoaXMubWF4WSAtIHRoaXMubWluWSArIDE7XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBTaXplLlxuICovXG5UaWxlUmFuZ2UucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiBnZXRTaXplICgpIHtcbiAgcmV0dXJuIFt0aGlzLmdldFdpZHRoKCksIHRoaXMuZ2V0SGVpZ2h0KCldO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFdpZHRoLlxuICovXG5UaWxlUmFuZ2UucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24gZ2V0V2lkdGggKCkge1xuICByZXR1cm4gdGhpcy5tYXhYIC0gdGhpcy5taW5YICsgMTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtUaWxlUmFuZ2V9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gSW50ZXJzZWN0cy5cbiAqL1xuVGlsZVJhbmdlLnByb3RvdHlwZS5pbnRlcnNlY3RzID0gZnVuY3Rpb24gaW50ZXJzZWN0cyAodGlsZVJhbmdlKSB7XG4gIHJldHVybiB0aGlzLm1pblggPD0gdGlsZVJhbmdlLm1heFggJiZcbiAgICAgdGhpcy5tYXhYID49IHRpbGVSYW5nZS5taW5YICYmXG4gICAgIHRoaXMubWluWSA8PSB0aWxlUmFuZ2UubWF4WSAmJlxuICAgICB0aGlzLm1heFkgPj0gdGlsZVJhbmdlLm1pblk7XG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblggTWluaW11bSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFggTWF4aW11bSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblkgTWluaW11bSBZLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFkgTWF4aW11bSBZLlxuICogQHBhcmFtIHtUaWxlUmFuZ2U9fSB0aWxlUmFuZ2UgVGlsZVJhbmdlLlxuICogQHJldHVybiB7VGlsZVJhbmdlfSBUaWxlIHJhbmdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGUobWluWCwgbWF4WCwgbWluWSwgbWF4WSwgdGlsZVJhbmdlKSB7XG4gIGlmICh0aWxlUmFuZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgIHRpbGVSYW5nZS5taW5YID0gbWluWDtcbiAgICB0aWxlUmFuZ2UubWF4WCA9IG1heFg7XG4gICAgdGlsZVJhbmdlLm1pblkgPSBtaW5ZO1xuICAgIHRpbGVSYW5nZS5tYXhZID0gbWF4WTtcbiAgICByZXR1cm4gdGlsZVJhbmdlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgVGlsZVJhbmdlKG1pblgsIG1heFgsIG1pblksIG1heFkpO1xuICB9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgVGlsZVJhbmdlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlUmFuZ2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL2NhbnZhcy9UaWxlTGF5ZXJcbiAqL1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uLy4uL3V0aWwuanMnO1xuaW1wb3J0IExheWVyVHlwZSBmcm9tICcuLi8uLi9MYXllclR5cGUuanMnO1xuaW1wb3J0IFRpbGVSYW5nZSBmcm9tICcuLi8uLi9UaWxlUmFuZ2UuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi8uLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IFZpZXdIaW50IGZyb20gJy4uLy4uL1ZpZXdIaW50LmpzJztcbmltcG9ydCB7Y3JlYXRlQ2FudmFzQ29udGV4dDJEfSBmcm9tICcuLi8uLi9kb20uanMnO1xuaW1wb3J0IHtjb250YWluc0V4dGVudCwgY3JlYXRlRW1wdHksIGVxdWFscywgZ2V0SW50ZXJzZWN0aW9uLCBpc0VtcHR5fSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IEludGVybWVkaWF0ZUNhbnZhc1JlbmRlcmVyIGZyb20gJy4vSW50ZXJtZWRpYXRlQ2FudmFzLmpzJztcbmltcG9ydCB7Y3JlYXRlIGFzIGNyZWF0ZVRyYW5zZm9ybSwgY29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtfSBmcm9tICcuLi8uLi90cmFuc2Zvcm0uanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENhbnZhcyByZW5kZXJlciBmb3IgdGlsZSBsYXllcnMuXG4gKiBAYXBpXG4gKi9cbnZhciBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEludGVybWVkaWF0ZUNhbnZhc1JlbmRlcmVyKSB7XG4gIGZ1bmN0aW9uIENhbnZhc1RpbGVMYXllclJlbmRlcmVyKHRpbGVMYXllciwgb3B0X25vQ29udGV4dCkge1xuXG4gICAgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIuY2FsbCh0aGlzLCB0aWxlTGF5ZXIpO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gICAgICovXG4gICAgdGhpcy5jb250ZXh0ID0gb3B0X25vQ29udGV4dCA/IG51bGwgOiBjcmVhdGVDYW52YXNDb250ZXh0MkQoKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm92ZXJzYW1wbGluZ187XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRFeHRlbnRfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRSZXZpc2lvbjtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7IUFycmF5PGltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdD59XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZFRpbGVzID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMubmV3VGlsZXNfID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICovXG4gICAgdGhpcy50bXBFeHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy50bXBUaWxlUmFuZ2VfID0gbmV3IFRpbGVSYW5nZSgwLCAwLCAwLCAwKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICovXG4gICAgdGhpcy5pbWFnZVRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuekRpcmVjdGlvbiA9IDA7XG5cbiAgfVxuXG4gIGlmICggSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIgKSBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5fX3Byb3RvX18gPSBJbnRlcm1lZGlhdGVDYW52YXNSZW5kZXJlcjtcbiAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIgJiYgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlICk7XG4gIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc1RpbGVMYXllclJlbmRlcmVyO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaWxlIGlzIGRyYXdhYmxlLlxuICAgKi9cbiAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmlzRHJhd2FibGVUaWxlXyA9IGZ1bmN0aW9uIGlzRHJhd2FibGVUaWxlXyAodGlsZSkge1xuICAgIHZhciB0aWxlTGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0TGF5ZXIoKSk7XG4gICAgdmFyIHRpbGVTdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICB2YXIgdXNlSW50ZXJpbVRpbGVzT25FcnJvciA9IHRpbGVMYXllci5nZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yKCk7XG4gICAgcmV0dXJuIHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuTE9BREVEIHx8XG4gICAgICAgIHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuRU1QVFkgfHxcbiAgICAgICAgdGlsZVN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUiAmJiAhdXNlSW50ZXJpbVRpbGVzT25FcnJvcjtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7IWltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICovXG4gIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRUaWxlID0gZnVuY3Rpb24gZ2V0VGlsZSAoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgIHZhciB0aWxlTGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0TGF5ZXIoKSk7XG4gICAgdmFyIHRpbGVTb3VyY2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aWxlTGF5ZXIuZ2V0U291cmNlKCkpO1xuICAgIHZhciB0aWxlID0gdGlsZVNvdXJjZS5nZXRUaWxlKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkVSUk9SKSB7XG4gICAgICBpZiAoIXRpbGVMYXllci5nZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yKCkpIHtcbiAgICAgICAgLy8gV2hlbiB1c2VJbnRlcmltVGlsZXNPbkVycm9yIGlzIGZhbHNlLCB3ZSBjb25zaWRlciB0aGUgZXJyb3IgdGlsZSBhcyBsb2FkZWQuXG4gICAgICAgIHRpbGUuc2V0U3RhdGUoVGlsZVN0YXRlLkxPQURFRCk7XG4gICAgICB9IGVsc2UgaWYgKHRpbGVMYXllci5nZXRQcmVsb2FkKCkgPiAwKSB7XG4gICAgICAgIC8vIFByZWxvYWRlZCB0aWxlcyBmb3IgbG93ZXIgcmVzb2x1dGlvbnMgbWlnaHQgaGF2ZSBmaW5pc2hlZCBsb2FkaW5nLlxuICAgICAgICB0aGlzLm5ld1RpbGVzXyA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5pc0RyYXdhYmxlVGlsZV8odGlsZSkpIHtcbiAgICAgIHRpbGUgPSB0aWxlLmdldEludGVyaW1UaWxlKCk7XG4gICAgfVxuICAgIHJldHVybiB0aWxlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnByZXBhcmVGcmFtZSA9IGZ1bmN0aW9uIHByZXBhcmVGcmFtZSAoZnJhbWVTdGF0ZSwgbGF5ZXJTdGF0ZSkge1xuXG4gICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgdmFyIHNpemUgPSBmcmFtZVN0YXRlLnNpemU7XG4gICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgdmFyIHZpZXdSZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XG4gICAgdmFyIHZpZXdDZW50ZXIgPSB2aWV3U3RhdGUuY2VudGVyO1xuXG4gICAgdmFyIHRpbGVMYXllciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5nZXRMYXllcigpKTtcbiAgICB2YXIgdGlsZVNvdXJjZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRpbGVMYXllci5nZXRTb3VyY2UoKSk7XG4gICAgdmFyIHNvdXJjZVJldmlzaW9uID0gdGlsZVNvdXJjZS5nZXRSZXZpc2lvbigpO1xuICAgIHZhciB0aWxlR3JpZCA9IHRpbGVTb3VyY2UuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIHZhciB6ID0gdGlsZUdyaWQuZ2V0WkZvclJlc29sdXRpb24odmlld1Jlc29sdXRpb24sIHRoaXMuekRpcmVjdGlvbik7XG4gICAgdmFyIHRpbGVSZXNvbHV0aW9uID0gdGlsZUdyaWQuZ2V0UmVzb2x1dGlvbih6KTtcbiAgICB2YXIgb3ZlcnNhbXBsaW5nID0gTWF0aC5yb3VuZCh2aWV3UmVzb2x1dGlvbiAvIHRpbGVSZXNvbHV0aW9uKSB8fCAxO1xuICAgIHZhciBleHRlbnQgPSBmcmFtZVN0YXRlLmV4dGVudDtcblxuICAgIGlmIChsYXllclN0YXRlLmV4dGVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBleHRlbnQgPSBnZXRJbnRlcnNlY3Rpb24oZXh0ZW50LCBsYXllclN0YXRlLmV4dGVudCk7XG4gICAgfVxuICAgIGlmIChpc0VtcHR5KGV4dGVudCkpIHtcbiAgICAgIC8vIFJldHVybiBmYWxzZSB0byBwcmV2ZW50IHRoZSByZW5kZXJpbmcgb2YgdGhlIGxheWVyLlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciB0aWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeik7XG4gICAgdmFyIGltYWdlRXh0ZW50ID0gdGlsZUdyaWQuZ2V0VGlsZVJhbmdlRXh0ZW50KHosIHRpbGVSYW5nZSk7XG5cbiAgICB2YXIgdGlsZVBpeGVsUmF0aW8gPSB0aWxlU291cmNlLmdldFRpbGVQaXhlbFJhdGlvKHBpeGVsUmF0aW8pO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge09iamVjdDxudW1iZXIsIE9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdD4+fVxuICAgICAqL1xuICAgIHZhciB0aWxlc1RvRHJhd0J5WiA9IHt9O1xuICAgIHRpbGVzVG9EcmF3QnlaW3pdID0ge307XG5cbiAgICB2YXIgZmluZExvYWRlZFRpbGVzID0gdGhpcy5jcmVhdGVMb2FkZWRUaWxlRmluZGVyKFxuICAgICAgdGlsZVNvdXJjZSwgcHJvamVjdGlvbiwgdGlsZXNUb0RyYXdCeVopO1xuXG4gICAgdmFyIGhpbnRzID0gZnJhbWVTdGF0ZS52aWV3SGludHM7XG4gICAgdmFyIGFuaW1hdGluZ09ySW50ZXJhY3RpbmcgPSBoaW50c1tWaWV3SGludC5BTklNQVRJTkddIHx8IGhpbnRzW1ZpZXdIaW50LklOVEVSQUNUSU5HXTtcblxuICAgIHZhciB0bXBFeHRlbnQgPSB0aGlzLnRtcEV4dGVudDtcbiAgICB2YXIgdG1wVGlsZVJhbmdlID0gdGhpcy50bXBUaWxlUmFuZ2VfO1xuICAgIHRoaXMubmV3VGlsZXNfID0gZmFsc2U7XG4gICAgdmFyIHRpbGUsIHgsIHk7XG4gICAgZm9yICh4ID0gdGlsZVJhbmdlLm1pblg7IHggPD0gdGlsZVJhbmdlLm1heFg7ICsreCkge1xuICAgICAgZm9yICh5ID0gdGlsZVJhbmdlLm1pblk7IHkgPD0gdGlsZVJhbmdlLm1heFk7ICsreSkge1xuICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIGZyYW1lU3RhdGUudGltZSA+IDE2ICYmIGFuaW1hdGluZ09ySW50ZXJhY3RpbmcpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0aWxlID0gdGhpcy5nZXRUaWxlKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICBpZiAodGhpcy5pc0RyYXdhYmxlVGlsZV8odGlsZSkpIHtcbiAgICAgICAgICB2YXIgdWlkID0gZ2V0VWlkKHRoaXMpO1xuICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgdGlsZXNUb0RyYXdCeVpbel1bdGlsZS50aWxlQ29vcmQudG9TdHJpbmcoKV0gPSB0aWxlO1xuICAgICAgICAgICAgdmFyIGluVHJhbnNpdGlvbiA9IHRpbGUuaW5UcmFuc2l0aW9uKHVpZCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMubmV3VGlsZXNfICYmIChpblRyYW5zaXRpb24gfHwgdGhpcy5yZW5kZXJlZFRpbGVzLmluZGV4T2YodGlsZSkgPT09IC0xKSkge1xuICAgICAgICAgICAgICB0aGlzLm5ld1RpbGVzXyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aWxlLmdldEFscGhhKHVpZCwgZnJhbWVTdGF0ZS50aW1lKSA9PT0gMSkge1xuICAgICAgICAgICAgLy8gZG9uJ3QgbG9vayBmb3IgYWx0IHRpbGVzIGlmIGFscGhhIGlzIDFcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjaGlsZFRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldFRpbGVDb29yZENoaWxkVGlsZVJhbmdlKFxuICAgICAgICAgIHRpbGUudGlsZUNvb3JkLCB0bXBUaWxlUmFuZ2UsIHRtcEV4dGVudCk7XG4gICAgICAgIHZhciBjb3ZlcmVkID0gZmFsc2U7XG4gICAgICAgIGlmIChjaGlsZFRpbGVSYW5nZSkge1xuICAgICAgICAgIGNvdmVyZWQgPSBmaW5kTG9hZGVkVGlsZXMoeiArIDEsIGNoaWxkVGlsZVJhbmdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNvdmVyZWQpIHtcbiAgICAgICAgICB0aWxlR3JpZC5mb3JFYWNoVGlsZUNvb3JkUGFyZW50VGlsZVJhbmdlKFxuICAgICAgICAgICAgdGlsZS50aWxlQ29vcmQsIGZpbmRMb2FkZWRUaWxlcywgbnVsbCwgdG1wVGlsZVJhbmdlLCB0bXBFeHRlbnQpO1xuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcmVuZGVyZWRSZXNvbHV0aW9uID0gdGlsZVJlc29sdXRpb24gKiBwaXhlbFJhdGlvIC8gdGlsZVBpeGVsUmF0aW8gKiBvdmVyc2FtcGxpbmc7XG4gICAgaWYgKCEodGhpcy5yZW5kZXJlZFJlc29sdXRpb24gJiYgRGF0ZS5ub3coKSAtIGZyYW1lU3RhdGUudGltZSA+IDE2ICYmIGFuaW1hdGluZ09ySW50ZXJhY3RpbmcpICYmIChcbiAgICAgIHRoaXMubmV3VGlsZXNfIHx8XG4gICAgICAgICAgISh0aGlzLnJlbmRlcmVkRXh0ZW50XyAmJiBjb250YWluc0V4dGVudCh0aGlzLnJlbmRlcmVkRXh0ZW50XywgZXh0ZW50KSkgfHxcbiAgICAgICAgICB0aGlzLnJlbmRlcmVkUmV2aXNpb24gIT0gc291cmNlUmV2aXNpb24gfHxcbiAgICAgICAgICBvdmVyc2FtcGxpbmcgIT0gdGhpcy5vdmVyc2FtcGxpbmdfIHx8XG4gICAgICAgICAgIWFuaW1hdGluZ09ySW50ZXJhY3RpbmcgJiYgcmVuZGVyZWRSZXNvbHV0aW9uICE9IHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uXG4gICAgKSkge1xuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgIHZhciB0aWxlUGl4ZWxTaXplID0gdGlsZVNvdXJjZS5nZXRUaWxlUGl4ZWxTaXplKHosIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICB2YXIgd2lkdGggPSBNYXRoLnJvdW5kKHRpbGVSYW5nZS5nZXRXaWR0aCgpICogdGlsZVBpeGVsU2l6ZVswXSAvIG92ZXJzYW1wbGluZyk7XG4gICAgICAgIHZhciBoZWlnaHQgPSBNYXRoLnJvdW5kKHRpbGVSYW5nZS5nZXRIZWlnaHQoKSAqIHRpbGVQaXhlbFNpemVbMV0gLyBvdmVyc2FtcGxpbmcpO1xuICAgICAgICB2YXIgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgICAgIGlmIChjYW52YXMud2lkdGggIT0gd2lkdGggfHwgY2FudmFzLmhlaWdodCAhPSBoZWlnaHQpIHtcbiAgICAgICAgICB0aGlzLm92ZXJzYW1wbGluZ18gPSBvdmVyc2FtcGxpbmc7XG4gICAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy5yZW5kZXJlZEV4dGVudF8gJiYgIWVxdWFscyhpbWFnZUV4dGVudCwgdGhpcy5yZW5kZXJlZEV4dGVudF8pKSB7XG4gICAgICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb3ZlcnNhbXBsaW5nID0gdGhpcy5vdmVyc2FtcGxpbmdfO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVuZGVyZWRUaWxlcy5sZW5ndGggPSAwO1xuICAgICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgICAgdmFyIHpzID0gT2JqZWN0LmtleXModGlsZXNUb0RyYXdCeVopLm1hcChOdW1iZXIpO1xuICAgICAgenMuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgIGlmIChhID09PSB6KSB7XG4gICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH0gZWxzZSBpZiAoYiA9PT0geikge1xuICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gYSA+IGIgPyAxIDogYSA8IGIgPyAtMSA6IDA7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdmFyIGN1cnJlbnRSZXNvbHV0aW9uLCBjdXJyZW50U2NhbGUsIGN1cnJlbnRUaWxlUGl4ZWxTaXplLCBjdXJyZW50WiwgaSwgaWk7XG4gICAgICB2YXIgdGlsZUV4dGVudCwgdGlsZUd1dHRlciwgdGlsZXNUb0RyYXcsIHcsIGg7XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IHpzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgY3VycmVudFogPSB6c1tpXTtcbiAgICAgICAgY3VycmVudFRpbGVQaXhlbFNpemUgPSB0aWxlU291cmNlLmdldFRpbGVQaXhlbFNpemUoY3VycmVudFosIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICBjdXJyZW50UmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24oY3VycmVudFopO1xuICAgICAgICBjdXJyZW50U2NhbGUgPSBjdXJyZW50UmVzb2x1dGlvbiAvIHRpbGVSZXNvbHV0aW9uO1xuICAgICAgICB0aWxlR3V0dGVyID0gdGlsZVBpeGVsUmF0aW8gKiB0aWxlU291cmNlLmdldEd1dHRlckZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIHRpbGVzVG9EcmF3ID0gdGlsZXNUb0RyYXdCeVpbY3VycmVudFpdO1xuICAgICAgICBmb3IgKHZhciB0aWxlQ29vcmRLZXkgaW4gdGlsZXNUb0RyYXcpIHtcbiAgICAgICAgICB0aWxlID0gdGlsZXNUb0RyYXdbdGlsZUNvb3JkS2V5XTtcbiAgICAgICAgICB0aWxlRXh0ZW50ID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGUuZ2V0VGlsZUNvb3JkKCksIHRtcEV4dGVudCk7XG4gICAgICAgICAgeCA9ICh0aWxlRXh0ZW50WzBdIC0gaW1hZ2VFeHRlbnRbMF0pIC8gdGlsZVJlc29sdXRpb24gKiB0aWxlUGl4ZWxSYXRpbyAvIG92ZXJzYW1wbGluZztcbiAgICAgICAgICB5ID0gKGltYWdlRXh0ZW50WzNdIC0gdGlsZUV4dGVudFszXSkgLyB0aWxlUmVzb2x1dGlvbiAqIHRpbGVQaXhlbFJhdGlvIC8gb3ZlcnNhbXBsaW5nO1xuICAgICAgICAgIHcgPSBjdXJyZW50VGlsZVBpeGVsU2l6ZVswXSAqIGN1cnJlbnRTY2FsZSAvIG92ZXJzYW1wbGluZztcbiAgICAgICAgICBoID0gY3VycmVudFRpbGVQaXhlbFNpemVbMV0gKiBjdXJyZW50U2NhbGUgLyBvdmVyc2FtcGxpbmc7XG4gICAgICAgICAgdGhpcy5kcmF3VGlsZUltYWdlKHRpbGUsIGZyYW1lU3RhdGUsIGxheWVyU3RhdGUsIHgsIHksIHcsIGgsIHRpbGVHdXR0ZXIsIHogPT09IGN1cnJlbnRaKTtcbiAgICAgICAgICB0aGlzLnJlbmRlcmVkVGlsZXMucHVzaCh0aWxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLnJlbmRlcmVkUmV2aXNpb24gPSBzb3VyY2VSZXZpc2lvbjtcbiAgICAgIHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uID0gdGlsZVJlc29sdXRpb24gKiBwaXhlbFJhdGlvIC8gdGlsZVBpeGVsUmF0aW8gKiBvdmVyc2FtcGxpbmc7XG4gICAgICB0aGlzLnJlbmRlcmVkRXh0ZW50XyA9IGltYWdlRXh0ZW50O1xuICAgIH1cblxuICAgIHZhciBzY2FsZSA9IHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uIC8gdmlld1Jlc29sdXRpb247XG4gICAgdmFyIHRyYW5zZm9ybSA9IGNvbXBvc2VUcmFuc2Zvcm0odGhpcy5pbWFnZVRyYW5zZm9ybV8sXG4gICAgICBwaXhlbFJhdGlvICogc2l6ZVswXSAvIDIsIHBpeGVsUmF0aW8gKiBzaXplWzFdIC8gMixcbiAgICAgIHNjYWxlLCBzY2FsZSxcbiAgICAgIDAsXG4gICAgICAodGhpcy5yZW5kZXJlZEV4dGVudF9bMF0gLSB2aWV3Q2VudGVyWzBdKSAvIHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uICogcGl4ZWxSYXRpbyxcbiAgICAgICh2aWV3Q2VudGVyWzFdIC0gdGhpcy5yZW5kZXJlZEV4dGVudF9bM10pIC8gdGhpcy5yZW5kZXJlZFJlc29sdXRpb24gKiBwaXhlbFJhdGlvKTtcbiAgICBjb21wb3NlVHJhbnNmb3JtKHRoaXMuY29vcmRpbmF0ZVRvQ2FudmFzUGl4ZWxUcmFuc2Zvcm0sXG4gICAgICBwaXhlbFJhdGlvICogc2l6ZVswXSAvIDIgLSB0cmFuc2Zvcm1bNF0sIHBpeGVsUmF0aW8gKiBzaXplWzFdIC8gMiAtIHRyYW5zZm9ybVs1XSxcbiAgICAgIHBpeGVsUmF0aW8gLyB2aWV3UmVzb2x1dGlvbiwgLXBpeGVsUmF0aW8gLyB2aWV3UmVzb2x1dGlvbixcbiAgICAgIDAsXG4gICAgICAtdmlld0NlbnRlclswXSwgLXZpZXdDZW50ZXJbMV0pO1xuXG5cbiAgICB0aGlzLnVwZGF0ZVVzZWRUaWxlcyhmcmFtZVN0YXRlLnVzZWRUaWxlcywgdGlsZVNvdXJjZSwgeiwgdGlsZVJhbmdlKTtcbiAgICB0aGlzLm1hbmFnZVRpbGVQeXJhbWlkKGZyYW1lU3RhdGUsIHRpbGVTb3VyY2UsIHRpbGVHcmlkLCBwaXhlbFJhdGlvLFxuICAgICAgcHJvamVjdGlvbiwgZXh0ZW50LCB6LCB0aWxlTGF5ZXIuZ2V0UHJlbG9hZCgpKTtcbiAgICB0aGlzLnNjaGVkdWxlRXhwaXJlQ2FjaGUoZnJhbWVTdGF0ZSwgdGlsZVNvdXJjZSk7XG5cbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlZFRpbGVzLmxlbmd0aCA+IDA7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuU3RhdGV9IGxheWVyU3RhdGUgTGF5ZXIgc3RhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IExlZnQgb2YgdGhlIHRpbGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRvcCBvZiB0aGUgdGlsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHcgV2lkdGggb2YgdGhlIHRpbGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoIEhlaWdodCBvZiB0aGUgdGlsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGd1dHRlciBUaWxlIGd1dHRlci5cbiAgICogQHBhcmFtIHtib29sZWFufSB0cmFuc2l0aW9uIEFwcGx5IGFuIGFscGhhIHRyYW5zaXRpb24uXG4gICAqL1xuICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZHJhd1RpbGVJbWFnZSA9IGZ1bmN0aW9uIGRyYXdUaWxlSW1hZ2UgKHRpbGUsIGZyYW1lU3RhdGUsIGxheWVyU3RhdGUsIHgsIHksIHcsIGgsIGd1dHRlciwgdHJhbnNpdGlvbikge1xuICAgIHZhciBpbWFnZSA9IHRoaXMuZ2V0VGlsZUltYWdlKHRpbGUpO1xuICAgIGlmICghaW1hZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHVpZCA9IGdldFVpZCh0aGlzKTtcbiAgICB2YXIgYWxwaGEgPSB0cmFuc2l0aW9uID8gdGlsZS5nZXRBbHBoYSh1aWQsIGZyYW1lU3RhdGUudGltZSkgOiAxO1xuICAgIHZhciB0aWxlTGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0TGF5ZXIoKSk7XG4gICAgdmFyIHRpbGVTb3VyY2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aWxlTGF5ZXIuZ2V0U291cmNlKCkpO1xuICAgIGlmIChhbHBoYSA9PT0gMSAmJiAhdGlsZVNvdXJjZS5nZXRPcGFxdWUoZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbikpIHtcbiAgICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoeCwgeSwgdywgaCk7XG4gICAgfVxuICAgIHZhciBhbHBoYUNoYW5nZWQgPSBhbHBoYSAhPT0gdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhO1xuICAgIGlmIChhbHBoYUNoYW5nZWQpIHtcbiAgICAgIHRoaXMuY29udGV4dC5zYXZlKCk7XG4gICAgICB0aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGEgPSBhbHBoYTtcbiAgICB9XG4gICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgZ3V0dGVyLCBndXR0ZXIsXG4gICAgICBpbWFnZS53aWR0aCAtIDIgKiBndXR0ZXIsIGltYWdlLmhlaWdodCAtIDIgKiBndXR0ZXIsIHgsIHksIHcsIGgpO1xuXG4gICAgaWYgKGFscGhhQ2hhbmdlZCkge1xuICAgICAgdGhpcy5jb250ZXh0LnJlc3RvcmUoKTtcbiAgICB9XG4gICAgaWYgKGFscGhhICE9PSAxKSB7XG4gICAgICBmcmFtZVN0YXRlLmFuaW1hdGUgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAodHJhbnNpdGlvbikge1xuICAgICAgdGlsZS5lbmRUcmFuc2l0aW9uKHVpZCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gZ2V0SW1hZ2UgKCkge1xuICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgIHJldHVybiBjb250ZXh0ID8gY29udGV4dC5jYW52YXMgOiBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldEltYWdlVHJhbnNmb3JtID0gZnVuY3Rpb24gZ2V0SW1hZ2VUcmFuc2Zvcm0gKCkge1xuICAgIHJldHVybiB0aGlzLmltYWdlVHJhbnNmb3JtXztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBpbWFnZSBmcm9tIGEgdGlsZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBJbWFnZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldFRpbGVJbWFnZSA9IGZ1bmN0aW9uIGdldFRpbGVJbWFnZSAodGlsZSkge1xuICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGlsZSkuZ2V0SW1hZ2UoKTtcbiAgfTtcblxuICByZXR1cm4gQ2FudmFzVGlsZUxheWVyUmVuZGVyZXI7XG59KEludGVybWVkaWF0ZUNhbnZhc1JlbmRlcmVyKSk7XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdGhpcyByZW5kZXJlciBoYW5kbGVzIHRoZSBwcm92aWRlZCBsYXllci5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXIgVGhlIGNhbmRpZGF0ZSBsYXllci5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSByZW5kZXJlciBjYW4gcmVuZGVyIHRoZSBsYXllci5cbiAqL1xuQ2FudmFzVGlsZUxheWVyUmVuZGVyZXJbJ2hhbmRsZXMnXSA9IGZ1bmN0aW9uKGxheWVyKSB7XG4gIHJldHVybiBsYXllci5nZXRUeXBlKCkgPT09IExheWVyVHlwZS5USUxFO1xufTtcblxuXG4vKipcbiAqIENyZWF0ZSBhIGxheWVyIHJlbmRlcmVyLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdH0gbWFwUmVuZGVyZXIgVGhlIG1hcCByZW5kZXJlci5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXIgVGhlIGxheWVyIHRvIGJlIHJlbmRlcmVyZC5cbiAqIEByZXR1cm4ge0NhbnZhc1RpbGVMYXllclJlbmRlcmVyfSBUaGUgbGF5ZXIgcmVuZGVyZXIuXG4gKi9cbkNhbnZhc1RpbGVMYXllclJlbmRlcmVyWydjcmVhdGUnXSA9IGZ1bmN0aW9uKG1hcFJlbmRlcmVyLCBsYXllcikge1xuICByZXR1cm4gbmV3IENhbnZhc1RpbGVMYXllclJlbmRlcmVyKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXIpKTtcbn07XG5cblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uLy4uL2xheWVyL1RpbGUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9XG4gKi9cbkNhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRMYXllcjtcblxuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvUmVwbGF5R3JvdXBcbiAqL1xuaW1wb3J0IHthYnN0cmFjdH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgcmVwbGF5IGdyb3Vwcy5cbiAqL1xudmFyIFJlcGxheUdyb3VwID0gZnVuY3Rpb24gUmVwbGF5R3JvdXAgKCkge307XG5cblJlcGxheUdyb3VwLnByb3RvdHlwZS5nZXRSZXBsYXkgPSBmdW5jdGlvbiBnZXRSZXBsYXkgKHpJbmRleCwgcmVwbGF5VHlwZSkge1xuICByZXR1cm4gYWJzdHJhY3QoKTtcbn07XG5cbi8qKlxuICogQGFic3RyYWN0XG4gKiBAcmV0dXJuIHtib29sZWFufSBJcyBlbXB0eS5cbiAqL1xuUmVwbGF5R3JvdXAucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiBpc0VtcHR5ICgpIHtcbiAgcmV0dXJuIGFic3RyYWN0KCk7XG59O1xuXG4vKipcbiAqIEBhYnN0cmFjdFxuICogQHBhcmFtIHtib29sZWFufSBncm91cCBHcm91cCB3aXRoIHByZXZpb3VzIHJlcGxheVxuICogQHJldHVybiB7QXJyYXk8Kj59IFRoZSByZXN1bHRpbmcgaW5zdHJ1Y3Rpb24gZ3JvdXBcbiAqL1xuUmVwbGF5R3JvdXAucHJvdG90eXBlLmFkZERlY2x1dHRlciA9IGZ1bmN0aW9uIGFkZERlY2x1dHRlciAoZ3JvdXApIHtcbiAgcmV0dXJuIGFic3RyYWN0KCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBSZXBsYXlHcm91cDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVwbGF5R3JvdXAuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9SZXBsYXlUeXBlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIENJUkNMRTogJ0NpcmNsZScsXG4gIERFRkFVTFQ6ICdEZWZhdWx0JyxcbiAgSU1BR0U6ICdJbWFnZScsXG4gIExJTkVfU1RSSU5HOiAnTGluZVN0cmluZycsXG4gIFBPTFlHT046ICdQb2x5Z29uJyxcbiAgVEVYVDogJ1RleHQnXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZXBsYXlUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvbGVuZ3RoXG4gKi9cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IExlbmd0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVTdHJpbmdMZW5ndGgoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gIHZhciBsZW5ndGggPSAwO1xuICBmb3IgKHZhciBpID0gb2Zmc2V0ICsgc3RyaWRlOyBpIDwgZW5kOyBpICs9IHN0cmlkZSkge1xuICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgIGxlbmd0aCArPSBNYXRoLnNxcnQoKHgyIC0geDEpICogKHgyIC0geDEpICsgKHkyIC0geTEpICogKHkyIC0geTEpKTtcbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gIH1cbiAgcmV0dXJuIGxlbmd0aDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFBlcmltZXRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdMZW5ndGgoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gIHZhciBwZXJpbWV0ZXIgPSBsaW5lU3RyaW5nTGVuZ3RoKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gIHZhciBkeCA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdIC0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gIHZhciBkeSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXSAtIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgcGVyaW1ldGVyICs9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gIHJldHVybiBwZXJpbWV0ZXI7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxlbmd0aC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3RleHRwYXRoXG4gKi9cbmltcG9ydCB7bGVycH0gZnJvbSAnLi4vLi4vbWF0aC5qcyc7XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBQYXRoIHRvIHB1dCB0ZXh0IG9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBTdGFydCBvZmZzZXQgb2YgdGhlIGBmbGF0Q29vcmRpbmF0ZXNgLlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQgb2Zmc2V0IG9mIHRoZSBgZmxhdENvb3JkaW5hdGVzYC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGV4dCB0byBwbGFjZSBvbiB0aGUgcGF0aC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nKTpudW1iZXJ9IG1lYXN1cmUgTWVhc3VyZSBmdW5jdGlvbiByZXR1cm5pbmcgdGhlXG4gKiB3aWR0aCBvZiB0aGUgY2hhcmFjdGVyIHBhc3NlZCBhcyAxc3QgYXJndW1lbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnRNIG0gYWxvbmcgdGhlIHBhdGggd2hlcmUgdGhlIHRleHQgc3RhcnRzLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heEFuZ2xlIE1heCBhbmdsZSBiZXR3ZWVuIGFkamFjZW50IGNoYXJzIGluIHJhZGlhbnMuXG4gKiBAcmV0dXJuIHtBcnJheTxBcnJheTwqPj59IFRoZSByZXN1bHQgYXJyYXkgb2YgbnVsbCBpZiBgbWF4QW5nbGVgIHdhc1xuICogZXhjZWVkZWQuIEVudHJpZXMgb2YgdGhlIGFycmF5IGFyZSB4LCB5LCBhbmNob3JYLCBhbmdsZSwgY2h1bmsuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkcmF3VGV4dE9uUGF0aChcbiAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB0ZXh0LCBtZWFzdXJlLCBzdGFydE0sIG1heEFuZ2xlKSB7XG4gIHZhciByZXN1bHQgPSBbXTtcblxuICAvLyBLZWVwIHRleHQgdXByaWdodFxuICB2YXIgcmV2ZXJzZSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdID4gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG5cbiAgdmFyIG51bUNoYXJzID0gdGV4dC5sZW5ndGg7XG5cbiAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgdmFyIHNlZ21lbnRNID0gMDtcbiAgdmFyIHNlZ21lbnRMZW5ndGggPSBNYXRoLnNxcnQoTWF0aC5wb3coeDIgLSB4MSwgMikgKyBNYXRoLnBvdyh5MiAtIHkxLCAyKSk7XG5cbiAgdmFyIGNodW5rID0gJyc7XG4gIHZhciBjaHVua0xlbmd0aCA9IDA7XG4gIHZhciBkYXRhLCBpbmRleCwgcHJldmlvdXNBbmdsZTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1DaGFyczsgKytpKSB7XG4gICAgaW5kZXggPSByZXZlcnNlID8gbnVtQ2hhcnMgLSBpIC0gMSA6IGk7XG4gICAgdmFyIGNoYXIgPSB0ZXh0LmNoYXJBdChpbmRleCk7XG4gICAgY2h1bmsgPSByZXZlcnNlID8gY2hhciArIGNodW5rIDogY2h1bmsgKyBjaGFyO1xuICAgIHZhciBjaGFyTGVuZ3RoID0gbWVhc3VyZShjaHVuaykgLSBjaHVua0xlbmd0aDtcbiAgICBjaHVua0xlbmd0aCArPSBjaGFyTGVuZ3RoO1xuICAgIHZhciBjaGFyTSA9IHN0YXJ0TSArIGNoYXJMZW5ndGggLyAyO1xuICAgIHdoaWxlIChvZmZzZXQgPCBlbmQgLSBzdHJpZGUgJiYgc2VnbWVudE0gKyBzZWdtZW50TGVuZ3RoIDwgY2hhck0pIHtcbiAgICAgIHgxID0geDI7XG4gICAgICB5MSA9IHkyO1xuICAgICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICAgIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgIHNlZ21lbnRNICs9IHNlZ21lbnRMZW5ndGg7XG4gICAgICBzZWdtZW50TGVuZ3RoID0gTWF0aC5zcXJ0KE1hdGgucG93KHgyIC0geDEsIDIpICsgTWF0aC5wb3coeTIgLSB5MSwgMikpO1xuICAgIH1cbiAgICB2YXIgc2VnbWVudFBvcyA9IGNoYXJNIC0gc2VnbWVudE07XG4gICAgdmFyIGFuZ2xlID0gTWF0aC5hdGFuMih5MiAtIHkxLCB4MiAtIHgxKTtcbiAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgYW5nbGUgKz0gYW5nbGUgPiAwID8gLU1hdGguUEkgOiBNYXRoLlBJO1xuICAgIH1cbiAgICBpZiAocHJldmlvdXNBbmdsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YXIgZGVsdGEgPSBhbmdsZSAtIHByZXZpb3VzQW5nbGU7XG4gICAgICBkZWx0YSArPSAoZGVsdGEgPiBNYXRoLlBJKSA/IC0yICogTWF0aC5QSSA6IChkZWx0YSA8IC1NYXRoLlBJKSA/IDIgKiBNYXRoLlBJIDogMDtcbiAgICAgIGlmIChNYXRoLmFicyhkZWx0YSkgPiBtYXhBbmdsZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGludGVycG9sYXRlID0gc2VnbWVudFBvcyAvIHNlZ21lbnRMZW5ndGg7XG4gICAgdmFyIHggPSBsZXJwKHgxLCB4MiwgaW50ZXJwb2xhdGUpO1xuICAgIHZhciB5ID0gbGVycCh5MSwgeTIsIGludGVycG9sYXRlKTtcbiAgICBpZiAocHJldmlvdXNBbmdsZSA9PSBhbmdsZSkge1xuICAgICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgZGF0YVswXSA9IHg7XG4gICAgICAgIGRhdGFbMV0gPSB5O1xuICAgICAgICBkYXRhWzJdID0gY2hhckxlbmd0aCAvIDI7XG4gICAgICB9XG4gICAgICBkYXRhWzRdID0gY2h1bms7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNodW5rID0gY2hhcjtcbiAgICAgIGNodW5rTGVuZ3RoID0gY2hhckxlbmd0aDtcbiAgICAgIGRhdGEgPSBbeCwgeSwgY2hhckxlbmd0aCAvIDIsIGFuZ2xlLCBjaHVua107XG4gICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICByZXN1bHQudW5zaGlmdChkYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGRhdGEpO1xuICAgICAgfVxuICAgICAgcHJldmlvdXNBbmdsZSA9IGFuZ2xlO1xuICAgIH1cbiAgICBzdGFydE0gKz0gY2hhckxlbmd0aDtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD10ZXh0cGF0aC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhcy9JbnN0cnVjdGlvblxuICovXG5cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xudmFyIEluc3RydWN0aW9uID0ge1xuICBCRUdJTl9HRU9NRVRSWTogMCxcbiAgQkVHSU5fUEFUSDogMSxcbiAgQ0lSQ0xFOiAyLFxuICBDTE9TRV9QQVRIOiAzLFxuICBDVVNUT006IDQsXG4gIERSQVdfQ0hBUlM6IDUsXG4gIERSQVdfSU1BR0U6IDYsXG4gIEVORF9HRU9NRVRSWTogNyxcbiAgRklMTDogOCxcbiAgTU9WRV9UT19MSU5FX1RPOiA5LFxuICBTRVRfRklMTF9TVFlMRTogMTAsXG4gIFNFVF9TVFJPS0VfU1RZTEU6IDExLFxuICBTVFJPS0U6IDEyXG59O1xuXG5cbi8qKlxuICogQHR5cGUge0FycmF5PEluc3RydWN0aW9uPn1cbiAqL1xuZXhwb3J0IHZhciBmaWxsSW5zdHJ1Y3Rpb24gPSBbSW5zdHJ1Y3Rpb24uRklMTF07XG5cblxuLyoqXG4gKiBAdHlwZSB7QXJyYXk8SW5zdHJ1Y3Rpb24+fVxuICovXG5leHBvcnQgdmFyIHN0cm9rZUluc3RydWN0aW9uID0gW0luc3RydWN0aW9uLlNUUk9LRV07XG5cblxuLyoqXG4gKiBAdHlwZSB7QXJyYXk8SW5zdHJ1Y3Rpb24+fVxuICovXG5leHBvcnQgdmFyIGJlZ2luUGF0aEluc3RydWN0aW9uID0gW0luc3RydWN0aW9uLkJFR0lOX1BBVEhdO1xuXG5cbi8qKlxuICogQHR5cGUge0FycmF5PEluc3RydWN0aW9uPn1cbiAqL1xuZXhwb3J0IHZhciBjbG9zZVBhdGhJbnN0cnVjdGlvbiA9IFtJbnN0cnVjdGlvbi5DTE9TRV9QQVRIXTtcblxuXG5leHBvcnQgZGVmYXVsdCBJbnN0cnVjdGlvbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW5zdHJ1Y3Rpb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9yZXBsYXlcbiAqL1xuaW1wb3J0IFJlcGxheVR5cGUgZnJvbSAnLi9SZXBsYXlUeXBlLmpzJztcblxuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PFJlcGxheVR5cGU+fVxuICovXG5leHBvcnQgdmFyIE9SREVSID0gW1xuICBSZXBsYXlUeXBlLlBPTFlHT04sXG4gIFJlcGxheVR5cGUuQ0lSQ0xFLFxuICBSZXBsYXlUeXBlLkxJTkVfU1RSSU5HLFxuICBSZXBsYXlUeXBlLklNQUdFLFxuICBSZXBsYXlUeXBlLlRFWFQsXG4gIFJlcGxheVR5cGUuREVGQVVMVFxuXTtcblxuLyoqXG4gKiBAY29uc3RcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgVEVYVF9BTElHTiA9IHt9O1xuVEVYVF9BTElHTlsnbGVmdCddID0gMDtcblRFWFRfQUxJR05bJ2VuZCddID0gMDtcblRFWFRfQUxJR05bJ2NlbnRlciddID0gMC41O1xuVEVYVF9BTElHTlsncmlnaHQnXSA9IDE7XG5URVhUX0FMSUdOWydzdGFydCddID0gMTtcblRFWFRfQUxJR05bJ3RvcCddID0gMDtcblRFWFRfQUxJR05bJ21pZGRsZSddID0gMC41O1xuVEVYVF9BTElHTlsnaGFuZ2luZyddID0gMC4yO1xuVEVYVF9BTElHTlsnYWxwaGFiZXRpYyddID0gMC44O1xuVEVYVF9BTElHTlsnaWRlb2dyYXBoaWMnXSA9IDAuODtcblRFWFRfQUxJR05bJ2JvdHRvbSddID0gMTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVwbGF5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvY2FudmFzL1JlcGxheVxuICovXG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi4vLi4vdXRpbC5qcyc7XG5pbXBvcnQge2VxdWFscywgcmV2ZXJzZVN1YkFycmF5fSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG5pbXBvcnQge2FzQ29sb3JMaWtlfSBmcm9tICcuLi8uLi9jb2xvcmxpa2UuanMnO1xuaW1wb3J0IHtidWZmZXIsIGNsb25lLCBjb29yZGluYXRlUmVsYXRpb25zaGlwLCBjcmVhdGVFbXB0eSwgY3JlYXRlT3JVcGRhdGUsXG4gIGNyZWF0ZU9yVXBkYXRlRW1wdHksIGV4dGVuZCwgZXh0ZW5kQ29vcmRpbmF0ZSwgaW50ZXJzZWN0c30gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCBSZWxhdGlvbnNoaXAgZnJvbSAnLi4vLi4vZXh0ZW50L1JlbGF0aW9uc2hpcC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4uLy4uL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCB7aW5mbGF0ZUNvb3JkaW5hdGVzLCBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheSwgaW5mbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheX0gZnJvbSAnLi4vLi4vZ2VvbS9mbGF0L2luZmxhdGUuanMnO1xuaW1wb3J0IHtsaW5lU3RyaW5nTGVuZ3RofSBmcm9tICcuLi8uLi9nZW9tL2ZsYXQvbGVuZ3RoLmpzJztcbmltcG9ydCB7ZHJhd1RleHRPblBhdGh9IGZyb20gJy4uLy4uL2dlb20vZmxhdC90ZXh0cGF0aC5qcyc7XG5pbXBvcnQge3RyYW5zZm9ybTJEfSBmcm9tICcuLi8uLi9nZW9tL2ZsYXQvdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7Q0FOVkFTX0xJTkVfREFTSH0gZnJvbSAnLi4vLi4vaGFzLmpzJztcbmltcG9ydCB7aXNFbXB0eX0gZnJvbSAnLi4vLi4vb2JqLmpzJztcbmltcG9ydCBWZWN0b3JDb250ZXh0IGZyb20gJy4uL1ZlY3RvckNvbnRleHQuanMnO1xuaW1wb3J0IHtkcmF3SW1hZ2UsIHJlc2V0VHJhbnNmb3JtLCBkZWZhdWx0UGFkZGluZywgZGVmYXVsdEZpbGxTdHlsZSwgZGVmYXVsdFN0cm9rZVN0eWxlLFxuICBkZWZhdWx0TWl0ZXJMaW1pdCwgZGVmYXVsdExpbmVXaWR0aCwgZGVmYXVsdExpbmVKb2luLCBkZWZhdWx0TGluZURhc2hPZmZzZXQsXG4gIGRlZmF1bHRMaW5lRGFzaCwgZGVmYXVsdExpbmVDYXB9IGZyb20gJy4uL2NhbnZhcy5qcyc7XG5pbXBvcnQgQ2FudmFzSW5zdHJ1Y3Rpb24gZnJvbSAnLi9JbnN0cnVjdGlvbi5qcyc7XG5pbXBvcnQge1RFWFRfQUxJR059IGZyb20gJy4uL3JlcGxheS5qcyc7XG5pbXBvcnQge1xuICBjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLFxuICBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sXG4gIGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLFxuICBzZXRGcm9tQXJyYXkgYXMgdHJhbnNmb3JtU2V0RnJvbUFycmF5XG59IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xudmFyIHRtcEV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG5cblxuLyoqXG4gKiBAdHlwZSB7IWltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gKi9cbnZhciB0bXBUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuXG52YXIgQ2FudmFzUmVwbGF5ID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoVmVjdG9yQ29udGV4dCkge1xuICBmdW5jdGlvbiBDYW52YXNSZXBsYXkodG9sZXJhbmNlLCBtYXhFeHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIG92ZXJsYXBzLCBkZWNsdXR0ZXJUcmVlKSB7XG4gICAgVmVjdG9yQ29udGV4dC5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgez99XG4gICAgICovXG4gICAgdGhpcy5kZWNsdXR0ZXJUcmVlID0gZGVjbHV0dGVyVHJlZTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMudG9sZXJhbmNlID0gdG9sZXJhbmNlO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAqL1xuICAgIHRoaXMubWF4RXh0ZW50ID0gbWF4RXh0ZW50O1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMub3ZlcmxhcHMgPSBvdmVybGFwcztcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucGl4ZWxSYXRpbyA9IHBpeGVsUmF0aW87XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heExpbmVXaWR0aCA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQGNvbnN0XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmFsaWduRmlsbF87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTwqPn1cbiAgICAgKi9cbiAgICB0aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjFfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PCo+fVxuICAgICAqL1xuICAgIHRoaXMuYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgKi9cbiAgICB0aGlzLmJ1ZmZlcmVkTWF4RXh0ZW50XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge0FycmF5PCo+fVxuICAgICAqL1xuICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5jb29yZGluYXRlcyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxudW1iZXIsaW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT58QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+fVxuICAgICAqL1xuICAgIHRoaXMuY29vcmRpbmF0ZUNhY2hlXyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IWltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZFRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7QXJyYXk8Kj59XG4gICAgICovXG4gICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMgPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5waXhlbENvb3JkaW5hdGVzXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3Ryb2tlU3RhdGV9XG4gICAgICovXG4gICAgdGhpcy5zdGF0ZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdHJva2VTdGF0ZX0gKi8gKHt9KTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnZpZXdSb3RhdGlvbl8gPSAwO1xuXG4gIH1cblxuICBpZiAoIFZlY3RvckNvbnRleHQgKSBDYW52YXNSZXBsYXkuX19wcm90b19fID0gVmVjdG9yQ29udGV4dDtcbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFZlY3RvckNvbnRleHQgJiYgVmVjdG9yQ29udGV4dC5wcm90b3R5cGUgKTtcbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc1JlcGxheTtcblxuICAvKipcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHAxIDFzdCBwb2ludCBvZiB0aGUgYmFja2dyb3VuZCBib3guXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwMiAybmQgcG9pbnQgb2YgdGhlIGJhY2tncm91bmQgYm94LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcDMgM3JkIHBvaW50IG9mIHRoZSBiYWNrZ3JvdW5kIGJveC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHA0IDR0aCBwb2ludCBvZiB0aGUgYmFja2dyb3VuZCBib3guXG4gICAqIEBwYXJhbSB7QXJyYXk8Kj59IGZpbGxJbnN0cnVjdGlvbiBGaWxsIGluc3RydWN0aW9uLlxuICAgKiBAcGFyYW0ge0FycmF5PCo+fSBzdHJva2VJbnN0cnVjdGlvbiBTdHJva2UgaW5zdHJ1Y3Rpb24uXG4gICAqL1xuICBDYW52YXNSZXBsYXkucHJvdG90eXBlLnJlcGxheVRleHRCYWNrZ3JvdW5kXyA9IGZ1bmN0aW9uIHJlcGxheVRleHRCYWNrZ3JvdW5kXyAoY29udGV4dCwgcDEsIHAyLCBwMywgcDQsIGZpbGxJbnN0cnVjdGlvbiwgc3Ryb2tlSW5zdHJ1Y3Rpb24pIHtcbiAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgIGNvbnRleHQubW92ZVRvLmFwcGx5KGNvbnRleHQsIHAxKTtcbiAgICBjb250ZXh0LmxpbmVUby5hcHBseShjb250ZXh0LCBwMik7XG4gICAgY29udGV4dC5saW5lVG8uYXBwbHkoY29udGV4dCwgcDMpO1xuICAgIGNvbnRleHQubGluZVRvLmFwcGx5KGNvbnRleHQsIHA0KTtcbiAgICBjb250ZXh0LmxpbmVUby5hcHBseShjb250ZXh0LCBwMSk7XG4gICAgaWYgKGZpbGxJbnN0cnVjdGlvbikge1xuICAgICAgdGhpcy5hbGlnbkZpbGxfID0gLyoqIEB0eXBlIHtib29sZWFufSAqLyAoZmlsbEluc3RydWN0aW9uWzJdKTtcbiAgICAgIHRoaXMuZmlsbF8oY29udGV4dCk7XG4gICAgfVxuICAgIGlmIChzdHJva2VJbnN0cnVjdGlvbikge1xuICAgICAgdGhpcy5zZXRTdHJva2VTdHlsZV8oY29udGV4dCwgLyoqIEB0eXBlIHtBcnJheTwqPn0gKi8gKHN0cm9rZUluc3RydWN0aW9uKSk7XG4gICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICogQHBhcmFtIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IGltYWdlIEltYWdlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gYW5jaG9yWCBBbmNob3IgWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGFuY2hvclkgQW5jaG9yIFkuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3VwfSBkZWNsdXR0ZXJHcm91cCBEZWNsdXR0ZXIgZ3JvdXAuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBPcGFjaXR5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gb3JpZ2luWCBPcmlnaW4gWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9yaWdpblkgT3JpZ2luIFkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHNjYWxlIFNjYWxlLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNuYXBUb1BpeGVsIFNuYXAgdG8gcGl4ZWwuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBXaWR0aC5cbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBwYWRkaW5nIFBhZGRpbmcuXG4gICAqIEBwYXJhbSB7QXJyYXk8Kj59IGZpbGxJbnN0cnVjdGlvbiBGaWxsIGluc3RydWN0aW9uLlxuICAgKiBAcGFyYW0ge0FycmF5PCo+fSBzdHJva2VJbnN0cnVjdGlvbiBTdHJva2UgaW5zdHJ1Y3Rpb24uXG4gICAqL1xuICBDYW52YXNSZXBsYXkucHJvdG90eXBlLnJlcGxheUltYWdlXyA9IGZ1bmN0aW9uIHJlcGxheUltYWdlXyAoXG4gICAgY29udGV4dCxcbiAgICB4LFxuICAgIHksXG4gICAgaW1hZ2UsXG4gICAgYW5jaG9yWCxcbiAgICBhbmNob3JZLFxuICAgIGRlY2x1dHRlckdyb3VwLFxuICAgIGhlaWdodCxcbiAgICBvcGFjaXR5LFxuICAgIG9yaWdpblgsXG4gICAgb3JpZ2luWSxcbiAgICByb3RhdGlvbixcbiAgICBzY2FsZSxcbiAgICBzbmFwVG9QaXhlbCxcbiAgICB3aWR0aCxcbiAgICBwYWRkaW5nLFxuICAgIGZpbGxJbnN0cnVjdGlvbixcbiAgICBzdHJva2VJbnN0cnVjdGlvblxuICApIHtcbiAgICB2YXIgZmlsbFN0cm9rZSA9IGZpbGxJbnN0cnVjdGlvbiB8fCBzdHJva2VJbnN0cnVjdGlvbjtcbiAgICBhbmNob3JYICo9IHNjYWxlO1xuICAgIGFuY2hvclkgKj0gc2NhbGU7XG4gICAgeCAtPSBhbmNob3JYO1xuICAgIHkgLT0gYW5jaG9yWTtcblxuICAgIHZhciB3ID0gKHdpZHRoICsgb3JpZ2luWCA+IGltYWdlLndpZHRoKSA/IGltYWdlLndpZHRoIC0gb3JpZ2luWCA6IHdpZHRoO1xuICAgIHZhciBoID0gKGhlaWdodCArIG9yaWdpblkgPiBpbWFnZS5oZWlnaHQpID8gaW1hZ2UuaGVpZ2h0IC0gb3JpZ2luWSA6IGhlaWdodDtcbiAgICB2YXIgYm94VyA9IHBhZGRpbmdbM10gKyB3ICogc2NhbGUgKyBwYWRkaW5nWzFdO1xuICAgIHZhciBib3hIID0gcGFkZGluZ1swXSArIGggKiBzY2FsZSArIHBhZGRpbmdbMl07XG4gICAgdmFyIGJveFggPSB4IC0gcGFkZGluZ1szXTtcbiAgICB2YXIgYm94WSA9IHkgLSBwYWRkaW5nWzBdO1xuXG4gICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovXG4gICAgdmFyIHAxO1xuICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSAqL1xuICAgIHZhciBwMjtcbiAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gKi9cbiAgICB2YXIgcDM7XG4gICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovXG4gICAgdmFyIHA0O1xuICAgIGlmIChmaWxsU3Ryb2tlIHx8IHJvdGF0aW9uICE9PSAwKSB7XG4gICAgICBwMSA9IFtib3hYLCBib3hZXTtcbiAgICAgIHAyID0gW2JveFggKyBib3hXLCBib3hZXTtcbiAgICAgIHAzID0gW2JveFggKyBib3hXLCBib3hZICsgYm94SF07XG4gICAgICBwNCA9IFtib3hYLCBib3hZICsgYm94SF07XG4gICAgfVxuXG4gICAgdmFyIHRyYW5zZm9ybSA9IG51bGw7XG4gICAgaWYgKHJvdGF0aW9uICE9PSAwKSB7XG4gICAgICB2YXIgY2VudGVyWCA9IHggKyBhbmNob3JYO1xuICAgICAgdmFyIGNlbnRlclkgPSB5ICsgYW5jaG9yWTtcbiAgICAgIHRyYW5zZm9ybSA9IGNvbXBvc2VUcmFuc2Zvcm0odG1wVHJhbnNmb3JtLCBjZW50ZXJYLCBjZW50ZXJZLCAxLCAxLCByb3RhdGlvbiwgLWNlbnRlclgsIC1jZW50ZXJZKTtcblxuICAgICAgY3JlYXRlT3JVcGRhdGVFbXB0eSh0bXBFeHRlbnQpO1xuICAgICAgZXh0ZW5kQ29vcmRpbmF0ZSh0bXBFeHRlbnQsIGFwcGx5VHJhbnNmb3JtKHRtcFRyYW5zZm9ybSwgcDEpKTtcbiAgICAgIGV4dGVuZENvb3JkaW5hdGUodG1wRXh0ZW50LCBhcHBseVRyYW5zZm9ybSh0bXBUcmFuc2Zvcm0sIHAyKSk7XG4gICAgICBleHRlbmRDb29yZGluYXRlKHRtcEV4dGVudCwgYXBwbHlUcmFuc2Zvcm0odG1wVHJhbnNmb3JtLCBwMykpO1xuICAgICAgZXh0ZW5kQ29vcmRpbmF0ZSh0bXBFeHRlbnQsIGFwcGx5VHJhbnNmb3JtKHRtcFRyYW5zZm9ybSwgcDQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3JlYXRlT3JVcGRhdGUoYm94WCwgYm94WSwgYm94WCArIGJveFcsIGJveFkgKyBib3hILCB0bXBFeHRlbnQpO1xuICAgIH1cbiAgICB2YXIgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgdmFyIHN0cm9rZVBhZGRpbmcgPSBzdHJva2VJbnN0cnVjdGlvbiA/IChzdHJva2VJbnN0cnVjdGlvblsyXSAqIHNjYWxlIC8gMikgOiAwO1xuICAgIHZhciBpbnRlcnNlY3RzID1cbiAgICAgICAgdG1wRXh0ZW50WzBdIC0gc3Ryb2tlUGFkZGluZyA8PSBjYW52YXMud2lkdGggJiYgdG1wRXh0ZW50WzJdICsgc3Ryb2tlUGFkZGluZyA+PSAwICYmXG4gICAgICAgIHRtcEV4dGVudFsxXSAtIHN0cm9rZVBhZGRpbmcgPD0gY2FudmFzLmhlaWdodCAmJiB0bXBFeHRlbnRbM10gKyBzdHJva2VQYWRkaW5nID49IDA7XG5cbiAgICBpZiAoc25hcFRvUGl4ZWwpIHtcbiAgICAgIHggPSBNYXRoLnJvdW5kKHgpO1xuICAgICAgeSA9IE1hdGgucm91bmQoeSk7XG4gICAgfVxuXG4gICAgaWYgKGRlY2x1dHRlckdyb3VwKSB7XG4gICAgICBpZiAoIWludGVyc2VjdHMgJiYgZGVjbHV0dGVyR3JvdXBbNF0gPT0gMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBleHRlbmQoZGVjbHV0dGVyR3JvdXAsIHRtcEV4dGVudCk7XG4gICAgICB2YXIgZGVjbHV0dGVyQXJncyA9IGludGVyc2VjdHMgP1xuICAgICAgICBbY29udGV4dCwgdHJhbnNmb3JtID8gdHJhbnNmb3JtLnNsaWNlKDApIDogbnVsbCwgb3BhY2l0eSwgaW1hZ2UsIG9yaWdpblgsIG9yaWdpblksIHcsIGgsIHgsIHksIHNjYWxlXSA6XG4gICAgICAgIG51bGw7XG4gICAgICBpZiAoZGVjbHV0dGVyQXJncyAmJiBmaWxsU3Ryb2tlKSB7XG4gICAgICAgIGRlY2x1dHRlckFyZ3MucHVzaChmaWxsSW5zdHJ1Y3Rpb24sIHN0cm9rZUluc3RydWN0aW9uLCBwMSwgcDIsIHAzLCBwNCk7XG4gICAgICB9XG4gICAgICBkZWNsdXR0ZXJHcm91cC5wdXNoKGRlY2x1dHRlckFyZ3MpO1xuICAgIH0gZWxzZSBpZiAoaW50ZXJzZWN0cykge1xuICAgICAgaWYgKGZpbGxTdHJva2UpIHtcbiAgICAgICAgdGhpcy5yZXBsYXlUZXh0QmFja2dyb3VuZF8oY29udGV4dCwgcDEsIHAyLCBwMywgcDQsXG4gICAgICAgICAgLyoqIEB0eXBlIHtBcnJheTwqPn0gKi8gKGZpbGxJbnN0cnVjdGlvbiksXG4gICAgICAgICAgLyoqIEB0eXBlIHtBcnJheTwqPn0gKi8gKHN0cm9rZUluc3RydWN0aW9uKSk7XG4gICAgICB9XG4gICAgICBkcmF3SW1hZ2UoY29udGV4dCwgdHJhbnNmb3JtLCBvcGFjaXR5LCBpbWFnZSwgb3JpZ2luWCwgb3JpZ2luWSwgdywgaCwgeCwgeSwgc2NhbGUpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGRhc2hBcnJheSBEYXNoIGFycmF5LlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBEYXNoIGFycmF5IHdpdGggcGl4ZWwgcmF0aW8gYXBwbGllZFxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5hcHBseVBpeGVsUmF0aW8gPSBmdW5jdGlvbiBhcHBseVBpeGVsUmF0aW8gKGRhc2hBcnJheSkge1xuICAgIHZhciBwaXhlbFJhdGlvID0gdGhpcy5waXhlbFJhdGlvO1xuICAgIHJldHVybiBwaXhlbFJhdGlvID09IDEgPyBkYXNoQXJyYXkgOiBkYXNoQXJyYXkubWFwKGZ1bmN0aW9uKGRhc2gpIHtcbiAgICAgIHJldHVybiBkYXNoICogcGl4ZWxSYXRpbztcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAgICogQHBhcmFtIHtib29sZWFufSBjbG9zZWQgTGFzdCBpbnB1dCBjb29yZGluYXRlIGVxdWFscyBmaXJzdC5cbiAgICogQHBhcmFtIHtib29sZWFufSBza2lwRmlyc3QgU2tpcCBmaXJzdCBjb29yZGluYXRlLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEByZXR1cm4ge251bWJlcn0gTXkgZW5kLlxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5hcHBlbmRGbGF0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBhcHBlbmRGbGF0Q29vcmRpbmF0ZXMgKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgY2xvc2VkLCBza2lwRmlyc3QpIHtcblxuICAgIHZhciBteUVuZCA9IHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgIHZhciBleHRlbnQgPSB0aGlzLmdldEJ1ZmZlcmVkTWF4RXh0ZW50KCk7XG4gICAgaWYgKHNraXBGaXJzdCkge1xuICAgICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICB9XG4gICAgdmFyIGxhc3RDb29yZCA9IFtmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdXTtcbiAgICB2YXIgbmV4dENvb3JkID0gW05hTiwgTmFOXTtcbiAgICB2YXIgc2tpcHBlZCA9IHRydWU7XG5cbiAgICB2YXIgaSwgbGFzdFJlbCwgbmV4dFJlbDtcbiAgICBmb3IgKGkgPSBvZmZzZXQgKyBzdHJpZGU7IGkgPCBlbmQ7IGkgKz0gc3RyaWRlKSB7XG4gICAgICBuZXh0Q29vcmRbMF0gPSBmbGF0Q29vcmRpbmF0ZXNbaV07XG4gICAgICBuZXh0Q29vcmRbMV0gPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgICAgbmV4dFJlbCA9IGNvb3JkaW5hdGVSZWxhdGlvbnNoaXAoZXh0ZW50LCBuZXh0Q29vcmQpO1xuICAgICAgaWYgKG5leHRSZWwgIT09IGxhc3RSZWwpIHtcbiAgICAgICAgaWYgKHNraXBwZWQpIHtcbiAgICAgICAgICB0aGlzLmNvb3JkaW5hdGVzW215RW5kKytdID0gbGFzdENvb3JkWzBdO1xuICAgICAgICAgIHRoaXMuY29vcmRpbmF0ZXNbbXlFbmQrK10gPSBsYXN0Q29vcmRbMV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb29yZGluYXRlc1tteUVuZCsrXSA9IG5leHRDb29yZFswXTtcbiAgICAgICAgdGhpcy5jb29yZGluYXRlc1tteUVuZCsrXSA9IG5leHRDb29yZFsxXTtcbiAgICAgICAgc2tpcHBlZCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChuZXh0UmVsID09PSBSZWxhdGlvbnNoaXAuSU5URVJTRUNUSU5HKSB7XG4gICAgICAgIHRoaXMuY29vcmRpbmF0ZXNbbXlFbmQrK10gPSBuZXh0Q29vcmRbMF07XG4gICAgICAgIHRoaXMuY29vcmRpbmF0ZXNbbXlFbmQrK10gPSBuZXh0Q29vcmRbMV07XG4gICAgICAgIHNraXBwZWQgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNraXBwZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgbGFzdENvb3JkWzBdID0gbmV4dENvb3JkWzBdO1xuICAgICAgbGFzdENvb3JkWzFdID0gbmV4dENvb3JkWzFdO1xuICAgICAgbGFzdFJlbCA9IG5leHRSZWw7XG4gICAgfVxuXG4gICAgLy8gTGFzdCBjb29yZGluYXRlIGVxdWFscyBmaXJzdCBvciBvbmx5IG9uZSBwb2ludCB0byBhcHBlbmQ6XG4gICAgaWYgKChjbG9zZWQgJiYgc2tpcHBlZCkgfHwgaSA9PT0gb2Zmc2V0ICsgc3RyaWRlKSB7XG4gICAgICB0aGlzLmNvb3JkaW5hdGVzW215RW5kKytdID0gbGFzdENvb3JkWzBdO1xuICAgICAgdGhpcy5jb29yZGluYXRlc1tteUVuZCsrXSA9IGxhc3RDb29yZFsxXTtcbiAgICB9XG4gICAgcmV0dXJuIG15RW5kO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHJlcGxheUVuZHMgUmVwbGF5IGVuZHMuXG4gICAqIEByZXR1cm4ge251bWJlcn0gT2Zmc2V0LlxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5kcmF3Q3VzdG9tQ29vcmRpbmF0ZXNfID0gZnVuY3Rpb24gZHJhd0N1c3RvbUNvb3JkaW5hdGVzXyAoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgcmVwbGF5RW5kcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICB2YXIgcmVwbGF5RW5kID0gdGhpcy5hcHBlbmRGbGF0Q29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgcmVwbGF5RW5kcy5wdXNoKHJlcGxheUVuZCk7XG4gICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jLlxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5kcmF3Q3VzdG9tID0gZnVuY3Rpb24gZHJhd0N1c3RvbSAoZ2VvbWV0cnksIGZlYXR1cmUsIHJlbmRlcmVyKSB7XG4gICAgdGhpcy5iZWdpbkdlb21ldHJ5KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICB2YXIgdHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcbiAgICB2YXIgc3RyaWRlID0gZ2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgdmFyIHJlcGxheUJlZ2luID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcywgcmVwbGF5RW5kLCByZXBsYXlFbmRzLCByZXBsYXlFbmRzcztcbiAgICB2YXIgb2Zmc2V0O1xuICAgIGlmICh0eXBlID09IEdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OKSB7XG4gICAgICBnZW9tZXRyeSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aVBvbHlnb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KTtcbiAgICAgIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICByZXBsYXlFbmRzcyA9IFtdO1xuICAgICAgdmFyIGVuZHNzID0gZ2VvbWV0cnkuZ2V0RW5kc3MoKTtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBteUVuZHMgPSBbXTtcbiAgICAgICAgb2Zmc2V0ID0gdGhpcy5kcmF3Q3VzdG9tQ29vcmRpbmF0ZXNfKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzc1tpXSwgc3RyaWRlLCBteUVuZHMpO1xuICAgICAgICByZXBsYXlFbmRzcy5wdXNoKG15RW5kcyk7XG4gICAgICB9XG4gICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKFtDYW52YXNJbnN0cnVjdGlvbi5DVVNUT00sXG4gICAgICAgIHJlcGxheUJlZ2luLCByZXBsYXlFbmRzcywgZ2VvbWV0cnksIHJlbmRlcmVyLCBpbmZsYXRlTXVsdGlDb29yZGluYXRlc0FycmF5XSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09IEdlb21ldHJ5VHlwZS5QT0xZR09OIHx8IHR5cGUgPT0gR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HKSB7XG4gICAgICByZXBsYXlFbmRzID0gW107XG4gICAgICBmbGF0Q29vcmRpbmF0ZXMgPSAodHlwZSA9PSBHZW9tZXRyeVR5cGUuUE9MWUdPTikgP1xuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCkgOlxuICAgICAgICBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIG9mZnNldCA9IHRoaXMuZHJhd0N1c3RvbUNvb3JkaW5hdGVzXyhmbGF0Q29vcmRpbmF0ZXMsIDAsXG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRFbmRzKCksXG4gICAgICAgIHN0cmlkZSwgcmVwbGF5RW5kcyk7XG4gICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKFtDYW52YXNJbnN0cnVjdGlvbi5DVVNUT00sXG4gICAgICAgIHJlcGxheUJlZ2luLCByZXBsYXlFbmRzLCBnZW9tZXRyeSwgcmVuZGVyZXIsIGluZmxhdGVDb29yZGluYXRlc0FycmF5XSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09IEdlb21ldHJ5VHlwZS5MSU5FX1NUUklORyB8fCB0eXBlID09IEdlb21ldHJ5VHlwZS5NVUxUSV9QT0lOVCkge1xuICAgICAgZmxhdENvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICByZXBsYXlFbmQgPSB0aGlzLmFwcGVuZEZsYXRDb29yZGluYXRlcyhcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsIGZhbHNlLCBmYWxzZSk7XG4gICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKFtDYW52YXNJbnN0cnVjdGlvbi5DVVNUT00sXG4gICAgICAgIHJlcGxheUJlZ2luLCByZXBsYXlFbmQsIGdlb21ldHJ5LCByZW5kZXJlciwgaW5mbGF0ZUNvb3JkaW5hdGVzXSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09IEdlb21ldHJ5VHlwZS5QT0lOVCkge1xuICAgICAgZmxhdENvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICB0aGlzLmNvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzBdLCBmbGF0Q29vcmRpbmF0ZXNbMV0pO1xuICAgICAgcmVwbGF5RW5kID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKFtDYW52YXNJbnN0cnVjdGlvbi5DVVNUT00sXG4gICAgICAgIHJlcGxheUJlZ2luLCByZXBsYXlFbmQsIGdlb21ldHJ5LCByZW5kZXJlcl0pO1xuICAgIH1cbiAgICB0aGlzLmVuZEdlb21ldHJ5KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgfTtcblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICovXG4gIENhbnZhc1JlcGxheS5wcm90b3R5cGUuYmVnaW5HZW9tZXRyeSA9IGZ1bmN0aW9uIGJlZ2luR2VvbWV0cnkgKGdlb21ldHJ5LCBmZWF0dXJlKSB7XG4gICAgdGhpcy5iZWdpbkdlb21ldHJ5SW5zdHJ1Y3Rpb24xXyA9IFtDYW52YXNJbnN0cnVjdGlvbi5CRUdJTl9HRU9NRVRSWSwgZmVhdHVyZSwgMF07XG4gICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaCh0aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjFfKTtcbiAgICB0aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjJfID0gW0NhbnZhc0luc3RydWN0aW9uLkJFR0lOX0dFT01FVFJZLCBmZWF0dXJlLCAwXTtcbiAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKHRoaXMuYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMl8pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICovXG4gIENhbnZhc1JlcGxheS5wcm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24gZmluaXNoICgpIHt9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5maWxsXyA9IGZ1bmN0aW9uIGZpbGxfIChjb250ZXh0KSB7XG4gICAgaWYgKHRoaXMuYWxpZ25GaWxsXykge1xuICAgICAgdmFyIG9yaWdpbiA9IGFwcGx5VHJhbnNmb3JtKHRoaXMucmVuZGVyZWRUcmFuc2Zvcm1fLCBbMCwgMF0pO1xuICAgICAgdmFyIHJlcGVhdFNpemUgPSA1MTIgKiB0aGlzLnBpeGVsUmF0aW87XG4gICAgICBjb250ZXh0LnRyYW5zbGF0ZShvcmlnaW5bMF0gJSByZXBlYXRTaXplLCBvcmlnaW5bMV0gJSByZXBlYXRTaXplKTtcbiAgICAgIGNvbnRleHQucm90YXRlKHRoaXMudmlld1JvdGF0aW9uXyk7XG4gICAgfVxuICAgIGNvbnRleHQuZmlsbCgpO1xuICAgIGlmICh0aGlzLmFsaWduRmlsbF8pIHtcbiAgICAgIGNvbnRleHQuc2V0VHJhbnNmb3JtLmFwcGx5KGNvbnRleHQsIHJlc2V0VHJhbnNmb3JtKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7QXJyYXk8Kj59IGluc3RydWN0aW9uIEluc3RydWN0aW9uLlxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5zZXRTdHJva2VTdHlsZV8gPSBmdW5jdGlvbiBzZXRTdHJva2VTdHlsZV8gKGNvbnRleHQsIGluc3RydWN0aW9uKSB7XG4gICAgY29udGV4dC5zdHJva2VTdHlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gKi8gKGluc3RydWN0aW9uWzFdKTtcbiAgICBjb250ZXh0LmxpbmVXaWR0aCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMl0pO1xuICAgIGNvbnRleHQubGluZUNhcCA9IC8qKiBAdHlwZSB7Q2FudmFzTGluZUNhcH0gKi8gKGluc3RydWN0aW9uWzNdKTtcbiAgICBjb250ZXh0LmxpbmVKb2luID0gLyoqIEB0eXBlIHtDYW52YXNMaW5lSm9pbn0gKi8gKGluc3RydWN0aW9uWzRdKTtcbiAgICBjb250ZXh0Lm1pdGVyTGltaXQgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzVdKTtcbiAgICBpZiAoQ0FOVkFTX0xJTkVfREFTSCkge1xuICAgICAgY29udGV4dC5saW5lRGFzaE9mZnNldCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bN10pO1xuICAgICAgY29udGV4dC5zZXRMaW5lRGFzaCgvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovIChpbnN0cnVjdGlvbls2XSkpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXB9IGRlY2x1dHRlckdyb3VwIERlY2x1dHRlciBncm91cC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAqL1xuICBDYW52YXNSZXBsYXkucHJvdG90eXBlLnJlbmRlckRlY2x1dHRlcl8gPSBmdW5jdGlvbiByZW5kZXJEZWNsdXR0ZXJfIChkZWNsdXR0ZXJHcm91cCwgZmVhdHVyZSkge1xuICAgIGlmIChkZWNsdXR0ZXJHcm91cCAmJiBkZWNsdXR0ZXJHcm91cC5sZW5ndGggPiA1KSB7XG4gICAgICB2YXIgZ3JvdXBDb3VudCA9IGRlY2x1dHRlckdyb3VwWzRdO1xuICAgICAgaWYgKGdyb3VwQ291bnQgPT0gMSB8fCBncm91cENvdW50ID09IGRlY2x1dHRlckdyb3VwLmxlbmd0aCAtIDUpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9zdHJ1Y3RzL1JCdXNoLmpzXCIpLkVudHJ5fSAqL1xuICAgICAgICB2YXIgYm94ID0ge1xuICAgICAgICAgIG1pblg6IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoZGVjbHV0dGVyR3JvdXBbMF0pLFxuICAgICAgICAgIG1pblk6IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoZGVjbHV0dGVyR3JvdXBbMV0pLFxuICAgICAgICAgIG1heFg6IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoZGVjbHV0dGVyR3JvdXBbMl0pLFxuICAgICAgICAgIG1heFk6IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoZGVjbHV0dGVyR3JvdXBbM10pLFxuICAgICAgICAgIHZhbHVlOiBmZWF0dXJlXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpcy5kZWNsdXR0ZXJUcmVlLmNvbGxpZGVzKGJveCkpIHtcbiAgICAgICAgICB0aGlzLmRlY2x1dHRlclRyZWUuaW5zZXJ0KGJveCk7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDUsIGpqID0gZGVjbHV0dGVyR3JvdXAubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgdmFyIGRlY2x1dHRlckRhdGEgPSAvKiogQHR5cGUge0FycmF5fSAqLyAoZGVjbHV0dGVyR3JvdXBbal0pO1xuICAgICAgICAgICAgaWYgKGRlY2x1dHRlckRhdGEpIHtcbiAgICAgICAgICAgICAgaWYgKGRlY2x1dHRlckRhdGEubGVuZ3RoID4gMTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcGxheVRleHRCYWNrZ3JvdW5kXyhkZWNsdXR0ZXJEYXRhWzBdLFxuICAgICAgICAgICAgICAgICAgZGVjbHV0dGVyRGF0YVsxM10sIGRlY2x1dHRlckRhdGFbMTRdLCBkZWNsdXR0ZXJEYXRhWzE1XSwgZGVjbHV0dGVyRGF0YVsxNl0sXG4gICAgICAgICAgICAgICAgICBkZWNsdXR0ZXJEYXRhWzExXSwgZGVjbHV0dGVyRGF0YVsxMl0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRyYXdJbWFnZS5hcHBseSh1bmRlZmluZWQsIGRlY2x1dHRlckRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkZWNsdXR0ZXJHcm91cC5sZW5ndGggPSA1O1xuICAgICAgICBjcmVhdGVPclVwZGF0ZUVtcHR5KGRlY2x1dHRlckdyb3VwKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gc2tpcHBlZEZlYXR1cmVzSGFzaCBJZHMgb2YgZmVhdHVyZXNcbiAgICogICAgIHRvIHNraXAuXG4gICAqIEBwYXJhbSB7QXJyYXk8Kj59IGluc3RydWN0aW9ucyBJbnN0cnVjdGlvbnMgYXJyYXkuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc25hcFRvUGl4ZWwgU25hcCBwb2ludCBzeW1ib2xzIGFuZCB0ZXh0IHRvIGludGVnZXIgcGl4ZWxzLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKChpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0KSk6IFR8dW5kZWZpbmVkfSBmZWF0dXJlQ2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50PX0gb3B0X2hpdEV4dGVudCBPbmx5IGNoZWNrIGZlYXR1cmVzIHRoYXQgaW50ZXJzZWN0IHRoaXNcbiAgICogICAgIGV4dGVudC5cbiAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICogQHRlbXBsYXRlIFRcbiAgICovXG4gIENhbnZhc1JlcGxheS5wcm90b3R5cGUucmVwbGF5XyA9IGZ1bmN0aW9uIHJlcGxheV8gKFxuICAgIGNvbnRleHQsXG4gICAgdHJhbnNmb3JtLFxuICAgIHNraXBwZWRGZWF0dXJlc0hhc2gsXG4gICAgaW5zdHJ1Y3Rpb25zLFxuICAgIHNuYXBUb1BpeGVsLFxuICAgIGZlYXR1cmVDYWxsYmFjayxcbiAgICBvcHRfaGl0RXh0ZW50XG4gICkge1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICB2YXIgcGl4ZWxDb29yZGluYXRlcztcbiAgICBpZiAodGhpcy5waXhlbENvb3JkaW5hdGVzXyAmJiBlcXVhbHModHJhbnNmb3JtLCB0aGlzLnJlbmRlcmVkVHJhbnNmb3JtXykpIHtcbiAgICAgIHBpeGVsQ29vcmRpbmF0ZXMgPSB0aGlzLnBpeGVsQ29vcmRpbmF0ZXNfO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXRoaXMucGl4ZWxDb29yZGluYXRlc18pIHtcbiAgICAgICAgdGhpcy5waXhlbENvb3JkaW5hdGVzXyA9IFtdO1xuICAgICAgfVxuICAgICAgcGl4ZWxDb29yZGluYXRlcyA9IHRyYW5zZm9ybTJEKFxuICAgICAgICB0aGlzLmNvb3JkaW5hdGVzLCAwLCB0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aCwgMixcbiAgICAgICAgdHJhbnNmb3JtLCB0aGlzLnBpeGVsQ29vcmRpbmF0ZXNfKTtcbiAgICAgIHRyYW5zZm9ybVNldEZyb21BcnJheSh0aGlzLnJlbmRlcmVkVHJhbnNmb3JtXywgdHJhbnNmb3JtKTtcbiAgICB9XG4gICAgdmFyIHNraXBGZWF0dXJlcyA9ICFpc0VtcHR5KHNraXBwZWRGZWF0dXJlc0hhc2gpO1xuICAgIHZhciBpID0gMDsgLy8gaW5zdHJ1Y3Rpb24gaW5kZXhcbiAgICB2YXIgaWkgPSBpbnN0cnVjdGlvbnMubGVuZ3RoOyAvLyBlbmQgb2YgaW5zdHJ1Y3Rpb25zXG4gICAgdmFyIGQgPSAwOyAvLyBkYXRhIGluZGV4XG4gICAgdmFyIGRkOyAvLyBlbmQgb2YgcGVyLWluc3RydWN0aW9uIGRhdGFcbiAgICB2YXIgYW5jaG9yWCwgYW5jaG9yWSwgcHJldlgsIHByZXZZLCByb3VuZFgsIHJvdW5kWSwgZGVjbHV0dGVyR3JvdXAsIGltYWdlO1xuICAgIHZhciBwZW5kaW5nRmlsbCA9IDA7XG4gICAgdmFyIHBlbmRpbmdTdHJva2UgPSAwO1xuICAgIHZhciBsYXN0RmlsbEluc3RydWN0aW9uID0gbnVsbDtcbiAgICB2YXIgbGFzdFN0cm9rZUluc3RydWN0aW9uID0gbnVsbDtcbiAgICB2YXIgY29vcmRpbmF0ZUNhY2hlID0gdGhpcy5jb29yZGluYXRlQ2FjaGVfO1xuICAgIHZhciB2aWV3Um90YXRpb24gPSB0aGlzLnZpZXdSb3RhdGlvbl87XG5cbiAgICB2YXIgc3RhdGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL3JlbmRlci5qc1wiKS5TdGF0ZX0gKi8gKHtcbiAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICBwaXhlbFJhdGlvOiB0aGlzLnBpeGVsUmF0aW8sXG4gICAgICByZXNvbHV0aW9uOiB0aGlzLnJlc29sdXRpb24sXG4gICAgICByb3RhdGlvbjogdmlld1JvdGF0aW9uXG4gICAgfSk7XG5cbiAgICAvLyBXaGVuIHRoZSBiYXRjaCBzaXplIGdldHMgdG9vIGJpZywgcGVyZm9ybWFuY2UgZGVjcmVhc2VzLiAyMDAgaXMgYSBnb29kXG4gICAgLy8gYmFsYW5jZSBiZXR3ZWVuIGJhdGNoIHNpemUgYW5kIG51bWJlciBvZiBmaWxsL3N0cm9rZSBpbnN0cnVjdGlvbnMuXG4gICAgdmFyIGJhdGNoU2l6ZSA9IHRoaXMuaW5zdHJ1Y3Rpb25zICE9IGluc3RydWN0aW9ucyB8fCB0aGlzLm92ZXJsYXBzID8gMCA6IDIwMDtcbiAgICB2YXIgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSAqLyBmZWF0dXJlO1xuICAgIHZhciB4LCB5O1xuICAgIHdoaWxlIChpIDwgaWkpIHtcbiAgICAgIHZhciBpbnN0cnVjdGlvbiA9IGluc3RydWN0aW9uc1tpXTtcbiAgICAgIHZhciB0eXBlID0gLyoqIEB0eXBlIHtDYW52YXNJbnN0cnVjdGlvbn0gKi8gKGluc3RydWN0aW9uWzBdKTtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkJFR0lOX0dFT01FVFJZOlxuICAgICAgICAgIGZlYXR1cmUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9ICovIChpbnN0cnVjdGlvblsxXSk7XG4gICAgICAgICAgaWYgKChza2lwRmVhdHVyZXMgJiYgc2tpcHBlZEZlYXR1cmVzSGFzaFtnZXRVaWQoZmVhdHVyZSldKSB8fCAhZmVhdHVyZS5nZXRHZW9tZXRyeSgpKSB7XG4gICAgICAgICAgICBpID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsyXSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChvcHRfaGl0RXh0ZW50ICE9PSB1bmRlZmluZWQgJiYgIWludGVyc2VjdHMoXG4gICAgICAgICAgICBvcHRfaGl0RXh0ZW50LCBmZWF0dXJlLmdldEdlb21ldHJ5KCkuZ2V0RXh0ZW50KCkpKSB7XG4gICAgICAgICAgICBpID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsyXSkgKyAxO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICArK2k7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkJFR0lOX1BBVEg6XG4gICAgICAgICAgaWYgKHBlbmRpbmdGaWxsID4gYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICB0aGlzLmZpbGxfKGNvbnRleHQpO1xuICAgICAgICAgICAgcGVuZGluZ0ZpbGwgPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocGVuZGluZ1N0cm9rZSA+IGJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgIHBlbmRpbmdTdHJva2UgPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIXBlbmRpbmdGaWxsICYmICFwZW5kaW5nU3Ryb2tlKSB7XG4gICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgcHJldlggPSBwcmV2WSA9IE5hTjtcbiAgICAgICAgICB9XG4gICAgICAgICAgKytpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkNJUkNMRTpcbiAgICAgICAgICBkID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxXSk7XG4gICAgICAgICAgdmFyIHgxID0gcGl4ZWxDb29yZGluYXRlc1tkXTtcbiAgICAgICAgICB2YXIgeTEgPSBwaXhlbENvb3JkaW5hdGVzW2QgKyAxXTtcbiAgICAgICAgICB2YXIgeDIgPSBwaXhlbENvb3JkaW5hdGVzW2QgKyAyXTtcbiAgICAgICAgICB2YXIgeTIgPSBwaXhlbENvb3JkaW5hdGVzW2QgKyAzXTtcbiAgICAgICAgICB2YXIgZHggPSB4MiAtIHgxO1xuICAgICAgICAgIHZhciBkeSA9IHkyIC0geTE7XG4gICAgICAgICAgdmFyIHIgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICAgICAgIGNvbnRleHQubW92ZVRvKHgxICsgciwgeTEpO1xuICAgICAgICAgIGNvbnRleHQuYXJjKHgxLCB5MSwgciwgMCwgMiAqIE1hdGguUEksIHRydWUpO1xuICAgICAgICAgICsraTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBDYW52YXNJbnN0cnVjdGlvbi5DTE9TRV9QQVRIOlxuICAgICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgKytpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkNVU1RPTTpcbiAgICAgICAgICBkID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxXSk7XG4gICAgICAgICAgZGQgPSBpbnN0cnVjdGlvblsyXTtcbiAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGluc3RydWN0aW9uWzNdKTtcbiAgICAgICAgICB2YXIgcmVuZGVyZXIgPSBpbnN0cnVjdGlvbls0XTtcbiAgICAgICAgICB2YXIgZm4gPSBpbnN0cnVjdGlvbi5sZW5ndGggPT0gNiA/IGluc3RydWN0aW9uWzVdIDogdW5kZWZpbmVkO1xuICAgICAgICAgIHN0YXRlLmdlb21ldHJ5ID0gZ2VvbWV0cnk7XG4gICAgICAgICAgc3RhdGUuZmVhdHVyZSA9IGZlYXR1cmU7XG4gICAgICAgICAgaWYgKCEoaSBpbiBjb29yZGluYXRlQ2FjaGUpKSB7XG4gICAgICAgICAgICBjb29yZGluYXRlQ2FjaGVbaV0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGNvb3JkcyA9IGNvb3JkaW5hdGVDYWNoZVtpXTtcbiAgICAgICAgICBpZiAoZm4pIHtcbiAgICAgICAgICAgIGZuKHBpeGVsQ29vcmRpbmF0ZXMsIGQsIGRkLCAyLCBjb29yZHMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb29yZHNbMF0gPSBwaXhlbENvb3JkaW5hdGVzW2RdO1xuICAgICAgICAgICAgY29vcmRzWzFdID0gcGl4ZWxDb29yZGluYXRlc1tkICsgMV07XG4gICAgICAgICAgICBjb29yZHMubGVuZ3RoID0gMjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVuZGVyZXIoY29vcmRzLCBzdGF0ZSk7XG4gICAgICAgICAgKytpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkRSQVdfSU1BR0U6XG4gICAgICAgICAgZCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMV0pO1xuICAgICAgICAgIGRkID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsyXSk7XG4gICAgICAgICAgaW1hZ2UgPSAvKiogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudH0gKi9cbiAgICAgICAgICAgICAgKGluc3RydWN0aW9uWzNdKTtcbiAgICAgICAgICAvLyBSZW1haW5pbmcgYXJndW1lbnRzIGluIERSQVdfSU1BR0UgYXJlIGluIGFscGhhYmV0aWNhbCBvcmRlclxuICAgICAgICAgIGFuY2hvclggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzRdKTtcbiAgICAgICAgICBhbmNob3JZID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls1XSk7XG4gICAgICAgICAgZGVjbHV0dGVyR3JvdXAgPSBmZWF0dXJlQ2FsbGJhY2sgPyBudWxsIDogLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXB9ICovIChpbnN0cnVjdGlvbls2XSk7XG4gICAgICAgICAgdmFyIGhlaWdodCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bN10pO1xuICAgICAgICAgIHZhciBvcGFjaXR5ID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls4XSk7XG4gICAgICAgICAgdmFyIG9yaWdpblggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzldKTtcbiAgICAgICAgICB2YXIgb3JpZ2luWSA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMTBdKTtcbiAgICAgICAgICB2YXIgcm90YXRlV2l0aFZpZXcgPSAvKiogQHR5cGUge2Jvb2xlYW59ICovIChpbnN0cnVjdGlvblsxMV0pO1xuICAgICAgICAgIHZhciByb3RhdGlvbiA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMTJdKTtcbiAgICAgICAgICB2YXIgc2NhbGUgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzEzXSk7XG4gICAgICAgICAgdmFyIHdpZHRoID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxNF0pO1xuXG4gICAgICAgICAgdmFyIHBhZGRpbmcgPSAodm9pZCAwKSwgYmFja2dyb3VuZEZpbGwgPSAodm9pZCAwKSwgYmFja2dyb3VuZFN0cm9rZSA9ICh2b2lkIDApO1xuICAgICAgICAgIGlmIChpbnN0cnVjdGlvbi5sZW5ndGggPiAxNikge1xuICAgICAgICAgICAgcGFkZGluZyA9IC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGluc3RydWN0aW9uWzE1XSk7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kRmlsbCA9IC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKGluc3RydWN0aW9uWzE2XSk7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kU3Ryb2tlID0gLyoqIEB0eXBlIHtib29sZWFufSAqLyAoaW5zdHJ1Y3Rpb25bMTddKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFkZGluZyA9IGRlZmF1bHRQYWRkaW5nO1xuICAgICAgICAgICAgYmFja2dyb3VuZEZpbGwgPSBiYWNrZ3JvdW5kU3Ryb2tlID0gZmFsc2U7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHJvdGF0ZVdpdGhWaWV3KSB7XG4gICAgICAgICAgICByb3RhdGlvbiArPSB2aWV3Um90YXRpb247XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoOyBkIDwgZGQ7IGQgKz0gMikge1xuICAgICAgICAgICAgdGhpcy5yZXBsYXlJbWFnZV8oY29udGV4dCxcbiAgICAgICAgICAgICAgcGl4ZWxDb29yZGluYXRlc1tkXSwgcGl4ZWxDb29yZGluYXRlc1tkICsgMV0sIGltYWdlLCBhbmNob3JYLCBhbmNob3JZLFxuICAgICAgICAgICAgICBkZWNsdXR0ZXJHcm91cCwgaGVpZ2h0LCBvcGFjaXR5LCBvcmlnaW5YLCBvcmlnaW5ZLCByb3RhdGlvbiwgc2NhbGUsXG4gICAgICAgICAgICAgIHNuYXBUb1BpeGVsLCB3aWR0aCwgcGFkZGluZyxcbiAgICAgICAgICAgICAgYmFja2dyb3VuZEZpbGwgPyAvKiogQHR5cGUge0FycmF5PCo+fSAqLyAobGFzdEZpbGxJbnN0cnVjdGlvbikgOiBudWxsLFxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kU3Ryb2tlID8gLyoqIEB0eXBlIHtBcnJheTwqPn0gKi8gKGxhc3RTdHJva2VJbnN0cnVjdGlvbikgOiBudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5yZW5kZXJEZWNsdXR0ZXJfKGRlY2x1dHRlckdyb3VwLCBmZWF0dXJlKTtcbiAgICAgICAgICArK2k7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uRFJBV19DSEFSUzpcbiAgICAgICAgICB2YXIgYmVnaW4gPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzFdKTtcbiAgICAgICAgICB2YXIgZW5kID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsyXSk7XG4gICAgICAgICAgdmFyIGJhc2VsaW5lID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblszXSk7XG4gICAgICAgICAgZGVjbHV0dGVyR3JvdXAgPSBmZWF0dXJlQ2FsbGJhY2sgPyBudWxsIDogLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXB9ICovIChpbnN0cnVjdGlvbls0XSk7XG4gICAgICAgICAgdmFyIG92ZXJmbG93ID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls1XSk7XG4gICAgICAgICAgdmFyIGZpbGxLZXkgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKGluc3RydWN0aW9uWzZdKTtcbiAgICAgICAgICB2YXIgbWF4QW5nbGUgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzddKTtcbiAgICAgICAgICB2YXIgbWVhc3VyZSA9IC8qKiBAdHlwZSB7ZnVuY3Rpb24oc3RyaW5nKTpudW1iZXJ9ICovIChpbnN0cnVjdGlvbls4XSk7XG4gICAgICAgICAgdmFyIG9mZnNldFkgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzldKTtcbiAgICAgICAgICB2YXIgc3Ryb2tlS2V5ID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChpbnN0cnVjdGlvblsxMF0pO1xuICAgICAgICAgIHZhciBzdHJva2VXaWR0aCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMTFdKTtcbiAgICAgICAgICB2YXIgdGV4dCA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoaW5zdHJ1Y3Rpb25bMTJdKTtcbiAgICAgICAgICB2YXIgdGV4dEtleSA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoaW5zdHJ1Y3Rpb25bMTNdKTtcbiAgICAgICAgICB2YXIgdGV4dFNjYWxlID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxNF0pO1xuXG4gICAgICAgICAgdmFyIHBhdGhMZW5ndGggPSBsaW5lU3RyaW5nTGVuZ3RoKHBpeGVsQ29vcmRpbmF0ZXMsIGJlZ2luLCBlbmQsIDIpO1xuICAgICAgICAgIHZhciB0ZXh0TGVuZ3RoID0gbWVhc3VyZSh0ZXh0KTtcbiAgICAgICAgICBpZiAob3ZlcmZsb3cgfHwgdGV4dExlbmd0aCA8PSBwYXRoTGVuZ3RoKSB7XG4gICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vVGV4dFJlcGxheS5qc1wiKS5kZWZhdWx0fSAqL1xuICAgICAgICAgICAgdmFyIHRleHRSZXBsYXkgPSAvKiogQHR5cGUgez99ICovICh0aGlzKTtcbiAgICAgICAgICAgIHZhciB0ZXh0QWxpZ24gPSB0ZXh0UmVwbGF5LnRleHRTdGF0ZXNbdGV4dEtleV0udGV4dEFsaWduO1xuICAgICAgICAgICAgdmFyIHN0YXJ0TSA9IChwYXRoTGVuZ3RoIC0gdGV4dExlbmd0aCkgKiBURVhUX0FMSUdOW3RleHRBbGlnbl07XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBkcmF3VGV4dE9uUGF0aChcbiAgICAgICAgICAgICAgcGl4ZWxDb29yZGluYXRlcywgYmVnaW4sIGVuZCwgMiwgdGV4dCwgbWVhc3VyZSwgc3RhcnRNLCBtYXhBbmdsZSk7XG4gICAgICAgICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgICAgICAgdmFyIGMgPSAodm9pZCAwKSwgY2MgPSAodm9pZCAwKSwgY2hhcnMgPSAodm9pZCAwKSwgbGFiZWwgPSAodm9pZCAwKSwgcGFydCA9ICh2b2lkIDApO1xuICAgICAgICAgICAgICBpZiAoc3Ryb2tlS2V5KSB7XG4gICAgICAgICAgICAgICAgZm9yIChjID0gMCwgY2MgPSBwYXJ0cy5sZW5ndGg7IGMgPCBjYzsgKytjKSB7XG4gICAgICAgICAgICAgICAgICBwYXJ0ID0gcGFydHNbY107IC8vIHgsIHksIGFuY2hvclgsIHJvdGF0aW9uLCBjaHVua1xuICAgICAgICAgICAgICAgICAgY2hhcnMgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKHBhcnRbNF0pO1xuICAgICAgICAgICAgICAgICAgbGFiZWwgPSB0ZXh0UmVwbGF5LmdldEltYWdlKGNoYXJzLCB0ZXh0S2V5LCAnJywgc3Ryb2tlS2V5KTtcbiAgICAgICAgICAgICAgICAgIGFuY2hvclggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKHBhcnRbMl0pICsgc3Ryb2tlV2lkdGg7XG4gICAgICAgICAgICAgICAgICBhbmNob3JZID0gYmFzZWxpbmUgKiBsYWJlbC5oZWlnaHQgKyAoMC41IC0gYmFzZWxpbmUpICogMiAqIHN0cm9rZVdpZHRoIC0gb2Zmc2V0WTtcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVwbGF5SW1hZ2VfKGNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAocGFydFswXSksIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAocGFydFsxXSksIGxhYmVsLFxuICAgICAgICAgICAgICAgICAgICBhbmNob3JYLCBhbmNob3JZLCBkZWNsdXR0ZXJHcm91cCwgbGFiZWwuaGVpZ2h0LCAxLCAwLCAwLFxuICAgICAgICAgICAgICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi8gKHBhcnRbM10pLCB0ZXh0U2NhbGUsIGZhbHNlLCBsYWJlbC53aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFBhZGRpbmcsIG51bGwsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoZmlsbEtleSkge1xuICAgICAgICAgICAgICAgIGZvciAoYyA9IDAsIGNjID0gcGFydHMubGVuZ3RoOyBjIDwgY2M7ICsrYykge1xuICAgICAgICAgICAgICAgICAgcGFydCA9IHBhcnRzW2NdOyAvLyB4LCB5LCBhbmNob3JYLCByb3RhdGlvbiwgY2h1bmtcbiAgICAgICAgICAgICAgICAgIGNoYXJzID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChwYXJ0WzRdKTtcbiAgICAgICAgICAgICAgICAgIGxhYmVsID0gdGV4dFJlcGxheS5nZXRJbWFnZShjaGFycywgdGV4dEtleSwgZmlsbEtleSwgJycpO1xuICAgICAgICAgICAgICAgICAgYW5jaG9yWCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAocGFydFsyXSk7XG4gICAgICAgICAgICAgICAgICBhbmNob3JZID0gYmFzZWxpbmUgKiBsYWJlbC5oZWlnaHQgLSBvZmZzZXRZO1xuICAgICAgICAgICAgICAgICAgdGhpcy5yZXBsYXlJbWFnZV8oY29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovIChwYXJ0WzBdKSwgLyoqIEB0eXBlIHtudW1iZXJ9ICovIChwYXJ0WzFdKSwgbGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIGFuY2hvclgsIGFuY2hvclksIGRlY2x1dHRlckdyb3VwLCBsYWJlbC5oZWlnaHQsIDEsIDAsIDAsXG4gICAgICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAocGFydFszXSksIHRleHRTY2FsZSwgZmFsc2UsIGxhYmVsLndpZHRoLFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UGFkZGluZywgbnVsbCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMucmVuZGVyRGVjbHV0dGVyXyhkZWNsdXR0ZXJHcm91cCwgZmVhdHVyZSk7XG4gICAgICAgICAgKytpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkVORF9HRU9NRVRSWTpcbiAgICAgICAgICBpZiAoZmVhdHVyZUNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZlYXR1cmUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9ICovIChpbnN0cnVjdGlvblsxXSk7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZmVhdHVyZUNhbGxiYWNrKGZlYXR1cmUpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICArK2k7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uRklMTDpcbiAgICAgICAgICBpZiAoYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICBwZW5kaW5nRmlsbCsrO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmZpbGxfKGNvbnRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICArK2k7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uTU9WRV9UT19MSU5FX1RPOlxuICAgICAgICAgIGQgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzFdKTtcbiAgICAgICAgICBkZCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMl0pO1xuICAgICAgICAgIHggPSBwaXhlbENvb3JkaW5hdGVzW2RdO1xuICAgICAgICAgIHkgPSBwaXhlbENvb3JkaW5hdGVzW2QgKyAxXTtcbiAgICAgICAgICByb3VuZFggPSAoeCArIDAuNSkgfCAwO1xuICAgICAgICAgIHJvdW5kWSA9ICh5ICsgMC41KSB8IDA7XG4gICAgICAgICAgaWYgKHJvdW5kWCAhPT0gcHJldlggfHwgcm91bmRZICE9PSBwcmV2WSkge1xuICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8oeCwgeSk7XG4gICAgICAgICAgICBwcmV2WCA9IHJvdW5kWDtcbiAgICAgICAgICAgIHByZXZZID0gcm91bmRZO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGQgKz0gMjsgZCA8IGRkOyBkICs9IDIpIHtcbiAgICAgICAgICAgIHggPSBwaXhlbENvb3JkaW5hdGVzW2RdO1xuICAgICAgICAgICAgeSA9IHBpeGVsQ29vcmRpbmF0ZXNbZCArIDFdO1xuICAgICAgICAgICAgcm91bmRYID0gKHggKyAwLjUpIHwgMDtcbiAgICAgICAgICAgIHJvdW5kWSA9ICh5ICsgMC41KSB8IDA7XG4gICAgICAgICAgICBpZiAoZCA9PSBkZCAtIDIgfHwgcm91bmRYICE9PSBwcmV2WCB8fCByb3VuZFkgIT09IHByZXZZKSB7XG4gICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHgsIHkpO1xuICAgICAgICAgICAgICBwcmV2WCA9IHJvdW5kWDtcbiAgICAgICAgICAgICAgcHJldlkgPSByb3VuZFk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgICsraTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBDYW52YXNJbnN0cnVjdGlvbi5TRVRfRklMTF9TVFlMRTpcbiAgICAgICAgICBsYXN0RmlsbEluc3RydWN0aW9uID0gaW5zdHJ1Y3Rpb247XG4gICAgICAgICAgdGhpcy5hbGlnbkZpbGxfID0gaW5zdHJ1Y3Rpb25bMl07XG5cbiAgICAgICAgICBpZiAocGVuZGluZ0ZpbGwpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsbF8oY29udGV4dCk7XG4gICAgICAgICAgICBwZW5kaW5nRmlsbCA9IDA7XG4gICAgICAgICAgICBpZiAocGVuZGluZ1N0cm9rZSkge1xuICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICAgICAgICBwZW5kaW5nU3Ryb2tlID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gKi8gKGluc3RydWN0aW9uWzFdKTtcbiAgICAgICAgICArK2k7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uU0VUX1NUUk9LRV9TVFlMRTpcbiAgICAgICAgICBsYXN0U3Ryb2tlSW5zdHJ1Y3Rpb24gPSBpbnN0cnVjdGlvbjtcbiAgICAgICAgICBpZiAocGVuZGluZ1N0cm9rZSkge1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgIHBlbmRpbmdTdHJva2UgPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNldFN0cm9rZVN0eWxlXyhjb250ZXh0LCAvKiogQHR5cGUge0FycmF5PCo+fSAqLyAoaW5zdHJ1Y3Rpb24pKTtcbiAgICAgICAgICArK2k7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uU1RST0tFOlxuICAgICAgICAgIGlmIChiYXRjaFNpemUpIHtcbiAgICAgICAgICAgIHBlbmRpbmdTdHJva2UrKztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgKytpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICsraTsgLy8gY29uc3VtZSB0aGUgaW5zdHJ1Y3Rpb24gYW55d2F5LCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwZW5kaW5nRmlsbCkge1xuICAgICAgdGhpcy5maWxsXyhjb250ZXh0KTtcbiAgICB9XG4gICAgaWYgKHBlbmRpbmdTdHJva2UpIHtcbiAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHZpZXdSb3RhdGlvbiBWaWV3IHJvdGF0aW9uLlxuICAgKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSBza2lwcGVkRmVhdHVyZXNIYXNoIElkcyBvZiBmZWF0dXJlc1xuICAgKiAgICAgdG8gc2tpcC5cbiAgICogQHBhcmFtIHtib29sZWFufSBzbmFwVG9QaXhlbCBTbmFwIHBvaW50IHN5bWJvbHMgYW5kIHRleHQgdG8gaW50ZWdlciBwaXhlbHMuXG4gICAqL1xuICBDYW52YXNSZXBsYXkucHJvdG90eXBlLnJlcGxheSA9IGZ1bmN0aW9uIHJlcGxheSAoY29udGV4dCwgdHJhbnNmb3JtLCB2aWV3Um90YXRpb24sIHNraXBwZWRGZWF0dXJlc0hhc2gsIHNuYXBUb1BpeGVsKSB7XG4gICAgdGhpcy52aWV3Um90YXRpb25fID0gdmlld1JvdGF0aW9uO1xuICAgIHRoaXMucmVwbGF5Xyhjb250ZXh0LCB0cmFuc2Zvcm0sXG4gICAgICBza2lwcGVkRmVhdHVyZXNIYXNoLCB0aGlzLmluc3RydWN0aW9ucywgc25hcFRvUGl4ZWwsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdmlld1JvdGF0aW9uIFZpZXcgcm90YXRpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHNraXBwZWRGZWF0dXJlc0hhc2ggSWRzIG9mIGZlYXR1cmVzXG4gICAqICAgICB0byBza2lwLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKChpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0KSk6IFQ9fSBvcHRfZmVhdHVyZUNhbGxiYWNrXG4gICAqICAgICBGZWF0dXJlIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnQ9fSBvcHRfaGl0RXh0ZW50IE9ubHkgY2hlY2sgZmVhdHVyZXMgdGhhdCBpbnRlcnNlY3QgdGhpc1xuICAgKiAgICAgZXh0ZW50LlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5yZXBsYXlIaXREZXRlY3Rpb24gPSBmdW5jdGlvbiByZXBsYXlIaXREZXRlY3Rpb24gKFxuICAgIGNvbnRleHQsXG4gICAgdHJhbnNmb3JtLFxuICAgIHZpZXdSb3RhdGlvbixcbiAgICBza2lwcGVkRmVhdHVyZXNIYXNoLFxuICAgIG9wdF9mZWF0dXJlQ2FsbGJhY2ssXG4gICAgb3B0X2hpdEV4dGVudFxuICApIHtcbiAgICB0aGlzLnZpZXdSb3RhdGlvbl8gPSB2aWV3Um90YXRpb247XG4gICAgcmV0dXJuIHRoaXMucmVwbGF5Xyhjb250ZXh0LCB0cmFuc2Zvcm0sIHNraXBwZWRGZWF0dXJlc0hhc2gsXG4gICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucywgdHJ1ZSwgb3B0X2ZlYXR1cmVDYWxsYmFjaywgb3B0X2hpdEV4dGVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldmVyc2UgdGhlIGhpdCBkZXRlY3Rpb24gaW5zdHJ1Y3Rpb25zLlxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5yZXZlcnNlSGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zID0gZnVuY3Rpb24gcmV2ZXJzZUhpdERldGVjdGlvbkluc3RydWN0aW9ucyAoKSB7XG4gICAgdmFyIGhpdERldGVjdGlvbkluc3RydWN0aW9ucyA9IHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zO1xuICAgIC8vIHN0ZXAgMSAtIHJldmVyc2UgYXJyYXlcbiAgICBoaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucmV2ZXJzZSgpO1xuICAgIC8vIHN0ZXAgMiAtIHJldmVyc2UgaW5zdHJ1Y3Rpb25zIHdpdGhpbiBnZW9tZXRyeSBibG9ja3NcbiAgICB2YXIgaTtcbiAgICB2YXIgbiA9IGhpdERldGVjdGlvbkluc3RydWN0aW9ucy5sZW5ndGg7XG4gICAgdmFyIGluc3RydWN0aW9uO1xuICAgIHZhciB0eXBlO1xuICAgIHZhciBiZWdpbiA9IC0xO1xuICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGluc3RydWN0aW9uID0gaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zW2ldO1xuICAgICAgdHlwZSA9IC8qKiBAdHlwZSB7Q2FudmFzSW5zdHJ1Y3Rpb259ICovIChpbnN0cnVjdGlvblswXSk7XG4gICAgICBpZiAodHlwZSA9PSBDYW52YXNJbnN0cnVjdGlvbi5FTkRfR0VPTUVUUlkpIHtcbiAgICAgICAgYmVnaW4gPSBpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09IENhbnZhc0luc3RydWN0aW9uLkJFR0lOX0dFT01FVFJZKSB7XG4gICAgICAgIGluc3RydWN0aW9uWzJdID0gaTtcbiAgICAgICAgcmV2ZXJzZVN1YkFycmF5KHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLCBiZWdpbiwgaSk7XG4gICAgICAgIGJlZ2luID0gLTE7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5zZXRGaWxsU3Ryb2tlU3R5bGUgPSBmdW5jdGlvbiBzZXRGaWxsU3Ryb2tlU3R5bGUgKGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUpIHtcbiAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgIGlmIChmaWxsU3R5bGUpIHtcbiAgICAgIHZhciBmaWxsU3R5bGVDb2xvciA9IGZpbGxTdHlsZS5nZXRDb2xvcigpO1xuICAgICAgc3RhdGUuZmlsbFN0eWxlID0gYXNDb2xvckxpa2UoZmlsbFN0eWxlQ29sb3IgP1xuICAgICAgICBmaWxsU3R5bGVDb2xvciA6IGRlZmF1bHRGaWxsU3R5bGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5maWxsU3R5bGUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChzdHJva2VTdHlsZSkge1xuICAgICAgdmFyIHN0cm9rZVN0eWxlQ29sb3IgPSBzdHJva2VTdHlsZS5nZXRDb2xvcigpO1xuICAgICAgc3RhdGUuc3Ryb2tlU3R5bGUgPSBhc0NvbG9yTGlrZShzdHJva2VTdHlsZUNvbG9yID9cbiAgICAgICAgc3Ryb2tlU3R5bGVDb2xvciA6IGRlZmF1bHRTdHJva2VTdHlsZSk7XG4gICAgICB2YXIgc3Ryb2tlU3R5bGVMaW5lQ2FwID0gc3Ryb2tlU3R5bGUuZ2V0TGluZUNhcCgpO1xuICAgICAgc3RhdGUubGluZUNhcCA9IHN0cm9rZVN0eWxlTGluZUNhcCAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgc3Ryb2tlU3R5bGVMaW5lQ2FwIDogZGVmYXVsdExpbmVDYXA7XG4gICAgICB2YXIgc3Ryb2tlU3R5bGVMaW5lRGFzaCA9IHN0cm9rZVN0eWxlLmdldExpbmVEYXNoKCk7XG4gICAgICBzdGF0ZS5saW5lRGFzaCA9IHN0cm9rZVN0eWxlTGluZURhc2ggP1xuICAgICAgICBzdHJva2VTdHlsZUxpbmVEYXNoLnNsaWNlKCkgOiBkZWZhdWx0TGluZURhc2g7XG4gICAgICB2YXIgc3Ryb2tlU3R5bGVMaW5lRGFzaE9mZnNldCA9IHN0cm9rZVN0eWxlLmdldExpbmVEYXNoT2Zmc2V0KCk7XG4gICAgICBzdGF0ZS5saW5lRGFzaE9mZnNldCA9IHN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXQgP1xuICAgICAgICBzdHJva2VTdHlsZUxpbmVEYXNoT2Zmc2V0IDogZGVmYXVsdExpbmVEYXNoT2Zmc2V0O1xuICAgICAgdmFyIHN0cm9rZVN0eWxlTGluZUpvaW4gPSBzdHJva2VTdHlsZS5nZXRMaW5lSm9pbigpO1xuICAgICAgc3RhdGUubGluZUpvaW4gPSBzdHJva2VTdHlsZUxpbmVKb2luICE9PSB1bmRlZmluZWQgP1xuICAgICAgICBzdHJva2VTdHlsZUxpbmVKb2luIDogZGVmYXVsdExpbmVKb2luO1xuICAgICAgdmFyIHN0cm9rZVN0eWxlV2lkdGggPSBzdHJva2VTdHlsZS5nZXRXaWR0aCgpO1xuICAgICAgc3RhdGUubGluZVdpZHRoID0gc3Ryb2tlU3R5bGVXaWR0aCAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgc3Ryb2tlU3R5bGVXaWR0aCA6IGRlZmF1bHRMaW5lV2lkdGg7XG4gICAgICB2YXIgc3Ryb2tlU3R5bGVNaXRlckxpbWl0ID0gc3Ryb2tlU3R5bGUuZ2V0TWl0ZXJMaW1pdCgpO1xuICAgICAgc3RhdGUubWl0ZXJMaW1pdCA9IHN0cm9rZVN0eWxlTWl0ZXJMaW1pdCAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgc3Ryb2tlU3R5bGVNaXRlckxpbWl0IDogZGVmYXVsdE1pdGVyTGltaXQ7XG5cbiAgICAgIGlmIChzdGF0ZS5saW5lV2lkdGggPiB0aGlzLm1heExpbmVXaWR0aCkge1xuICAgICAgICB0aGlzLm1heExpbmVXaWR0aCA9IHN0YXRlLmxpbmVXaWR0aDtcbiAgICAgICAgLy8gaW52YWxpZGF0ZSB0aGUgYnVmZmVyZWQgbWF4IGV4dGVudCBjYWNoZVxuICAgICAgICB0aGlzLmJ1ZmZlcmVkTWF4RXh0ZW50XyA9IG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLnN0cm9rZVN0eWxlID0gdW5kZWZpbmVkO1xuICAgICAgc3RhdGUubGluZUNhcCA9IHVuZGVmaW5lZDtcbiAgICAgIHN0YXRlLmxpbmVEYXNoID0gbnVsbDtcbiAgICAgIHN0YXRlLmxpbmVEYXNoT2Zmc2V0ID0gdW5kZWZpbmVkO1xuICAgICAgc3RhdGUubGluZUpvaW4gPSB1bmRlZmluZWQ7XG4gICAgICBzdGF0ZS5saW5lV2lkdGggPSB1bmRlZmluZWQ7XG4gICAgICBzdGF0ZS5taXRlckxpbWl0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0cm9rZVN0YXRlfSBzdGF0ZSBTdGF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAgICogQHJldHVybiB7QXJyYXk8Kj59IEZpbGwgaW5zdHJ1Y3Rpb24uXG4gICAqL1xuICBDYW52YXNSZXBsYXkucHJvdG90eXBlLmNyZWF0ZUZpbGwgPSBmdW5jdGlvbiBjcmVhdGVGaWxsIChzdGF0ZSwgZ2VvbWV0cnkpIHtcbiAgICB2YXIgZmlsbFN0eWxlID0gc3RhdGUuZmlsbFN0eWxlO1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8Kj59ICovXG4gICAgdmFyIGZpbGxJbnN0cnVjdGlvbiA9IFtDYW52YXNJbnN0cnVjdGlvbi5TRVRfRklMTF9TVFlMRSwgZmlsbFN0eWxlXTtcbiAgICBpZiAodHlwZW9mIGZpbGxTdHlsZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIEZpbGwgaXMgYSBwYXR0ZXJuIG9yIGdyYWRpZW50IC0gYWxpZ24gaXQhXG4gICAgICBmaWxsSW5zdHJ1Y3Rpb24ucHVzaCh0cnVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZpbGxJbnN0cnVjdGlvbjtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0cm9rZVN0YXRlfSBzdGF0ZSBTdGF0ZS5cbiAgICovXG4gIENhbnZhc1JlcGxheS5wcm90b3R5cGUuYXBwbHlTdHJva2UgPSBmdW5jdGlvbiBhcHBseVN0cm9rZSAoc3RhdGUpIHtcbiAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKHRoaXMuY3JlYXRlU3Ryb2tlKHN0YXRlKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdHJva2VTdGF0ZX0gc3RhdGUgU3RhdGUuXG4gICAqIEByZXR1cm4ge0FycmF5PCo+fSBTdHJva2UgaW5zdHJ1Y3Rpb24uXG4gICAqL1xuICBDYW52YXNSZXBsYXkucHJvdG90eXBlLmNyZWF0ZVN0cm9rZSA9IGZ1bmN0aW9uIGNyZWF0ZVN0cm9rZSAoc3RhdGUpIHtcbiAgICByZXR1cm4gW1xuICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uU0VUX1NUUk9LRV9TVFlMRSxcbiAgICAgIHN0YXRlLnN0cm9rZVN0eWxlLCBzdGF0ZS5saW5lV2lkdGggKiB0aGlzLnBpeGVsUmF0aW8sIHN0YXRlLmxpbmVDYXAsXG4gICAgICBzdGF0ZS5saW5lSm9pbiwgc3RhdGUubWl0ZXJMaW1pdCxcbiAgICAgIHRoaXMuYXBwbHlQaXhlbFJhdGlvKHN0YXRlLmxpbmVEYXNoKSwgc3RhdGUubGluZURhc2hPZmZzZXQgKiB0aGlzLnBpeGVsUmF0aW9cbiAgICBdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3Ryb2tlU3RhdGV9IHN0YXRlIFN0YXRlLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6Q2FudmFzUmVwbGF5LCBpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0cm9rZVN0YXRlLCAoaW1wb3J0KFwiLi4vLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdCkpOkFycmF5PCo+fSBjcmVhdGVGaWxsIENyZWF0ZSBmaWxsLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS51cGRhdGVGaWxsU3R5bGUgPSBmdW5jdGlvbiB1cGRhdGVGaWxsU3R5bGUgKHN0YXRlLCBjcmVhdGVGaWxsLCBnZW9tZXRyeSkge1xuICAgIHZhciBmaWxsU3R5bGUgPSBzdGF0ZS5maWxsU3R5bGU7XG4gICAgaWYgKHR5cGVvZiBmaWxsU3R5bGUgIT09ICdzdHJpbmcnIHx8IHN0YXRlLmN1cnJlbnRGaWxsU3R5bGUgIT0gZmlsbFN0eWxlKSB7XG4gICAgICBpZiAoZmlsbFN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChjcmVhdGVGaWxsLmNhbGwodGhpcywgc3RhdGUsIGdlb21ldHJ5KSk7XG4gICAgICB9XG4gICAgICBzdGF0ZS5jdXJyZW50RmlsbFN0eWxlID0gZmlsbFN0eWxlO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0cm9rZVN0YXRlfSBzdGF0ZSBTdGF0ZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOkNhbnZhc1JlcGxheSwgaW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdHJva2VTdGF0ZSl9IGFwcGx5U3Ryb2tlIEFwcGx5IHN0cm9rZS5cbiAgICovXG4gIENhbnZhc1JlcGxheS5wcm90b3R5cGUudXBkYXRlU3Ryb2tlU3R5bGUgPSBmdW5jdGlvbiB1cGRhdGVTdHJva2VTdHlsZSAoc3RhdGUsIGFwcGx5U3Ryb2tlKSB7XG4gICAgdmFyIHN0cm9rZVN0eWxlID0gc3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgdmFyIGxpbmVDYXAgPSBzdGF0ZS5saW5lQ2FwO1xuICAgIHZhciBsaW5lRGFzaCA9IHN0YXRlLmxpbmVEYXNoO1xuICAgIHZhciBsaW5lRGFzaE9mZnNldCA9IHN0YXRlLmxpbmVEYXNoT2Zmc2V0O1xuICAgIHZhciBsaW5lSm9pbiA9IHN0YXRlLmxpbmVKb2luO1xuICAgIHZhciBsaW5lV2lkdGggPSBzdGF0ZS5saW5lV2lkdGg7XG4gICAgdmFyIG1pdGVyTGltaXQgPSBzdGF0ZS5taXRlckxpbWl0O1xuICAgIGlmIChzdGF0ZS5jdXJyZW50U3Ryb2tlU3R5bGUgIT0gc3Ryb2tlU3R5bGUgfHxcbiAgICAgICAgc3RhdGUuY3VycmVudExpbmVDYXAgIT0gbGluZUNhcCB8fFxuICAgICAgICAobGluZURhc2ggIT0gc3RhdGUuY3VycmVudExpbmVEYXNoICYmICFlcXVhbHMoc3RhdGUuY3VycmVudExpbmVEYXNoLCBsaW5lRGFzaCkpIHx8XG4gICAgICAgIHN0YXRlLmN1cnJlbnRMaW5lRGFzaE9mZnNldCAhPSBsaW5lRGFzaE9mZnNldCB8fFxuICAgICAgICBzdGF0ZS5jdXJyZW50TGluZUpvaW4gIT0gbGluZUpvaW4gfHxcbiAgICAgICAgc3RhdGUuY3VycmVudExpbmVXaWR0aCAhPSBsaW5lV2lkdGggfHxcbiAgICAgICAgc3RhdGUuY3VycmVudE1pdGVyTGltaXQgIT0gbWl0ZXJMaW1pdCkge1xuICAgICAgaWYgKHN0cm9rZVN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXBwbHlTdHJva2UuY2FsbCh0aGlzLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgICBzdGF0ZS5jdXJyZW50U3Ryb2tlU3R5bGUgPSBzdHJva2VTdHlsZTtcbiAgICAgIHN0YXRlLmN1cnJlbnRMaW5lQ2FwID0gbGluZUNhcDtcbiAgICAgIHN0YXRlLmN1cnJlbnRMaW5lRGFzaCA9IGxpbmVEYXNoO1xuICAgICAgc3RhdGUuY3VycmVudExpbmVEYXNoT2Zmc2V0ID0gbGluZURhc2hPZmZzZXQ7XG4gICAgICBzdGF0ZS5jdXJyZW50TGluZUpvaW4gPSBsaW5lSm9pbjtcbiAgICAgIHN0YXRlLmN1cnJlbnRMaW5lV2lkdGggPSBsaW5lV2lkdGg7XG4gICAgICBzdGF0ZS5jdXJyZW50TWl0ZXJMaW1pdCA9IG1pdGVyTGltaXQ7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICovXG4gIENhbnZhc1JlcGxheS5wcm90b3R5cGUuZW5kR2VvbWV0cnkgPSBmdW5jdGlvbiBlbmRHZW9tZXRyeSAoZ2VvbWV0cnksIGZlYXR1cmUpIHtcbiAgICB0aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjFfWzJdID0gdGhpcy5pbnN0cnVjdGlvbnMubGVuZ3RoO1xuICAgIHRoaXMuYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMV8gPSBudWxsO1xuICAgIHRoaXMuYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMl9bMl0gPSB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5sZW5ndGg7XG4gICAgdGhpcy5iZWdpbkdlb21ldHJ5SW5zdHJ1Y3Rpb24yXyA9IG51bGw7XG4gICAgdmFyIGVuZEdlb21ldHJ5SW5zdHJ1Y3Rpb24gPSBbQ2FudmFzSW5zdHJ1Y3Rpb24uRU5EX0dFT01FVFJZLCBmZWF0dXJlXTtcbiAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKGVuZEdlb21ldHJ5SW5zdHJ1Y3Rpb24pO1xuICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goZW5kR2VvbWV0cnlJbnN0cnVjdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgYnVmZmVyZWQgcmVuZGVyaW5nIGV4dGVudC4gIFJlbmRlcmluZyB3aWxsIGJlIGNsaXBwZWQgdG8gdGhlIGV4dGVudFxuICAgKiBwcm92aWRlZCB0byB0aGUgY29uc3RydWN0b3IuICBUbyBhY2NvdW50IGZvciBzeW1ib2xpemVycyB0aGF0IG1heSBpbnRlcnNlY3RcbiAgICogdGhpcyBleHRlbnQsIHdlIGNhbGN1bGF0ZSBhIGJ1ZmZlcmVkIGV4dGVudCAoZS5nLiBiYXNlZCBvbiBzdHJva2Ugd2lkdGgpLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBUaGUgYnVmZmVyZWQgcmVuZGVyaW5nIGV4dGVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5nZXRCdWZmZXJlZE1heEV4dGVudCA9IGZ1bmN0aW9uIGdldEJ1ZmZlcmVkTWF4RXh0ZW50ICgpIHtcbiAgICBpZiAoIXRoaXMuYnVmZmVyZWRNYXhFeHRlbnRfKSB7XG4gICAgICB0aGlzLmJ1ZmZlcmVkTWF4RXh0ZW50XyA9IGNsb25lKHRoaXMubWF4RXh0ZW50KTtcbiAgICAgIGlmICh0aGlzLm1heExpbmVXaWR0aCA+IDApIHtcbiAgICAgICAgdmFyIHdpZHRoID0gdGhpcy5yZXNvbHV0aW9uICogKHRoaXMubWF4TGluZVdpZHRoICsgMSkgLyAyO1xuICAgICAgICBidWZmZXIodGhpcy5idWZmZXJlZE1heEV4dGVudF8sIHdpZHRoLCB0aGlzLmJ1ZmZlcmVkTWF4RXh0ZW50Xyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmJ1ZmZlcmVkTWF4RXh0ZW50XztcbiAgfTtcblxuICByZXR1cm4gQ2FudmFzUmVwbGF5O1xufShWZWN0b3JDb250ZXh0KSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzUmVwbGF5O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZXBsYXkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9jYW52YXMvSW1hZ2VSZXBsYXlcbiAqL1xuaW1wb3J0IENhbnZhc0luc3RydWN0aW9uIGZyb20gJy4vSW5zdHJ1Y3Rpb24uanMnO1xuaW1wb3J0IENhbnZhc1JlcGxheSBmcm9tICcuL1JlcGxheS5qcyc7XG5cbnZhciBDYW52YXNJbWFnZVJlcGxheSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKENhbnZhc1JlcGxheSkge1xuICBmdW5jdGlvbiBDYW52YXNJbWFnZVJlcGxheSh0b2xlcmFuY2UsIG1heEV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgb3ZlcmxhcHMsIGRlY2x1dHRlclRyZWUpIHtcbiAgICBDYW52YXNSZXBsYXkuY2FsbCh0aGlzLCB0b2xlcmFuY2UsIG1heEV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgb3ZlcmxhcHMsIGRlY2x1dHRlclRyZWUpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3VwfVxuICAgICAqL1xuICAgIHRoaXMuZGVjbHV0dGVyR3JvdXBfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLmhpdERldGVjdGlvbkltYWdlXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5pbWFnZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmFuY2hvclhfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmFuY2hvcllfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmhlaWdodF8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMub3BhY2l0eV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMub3JpZ2luWF8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMub3JpZ2luWV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLnJvdGF0ZVdpdGhWaWV3XyA9IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5yb3RhdGlvbl8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMuc2NhbGVfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLndpZHRoXyA9IHVuZGVmaW5lZDtcblxuICB9XG5cbiAgaWYgKCBDYW52YXNSZXBsYXkgKSBDYW52YXNJbWFnZVJlcGxheS5fX3Byb3RvX18gPSBDYW52YXNSZXBsYXk7XG4gIENhbnZhc0ltYWdlUmVwbGF5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIENhbnZhc1JlcGxheSAmJiBDYW52YXNSZXBsYXkucHJvdG90eXBlICk7XG4gIENhbnZhc0ltYWdlUmVwbGF5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc0ltYWdlUmVwbGF5O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE15IGVuZC5cbiAgICovXG4gIENhbnZhc0ltYWdlUmVwbGF5LnByb3RvdHlwZS5kcmF3Q29vcmRpbmF0ZXNfID0gZnVuY3Rpb24gZHJhd0Nvb3JkaW5hdGVzXyAoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kRmxhdENvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZmFsc2UsIGZhbHNlKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc0ltYWdlUmVwbGF5LnByb3RvdHlwZS5kcmF3UG9pbnQgPSBmdW5jdGlvbiBkcmF3UG9pbnQgKHBvaW50R2VvbWV0cnksIGZlYXR1cmUpIHtcbiAgICBpZiAoIXRoaXMuaW1hZ2VfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuYmVnaW5HZW9tZXRyeShwb2ludEdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gcG9pbnRHZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgc3RyaWRlID0gcG9pbnRHZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICB2YXIgbXlCZWdpbiA9IHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgIHZhciBteUVuZCA9IHRoaXMuZHJhd0Nvb3JkaW5hdGVzXyhmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSk7XG4gICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICBDYW52YXNJbnN0cnVjdGlvbi5EUkFXX0lNQUdFLCBteUJlZ2luLCBteUVuZCwgdGhpcy5pbWFnZV8sXG4gICAgICAvLyBSZW1haW5pbmcgYXJndW1lbnRzIHRvIERSQVdfSU1BR0UgYXJlIGluIGFscGhhYmV0aWNhbCBvcmRlclxuICAgICAgdGhpcy5hbmNob3JYXywgdGhpcy5hbmNob3JZXywgdGhpcy5kZWNsdXR0ZXJHcm91cF8sIHRoaXMuaGVpZ2h0XywgdGhpcy5vcGFjaXR5XyxcbiAgICAgIHRoaXMub3JpZ2luWF8sIHRoaXMub3JpZ2luWV8sIHRoaXMucm90YXRlV2l0aFZpZXdfLCB0aGlzLnJvdGF0aW9uXyxcbiAgICAgIHRoaXMuc2NhbGVfICogdGhpcy5waXhlbFJhdGlvLCB0aGlzLndpZHRoX1xuICAgIF0pO1xuICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uRFJBV19JTUFHRSwgbXlCZWdpbiwgbXlFbmQsIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfLFxuICAgICAgLy8gUmVtYWluaW5nIGFyZ3VtZW50cyB0byBEUkFXX0lNQUdFIGFyZSBpbiBhbHBoYWJldGljYWwgb3JkZXJcbiAgICAgIHRoaXMuYW5jaG9yWF8sIHRoaXMuYW5jaG9yWV8sIHRoaXMuZGVjbHV0dGVyR3JvdXBfLCB0aGlzLmhlaWdodF8sIHRoaXMub3BhY2l0eV8sXG4gICAgICB0aGlzLm9yaWdpblhfLCB0aGlzLm9yaWdpbllfLCB0aGlzLnJvdGF0ZVdpdGhWaWV3XywgdGhpcy5yb3RhdGlvbl8sXG4gICAgICB0aGlzLnNjYWxlXywgdGhpcy53aWR0aF9cbiAgICBdKTtcbiAgICB0aGlzLmVuZEdlb21ldHJ5KHBvaW50R2VvbWV0cnksIGZlYXR1cmUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzSW1hZ2VSZXBsYXkucHJvdG90eXBlLmRyYXdNdWx0aVBvaW50ID0gZnVuY3Rpb24gZHJhd011bHRpUG9pbnQgKG11bHRpUG9pbnRHZW9tZXRyeSwgZmVhdHVyZSkge1xuICAgIGlmICghdGhpcy5pbWFnZV8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5iZWdpbkdlb21ldHJ5KG11bHRpUG9pbnRHZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IG11bHRpUG9pbnRHZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgc3RyaWRlID0gbXVsdGlQb2ludEdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgIHZhciBteUJlZ2luID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgdmFyIG15RW5kID0gdGhpcy5kcmF3Q29vcmRpbmF0ZXNfKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUpO1xuICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uRFJBV19JTUFHRSwgbXlCZWdpbiwgbXlFbmQsIHRoaXMuaW1hZ2VfLFxuICAgICAgLy8gUmVtYWluaW5nIGFyZ3VtZW50cyB0byBEUkFXX0lNQUdFIGFyZSBpbiBhbHBoYWJldGljYWwgb3JkZXJcbiAgICAgIHRoaXMuYW5jaG9yWF8sIHRoaXMuYW5jaG9yWV8sIHRoaXMuZGVjbHV0dGVyR3JvdXBfLCB0aGlzLmhlaWdodF8sIHRoaXMub3BhY2l0eV8sXG4gICAgICB0aGlzLm9yaWdpblhfLCB0aGlzLm9yaWdpbllfLCB0aGlzLnJvdGF0ZVdpdGhWaWV3XywgdGhpcy5yb3RhdGlvbl8sXG4gICAgICB0aGlzLnNjYWxlXyAqIHRoaXMucGl4ZWxSYXRpbywgdGhpcy53aWR0aF9cbiAgICBdKTtcbiAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgIENhbnZhc0luc3RydWN0aW9uLkRSQVdfSU1BR0UsIG15QmVnaW4sIG15RW5kLCB0aGlzLmhpdERldGVjdGlvbkltYWdlXyxcbiAgICAgIC8vIFJlbWFpbmluZyBhcmd1bWVudHMgdG8gRFJBV19JTUFHRSBhcmUgaW4gYWxwaGFiZXRpY2FsIG9yZGVyXG4gICAgICB0aGlzLmFuY2hvclhfLCB0aGlzLmFuY2hvcllfLCB0aGlzLmRlY2x1dHRlckdyb3VwXywgdGhpcy5oZWlnaHRfLCB0aGlzLm9wYWNpdHlfLFxuICAgICAgdGhpcy5vcmlnaW5YXywgdGhpcy5vcmlnaW5ZXywgdGhpcy5yb3RhdGVXaXRoVmlld18sIHRoaXMucm90YXRpb25fLFxuICAgICAgdGhpcy5zY2FsZV8sIHRoaXMud2lkdGhfXG4gICAgXSk7XG4gICAgdGhpcy5lbmRHZW9tZXRyeShtdWx0aVBvaW50R2VvbWV0cnksIGZlYXR1cmUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzSW1hZ2VSZXBsYXkucHJvdG90eXBlLmZpbmlzaCA9IGZ1bmN0aW9uIGZpbmlzaCAoKSB7XG4gICAgdGhpcy5yZXZlcnNlSGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zKCk7XG4gICAgLy8gRklYTUUgdGhpcyBkb2Vzbid0IHJlYWxseSBwcm90ZWN0IHVzIGFnYWluc3QgZnVydGhlciBjYWxscyB0byBkcmF3Kkdlb21ldHJ5XG4gICAgdGhpcy5hbmNob3JYXyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmFuY2hvcllfID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfID0gbnVsbDtcbiAgICB0aGlzLmltYWdlXyA9IG51bGw7XG4gICAgdGhpcy5oZWlnaHRfID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2NhbGVfID0gdW5kZWZpbmVkO1xuICAgIHRoaXMub3BhY2l0eV8gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5vcmlnaW5YXyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm9yaWdpbllfID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucm90YXRlV2l0aFZpZXdfID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucm90YXRpb25fID0gdW5kZWZpbmVkO1xuICAgIHRoaXMud2lkdGhfID0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzSW1hZ2VSZXBsYXkucHJvdG90eXBlLnNldEltYWdlU3R5bGUgPSBmdW5jdGlvbiBzZXRJbWFnZVN0eWxlIChpbWFnZVN0eWxlLCBkZWNsdXR0ZXJHcm91cCkge1xuICAgIHZhciBhbmNob3IgPSBpbWFnZVN0eWxlLmdldEFuY2hvcigpO1xuICAgIHZhciBzaXplID0gaW1hZ2VTdHlsZS5nZXRTaXplKCk7XG4gICAgdmFyIGhpdERldGVjdGlvbkltYWdlID0gaW1hZ2VTdHlsZS5nZXRIaXREZXRlY3Rpb25JbWFnZSgxKTtcbiAgICB2YXIgaW1hZ2UgPSBpbWFnZVN0eWxlLmdldEltYWdlKDEpO1xuICAgIHZhciBvcmlnaW4gPSBpbWFnZVN0eWxlLmdldE9yaWdpbigpO1xuICAgIHRoaXMuYW5jaG9yWF8gPSBhbmNob3JbMF07XG4gICAgdGhpcy5hbmNob3JZXyA9IGFuY2hvclsxXTtcbiAgICB0aGlzLmRlY2x1dHRlckdyb3VwXyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3VwfSAqLyAoZGVjbHV0dGVyR3JvdXApO1xuICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfID0gaGl0RGV0ZWN0aW9uSW1hZ2U7XG4gICAgdGhpcy5pbWFnZV8gPSBpbWFnZTtcbiAgICB0aGlzLmhlaWdodF8gPSBzaXplWzFdO1xuICAgIHRoaXMub3BhY2l0eV8gPSBpbWFnZVN0eWxlLmdldE9wYWNpdHkoKTtcbiAgICB0aGlzLm9yaWdpblhfID0gb3JpZ2luWzBdO1xuICAgIHRoaXMub3JpZ2luWV8gPSBvcmlnaW5bMV07XG4gICAgdGhpcy5yb3RhdGVXaXRoVmlld18gPSBpbWFnZVN0eWxlLmdldFJvdGF0ZVdpdGhWaWV3KCk7XG4gICAgdGhpcy5yb3RhdGlvbl8gPSBpbWFnZVN0eWxlLmdldFJvdGF0aW9uKCk7XG4gICAgdGhpcy5zY2FsZV8gPSBpbWFnZVN0eWxlLmdldFNjYWxlKCk7XG4gICAgdGhpcy53aWR0aF8gPSBzaXplWzBdO1xuICB9O1xuXG4gIHJldHVybiBDYW52YXNJbWFnZVJlcGxheTtcbn0oQ2FudmFzUmVwbGF5KSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzSW1hZ2VSZXBsYXk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlUmVwbGF5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvY2FudmFzL0xpbmVTdHJpbmdSZXBsYXlcbiAqL1xuaW1wb3J0IENhbnZhc0luc3RydWN0aW9uLCB7c3Ryb2tlSW5zdHJ1Y3Rpb24sIGJlZ2luUGF0aEluc3RydWN0aW9ufSBmcm9tICcuL0luc3RydWN0aW9uLmpzJztcbmltcG9ydCBDYW52YXNSZXBsYXkgZnJvbSAnLi9SZXBsYXkuanMnO1xuXG52YXIgQ2FudmFzTGluZVN0cmluZ1JlcGxheSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKENhbnZhc1JlcGxheSkge1xuICBmdW5jdGlvbiBDYW52YXNMaW5lU3RyaW5nUmVwbGF5KHRvbGVyYW5jZSwgbWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBvdmVybGFwcywgZGVjbHV0dGVyVHJlZSkge1xuICAgIENhbnZhc1JlcGxheS5jYWxsKHRoaXMsIHRvbGVyYW5jZSwgbWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBvdmVybGFwcywgZGVjbHV0dGVyVHJlZSk7XG4gIH1cblxuICBpZiAoIENhbnZhc1JlcGxheSApIENhbnZhc0xpbmVTdHJpbmdSZXBsYXkuX19wcm90b19fID0gQ2FudmFzUmVwbGF5O1xuICBDYW52YXNMaW5lU3RyaW5nUmVwbGF5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIENhbnZhc1JlcGxheSAmJiBDYW52YXNSZXBsYXkucHJvdG90eXBlICk7XG4gIENhbnZhc0xpbmVTdHJpbmdSZXBsYXkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2FudmFzTGluZVN0cmluZ1JlcGxheTtcblxuICAvKipcbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7bnVtYmVyfSBlbmQuXG4gICAqL1xuICBDYW52YXNMaW5lU3RyaW5nUmVwbGF5LnByb3RvdHlwZS5kcmF3RmxhdENvb3JkaW5hdGVzXyA9IGZ1bmN0aW9uIGRyYXdGbGF0Q29vcmRpbmF0ZXNfIChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgICB2YXIgbXlCZWdpbiA9IHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgIHZhciBteUVuZCA9IHRoaXMuYXBwZW5kRmxhdENvb3JkaW5hdGVzKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBmYWxzZSwgZmFsc2UpO1xuICAgIHZhciBtb3ZlVG9MaW5lVG9JbnN0cnVjdGlvbiA9IFtDYW52YXNJbnN0cnVjdGlvbi5NT1ZFX1RPX0xJTkVfVE8sIG15QmVnaW4sIG15RW5kXTtcbiAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKG1vdmVUb0xpbmVUb0luc3RydWN0aW9uKTtcbiAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKG1vdmVUb0xpbmVUb0luc3RydWN0aW9uKTtcbiAgICByZXR1cm4gZW5kO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzTGluZVN0cmluZ1JlcGxheS5wcm90b3R5cGUuZHJhd0xpbmVTdHJpbmcgPSBmdW5jdGlvbiBkcmF3TGluZVN0cmluZyAobGluZVN0cmluZ0dlb21ldHJ5LCBmZWF0dXJlKSB7XG4gICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICB2YXIgc3Ryb2tlU3R5bGUgPSBzdGF0ZS5zdHJva2VTdHlsZTtcbiAgICB2YXIgbGluZVdpZHRoID0gc3RhdGUubGluZVdpZHRoO1xuICAgIGlmIChzdHJva2VTdHlsZSA9PT0gdW5kZWZpbmVkIHx8IGxpbmVXaWR0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMudXBkYXRlU3Ryb2tlU3R5bGUoc3RhdGUsIHRoaXMuYXBwbHlTdHJva2UpO1xuICAgIHRoaXMuYmVnaW5HZW9tZXRyeShsaW5lU3RyaW5nR2VvbWV0cnksIGZlYXR1cmUpO1xuICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uU0VUX1NUUk9LRV9TVFlMRSxcbiAgICAgIHN0YXRlLnN0cm9rZVN0eWxlLCBzdGF0ZS5saW5lV2lkdGgsIHN0YXRlLmxpbmVDYXAsIHN0YXRlLmxpbmVKb2luLFxuICAgICAgc3RhdGUubWl0ZXJMaW1pdCwgc3RhdGUubGluZURhc2gsIHN0YXRlLmxpbmVEYXNoT2Zmc2V0XG4gICAgXSwgYmVnaW5QYXRoSW5zdHJ1Y3Rpb24pO1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBsaW5lU3RyaW5nR2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIHN0cmlkZSA9IGxpbmVTdHJpbmdHZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICB0aGlzLmRyYXdGbGF0Q29vcmRpbmF0ZXNfKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlKTtcbiAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKHN0cm9rZUluc3RydWN0aW9uKTtcbiAgICB0aGlzLmVuZEdlb21ldHJ5KGxpbmVTdHJpbmdHZW9tZXRyeSwgZmVhdHVyZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNMaW5lU3RyaW5nUmVwbGF5LnByb3RvdHlwZS5kcmF3TXVsdGlMaW5lU3RyaW5nID0gZnVuY3Rpb24gZHJhd011bHRpTGluZVN0cmluZyAobXVsdGlMaW5lU3RyaW5nR2VvbWV0cnksIGZlYXR1cmUpIHtcbiAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgIHZhciBzdHJva2VTdHlsZSA9IHN0YXRlLnN0cm9rZVN0eWxlO1xuICAgIHZhciBsaW5lV2lkdGggPSBzdGF0ZS5saW5lV2lkdGg7XG4gICAgaWYgKHN0cm9rZVN0eWxlID09PSB1bmRlZmluZWQgfHwgbGluZVdpZHRoID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVTdHJva2VTdHlsZShzdGF0ZSwgdGhpcy5hcHBseVN0cm9rZSk7XG4gICAgdGhpcy5iZWdpbkdlb21ldHJ5KG11bHRpTGluZVN0cmluZ0dlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9TVFJPS0VfU1RZTEUsXG4gICAgICBzdGF0ZS5zdHJva2VTdHlsZSwgc3RhdGUubGluZVdpZHRoLCBzdGF0ZS5saW5lQ2FwLCBzdGF0ZS5saW5lSm9pbixcbiAgICAgIHN0YXRlLm1pdGVyTGltaXQsIHN0YXRlLmxpbmVEYXNoLCBzdGF0ZS5saW5lRGFzaE9mZnNldFxuICAgIF0sIGJlZ2luUGF0aEluc3RydWN0aW9uKTtcbiAgICB2YXIgZW5kcyA9IG11bHRpTGluZVN0cmluZ0dlb21ldHJ5LmdldEVuZHMoKTtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gbXVsdGlMaW5lU3RyaW5nR2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIHN0cmlkZSA9IG11bHRpTGluZVN0cmluZ0dlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgIHZhciBvZmZzZXQgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgb2Zmc2V0ID0gdGhpcy5kcmF3RmxhdENvb3JkaW5hdGVzXyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1tpXSwgc3RyaWRlKTtcbiAgICB9XG4gICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChzdHJva2VJbnN0cnVjdGlvbik7XG4gICAgdGhpcy5lbmRHZW9tZXRyeShtdWx0aUxpbmVTdHJpbmdHZW9tZXRyeSwgZmVhdHVyZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNMaW5lU3RyaW5nUmVwbGF5LnByb3RvdHlwZS5maW5pc2ggPSBmdW5jdGlvbiBmaW5pc2ggKCkge1xuICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgaWYgKHN0YXRlLmxhc3RTdHJva2UgIT0gdW5kZWZpbmVkICYmIHN0YXRlLmxhc3RTdHJva2UgIT0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goc3Ryb2tlSW5zdHJ1Y3Rpb24pO1xuICAgIH1cbiAgICB0aGlzLnJldmVyc2VIaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMoKTtcbiAgICB0aGlzLnN0YXRlID0gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2MuXG4gICAqL1xuICBDYW52YXNMaW5lU3RyaW5nUmVwbGF5LnByb3RvdHlwZS5hcHBseVN0cm9rZSA9IGZ1bmN0aW9uIGFwcGx5U3Ryb2tlIChzdGF0ZSkge1xuICAgIGlmIChzdGF0ZS5sYXN0U3Ryb2tlICE9IHVuZGVmaW5lZCAmJiBzdGF0ZS5sYXN0U3Ryb2tlICE9IHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKHN0cm9rZUluc3RydWN0aW9uKTtcbiAgICAgIHN0YXRlLmxhc3RTdHJva2UgPSB0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICB9XG4gICAgc3RhdGUubGFzdFN0cm9rZSA9IDA7XG4gICAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5hcHBseVN0cm9rZS5jYWxsKHRoaXMsIHN0YXRlKTtcbiAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKGJlZ2luUGF0aEluc3RydWN0aW9uKTtcbiAgfTtcblxuICByZXR1cm4gQ2FudmFzTGluZVN0cmluZ1JlcGxheTtcbn0oQ2FudmFzUmVwbGF5KSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzTGluZVN0cmluZ1JlcGxheTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGluZVN0cmluZ1JlcGxheS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhcy9Qb2x5Z29uUmVwbGF5XG4gKi9cbmltcG9ydCB7YXNTdHJpbmd9IGZyb20gJy4uLy4uL2NvbG9yLmpzJztcbmltcG9ydCB7c25hcH0gZnJvbSAnLi4vLi4vZ2VvbS9mbGF0L3NpbXBsaWZ5LmpzJztcbmltcG9ydCB7ZGVmYXVsdEZpbGxTdHlsZX0gZnJvbSAnLi4vY2FudmFzLmpzJztcbmltcG9ydCBDYW52YXNJbnN0cnVjdGlvbiwge1xuICBmaWxsSW5zdHJ1Y3Rpb24sIHN0cm9rZUluc3RydWN0aW9uLCBiZWdpblBhdGhJbnN0cnVjdGlvbiwgY2xvc2VQYXRoSW5zdHJ1Y3Rpb25cbn0gZnJvbSAnLi9JbnN0cnVjdGlvbi5qcyc7XG5pbXBvcnQgQ2FudmFzUmVwbGF5IGZyb20gJy4vUmVwbGF5LmpzJztcblxuXG52YXIgQ2FudmFzUG9seWdvblJlcGxheSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKENhbnZhc1JlcGxheSkge1xuICBmdW5jdGlvbiBDYW52YXNQb2x5Z29uUmVwbGF5KHRvbGVyYW5jZSwgbWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBvdmVybGFwcywgZGVjbHV0dGVyVHJlZSkge1xuICAgIENhbnZhc1JlcGxheS5jYWxsKHRoaXMsIHRvbGVyYW5jZSwgbWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBvdmVybGFwcywgZGVjbHV0dGVyVHJlZSk7XG4gIH1cblxuICBpZiAoIENhbnZhc1JlcGxheSApIENhbnZhc1BvbHlnb25SZXBsYXkuX19wcm90b19fID0gQ2FudmFzUmVwbGF5O1xuICBDYW52YXNQb2x5Z29uUmVwbGF5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIENhbnZhc1JlcGxheSAmJiBDYW52YXNSZXBsYXkucHJvdG90eXBlICk7XG4gIENhbnZhc1BvbHlnb25SZXBsYXkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2FudmFzUG9seWdvblJlcGxheTtcblxuICAvKipcbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7bnVtYmVyfSBFbmQuXG4gICAqL1xuICBDYW52YXNQb2x5Z29uUmVwbGF5LnByb3RvdHlwZS5kcmF3RmxhdENvb3JkaW5hdGVzc18gPSBmdW5jdGlvbiBkcmF3RmxhdENvb3JkaW5hdGVzc18gKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUpIHtcbiAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgIHZhciBmaWxsID0gc3RhdGUuZmlsbFN0eWxlICE9PSB1bmRlZmluZWQ7XG4gICAgdmFyIHN0cm9rZSA9IHN0YXRlLnN0cm9rZVN0eWxlICE9IHVuZGVmaW5lZDtcbiAgICB2YXIgbnVtRW5kcyA9IGVuZHMubGVuZ3RoO1xuICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goYmVnaW5QYXRoSW5zdHJ1Y3Rpb24pO1xuICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goYmVnaW5QYXRoSW5zdHJ1Y3Rpb24pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtRW5kczsgKytpKSB7XG4gICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgIHZhciBteUJlZ2luID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICB2YXIgbXlFbmQgPSB0aGlzLmFwcGVuZEZsYXRDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRydWUsICFzdHJva2UpO1xuICAgICAgdmFyIG1vdmVUb0xpbmVUb0luc3RydWN0aW9uID0gW0NhbnZhc0luc3RydWN0aW9uLk1PVkVfVE9fTElORV9UTywgbXlCZWdpbiwgbXlFbmRdO1xuICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChtb3ZlVG9MaW5lVG9JbnN0cnVjdGlvbik7XG4gICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKG1vdmVUb0xpbmVUb0luc3RydWN0aW9uKTtcbiAgICAgIGlmIChzdHJva2UpIHtcbiAgICAgICAgLy8gUGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uOiBvbmx5IGNhbGwgY2xvc2VQYXRoKCkgd2hlbiB3ZSBoYXZlIGEgc3Ryb2tlLlxuICAgICAgICAvLyBPdGhlcndpc2UgdGhlIHJpbmcgaXMgY2xvc2VkIGFscmVhZHkgKHNlZSBhcHBlbmRGbGF0Q29vcmRpbmF0ZXMgYWJvdmUpLlxuICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKGNsb3NlUGF0aEluc3RydWN0aW9uKTtcbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChjbG9zZVBhdGhJbnN0cnVjdGlvbik7XG4gICAgICB9XG4gICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIGlmIChmaWxsKSB7XG4gICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKGZpbGxJbnN0cnVjdGlvbik7XG4gICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKGZpbGxJbnN0cnVjdGlvbik7XG4gICAgfVxuICAgIGlmIChzdHJva2UpIHtcbiAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goc3Ryb2tlSW5zdHJ1Y3Rpb24pO1xuICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChzdHJva2VJbnN0cnVjdGlvbik7XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNQb2x5Z29uUmVwbGF5LnByb3RvdHlwZS5kcmF3Q2lyY2xlID0gZnVuY3Rpb24gZHJhd0NpcmNsZSAoY2lyY2xlR2VvbWV0cnksIGZlYXR1cmUpIHtcbiAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgIHZhciBmaWxsU3R5bGUgPSBzdGF0ZS5maWxsU3R5bGU7XG4gICAgdmFyIHN0cm9rZVN0eWxlID0gc3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgaWYgKGZpbGxTdHlsZSA9PT0gdW5kZWZpbmVkICYmIHN0cm9rZVN0eWxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zZXRGaWxsU3Ryb2tlU3R5bGVzXyhjaXJjbGVHZW9tZXRyeSk7XG4gICAgdGhpcy5iZWdpbkdlb21ldHJ5KGNpcmNsZUdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICBpZiAoc3RhdGUuZmlsbFN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5TRVRfRklMTF9TVFlMRSxcbiAgICAgICAgYXNTdHJpbmcoZGVmYXVsdEZpbGxTdHlsZSlcbiAgICAgIF0pO1xuICAgIH1cbiAgICBpZiAoc3RhdGUuc3Ryb2tlU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9TVFJPS0VfU1RZTEUsXG4gICAgICAgIHN0YXRlLnN0cm9rZVN0eWxlLCBzdGF0ZS5saW5lV2lkdGgsIHN0YXRlLmxpbmVDYXAsIHN0YXRlLmxpbmVKb2luLFxuICAgICAgICBzdGF0ZS5taXRlckxpbWl0LCBzdGF0ZS5saW5lRGFzaCwgc3RhdGUubGluZURhc2hPZmZzZXRcbiAgICAgIF0pO1xuICAgIH1cbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gY2lyY2xlR2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIHN0cmlkZSA9IGNpcmNsZUdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgIHZhciBteUJlZ2luID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgdGhpcy5hcHBlbmRGbGF0Q29vcmRpbmF0ZXMoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSwgZmFsc2UsIGZhbHNlKTtcbiAgICB2YXIgY2lyY2xlSW5zdHJ1Y3Rpb24gPSBbQ2FudmFzSW5zdHJ1Y3Rpb24uQ0lSQ0xFLCBteUJlZ2luXTtcbiAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKGJlZ2luUGF0aEluc3RydWN0aW9uLCBjaXJjbGVJbnN0cnVjdGlvbik7XG4gICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChiZWdpblBhdGhJbnN0cnVjdGlvbiwgY2lyY2xlSW5zdHJ1Y3Rpb24pO1xuICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goZmlsbEluc3RydWN0aW9uKTtcbiAgICBpZiAoc3RhdGUuZmlsbFN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goZmlsbEluc3RydWN0aW9uKTtcbiAgICB9XG4gICAgaWYgKHN0YXRlLnN0cm9rZVN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goc3Ryb2tlSW5zdHJ1Y3Rpb24pO1xuICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChzdHJva2VJbnN0cnVjdGlvbik7XG4gICAgfVxuICAgIHRoaXMuZW5kR2VvbWV0cnkoY2lyY2xlR2VvbWV0cnksIGZlYXR1cmUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzUG9seWdvblJlcGxheS5wcm90b3R5cGUuZHJhd1BvbHlnb24gPSBmdW5jdGlvbiBkcmF3UG9seWdvbiAocG9seWdvbkdlb21ldHJ5LCBmZWF0dXJlKSB7XG4gICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICB2YXIgZmlsbFN0eWxlID0gc3RhdGUuZmlsbFN0eWxlO1xuICAgIHZhciBzdHJva2VTdHlsZSA9IHN0YXRlLnN0cm9rZVN0eWxlO1xuICAgIGlmIChmaWxsU3R5bGUgPT09IHVuZGVmaW5lZCAmJiBzdHJva2VTdHlsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2V0RmlsbFN0cm9rZVN0eWxlc18ocG9seWdvbkdlb21ldHJ5KTtcbiAgICB0aGlzLmJlZ2luR2VvbWV0cnkocG9seWdvbkdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICBpZiAoc3RhdGUuZmlsbFN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5TRVRfRklMTF9TVFlMRSxcbiAgICAgICAgYXNTdHJpbmcoZGVmYXVsdEZpbGxTdHlsZSlcbiAgICAgIF0pO1xuICAgIH1cbiAgICBpZiAoc3RhdGUuc3Ryb2tlU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9TVFJPS0VfU1RZTEUsXG4gICAgICAgIHN0YXRlLnN0cm9rZVN0eWxlLCBzdGF0ZS5saW5lV2lkdGgsIHN0YXRlLmxpbmVDYXAsIHN0YXRlLmxpbmVKb2luLFxuICAgICAgICBzdGF0ZS5taXRlckxpbWl0LCBzdGF0ZS5saW5lRGFzaCwgc3RhdGUubGluZURhc2hPZmZzZXRcbiAgICAgIF0pO1xuICAgIH1cbiAgICB2YXIgZW5kcyA9IHBvbHlnb25HZW9tZXRyeS5nZXRFbmRzKCk7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHBvbHlnb25HZW9tZXRyeS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpO1xuICAgIHZhciBzdHJpZGUgPSBwb2x5Z29uR2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgdGhpcy5kcmF3RmxhdENvb3JkaW5hdGVzc18oZmxhdENvb3JkaW5hdGVzLCAwLCBlbmRzLCBzdHJpZGUpO1xuICAgIHRoaXMuZW5kR2VvbWV0cnkocG9seWdvbkdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc1BvbHlnb25SZXBsYXkucHJvdG90eXBlLmRyYXdNdWx0aVBvbHlnb24gPSBmdW5jdGlvbiBkcmF3TXVsdGlQb2x5Z29uIChtdWx0aVBvbHlnb25HZW9tZXRyeSwgZmVhdHVyZSkge1xuICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgdmFyIGZpbGxTdHlsZSA9IHN0YXRlLmZpbGxTdHlsZTtcbiAgICB2YXIgc3Ryb2tlU3R5bGUgPSBzdGF0ZS5zdHJva2VTdHlsZTtcbiAgICBpZiAoZmlsbFN0eWxlID09PSB1bmRlZmluZWQgJiYgc3Ryb2tlU3R5bGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldEZpbGxTdHJva2VTdHlsZXNfKG11bHRpUG9seWdvbkdlb21ldHJ5KTtcbiAgICB0aGlzLmJlZ2luR2VvbWV0cnkobXVsdGlQb2x5Z29uR2VvbWV0cnksIGZlYXR1cmUpO1xuICAgIGlmIChzdGF0ZS5maWxsU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9GSUxMX1NUWUxFLFxuICAgICAgICBhc1N0cmluZyhkZWZhdWx0RmlsbFN0eWxlKVxuICAgICAgXSk7XG4gICAgfVxuICAgIGlmIChzdGF0ZS5zdHJva2VTdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uU0VUX1NUUk9LRV9TVFlMRSxcbiAgICAgICAgc3RhdGUuc3Ryb2tlU3R5bGUsIHN0YXRlLmxpbmVXaWR0aCwgc3RhdGUubGluZUNhcCwgc3RhdGUubGluZUpvaW4sXG4gICAgICAgIHN0YXRlLm1pdGVyTGltaXQsIHN0YXRlLmxpbmVEYXNoLCBzdGF0ZS5saW5lRGFzaE9mZnNldFxuICAgICAgXSk7XG4gICAgfVxuICAgIHZhciBlbmRzcyA9IG11bHRpUG9seWdvbkdlb21ldHJ5LmdldEVuZHNzKCk7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IG11bHRpUG9seWdvbkdlb21ldHJ5LmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIHN0cmlkZSA9IG11bHRpUG9seWdvbkdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgIHZhciBvZmZzZXQgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIG9mZnNldCA9IHRoaXMuZHJhd0ZsYXRDb29yZGluYXRlc3NfKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzc1tpXSwgc3RyaWRlKTtcbiAgICB9XG4gICAgdGhpcy5lbmRHZW9tZXRyeShtdWx0aVBvbHlnb25HZW9tZXRyeSwgZmVhdHVyZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNQb2x5Z29uUmVwbGF5LnByb3RvdHlwZS5maW5pc2ggPSBmdW5jdGlvbiBmaW5pc2ggKCkge1xuICAgIHRoaXMucmV2ZXJzZUhpdERldGVjdGlvbkluc3RydWN0aW9ucygpO1xuICAgIHRoaXMuc3RhdGUgPSBudWxsO1xuICAgIC8vIFdlIHdhbnQgdG8gcHJlc2VydmUgdG9wb2xvZ3kgd2hlbiBkcmF3aW5nIHBvbHlnb25zLiAgUG9seWdvbnMgYXJlXG4gICAgLy8gc2ltcGxpZmllZCB1c2luZyBxdWFudGl6YXRpb24gYW5kIHBvaW50IGVsaW1pbmF0aW9uLiBIb3dldmVyLCB3ZSBtaWdodFxuICAgIC8vIGhhdmUgcmVjZWl2ZWQgYSBtaXggb2YgcXVhbnRpemVkIGFuZCBub24tcXVhbnRpemVkIGdlb21ldHJpZXMsIHNvIGVuc3VyZVxuICAgIC8vIHRoYXQgYWxsIGFyZSBxdWFudGl6ZWQgYnkgcXVhbnRpemluZyBhbGwgY29vcmRpbmF0ZXMgaW4gdGhlIGJhdGNoLlxuICAgIHZhciB0b2xlcmFuY2UgPSB0aGlzLnRvbGVyYW5jZTtcbiAgICBpZiAodG9sZXJhbmNlICE9PSAwKSB7XG4gICAgICB2YXIgY29vcmRpbmF0ZXMgPSB0aGlzLmNvb3JkaW5hdGVzO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBjb29yZGluYXRlc1tpXSA9IHNuYXAoY29vcmRpbmF0ZXNbaV0sIHRvbGVyYW5jZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgKi9cbiAgQ2FudmFzUG9seWdvblJlcGxheS5wcm90b3R5cGUuc2V0RmlsbFN0cm9rZVN0eWxlc18gPSBmdW5jdGlvbiBzZXRGaWxsU3Ryb2tlU3R5bGVzXyAoZ2VvbWV0cnkpIHtcbiAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgIHZhciBmaWxsU3R5bGUgPSBzdGF0ZS5maWxsU3R5bGU7XG4gICAgaWYgKGZpbGxTdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnVwZGF0ZUZpbGxTdHlsZShzdGF0ZSwgdGhpcy5jcmVhdGVGaWxsLCBnZW9tZXRyeSk7XG4gICAgfVxuICAgIGlmIChzdGF0ZS5zdHJva2VTdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnVwZGF0ZVN0cm9rZVN0eWxlKHN0YXRlLCB0aGlzLmFwcGx5U3Ryb2tlKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIENhbnZhc1BvbHlnb25SZXBsYXk7XG59KENhbnZhc1JlcGxheSkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IENhbnZhc1BvbHlnb25SZXBsYXk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvbHlnb25SZXBsYXkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9zdHJhaWdodGNodW5rXG4gKi9cblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhBbmdsZSBNYXhpbXVtIGFjY2VwdGFibGUgYW5nbGUgZGVsdGEgYmV0d2VlbiBzZWdtZW50cy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBTdGFydCBhbmQgZW5kIG9mIHRoZSBmaXJzdCBzdWl0YWJsZSBjaHVuayBvZiB0aGVcbiAqIGdpdmVuIGBmbGF0Q29vcmRpbmF0ZXNgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hpbmdDaHVuayhtYXhBbmdsZSwgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gIHZhciBjaHVua1N0YXJ0ID0gb2Zmc2V0O1xuICB2YXIgY2h1bmtFbmQgPSBvZmZzZXQ7XG4gIHZhciBjaHVua00gPSAwO1xuICB2YXIgbSA9IDA7XG4gIHZhciBzdGFydCA9IG9mZnNldDtcbiAgdmFyIGFjb3MsIGksIG0xMiwgbTIzLCB4MSwgeTEsIHgxMiwgeTEyLCB4MjMsIHkyMztcbiAgZm9yIChpID0gb2Zmc2V0OyBpIDwgZW5kOyBpICs9IHN0cmlkZSkge1xuICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgIGlmICh4MSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB4MjMgPSB4MiAtIHgxO1xuICAgICAgeTIzID0geTIgLSB5MTtcbiAgICAgIG0yMyA9IE1hdGguc3FydCh4MjMgKiB4MjMgKyB5MjMgKiB5MjMpO1xuICAgICAgaWYgKHgxMiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG0gKz0gbTEyO1xuICAgICAgICBhY29zID0gTWF0aC5hY29zKCh4MTIgKiB4MjMgKyB5MTIgKiB5MjMpIC8gKG0xMiAqIG0yMykpO1xuICAgICAgICBpZiAoYWNvcyA+IG1heEFuZ2xlKSB7XG4gICAgICAgICAgaWYgKG0gPiBjaHVua00pIHtcbiAgICAgICAgICAgIGNodW5rTSA9IG07XG4gICAgICAgICAgICBjaHVua1N0YXJ0ID0gc3RhcnQ7XG4gICAgICAgICAgICBjaHVua0VuZCA9IGk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG0gPSAwO1xuICAgICAgICAgIHN0YXJ0ID0gaSAtIHN0cmlkZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbTEyID0gbTIzO1xuICAgICAgeDEyID0geDIzO1xuICAgICAgeTEyID0geTIzO1xuICAgIH1cbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gIH1cbiAgbSArPSBtMjM7XG4gIHJldHVybiBtID4gY2h1bmtNID8gW3N0YXJ0LCBpXSA6IFtjaHVua1N0YXJ0LCBjaHVua0VuZF07XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0cmFpZ2h0Y2h1bmsuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0eWxlL1RleHRQbGFjZW1lbnRcbiAqL1xuXG4vKipcbiAqIFRleHQgcGxhY2VtZW50LiBPbmUgb2YgYCdwb2ludCdgLCBgJ2xpbmUnYC4gRGVmYXVsdCBpcyBgJ3BvaW50J2AuIE5vdGUgdGhhdFxuICogYCdsaW5lJ2AgcmVxdWlyZXMgdGhlIHVuZGVybHlpbmcgZ2VvbWV0cnkgdG8gYmUgYSB7QGxpbmsgbW9kdWxlOm9sL2dlb20vTGluZVN0cmluZ35MaW5lU3RyaW5nfSxcbiAqIHtAbGluayBtb2R1bGU6b2wvZ2VvbS9Qb2x5Z29uflBvbHlnb259LCB7QGxpbmsgbW9kdWxlOm9sL2dlb20vTXVsdGlMaW5lU3RyaW5nfk11bHRpTGluZVN0cmluZ30gb3JcbiAqIHtAbGluayBtb2R1bGU6b2wvZ2VvbS9NdWx0aVBvbHlnb25+TXVsdGlQb2x5Z29ufS5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgUE9JTlQ6ICdwb2ludCcsXG4gIExJTkU6ICdsaW5lJ1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGV4dFBsYWNlbWVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhcy9UZXh0UmVwbGF5XG4gKi9cbmltcG9ydCB7Z2V0VWlkfSBmcm9tICcuLi8uLi91dGlsLmpzJztcbmltcG9ydCB7YXNDb2xvckxpa2V9IGZyb20gJy4uLy4uL2NvbG9ybGlrZS5qcyc7XG5pbXBvcnQge2NyZWF0ZUNhbnZhc0NvbnRleHQyRH0gZnJvbSAnLi4vLi4vZG9tLmpzJztcbmltcG9ydCB7aW50ZXJzZWN0c30gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7bWF0Y2hpbmdDaHVua30gZnJvbSAnLi4vLi4vZ2VvbS9mbGF0L3N0cmFpZ2h0Y2h1bmsuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuLi8uLi9nZW9tL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQge0NBTlZBU19MSU5FX0RBU0h9IGZyb20gJy4uLy4uL2hhcy5qcyc7XG5pbXBvcnQge2xhYmVsQ2FjaGUsIG1lYXN1cmVUZXh0V2lkdGgsIGRlZmF1bHRUZXh0QWxpZ24sIG1lYXN1cmVUZXh0SGVpZ2h0LCBkZWZhdWx0UGFkZGluZywgZGVmYXVsdExpbmVDYXAsIGRlZmF1bHRMaW5lRGFzaE9mZnNldCwgZGVmYXVsdExpbmVEYXNoLCBkZWZhdWx0TGluZUpvaW4sIGRlZmF1bHRGaWxsU3R5bGUsIGNoZWNrRm9udCwgZGVmYXVsdEZvbnQsIGRlZmF1bHRMaW5lV2lkdGgsIGRlZmF1bHRNaXRlckxpbWl0LCBkZWZhdWx0U3Ryb2tlU3R5bGUsIGRlZmF1bHRUZXh0QmFzZWxpbmV9IGZyb20gJy4uL2NhbnZhcy5qcyc7XG5pbXBvcnQgQ2FudmFzSW5zdHJ1Y3Rpb24gZnJvbSAnLi9JbnN0cnVjdGlvbi5qcyc7XG5pbXBvcnQgQ2FudmFzUmVwbGF5IGZyb20gJy4vUmVwbGF5LmpzJztcbmltcG9ydCB7VEVYVF9BTElHTn0gZnJvbSAnLi4vcmVwbGF5LmpzJztcbmltcG9ydCBUZXh0UGxhY2VtZW50IGZyb20gJy4uLy4uL3N0eWxlL1RleHRQbGFjZW1lbnQuanMnO1xuXG52YXIgQ2FudmFzVGV4dFJlcGxheSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKENhbnZhc1JlcGxheSkge1xuICBmdW5jdGlvbiBDYW52YXNUZXh0UmVwbGF5KHRvbGVyYW5jZSwgbWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBvdmVybGFwcywgZGVjbHV0dGVyVHJlZSkge1xuICAgIENhbnZhc1JlcGxheS5jYWxsKHRoaXMsIHRvbGVyYW5jZSwgbWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBvdmVybGFwcywgZGVjbHV0dGVyVHJlZSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXB9XG4gICAgICovXG4gICAgdGhpcy5kZWNsdXR0ZXJHcm91cF87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxIVE1MQ2FudmFzRWxlbWVudD59XG4gICAgICovXG4gICAgdGhpcy5sYWJlbHNfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLnRleHRfID0gJyc7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50ZXh0T2Zmc2V0WF8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMudGV4dE9mZnNldFlfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW58dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMudGV4dFJvdGF0ZVdpdGhWaWV3XyA9IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRleHRSb3RhdGlvbl8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3RhdGV9XG4gICAgICovXG4gICAgdGhpcy50ZXh0RmlsbFN0YXRlXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3RhdGU+fVxuICAgICAqL1xuICAgIHRoaXMuZmlsbFN0YXRlcyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TdHJva2VTdGF0ZX1cbiAgICAgKi9cbiAgICB0aGlzLnRleHRTdHJva2VTdGF0ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuU3Ryb2tlU3RhdGU+fVxuICAgICAqL1xuICAgIHRoaXMuc3Ryb2tlU3RhdGVzID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuVGV4dFN0YXRlfVxuICAgICAqL1xuICAgIHRoaXMudGV4dFN0YXRlXyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlRleHRTdGF0ZX0gKi8gKHt9KTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlRleHRTdGF0ZT59XG4gICAgICovXG4gICAgdGhpcy50ZXh0U3RhdGVzID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy50ZXh0S2V5XyA9ICcnO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMuZmlsbEtleV8gPSAnJztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLnN0cm9rZUtleV8gPSAnJztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIE9iamVjdDxzdHJpbmcsIG51bWJlcj4+fVxuICAgICAqL1xuICAgIHRoaXMud2lkdGhzXyA9IHt9O1xuXG4gICAgbGFiZWxDYWNoZS5wcnVuZSgpO1xuXG4gIH1cblxuICBpZiAoIENhbnZhc1JlcGxheSApIENhbnZhc1RleHRSZXBsYXkuX19wcm90b19fID0gQ2FudmFzUmVwbGF5O1xuICBDYW52YXNUZXh0UmVwbGF5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIENhbnZhc1JlcGxheSAmJiBDYW52YXNSZXBsYXkucHJvdG90eXBlICk7XG4gIENhbnZhc1RleHRSZXBsYXkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2FudmFzVGV4dFJlcGxheTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc1RleHRSZXBsYXkucHJvdG90eXBlLmRyYXdUZXh0ID0gZnVuY3Rpb24gZHJhd1RleHQgKGdlb21ldHJ5LCBmZWF0dXJlKSB7XG4gICAgdmFyIGZpbGxTdGF0ZSA9IHRoaXMudGV4dEZpbGxTdGF0ZV87XG4gICAgdmFyIHN0cm9rZVN0YXRlID0gdGhpcy50ZXh0U3Ryb2tlU3RhdGVfO1xuICAgIHZhciB0ZXh0U3RhdGUgPSB0aGlzLnRleHRTdGF0ZV87XG4gICAgaWYgKHRoaXMudGV4dF8gPT09ICcnIHx8ICF0ZXh0U3RhdGUgfHwgKCFmaWxsU3RhdGUgJiYgIXN0cm9rZVN0YXRlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBiZWdpbiA9IHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO1xuXG4gICAgdmFyIGdlb21ldHJ5VHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gbnVsbDtcbiAgICB2YXIgZW5kID0gMjtcbiAgICB2YXIgc3RyaWRlID0gMjtcbiAgICB2YXIgaSwgaWk7XG5cbiAgICBpZiAodGV4dFN0YXRlLnBsYWNlbWVudCA9PT0gVGV4dFBsYWNlbWVudC5MSU5FKSB7XG4gICAgICBpZiAoIWludGVyc2VjdHModGhpcy5nZXRCdWZmZXJlZE1heEV4dGVudCgpLCBnZW9tZXRyeS5nZXRFeHRlbnQoKSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIGVuZHM7XG4gICAgICBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIHN0cmlkZSA9IGdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgICAgaWYgKGdlb21ldHJ5VHlwZSA9PSBHZW9tZXRyeVR5cGUuTElORV9TVFJJTkcpIHtcbiAgICAgICAgZW5kcyA9IFtmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoXTtcbiAgICAgIH0gZWxzZSBpZiAoZ2VvbWV0cnlUeXBlID09IEdlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORykge1xuICAgICAgICBlbmRzID0gZ2VvbWV0cnkuZ2V0RW5kcygpO1xuICAgICAgfSBlbHNlIGlmIChnZW9tZXRyeVR5cGUgPT0gR2VvbWV0cnlUeXBlLlBPTFlHT04pIHtcbiAgICAgICAgZW5kcyA9IGdlb21ldHJ5LmdldEVuZHMoKS5zbGljZSgwLCAxKTtcbiAgICAgIH0gZWxzZSBpZiAoZ2VvbWV0cnlUeXBlID09IEdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OKSB7XG4gICAgICAgIHZhciBlbmRzcyA9IGdlb21ldHJ5LmdldEVuZHNzKCk7XG4gICAgICAgIGVuZHMgPSBbXTtcbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgZW5kcy5wdXNoKGVuZHNzW2ldWzBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5iZWdpbkdlb21ldHJ5KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICAgIHZhciB0ZXh0QWxpZ24gPSB0ZXh0U3RhdGUudGV4dEFsaWduO1xuICAgICAgdmFyIGZsYXRPZmZzZXQgPSAwO1xuICAgICAgdmFyIGZsYXRFbmQ7XG4gICAgICBmb3IgKHZhciBvID0gMCwgb28gPSBlbmRzLmxlbmd0aDsgbyA8IG9vOyArK28pIHtcbiAgICAgICAgaWYgKHRleHRBbGlnbiA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB2YXIgcmFuZ2UgPSBtYXRjaGluZ0NodW5rKHRleHRTdGF0ZS5tYXhBbmdsZSwgZmxhdENvb3JkaW5hdGVzLCBmbGF0T2Zmc2V0LCBlbmRzW29dLCBzdHJpZGUpO1xuICAgICAgICAgIGZsYXRPZmZzZXQgPSByYW5nZVswXTtcbiAgICAgICAgICBmbGF0RW5kID0gcmFuZ2VbMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmxhdEVuZCA9IGVuZHNbb107XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChpID0gZmxhdE9mZnNldDsgaSA8IGZsYXRFbmQ7IGkgKz0gc3RyaWRlKSB7XG4gICAgICAgICAgdGhpcy5jb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1tpXSwgZmxhdENvb3JkaW5hdGVzW2kgKyAxXSk7XG4gICAgICAgIH1cbiAgICAgICAgZW5kID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgIGZsYXRPZmZzZXQgPSBlbmRzW29dO1xuICAgICAgICB0aGlzLmRyYXdDaGFyc18oYmVnaW4sIGVuZCwgdGhpcy5kZWNsdXR0ZXJHcm91cF8pO1xuICAgICAgICBiZWdpbiA9IGVuZDtcbiAgICAgIH1cbiAgICAgIHRoaXMuZW5kR2VvbWV0cnkoZ2VvbWV0cnksIGZlYXR1cmUpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsYWJlbCA9IHRoaXMuZ2V0SW1hZ2UodGhpcy50ZXh0XywgdGhpcy50ZXh0S2V5XywgdGhpcy5maWxsS2V5XywgdGhpcy5zdHJva2VLZXlfKTtcbiAgICAgIHZhciB3aWR0aCA9IGxhYmVsLndpZHRoIC8gdGhpcy5waXhlbFJhdGlvO1xuICAgICAgc3dpdGNoIChnZW9tZXRyeVR5cGUpIHtcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuUE9JTlQ6XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPSU5UOlxuICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICAgIGVuZCA9IGZsYXRDb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9MaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0RmxhdE1pZHBvaW50KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkNJUkNMRTpcbiAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0Q2VudGVyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HOlxuICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRGbGF0TWlkcG9pbnRzKCk7XG4gICAgICAgICAgZW5kID0gZmxhdENvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuUE9MWUdPTjpcbiAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldEZsYXRJbnRlcmlvclBvaW50KCk7XG4gICAgICAgICAgaWYgKCF0ZXh0U3RhdGUub3ZlcmZsb3cgJiYgZmxhdENvb3JkaW5hdGVzWzJdIC8gdGhpcy5yZXNvbHV0aW9uIDwgd2lkdGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3RyaWRlID0gMztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9MWUdPTjpcbiAgICAgICAgICB2YXIgaW50ZXJpb3JQb2ludHMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0RmxhdEludGVyaW9yUG9pbnRzKCk7XG4gICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBpbnRlcmlvclBvaW50cy5sZW5ndGg7IGkgPCBpaTsgaSArPSAzKSB7XG4gICAgICAgICAgICBpZiAodGV4dFN0YXRlLm92ZXJmbG93IHx8IGludGVyaW9yUG9pbnRzW2kgKyAyXSAvIHRoaXMucmVzb2x1dGlvbiA+PSB3aWR0aCkge1xuICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMucHVzaChpbnRlcmlvclBvaW50c1tpXSwgaW50ZXJpb3JQb2ludHNbaSArIDFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZW5kID0gZmxhdENvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgICAgICBpZiAoZW5kID09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICB9XG4gICAgICBlbmQgPSB0aGlzLmFwcGVuZEZsYXRDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIDAsIGVuZCwgc3RyaWRlLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgaWYgKHRleHRTdGF0ZS5iYWNrZ3JvdW5kRmlsbCB8fCB0ZXh0U3RhdGUuYmFja2dyb3VuZFN0cm9rZSkge1xuICAgICAgICB0aGlzLnNldEZpbGxTdHJva2VTdHlsZSh0ZXh0U3RhdGUuYmFja2dyb3VuZEZpbGwsIHRleHRTdGF0ZS5iYWNrZ3JvdW5kU3Ryb2tlKTtcbiAgICAgICAgaWYgKHRleHRTdGF0ZS5iYWNrZ3JvdW5kRmlsbCkge1xuICAgICAgICAgIHRoaXMudXBkYXRlRmlsbFN0eWxlKHRoaXMuc3RhdGUsIHRoaXMuY3JlYXRlRmlsbCwgZ2VvbWV0cnkpO1xuICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2godGhpcy5jcmVhdGVGaWxsKHRoaXMuc3RhdGUsIGdlb21ldHJ5KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRleHRTdGF0ZS5iYWNrZ3JvdW5kU3Ryb2tlKSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVTdHJva2VTdHlsZSh0aGlzLnN0YXRlLCB0aGlzLmFwcGx5U3Ryb2tlKTtcbiAgICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKHRoaXMuY3JlYXRlU3Ryb2tlKHRoaXMuc3RhdGUpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5iZWdpbkdlb21ldHJ5KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICAgIHRoaXMuZHJhd1RleHRJbWFnZV8obGFiZWwsIGJlZ2luLCBlbmQpO1xuICAgICAgdGhpcy5lbmRHZW9tZXRyeShnZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUZXh0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dEtleSBUZXh0IHN0eWxlIGtleS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGxLZXkgRmlsbCBzdHlsZSBrZXkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJva2VLZXkgU3Ryb2tlIHN0eWxlIGtleS5cbiAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IEltYWdlLlxuICAgKi9cbiAgQ2FudmFzVGV4dFJlcGxheS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiBnZXRJbWFnZSAodGV4dCwgdGV4dEtleSwgZmlsbEtleSwgc3Ryb2tlS2V5KSB7XG4gICAgdmFyIGxhYmVsO1xuICAgIHZhciBrZXkgPSBzdHJva2VLZXkgKyB0ZXh0S2V5ICsgdGV4dCArIGZpbGxLZXkgKyB0aGlzLnBpeGVsUmF0aW87XG5cbiAgICBpZiAoIWxhYmVsQ2FjaGUuY29udGFpbnNLZXkoa2V5KSkge1xuICAgICAgdmFyIHN0cm9rZVN0YXRlID0gc3Ryb2tlS2V5ID8gdGhpcy5zdHJva2VTdGF0ZXNbc3Ryb2tlS2V5XSB8fCB0aGlzLnRleHRTdHJva2VTdGF0ZV8gOiBudWxsO1xuICAgICAgdmFyIGZpbGxTdGF0ZSA9IGZpbGxLZXkgPyB0aGlzLmZpbGxTdGF0ZXNbZmlsbEtleV0gfHwgdGhpcy50ZXh0RmlsbFN0YXRlXyA6IG51bGw7XG4gICAgICB2YXIgdGV4dFN0YXRlID0gdGhpcy50ZXh0U3RhdGVzW3RleHRLZXldIHx8IHRoaXMudGV4dFN0YXRlXztcbiAgICAgIHZhciBwaXhlbFJhdGlvID0gdGhpcy5waXhlbFJhdGlvO1xuICAgICAgdmFyIHNjYWxlID0gdGV4dFN0YXRlLnNjYWxlICogcGl4ZWxSYXRpbztcbiAgICAgIHZhciBhbGlnbiA9IFRFWFRfQUxJR05bdGV4dFN0YXRlLnRleHRBbGlnbiB8fCBkZWZhdWx0VGV4dEFsaWduXTtcbiAgICAgIHZhciBzdHJva2VXaWR0aCA9IHN0cm9rZUtleSAmJiBzdHJva2VTdGF0ZS5saW5lV2lkdGggPyBzdHJva2VTdGF0ZS5saW5lV2lkdGggOiAwO1xuXG4gICAgICB2YXIgbGluZXMgPSB0ZXh0LnNwbGl0KCdcXG4nKTtcbiAgICAgIHZhciBudW1MaW5lcyA9IGxpbmVzLmxlbmd0aDtcbiAgICAgIHZhciB3aWR0aHMgPSBbXTtcbiAgICAgIHZhciB3aWR0aCA9IG1lYXN1cmVUZXh0V2lkdGhzKHRleHRTdGF0ZS5mb250LCBsaW5lcywgd2lkdGhzKTtcbiAgICAgIHZhciBsaW5lSGVpZ2h0ID0gbWVhc3VyZVRleHRIZWlnaHQodGV4dFN0YXRlLmZvbnQpO1xuICAgICAgdmFyIGhlaWdodCA9IGxpbmVIZWlnaHQgKiBudW1MaW5lcztcbiAgICAgIHZhciByZW5kZXJXaWR0aCA9ICh3aWR0aCArIHN0cm9rZVdpZHRoKTtcbiAgICAgIHZhciBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKFxuICAgICAgICBNYXRoLmNlaWwocmVuZGVyV2lkdGggKiBzY2FsZSksXG4gICAgICAgIE1hdGguY2VpbCgoaGVpZ2h0ICsgc3Ryb2tlV2lkdGgpICogc2NhbGUpKTtcbiAgICAgIGxhYmVsID0gY29udGV4dC5jYW52YXM7XG4gICAgICBsYWJlbENhY2hlLnNldChrZXksIGxhYmVsKTtcbiAgICAgIGlmIChzY2FsZSAhPSAxKSB7XG4gICAgICAgIGNvbnRleHQuc2NhbGUoc2NhbGUsIHNjYWxlKTtcbiAgICAgIH1cbiAgICAgIGNvbnRleHQuZm9udCA9IHRleHRTdGF0ZS5mb250O1xuICAgICAgaWYgKHN0cm9rZUtleSkge1xuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gc3Ryb2tlV2lkdGg7XG4gICAgICAgIGNvbnRleHQubGluZUNhcCA9IC8qKiBAdHlwZSB7Q2FudmFzTGluZUNhcH0gKi8gKHN0cm9rZVN0YXRlLmxpbmVDYXApO1xuICAgICAgICBjb250ZXh0LmxpbmVKb2luID0gLyoqIEB0eXBlIHtDYW52YXNMaW5lSm9pbn0gKi8gKHN0cm9rZVN0YXRlLmxpbmVKb2luKTtcbiAgICAgICAgY29udGV4dC5taXRlckxpbWl0ID0gc3Ryb2tlU3RhdGUubWl0ZXJMaW1pdDtcbiAgICAgICAgaWYgKENBTlZBU19MSU5FX0RBU0ggJiYgc3Ryb2tlU3RhdGUubGluZURhc2gubGVuZ3RoKSB7XG4gICAgICAgICAgY29udGV4dC5zZXRMaW5lRGFzaChzdHJva2VTdGF0ZS5saW5lRGFzaCk7XG4gICAgICAgICAgY29udGV4dC5saW5lRGFzaE9mZnNldCA9IHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZmlsbEtleSkge1xuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGxTdGF0ZS5maWxsU3R5bGU7XG4gICAgICB9XG4gICAgICBjb250ZXh0LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuICAgICAgY29udGV4dC50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgIHZhciBsZWZ0UmlnaHQgPSAoMC41IC0gYWxpZ24pO1xuICAgICAgdmFyIHggPSBhbGlnbiAqIGxhYmVsLndpZHRoIC8gc2NhbGUgKyBsZWZ0UmlnaHQgKiBzdHJva2VXaWR0aDtcbiAgICAgIHZhciBpO1xuICAgICAgaWYgKHN0cm9rZUtleSkge1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbnVtTGluZXM7ICsraSkge1xuICAgICAgICAgIGNvbnRleHQuc3Ryb2tlVGV4dChsaW5lc1tpXSwgeCArIGxlZnRSaWdodCAqIHdpZHRoc1tpXSwgMC41ICogKHN0cm9rZVdpZHRoICsgbGluZUhlaWdodCkgKyBpICogbGluZUhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChmaWxsS2V5KSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1MaW5lczsgKytpKSB7XG4gICAgICAgICAgY29udGV4dC5maWxsVGV4dChsaW5lc1tpXSwgeCArIGxlZnRSaWdodCAqIHdpZHRoc1tpXSwgMC41ICogKHN0cm9rZVdpZHRoICsgbGluZUhlaWdodCkgKyBpICogbGluZUhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxhYmVsQ2FjaGUuZ2V0KGtleSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR9IGxhYmVsIExhYmVsLlxuICAgKiBAcGFyYW0ge251bWJlcn0gYmVnaW4gQmVnaW4uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICAgKi9cbiAgQ2FudmFzVGV4dFJlcGxheS5wcm90b3R5cGUuZHJhd1RleHRJbWFnZV8gPSBmdW5jdGlvbiBkcmF3VGV4dEltYWdlXyAobGFiZWwsIGJlZ2luLCBlbmQpIHtcbiAgICB2YXIgdGV4dFN0YXRlID0gdGhpcy50ZXh0U3RhdGVfO1xuICAgIHZhciBzdHJva2VTdGF0ZSA9IHRoaXMudGV4dFN0cm9rZVN0YXRlXztcbiAgICB2YXIgcGl4ZWxSYXRpbyA9IHRoaXMucGl4ZWxSYXRpbztcbiAgICB2YXIgYWxpZ24gPSBURVhUX0FMSUdOW3RleHRTdGF0ZS50ZXh0QWxpZ24gfHwgZGVmYXVsdFRleHRBbGlnbl07XG4gICAgdmFyIGJhc2VsaW5lID0gVEVYVF9BTElHTlt0ZXh0U3RhdGUudGV4dEJhc2VsaW5lXTtcbiAgICB2YXIgc3Ryb2tlV2lkdGggPSBzdHJva2VTdGF0ZSAmJiBzdHJva2VTdGF0ZS5saW5lV2lkdGggPyBzdHJva2VTdGF0ZS5saW5lV2lkdGggOiAwO1xuXG4gICAgdmFyIGFuY2hvclggPSBhbGlnbiAqIGxhYmVsLndpZHRoIC8gcGl4ZWxSYXRpbyArIDIgKiAoMC41IC0gYWxpZ24pICogc3Ryb2tlV2lkdGg7XG4gICAgdmFyIGFuY2hvclkgPSBiYXNlbGluZSAqIGxhYmVsLmhlaWdodCAvIHBpeGVsUmF0aW8gKyAyICogKDAuNSAtIGJhc2VsaW5lKSAqIHN0cm9rZVdpZHRoO1xuICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goW0NhbnZhc0luc3RydWN0aW9uLkRSQVdfSU1BR0UsIGJlZ2luLCBlbmQsXG4gICAgICBsYWJlbCwgKGFuY2hvclggLSB0aGlzLnRleHRPZmZzZXRYXykgKiBwaXhlbFJhdGlvLCAoYW5jaG9yWSAtIHRoaXMudGV4dE9mZnNldFlfKSAqIHBpeGVsUmF0aW8sXG4gICAgICB0aGlzLmRlY2x1dHRlckdyb3VwXywgbGFiZWwuaGVpZ2h0LCAxLCAwLCAwLCB0aGlzLnRleHRSb3RhdGVXaXRoVmlld18sIHRoaXMudGV4dFJvdGF0aW9uXyxcbiAgICAgIDEsIGxhYmVsLndpZHRoLFxuICAgICAgdGV4dFN0YXRlLnBhZGRpbmcgPT0gZGVmYXVsdFBhZGRpbmcgP1xuICAgICAgICBkZWZhdWx0UGFkZGluZyA6IHRleHRTdGF0ZS5wYWRkaW5nLm1hcChmdW5jdGlvbihwKSB7XG4gICAgICAgICAgcmV0dXJuIHAgKiBwaXhlbFJhdGlvO1xuICAgICAgICB9KSxcbiAgICAgICEhdGV4dFN0YXRlLmJhY2tncm91bmRGaWxsLCAhIXRleHRTdGF0ZS5iYWNrZ3JvdW5kU3Ryb2tlXG4gICAgXSk7XG4gICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbQ2FudmFzSW5zdHJ1Y3Rpb24uRFJBV19JTUFHRSwgYmVnaW4sIGVuZCxcbiAgICAgIGxhYmVsLCAoYW5jaG9yWCAtIHRoaXMudGV4dE9mZnNldFhfKSAqIHBpeGVsUmF0aW8sIChhbmNob3JZIC0gdGhpcy50ZXh0T2Zmc2V0WV8pICogcGl4ZWxSYXRpbyxcbiAgICAgIHRoaXMuZGVjbHV0dGVyR3JvdXBfLCBsYWJlbC5oZWlnaHQsIDEsIDAsIDAsIHRoaXMudGV4dFJvdGF0ZVdpdGhWaWV3XywgdGhpcy50ZXh0Um90YXRpb25fLFxuICAgICAgMSAvIHBpeGVsUmF0aW8sIGxhYmVsLndpZHRoLCB0ZXh0U3RhdGUucGFkZGluZyxcbiAgICAgICEhdGV4dFN0YXRlLmJhY2tncm91bmRGaWxsLCAhIXRleHRTdGF0ZS5iYWNrZ3JvdW5kU3Ryb2tlXG4gICAgXSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBiZWdpbiBCZWdpbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3VwfSBkZWNsdXR0ZXJHcm91cCBEZWNsdXR0ZXIgZ3JvdXAuXG4gICAqL1xuICBDYW52YXNUZXh0UmVwbGF5LnByb3RvdHlwZS5kcmF3Q2hhcnNfID0gZnVuY3Rpb24gZHJhd0NoYXJzXyAoYmVnaW4sIGVuZCwgZGVjbHV0dGVyR3JvdXApIHtcbiAgICB2YXIgc3Ryb2tlU3RhdGUgPSB0aGlzLnRleHRTdHJva2VTdGF0ZV87XG4gICAgdmFyIHRleHRTdGF0ZSA9IHRoaXMudGV4dFN0YXRlXztcbiAgICB2YXIgZmlsbFN0YXRlID0gdGhpcy50ZXh0RmlsbFN0YXRlXztcblxuICAgIHZhciBzdHJva2VLZXkgPSB0aGlzLnN0cm9rZUtleV87XG4gICAgaWYgKHN0cm9rZVN0YXRlKSB7XG4gICAgICBpZiAoIShzdHJva2VLZXkgaW4gdGhpcy5zdHJva2VTdGF0ZXMpKSB7XG4gICAgICAgIHRoaXMuc3Ryb2tlU3RhdGVzW3N0cm9rZUtleV0gPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TdHJva2VTdGF0ZX0gKi8gKHtcbiAgICAgICAgICBzdHJva2VTdHlsZTogc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGUsXG4gICAgICAgICAgbGluZUNhcDogc3Ryb2tlU3RhdGUubGluZUNhcCxcbiAgICAgICAgICBsaW5lRGFzaE9mZnNldDogc3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQsXG4gICAgICAgICAgbGluZVdpZHRoOiBzdHJva2VTdGF0ZS5saW5lV2lkdGgsXG4gICAgICAgICAgbGluZUpvaW46IHN0cm9rZVN0YXRlLmxpbmVKb2luLFxuICAgICAgICAgIG1pdGVyTGltaXQ6IHN0cm9rZVN0YXRlLm1pdGVyTGltaXQsXG4gICAgICAgICAgbGluZURhc2g6IHN0cm9rZVN0YXRlLmxpbmVEYXNoXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgdGV4dEtleSA9IHRoaXMudGV4dEtleV87XG4gICAgaWYgKCEodGhpcy50ZXh0S2V5XyBpbiB0aGlzLnRleHRTdGF0ZXMpKSB7XG4gICAgICB0aGlzLnRleHRTdGF0ZXNbdGhpcy50ZXh0S2V5X10gPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5UZXh0U3RhdGV9ICovICh7XG4gICAgICAgIGZvbnQ6IHRleHRTdGF0ZS5mb250LFxuICAgICAgICB0ZXh0QWxpZ246IHRleHRTdGF0ZS50ZXh0QWxpZ24gfHwgZGVmYXVsdFRleHRBbGlnbixcbiAgICAgICAgc2NhbGU6IHRleHRTdGF0ZS5zY2FsZVxuICAgICAgfSk7XG4gICAgfVxuICAgIHZhciBmaWxsS2V5ID0gdGhpcy5maWxsS2V5XztcbiAgICBpZiAoZmlsbFN0YXRlKSB7XG4gICAgICBpZiAoIShmaWxsS2V5IGluIHRoaXMuZmlsbFN0YXRlcykpIHtcbiAgICAgICAgdGhpcy5maWxsU3RhdGVzW2ZpbGxLZXldID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0YXRlfSAqLyAoe1xuICAgICAgICAgIGZpbGxTdHlsZTogZmlsbFN0YXRlLmZpbGxTdHlsZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcGl4ZWxSYXRpbyA9IHRoaXMucGl4ZWxSYXRpbztcbiAgICB2YXIgYmFzZWxpbmUgPSBURVhUX0FMSUdOW3RleHRTdGF0ZS50ZXh0QmFzZWxpbmVdO1xuXG4gICAgdmFyIG9mZnNldFkgPSB0aGlzLnRleHRPZmZzZXRZXyAqIHBpeGVsUmF0aW87XG4gICAgdmFyIHRleHQgPSB0aGlzLnRleHRfO1xuICAgIHZhciBmb250ID0gdGV4dFN0YXRlLmZvbnQ7XG4gICAgdmFyIHRleHRTY2FsZSA9IHRleHRTdGF0ZS5zY2FsZTtcbiAgICB2YXIgc3Ryb2tlV2lkdGggPSBzdHJva2VTdGF0ZSA/IHN0cm9rZVN0YXRlLmxpbmVXaWR0aCAqIHRleHRTY2FsZSAvIDIgOiAwO1xuICAgIHZhciB3aWR0aHMgPSB0aGlzLndpZHRoc19bZm9udF07XG4gICAgaWYgKCF3aWR0aHMpIHtcbiAgICAgIHRoaXMud2lkdGhzX1tmb250XSA9IHdpZHRocyA9IHt9O1xuICAgIH1cbiAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKFtDYW52YXNJbnN0cnVjdGlvbi5EUkFXX0NIQVJTLFxuICAgICAgYmVnaW4sIGVuZCwgYmFzZWxpbmUsIGRlY2x1dHRlckdyb3VwLFxuICAgICAgdGV4dFN0YXRlLm92ZXJmbG93LCBmaWxsS2V5LCB0ZXh0U3RhdGUubWF4QW5nbGUsXG4gICAgICBmdW5jdGlvbih0ZXh0KSB7XG4gICAgICAgIHZhciB3aWR0aCA9IHdpZHRoc1t0ZXh0XTtcbiAgICAgICAgaWYgKCF3aWR0aCkge1xuICAgICAgICAgIHdpZHRoID0gd2lkdGhzW3RleHRdID0gbWVhc3VyZVRleHRXaWR0aChmb250LCB0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2lkdGggKiB0ZXh0U2NhbGUgKiBwaXhlbFJhdGlvO1xuICAgICAgfSxcbiAgICAgIG9mZnNldFksIHN0cm9rZUtleSwgc3Ryb2tlV2lkdGggKiBwaXhlbFJhdGlvLCB0ZXh0LCB0ZXh0S2V5LCAxXG4gICAgXSk7XG4gICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbQ2FudmFzSW5zdHJ1Y3Rpb24uRFJBV19DSEFSUyxcbiAgICAgIGJlZ2luLCBlbmQsIGJhc2VsaW5lLCBkZWNsdXR0ZXJHcm91cCxcbiAgICAgIHRleHRTdGF0ZS5vdmVyZmxvdywgZmlsbEtleSwgdGV4dFN0YXRlLm1heEFuZ2xlLFxuICAgICAgZnVuY3Rpb24odGV4dCkge1xuICAgICAgICB2YXIgd2lkdGggPSB3aWR0aHNbdGV4dF07XG4gICAgICAgIGlmICghd2lkdGgpIHtcbiAgICAgICAgICB3aWR0aCA9IHdpZHRoc1t0ZXh0XSA9IG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgdGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpZHRoICogdGV4dFNjYWxlO1xuICAgICAgfSxcbiAgICAgIG9mZnNldFksIHN0cm9rZUtleSwgc3Ryb2tlV2lkdGgsIHRleHQsIHRleHRLZXksIDEgLyBwaXhlbFJhdGlvXG4gICAgXSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNUZXh0UmVwbGF5LnByb3RvdHlwZS5zZXRUZXh0U3R5bGUgPSBmdW5jdGlvbiBzZXRUZXh0U3R5bGUgKHRleHRTdHlsZSwgZGVjbHV0dGVyR3JvdXApIHtcbiAgICB2YXIgdGV4dFN0YXRlLCBmaWxsU3RhdGUsIHN0cm9rZVN0YXRlO1xuICAgIGlmICghdGV4dFN0eWxlKSB7XG4gICAgICB0aGlzLnRleHRfID0gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVjbHV0dGVyR3JvdXBfID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXB9ICovIChkZWNsdXR0ZXJHcm91cCk7XG5cbiAgICAgIHZhciB0ZXh0RmlsbFN0eWxlID0gdGV4dFN0eWxlLmdldEZpbGwoKTtcbiAgICAgIGlmICghdGV4dEZpbGxTdHlsZSkge1xuICAgICAgICBmaWxsU3RhdGUgPSB0aGlzLnRleHRGaWxsU3RhdGVfID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpbGxTdGF0ZSA9IHRoaXMudGV4dEZpbGxTdGF0ZV87XG4gICAgICAgIGlmICghZmlsbFN0YXRlKSB7XG4gICAgICAgICAgZmlsbFN0YXRlID0gdGhpcy50ZXh0RmlsbFN0YXRlXyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdGF0ZX0gKi8gKHt9KTtcbiAgICAgICAgfVxuICAgICAgICBmaWxsU3RhdGUuZmlsbFN0eWxlID0gYXNDb2xvckxpa2UoXG4gICAgICAgICAgdGV4dEZpbGxTdHlsZS5nZXRDb2xvcigpIHx8IGRlZmF1bHRGaWxsU3R5bGUpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlID0gdGV4dFN0eWxlLmdldFN0cm9rZSgpO1xuICAgICAgaWYgKCF0ZXh0U3Ryb2tlU3R5bGUpIHtcbiAgICAgICAgc3Ryb2tlU3RhdGUgPSB0aGlzLnRleHRTdHJva2VTdGF0ZV8gPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3Ryb2tlU3RhdGUgPSB0aGlzLnRleHRTdHJva2VTdGF0ZV87XG4gICAgICAgIGlmICghc3Ryb2tlU3RhdGUpIHtcbiAgICAgICAgICBzdHJva2VTdGF0ZSA9IHRoaXMudGV4dFN0cm9rZVN0YXRlXyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlN0cm9rZVN0YXRlfSAqLyAoe30pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsaW5lRGFzaCA9IHRleHRTdHJva2VTdHlsZS5nZXRMaW5lRGFzaCgpO1xuICAgICAgICB2YXIgbGluZURhc2hPZmZzZXQgPSB0ZXh0U3Ryb2tlU3R5bGUuZ2V0TGluZURhc2hPZmZzZXQoKTtcbiAgICAgICAgdmFyIGxpbmVXaWR0aCA9IHRleHRTdHJva2VTdHlsZS5nZXRXaWR0aCgpO1xuICAgICAgICB2YXIgbWl0ZXJMaW1pdCA9IHRleHRTdHJva2VTdHlsZS5nZXRNaXRlckxpbWl0KCk7XG4gICAgICAgIHN0cm9rZVN0YXRlLmxpbmVDYXAgPSB0ZXh0U3Ryb2tlU3R5bGUuZ2V0TGluZUNhcCgpIHx8IGRlZmF1bHRMaW5lQ2FwO1xuICAgICAgICBzdHJva2VTdGF0ZS5saW5lRGFzaCA9IGxpbmVEYXNoID8gbGluZURhc2guc2xpY2UoKSA6IGRlZmF1bHRMaW5lRGFzaDtcbiAgICAgICAgc3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQgPVxuICAgICAgICAgICAgbGluZURhc2hPZmZzZXQgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRMaW5lRGFzaE9mZnNldCA6IGxpbmVEYXNoT2Zmc2V0O1xuICAgICAgICBzdHJva2VTdGF0ZS5saW5lSm9pbiA9IHRleHRTdHJva2VTdHlsZS5nZXRMaW5lSm9pbigpIHx8IGRlZmF1bHRMaW5lSm9pbjtcbiAgICAgICAgc3Ryb2tlU3RhdGUubGluZVdpZHRoID1cbiAgICAgICAgICAgIGxpbmVXaWR0aCA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdExpbmVXaWR0aCA6IGxpbmVXaWR0aDtcbiAgICAgICAgc3Ryb2tlU3RhdGUubWl0ZXJMaW1pdCA9XG4gICAgICAgICAgICBtaXRlckxpbWl0ID09PSB1bmRlZmluZWQgPyBkZWZhdWx0TWl0ZXJMaW1pdCA6IG1pdGVyTGltaXQ7XG4gICAgICAgIHN0cm9rZVN0YXRlLnN0cm9rZVN0eWxlID0gYXNDb2xvckxpa2UoXG4gICAgICAgICAgdGV4dFN0cm9rZVN0eWxlLmdldENvbG9yKCkgfHwgZGVmYXVsdFN0cm9rZVN0eWxlKTtcbiAgICAgIH1cblxuICAgICAgdGV4dFN0YXRlID0gdGhpcy50ZXh0U3RhdGVfO1xuICAgICAgdmFyIGZvbnQgPSB0ZXh0U3R5bGUuZ2V0Rm9udCgpIHx8IGRlZmF1bHRGb250O1xuICAgICAgY2hlY2tGb250KGZvbnQpO1xuICAgICAgdmFyIHRleHRTY2FsZSA9IHRleHRTdHlsZS5nZXRTY2FsZSgpO1xuICAgICAgdGV4dFN0YXRlLm92ZXJmbG93ID0gdGV4dFN0eWxlLmdldE92ZXJmbG93KCk7XG4gICAgICB0ZXh0U3RhdGUuZm9udCA9IGZvbnQ7XG4gICAgICB0ZXh0U3RhdGUubWF4QW5nbGUgPSB0ZXh0U3R5bGUuZ2V0TWF4QW5nbGUoKTtcbiAgICAgIHRleHRTdGF0ZS5wbGFjZW1lbnQgPSB0ZXh0U3R5bGUuZ2V0UGxhY2VtZW50KCk7XG4gICAgICB0ZXh0U3RhdGUudGV4dEFsaWduID0gdGV4dFN0eWxlLmdldFRleHRBbGlnbigpO1xuICAgICAgdGV4dFN0YXRlLnRleHRCYXNlbGluZSA9IHRleHRTdHlsZS5nZXRUZXh0QmFzZWxpbmUoKSB8fCBkZWZhdWx0VGV4dEJhc2VsaW5lO1xuICAgICAgdGV4dFN0YXRlLmJhY2tncm91bmRGaWxsID0gdGV4dFN0eWxlLmdldEJhY2tncm91bmRGaWxsKCk7XG4gICAgICB0ZXh0U3RhdGUuYmFja2dyb3VuZFN0cm9rZSA9IHRleHRTdHlsZS5nZXRCYWNrZ3JvdW5kU3Ryb2tlKCk7XG4gICAgICB0ZXh0U3RhdGUucGFkZGluZyA9IHRleHRTdHlsZS5nZXRQYWRkaW5nKCkgfHwgZGVmYXVsdFBhZGRpbmc7XG4gICAgICB0ZXh0U3RhdGUuc2NhbGUgPSB0ZXh0U2NhbGUgPT09IHVuZGVmaW5lZCA/IDEgOiB0ZXh0U2NhbGU7XG5cbiAgICAgIHZhciB0ZXh0T2Zmc2V0WCA9IHRleHRTdHlsZS5nZXRPZmZzZXRYKCk7XG4gICAgICB2YXIgdGV4dE9mZnNldFkgPSB0ZXh0U3R5bGUuZ2V0T2Zmc2V0WSgpO1xuICAgICAgdmFyIHRleHRSb3RhdGVXaXRoVmlldyA9IHRleHRTdHlsZS5nZXRSb3RhdGVXaXRoVmlldygpO1xuICAgICAgdmFyIHRleHRSb3RhdGlvbiA9IHRleHRTdHlsZS5nZXRSb3RhdGlvbigpO1xuICAgICAgdGhpcy50ZXh0XyA9IHRleHRTdHlsZS5nZXRUZXh0KCkgfHwgJyc7XG4gICAgICB0aGlzLnRleHRPZmZzZXRYXyA9IHRleHRPZmZzZXRYID09PSB1bmRlZmluZWQgPyAwIDogdGV4dE9mZnNldFg7XG4gICAgICB0aGlzLnRleHRPZmZzZXRZXyA9IHRleHRPZmZzZXRZID09PSB1bmRlZmluZWQgPyAwIDogdGV4dE9mZnNldFk7XG4gICAgICB0aGlzLnRleHRSb3RhdGVXaXRoVmlld18gPSB0ZXh0Um90YXRlV2l0aFZpZXcgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogdGV4dFJvdGF0ZVdpdGhWaWV3O1xuICAgICAgdGhpcy50ZXh0Um90YXRpb25fID0gdGV4dFJvdGF0aW9uID09PSB1bmRlZmluZWQgPyAwIDogdGV4dFJvdGF0aW9uO1xuXG4gICAgICB0aGlzLnN0cm9rZUtleV8gPSBzdHJva2VTdGF0ZSA/XG4gICAgICAgICh0eXBlb2Ygc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGUgPT0gJ3N0cmluZycgPyBzdHJva2VTdGF0ZS5zdHJva2VTdHlsZSA6IGdldFVpZChzdHJva2VTdGF0ZS5zdHJva2VTdHlsZSkpICtcbiAgICAgICAgc3Ryb2tlU3RhdGUubGluZUNhcCArIHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0ICsgJ3wnICsgc3Ryb2tlU3RhdGUubGluZVdpZHRoICtcbiAgICAgICAgc3Ryb2tlU3RhdGUubGluZUpvaW4gKyBzdHJva2VTdGF0ZS5taXRlckxpbWl0ICsgJ1snICsgc3Ryb2tlU3RhdGUubGluZURhc2guam9pbigpICsgJ10nIDpcbiAgICAgICAgJyc7XG4gICAgICB0aGlzLnRleHRLZXlfID0gdGV4dFN0YXRlLmZvbnQgKyB0ZXh0U3RhdGUuc2NhbGUgKyAodGV4dFN0YXRlLnRleHRBbGlnbiB8fCAnPycpO1xuICAgICAgdGhpcy5maWxsS2V5XyA9IGZpbGxTdGF0ZSA/XG4gICAgICAgICh0eXBlb2YgZmlsbFN0YXRlLmZpbGxTdHlsZSA9PSAnc3RyaW5nJyA/IGZpbGxTdGF0ZS5maWxsU3R5bGUgOiAoJ3wnICsgZ2V0VWlkKGZpbGxTdGF0ZS5maWxsU3R5bGUpKSkgOlxuICAgICAgICAnJztcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIENhbnZhc1RleHRSZXBsYXk7XG59KENhbnZhc1JlcGxheSkpO1xuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgRm9udCB0byB1c2UgZm9yIG1lYXN1cmluZy5cbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gbGluZXMgTGluZXMgdG8gbWVhc3VyZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gd2lkdGhzIEFycmF5IHdpbGwgYmUgcG9wdWxhdGVkIHdpdGggdGhlIHdpZHRocyBvZlxuICogZWFjaCBsaW5lLlxuICogQHJldHVybiB7bnVtYmVyfSBXaWR0aCBvZiB0aGUgd2hvbGUgdGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lYXN1cmVUZXh0V2lkdGhzKGZvbnQsIGxpbmVzLCB3aWR0aHMpIHtcbiAgdmFyIG51bUxpbmVzID0gbGluZXMubGVuZ3RoO1xuICB2YXIgd2lkdGggPSAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUxpbmVzOyArK2kpIHtcbiAgICB2YXIgY3VycmVudFdpZHRoID0gbWVhc3VyZVRleHRXaWR0aChmb250LCBsaW5lc1tpXSk7XG4gICAgd2lkdGggPSBNYXRoLm1heCh3aWR0aCwgY3VycmVudFdpZHRoKTtcbiAgICB3aWR0aHMucHVzaChjdXJyZW50V2lkdGgpO1xuICB9XG4gIHJldHVybiB3aWR0aDtcbn1cblxuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNUZXh0UmVwbGF5O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UZXh0UmVwbGF5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvY2FudmFzL1JlcGxheUdyb3VwXG4gKi9cblxuaW1wb3J0IHtudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9ufSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG5pbXBvcnQge2NyZWF0ZUNhbnZhc0NvbnRleHQyRH0gZnJvbSAnLi4vLi4vZG9tLmpzJztcbmltcG9ydCB7YnVmZmVyLCBjcmVhdGVFbXB0eSwgZXh0ZW5kQ29vcmRpbmF0ZX0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7dHJhbnNmb3JtMkR9IGZyb20gJy4uLy4uL2dlb20vZmxhdC90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHtpc0VtcHR5fSBmcm9tICcuLi8uLi9vYmouanMnO1xuaW1wb3J0IFJlcGxheUdyb3VwIGZyb20gJy4uL1JlcGxheUdyb3VwLmpzJztcbmltcG9ydCBSZXBsYXlUeXBlIGZyb20gJy4uL1JlcGxheVR5cGUuanMnO1xuaW1wb3J0IENhbnZhc1JlcGxheSBmcm9tICcuL1JlcGxheS5qcyc7XG5pbXBvcnQgQ2FudmFzSW1hZ2VSZXBsYXkgZnJvbSAnLi9JbWFnZVJlcGxheS5qcyc7XG5pbXBvcnQgQ2FudmFzTGluZVN0cmluZ1JlcGxheSBmcm9tICcuL0xpbmVTdHJpbmdSZXBsYXkuanMnO1xuaW1wb3J0IENhbnZhc1BvbHlnb25SZXBsYXkgZnJvbSAnLi9Qb2x5Z29uUmVwbGF5LmpzJztcbmltcG9ydCBDYW52YXNUZXh0UmVwbGF5IGZyb20gJy4vVGV4dFJlcGxheS5qcyc7XG5pbXBvcnQge09SREVSfSBmcm9tICcuLi9yZXBsYXkuanMnO1xuaW1wb3J0IHtjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm19IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZSB7T2JqZWN0PFJlcGxheVR5cGUsIHR5cGVvZiBDYW52YXNSZXBsYXk+fVxuICovXG52YXIgQkFUQ0hfQ09OU1RSVUNUT1JTID0ge1xuICAnQ2lyY2xlJzogQ2FudmFzUG9seWdvblJlcGxheSxcbiAgJ0RlZmF1bHQnOiBDYW52YXNSZXBsYXksXG4gICdJbWFnZSc6IENhbnZhc0ltYWdlUmVwbGF5LFxuICAnTGluZVN0cmluZyc6IENhbnZhc0xpbmVTdHJpbmdSZXBsYXksXG4gICdQb2x5Z29uJzogQ2FudmFzUG9seWdvblJlcGxheSxcbiAgJ1RleHQnOiBDYW52YXNUZXh0UmVwbGF5XG59O1xuXG5cbnZhciBDYW52YXNSZXBsYXlHcm91cCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFJlcGxheUdyb3VwKSB7XG4gIGZ1bmN0aW9uIENhbnZhc1JlcGxheUdyb3VwKFxuICAgIHRvbGVyYW5jZSxcbiAgICBtYXhFeHRlbnQsXG4gICAgcmVzb2x1dGlvbixcbiAgICBwaXhlbFJhdGlvLFxuICAgIG92ZXJsYXBzLFxuICAgIGRlY2x1dHRlclRyZWUsXG4gICAgb3B0X3JlbmRlckJ1ZmZlclxuICApIHtcbiAgICBSZXBsYXlHcm91cC5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogRGVjbHV0dGVyIHRyZWUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmRlY2x1dHRlclRyZWVfID0gZGVjbHV0dGVyVHJlZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXB9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmRlY2x1dHRlckdyb3VwXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50b2xlcmFuY2VfID0gdG9sZXJhbmNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgKi9cbiAgICB0aGlzLm1heEV4dGVudF8gPSBtYXhFeHRlbnQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMub3ZlcmxhcHNfID0gb3ZlcmxhcHM7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5waXhlbFJhdGlvXyA9IHBpeGVsUmF0aW87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5yZXNvbHV0aW9uXyA9IHJlc29sdXRpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyQnVmZmVyXyA9IG9wdF9yZW5kZXJCdWZmZXI7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgIU9iamVjdDxSZXBsYXlUeXBlLCBDYW52YXNSZXBsYXk+Pn1cbiAgICAgKi9cbiAgICB0aGlzLnJlcGxheXNCeVpJbmRleF8gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAgICAgKi9cbiAgICB0aGlzLmhpdERldGVjdGlvbkNvbnRleHRfID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKDEsIDEpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgKi9cbiAgICB0aGlzLmhpdERldGVjdGlvblRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgfVxuXG4gIGlmICggUmVwbGF5R3JvdXAgKSBDYW52YXNSZXBsYXlHcm91cC5fX3Byb3RvX18gPSBSZXBsYXlHcm91cDtcbiAgQ2FudmFzUmVwbGF5R3JvdXAucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUmVwbGF5R3JvdXAgJiYgUmVwbGF5R3JvdXAucHJvdG90eXBlICk7XG4gIENhbnZhc1JlcGxheUdyb3VwLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc1JlcGxheUdyb3VwO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzUmVwbGF5R3JvdXAucHJvdG90eXBlLmFkZERlY2x1dHRlciA9IGZ1bmN0aW9uIGFkZERlY2x1dHRlciAoZ3JvdXApIHtcbiAgICB2YXIgZGVjbHV0dGVyID0gbnVsbDtcbiAgICBpZiAodGhpcy5kZWNsdXR0ZXJUcmVlXykge1xuICAgICAgaWYgKGdyb3VwKSB7XG4gICAgICAgIGRlY2x1dHRlciA9IHRoaXMuZGVjbHV0dGVyR3JvdXBfO1xuICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi8gKGRlY2x1dHRlcls0XSkrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlY2x1dHRlciA9IHRoaXMuZGVjbHV0dGVyR3JvdXBfID0gY3JlYXRlRW1wdHkoKTtcbiAgICAgICAgZGVjbHV0dGVyLnB1c2goMSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkZWNsdXR0ZXI7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICovXG4gIENhbnZhc1JlcGxheUdyb3VwLnByb3RvdHlwZS5jbGlwID0gZnVuY3Rpb24gY2xpcCAoY29udGV4dCwgdHJhbnNmb3JtKSB7XG4gICAgdmFyIGZsYXRDbGlwQ29vcmRzID0gdGhpcy5nZXRDbGlwQ29vcmRzKHRyYW5zZm9ybSk7XG4gICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICBjb250ZXh0Lm1vdmVUbyhmbGF0Q2xpcENvb3Jkc1swXSwgZmxhdENsaXBDb29yZHNbMV0pO1xuICAgIGNvbnRleHQubGluZVRvKGZsYXRDbGlwQ29vcmRzWzJdLCBmbGF0Q2xpcENvb3Jkc1szXSk7XG4gICAgY29udGV4dC5saW5lVG8oZmxhdENsaXBDb29yZHNbNF0sIGZsYXRDbGlwQ29vcmRzWzVdKTtcbiAgICBjb250ZXh0LmxpbmVUbyhmbGF0Q2xpcENvb3Jkc1s2XSwgZmxhdENsaXBDb29yZHNbN10pO1xuICAgIGNvbnRleHQuY2xpcCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PFJlcGxheVR5cGU+fSByZXBsYXlzIFJlcGxheXMuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IEhhcyByZXBsYXlzIG9mIHRoZSBwcm92aWRlZCB0eXBlcy5cbiAgICovXG4gIENhbnZhc1JlcGxheUdyb3VwLnByb3RvdHlwZS5oYXNSZXBsYXlzID0gZnVuY3Rpb24gaGFzUmVwbGF5cyAocmVwbGF5cykge1xuICAgIGZvciAodmFyIHpJbmRleCBpbiB0aGlzLnJlcGxheXNCeVpJbmRleF8pIHtcbiAgICAgIHZhciBjYW5kaWRhdGVzID0gdGhpcy5yZXBsYXlzQnlaSW5kZXhfW3pJbmRleF07XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSByZXBsYXlzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgaWYgKHJlcGxheXNbaV0gaW4gY2FuZGlkYXRlcykge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAqL1xuICBDYW52YXNSZXBsYXlHcm91cC5wcm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24gZmluaXNoICgpIHtcbiAgICBmb3IgKHZhciB6S2V5IGluIHRoaXMucmVwbGF5c0J5WkluZGV4Xykge1xuICAgICAgdmFyIHJlcGxheXMgPSB0aGlzLnJlcGxheXNCeVpJbmRleF9bektleV07XG4gICAgICBmb3IgKHZhciByZXBsYXlLZXkgaW4gcmVwbGF5cykge1xuICAgICAgICByZXBsYXlzW3JlcGxheUtleV0uZmluaXNoKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHNraXBwZWRGZWF0dXJlc0hhc2ggSWRzIG9mIGZlYXR1cmVzIHRvIHNraXAuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKGltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQpKTogVH0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXA+fSBkZWNsdXR0ZXJSZXBsYXlzIERlY2x1dHRlciByZXBsYXlzLlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKi9cbiAgQ2FudmFzUmVwbGF5R3JvdXAucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlID0gZnVuY3Rpb24gZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgKFxuICAgIGNvb3JkaW5hdGUsXG4gICAgcmVzb2x1dGlvbixcbiAgICByb3RhdGlvbixcbiAgICBoaXRUb2xlcmFuY2UsXG4gICAgc2tpcHBlZEZlYXR1cmVzSGFzaCxcbiAgICBjYWxsYmFjayxcbiAgICBkZWNsdXR0ZXJSZXBsYXlzXG4gICkge1xuXG4gICAgaGl0VG9sZXJhbmNlID0gTWF0aC5yb3VuZChoaXRUb2xlcmFuY2UpO1xuICAgIHZhciBjb250ZXh0U2l6ZSA9IGhpdFRvbGVyYW5jZSAqIDIgKyAxO1xuICAgIHZhciB0cmFuc2Zvcm0gPSBjb21wb3NlVHJhbnNmb3JtKHRoaXMuaGl0RGV0ZWN0aW9uVHJhbnNmb3JtXyxcbiAgICAgIGhpdFRvbGVyYW5jZSArIDAuNSwgaGl0VG9sZXJhbmNlICsgMC41LFxuICAgICAgMSAvIHJlc29sdXRpb24sIC0xIC8gcmVzb2x1dGlvbixcbiAgICAgIC1yb3RhdGlvbixcbiAgICAgIC1jb29yZGluYXRlWzBdLCAtY29vcmRpbmF0ZVsxXSk7XG4gICAgdmFyIGNvbnRleHQgPSB0aGlzLmhpdERldGVjdGlvbkNvbnRleHRfO1xuXG4gICAgaWYgKGNvbnRleHQuY2FudmFzLndpZHRoICE9PSBjb250ZXh0U2l6ZSB8fCBjb250ZXh0LmNhbnZhcy5oZWlnaHQgIT09IGNvbnRleHRTaXplKSB7XG4gICAgICBjb250ZXh0LmNhbnZhcy53aWR0aCA9IGNvbnRleHRTaXplO1xuICAgICAgY29udGV4dC5jYW52YXMuaGVpZ2h0ID0gY29udGV4dFNpemU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNvbnRleHRTaXplLCBjb250ZXh0U2l6ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICovXG4gICAgdmFyIGhpdEV4dGVudDtcbiAgICBpZiAodGhpcy5yZW5kZXJCdWZmZXJfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGhpdEV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG4gICAgICBleHRlbmRDb29yZGluYXRlKGhpdEV4dGVudCwgY29vcmRpbmF0ZSk7XG4gICAgICBidWZmZXIoaGl0RXh0ZW50LCByZXNvbHV0aW9uICogKHRoaXMucmVuZGVyQnVmZmVyXyArIGhpdFRvbGVyYW5jZSksIGhpdEV4dGVudCk7XG4gICAgfVxuXG4gICAgdmFyIG1hc2sgPSBnZXRDaXJjbGVBcnJheShoaXRUb2xlcmFuY2UpO1xuICAgIHZhciBkZWNsdXR0ZXJlZEZlYXR1cmVzO1xuICAgIGlmICh0aGlzLmRlY2x1dHRlclRyZWVfKSB7XG4gICAgICBkZWNsdXR0ZXJlZEZlYXR1cmVzID0gdGhpcy5kZWNsdXR0ZXJUcmVlXy5hbGwoKS5tYXAoZnVuY3Rpb24oZW50cnkpIHtcbiAgICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIHJlcGxheVR5cGU7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKiBAcmV0dXJuIHs/fSBDYWxsYmFjayByZXN1bHQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmVhdHVyZUNhbGxiYWNrKGZlYXR1cmUpIHtcbiAgICAgIHZhciBpbWFnZURhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBjb250ZXh0U2l6ZSwgY29udGV4dFNpemUpLmRhdGE7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRleHRTaXplOyBpKyspIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjb250ZXh0U2l6ZTsgaisrKSB7XG4gICAgICAgICAgaWYgKG1hc2tbaV1bal0pIHtcbiAgICAgICAgICAgIGlmIChpbWFnZURhdGFbKGogKiBjb250ZXh0U2l6ZSArIGkpICogNCArIDNdID4gMCkge1xuICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gKHZvaWQgMCk7XG4gICAgICAgICAgICAgIGlmICghKGRlY2x1dHRlcmVkRmVhdHVyZXMgJiYgKHJlcGxheVR5cGUgPT0gUmVwbGF5VHlwZS5JTUFHRSB8fCByZXBsYXlUeXBlID09IFJlcGxheVR5cGUuVEVYVCkpIHx8XG4gICAgICAgICAgICAgICAgICBkZWNsdXR0ZXJlZEZlYXR1cmVzLmluZGV4T2YoZmVhdHVyZSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gY2FsbGJhY2soZmVhdHVyZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY29udGV4dFNpemUsIGNvbnRleHRTaXplKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIHZhciB6cyA9IE9iamVjdC5rZXlzKHRoaXMucmVwbGF5c0J5WkluZGV4XykubWFwKE51bWJlcik7XG4gICAgenMuc29ydChudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uKTtcblxuICAgIHZhciBpLCBqLCByZXBsYXlzLCByZXBsYXksIHJlc3VsdDtcbiAgICBmb3IgKGkgPSB6cy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgdmFyIHpJbmRleEtleSA9IHpzW2ldLnRvU3RyaW5nKCk7XG4gICAgICByZXBsYXlzID0gdGhpcy5yZXBsYXlzQnlaSW5kZXhfW3pJbmRleEtleV07XG4gICAgICBmb3IgKGogPSBPUkRFUi5sZW5ndGggLSAxOyBqID49IDA7IC0taikge1xuICAgICAgICByZXBsYXlUeXBlID0gT1JERVJbal07XG4gICAgICAgIHJlcGxheSA9IHJlcGxheXNbcmVwbGF5VHlwZV07XG4gICAgICAgIGlmIChyZXBsYXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmIChkZWNsdXR0ZXJSZXBsYXlzICYmXG4gICAgICAgICAgICAgIChyZXBsYXlUeXBlID09IFJlcGxheVR5cGUuSU1BR0UgfHwgcmVwbGF5VHlwZSA9PSBSZXBsYXlUeXBlLlRFWFQpKSB7XG4gICAgICAgICAgICB2YXIgZGVjbHV0dGVyID0gZGVjbHV0dGVyUmVwbGF5c1t6SW5kZXhLZXldO1xuICAgICAgICAgICAgaWYgKCFkZWNsdXR0ZXIpIHtcbiAgICAgICAgICAgICAgZGVjbHV0dGVyUmVwbGF5c1t6SW5kZXhLZXldID0gW3JlcGxheSwgdHJhbnNmb3JtLnNsaWNlKDApXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlY2x1dHRlci5wdXNoKHJlcGxheSwgdHJhbnNmb3JtLnNsaWNlKDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVwbGF5LnJlcGxheUhpdERldGVjdGlvbihjb250ZXh0LCB0cmFuc2Zvcm0sIHJvdGF0aW9uLFxuICAgICAgICAgICAgICBza2lwcGVkRmVhdHVyZXNIYXNoLCBmZWF0dXJlQ2FsbGJhY2ssIGhpdEV4dGVudCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gQ2xpcCBjb29yZGluYXRlcy5cbiAgICovXG4gIENhbnZhc1JlcGxheUdyb3VwLnByb3RvdHlwZS5nZXRDbGlwQ29vcmRzID0gZnVuY3Rpb24gZ2V0Q2xpcENvb3JkcyAodHJhbnNmb3JtKSB7XG4gICAgdmFyIG1heEV4dGVudCA9IHRoaXMubWF4RXh0ZW50XztcbiAgICB2YXIgbWluWCA9IG1heEV4dGVudFswXTtcbiAgICB2YXIgbWluWSA9IG1heEV4dGVudFsxXTtcbiAgICB2YXIgbWF4WCA9IG1heEV4dGVudFsyXTtcbiAgICB2YXIgbWF4WSA9IG1heEV4dGVudFszXTtcbiAgICB2YXIgZmxhdENsaXBDb29yZHMgPSBbbWluWCwgbWluWSwgbWluWCwgbWF4WSwgbWF4WCwgbWF4WSwgbWF4WCwgbWluWV07XG4gICAgdHJhbnNmb3JtMkQoXG4gICAgICBmbGF0Q2xpcENvb3JkcywgMCwgOCwgMiwgdHJhbnNmb3JtLCBmbGF0Q2xpcENvb3Jkcyk7XG4gICAgcmV0dXJuIGZsYXRDbGlwQ29vcmRzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzUmVwbGF5R3JvdXAucHJvdG90eXBlLmdldFJlcGxheSA9IGZ1bmN0aW9uIGdldFJlcGxheSAoekluZGV4LCByZXBsYXlUeXBlKSB7XG4gICAgdmFyIHpJbmRleEtleSA9IHpJbmRleCAhPT0gdW5kZWZpbmVkID8gekluZGV4LnRvU3RyaW5nKCkgOiAnMCc7XG4gICAgdmFyIHJlcGxheXMgPSB0aGlzLnJlcGxheXNCeVpJbmRleF9bekluZGV4S2V5XTtcbiAgICBpZiAocmVwbGF5cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXBsYXlzID0ge307XG4gICAgICB0aGlzLnJlcGxheXNCeVpJbmRleF9bekluZGV4S2V5XSA9IHJlcGxheXM7XG4gICAgfVxuICAgIHZhciByZXBsYXkgPSByZXBsYXlzW3JlcGxheVR5cGVdO1xuICAgIGlmIChyZXBsYXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIENvbnN0cnVjdG9yID0gQkFUQ0hfQ09OU1RSVUNUT1JTW3JlcGxheVR5cGVdO1xuICAgICAgcmVwbGF5ID0gbmV3IENvbnN0cnVjdG9yKHRoaXMudG9sZXJhbmNlXywgdGhpcy5tYXhFeHRlbnRfLFxuICAgICAgICB0aGlzLnJlc29sdXRpb25fLCB0aGlzLnBpeGVsUmF0aW9fLCB0aGlzLm92ZXJsYXBzXywgdGhpcy5kZWNsdXR0ZXJUcmVlXyk7XG4gICAgICByZXBsYXlzW3JlcGxheVR5cGVdID0gcmVwbGF5O1xuICAgIH1cbiAgICByZXR1cm4gcmVwbGF5O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtPYmplY3Q8c3RyaW5nLCBPYmplY3Q8UmVwbGF5VHlwZSwgQ2FudmFzUmVwbGF5Pj59IFJlcGxheXMuXG4gICAqL1xuICBDYW52YXNSZXBsYXlHcm91cC5wcm90b3R5cGUuZ2V0UmVwbGF5cyA9IGZ1bmN0aW9uIGdldFJlcGxheXMgKCkge1xuICAgIHJldHVybiB0aGlzLnJlcGxheXNCeVpJbmRleF87XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNSZXBsYXlHcm91cC5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uIGlzRW1wdHkkMSAoKSB7XG4gICAgcmV0dXJuIGlzRW1wdHkodGhpcy5yZXBsYXlzQnlaSW5kZXhfKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdmlld1JvdGF0aW9uIFZpZXcgcm90YXRpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHNraXBwZWRGZWF0dXJlc0hhc2ggSWRzIG9mIGZlYXR1cmVzIHRvIHNraXAuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc25hcFRvUGl4ZWwgU25hcCBwb2ludCBzeW1ib2xzIGFuZCB0ZXN0IHRvIGludGVnZXIgcGl4ZWwuXG4gICAqIEBwYXJhbSB7QXJyYXk8UmVwbGF5VHlwZT49fSBvcHRfcmVwbGF5VHlwZXMgT3JkZXJlZCByZXBsYXkgdHlwZXMgdG8gcmVwbGF5LlxuICAgKiAgICAgRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL3JlbmRlci9yZXBsYXl+T1JERVJ9XG4gICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3VwPj19IG9wdF9kZWNsdXR0ZXJSZXBsYXlzIERlY2x1dHRlciByZXBsYXlzLlxuICAgKi9cbiAgQ2FudmFzUmVwbGF5R3JvdXAucHJvdG90eXBlLnJlcGxheSA9IGZ1bmN0aW9uIHJlcGxheSAoXG4gICAgY29udGV4dCxcbiAgICB0cmFuc2Zvcm0sXG4gICAgdmlld1JvdGF0aW9uLFxuICAgIHNraXBwZWRGZWF0dXJlc0hhc2gsXG4gICAgc25hcFRvUGl4ZWwsXG4gICAgb3B0X3JlcGxheVR5cGVzLFxuICAgIG9wdF9kZWNsdXR0ZXJSZXBsYXlzXG4gICkge1xuXG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIHZhciB6cyA9IE9iamVjdC5rZXlzKHRoaXMucmVwbGF5c0J5WkluZGV4XykubWFwKE51bWJlcik7XG4gICAgenMuc29ydChudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uKTtcblxuICAgIC8vIHNldHVwIGNsaXBwaW5nIHNvIHRoYXQgdGhlIHBhcnRzIG9mIG92ZXItc2ltcGxpZmllZCBnZW9tZXRyaWVzIGFyZSBub3RcbiAgICAvLyB2aXNpYmxlIG91dHNpZGUgdGhlIGN1cnJlbnQgZXh0ZW50IHdoZW4gcGFubmluZ1xuICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgIHRoaXMuY2xpcChjb250ZXh0LCB0cmFuc2Zvcm0pO1xuXG4gICAgdmFyIHJlcGxheVR5cGVzID0gb3B0X3JlcGxheVR5cGVzID8gb3B0X3JlcGxheVR5cGVzIDogT1JERVI7XG4gICAgdmFyIGksIGlpLCBqLCBqaiwgcmVwbGF5cywgcmVwbGF5O1xuICAgIGZvciAoaSA9IDAsIGlpID0genMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIHpJbmRleEtleSA9IHpzW2ldLnRvU3RyaW5nKCk7XG4gICAgICByZXBsYXlzID0gdGhpcy5yZXBsYXlzQnlaSW5kZXhfW3pJbmRleEtleV07XG4gICAgICBmb3IgKGogPSAwLCBqaiA9IHJlcGxheVR5cGVzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgdmFyIHJlcGxheVR5cGUgPSByZXBsYXlUeXBlc1tqXTtcbiAgICAgICAgcmVwbGF5ID0gcmVwbGF5c1tyZXBsYXlUeXBlXTtcbiAgICAgICAgaWYgKHJlcGxheSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKG9wdF9kZWNsdXR0ZXJSZXBsYXlzICYmXG4gICAgICAgICAgICAgIChyZXBsYXlUeXBlID09IFJlcGxheVR5cGUuSU1BR0UgfHwgcmVwbGF5VHlwZSA9PSBSZXBsYXlUeXBlLlRFWFQpKSB7XG4gICAgICAgICAgICB2YXIgZGVjbHV0dGVyID0gb3B0X2RlY2x1dHRlclJlcGxheXNbekluZGV4S2V5XTtcbiAgICAgICAgICAgIGlmICghZGVjbHV0dGVyKSB7XG4gICAgICAgICAgICAgIG9wdF9kZWNsdXR0ZXJSZXBsYXlzW3pJbmRleEtleV0gPSBbcmVwbGF5LCB0cmFuc2Zvcm0uc2xpY2UoMCldO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVjbHV0dGVyLnB1c2gocmVwbGF5LCB0cmFuc2Zvcm0uc2xpY2UoMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXBsYXkucmVwbGF5KGNvbnRleHQsIHRyYW5zZm9ybSwgdmlld1JvdGF0aW9uLCBza2lwcGVkRmVhdHVyZXNIYXNoLCBzbmFwVG9QaXhlbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29udGV4dC5yZXN0b3JlKCk7XG4gIH07XG5cbiAgcmV0dXJuIENhbnZhc1JlcGxheUdyb3VwO1xufShSZXBsYXlHcm91cCkpO1xuXG5cbi8qKlxuICogVGhpcyBjYWNoZSBpcyB1c2VkIGZvciBzdG9yaW5nIGNhbGN1bGF0ZWQgcGl4ZWwgY2lyY2xlcyBmb3IgaW5jcmVhc2luZyBwZXJmb3JtYW5jZS5cbiAqIEl0IGlzIGEgc3RhdGljIHByb3BlcnR5IHRvIGFsbG93IGVhY2ggUmVwbGF5Z3JvdXAgdG8gYWNjZXNzIGl0LlxuICogQHR5cGUge09iamVjdDxudW1iZXIsIEFycmF5PEFycmF5PChib29sZWFufHVuZGVmaW5lZCk+Pj59XG4gKi9cbnZhciBjaXJjbGVBcnJheUNhY2hlID0ge1xuICAwOiBbW3RydWVdXVxufTtcblxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGZpbGxzIGEgcm93IGluIHRoZSBhcnJheSBmcm9tIHRoZSBnaXZlbiBjb29yZGluYXRlIHRvIHRoZVxuICogbWlkZGxlIHdpdGggYHRydWVgLlxuICogQHBhcmFtIHtBcnJheTxBcnJheTwoYm9vbGVhbnx1bmRlZmluZWQpPj59IGFycmF5IFRoZSBhcnJheSB0aGF0IHdpbGwgYmUgYWx0ZXJlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFggY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkgY29vcmRpbmF0ZS5cbiAqL1xuZnVuY3Rpb24gZmlsbENpcmNsZUFycmF5Um93VG9NaWRkbGUoYXJyYXksIHgsIHkpIHtcbiAgdmFyIGk7XG4gIHZhciByYWRpdXMgPSBNYXRoLmZsb29yKGFycmF5Lmxlbmd0aCAvIDIpO1xuICBpZiAoeCA+PSByYWRpdXMpIHtcbiAgICBmb3IgKGkgPSByYWRpdXM7IGkgPCB4OyBpKyspIHtcbiAgICAgIGFycmF5W2ldW3ldID0gdHJ1ZTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoeCA8IHJhZGl1cykge1xuICAgIGZvciAoaSA9IHggKyAxOyBpIDwgcmFkaXVzOyBpKyspIHtcbiAgICAgIGFycmF5W2ldW3ldID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn1cblxuXG4vKipcbiAqIFRoaXMgbWV0aG9kcyBjcmVhdGVzIGEgY2lyY2xlIGluc2lkZSBhIGZpdHRpbmcgYXJyYXkuIFBvaW50cyBpbnNpZGUgdGhlXG4gKiBjaXJjbGUgYXJlIG1hcmtlZCBieSB0cnVlLCBwb2ludHMgb24gdGhlIG91dHNpZGUgYXJlIHVuZGVmaW5lZC5cbiAqIEl0IHVzZXMgdGhlIG1pZHBvaW50IGNpcmNsZSBhbGdvcml0aG0uXG4gKiBBIGNhY2hlIGlzIHVzZWQgdG8gaW5jcmVhc2UgcGVyZm9ybWFuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFJhZGl1cy5cbiAqIEByZXR1cm5zIHtBcnJheTxBcnJheTwoYm9vbGVhbnx1bmRlZmluZWQpPj59IEFuIGFycmF5IHdpdGggbWFya2VkIGNpcmNsZSBwb2ludHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDaXJjbGVBcnJheShyYWRpdXMpIHtcbiAgaWYgKGNpcmNsZUFycmF5Q2FjaGVbcmFkaXVzXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGNpcmNsZUFycmF5Q2FjaGVbcmFkaXVzXTtcbiAgfVxuXG4gIHZhciBhcnJheVNpemUgPSByYWRpdXMgKiAyICsgMTtcbiAgdmFyIGFyciA9IG5ldyBBcnJheShhcnJheVNpemUpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5U2l6ZTsgaSsrKSB7XG4gICAgYXJyW2ldID0gbmV3IEFycmF5KGFycmF5U2l6ZSk7XG4gIH1cblxuICB2YXIgeCA9IHJhZGl1cztcbiAgdmFyIHkgPSAwO1xuICB2YXIgZXJyb3IgPSAwO1xuXG4gIHdoaWxlICh4ID49IHkpIHtcbiAgICBmaWxsQ2lyY2xlQXJyYXlSb3dUb01pZGRsZShhcnIsIHJhZGl1cyArIHgsIHJhZGl1cyArIHkpO1xuICAgIGZpbGxDaXJjbGVBcnJheVJvd1RvTWlkZGxlKGFyciwgcmFkaXVzICsgeSwgcmFkaXVzICsgeCk7XG4gICAgZmlsbENpcmNsZUFycmF5Um93VG9NaWRkbGUoYXJyLCByYWRpdXMgLSB5LCByYWRpdXMgKyB4KTtcbiAgICBmaWxsQ2lyY2xlQXJyYXlSb3dUb01pZGRsZShhcnIsIHJhZGl1cyAtIHgsIHJhZGl1cyArIHkpO1xuICAgIGZpbGxDaXJjbGVBcnJheVJvd1RvTWlkZGxlKGFyciwgcmFkaXVzIC0geCwgcmFkaXVzIC0geSk7XG4gICAgZmlsbENpcmNsZUFycmF5Um93VG9NaWRkbGUoYXJyLCByYWRpdXMgLSB5LCByYWRpdXMgLSB4KTtcbiAgICBmaWxsQ2lyY2xlQXJyYXlSb3dUb01pZGRsZShhcnIsIHJhZGl1cyArIHksIHJhZGl1cyAtIHgpO1xuICAgIGZpbGxDaXJjbGVBcnJheVJvd1RvTWlkZGxlKGFyciwgcmFkaXVzICsgeCwgcmFkaXVzIC0geSk7XG5cbiAgICB5Kys7XG4gICAgZXJyb3IgKz0gMSArIDIgKiB5O1xuICAgIGlmICgyICogKGVycm9yIC0geCkgKyAxID4gMCkge1xuICAgICAgeCAtPSAxO1xuICAgICAgZXJyb3IgKz0gMSAtIDIgKiB4O1xuICAgIH1cbiAgfVxuXG4gIGNpcmNsZUFycmF5Q2FjaGVbcmFkaXVzXSA9IGFycjtcbiAgcmV0dXJuIGFycjtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIEFycmF5PCo+Pn0gZGVjbHV0dGVyUmVwbGF5cyBEZWNsdXR0ZXIgcmVwbGF5cy5cbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNuYXBUb1BpeGVsIFNuYXAgcG9pbnQgc3ltYm9scyBhbmQgdGV4dCB0byBpbnRlZ2VyIHBpeGVscy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcGxheURlY2x1dHRlcihkZWNsdXR0ZXJSZXBsYXlzLCBjb250ZXh0LCByb3RhdGlvbiwgc25hcFRvUGl4ZWwpIHtcbiAgdmFyIHpzID0gT2JqZWN0LmtleXMoZGVjbHV0dGVyUmVwbGF5cykubWFwKE51bWJlcikuc29ydChudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uKTtcbiAgdmFyIHNraXBwZWRGZWF0dXJlVWlkcyA9IHt9O1xuICBmb3IgKHZhciB6ID0gMCwgenogPSB6cy5sZW5ndGg7IHogPCB6ejsgKyt6KSB7XG4gICAgdmFyIHJlcGxheURhdGEgPSBkZWNsdXR0ZXJSZXBsYXlzW3pzW3pdLnRvU3RyaW5nKCldO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHJlcGxheURhdGEubGVuZ3RoOyBpIDwgaWk7KSB7XG4gICAgICB2YXIgcmVwbGF5ID0gcmVwbGF5RGF0YVtpKytdO1xuICAgICAgdmFyIHRyYW5zZm9ybSA9IHJlcGxheURhdGFbaSsrXTtcbiAgICAgIHJlcGxheS5yZXBsYXkoY29udGV4dCwgdHJhbnNmb3JtLCByb3RhdGlvbiwgc2tpcHBlZEZlYXR1cmVVaWRzLCBzbmFwVG9QaXhlbCk7XG4gICAgfVxuICB9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzUmVwbGF5R3JvdXA7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlcGxheUdyb3VwLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci92ZWN0b3JcbiAqL1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IEltYWdlU3RhdGUgZnJvbSAnLi4vSW1hZ2VTdGF0ZS5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4uL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBSZXBsYXlUeXBlIGZyb20gJy4uL3JlbmRlci9SZXBsYXlUeXBlLmpzJztcblxuXG4vKipcbiAqIFRvbGVyYW5jZSBmb3IgZ2VvbWV0cnkgc2ltcGxpZmljYXRpb24gaW4gZGV2aWNlIHBpeGVscy5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBTSU1QTElGWV9UT0xFUkFOQ0UgPSAwLjU7XG5cblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtPYmplY3Q8aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeVR5cGUuanNcIikuZGVmYXVsdCxcbiAqICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGltcG9ydChcIi4uL3JlbmRlci9SZXBsYXlHcm91cC5qc1wiKS5kZWZhdWx0LCBpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHQsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0LCBPYmplY3QpPn1cbiAqL1xudmFyIEdFT01FVFJZX1JFTkRFUkVSUyA9IHtcbiAgJ1BvaW50JzogcmVuZGVyUG9pbnRHZW9tZXRyeSxcbiAgJ0xpbmVTdHJpbmcnOiByZW5kZXJMaW5lU3RyaW5nR2VvbWV0cnksXG4gICdQb2x5Z29uJzogcmVuZGVyUG9seWdvbkdlb21ldHJ5LFxuICAnTXVsdGlQb2ludCc6IHJlbmRlck11bHRpUG9pbnRHZW9tZXRyeSxcbiAgJ011bHRpTGluZVN0cmluZyc6IHJlbmRlck11bHRpTGluZVN0cmluZ0dlb21ldHJ5LFxuICAnTXVsdGlQb2x5Z29uJzogcmVuZGVyTXVsdGlQb2x5Z29uR2VvbWV0cnksXG4gICdHZW9tZXRyeUNvbGxlY3Rpb24nOiByZW5kZXJHZW9tZXRyeUNvbGxlY3Rpb25HZW9tZXRyeSxcbiAgJ0NpcmNsZSc6IHJlbmRlckNpcmNsZUdlb21ldHJ5XG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlMSBGZWF0dXJlIDEuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUyIEZlYXR1cmUgMi5cbiAqIEByZXR1cm4ge251bWJlcn0gT3JkZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0T3JkZXIoZmVhdHVyZTEsIGZlYXR1cmUyKSB7XG4gIHJldHVybiBwYXJzZUludChnZXRVaWQoZmVhdHVyZTEpLCAxMCkgLSBwYXJzZUludChnZXRVaWQoZmVhdHVyZTIpLCAxMCk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNxdWFyZWQgcGl4ZWwgdG9sZXJhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3F1YXJlZFRvbGVyYW5jZShyZXNvbHV0aW9uLCBwaXhlbFJhdGlvKSB7XG4gIHZhciB0b2xlcmFuY2UgPSBnZXRUb2xlcmFuY2UocmVzb2x1dGlvbiwgcGl4ZWxSYXRpbyk7XG4gIHJldHVybiB0b2xlcmFuY2UgKiB0b2xlcmFuY2U7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFBpeGVsIHRvbGVyYW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvbGVyYW5jZShyZXNvbHV0aW9uLCBwaXhlbFJhdGlvKSB7XG4gIHJldHVybiBTSU1QTElGWV9UT0xFUkFOQ0UgKiByZXNvbHV0aW9uIC8gcGl4ZWxSYXRpbztcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL1JlcGxheUdyb3VwLmpzXCIpLmRlZmF1bHR9IHJlcGxheUdyb3VwIFJlcGxheSBncm91cC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyQ2lyY2xlR2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSkge1xuICB2YXIgZmlsbFN0eWxlID0gc3R5bGUuZ2V0RmlsbCgpO1xuICB2YXIgc3Ryb2tlU3R5bGUgPSBzdHlsZS5nZXRTdHJva2UoKTtcbiAgaWYgKGZpbGxTdHlsZSB8fCBzdHJva2VTdHlsZSkge1xuICAgIHZhciBjaXJjbGVSZXBsYXkgPSByZXBsYXlHcm91cC5nZXRSZXBsYXkoc3R5bGUuZ2V0WkluZGV4KCksIFJlcGxheVR5cGUuQ0lSQ0xFKTtcbiAgICBjaXJjbGVSZXBsYXkuc2V0RmlsbFN0cm9rZVN0eWxlKGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUpO1xuICAgIGNpcmNsZVJlcGxheS5kcmF3Q2lyY2xlKGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgfVxuICB2YXIgdGV4dFN0eWxlID0gc3R5bGUuZ2V0VGV4dCgpO1xuICBpZiAodGV4dFN0eWxlKSB7XG4gICAgdmFyIHRleHRSZXBsYXkgPSByZXBsYXlHcm91cC5nZXRSZXBsYXkoc3R5bGUuZ2V0WkluZGV4KCksIFJlcGxheVR5cGUuVEVYVCk7XG4gICAgdGV4dFJlcGxheS5zZXRUZXh0U3R5bGUodGV4dFN0eWxlLCByZXBsYXlHcm91cC5hZGREZWNsdXR0ZXIoZmFsc2UpKTtcbiAgICB0ZXh0UmVwbGF5LmRyYXdUZXh0KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvUmVwbGF5R3JvdXAuanNcIikuZGVmYXVsdH0gcmVwbGF5R3JvdXAgUmVwbGF5IGdyb3VwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6IFQsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0KX0gbGlzdGVuZXIgTGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge1R9IHRoaXNBcmcgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgbGlzdGVuZXJgLlxuICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHN0eWxlIGlzIGxvYWRpbmcuXG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyRmVhdHVyZShyZXBsYXlHcm91cCwgZmVhdHVyZSwgc3R5bGUsIHNxdWFyZWRUb2xlcmFuY2UsIGxpc3RlbmVyLCB0aGlzQXJnKSB7XG4gIHZhciBsb2FkaW5nID0gZmFsc2U7XG4gIHZhciBpbWFnZVN0eWxlID0gc3R5bGUuZ2V0SW1hZ2UoKTtcbiAgaWYgKGltYWdlU3R5bGUpIHtcbiAgICB2YXIgaW1hZ2VTdGF0ZSA9IGltYWdlU3R5bGUuZ2V0SW1hZ2VTdGF0ZSgpO1xuICAgIGlmIChpbWFnZVN0YXRlID09IEltYWdlU3RhdGUuTE9BREVEIHx8IGltYWdlU3RhdGUgPT0gSW1hZ2VTdGF0ZS5FUlJPUikge1xuICAgICAgaW1hZ2VTdHlsZS51bmxpc3RlbkltYWdlQ2hhbmdlKGxpc3RlbmVyLCB0aGlzQXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGltYWdlU3RhdGUgPT0gSW1hZ2VTdGF0ZS5JRExFKSB7XG4gICAgICAgIGltYWdlU3R5bGUubG9hZCgpO1xuICAgICAgfVxuICAgICAgaW1hZ2VTdGF0ZSA9IGltYWdlU3R5bGUuZ2V0SW1hZ2VTdGF0ZSgpO1xuICAgICAgaW1hZ2VTdHlsZS5saXN0ZW5JbWFnZUNoYW5nZShsaXN0ZW5lciwgdGhpc0FyZyk7XG4gICAgICBsb2FkaW5nID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmVuZGVyRmVhdHVyZUludGVybmFsKHJlcGxheUdyb3VwLCBmZWF0dXJlLCBzdHlsZSwgc3F1YXJlZFRvbGVyYW5jZSk7XG5cbiAgcmV0dXJuIGxvYWRpbmc7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9SZXBsYXlHcm91cC5qc1wiKS5kZWZhdWx0fSByZXBsYXlHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyRmVhdHVyZUludGVybmFsKHJlcGxheUdyb3VwLCBmZWF0dXJlLCBzdHlsZSwgc3F1YXJlZFRvbGVyYW5jZSkge1xuICB2YXIgZ2VvbWV0cnkgPSBzdHlsZS5nZXRHZW9tZXRyeUZ1bmN0aW9uKCkoZmVhdHVyZSk7XG4gIGlmICghZ2VvbWV0cnkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHNpbXBsaWZpZWRHZW9tZXRyeSA9IGdlb21ldHJ5LmdldFNpbXBsaWZpZWRHZW9tZXRyeShzcXVhcmVkVG9sZXJhbmNlKTtcbiAgdmFyIHJlbmRlcmVyID0gc3R5bGUuZ2V0UmVuZGVyZXIoKTtcbiAgaWYgKHJlbmRlcmVyKSB7XG4gICAgcmVuZGVyR2VvbWV0cnkocmVwbGF5R3JvdXAsIHNpbXBsaWZpZWRHZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUpO1xuICB9IGVsc2Uge1xuICAgIHZhciBnZW9tZXRyeVJlbmRlcmVyID0gR0VPTUVUUllfUkVOREVSRVJTW3NpbXBsaWZpZWRHZW9tZXRyeS5nZXRUeXBlKCldO1xuICAgIGdlb21ldHJ5UmVuZGVyZXIocmVwbGF5R3JvdXAsIHNpbXBsaWZpZWRHZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUpO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9SZXBsYXlHcm91cC5qc1wiKS5kZWZhdWx0fSByZXBsYXlHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyR2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSkge1xuICBpZiAoZ2VvbWV0cnkuZ2V0VHlwZSgpID09IEdlb21ldHJ5VHlwZS5HRU9NRVRSWV9DT0xMRUNUSU9OKSB7XG4gICAgdmFyIGdlb21ldHJpZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0R2VvbWV0cmllcygpO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGdlb21ldHJpZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgcmVuZGVyR2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJpZXNbaV0sIHN0eWxlLCBmZWF0dXJlKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciByZXBsYXkgPSByZXBsYXlHcm91cC5nZXRSZXBsYXkoc3R5bGUuZ2V0WkluZGV4KCksIFJlcGxheVR5cGUuREVGQVVMVCk7XG4gIHJlcGxheS5kcmF3Q3VzdG9tKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLCBmZWF0dXJlLCBzdHlsZS5nZXRSZW5kZXJlcigpKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL1JlcGxheUdyb3VwLmpzXCIpLmRlZmF1bHR9IHJlcGxheUdyb3VwIFJlcGxheSBncm91cC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyR2VvbWV0cnlDb2xsZWN0aW9uR2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSkge1xuICB2YXIgZ2VvbWV0cmllcyA9IGdlb21ldHJ5LmdldEdlb21ldHJpZXNBcnJheSgpO1xuICB2YXIgaSwgaWk7XG4gIGZvciAoaSA9IDAsIGlpID0gZ2VvbWV0cmllcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIGdlb21ldHJ5UmVuZGVyZXIgPVxuICAgICAgICBHRU9NRVRSWV9SRU5ERVJFUlNbZ2VvbWV0cmllc1tpXS5nZXRUeXBlKCldO1xuICAgIGdlb21ldHJ5UmVuZGVyZXIocmVwbGF5R3JvdXAsIGdlb21ldHJpZXNbaV0sIHN0eWxlLCBmZWF0dXJlKTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvUmVwbGF5R3JvdXAuanNcIikuZGVmYXVsdH0gcmVwbGF5R3JvdXAgUmVwbGF5IGdyb3VwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL0xpbmVTdHJpbmcuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyTGluZVN0cmluZ0dlb21ldHJ5KHJlcGxheUdyb3VwLCBnZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUpIHtcbiAgdmFyIHN0cm9rZVN0eWxlID0gc3R5bGUuZ2V0U3Ryb2tlKCk7XG4gIGlmIChzdHJva2VTdHlsZSkge1xuICAgIHZhciBsaW5lU3RyaW5nUmVwbGF5ID0gcmVwbGF5R3JvdXAuZ2V0UmVwbGF5KHN0eWxlLmdldFpJbmRleCgpLCBSZXBsYXlUeXBlLkxJTkVfU1RSSU5HKTtcbiAgICBsaW5lU3RyaW5nUmVwbGF5LnNldEZpbGxTdHJva2VTdHlsZShudWxsLCBzdHJva2VTdHlsZSk7XG4gICAgbGluZVN0cmluZ1JlcGxheS5kcmF3TGluZVN0cmluZyhnZW9tZXRyeSwgZmVhdHVyZSk7XG4gIH1cbiAgdmFyIHRleHRTdHlsZSA9IHN0eWxlLmdldFRleHQoKTtcbiAgaWYgKHRleHRTdHlsZSkge1xuICAgIHZhciB0ZXh0UmVwbGF5ID0gcmVwbGF5R3JvdXAuZ2V0UmVwbGF5KHN0eWxlLmdldFpJbmRleCgpLCBSZXBsYXlUeXBlLlRFWFQpO1xuICAgIHRleHRSZXBsYXkuc2V0VGV4dFN0eWxlKHRleHRTdHlsZSwgcmVwbGF5R3JvdXAuYWRkRGVjbHV0dGVyKGZhbHNlKSk7XG4gICAgdGV4dFJlcGxheS5kcmF3VGV4dChnZW9tZXRyeSwgZmVhdHVyZSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL1JlcGxheUdyb3VwLmpzXCIpLmRlZmF1bHR9IHJlcGxheUdyb3VwIFJlcGxheSBncm91cC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyTXVsdGlMaW5lU3RyaW5nR2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSkge1xuICB2YXIgc3Ryb2tlU3R5bGUgPSBzdHlsZS5nZXRTdHJva2UoKTtcbiAgaWYgKHN0cm9rZVN0eWxlKSB7XG4gICAgdmFyIGxpbmVTdHJpbmdSZXBsYXkgPSByZXBsYXlHcm91cC5nZXRSZXBsYXkoc3R5bGUuZ2V0WkluZGV4KCksIFJlcGxheVR5cGUuTElORV9TVFJJTkcpO1xuICAgIGxpbmVTdHJpbmdSZXBsYXkuc2V0RmlsbFN0cm9rZVN0eWxlKG51bGwsIHN0cm9rZVN0eWxlKTtcbiAgICBsaW5lU3RyaW5nUmVwbGF5LmRyYXdNdWx0aUxpbmVTdHJpbmcoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICB9XG4gIHZhciB0ZXh0U3R5bGUgPSBzdHlsZS5nZXRUZXh0KCk7XG4gIGlmICh0ZXh0U3R5bGUpIHtcbiAgICB2YXIgdGV4dFJlcGxheSA9IHJlcGxheUdyb3VwLmdldFJlcGxheShzdHlsZS5nZXRaSW5kZXgoKSwgUmVwbGF5VHlwZS5URVhUKTtcbiAgICB0ZXh0UmVwbGF5LnNldFRleHRTdHlsZSh0ZXh0U3R5bGUsIHJlcGxheUdyb3VwLmFkZERlY2x1dHRlcihmYWxzZSkpO1xuICAgIHRleHRSZXBsYXkuZHJhd1RleHQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9SZXBsYXlHcm91cC5qc1wiKS5kZWZhdWx0fSByZXBsYXlHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fSBzdHlsZSBTdHlsZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gKi9cbmZ1bmN0aW9uIHJlbmRlck11bHRpUG9seWdvbkdlb21ldHJ5KHJlcGxheUdyb3VwLCBnZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUpIHtcbiAgdmFyIGZpbGxTdHlsZSA9IHN0eWxlLmdldEZpbGwoKTtcbiAgdmFyIHN0cm9rZVN0eWxlID0gc3R5bGUuZ2V0U3Ryb2tlKCk7XG4gIGlmIChzdHJva2VTdHlsZSB8fCBmaWxsU3R5bGUpIHtcbiAgICB2YXIgcG9seWdvblJlcGxheSA9IHJlcGxheUdyb3VwLmdldFJlcGxheShzdHlsZS5nZXRaSW5kZXgoKSwgUmVwbGF5VHlwZS5QT0xZR09OKTtcbiAgICBwb2x5Z29uUmVwbGF5LnNldEZpbGxTdHJva2VTdHlsZShmaWxsU3R5bGUsIHN0cm9rZVN0eWxlKTtcbiAgICBwb2x5Z29uUmVwbGF5LmRyYXdNdWx0aVBvbHlnb24oZ2VvbWV0cnksIGZlYXR1cmUpO1xuICB9XG4gIHZhciB0ZXh0U3R5bGUgPSBzdHlsZS5nZXRUZXh0KCk7XG4gIGlmICh0ZXh0U3R5bGUpIHtcbiAgICB2YXIgdGV4dFJlcGxheSA9IHJlcGxheUdyb3VwLmdldFJlcGxheShzdHlsZS5nZXRaSW5kZXgoKSwgUmVwbGF5VHlwZS5URVhUKTtcbiAgICB0ZXh0UmVwbGF5LnNldFRleHRTdHlsZSh0ZXh0U3R5bGUsIHJlcGxheUdyb3VwLmFkZERlY2x1dHRlcihmYWxzZSkpO1xuICAgIHRleHRSZXBsYXkuZHJhd1RleHQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9SZXBsYXlHcm91cC5qc1wiKS5kZWZhdWx0fSByZXBsYXlHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vUG9pbnQuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyUG9pbnRHZW9tZXRyeShyZXBsYXlHcm91cCwgZ2VvbWV0cnksIHN0eWxlLCBmZWF0dXJlKSB7XG4gIHZhciBpbWFnZVN0eWxlID0gc3R5bGUuZ2V0SW1hZ2UoKTtcbiAgaWYgKGltYWdlU3R5bGUpIHtcbiAgICBpZiAoaW1hZ2VTdHlsZS5nZXRJbWFnZVN0YXRlKCkgIT0gSW1hZ2VTdGF0ZS5MT0FERUQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGltYWdlUmVwbGF5ID0gcmVwbGF5R3JvdXAuZ2V0UmVwbGF5KHN0eWxlLmdldFpJbmRleCgpLCBSZXBsYXlUeXBlLklNQUdFKTtcbiAgICBpbWFnZVJlcGxheS5zZXRJbWFnZVN0eWxlKGltYWdlU3R5bGUsIHJlcGxheUdyb3VwLmFkZERlY2x1dHRlcihmYWxzZSkpO1xuICAgIGltYWdlUmVwbGF5LmRyYXdQb2ludChnZW9tZXRyeSwgZmVhdHVyZSk7XG4gIH1cbiAgdmFyIHRleHRTdHlsZSA9IHN0eWxlLmdldFRleHQoKTtcbiAgaWYgKHRleHRTdHlsZSkge1xuICAgIHZhciB0ZXh0UmVwbGF5ID0gcmVwbGF5R3JvdXAuZ2V0UmVwbGF5KHN0eWxlLmdldFpJbmRleCgpLCBSZXBsYXlUeXBlLlRFWFQpO1xuICAgIHRleHRSZXBsYXkuc2V0VGV4dFN0eWxlKHRleHRTdHlsZSwgcmVwbGF5R3JvdXAuYWRkRGVjbHV0dGVyKCEhaW1hZ2VTdHlsZSkpO1xuICAgIHRleHRSZXBsYXkuZHJhd1RleHQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9SZXBsYXlHcm91cC5qc1wiKS5kZWZhdWx0fSByZXBsYXlHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vTXVsdGlQb2ludC5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL3JlbmRlci9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fSBzdHlsZSBTdHlsZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICovXG5mdW5jdGlvbiByZW5kZXJNdWx0aVBvaW50R2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSkge1xuICB2YXIgaW1hZ2VTdHlsZSA9IHN0eWxlLmdldEltYWdlKCk7XG4gIGlmIChpbWFnZVN0eWxlKSB7XG4gICAgaWYgKGltYWdlU3R5bGUuZ2V0SW1hZ2VTdGF0ZSgpICE9IEltYWdlU3RhdGUuTE9BREVEKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpbWFnZVJlcGxheSA9IHJlcGxheUdyb3VwLmdldFJlcGxheShzdHlsZS5nZXRaSW5kZXgoKSwgUmVwbGF5VHlwZS5JTUFHRSk7XG4gICAgaW1hZ2VSZXBsYXkuc2V0SW1hZ2VTdHlsZShpbWFnZVN0eWxlLCByZXBsYXlHcm91cC5hZGREZWNsdXR0ZXIoZmFsc2UpKTtcbiAgICBpbWFnZVJlcGxheS5kcmF3TXVsdGlQb2ludChnZW9tZXRyeSwgZmVhdHVyZSk7XG4gIH1cbiAgdmFyIHRleHRTdHlsZSA9IHN0eWxlLmdldFRleHQoKTtcbiAgaWYgKHRleHRTdHlsZSkge1xuICAgIHZhciB0ZXh0UmVwbGF5ID0gcmVwbGF5R3JvdXAuZ2V0UmVwbGF5KHN0eWxlLmdldFpJbmRleCgpLCBSZXBsYXlUeXBlLlRFWFQpO1xuICAgIHRleHRSZXBsYXkuc2V0VGV4dFN0eWxlKHRleHRTdHlsZSwgcmVwbGF5R3JvdXAuYWRkRGVjbHV0dGVyKCEhaW1hZ2VTdHlsZSkpO1xuICAgIHRleHRSZXBsYXkuZHJhd1RleHQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9SZXBsYXlHcm91cC5qc1wiKS5kZWZhdWx0fSByZXBsYXlHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL3JlbmRlci9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fSBzdHlsZSBTdHlsZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICovXG5mdW5jdGlvbiByZW5kZXJQb2x5Z29uR2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSkge1xuICB2YXIgZmlsbFN0eWxlID0gc3R5bGUuZ2V0RmlsbCgpO1xuICB2YXIgc3Ryb2tlU3R5bGUgPSBzdHlsZS5nZXRTdHJva2UoKTtcbiAgaWYgKGZpbGxTdHlsZSB8fCBzdHJva2VTdHlsZSkge1xuICAgIHZhciBwb2x5Z29uUmVwbGF5ID0gcmVwbGF5R3JvdXAuZ2V0UmVwbGF5KHN0eWxlLmdldFpJbmRleCgpLCBSZXBsYXlUeXBlLlBPTFlHT04pO1xuICAgIHBvbHlnb25SZXBsYXkuc2V0RmlsbFN0cm9rZVN0eWxlKGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUpO1xuICAgIHBvbHlnb25SZXBsYXkuZHJhd1BvbHlnb24oZ2VvbWV0cnksIGZlYXR1cmUpO1xuICB9XG4gIHZhciB0ZXh0U3R5bGUgPSBzdHlsZS5nZXRUZXh0KCk7XG4gIGlmICh0ZXh0U3R5bGUpIHtcbiAgICB2YXIgdGV4dFJlcGxheSA9IHJlcGxheUdyb3VwLmdldFJlcGxheShzdHlsZS5nZXRaSW5kZXgoKSwgUmVwbGF5VHlwZS5URVhUKTtcbiAgICB0ZXh0UmVwbGF5LnNldFRleHRTdHlsZSh0ZXh0U3R5bGUsIHJlcGxheUdyb3VwLmFkZERlY2x1dHRlcihmYWxzZSkpO1xuICAgIHRleHRSZXBsYXkuZHJhd1RleHQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZlY3Rvci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL1ZlY3RvckxheWVyXG4gKi9cbmltcG9ydCB7Z2V0VWlkfSBmcm9tICcuLi8uLi91dGlsLmpzJztcbmltcG9ydCBMYXllclR5cGUgZnJvbSAnLi4vLi4vTGF5ZXJUeXBlLmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuLi8uLi9WaWV3SGludC5qcyc7XG5pbXBvcnQge2NyZWF0ZUNhbnZhc0NvbnRleHQyRH0gZnJvbSAnLi4vLi4vZG9tLmpzJztcbmltcG9ydCB7bGlzdGVuLCB1bmxpc3Rlbn0gZnJvbSAnLi4vLi4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgcmJ1c2ggZnJvbSAncmJ1c2gnO1xuaW1wb3J0IHtidWZmZXIsIGNyZWF0ZUVtcHR5LCBjb250YWluc0V4dGVudCwgZ2V0V2lkdGh9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnRUeXBlIGZyb20gJy4uLy4uL3JlbmRlci9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHtsYWJlbENhY2hlLCByb3RhdGVBdE9mZnNldH0gZnJvbSAnLi4vLi4vcmVuZGVyL2NhbnZhcy5qcyc7XG5pbXBvcnQgQ2FudmFzUmVwbGF5R3JvdXAgZnJvbSAnLi4vLi4vcmVuZGVyL2NhbnZhcy9SZXBsYXlHcm91cC5qcyc7XG5pbXBvcnQgQ2FudmFzTGF5ZXJSZW5kZXJlciBmcm9tICcuL0xheWVyLmpzJztcbmltcG9ydCB7ZGVmYXVsdE9yZGVyIGFzIGRlZmF1bHRSZW5kZXJPcmRlciwgZ2V0VG9sZXJhbmNlIGFzIGdldFJlbmRlclRvbGVyYW5jZSwgZ2V0U3F1YXJlZFRvbGVyYW5jZSBhcyBnZXRTcXVhcmVkUmVuZGVyVG9sZXJhbmNlLCByZW5kZXJGZWF0dXJlfSBmcm9tICcuLi92ZWN0b3IuanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENhbnZhcyByZW5kZXJlciBmb3IgdmVjdG9yIGxheWVycy5cbiAqIEBhcGlcbiAqL1xudmFyIENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChDYW52YXNMYXllclJlbmRlcmVyKSB7XG4gIGZ1bmN0aW9uIENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIodmVjdG9yTGF5ZXIpIHtcblxuICAgIENhbnZhc0xheWVyUmVuZGVyZXIuY2FsbCh0aGlzLCB2ZWN0b3JMYXllcik7XG5cbiAgICAvKipcbiAgICAgKiBEZWNsdXR0ZXIgdHJlZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZGVjbHV0dGVyVHJlZV8gPSB2ZWN0b3JMYXllci5nZXREZWNsdXR0ZXIoKSA/IHJidXNoKDksIHVuZGVmaW5lZCkgOiBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmRpcnR5XyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRSZXZpc2lvbl8gPSAtMTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlcmVkUmVzb2x1dGlvbl8gPSBOYU47XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRFeHRlbnRfID0gY3JlYXRlRW1wdHkoKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Z1bmN0aW9uKGltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0KTogbnVtYmVyfG51bGx9XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZFJlbmRlck9yZGVyXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9yZW5kZXIvY2FudmFzL1JlcGxheUdyb3VwLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5yZXBsYXlHcm91cF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQSBuZXcgcmVwbGF5IGdyb3VwIGhhZCB0byBiZSBjcmVhdGVkIGJ5IGBwcmVwYXJlRnJhbWUoKWBcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnJlcGxheUdyb3VwQ2hhbmdlZCA9IHRydWU7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfVxuICAgICAqL1xuICAgIHRoaXMuY29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgpO1xuXG4gICAgbGlzdGVuKGxhYmVsQ2FjaGUsIEV2ZW50VHlwZS5DTEVBUiwgdGhpcy5oYW5kbGVGb250c0NoYW5nZWRfLCB0aGlzKTtcblxuICB9XG5cbiAgaWYgKCBDYW52YXNMYXllclJlbmRlcmVyICkgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5fX3Byb3RvX18gPSBDYW52YXNMYXllclJlbmRlcmVyO1xuICBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIENhbnZhc0xheWVyUmVuZGVyZXIgJiYgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUgKTtcbiAgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gZGlzcG9zZUludGVybmFsICgpIHtcbiAgICB1bmxpc3RlbihsYWJlbENhY2hlLCBFdmVudFR5cGUuQ0xFQVIsIHRoaXMuaGFuZGxlRm9udHNDaGFuZ2VkXywgdGhpcyk7XG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuU3RhdGV9IGxheWVyU3RhdGUgTGF5ZXIgc3RhdGUuXG4gICAqL1xuICBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jb21wb3NlID0gZnVuY3Rpb24gY29tcG9zZSAoY29udGV4dCwgZnJhbWVTdGF0ZSwgbGF5ZXJTdGF0ZSkge1xuICAgIHZhciBleHRlbnQgPSBmcmFtZVN0YXRlLmV4dGVudDtcbiAgICB2YXIgcGl4ZWxSYXRpbyA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcbiAgICB2YXIgc2tpcHBlZEZlYXR1cmVVaWRzID0gbGF5ZXJTdGF0ZS5tYW5hZ2VkID9cbiAgICAgIGZyYW1lU3RhdGUuc2tpcHBlZEZlYXR1cmVVaWRzIDoge307XG4gICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgdmFyIHJvdGF0aW9uID0gdmlld1N0YXRlLnJvdGF0aW9uO1xuICAgIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICB2YXIgdmVjdG9yU291cmNlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVmVjdG9yLmpzXCIpLmRlZmF1bHR9ICovICh0aGlzLmdldExheWVyKCkuZ2V0U291cmNlKCkpO1xuXG4gICAgdmFyIHRyYW5zZm9ybSA9IHRoaXMuZ2V0VHJhbnNmb3JtKGZyYW1lU3RhdGUsIDApO1xuXG4gICAgLy8gY2xpcHBlZCByZW5kZXJpbmcgaWYgbGF5ZXIgZXh0ZW50IGlzIHNldFxuICAgIHZhciBjbGlwRXh0ZW50ID0gbGF5ZXJTdGF0ZS5leHRlbnQ7XG4gICAgdmFyIGNsaXBwZWQgPSBjbGlwRXh0ZW50ICE9PSB1bmRlZmluZWQ7XG4gICAgaWYgKGNsaXBwZWQpIHtcbiAgICAgIHRoaXMuY2xpcChjb250ZXh0LCBmcmFtZVN0YXRlLCAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9ICovIChjbGlwRXh0ZW50KSk7XG4gICAgfVxuICAgIHZhciByZXBsYXlHcm91cCA9IHRoaXMucmVwbGF5R3JvdXBfO1xuICAgIGlmIChyZXBsYXlHcm91cCAmJiAhcmVwbGF5R3JvdXAuaXNFbXB0eSgpKSB7XG4gICAgICBpZiAodGhpcy5kZWNsdXR0ZXJUcmVlXykge1xuICAgICAgICB0aGlzLmRlY2x1dHRlclRyZWVfLmNsZWFyKCk7XG4gICAgICB9XG4gICAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5nZXRMYXllcigpKTtcbiAgICAgIHZhciBkcmF3T2Zmc2V0WCA9IDA7XG4gICAgICB2YXIgZHJhd09mZnNldFkgPSAwO1xuICAgICAgdmFyIHJlcGxheUNvbnRleHQ7XG4gICAgICB2YXIgdHJhbnNwYXJlbnRMYXllciA9IGxheWVyU3RhdGUub3BhY2l0eSAhPT0gMTtcbiAgICAgIHZhciBoYXNSZW5kZXJMaXN0ZW5lcnMgPSBsYXllci5oYXNMaXN0ZW5lcihSZW5kZXJFdmVudFR5cGUuUkVOREVSKTtcbiAgICAgIGlmICh0cmFuc3BhcmVudExheWVyIHx8IGhhc1JlbmRlckxpc3RlbmVycykge1xuICAgICAgICB2YXIgZHJhd1dpZHRoID0gY29udGV4dC5jYW52YXMud2lkdGg7XG4gICAgICAgIHZhciBkcmF3SGVpZ2h0ID0gY29udGV4dC5jYW52YXMuaGVpZ2h0O1xuICAgICAgICBpZiAocm90YXRpb24pIHtcbiAgICAgICAgICB2YXIgZHJhd1NpemUgPSBNYXRoLnJvdW5kKE1hdGguc3FydChkcmF3V2lkdGggKiBkcmF3V2lkdGggKyBkcmF3SGVpZ2h0ICogZHJhd0hlaWdodCkpO1xuICAgICAgICAgIGRyYXdPZmZzZXRYID0gKGRyYXdTaXplIC0gZHJhd1dpZHRoKSAvIDI7XG4gICAgICAgICAgZHJhd09mZnNldFkgPSAoZHJhd1NpemUgLSBkcmF3SGVpZ2h0KSAvIDI7XG4gICAgICAgICAgZHJhd1dpZHRoID0gZHJhd0hlaWdodCA9IGRyYXdTaXplO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlc2l6ZSBhbmQgY2xlYXJcbiAgICAgICAgdGhpcy5jb250ZXh0LmNhbnZhcy53aWR0aCA9IGRyYXdXaWR0aDtcbiAgICAgICAgdGhpcy5jb250ZXh0LmNhbnZhcy5oZWlnaHQgPSBkcmF3SGVpZ2h0O1xuICAgICAgICByZXBsYXlDb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVwbGF5Q29udGV4dCA9IGNvbnRleHQ7XG4gICAgICB9XG5cbiAgICAgIHZhciBhbHBoYSA9IHJlcGxheUNvbnRleHQuZ2xvYmFsQWxwaGE7XG4gICAgICBpZiAoIXRyYW5zcGFyZW50TGF5ZXIpIHtcbiAgICAgICAgLy8gZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIGNvbnRleHQuc2F2ZSAvIGNvbnRleHQucmVzdG9yZSBpcyBub3QgdXNlZFxuICAgICAgICAvLyB0byBzYXZlIGFuZCByZXN0b3JlIHRoZSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXggYW5kIHRoZSBvcGFjaXR5LlxuICAgICAgICAvLyBzZWUgaHR0cDovL2pzcGVyZi5jb20vY29udGV4dC1zYXZlLXJlc3RvcmUtdmVyc3VzLXZhcmlhYmxlXG4gICAgICAgIHJlcGxheUNvbnRleHQuZ2xvYmFsQWxwaGEgPSBsYXllclN0YXRlLm9wYWNpdHk7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXBsYXlDb250ZXh0ICE9IGNvbnRleHQpIHtcbiAgICAgICAgcmVwbGF5Q29udGV4dC50cmFuc2xhdGUoZHJhd09mZnNldFgsIGRyYXdPZmZzZXRZKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHZpZXdIaW50cyA9IGZyYW1lU3RhdGUudmlld0hpbnRzO1xuICAgICAgdmFyIHNuYXBUb1BpeGVsID0gISh2aWV3SGludHNbVmlld0hpbnQuQU5JTUFUSU5HXSB8fCB2aWV3SGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddKTtcbiAgICAgIHZhciB3aWR0aCA9IGZyYW1lU3RhdGUuc2l6ZVswXSAqIHBpeGVsUmF0aW87XG4gICAgICB2YXIgaGVpZ2h0ID0gZnJhbWVTdGF0ZS5zaXplWzFdICogcGl4ZWxSYXRpbztcbiAgICAgIHJvdGF0ZUF0T2Zmc2V0KHJlcGxheUNvbnRleHQsIC1yb3RhdGlvbixcbiAgICAgICAgd2lkdGggLyAyLCBoZWlnaHQgLyAyKTtcbiAgICAgIHJlcGxheUdyb3VwLnJlcGxheShyZXBsYXlDb250ZXh0LCB0cmFuc2Zvcm0sIHJvdGF0aW9uLCBza2lwcGVkRmVhdHVyZVVpZHMsIHNuYXBUb1BpeGVsKTtcbiAgICAgIGlmICh2ZWN0b3JTb3VyY2UuZ2V0V3JhcFgoKSAmJiBwcm9qZWN0aW9uLmNhbldyYXBYKCkgJiZcbiAgICAgICAgICAhY29udGFpbnNFeHRlbnQocHJvamVjdGlvbkV4dGVudCwgZXh0ZW50KSkge1xuICAgICAgICB2YXIgc3RhcnRYID0gZXh0ZW50WzBdO1xuICAgICAgICB2YXIgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuICAgICAgICB2YXIgd29ybGQgPSAwO1xuICAgICAgICB2YXIgb2Zmc2V0WDtcbiAgICAgICAgd2hpbGUgKHN0YXJ0WCA8IHByb2plY3Rpb25FeHRlbnRbMF0pIHtcbiAgICAgICAgICAtLXdvcmxkO1xuICAgICAgICAgIG9mZnNldFggPSB3b3JsZFdpZHRoICogd29ybGQ7XG4gICAgICAgICAgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm0oZnJhbWVTdGF0ZSwgb2Zmc2V0WCk7XG4gICAgICAgICAgcmVwbGF5R3JvdXAucmVwbGF5KHJlcGxheUNvbnRleHQsIHRyYW5zZm9ybSwgcm90YXRpb24sIHNraXBwZWRGZWF0dXJlVWlkcywgc25hcFRvUGl4ZWwpO1xuICAgICAgICAgIHN0YXJ0WCArPSB3b3JsZFdpZHRoO1xuICAgICAgICB9XG4gICAgICAgIHdvcmxkID0gMDtcbiAgICAgICAgc3RhcnRYID0gZXh0ZW50WzJdO1xuICAgICAgICB3aGlsZSAoc3RhcnRYID4gcHJvamVjdGlvbkV4dGVudFsyXSkge1xuICAgICAgICAgICsrd29ybGQ7XG4gICAgICAgICAgb2Zmc2V0WCA9IHdvcmxkV2lkdGggKiB3b3JsZDtcbiAgICAgICAgICB0cmFuc2Zvcm0gPSB0aGlzLmdldFRyYW5zZm9ybShmcmFtZVN0YXRlLCBvZmZzZXRYKTtcbiAgICAgICAgICByZXBsYXlHcm91cC5yZXBsYXkocmVwbGF5Q29udGV4dCwgdHJhbnNmb3JtLCByb3RhdGlvbiwgc2tpcHBlZEZlYXR1cmVVaWRzLCBzbmFwVG9QaXhlbCk7XG4gICAgICAgICAgc3RhcnRYIC09IHdvcmxkV2lkdGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJvdGF0ZUF0T2Zmc2V0KHJlcGxheUNvbnRleHQsIHJvdGF0aW9uLFxuICAgICAgICB3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xuXG4gICAgICBpZiAoaGFzUmVuZGVyTGlzdGVuZXJzKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hSZW5kZXJFdmVudChyZXBsYXlDb250ZXh0LCBmcmFtZVN0YXRlLCB0cmFuc2Zvcm0pO1xuICAgICAgfVxuICAgICAgaWYgKHJlcGxheUNvbnRleHQgIT0gY29udGV4dCkge1xuICAgICAgICBpZiAodHJhbnNwYXJlbnRMYXllcikge1xuICAgICAgICAgIHZhciBtYWluQ29udGV4dEFscGhhID0gY29udGV4dC5nbG9iYWxBbHBoYTtcbiAgICAgICAgICBjb250ZXh0Lmdsb2JhbEFscGhhID0gbGF5ZXJTdGF0ZS5vcGFjaXR5O1xuICAgICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKHJlcGxheUNvbnRleHQuY2FudmFzLCAtZHJhd09mZnNldFgsIC1kcmF3T2Zmc2V0WSk7XG4gICAgICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IG1haW5Db250ZXh0QWxwaGE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UocmVwbGF5Q29udGV4dC5jYW52YXMsIC1kcmF3T2Zmc2V0WCwgLWRyYXdPZmZzZXRZKTtcbiAgICAgICAgfVxuICAgICAgICByZXBsYXlDb250ZXh0LnRyYW5zbGF0ZSgtZHJhd09mZnNldFgsIC1kcmF3T2Zmc2V0WSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdHJhbnNwYXJlbnRMYXllcikge1xuICAgICAgICByZXBsYXlDb250ZXh0Lmdsb2JhbEFscGhhID0gYWxwaGE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNsaXBwZWQpIHtcbiAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIucHJvdG90eXBlLmNvbXBvc2VGcmFtZSA9IGZ1bmN0aW9uIGNvbXBvc2VGcmFtZSAoZnJhbWVTdGF0ZSwgbGF5ZXJTdGF0ZSwgY29udGV4dCkge1xuICAgIHZhciB0cmFuc2Zvcm0gPSB0aGlzLmdldFRyYW5zZm9ybShmcmFtZVN0YXRlLCAwKTtcbiAgICB0aGlzLnByZUNvbXBvc2UoY29udGV4dCwgZnJhbWVTdGF0ZSwgdHJhbnNmb3JtKTtcbiAgICB0aGlzLmNvbXBvc2UoY29udGV4dCwgZnJhbWVTdGF0ZSwgbGF5ZXJTdGF0ZSk7XG4gICAgdGhpcy5wb3N0Q29tcG9zZShjb250ZXh0LCBmcmFtZVN0YXRlLCBsYXllclN0YXRlLCB0cmFuc2Zvcm0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIGlmICghdGhpcy5yZXBsYXlHcm91cF8pIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciByZXNvbHV0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucmVzb2x1dGlvbjtcbiAgICAgIHZhciByb3RhdGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnJvdGF0aW9uO1xuICAgICAgdmFyIGxheWVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3IuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0TGF5ZXIoKSk7XG4gICAgICAvKiogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gKi9cbiAgICAgIHZhciBmZWF0dXJlcyA9IHt9O1xuICAgICAgdmFyIHJlc3VsdCA9IHRoaXMucmVwbGF5R3JvdXBfLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKGNvb3JkaW5hdGUsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBoaXRUb2xlcmFuY2UsIHt9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAqIEByZXR1cm4gez99IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uKGZlYXR1cmUpIHtcbiAgICAgICAgICB2YXIga2V5ID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgICAgICAgIGlmICghKGtleSBpbiBmZWF0dXJlcykpIHtcbiAgICAgICAgICAgIGZlYXR1cmVzW2tleV0gPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgZmVhdHVyZSwgbGF5ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAqL1xuICBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLnByb3RvdHlwZS5oYW5kbGVGb250c0NoYW5nZWRfID0gZnVuY3Rpb24gaGFuZGxlRm9udHNDaGFuZ2VkXyAoZXZlbnQpIHtcbiAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgaWYgKGxheWVyLmdldFZpc2libGUoKSAmJiB0aGlzLnJlcGxheUdyb3VwXykge1xuICAgICAgbGF5ZXIuY2hhbmdlZCgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlIGNoYW5nZXMgaW4gaW1hZ2Ugc3R5bGUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEltYWdlIHN0eWxlIGNoYW5nZSBldmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIucHJvdG90eXBlLmhhbmRsZVN0eWxlSW1hZ2VDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlU3R5bGVJbWFnZUNoYW5nZV8gKGV2ZW50KSB7XG4gICAgdGhpcy5yZW5kZXJJZlJlYWR5QW5kVmlzaWJsZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucHJlcGFyZUZyYW1lID0gZnVuY3Rpb24gcHJlcGFyZUZyYW1lIChmcmFtZVN0YXRlLCBsYXllclN0YXRlKSB7XG4gICAgdmFyIHZlY3RvckxheWVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3IuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0TGF5ZXIoKSk7XG4gICAgdmFyIHZlY3RvclNvdXJjZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vc291cmNlL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fSAqLyAodmVjdG9yTGF5ZXIuZ2V0U291cmNlKCkpO1xuXG4gICAgdmFyIGFuaW1hdGluZyA9IGZyYW1lU3RhdGUudmlld0hpbnRzW1ZpZXdIaW50LkFOSU1BVElOR107XG4gICAgdmFyIGludGVyYWN0aW5nID0gZnJhbWVTdGF0ZS52aWV3SGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddO1xuICAgIHZhciB1cGRhdGVXaGlsZUFuaW1hdGluZyA9IHZlY3RvckxheWVyLmdldFVwZGF0ZVdoaWxlQW5pbWF0aW5nKCk7XG4gICAgdmFyIHVwZGF0ZVdoaWxlSW50ZXJhY3RpbmcgPSB2ZWN0b3JMYXllci5nZXRVcGRhdGVXaGlsZUludGVyYWN0aW5nKCk7XG5cbiAgICBpZiAoIXRoaXMuZGlydHlfICYmICghdXBkYXRlV2hpbGVBbmltYXRpbmcgJiYgYW5pbWF0aW5nKSB8fFxuICAgICAgICAoIXVwZGF0ZVdoaWxlSW50ZXJhY3RpbmcgJiYgaW50ZXJhY3RpbmcpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgZnJhbWVTdGF0ZUV4dGVudCA9IGZyYW1lU3RhdGUuZXh0ZW50O1xuICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICB2YXIgcHJvamVjdGlvbiA9IHZpZXdTdGF0ZS5wcm9qZWN0aW9uO1xuICAgIHZhciByZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XG4gICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgdmFyIHZlY3RvckxheWVyUmV2aXNpb24gPSB2ZWN0b3JMYXllci5nZXRSZXZpc2lvbigpO1xuICAgIHZhciB2ZWN0b3JMYXllclJlbmRlckJ1ZmZlciA9IHZlY3RvckxheWVyLmdldFJlbmRlckJ1ZmZlcigpO1xuICAgIHZhciB2ZWN0b3JMYXllclJlbmRlck9yZGVyID0gdmVjdG9yTGF5ZXIuZ2V0UmVuZGVyT3JkZXIoKTtcblxuICAgIGlmICh2ZWN0b3JMYXllclJlbmRlck9yZGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHZlY3RvckxheWVyUmVuZGVyT3JkZXIgPSBkZWZhdWx0UmVuZGVyT3JkZXI7XG4gICAgfVxuXG4gICAgdmFyIGV4dGVudCA9IGJ1ZmZlcihmcmFtZVN0YXRlRXh0ZW50LFxuICAgICAgdmVjdG9yTGF5ZXJSZW5kZXJCdWZmZXIgKiByZXNvbHV0aW9uKTtcbiAgICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IHZpZXdTdGF0ZS5wcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuXG4gICAgaWYgKHZlY3RvclNvdXJjZS5nZXRXcmFwWCgpICYmIHZpZXdTdGF0ZS5wcm9qZWN0aW9uLmNhbldyYXBYKCkgJiZcbiAgICAgICAgIWNvbnRhaW5zRXh0ZW50KHByb2plY3Rpb25FeHRlbnQsIGZyYW1lU3RhdGUuZXh0ZW50KSkge1xuICAgICAgLy8gRm9yIHRoZSByZXBsYXkgZ3JvdXAsIHdlIG5lZWQgYW4gZXh0ZW50IHRoYXQgaW50ZXJzZWN0cyB0aGUgcmVhbCB3b3JsZFxuICAgICAgLy8gKC0xODDCsCB0byArMTgwwrApLiBUbyBzdXBwb3J0IGdlb21ldHJpZXMgaW4gYSBjb29yZGluYXRlIHJhbmdlIGZyb20gLTU0MMKwXG4gICAgICAvLyB0byArNTQwwrAsIHdlIGFkZCBhdCBsZWFzdCAxIHdvcmxkIHdpZHRoIG9uIGVhY2ggc2lkZSBvZiB0aGUgcHJvamVjdGlvblxuICAgICAgLy8gZXh0ZW50LiBJZiB0aGUgdmlld3BvcnQgaXMgd2lkZXIgdGhhbiB0aGUgd29ybGQsIHdlIG5lZWQgdG8gYWRkIGhhbGYgb2ZcbiAgICAgIC8vIHRoZSB2aWV3cG9ydCB3aWR0aCB0byBtYWtlIHN1cmUgd2UgY292ZXIgdGhlIHdob2xlIHZpZXdwb3J0LlxuICAgICAgdmFyIHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICAgIHZhciBndXR0ZXIgPSBNYXRoLm1heChnZXRXaWR0aChleHRlbnQpIC8gMiwgd29ybGRXaWR0aCk7XG4gICAgICBleHRlbnRbMF0gPSBwcm9qZWN0aW9uRXh0ZW50WzBdIC0gZ3V0dGVyO1xuICAgICAgZXh0ZW50WzJdID0gcHJvamVjdGlvbkV4dGVudFsyXSArIGd1dHRlcjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZGlydHlfICYmXG4gICAgICAgIHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uXyA9PSByZXNvbHV0aW9uICYmXG4gICAgICAgIHRoaXMucmVuZGVyZWRSZXZpc2lvbl8gPT0gdmVjdG9yTGF5ZXJSZXZpc2lvbiAmJlxuICAgICAgICB0aGlzLnJlbmRlcmVkUmVuZGVyT3JkZXJfID09IHZlY3RvckxheWVyUmVuZGVyT3JkZXIgJiZcbiAgICAgICAgY29udGFpbnNFeHRlbnQodGhpcy5yZW5kZXJlZEV4dGVudF8sIGV4dGVudCkpIHtcbiAgICAgIHRoaXMucmVwbGF5R3JvdXBDaGFuZ2VkID0gZmFsc2U7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLnJlcGxheUdyb3VwXyA9IG51bGw7XG5cbiAgICB0aGlzLmRpcnR5XyA9IGZhbHNlO1xuXG4gICAgdmFyIHJlcGxheUdyb3VwID0gbmV3IENhbnZhc1JlcGxheUdyb3VwKFxuICAgICAgZ2V0UmVuZGVyVG9sZXJhbmNlKHJlc29sdXRpb24sIHBpeGVsUmF0aW8pLCBleHRlbnQsIHJlc29sdXRpb24sXG4gICAgICBwaXhlbFJhdGlvLCB2ZWN0b3JTb3VyY2UuZ2V0T3ZlcmxhcHMoKSwgdGhpcy5kZWNsdXR0ZXJUcmVlXywgdmVjdG9yTGF5ZXIuZ2V0UmVuZGVyQnVmZmVyKCkpO1xuICAgIHZlY3RvclNvdXJjZS5sb2FkRmVhdHVyZXMoZXh0ZW50LCByZXNvbHV0aW9uLCBwcm9qZWN0aW9uKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqIEB0aGlzIHtDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyfVxuICAgICAqL1xuICAgIHZhciByZW5kZXIgPSBmdW5jdGlvbihmZWF0dXJlKSB7XG4gICAgICB2YXIgc3R5bGVzO1xuICAgICAgdmFyIHN0eWxlRnVuY3Rpb24gPSBmZWF0dXJlLmdldFN0eWxlRnVuY3Rpb24oKSB8fCB2ZWN0b3JMYXllci5nZXRTdHlsZUZ1bmN0aW9uKCk7XG4gICAgICBpZiAoc3R5bGVGdW5jdGlvbikge1xuICAgICAgICBzdHlsZXMgPSBzdHlsZUZ1bmN0aW9uKGZlYXR1cmUsIHJlc29sdXRpb24pO1xuICAgICAgfVxuICAgICAgaWYgKHN0eWxlcykge1xuICAgICAgICB2YXIgZGlydHkgPSB0aGlzLnJlbmRlckZlYXR1cmUoXG4gICAgICAgICAgZmVhdHVyZSwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgc3R5bGVzLCByZXBsYXlHcm91cCk7XG4gICAgICAgIHRoaXMuZGlydHlfID0gdGhpcy5kaXJ0eV8gfHwgZGlydHk7XG4gICAgICB9XG4gICAgfS5iaW5kKHRoaXMpO1xuICAgIGlmICh2ZWN0b3JMYXllclJlbmRlck9yZGVyKSB7XG4gICAgICAvKiogQHR5cGUge0FycmF5PGltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD59ICovXG4gICAgICB2YXIgZmVhdHVyZXMgPSBbXTtcbiAgICAgIHZlY3RvclNvdXJjZS5mb3JFYWNoRmVhdHVyZUluRXh0ZW50KGV4dGVudCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbihmZWF0dXJlKSB7XG4gICAgICAgICAgZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICAgICAgfSk7XG4gICAgICBmZWF0dXJlcy5zb3J0KHZlY3RvckxheWVyUmVuZGVyT3JkZXIpO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZmVhdHVyZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICByZW5kZXIoZmVhdHVyZXNbaV0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2ZWN0b3JTb3VyY2UuZm9yRWFjaEZlYXR1cmVJbkV4dGVudChleHRlbnQsIHJlbmRlcik7XG4gICAgfVxuICAgIHJlcGxheUdyb3VwLmZpbmlzaCgpO1xuXG4gICAgdGhpcy5yZW5kZXJlZFJlc29sdXRpb25fID0gcmVzb2x1dGlvbjtcbiAgICB0aGlzLnJlbmRlcmVkUmV2aXNpb25fID0gdmVjdG9yTGF5ZXJSZXZpc2lvbjtcbiAgICB0aGlzLnJlbmRlcmVkUmVuZGVyT3JkZXJfID0gdmVjdG9yTGF5ZXJSZW5kZXJPcmRlcjtcbiAgICB0aGlzLnJlbmRlcmVkRXh0ZW50XyA9IGV4dGVudDtcbiAgICB0aGlzLnJlcGxheUdyb3VwXyA9IHJlcGxheUdyb3VwO1xuXG4gICAgdGhpcy5yZXBsYXlHcm91cENoYW5nZWQgPSB0cnVlO1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fEFycmF5PGltcG9ydChcIi4uLy4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHQ+fSBzdHlsZXMgVGhlIHN0eWxlIG9yIGFycmF5IG9mIHN0eWxlcy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9yZW5kZXIvY2FudmFzL1JlcGxheUdyb3VwLmpzXCIpLmRlZmF1bHR9IHJlcGxheUdyb3VwIFJlcGxheSBncm91cC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIGFuIGltYWdlIGlzIGxvYWRpbmcuXG4gICAqL1xuICBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJGZWF0dXJlID0gZnVuY3Rpb24gcmVuZGVyRmVhdHVyZSQxIChmZWF0dXJlLCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBzdHlsZXMsIHJlcGxheUdyb3VwKSB7XG4gICAgaWYgKCFzdHlsZXMpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIGxvYWRpbmcgPSBmYWxzZTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzdHlsZXMpKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBzdHlsZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBsb2FkaW5nID0gcmVuZGVyRmVhdHVyZShcbiAgICAgICAgICByZXBsYXlHcm91cCwgZmVhdHVyZSwgc3R5bGVzW2ldLFxuICAgICAgICAgIGdldFNxdWFyZWRSZW5kZXJUb2xlcmFuY2UocmVzb2x1dGlvbiwgcGl4ZWxSYXRpbyksXG4gICAgICAgICAgdGhpcy5oYW5kbGVTdHlsZUltYWdlQ2hhbmdlXywgdGhpcykgfHwgbG9hZGluZztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbG9hZGluZyA9IHJlbmRlckZlYXR1cmUoXG4gICAgICAgIHJlcGxheUdyb3VwLCBmZWF0dXJlLCBzdHlsZXMsXG4gICAgICAgIGdldFNxdWFyZWRSZW5kZXJUb2xlcmFuY2UocmVzb2x1dGlvbiwgcGl4ZWxSYXRpbyksXG4gICAgICAgIHRoaXMuaGFuZGxlU3R5bGVJbWFnZUNoYW5nZV8sIHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gbG9hZGluZztcbiAgfTtcblxuICByZXR1cm4gQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlcjtcbn0oQ2FudmFzTGF5ZXJSZW5kZXJlcikpO1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHRoaXMgcmVuZGVyZXIgaGFuZGxlcyB0aGUgcHJvdmlkZWQgbGF5ZXIuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIFRoZSBjYW5kaWRhdGUgbGF5ZXIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgcmVuZGVyZXIgY2FuIHJlbmRlciB0aGUgbGF5ZXIuXG4gKi9cbkNhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXJbJ2hhbmRsZXMnXSA9IGZ1bmN0aW9uKGxheWVyKSB7XG4gIHJldHVybiBsYXllci5nZXRUeXBlKCkgPT09IExheWVyVHlwZS5WRUNUT1I7XG59O1xuXG5cbi8qKlxuICogQ3JlYXRlIGEgbGF5ZXIgcmVuZGVyZXIuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5kZWZhdWx0fSBtYXBSZW5kZXJlciBUaGUgbWFwIHJlbmRlcmVyLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBsYXllciBUaGUgbGF5ZXIgdG8gYmUgcmVuZGVyZXJkLlxuICogQHJldHVybiB7Q2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlcn0gVGhlIGxheWVyIHJlbmRlcmVyLlxuICovXG5DYW52YXNWZWN0b3JMYXllclJlbmRlcmVyWydjcmVhdGUnXSA9IGZ1bmN0aW9uKG1hcFJlbmRlcmVyLCBsYXllcikge1xuICByZXR1cm4gbmV3IENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIoLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3IuanNcIikuZGVmYXVsdH0gKi8gKGxheWVyKSk7XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZlY3RvckxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9WZWN0b3JUaWxlUmVuZGVyVHlwZVxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIFJlbmRlciBtb2RlIGZvciB2ZWN0b3IgdGlsZXM6XG4gKiAgKiBgJ2ltYWdlJ2A6IFZlY3RvciB0aWxlcyBhcmUgcmVuZGVyZWQgYXMgaW1hZ2VzLiBHcmVhdCBwZXJmb3JtYW5jZSwgYnV0XG4gKiAgICBwb2ludCBzeW1ib2xzIGFuZCB0ZXh0cyBhcmUgYWx3YXlzIHJvdGF0ZWQgd2l0aCB0aGUgdmlldyBhbmQgcGl4ZWxzIGFyZVxuICogICAgc2NhbGVkIGR1cmluZyB6b29tIGFuaW1hdGlvbnMuXG4gKiAgKiBgJ2h5YnJpZCdgOiBQb2x5Z29uIGFuZCBsaW5lIGVsZW1lbnRzIGFyZSByZW5kZXJlZCBhcyBpbWFnZXMsIHNvIHBpeGVsc1xuICogICAgYXJlIHNjYWxlZCBkdXJpbmcgem9vbSBhbmltYXRpb25zLiBQb2ludCBzeW1ib2xzIGFuZCB0ZXh0cyBhcmUgYWNjdXJhdGVseVxuICogICAgcmVuZGVyZWQgYXMgdmVjdG9ycyBhbmQgY2FuIHN0YXkgdXByaWdodCBvbiByb3RhdGVkIHZpZXdzLlxuICogICogYCd2ZWN0b3InYDogVmVjdG9yIHRpbGVzIGFyZSByZW5kZXJlZCBhcyB2ZWN0b3JzLiBNb3N0IGFjY3VyYXRlIHJlbmRlcmluZ1xuICogICAgZXZlbiBkdXJpbmcgYW5pbWF0aW9ucywgYnV0IHNsb3dlciBwZXJmb3JtYW5jZSB0aGFuIHRoZSBvdGhlciBvcHRpb25zLlxuICogQGFwaVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIElNQUdFOiAnaW1hZ2UnLFxuICBIWUJSSUQ6ICdoeWJyaWQnLFxuICBWRUNUT1I6ICd2ZWN0b3InXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1WZWN0b3JUaWxlUmVuZGVyVHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL1ZlY3RvclRpbGVMYXllclxuICovXG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi4vLi4vdXRpbC5qcyc7XG5pbXBvcnQgTGF5ZXJUeXBlIGZyb20gJy4uLy4uL0xheWVyVHlwZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uLy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgVmlld0hpbnQgZnJvbSAnLi4vLi4vVmlld0hpbnQuanMnO1xuaW1wb3J0IHtjcmVhdGVDYW52YXNDb250ZXh0MkR9IGZyb20gJy4uLy4uL2RvbS5qcyc7XG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW59IGZyb20gJy4uLy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uLy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHJidXNoIGZyb20gJ3JidXNoJztcbmltcG9ydCB7YnVmZmVyLCBjb250YWluc0Nvb3JkaW5hdGUsIGVxdWFscywgZ2V0SW50ZXJzZWN0aW9uLCBnZXRUb3BMZWZ0LCBpbnRlcnNlY3RzfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IFZlY3RvclRpbGVSZW5kZXJUeXBlIGZyb20gJy4uLy4uL2xheWVyL1ZlY3RvclRpbGVSZW5kZXJUeXBlLmpzJztcbmltcG9ydCB7ZXF1aXZhbGVudCBhcyBlcXVpdmFsZW50UHJvamVjdGlvbn0gZnJvbSAnLi4vLi4vcHJvai5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi4vLi4vcHJvai9Vbml0cy5qcyc7XG5pbXBvcnQgUmVwbGF5VHlwZSBmcm9tICcuLi8uLi9yZW5kZXIvUmVwbGF5VHlwZS5qcyc7XG5pbXBvcnQge2xhYmVsQ2FjaGUsIHJvdGF0ZUF0T2Zmc2V0fSBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzLmpzJztcbmltcG9ydCBDYW52YXNSZXBsYXlHcm91cCwge3JlcGxheURlY2x1dHRlcn0gZnJvbSAnLi4vLi4vcmVuZGVyL2NhbnZhcy9SZXBsYXlHcm91cC5qcyc7XG5pbXBvcnQge09SREVSfSBmcm9tICcuLi8uLi9yZW5kZXIvcmVwbGF5LmpzJztcbmltcG9ydCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciBmcm9tICcuL1RpbGVMYXllci5qcyc7XG5pbXBvcnQge2dldFNxdWFyZWRUb2xlcmFuY2UgYXMgZ2V0U3F1YXJlZFJlbmRlclRvbGVyYW5jZSwgcmVuZGVyRmVhdHVyZX0gZnJvbSAnLi4vdmVjdG9yLmpzJztcbmltcG9ydCB7XG4gIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sXG4gIGNvbXBvc2UgYXMgY29tcG9zZVRyYW5zZm9ybSxcbiAgcmVzZXQgYXMgcmVzZXRUcmFuc2Zvcm0sXG4gIHNjYWxlIGFzIHNjYWxlVHJhbnNmb3JtLFxuICB0cmFuc2xhdGUgYXMgdHJhbnNsYXRlVHJhbnNmb3JtXG59IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIEFycmF5PGltcG9ydChcIi4uLy4uL3JlbmRlci9SZXBsYXlUeXBlLmpzXCIpLmRlZmF1bHQ+Pn1cbiAqL1xudmFyIElNQUdFX1JFUExBWVMgPSB7XG4gICdpbWFnZSc6IFtSZXBsYXlUeXBlLlBPTFlHT04sIFJlcGxheVR5cGUuQ0lSQ0xFLFxuICAgIFJlcGxheVR5cGUuTElORV9TVFJJTkcsIFJlcGxheVR5cGUuSU1BR0UsIFJlcGxheVR5cGUuVEVYVF0sXG4gICdoeWJyaWQnOiBbUmVwbGF5VHlwZS5QT0xZR09OLCBSZXBsYXlUeXBlLkxJTkVfU1RSSU5HXVxufTtcblxuXG4vKipcbiAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgQXJyYXk8aW1wb3J0KFwiLi4vLi4vcmVuZGVyL1JlcGxheVR5cGUuanNcIikuZGVmYXVsdD4+fVxuICovXG52YXIgVkVDVE9SX1JFUExBWVMgPSB7XG4gICdpbWFnZSc6IFtSZXBsYXlUeXBlLkRFRkFVTFRdLFxuICAnaHlicmlkJzogW1JlcGxheVR5cGUuSU1BR0UsIFJlcGxheVR5cGUuVEVYVCwgUmVwbGF5VHlwZS5ERUZBVUxUXSxcbiAgJ3ZlY3Rvcic6IE9SREVSXG59O1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ2FudmFzIHJlbmRlcmVyIGZvciB2ZWN0b3IgdGlsZSBsYXllcnMuXG4gKiBAYXBpXG4gKi9cbnZhciBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlciA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKENhbnZhc1RpbGVMYXllclJlbmRlcmVyKSB7XG4gIGZ1bmN0aW9uIENhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyKGxheWVyKSB7XG5cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5jYWxsKHRoaXMsIGxheWVyLCB0cnVlKTtcblxuICAgIC8qKlxuICAgICAqIERlY2x1dHRlciB0cmVlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5kZWNsdXR0ZXJUcmVlXyA9IGxheWVyLmdldERlY2x1dHRlcigpID8gcmJ1c2goOSwgdW5kZWZpbmVkKSA6IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuZGlydHlfID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZExheWVyUmV2aXNpb25fO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgKi9cbiAgICB0aGlzLnRtcFRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuICAgIHZhciByZW5kZXJNb2RlID0gbGF5ZXIuZ2V0UmVuZGVyTW9kZSgpO1xuXG4gICAgLy8gVXNlIGxvd2VyIHJlc29sdXRpb24gZm9yIHB1cmUgdmVjdG9yIHJlbmRlcmluZy4gQ2xvc2VzdCByZXNvbHV0aW9uIG90aGVyd2lzZS5cbiAgICB0aGlzLnpEaXJlY3Rpb24gPSByZW5kZXJNb2RlID09PSBWZWN0b3JUaWxlUmVuZGVyVHlwZS5WRUNUT1IgPyAxIDogMDtcblxuICAgIGlmIChyZW5kZXJNb2RlICE9PSBWZWN0b3JUaWxlUmVuZGVyVHlwZS5WRUNUT1IpIHtcbiAgICAgIHRoaXMuY29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgpO1xuICAgIH1cblxuXG4gICAgbGlzdGVuKGxhYmVsQ2FjaGUsIEV2ZW50VHlwZS5DTEVBUiwgdGhpcy5oYW5kbGVGb250c0NoYW5nZWRfLCB0aGlzKTtcblxuICB9XG5cbiAgaWYgKCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciApIENhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyLl9fcHJvdG9fXyA9IENhbnZhc1RpbGVMYXllclJlbmRlcmVyO1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciAmJiBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUgKTtcbiAgQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXI7XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gZGlzcG9zZUludGVybmFsICgpIHtcbiAgICB1bmxpc3RlbihsYWJlbENhY2hlLCBFdmVudFR5cGUuQ0xFQVIsIHRoaXMuaGFuZGxlRm9udHNDaGFuZ2VkXywgdGhpcyk7XG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldFRpbGUgPSBmdW5jdGlvbiBnZXRUaWxlICh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgdmFyIHRpbGUgPSBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0VGlsZS5jYWxsKHRoaXMsIHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgIHRoaXMuY3JlYXRlUmVwbGF5R3JvdXBfKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vVmVjdG9ySW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aWxlKSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbik7XG4gICAgICBpZiAodGhpcy5jb250ZXh0KSB7XG4gICAgICAgIHRoaXMucmVuZGVyVGlsZUltYWdlXygvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL1ZlY3RvckltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGlsZSksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGlsZTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRUaWxlSW1hZ2UgPSBmdW5jdGlvbiBnZXRUaWxlSW1hZ2UgKHRpbGUpIHtcbiAgICB2YXIgdGlsZUxheWVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9UaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aGlzLmdldExheWVyKCkpO1xuICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL1ZlY3RvckltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGlsZSkuZ2V0SW1hZ2UodGlsZUxheWVyKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wcmVwYXJlRnJhbWUgPSBmdW5jdGlvbiBwcmVwYXJlRnJhbWUgKGZyYW1lU3RhdGUsIGxheWVyU3RhdGUpIHtcbiAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5nZXRMYXllcigpKTtcbiAgICB2YXIgbGF5ZXJSZXZpc2lvbiA9IGxheWVyLmdldFJldmlzaW9uKCk7XG4gICAgaWYgKHRoaXMucmVuZGVyZWRMYXllclJldmlzaW9uXyAhPSBsYXllclJldmlzaW9uKSB7XG4gICAgICB0aGlzLnJlbmRlcmVkVGlsZXMubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJlZExheWVyUmV2aXNpb25fID0gbGF5ZXJSZXZpc2lvbjtcbiAgICByZXR1cm4gQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnByZXBhcmVGcmFtZS5jYWxsKHRoaXMsIGZyYW1lU3RhdGUsIGxheWVyU3RhdGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1ZlY3RvckltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuY3JlYXRlUmVwbGF5R3JvdXBfID0gZnVuY3Rpb24gY3JlYXRlUmVwbGF5R3JvdXBfICh0aWxlLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5nZXRMYXllcigpKTtcbiAgICB2YXIgcmV2aXNpb24gPSBsYXllci5nZXRSZXZpc2lvbigpO1xuICAgIHZhciByZW5kZXJPcmRlciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vcmVuZGVyLmpzXCIpLk9yZGVyRnVuY3Rpb259ICovIChsYXllci5nZXRSZW5kZXJPcmRlcigpKSB8fCBudWxsO1xuXG4gICAgdmFyIHJlcGxheVN0YXRlID0gdGlsZS5nZXRSZXBsYXlTdGF0ZShsYXllcik7XG4gICAgaWYgKCFyZXBsYXlTdGF0ZS5kaXJ0eSAmJiByZXBsYXlTdGF0ZS5yZW5kZXJlZFJldmlzaW9uID09IHJldmlzaW9uICYmXG4gICAgICAgIHJlcGxheVN0YXRlLnJlbmRlcmVkUmVuZGVyT3JkZXIgPT0gcmVuZGVyT3JkZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgc291cmNlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXIuZ2V0U291cmNlKCkpO1xuICAgIHZhciBzb3VyY2VUaWxlR3JpZCA9IHNvdXJjZS5nZXRUaWxlR3JpZCgpO1xuICAgIHZhciB0aWxlR3JpZCA9IHNvdXJjZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgdmFyIHJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHRpbGUudGlsZUNvb3JkWzBdKTtcbiAgICB2YXIgdGlsZUV4dGVudCA9IHRpbGUuZXh0ZW50O1xuXG4gICAgdmFyIGxvb3AgPSBmdW5jdGlvbiAoIHQsIHR0ICkge1xuICAgICAgdmFyIHNvdXJjZVRpbGUgPSB0aWxlLmdldFRpbGUodGlsZS50aWxlS2V5c1t0XSk7XG4gICAgICBpZiAoc291cmNlVGlsZS5nZXRTdGF0ZSgpICE9IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgc291cmNlVGlsZUNvb3JkID0gc291cmNlVGlsZS50aWxlQ29vcmQ7XG4gICAgICB2YXIgc291cmNlVGlsZUV4dGVudCA9IHNvdXJjZVRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudChzb3VyY2VUaWxlQ29vcmQpO1xuICAgICAgdmFyIHNoYXJlZEV4dGVudCA9IGdldEludGVyc2VjdGlvbih0aWxlRXh0ZW50LCBzb3VyY2VUaWxlRXh0ZW50KTtcbiAgICAgIHZhciBidWZmZXJlZEV4dGVudCA9IGVxdWFscyhzb3VyY2VUaWxlRXh0ZW50LCBzaGFyZWRFeHRlbnQpID8gbnVsbCA6XG4gICAgICAgIGJ1ZmZlcihzaGFyZWRFeHRlbnQsIGxheWVyLmdldFJlbmRlckJ1ZmZlcigpICogcmVzb2x1dGlvbiwgdGhpcyQxLnRtcEV4dGVudCk7XG4gICAgICB2YXIgdGlsZVByb2plY3Rpb24gPSBzb3VyY2VUaWxlLmdldFByb2plY3Rpb24oKTtcbiAgICAgIHZhciByZXByb2plY3QgPSBmYWxzZTtcbiAgICAgIGlmICghZXF1aXZhbGVudFByb2plY3Rpb24ocHJvamVjdGlvbiwgdGlsZVByb2plY3Rpb24pKSB7XG4gICAgICAgIHJlcHJvamVjdCA9IHRydWU7XG4gICAgICAgIHNvdXJjZVRpbGUuc2V0UHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgIH1cbiAgICAgIHJlcGxheVN0YXRlLmRpcnR5ID0gZmFsc2U7XG4gICAgICB2YXIgcmVwbGF5R3JvdXAgPSBuZXcgQ2FudmFzUmVwbGF5R3JvdXAoMCwgc2hhcmVkRXh0ZW50LCByZXNvbHV0aW9uLFxuICAgICAgICBwaXhlbFJhdGlvLCBzb3VyY2UuZ2V0T3ZlcmxhcHMoKSwgdGhpcyQxLmRlY2x1dHRlclRyZWVfLCBsYXllci5nZXRSZW5kZXJCdWZmZXIoKSk7XG4gICAgICB2YXIgc3F1YXJlZFRvbGVyYW5jZSA9IGdldFNxdWFyZWRSZW5kZXJUb2xlcmFuY2UocmVzb2x1dGlvbiwgcGl4ZWxSYXRpbyk7XG5cbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgKiBAdGhpcyB7Q2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXJ9XG4gICAgICAgKi9cbiAgICAgIHZhciByZW5kZXIgPSBmdW5jdGlvbihmZWF0dXJlKSB7XG4gICAgICAgIHZhciBzdHlsZXM7XG4gICAgICAgIHZhciBzdHlsZUZ1bmN0aW9uID0gZmVhdHVyZS5nZXRTdHlsZUZ1bmN0aW9uKCkgfHwgbGF5ZXIuZ2V0U3R5bGVGdW5jdGlvbigpO1xuICAgICAgICBpZiAoc3R5bGVGdW5jdGlvbikge1xuICAgICAgICAgIHN0eWxlcyA9IHN0eWxlRnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0eWxlcykge1xuICAgICAgICAgIHZhciBkaXJ0eSA9IHRoaXMucmVuZGVyRmVhdHVyZShmZWF0dXJlLCBzcXVhcmVkVG9sZXJhbmNlLCBzdHlsZXMsIHJlcGxheUdyb3VwKTtcbiAgICAgICAgICB0aGlzLmRpcnR5XyA9IHRoaXMuZGlydHlfIHx8IGRpcnR5O1xuICAgICAgICAgIHJlcGxheVN0YXRlLmRpcnR5ID0gcmVwbGF5U3RhdGUuZGlydHkgfHwgZGlydHk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHZhciBmZWF0dXJlcyA9IHNvdXJjZVRpbGUuZ2V0RmVhdHVyZXMoKTtcbiAgICAgIGlmIChyZW5kZXJPcmRlciAmJiByZW5kZXJPcmRlciAhPT0gcmVwbGF5U3RhdGUucmVuZGVyZWRSZW5kZXJPcmRlcikge1xuICAgICAgICBmZWF0dXJlcy5zb3J0KHJlbmRlck9yZGVyKTtcbiAgICAgIH1cbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZlYXR1cmVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGZlYXR1cmUgPSBmZWF0dXJlc1tpXTtcbiAgICAgICAgaWYgKHJlcHJvamVjdCkge1xuICAgICAgICAgIGlmICh0aWxlUHJvamVjdGlvbi5nZXRVbml0cygpID09IFVuaXRzLlRJTEVfUElYRUxTKSB7XG4gICAgICAgICAgICAvLyBwcm9qZWN0ZWQgdGlsZSBleHRlbnRcbiAgICAgICAgICAgIHRpbGVQcm9qZWN0aW9uLnNldFdvcmxkRXh0ZW50KHNvdXJjZVRpbGVFeHRlbnQpO1xuICAgICAgICAgICAgLy8gdGlsZSBleHRlbnQgaW4gdGlsZSBwaXhlbCBzcGFjZVxuICAgICAgICAgICAgdGlsZVByb2plY3Rpb24uc2V0RXh0ZW50KHNvdXJjZVRpbGUuZ2V0RXh0ZW50KCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmZWF0dXJlLmdldEdlb21ldHJ5KCkudHJhbnNmb3JtKHRpbGVQcm9qZWN0aW9uLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWJ1ZmZlcmVkRXh0ZW50IHx8IGludGVyc2VjdHMoYnVmZmVyZWRFeHRlbnQsIGZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRFeHRlbnQoKSkpIHtcbiAgICAgICAgICByZW5kZXIuY2FsbCh0aGlzJDEsIGZlYXR1cmUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXBsYXlHcm91cC5maW5pc2goKTtcbiAgICAgIHNvdXJjZVRpbGUuc2V0UmVwbGF5R3JvdXAobGF5ZXIsIHRpbGUudGlsZUNvb3JkLnRvU3RyaW5nKCksIHJlcGxheUdyb3VwKTtcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgdCA9IDAsIHR0ID0gdGlsZS50aWxlS2V5cy5sZW5ndGg7IHQgPCB0dDsgKyt0KSBsb29wKCB0LCB0dCApO1xuICAgIHJlcGxheVN0YXRlLnJlbmRlcmVkUmV2aXNpb24gPSByZXZpc2lvbjtcbiAgICByZXBsYXlTdGF0ZS5yZW5kZXJlZFJlbmRlck9yZGVyID0gcmVuZGVyT3JkZXI7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIHZhciByZXNvbHV0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucmVzb2x1dGlvbjtcbiAgICB2YXIgcm90YXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICBoaXRUb2xlcmFuY2UgPSBoaXRUb2xlcmFuY2UgPT0gdW5kZWZpbmVkID8gMCA6IGhpdFRvbGVyYW5jZTtcbiAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59ICovXG4gICAgdmFyIGZlYXR1cmVzID0ge307XG5cbiAgICB2YXIgcmVuZGVyZWRUaWxlcyA9IC8qKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vVmVjdG9ySW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHQ+fSAqLyAodGhpcy5yZW5kZXJlZFRpbGVzKTtcblxuICAgIHZhciBidWZmZXJlZEV4dGVudCwgZm91bmQ7XG4gICAgdmFyIGksIGlpO1xuICAgIGZvciAoaSA9IDAsIGlpID0gcmVuZGVyZWRUaWxlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICB2YXIgdGlsZSA9IHJlbmRlcmVkVGlsZXNbaV07XG4gICAgICBidWZmZXJlZEV4dGVudCA9IGJ1ZmZlcih0aWxlLmV4dGVudCwgaGl0VG9sZXJhbmNlICogcmVzb2x1dGlvbiwgYnVmZmVyZWRFeHRlbnQpO1xuICAgICAgaWYgKCFjb250YWluc0Nvb3JkaW5hdGUoYnVmZmVyZWRFeHRlbnQsIGNvb3JkaW5hdGUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgdCA9IDAsIHR0ID0gdGlsZS50aWxlS2V5cy5sZW5ndGg7IHQgPCB0dDsgKyt0KSB7XG4gICAgICAgIHZhciBzb3VyY2VUaWxlID0gdGlsZS5nZXRUaWxlKHRpbGUudGlsZUtleXNbdF0pO1xuICAgICAgICBpZiAoc291cmNlVGlsZS5nZXRTdGF0ZSgpICE9IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVwbGF5R3JvdXAgPSAvKiogQHR5cGUge0NhbnZhc1JlcGxheUdyb3VwfSAqLyAoc291cmNlVGlsZS5nZXRSZXBsYXlHcm91cChsYXllcixcbiAgICAgICAgICB0aWxlLnRpbGVDb29yZC50b1N0cmluZygpKSk7XG4gICAgICAgIGZvdW5kID0gZm91bmQgfHwgcmVwbGF5R3JvdXAuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUoY29vcmRpbmF0ZSwgcmVzb2x1dGlvbiwgcm90YXRpb24sIGhpdFRvbGVyYW5jZSwge30sXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAgICogQHJldHVybiB7P30gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGZ1bmN0aW9uKGZlYXR1cmUpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBnZXRVaWQoZmVhdHVyZSk7XG4gICAgICAgICAgICBpZiAoIShrZXkgaW4gZmVhdHVyZXMpKSB7XG4gICAgICAgICAgICAgIGZlYXR1cmVzW2tleV0gPSB0cnVlO1xuICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBmZWF0dXJlLCBsYXllcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgbnVsbCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIENhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRSZXBsYXlUcmFuc2Zvcm1fID0gZnVuY3Rpb24gZ2V0UmVwbGF5VHJhbnNmb3JtXyAodGlsZSwgZnJhbWVTdGF0ZSkge1xuICAgIHZhciBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICB2YXIgc291cmNlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXIuZ2V0U291cmNlKCkpO1xuICAgIHZhciB0aWxlR3JpZCA9IHNvdXJjZS5nZXRUaWxlR3JpZCgpO1xuICAgIHZhciB0aWxlQ29vcmQgPSB0aWxlLnRpbGVDb29yZDtcbiAgICB2YXIgdGlsZVJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHRpbGVDb29yZFswXSk7XG4gICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgIHZhciByZW5kZXJSZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb24gLyBwaXhlbFJhdGlvO1xuICAgIHZhciB0aWxlRXh0ZW50ID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgdGhpcy50bXBFeHRlbnQpO1xuICAgIHZhciBjZW50ZXIgPSB2aWV3U3RhdGUuY2VudGVyO1xuICAgIHZhciBvcmlnaW4gPSBnZXRUb3BMZWZ0KHRpbGVFeHRlbnQpO1xuICAgIHZhciBzaXplID0gZnJhbWVTdGF0ZS5zaXplO1xuICAgIHZhciBvZmZzZXRYID0gTWF0aC5yb3VuZChwaXhlbFJhdGlvICogc2l6ZVswXSAvIDIpO1xuICAgIHZhciBvZmZzZXRZID0gTWF0aC5yb3VuZChwaXhlbFJhdGlvICogc2l6ZVsxXSAvIDIpO1xuICAgIHJldHVybiBjb21wb3NlVHJhbnNmb3JtKHRoaXMudG1wVHJhbnNmb3JtXyxcbiAgICAgIG9mZnNldFgsIG9mZnNldFksXG4gICAgICB0aWxlUmVzb2x1dGlvbiAvIHJlbmRlclJlc29sdXRpb24sIHRpbGVSZXNvbHV0aW9uIC8gcmVuZGVyUmVzb2x1dGlvbixcbiAgICAgIHZpZXdTdGF0ZS5yb3RhdGlvbixcbiAgICAgIChvcmlnaW5bMF0gLSBjZW50ZXJbMF0pIC8gdGlsZVJlc29sdXRpb24sXG4gICAgICAoY2VudGVyWzFdIC0gb3JpZ2luWzFdKSAvIHRpbGVSZXNvbHV0aW9uKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAqL1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlRm9udHNDaGFuZ2VkXyA9IGZ1bmN0aW9uIGhhbmRsZUZvbnRzQ2hhbmdlZF8gKGV2ZW50KSB7XG4gICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgIGlmIChsYXllci5nZXRWaXNpYmxlKCkgJiYgdGhpcy5yZW5kZXJlZExheWVyUmV2aXNpb25fICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGxheWVyLmNoYW5nZWQoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBjaGFuZ2VzIGluIGltYWdlIHN0eWxlIHN0YXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBJbWFnZSBzdHlsZSBjaGFuZ2UgZXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlU3R5bGVJbWFnZUNoYW5nZV8gPSBmdW5jdGlvbiBoYW5kbGVTdHlsZUltYWdlQ2hhbmdlXyAoZXZlbnQpIHtcbiAgICB0aGlzLnJlbmRlcklmUmVhZHlBbmRWaXNpYmxlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucG9zdENvbXBvc2UgPSBmdW5jdGlvbiBwb3N0Q29tcG9zZSAoY29udGV4dCwgZnJhbWVTdGF0ZSwgbGF5ZXJTdGF0ZSkge1xuICAgIHZhciBsYXllciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVmVjdG9yLmpzXCIpLmRlZmF1bHR9ICovICh0aGlzLmdldExheWVyKCkpO1xuICAgIHZhciByZW5kZXJNb2RlID0gbGF5ZXIuZ2V0UmVuZGVyTW9kZSgpO1xuICAgIGlmIChyZW5kZXJNb2RlICE9IFZlY3RvclRpbGVSZW5kZXJUeXBlLklNQUdFKSB7XG4gICAgICB2YXIgZGVjbHV0dGVyUmVwbGF5cyA9IGxheWVyLmdldERlY2x1dHRlcigpID8ge30gOiBudWxsO1xuICAgICAgdmFyIHNvdXJjZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vc291cmNlL1ZlY3RvclRpbGUuanNcIikuZGVmYXVsdH0gKi8gKGxheWVyLmdldFNvdXJjZSgpKTtcbiAgICAgIHZhciByZXBsYXlUeXBlcyA9IFZFQ1RPUl9SRVBMQVlTW3JlbmRlck1vZGVdO1xuICAgICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgICB2YXIgcm90YXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICAgIHZhciBzaXplID0gZnJhbWVTdGF0ZS5zaXplO1xuICAgICAgdmFyIG9mZnNldFgsIG9mZnNldFk7XG4gICAgICBpZiAocm90YXRpb24pIHtcbiAgICAgICAgb2Zmc2V0WCA9IE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIHNpemVbMF0gLyAyKTtcbiAgICAgICAgb2Zmc2V0WSA9IE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIHNpemVbMV0gLyAyKTtcbiAgICAgICAgcm90YXRlQXRPZmZzZXQoY29udGV4dCwgLXJvdGF0aW9uLCBvZmZzZXRYLCBvZmZzZXRZKTtcbiAgICAgIH1cbiAgICAgIGlmIChkZWNsdXR0ZXJSZXBsYXlzKSB7XG4gICAgICAgIHRoaXMuZGVjbHV0dGVyVHJlZV8uY2xlYXIoKTtcbiAgICAgIH1cbiAgICAgIHZhciB2aWV3SGludHMgPSBmcmFtZVN0YXRlLnZpZXdIaW50cztcbiAgICAgIHZhciBzbmFwVG9QaXhlbCA9ICEodmlld0hpbnRzW1ZpZXdIaW50LkFOSU1BVElOR10gfHwgdmlld0hpbnRzW1ZpZXdIaW50LklOVEVSQUNUSU5HXSk7XG4gICAgICB2YXIgdGlsZXMgPSB0aGlzLnJlbmRlcmVkVGlsZXM7XG4gICAgICB2YXIgdGlsZUdyaWQgPSBzb3VyY2UuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb24pO1xuICAgICAgdmFyIGNsaXBzID0gW107XG4gICAgICB2YXIgenMgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSB0aWxlcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgdGlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vVmVjdG9ySW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aWxlc1tpXSk7XG4gICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkFCT1JUKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpbGVDb29yZCA9IHRpbGUudGlsZUNvb3JkO1xuICAgICAgICB2YXIgd29ybGRPZmZzZXQgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZUNvb3JkLCB0aGlzLnRtcEV4dGVudClbMF0gLSB0aWxlLmV4dGVudFswXTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yICh2YXIgdCA9IDAsIHR0ID0gdGlsZS50aWxlS2V5cy5sZW5ndGg7IHQgPCB0dDsgKyt0KSB7XG4gICAgICAgICAgdmFyIHNvdXJjZVRpbGUgPSB0aWxlLmdldFRpbGUodGlsZS50aWxlS2V5c1t0XSk7XG4gICAgICAgICAgaWYgKHNvdXJjZVRpbGUuZ2V0U3RhdGUoKSAhPSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIHJlcGxheUdyb3VwID0gLyoqIEB0eXBlIHtDYW52YXNSZXBsYXlHcm91cH0gKi8gKHNvdXJjZVRpbGUuZ2V0UmVwbGF5R3JvdXAobGF5ZXIsIHRpbGVDb29yZC50b1N0cmluZygpKSk7XG4gICAgICAgICAgaWYgKCFyZXBsYXlHcm91cCB8fCAhcmVwbGF5R3JvdXAuaGFzUmVwbGF5cyhyZXBsYXlUeXBlcykpIHtcbiAgICAgICAgICAgIC8vIHNvdXJjZVRpbGUgd2FzIG5vdCB5ZXQgbG9hZGVkIHdoZW4gdGhpcy5jcmVhdGVSZXBsYXlHcm91cF8oKSB3YXNcbiAgICAgICAgICAgIC8vIGNhbGxlZCwgb3IgaXQgaGFzIG5vIHJlcGxheXMgb2YgdGhlIHR5cGVzIHdlIHdhbnQgdG8gcmVuZGVyXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCF0cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IHRoaXMuZ2V0VHJhbnNmb3JtKGZyYW1lU3RhdGUsIHdvcmxkT2Zmc2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGN1cnJlbnRaID0gc291cmNlVGlsZS50aWxlQ29vcmRbMF07XG4gICAgICAgICAgdmFyIGN1cnJlbnRDbGlwID0gcmVwbGF5R3JvdXAuZ2V0Q2xpcENvb3Jkcyh0cmFuc2Zvcm0pO1xuICAgICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBsYXllclN0YXRlLm9wYWNpdHk7XG4gICAgICAgICAgLy8gQ3JlYXRlIGEgY2xpcCBtYXNrIGZvciByZWdpb25zIGluIHRoaXMgbG93IHJlc29sdXRpb24gdGlsZSB0aGF0IGFyZVxuICAgICAgICAgIC8vIGFscmVhZHkgZmlsbGVkIGJ5IGEgaGlnaGVyIHJlc29sdXRpb24gdGlsZVxuICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGNsaXBzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICAgIHZhciBjbGlwID0gY2xpcHNbal07XG4gICAgICAgICAgICBpZiAoY3VycmVudFogPCB6c1tqXSkge1xuICAgICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAvLyBjb3VudGVyLWNsb2Nrd2lzZSAob3V0ZXIgcmluZykgZm9yIGN1cnJlbnQgdGlsZVxuICAgICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyhjdXJyZW50Q2xpcFswXSwgY3VycmVudENsaXBbMV0pO1xuICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFsyXSwgY3VycmVudENsaXBbM10pO1xuICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFs0XSwgY3VycmVudENsaXBbNV0pO1xuICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFs2XSwgY3VycmVudENsaXBbN10pO1xuICAgICAgICAgICAgICAvLyBjbG9ja3dpc2UgKGlubmVyIHJpbmcpIGZvciBoaWdoZXIgcmVzb2x1dGlvbiB0aWxlXG4gICAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKGNsaXBbNl0sIGNsaXBbN10pO1xuICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjbGlwWzRdLCBjbGlwWzVdKTtcbiAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY2xpcFsyXSwgY2xpcFszXSk7XG4gICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGNsaXBbMF0sIGNsaXBbMV0pO1xuICAgICAgICAgICAgICBjb250ZXh0LmNsaXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmVwbGF5R3JvdXAucmVwbGF5KGNvbnRleHQsIHRyYW5zZm9ybSwgcm90YXRpb24sIHt9LCBzbmFwVG9QaXhlbCwgcmVwbGF5VHlwZXMsIGRlY2x1dHRlclJlcGxheXMpO1xuICAgICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICAgIGNsaXBzLnB1c2goY3VycmVudENsaXApO1xuICAgICAgICAgIHpzLnB1c2goY3VycmVudFopO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZGVjbHV0dGVyUmVwbGF5cykge1xuICAgICAgICByZXBsYXlEZWNsdXR0ZXIoZGVjbHV0dGVyUmVwbGF5cywgY29udGV4dCwgcm90YXRpb24sIHNuYXBUb1BpeGVsKTtcbiAgICAgIH1cbiAgICAgIGlmIChyb3RhdGlvbikge1xuICAgICAgICByb3RhdGVBdE9mZnNldChjb250ZXh0LCByb3RhdGlvbixcbiAgICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi8gKG9mZnNldFgpLCAvKiogQHR5cGUge251bWJlcn0gKi8gKG9mZnNldFkpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnBvc3RDb21wb3NlLmNhbGwodGhpcywgY29udGV4dCwgZnJhbWVTdGF0ZSwgbGF5ZXJTdGF0ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fEFycmF5PGltcG9ydChcIi4uLy4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHQ+fSBzdHlsZXMgVGhlIHN0eWxlIG9yIGFycmF5IG9mIHN0eWxlcy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9yZW5kZXIvY2FudmFzL1JlcGxheUdyb3VwLmpzXCIpLmRlZmF1bHR9IHJlcGxheUdyb3VwIFJlcGxheSBncm91cC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIGFuIGltYWdlIGlzIGxvYWRpbmcuXG4gICAqL1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRmVhdHVyZSA9IGZ1bmN0aW9uIHJlbmRlckZlYXR1cmUkMSAoZmVhdHVyZSwgc3F1YXJlZFRvbGVyYW5jZSwgc3R5bGVzLCByZXBsYXlHcm91cCkge1xuICAgIGlmICghc3R5bGVzKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBsb2FkaW5nID0gZmFsc2U7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3R5bGVzKSkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gc3R5bGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgbG9hZGluZyA9IHJlbmRlckZlYXR1cmUoXG4gICAgICAgICAgcmVwbGF5R3JvdXAsIGZlYXR1cmUsIHN0eWxlc1tpXSwgc3F1YXJlZFRvbGVyYW5jZSxcbiAgICAgICAgICB0aGlzLmhhbmRsZVN0eWxlSW1hZ2VDaGFuZ2VfLCB0aGlzKSB8fCBsb2FkaW5nO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsb2FkaW5nID0gcmVuZGVyRmVhdHVyZShcbiAgICAgICAgcmVwbGF5R3JvdXAsIGZlYXR1cmUsIHN0eWxlcywgc3F1YXJlZFRvbGVyYW5jZSxcbiAgICAgICAgdGhpcy5oYW5kbGVTdHlsZUltYWdlQ2hhbmdlXywgdGhpcyk7XG4gICAgfVxuICAgIHJldHVybiBsb2FkaW5nO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1ZlY3RvckltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyVGlsZUltYWdlXyA9IGZ1bmN0aW9uIHJlbmRlclRpbGVJbWFnZV8gKHRpbGUsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5nZXRMYXllcigpKTtcbiAgICB2YXIgcmVwbGF5U3RhdGUgPSB0aWxlLmdldFJlcGxheVN0YXRlKGxheWVyKTtcbiAgICB2YXIgcmV2aXNpb24gPSBsYXllci5nZXRSZXZpc2lvbigpO1xuICAgIHZhciByZXBsYXlzID0gSU1BR0VfUkVQTEFZU1tsYXllci5nZXRSZW5kZXJNb2RlKCldO1xuICAgIGlmIChyZXBsYXlzICYmIHJlcGxheVN0YXRlLnJlbmRlcmVkVGlsZVJldmlzaW9uICE9PSByZXZpc2lvbikge1xuICAgICAgcmVwbGF5U3RhdGUucmVuZGVyZWRUaWxlUmV2aXNpb24gPSByZXZpc2lvbjtcbiAgICAgIHZhciB0aWxlQ29vcmQgPSB0aWxlLndyYXBwZWRUaWxlQ29vcmQ7XG4gICAgICB2YXIgeiA9IHRpbGVDb29yZFswXTtcbiAgICAgIHZhciBzb3VyY2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9ICovIChsYXllci5nZXRTb3VyY2UoKSk7XG4gICAgICB2YXIgdGlsZUdyaWQgPSBzb3VyY2UuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgdmFyIHJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgdmFyIGNvbnRleHQgPSB0aWxlLmdldENvbnRleHQobGF5ZXIpO1xuICAgICAgdmFyIHNpemUgPSBzb3VyY2UuZ2V0VGlsZVBpeGVsU2l6ZSh6LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgIGNvbnRleHQuY2FudmFzLndpZHRoID0gc2l6ZVswXTtcbiAgICAgIGNvbnRleHQuY2FudmFzLmhlaWdodCA9IHNpemVbMV07XG4gICAgICB2YXIgdGlsZUV4dGVudCA9IHRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudCh0aWxlQ29vcmQsIHRoaXMudG1wRXh0ZW50KTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRpbGUudGlsZUtleXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgc291cmNlVGlsZSA9IHRpbGUuZ2V0VGlsZSh0aWxlLnRpbGVLZXlzW2ldKTtcbiAgICAgICAgaWYgKHNvdXJjZVRpbGUuZ2V0U3RhdGUoKSAhPSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBpeGVsU2NhbGUgPSBwaXhlbFJhdGlvIC8gcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IHJlc2V0VHJhbnNmb3JtKHRoaXMudG1wVHJhbnNmb3JtXyk7XG4gICAgICAgIHNjYWxlVHJhbnNmb3JtKHRyYW5zZm9ybSwgcGl4ZWxTY2FsZSwgLXBpeGVsU2NhbGUpO1xuICAgICAgICB0cmFuc2xhdGVUcmFuc2Zvcm0odHJhbnNmb3JtLCAtdGlsZUV4dGVudFswXSwgLXRpbGVFeHRlbnRbM10pO1xuICAgICAgICB2YXIgcmVwbGF5R3JvdXAgPSAvKiogQHR5cGUge0NhbnZhc1JlcGxheUdyb3VwfSAqLyAoc291cmNlVGlsZS5nZXRSZXBsYXlHcm91cChsYXllcixcbiAgICAgICAgICB0aWxlLnRpbGVDb29yZC50b1N0cmluZygpKSk7XG4gICAgICAgIHJlcGxheUdyb3VwLnJlcGxheShjb250ZXh0LCB0cmFuc2Zvcm0sIDAsIHt9LCB0cnVlLCByZXBsYXlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIENhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyO1xufShDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcikpO1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHRoaXMgcmVuZGVyZXIgaGFuZGxlcyB0aGUgcHJvdmlkZWQgbGF5ZXIuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIFRoZSBjYW5kaWRhdGUgbGF5ZXIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgcmVuZGVyZXIgY2FuIHJlbmRlciB0aGUgbGF5ZXIuXG4gKi9cbkNhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyWydoYW5kbGVzJ10gPSBmdW5jdGlvbihsYXllcikge1xuICByZXR1cm4gbGF5ZXIuZ2V0VHlwZSgpID09PSBMYXllclR5cGUuVkVDVE9SX1RJTEU7XG59O1xuXG5cbi8qKlxuICogQ3JlYXRlIGEgbGF5ZXIgcmVuZGVyZXIuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5kZWZhdWx0fSBtYXBSZW5kZXJlciBUaGUgbWFwIHJlbmRlcmVyLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBsYXllciBUaGUgbGF5ZXIgdG8gYmUgcmVuZGVyZXJkLlxuICogQHJldHVybiB7Q2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXJ9IFRoZSBsYXllciByZW5kZXJlci5cbiAqL1xuQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXJbJ2NyZWF0ZSddID0gZnVuY3Rpb24obWFwUmVuZGVyZXIsIGxheWVyKSB7XG4gIHJldHVybiBuZXcgQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXIoLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9ICovIChsYXllcikpO1xufTtcblxuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yVGlsZUxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBcbiAqL1xuaW1wb3J0IFBsdWdnYWJsZU1hcCBmcm9tICcuL1BsdWdnYWJsZU1hcC5qcyc7XG5pbXBvcnQge2RlZmF1bHRzIGFzIGRlZmF1bHRDb250cm9sc30gZnJvbSAnLi9jb250cm9sL3V0aWwuanMnO1xuaW1wb3J0IHtkZWZhdWx0cyBhcyBkZWZhdWx0SW50ZXJhY3Rpb25zfSBmcm9tICcuL2ludGVyYWN0aW9uLmpzJztcbmltcG9ydCB7YXNzaWdufSBmcm9tICcuL29iai5qcyc7XG5pbXBvcnQgQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyIGZyb20gJy4vcmVuZGVyZXIvY2FudmFzL0ltYWdlTGF5ZXIuanMnO1xuaW1wb3J0IENhbnZhc01hcFJlbmRlcmVyIGZyb20gJy4vcmVuZGVyZXIvY2FudmFzL01hcC5qcyc7XG5pbXBvcnQgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIgZnJvbSAnLi9yZW5kZXJlci9jYW52YXMvVGlsZUxheWVyLmpzJztcbmltcG9ydCBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyIGZyb20gJy4vcmVuZGVyZXIvY2FudmFzL1ZlY3RvckxheWVyLmpzJztcbmltcG9ydCBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlciBmcm9tICcuL3JlbmRlcmVyL2NhbnZhcy9WZWN0b3JUaWxlTGF5ZXIuanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFRoZSBtYXAgaXMgdGhlIGNvcmUgY29tcG9uZW50IG9mIE9wZW5MYXllcnMuIEZvciBhIG1hcCB0byByZW5kZXIsIGEgdmlldyxcbiAqIG9uZSBvciBtb3JlIGxheWVycywgYW5kIGEgdGFyZ2V0IGNvbnRhaW5lciBhcmUgbmVlZGVkOlxuICpcbiAqICAgICBpbXBvcnQgTWFwIGZyb20gJ29sL01hcCc7XG4gKiAgICAgaW1wb3J0IFZpZXcgZnJvbSAnb2wvVmlldyc7XG4gKiAgICAgaW1wb3J0IFRpbGVMYXllciBmcm9tICdvbC9sYXllci9UaWxlJztcbiAqICAgICBpbXBvcnQgT1NNIGZyb20gJ29sL3NvdXJjZS9PU00nO1xuICpcbiAqICAgICB2YXIgbWFwID0gbmV3IE1hcCh7XG4gKiAgICAgICB2aWV3OiBuZXcgVmlldyh7XG4gKiAgICAgICAgIGNlbnRlcjogWzAsIDBdLFxuICogICAgICAgICB6b29tOiAxXG4gKiAgICAgICB9KSxcbiAqICAgICAgIGxheWVyczogW1xuICogICAgICAgICBuZXcgVGlsZUxheWVyKHtcbiAqICAgICAgICAgICBzb3VyY2U6IG5ldyBPU00oKVxuICogICAgICAgICB9KVxuICogICAgICAgXSxcbiAqICAgICAgIHRhcmdldDogJ21hcCdcbiAqICAgICB9KTtcbiAqXG4gKiBUaGUgYWJvdmUgc25pcHBldCBjcmVhdGVzIGEgbWFwIHVzaW5nIGEge0BsaW5rIG1vZHVsZTpvbC9sYXllci9UaWxlfSB0b1xuICogZGlzcGxheSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9PU01+T1NNfSBPU00gZGF0YSBhbmQgcmVuZGVyIGl0IHRvIGEgRE9NXG4gKiBlbGVtZW50IHdpdGggdGhlIGlkIGBtYXBgLlxuICpcbiAqIFRoZSBjb25zdHJ1Y3RvciBwbGFjZXMgYSB2aWV3cG9ydCBjb250YWluZXIgKHdpdGggQ1NTIGNsYXNzIG5hbWVcbiAqIGBvbC12aWV3cG9ydGApIGluIHRoZSB0YXJnZXQgZWxlbWVudCAoc2VlIGBnZXRWaWV3cG9ydCgpYCksIGFuZCB0aGVuIHR3b1xuICogZnVydGhlciBlbGVtZW50cyB3aXRoaW4gdGhlIHZpZXdwb3J0OiBvbmUgd2l0aCBDU1MgY2xhc3MgbmFtZVxuICogYG9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50YCBmb3IgY29udHJvbHMgYW5kIHNvbWUgb3ZlcmxheXMsIGFuZCBvbmUgd2l0aFxuICogQ1NTIGNsYXNzIG5hbWUgYG9sLW92ZXJsYXljb250YWluZXJgIGZvciBvdGhlciBvdmVybGF5cyAoc2VlIHRoZSBgc3RvcEV2ZW50YFxuICogb3B0aW9uIG9mIHtAbGluayBtb2R1bGU6b2wvT3ZlcmxheX5PdmVybGF5fSBmb3IgdGhlIGRpZmZlcmVuY2UpLiBUaGUgbWFwXG4gKiBpdHNlbGYgaXMgcGxhY2VkIGluIGEgZnVydGhlciBlbGVtZW50IHdpdGhpbiB0aGUgdmlld3BvcnQuXG4gKlxuICogTGF5ZXJzIGFyZSBzdG9yZWQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0gaW5cbiAqIGxheWVyR3JvdXBzLiBBIHRvcC1sZXZlbCBncm91cCBpcyBwcm92aWRlZCBieSB0aGUgbGlicmFyeS4gVGhpcyBpcyB3aGF0IGlzXG4gKiBhY2Nlc3NlZCBieSBgZ2V0TGF5ZXJHcm91cGAgYW5kIGBzZXRMYXllckdyb3VwYC4gTGF5ZXJzIGVudGVyZWQgaW4gdGhlXG4gKiBvcHRpb25zIGFyZSBhZGRlZCB0byB0aGlzIGdyb3VwLCBhbmQgYGFkZExheWVyYCBhbmQgYHJlbW92ZUxheWVyYCBjaGFuZ2UgdGhlXG4gKiBsYXllciBjb2xsZWN0aW9uIGluIHRoZSBncm91cC4gYGdldExheWVyc2AgaXMgYSBjb252ZW5pZW5jZSBmdW5jdGlvbiBmb3JcbiAqIGBnZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKClgLiBOb3RlIHRoYXQge0BsaW5rIG1vZHVsZTpvbC9sYXllci9Hcm91cH5Hcm91cH1cbiAqIGlzIGEgc3ViY2xhc3Mgb2Yge0BsaW5rIG1vZHVsZTpvbC9sYXllci9CYXNlfSwgc28gbGF5ZXJzIGVudGVyZWQgaW4gdGhlXG4gKiBvcHRpb25zIG9yIGFkZGVkIHdpdGggYGFkZExheWVyYCBjYW4gYmUgZ3JvdXBzLCB3aGljaCBjYW4gY29udGFpbiBmdXJ0aGVyXG4gKiBncm91cHMsIGFuZCBzbyBvbi5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9NYXBCcm93c2VyRXZlbnQuanNcIikuTWFwQnJvd3NlckV2ZW50XG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9NYXBFdmVudC5qc1wiKS5NYXBFdmVudFxuICogQGZpcmVzIG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcG9zdGNvbXBvc2VcbiAqIEBmaXJlcyBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3ByZWNvbXBvc2VcbiAqIEBhcGlcbiAqL1xudmFyIE1hcCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFBsdWdnYWJsZU1hcCkge1xuICBmdW5jdGlvbiBNYXAob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgIGlmICghb3B0aW9ucy5jb250cm9scykge1xuICAgICAgb3B0aW9ucy5jb250cm9scyA9IGRlZmF1bHRDb250cm9scygpO1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMuaW50ZXJhY3Rpb25zKSB7XG4gICAgICBvcHRpb25zLmludGVyYWN0aW9ucyA9IGRlZmF1bHRJbnRlcmFjdGlvbnMoKTtcbiAgICB9XG5cbiAgICBQbHVnZ2FibGVNYXAuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgfVxuXG4gIGlmICggUGx1Z2dhYmxlTWFwICkgTWFwLl9fcHJvdG9fXyA9IFBsdWdnYWJsZU1hcDtcbiAgTWFwLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBsdWdnYWJsZU1hcCAmJiBQbHVnZ2FibGVNYXAucHJvdG90eXBlICk7XG4gIE1hcC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNYXA7XG5cbiAgTWFwLnByb3RvdHlwZS5jcmVhdGVSZW5kZXJlciA9IGZ1bmN0aW9uIGNyZWF0ZVJlbmRlcmVyICgpIHtcbiAgICB2YXIgcmVuZGVyZXIgPSBuZXcgQ2FudmFzTWFwUmVuZGVyZXIodGhpcyk7XG4gICAgcmVuZGVyZXIucmVnaXN0ZXJMYXllclJlbmRlcmVycyhbXG4gICAgICBDYW52YXNJbWFnZUxheWVyUmVuZGVyZXIsXG4gICAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcixcbiAgICAgIENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIsXG4gICAgICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlclxuICAgIF0pO1xuICAgIHJldHVybiByZW5kZXJlcjtcbiAgfTtcblxuICByZXR1cm4gTWFwO1xufShQbHVnZ2FibGVNYXApKTtcblxuXG5leHBvcnQgZGVmYXVsdCBNYXA7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC91dGlsXG4gKi9cbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4uL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IEF0dHJpYnV0aW9uIGZyb20gJy4vQXR0cmlidXRpb24uanMnO1xuaW1wb3J0IFJvdGF0ZSBmcm9tICcuL1JvdGF0ZS5qcyc7XG5pbXBvcnQgWm9vbSBmcm9tICcuL1pvb20uanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRGVmYXVsdHNPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbj10cnVlXSBJbmNsdWRlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvQXR0cmlidXRpb25+QXR0cmlidXRpb259LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0F0dHJpYnV0aW9uLmpzXCIpLk9wdGlvbnN9IFthdHRyaWJ1dGlvbk9wdGlvbnNdXG4gKiBPcHRpb25zIGZvciB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvQXR0cmlidXRpb25+QXR0cmlidXRpb259LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbcm90YXRlPXRydWVdIEluY2x1ZGVcbiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9Sb3RhdGV+Um90YXRlfS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Sb3RhdGUuanNcIikuT3B0aW9uc30gW3JvdGF0ZU9wdGlvbnNdIE9wdGlvbnNcbiAqIGZvciB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvUm90YXRlflJvdGF0ZX0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt6b29tXSBJbmNsdWRlIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9ab29tflpvb219LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1pvb20uanNcIikuT3B0aW9uc30gW3pvb21PcHRpb25zXSBPcHRpb25zIGZvclxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX0uXG4gKiBAYXBpXG4gKi9cblxuXG4vKipcbiAqIFNldCBvZiBjb250cm9scyBpbmNsdWRlZCBpbiBtYXBzIGJ5IGRlZmF1bHQuIFVubGVzcyBjb25maWd1cmVkIG90aGVyd2lzZSxcbiAqIHRoaXMgcmV0dXJucyBhIGNvbGxlY3Rpb24gY29udGFpbmluZyBhbiBpbnN0YW5jZSBvZiBlYWNoIG9mIHRoZSBmb2xsb3dpbmdcbiAqIGNvbnRyb2xzOlxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvWm9vbX5ab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvUm90YXRlflJvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL0F0dHJpYnV0aW9ufkF0dHJpYnV0aW9ufVxuICpcbiAqIEBwYXJhbSB7RGVmYXVsdHNPcHRpb25zPX0gb3B0X29wdGlvbnNcbiAqIERlZmF1bHRzIG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn1cbiAqIENvbnRyb2xzLlxuICogQGZ1bmN0aW9uIG1vZHVsZTpvbC9jb250cm9sLmRlZmF1bHRzXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0cyhvcHRfb3B0aW9ucykge1xuXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gIHZhciBjb250cm9scyA9IG5ldyBDb2xsZWN0aW9uKCk7XG5cbiAgdmFyIHpvb21Db250cm9sID0gb3B0aW9ucy56b29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb20gOiB0cnVlO1xuICBpZiAoem9vbUNvbnRyb2wpIHtcbiAgICBjb250cm9scy5wdXNoKG5ldyBab29tKG9wdGlvbnMuem9vbU9wdGlvbnMpKTtcbiAgfVxuXG4gIHZhciByb3RhdGVDb250cm9sID0gb3B0aW9ucy5yb3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucm90YXRlIDogdHJ1ZTtcbiAgaWYgKHJvdGF0ZUNvbnRyb2wpIHtcbiAgICBjb250cm9scy5wdXNoKG5ldyBSb3RhdGUob3B0aW9ucy5yb3RhdGVPcHRpb25zKSk7XG4gIH1cblxuICB2YXIgYXR0cmlidXRpb25Db250cm9sID0gb3B0aW9ucy5hdHRyaWJ1dGlvbiAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRpb25zLmF0dHJpYnV0aW9uIDogdHJ1ZTtcbiAgaWYgKGF0dHJpYnV0aW9uQ29udHJvbCkge1xuICAgIGNvbnRyb2xzLnB1c2gobmV3IEF0dHJpYnV0aW9uKG9wdGlvbnMuYXR0cmlidXRpb25PcHRpb25zKSk7XG4gIH1cblxuICByZXR1cm4gY29udHJvbHM7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWwuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uXG4gKi9cbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgS2luZXRpYyBmcm9tICcuL0tpbmV0aWMuanMnO1xuaW1wb3J0IERvdWJsZUNsaWNrWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbS5qcyc7XG5pbXBvcnQgRHJhZ1BhbiBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdQYW4uanMnO1xuaW1wb3J0IERyYWdSb3RhdGUgZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnUm90YXRlLmpzJztcbmltcG9ydCBEcmFnWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdab29tLmpzJztcbmltcG9ydCBLZXlib2FyZFBhbiBmcm9tICcuL2ludGVyYWN0aW9uL0tleWJvYXJkUGFuLmpzJztcbmltcG9ydCBLZXlib2FyZFpvb20gZnJvbSAnLi9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb20uanMnO1xuaW1wb3J0IE1vdXNlV2hlZWxab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb20uanMnO1xuaW1wb3J0IFBpbmNoUm90YXRlIGZyb20gJy4vaW50ZXJhY3Rpb24vUGluY2hSb3RhdGUuanMnO1xuaW1wb3J0IFBpbmNoWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL1BpbmNoWm9vbS5qcyc7XG5pbXBvcnQge2ZvY3VzfSBmcm9tICcuL2V2ZW50cy9jb25kaXRpb24uanMnO1xuXG5leHBvcnQge2RlZmF1bHQgYXMgRG91YmxlQ2xpY2tab29tfSBmcm9tICcuL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbS5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgRHJhZ0FuZERyb3B9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ0FuZERyb3AuanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIERyYWdCb3h9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ0JveC5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgRHJhZ1Bhbn0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnUGFuLmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBEcmFnUm90YXRlfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdSb3RhdGUuanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIERyYWdSb3RhdGVBbmRab29tfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdSb3RhdGVBbmRab29tLmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBEcmFnWm9vbX0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnWm9vbS5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgRHJhd30gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmF3LmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBFeHRlbnR9IGZyb20gJy4vaW50ZXJhY3Rpb24vRXh0ZW50LmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBJbnRlcmFjdGlvbn0gZnJvbSAnLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgS2V5Ym9hcmRQYW59IGZyb20gJy4vaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW4uanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIEtleWJvYXJkWm9vbX0gZnJvbSAnLi9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb20uanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIE1vZGlmeX0gZnJvbSAnLi9pbnRlcmFjdGlvbi9Nb2RpZnkuanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIE1vdXNlV2hlZWxab29tfSBmcm9tICcuL2ludGVyYWN0aW9uL01vdXNlV2hlZWxab29tLmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBQaW5jaFJvdGF0ZX0gZnJvbSAnLi9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZS5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgUGluY2hab29tfSBmcm9tICcuL2ludGVyYWN0aW9uL1BpbmNoWm9vbS5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgUG9pbnRlcn0gZnJvbSAnLi9pbnRlcmFjdGlvbi9Qb2ludGVyLmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBTZWxlY3R9IGZyb20gJy4vaW50ZXJhY3Rpb24vU2VsZWN0LmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBTbmFwfSBmcm9tICcuL2ludGVyYWN0aW9uL1NuYXAuanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIFRyYW5zbGF0ZX0gZnJvbSAnLi9pbnRlcmFjdGlvbi9UcmFuc2xhdGUuanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRGVmYXVsdHNPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthbHRTaGlmdERyYWdSb3RhdGU9dHJ1ZV0gV2hldGhlciBBbHQtU2hpZnQtZHJhZyByb3RhdGUgaXNcbiAqIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvbkZvY3VzT25seT1mYWxzZV0gSW50ZXJhY3Qgb25seSB3aGVuIHRoZSBtYXAgaGFzIHRoZVxuICogZm9jdXMuIFRoaXMgYWZmZWN0cyB0aGUgYE1vdXNlV2hlZWxab29tYCBhbmQgYERyYWdQYW5gIGludGVyYWN0aW9ucyBhbmQgaXNcbiAqIHVzZWZ1bCB3aGVuIHBhZ2Ugc2Nyb2xsIGlzIGRlc2lyZWQgZm9yIG1hcHMgdGhhdCBkbyBub3QgaGF2ZSB0aGUgYnJvd3NlcidzXG4gKiBmb2N1cy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbnN0cmFpblJlc29sdXRpb249ZmFsc2VdIFpvb20gdG8gdGhlIGNsb3Nlc3QgaW50ZWdlclxuICogem9vbSBsZXZlbCBhZnRlciB0aGUgd2hlZWwvdHJhY2twYWQgb3IgcGluY2ggZ2VzdHVyZSBlbmRzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZG91YmxlQ2xpY2tab29tPXRydWVdIFdoZXRoZXIgZG91YmxlIGNsaWNrIHpvb20gaXNcbiAqIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtrZXlib2FyZD10cnVlXSBXaGV0aGVyIGtleWJvYXJkIGludGVyYWN0aW9uIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFttb3VzZVdoZWVsWm9vbT10cnVlXSBXaGV0aGVyIG1vdXNld2hlZWwgem9vbSBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbc2hpZnREcmFnWm9vbT10cnVlXSBXaGV0aGVyIFNoaWZ0LWRyYWcgem9vbSBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZHJhZ1Bhbj10cnVlXSBXaGV0aGVyIGRyYWcgcGFuIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtwaW5jaFJvdGF0ZT10cnVlXSBXaGV0aGVyIHBpbmNoIHJvdGF0ZSBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbcGluY2hab29tPXRydWVdIFdoZXRoZXIgcGluY2ggem9vbSBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tRGVsdGFdIFpvb20gbGV2ZWwgZGVsdGEgd2hlbiB1c2luZyBrZXlib2FyZCBvclxuICogbW91c2V3aGVlbCB6b29tLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tRHVyYXRpb25dIER1cmF0aW9uIG9mIHRoZSB6b29tIGFuaW1hdGlvbiBpblxuICogbWlsbGlzZWNvbmRzLlxuICovXG5cblxuLyoqXG4gKiBTZXQgb2YgaW50ZXJhY3Rpb25zIGluY2x1ZGVkIGluIG1hcHMgYnkgZGVmYXVsdC4gU3BlY2lmaWMgaW50ZXJhY3Rpb25zIGNhbiBiZVxuICogZXhjbHVkZWQgYnkgc2V0dGluZyB0aGUgYXBwcm9wcmlhdGUgb3B0aW9uIHRvIGZhbHNlIGluIHRoZSBjb25zdHJ1Y3RvclxuICogb3B0aW9ucywgYnV0IHRoZSBvcmRlciBvZiB0aGUgaW50ZXJhY3Rpb25zIGlzIGZpeGVkLiAgSWYgeW91IHdhbnQgdG8gc3BlY2lmeVxuICogYSBkaWZmZXJlbnQgb3JkZXIgZm9yIGludGVyYWN0aW9ucywgeW91IHdpbGwgbmVlZCB0byBjcmVhdGUgeW91ciBvd25cbiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb259IGluc3RhbmNlcyBhbmQgaW5zZXJ0XG4gKiB0aGVtIGludG8gYSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb259IGluIHRoZSBvcmRlciB5b3Ugd2FudFxuICogYmVmb3JlIGNyZWF0aW5nIHlvdXIge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfSBpbnN0YW5jZS4gVGhlIGRlZmF1bHQgc2V0IG9mXG4gKiBpbnRlcmFjdGlvbnMsIGluIHNlcXVlbmNlLCBpczpcbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnUm90YXRlfkRyYWdSb3RhdGV9XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tfkRvdWJsZUNsaWNrWm9vbX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnUGFufkRyYWdQYW59XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vUGluY2hSb3RhdGV+UGluY2hSb3RhdGV9XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vUGluY2hab29tflBpbmNoWm9vbX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbn5LZXlib2FyZFBhbn1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21+S2V5Ym9hcmRab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL01vdXNlV2hlZWxab29tfk1vdXNlV2hlZWxab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdab29tfkRyYWdab29tfVxuICpcbiAqIEBwYXJhbSB7RGVmYXVsdHNPcHRpb25zPX0gb3B0X29wdGlvbnMgRGVmYXVsdHMgb3B0aW9ucy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKiBBIGNvbGxlY3Rpb24gb2YgaW50ZXJhY3Rpb25zIHRvIGJlIHVzZWQgd2l0aCB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfVxuICogY29uc3RydWN0b3IncyBgaW50ZXJhY3Rpb25zYCBvcHRpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0cyhvcHRfb3B0aW9ucykge1xuXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gIHZhciBpbnRlcmFjdGlvbnMgPSBuZXcgQ29sbGVjdGlvbigpO1xuXG4gIHZhciBraW5ldGljID0gbmV3IEtpbmV0aWMoLTAuMDA1LCAwLjA1LCAxMDApO1xuXG4gIHZhciBhbHRTaGlmdERyYWdSb3RhdGUgPSBvcHRpb25zLmFsdFNoaWZ0RHJhZ1JvdGF0ZSAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRpb25zLmFsdFNoaWZ0RHJhZ1JvdGF0ZSA6IHRydWU7XG4gIGlmIChhbHRTaGlmdERyYWdSb3RhdGUpIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgRHJhZ1JvdGF0ZSgpKTtcbiAgfVxuXG4gIHZhciBkb3VibGVDbGlja1pvb20gPSBvcHRpb25zLmRvdWJsZUNsaWNrWm9vbSAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRpb25zLmRvdWJsZUNsaWNrWm9vbSA6IHRydWU7XG4gIGlmIChkb3VibGVDbGlja1pvb20pIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgRG91YmxlQ2xpY2tab29tKHtcbiAgICAgIGRlbHRhOiBvcHRpb25zLnpvb21EZWx0YSxcbiAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvblxuICAgIH0pKTtcbiAgfVxuXG4gIHZhciBkcmFnUGFuID0gb3B0aW9ucy5kcmFnUGFuICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmRyYWdQYW4gOiB0cnVlO1xuICBpZiAoZHJhZ1Bhbikge1xuICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBEcmFnUGFuKHtcbiAgICAgIGNvbmRpdGlvbjogb3B0aW9ucy5vbkZvY3VzT25seSA/IGZvY3VzIDogdW5kZWZpbmVkLFxuICAgICAga2luZXRpYzoga2luZXRpY1xuICAgIH0pKTtcbiAgfVxuXG4gIHZhciBwaW5jaFJvdGF0ZSA9IG9wdGlvbnMucGluY2hSb3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucGluY2hSb3RhdGUgOlxuICAgIHRydWU7XG4gIGlmIChwaW5jaFJvdGF0ZSkge1xuICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBQaW5jaFJvdGF0ZSgpKTtcbiAgfVxuXG4gIHZhciBwaW5jaFpvb20gPSBvcHRpb25zLnBpbmNoWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waW5jaFpvb20gOiB0cnVlO1xuICBpZiAocGluY2hab29tKSB7XG4gICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IFBpbmNoWm9vbSh7XG4gICAgICBjb25zdHJhaW5SZXNvbHV0aW9uOiBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24sXG4gICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb25cbiAgICB9KSk7XG4gIH1cblxuICB2YXIga2V5Ym9hcmQgPSBvcHRpb25zLmtleWJvYXJkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmtleWJvYXJkIDogdHJ1ZTtcbiAgaWYgKGtleWJvYXJkKSB7XG4gICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IEtleWJvYXJkUGFuKCkpO1xuICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBLZXlib2FyZFpvb20oe1xuICAgICAgZGVsdGE6IG9wdGlvbnMuem9vbURlbHRhLFxuICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uXG4gICAgfSkpO1xuICB9XG5cbiAgdmFyIG1vdXNlV2hlZWxab29tID0gb3B0aW9ucy5tb3VzZVdoZWVsWm9vbSAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRpb25zLm1vdXNlV2hlZWxab29tIDogdHJ1ZTtcbiAgaWYgKG1vdXNlV2hlZWxab29tKSB7XG4gICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IE1vdXNlV2hlZWxab29tKHtcbiAgICAgIGNvbmRpdGlvbjogb3B0aW9ucy5vbkZvY3VzT25seSA/IGZvY3VzIDogdW5kZWZpbmVkLFxuICAgICAgY29uc3RyYWluUmVzb2x1dGlvbjogb3B0aW9ucy5jb25zdHJhaW5SZXNvbHV0aW9uLFxuICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uXG4gICAgfSkpO1xuICB9XG5cbiAgdmFyIHNoaWZ0RHJhZ1pvb20gPSBvcHRpb25zLnNoaWZ0RHJhZ1pvb20gIT09IHVuZGVmaW5lZCA/XG4gICAgb3B0aW9ucy5zaGlmdERyYWdab29tIDogdHJ1ZTtcbiAgaWYgKHNoaWZ0RHJhZ1pvb20pIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgRHJhZ1pvb20oe1xuICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uXG4gICAgfSkpO1xuICB9XG5cbiAgcmV0dXJuIGludGVyYWN0aW9ucztcblxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcmFjdGlvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVmlld1xuICovXG5pbXBvcnQge0RFRkFVTFRfVElMRV9TSVpFfSBmcm9tICcuL3RpbGVncmlkL2NvbW1vbi5qcyc7XG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCB7Vk9JRH0gZnJvbSAnLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHtjcmVhdGVFeHRlbnQsIG5vbmUgYXMgY2VudGVyTm9uZX0gZnJvbSAnLi9jZW50ZXJjb25zdHJhaW50LmpzJztcbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4vT2JqZWN0LmpzJztcbmltcG9ydCB7Y3JlYXRlU25hcFRvUmVzb2x1dGlvbnMsIGNyZWF0ZVNuYXBUb1Bvd2VyfSBmcm9tICcuL3Jlc29sdXRpb25jb25zdHJhaW50LmpzJztcbmltcG9ydCB7Y3JlYXRlU25hcFRvWmVybywgY3JlYXRlU25hcFRvTiwgbm9uZSBhcyByb3RhdGlvbk5vbmUsIGRpc2FibGV9IGZyb20gJy4vcm90YXRpb25jb25zdHJhaW50LmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuL1ZpZXdIaW50LmpzJztcbmltcG9ydCBWaWV3UHJvcGVydHkgZnJvbSAnLi9WaWV3UHJvcGVydHkuanMnO1xuaW1wb3J0IHtsaW5lYXJGaW5kTmVhcmVzdH0gZnJvbSAnLi9hcnJheS5qcyc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7YWRkIGFzIGFkZENvb3JkaW5hdGUsIHJvdGF0ZSBhcyByb3RhdGVDb29yZGluYXRlLCBlcXVhbHMgYXMgY29vcmRpbmF0ZXNFcXVhbH0gZnJvbSAnLi9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7aW5BbmRPdXR9IGZyb20gJy4vZWFzaW5nLmpzJztcbmltcG9ydCB7Z2V0Rm9yVmlld0FuZFNpemUsIGdldENlbnRlciwgZ2V0SGVpZ2h0LCBnZXRXaWR0aCwgaXNFbXB0eX0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCB7ZnJvbUV4dGVudCBhcyBwb2x5Z29uRnJvbUV4dGVudH0gZnJvbSAnLi9nZW9tL1BvbHlnb24uanMnO1xuaW1wb3J0IHtjbGFtcCwgbW9kdWxvfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHthc3NpZ259IGZyb20gJy4vb2JqLmpzJztcbmltcG9ydCB7Y3JlYXRlUHJvamVjdGlvbiwgTUVURVJTX1BFUl9VTklUfSBmcm9tICcuL3Byb2ouanMnO1xuaW1wb3J0IFVuaXRzIGZyb20gJy4vcHJvai9Vbml0cy5qcyc7XG5cblxuLyoqXG4gKiBBbiBhbmltYXRpb24gY29uZmlndXJhdGlvblxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEFuaW1hdGlvblxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW3NvdXJjZUNlbnRlcl1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFt0YXJnZXRDZW50ZXJdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3NvdXJjZVJlc29sdXRpb25dXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RhcmdldFJlc29sdXRpb25dXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3NvdXJjZVJvdGF0aW9uXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0YXJnZXRSb3RhdGlvbl1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdXG4gKiBAcHJvcGVydHkge251bWJlcn0gc3RhcnRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBkdXJhdGlvblxuICogQHByb3BlcnR5IHtib29sZWFufSBjb21wbGV0ZVxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIpOm51bWJlcn0gZWFzaW5nXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGJvb2xlYW4pfSBjYWxsYmFja1xuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBDb25zdHJhaW50c1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2NlbnRlcmNvbnN0cmFpbnQuanNcIikuVHlwZX0gY2VudGVyXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcmVzb2x1dGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZX0gcmVzb2x1dGlvblxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3JvdGF0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlfSByb3RhdGlvblxuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGaXRPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbc2l6ZV0gVGhlIHNpemUgaW4gcGl4ZWxzIG9mIHRoZSBib3ggdG8gZml0XG4gKiB0aGUgZXh0ZW50IGludG8uIERlZmF1bHQgaXMgdGhlIGN1cnJlbnQgc2l6ZSBvZiB0aGUgZmlyc3QgbWFwIGluIHRoZSBET00gdGhhdFxuICogdXNlcyB0aGlzIHZpZXcsIG9yIGBbMTAwLCAxMDBdYCBpZiBubyBzdWNoIG1hcCBpcyBmb3VuZC5cbiAqIEBwcm9wZXJ0eSB7IUFycmF5PG51bWJlcj59IFtwYWRkaW5nPVswLCAwLCAwLCAwXV0gUGFkZGluZyAoaW4gcGl4ZWxzKSB0byBiZVxuICogY2xlYXJlZCBpbnNpZGUgdGhlIHZpZXcuIFZhbHVlcyBpbiB0aGUgYXJyYXkgYXJlIHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdFxuICogcGFkZGluZy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbnN0cmFpblJlc29sdXRpb249dHJ1ZV0gQ29uc3RyYWluIHRoZSByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbmVhcmVzdD1mYWxzZV0gSWYgYGNvbnN0cmFpblJlc29sdXRpb25gIGlzIGB0cnVlYCwgZ2V0XG4gKiB0aGUgbmVhcmVzdCBleHRlbnQgaW5zdGVhZCBvZiB0aGUgY2xvc2VzdCB0aGF0IGFjdHVhbGx5IGZpdHMgdGhlIHZpZXcuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb249MF0gTWluaW11bSByZXNvbHV0aW9uIHRoYXQgd2Ugem9vbSB0by5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gTWF4aW11bSB6b29tIGxldmVsIHRoYXQgd2Ugem9vbSB0by4gSWZcbiAqIGBtaW5SZXNvbHV0aW9uYCBpcyBnaXZlbiwgdGhpcyBwcm9wZXJ0eSBpcyBpZ25vcmVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbl0gVGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQnkgZGVmYXVsdCwgdGhlcmUgaXMgbm8gYW5pbWF0aW9uIHRvIHRoZSB0YXJnZXQgZXh0ZW50LlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIpOm51bWJlcn0gW2Vhc2luZ10gVGhlIGVhc2luZyBmdW5jdGlvbiB1c2VkIGR1cmluZ1xuICogdGhlIGFuaW1hdGlvbiAoZGVmYXVsdHMgdG8ge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmd+aW5BbmRPdXR9KS5cbiAqIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaCBmcmFtZSB3aXRoIGEgbnVtYmVyIHJlcHJlc2VudGluZyBhXG4gKiBmcmFjdGlvbiBvZiB0aGUgYW5pbWF0aW9uJ3MgZHVyYXRpb24uICBUaGUgZnVuY3Rpb24gc2hvdWxkIHJldHVybiBhIG51bWJlclxuICogYmV0d2VlbiAwIGFuZCAxIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3MgdG93YXJkIHRoZSBkZXN0aW5hdGlvbiBzdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oYm9vbGVhbil9IFtjYWxsYmFja10gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIHZpZXcgaXMgaW5cbiAqIGl0cyBmaW5hbCBwb3NpdGlvbi4gVGhlIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHdpdGggYHRydWVgIGlmIHRoZSBhbmltYXRpb25cbiAqIHNlcmllcyBjb21wbGV0ZWQgb24gaXRzIG93biBvciBgZmFsc2VgIGlmIGl0IHdhcyBjYW5jZWxsZWQuXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFZpZXdPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbY2VudGVyXSBUaGUgaW5pdGlhbCBjZW50ZXIgZm9yXG4gKiB0aGUgdmlldy4gVGhlIGNvb3JkaW5hdGUgc3lzdGVtIGZvciB0aGUgY2VudGVyIGlzIHNwZWNpZmllZCB3aXRoIHRoZVxuICogYHByb2plY3Rpb25gIG9wdGlvbi4gTGF5ZXIgc291cmNlcyB3aWxsIG5vdCBiZSBmZXRjaGVkIGlmIHRoaXMgaXMgbm90IHNldCxcbiAqIGJ1dCB0aGUgY2VudGVyIGNhbiBiZSBzZXQgbGF0ZXIgd2l0aCB7QGxpbmsgI3NldENlbnRlcn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW58bnVtYmVyfSBbY29uc3RyYWluUm90YXRpb249dHJ1ZV0gUm90YXRpb24gY29uc3RyYWludC5cbiAqIGBmYWxzZWAgbWVhbnMgbm8gY29uc3RyYWludC4gYHRydWVgIG1lYW5zIG5vIGNvbnN0cmFpbnQsIGJ1dCBzbmFwIHRvIHplcm9cbiAqIG5lYXIgemVyby4gQSBudW1iZXIgY29uc3RyYWlucyB0aGUgcm90YXRpb24gdG8gdGhhdCBudW1iZXIgb2YgdmFsdWVzLiBGb3JcbiAqIGV4YW1wbGUsIGA0YCB3aWxsIGNvbnN0cmFpbiB0aGUgcm90YXRpb24gdG8gMCwgOTAsIDE4MCwgYW5kIDI3MCBkZWdyZWVzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZW5hYmxlUm90YXRpb249dHJ1ZV0gRW5hYmxlIHJvdGF0aW9uLlxuICogSWYgYGZhbHNlYCwgYSByb3RhdGlvbiBjb25zdHJhaW50IHRoYXQgYWx3YXlzIHNldHMgdGhlIHJvdGF0aW9uIHRvIHplcm8gaXNcbiAqIHVzZWQuIFRoZSBgY29uc3RyYWluUm90YXRpb25gIG9wdGlvbiBoYXMgbm8gZWZmZWN0IGlmIGBlbmFibGVSb3RhdGlvbmAgaXNcbiAqIGBmYWxzZWAuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGV4dGVudCB0aGF0IGNvbnN0cmFpbnMgdGhlXG4gKiBjZW50ZXIsIGluIG90aGVyIHdvcmRzLCBjZW50ZXIgY2Fubm90IGJlIHNldCBvdXRzaWRlIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJdCBpcyB1c2VkIHRvZ2V0aGVyIHdpdGggYG1pblJlc29sdXRpb25gIChvclxuICogYG1heFpvb21gKSBhbmQgYHpvb21GYWN0b3JgLiBJZiB1bnNwZWNpZmllZCBpdCBpcyBjYWxjdWxhdGVkIGluIHN1Y2ggYSB3YXlcbiAqIHRoYXQgdGhlIHByb2plY3Rpb24ncyB2YWxpZGl0eSBleHRlbnQgZml0cyBpbiBhIDI1NngyNTYgcHggdGlsZS4gSWYgdGhlXG4gKiBwcm9qZWN0aW9uIGlzIFNwaGVyaWNhbCBNZXJjYXRvciAodGhlIGRlZmF1bHQpIHRoZW4gYG1heFJlc29sdXRpb25gIGRlZmF1bHRzXG4gKiB0byBgNDAwNzUwMTYuNjg1NTc4NDkgLyAyNTYgPSAxNTY1NDMuMDMzOTI4MDQwOTdgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LiAgSXQgaXMgdXNlZCB0b2dldGhlciB3aXRoIGBtYXhSZXNvbHV0aW9uYCAob3JcbiAqIGBtaW5ab29tYCkgYW5kIGB6b29tRmFjdG9yYC4gIElmIHVuc3BlY2lmaWVkIGl0IGlzIGNhbGN1bGF0ZWQgYXNzdW1pbmcgMjlcbiAqIHpvb20gbGV2ZWxzICh3aXRoIGEgZmFjdG9yIG9mIDIpLiBJZiB0aGUgcHJvamVjdGlvbiBpcyBTcGhlcmljYWwgTWVyY2F0b3JcbiAqICh0aGUgZGVmYXVsdCkgdGhlbiBgbWluUmVzb2x1dGlvbmAgZGVmYXVsdHMgdG9cbiAqIGA0MDA3NTAxNi42ODU1Nzg0OSAvIDI1NiAvIE1hdGgucG93KDIsIDI4KSA9IDAuMDAwNTgzMTY4MjQ1NTgzOTI1M2AuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb209MjhdIFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gKiByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWluWm9vbWAgKG9yXG4gKiBgbWF4UmVzb2x1dGlvbmApIGFuZCBgem9vbUZhY3RvcmAuICBOb3RlIHRoYXQgaWYgYG1pblJlc29sdXRpb25gIGlzIGFsc29cbiAqIHByb3ZpZGVkLCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgYG1heFpvb21gLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gKiByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWF4Wm9vbWAgKG9yXG4gKiBgbWluUmVzb2x1dGlvbmApIGFuZCBgem9vbUZhY3RvcmAuICBOb3RlIHRoYXQgaWYgYG1heFJlc29sdXRpb25gIGlzIGFsc29cbiAqIHByb3ZpZGVkLCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgYG1pblpvb21gLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uPSdFUFNHOjM4NTcnXSBUaGVcbiAqIHByb2plY3Rpb24uIFRoZSBkZWZhdWx0IGlzIFNwaGVyaWNhbCBNZXJjYXRvci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVzb2x1dGlvbl0gVGhlIGluaXRpYWwgcmVzb2x1dGlvbiBmb3IgdGhlIHZpZXcuIFRoZVxuICogdW5pdHMgYXJlIGBwcm9qZWN0aW9uYCB1bml0cyBwZXIgcGl4ZWwgKGUuZy4gbWV0ZXJzIHBlciBwaXhlbCkuIEFuXG4gKiBhbHRlcm5hdGl2ZSB0byBzZXR0aW5nIHRoaXMgaXMgdG8gc2V0IGB6b29tYC4gTGF5ZXIgc291cmNlcyB3aWxsIG5vdCBiZVxuICogZmV0Y2hlZCBpZiBuZWl0aGVyIHRoaXMgbm9yIGB6b29tYCBhcmUgZGVmaW5lZCwgYnV0IHRoZXkgY2FuIGJlIHNldCBsYXRlclxuICogd2l0aCB7QGxpbmsgI3NldFpvb219IG9yIHtAbGluayAjc2V0UmVzb2x1dGlvbn0uXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtyZXNvbHV0aW9uc10gUmVzb2x1dGlvbnMgdG8gZGV0ZXJtaW5lIHRoZVxuICogcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJZiBzZXQgdGhlIGBtYXhSZXNvbHV0aW9uYCwgYG1pblJlc29sdXRpb25gLFxuICogYG1pblpvb21gLCBgbWF4Wm9vbWAsIGFuZCBgem9vbUZhY3RvcmAgb3B0aW9ucyBhcmUgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcm90YXRpb249MF0gVGhlIGluaXRpYWwgcm90YXRpb24gZm9yIHRoZSB2aWV3IGluIHJhZGlhbnNcbiAqIChwb3NpdGl2ZSByb3RhdGlvbiBjbG9ja3dpc2UsIDAgbWVhbnMgTm9ydGgpLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tXSBPbmx5IHVzZWQgaWYgYHJlc29sdXRpb25gIGlzIG5vdCBkZWZpbmVkLiBab29tXG4gKiBsZXZlbCB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgaW5pdGlhbCByZXNvbHV0aW9uIGZvciB0aGUgdmlldy4gVGhlIGluaXRpYWxcbiAqIHJlc29sdXRpb24gaXMgZGV0ZXJtaW5lZCB1c2luZyB0aGUge0BsaW5rICNjb25zdHJhaW5SZXNvbHV0aW9ufSBtZXRob2QuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21GYWN0b3I9Ml0gVGhlIHpvb20gZmFjdG9yIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZVxuICogcmVzb2x1dGlvbiBjb25zdHJhaW50LlxuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBbmltYXRpb25PcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbY2VudGVyXSBUaGUgY2VudGVyIG9mIHRoZSB2aWV3IGF0IHRoZSBlbmQgb2ZcbiAqIHRoZSBhbmltYXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21dIFRoZSB6b29tIGxldmVsIG9mIHRoZSB2aWV3IGF0IHRoZSBlbmQgb2YgdGhlXG4gKiBhbmltYXRpb24uIFRoaXMgdGFrZXMgcHJlY2VkZW5jZSBvdmVyIGByZXNvbHV0aW9uYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVzb2x1dGlvbl0gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcgYXQgdGhlIGVuZFxuICogb2YgdGhlIGFuaW1hdGlvbi4gIElmIGB6b29tYCBpcyBhbHNvIHByb3ZpZGVkLCB0aGlzIG9wdGlvbiB3aWxsIGJlIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JvdGF0aW9uXSBUaGUgcm90YXRpb24gb2YgdGhlIHZpZXcgYXQgdGhlIGVuZCBvZlxuICogdGhlIGFuaW1hdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIE9wdGlvbmFsIGFuY2hvciB0byByZW1haW5lZCBmaXhlZFxuICogZHVyaW5nIGEgcm90YXRpb24gb3IgcmVzb2x1dGlvbiBhbmltYXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTEwMDBdIFRoZSBkdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTpudW1iZXJ9IFtlYXNpbmddIFRoZSBlYXNpbmcgZnVuY3Rpb24gdXNlZFxuICogZHVyaW5nIHRoZSBhbmltYXRpb24gKGRlZmF1bHRzIHRvIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nfmluQW5kT3V0fSkuXG4gKiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggZnJhbWUgd2l0aCBhIG51bWJlciByZXByZXNlbnRpbmcgYVxuICogZnJhY3Rpb24gb2YgdGhlIGFuaW1hdGlvbidzIGR1cmF0aW9uLiAgVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBudW1iZXJcbiAqIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIHRvd2FyZCB0aGUgZGVzdGluYXRpb24gc3RhdGUuXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0YXRlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXJcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvblxuICogQHByb3BlcnR5IHtudW1iZXJ9IHJlc29sdXRpb25cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSByb3RhdGlvblxuICogQHByb3BlcnR5IHtudW1iZXJ9IHpvb21cbiAqL1xuXG5cbi8qKlxuICogRGVmYXVsdCBtaW4gem9vbSBsZXZlbCBmb3IgdGhlIG1hcCB2aWV3LlxuICogQHR5cGUge251bWJlcn1cbiAqL1xudmFyIERFRkFVTFRfTUlOX1pPT00gPSAwO1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBWaWV3IG9iamVjdCByZXByZXNlbnRzIGEgc2ltcGxlIDJEIHZpZXcgb2YgdGhlIG1hcC5cbiAqXG4gKiBUaGlzIGlzIHRoZSBvYmplY3QgdG8gYWN0IHVwb24gdG8gY2hhbmdlIHRoZSBjZW50ZXIsIHJlc29sdXRpb24sXG4gKiBhbmQgcm90YXRpb24gb2YgdGhlIG1hcC5cbiAqXG4gKiAjIyMgVGhlIHZpZXcgc3RhdGVzXG4gKlxuICogQW4gVmlldyBpcyBkZXRlcm1pbmVkIGJ5IHRocmVlIHN0YXRlczogYGNlbnRlcmAsIGByZXNvbHV0aW9uYCxcbiAqIGFuZCBgcm90YXRpb25gLiBFYWNoIHN0YXRlIGhhcyBhIGNvcnJlc3BvbmRpbmcgZ2V0dGVyIGFuZCBzZXR0ZXIsIGUuZy5cbiAqIGBnZXRDZW50ZXJgIGFuZCBgc2V0Q2VudGVyYCBmb3IgdGhlIGBjZW50ZXJgIHN0YXRlLlxuICpcbiAqIEFuIFZpZXcgaGFzIGEgYHByb2plY3Rpb25gLiBUaGUgcHJvamVjdGlvbiBkZXRlcm1pbmVzIHRoZVxuICogY29vcmRpbmF0ZSBzeXN0ZW0gb2YgdGhlIGNlbnRlciwgYW5kIGl0cyB1bml0cyBkZXRlcm1pbmUgdGhlIHVuaXRzIG9mIHRoZVxuICogcmVzb2x1dGlvbiAocHJvamVjdGlvbiB1bml0cyBwZXIgcGl4ZWwpLiBUaGUgZGVmYXVsdCBwcm9qZWN0aW9uIGlzXG4gKiBTcGhlcmljYWwgTWVyY2F0b3IgKEVQU0c6Mzg1NykuXG4gKlxuICogIyMjIFRoZSBjb25zdHJhaW50c1xuICpcbiAqIGBzZXRDZW50ZXJgLCBgc2V0UmVzb2x1dGlvbmAgYW5kIGBzZXRSb3RhdGlvbmAgY2FuIGJlIHVzZWQgdG8gY2hhbmdlIHRoZVxuICogc3RhdGVzIG9mIHRoZSB2aWV3LiBBbnkgdmFsdWUgY2FuIGJlIHBhc3NlZCB0byB0aGUgc2V0dGVycy4gQW5kIHRoZSB2YWx1ZVxuICogdGhhdCBpcyBwYXNzZWQgdG8gYSBzZXR0ZXIgd2lsbCBlZmZlY3RpdmVseSBiZSB0aGUgdmFsdWUgc2V0IGluIHRoZSB2aWV3LFxuICogYW5kIHJldHVybmVkIGJ5IHRoZSBjb3JyZXNwb25kaW5nIGdldHRlci5cbiAqXG4gKiBCdXQgYSBWaWV3IG9iamVjdCBhbHNvIGhhcyBhICpyZXNvbHV0aW9uIGNvbnN0cmFpbnQqLCBhXG4gKiAqcm90YXRpb24gY29uc3RyYWludCogYW5kIGEgKmNlbnRlciBjb25zdHJhaW50Ki5cbiAqXG4gKiBBcyBzYWlkIGFib3ZlLCBubyBjb25zdHJhaW50cyBhcmUgYXBwbGllZCB3aGVuIHRoZSBzZXR0ZXJzIGFyZSB1c2VkIHRvIHNldFxuICogbmV3IHN0YXRlcyBmb3IgdGhlIHZpZXcuIEFwcGx5aW5nIGNvbnN0cmFpbnRzIGlzIGRvbmUgZXhwbGljaXRseSB0aHJvdWdoXG4gKiB0aGUgdXNlIG9mIHRoZSBgY29uc3RyYWluKmAgZnVuY3Rpb25zIChgY29uc3RyYWluUmVzb2x1dGlvbmAgYW5kXG4gKiBgY29uc3RyYWluUm90YXRpb25gIGFuZCBgY29uc3RyYWluQ2VudGVyYCkuXG4gKlxuICogVGhlIG1haW4gdXNlcnMgb2YgdGhlIGNvbnN0cmFpbnRzIGFyZSB0aGUgaW50ZXJhY3Rpb25zIGFuZCB0aGVcbiAqIGNvbnRyb2xzLiBGb3IgZXhhbXBsZSwgZG91YmxlLWNsaWNraW5nIG9uIHRoZSBtYXAgY2hhbmdlcyB0aGUgdmlldyB0b1xuICogdGhlIFwibmV4dFwiIHJlc29sdXRpb24uIEFuZCByZWxlYXNpbmcgdGhlIGZpbmdlcnMgYWZ0ZXIgcGluY2gtem9vbWluZ1xuICogc25hcHMgdG8gdGhlIGNsb3Nlc3QgcmVzb2x1dGlvbiAod2l0aCBhbiBhbmltYXRpb24pLlxuICpcbiAqIFRoZSAqcmVzb2x1dGlvbiBjb25zdHJhaW50KiBzbmFwcyB0byBzcGVjaWZpYyByZXNvbHV0aW9ucy4gSXQgaXNcbiAqIGRldGVybWluZWQgYnkgdGhlIGZvbGxvd2luZyBvcHRpb25zOiBgcmVzb2x1dGlvbnNgLCBgbWF4UmVzb2x1dGlvbmAsXG4gKiBgbWF4Wm9vbWAsIGFuZCBgem9vbUZhY3RvcmAuIElmIGByZXNvbHV0aW9uc2AgaXMgc2V0LCB0aGUgb3RoZXIgdGhyZWVcbiAqIG9wdGlvbnMgYXJlIGlnbm9yZWQuIFNlZSBkb2N1bWVudGF0aW9uIGZvciBlYWNoIG9wdGlvbiBmb3IgbW9yZVxuICogaW5mb3JtYXRpb24uXG4gKlxuICogVGhlICpyb3RhdGlvbiBjb25zdHJhaW50KiBzbmFwcyB0byBzcGVjaWZpYyBhbmdsZXMuIEl0IGlzIGRldGVybWluZWRcbiAqIGJ5IHRoZSBmb2xsb3dpbmcgb3B0aW9uczogYGVuYWJsZVJvdGF0aW9uYCBhbmQgYGNvbnN0cmFpblJvdGF0aW9uYC5cbiAqIEJ5IGRlZmF1bHQgdGhlIHJvdGF0aW9uIHZhbHVlIGlzIHNuYXBwZWQgdG8gemVybyB3aGVuIGFwcHJvYWNoaW5nIHRoZVxuICogaG9yaXpvbnRhbC5cbiAqXG4gKiBUaGUgKmNlbnRlciBjb25zdHJhaW50KiBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBgZXh0ZW50YCBvcHRpb24uIEJ5XG4gKiBkZWZhdWx0IHRoZSBjZW50ZXIgaXMgbm90IGNvbnN0cmFpbmVkIGF0IGFsbC5cbiAqXG4gICogQGFwaVxuICovXG52YXIgVmlldyA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEJhc2VPYmplY3QpIHtcbiAgZnVuY3Rpb24gVmlldyhvcHRfb3B0aW9ucykge1xuICAgIEJhc2VPYmplY3QuY2FsbCh0aGlzKTtcblxuICAgIHZhciBvcHRpb25zID0gYXNzaWduKHt9LCBvcHRfb3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAqL1xuICAgIHRoaXMuaGludHNfID0gWzAsIDBdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7QXJyYXk8QXJyYXk8QW5pbWF0aW9uPj59XG4gICAgICovXG4gICAgdGhpcy5hbmltYXRpb25zXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV87XG5cbiAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbnNfID0gdGhpcy51cGRhdGVBbmltYXRpb25zXy5iaW5kKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLnByb2plY3Rpb25fID0gY3JlYXRlUHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24sICdFUFNHOjM4NTcnKTtcblxuICAgIHRoaXMuYXBwbHlPcHRpb25zXyhvcHRpb25zKTtcbiAgfVxuXG4gIGlmICggQmFzZU9iamVjdCApIFZpZXcuX19wcm90b19fID0gQmFzZU9iamVjdDtcbiAgVmlldy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBCYXNlT2JqZWN0ICYmIEJhc2VPYmplY3QucHJvdG90eXBlICk7XG4gIFZpZXcucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVmlldztcblxuICAvKipcbiAgICogU2V0IHVwIHRoZSB2aWV3IHdpdGggdGhlIGdpdmVuIG9wdGlvbnMuXG4gICAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuYXBwbHlPcHRpb25zXyA9IGZ1bmN0aW9uIGFwcGx5T3B0aW9uc18gKG9wdGlvbnMpIHtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCAqPn1cbiAgICAgKi9cbiAgICB2YXIgcHJvcGVydGllcyA9IHt9O1xuICAgIHByb3BlcnRpZXNbVmlld1Byb3BlcnR5LkNFTlRFUl0gPSBvcHRpb25zLmNlbnRlciAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdGlvbnMuY2VudGVyIDogbnVsbDtcblxuICAgIHZhciByZXNvbHV0aW9uQ29uc3RyYWludEluZm8gPSBjcmVhdGVSZXNvbHV0aW9uQ29uc3RyYWludChvcHRpb25zKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heFJlc29sdXRpb25fID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLm1heFJlc29sdXRpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5taW5SZXNvbHV0aW9uXyA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby5taW5SZXNvbHV0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuem9vbUZhY3Rvcl8gPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8uem9vbUZhY3RvcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMucmVzb2x1dGlvbnNfID0gb3B0aW9ucy5yZXNvbHV0aW9ucztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1pblpvb21fID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLm1pblpvb207XG5cbiAgICB2YXIgY2VudGVyQ29uc3RyYWludCA9IGNyZWF0ZUNlbnRlckNvbnN0cmFpbnQob3B0aW9ucyk7XG4gICAgdmFyIHJlc29sdXRpb25Db25zdHJhaW50ID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLmNvbnN0cmFpbnQ7XG4gICAgdmFyIHJvdGF0aW9uQ29uc3RyYWludCA9IGNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludChvcHRpb25zKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0NvbnN0cmFpbnRzfVxuICAgICAqL1xuICAgIHRoaXMuY29uc3RyYWludHNfID0ge1xuICAgICAgY2VudGVyOiBjZW50ZXJDb25zdHJhaW50LFxuICAgICAgcmVzb2x1dGlvbjogcmVzb2x1dGlvbkNvbnN0cmFpbnQsXG4gICAgICByb3RhdGlvbjogcm90YXRpb25Db25zdHJhaW50XG4gICAgfTtcblxuICAgIGlmIChvcHRpb25zLnJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcHJvcGVydGllc1tWaWV3UHJvcGVydHkuUkVTT0xVVElPTl0gPSBvcHRpb25zLnJlc29sdXRpb247XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLnpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcHJvcGVydGllc1tWaWV3UHJvcGVydHkuUkVTT0xVVElPTl0gPSB0aGlzLmNvbnN0cmFpblJlc29sdXRpb24oXG4gICAgICAgIHRoaXMubWF4UmVzb2x1dGlvbl8sIG9wdGlvbnMuem9vbSAtIHRoaXMubWluWm9vbV8pO1xuXG4gICAgICBpZiAodGhpcy5yZXNvbHV0aW9uc18pIHsgLy8gaW4gY2FzZSBtYXAgem9vbSBpcyBvdXQgb2YgbWluL21heCB6b29tIHJhbmdlXG4gICAgICAgIHByb3BlcnRpZXNbVmlld1Byb3BlcnR5LlJFU09MVVRJT05dID0gY2xhbXAoXG4gICAgICAgICAgTnVtYmVyKHRoaXMuZ2V0UmVzb2x1dGlvbigpIHx8IHByb3BlcnRpZXNbVmlld1Byb3BlcnR5LlJFU09MVVRJT05dKSxcbiAgICAgICAgICB0aGlzLm1pblJlc29sdXRpb25fLCB0aGlzLm1heFJlc29sdXRpb25fKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcHJvcGVydGllc1tWaWV3UHJvcGVydHkuUk9UQVRJT05dID0gb3B0aW9ucy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yb3RhdGlvbiA6IDA7XG4gICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Vmlld09wdGlvbnN9XG4gICAgICovXG4gICAgdGhpcy5vcHRpb25zXyA9IG9wdGlvbnM7XG5cbiAgfTtcblxuICAvKipcbiAgICogR2V0IGFuIHVwZGF0ZWQgdmVyc2lvbiBvZiB0aGUgdmlldyBvcHRpb25zIHVzZWQgdG8gY29uc3RydWN0IHRoZSB2aWV3LiAgVGhlXG4gICAqIGN1cnJlbnQgcmVzb2x1dGlvbiAob3Igem9vbSksIGNlbnRlciwgYW5kIHJvdGF0aW9uIGFyZSBhcHBsaWVkIHRvIGFueSBzdG9yZWRcbiAgICogb3B0aW9ucy4gIFRoZSBwcm92aWRlZCBvcHRpb25zIGNhbiBiZSB1c2VkIHRvIGFwcGx5IG5ldyBtaW4vbWF4IHpvb20gb3JcbiAgICogcmVzb2x1dGlvbiBsaW1pdHMuXG4gICAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG5ld09wdGlvbnMgTmV3IG9wdGlvbnMgdG8gYmUgYXBwbGllZC5cbiAgICogQHJldHVybiB7Vmlld09wdGlvbnN9IE5ldyBvcHRpb25zIHVwZGF0ZWQgd2l0aCB0aGUgY3VycmVudCB2aWV3IHN0YXRlLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0VXBkYXRlZE9wdGlvbnNfID0gZnVuY3Rpb24gZ2V0VXBkYXRlZE9wdGlvbnNfIChuZXdPcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhc3NpZ24oe30sIHRoaXMub3B0aW9uc18pO1xuXG4gICAgLy8gcHJlc2VydmUgcmVzb2x1dGlvbiAob3Igem9vbSlcbiAgICBpZiAob3B0aW9ucy5yZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9wdGlvbnMucmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zLnpvb20gPSB0aGlzLmdldFpvb20oKTtcbiAgICB9XG5cbiAgICAvLyBwcmVzZXJ2ZSBjZW50ZXJcbiAgICBvcHRpb25zLmNlbnRlciA9IHRoaXMuZ2V0Q2VudGVyKCk7XG5cbiAgICAvLyBwcmVzZXJ2ZSByb3RhdGlvblxuICAgIG9wdGlvbnMucm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG5cbiAgICByZXR1cm4gYXNzaWduKHt9LCBvcHRpb25zLCBuZXdPcHRpb25zKTtcbiAgfTtcblxuICAvKipcbiAgICogQW5pbWF0ZSB0aGUgdmlldy4gIFRoZSB2aWV3J3MgY2VudGVyLCB6b29tIChvciByZXNvbHV0aW9uKSwgYW5kIHJvdGF0aW9uXG4gICAqIGNhbiBiZSBhbmltYXRlZCBmb3Igc21vb3RoIHRyYW5zaXRpb25zIGJldHdlZW4gdmlldyBzdGF0ZXMuICBGb3IgZXhhbXBsZSxcbiAgICogdG8gYW5pbWF0ZSB0aGUgdmlldyB0byBhIG5ldyB6b29tIGxldmVsOlxuICAgKlxuICAgKiAgICAgdmlldy5hbmltYXRlKHt6b29tOiB2aWV3LmdldFpvb20oKSArIDF9KTtcbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhlIGFuaW1hdGlvbiBsYXN0cyBvbmUgc2Vjb25kIGFuZCB1c2VzIGluLWFuZC1vdXQgZWFzaW5nLiAgWW91XG4gICAqIGNhbiBjdXN0b21pemUgdGhpcyBiZWhhdmlvciBieSBpbmNsdWRpbmcgYGR1cmF0aW9uYCAoaW4gbWlsbGlzZWNvbmRzKSBhbmRcbiAgICogYGVhc2luZ2Agb3B0aW9ucyAoc2VlIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nfSkuXG4gICAqXG4gICAqIFRvIGNoYWluIHRvZ2V0aGVyIG11bHRpcGxlIGFuaW1hdGlvbnMsIGNhbGwgdGhlIG1ldGhvZCB3aXRoIG11bHRpcGxlXG4gICAqIGFuaW1hdGlvbiBvYmplY3RzLiAgRm9yIGV4YW1wbGUsIHRvIGZpcnN0IHpvb20gYW5kIHRoZW4gcGFuOlxuICAgKlxuICAgKiAgICAgdmlldy5hbmltYXRlKHt6b29tOiAxMH0sIHtjZW50ZXI6IFswLCAwXX0pO1xuICAgKlxuICAgKiBJZiB5b3UgcHJvdmlkZSBhIGZ1bmN0aW9uIGFzIHRoZSBsYXN0IGFyZ3VtZW50IHRvIHRoZSBhbmltYXRlIG1ldGhvZCwgaXRcbiAgICogd2lsbCBnZXQgY2FsbGVkIGF0IHRoZSBlbmQgb2YgYW4gYW5pbWF0aW9uIHNlcmllcy4gIFRoZSBjYWxsYmFjayB3aWxsIGJlXG4gICAqIGNhbGxlZCB3aXRoIGB0cnVlYCBpZiB0aGUgYW5pbWF0aW9uIHNlcmllcyBjb21wbGV0ZWQgb24gaXRzIG93biBvciBgZmFsc2VgXG4gICAqIGlmIGl0IHdhcyBjYW5jZWxsZWQuXG4gICAqXG4gICAqIEFuaW1hdGlvbnMgYXJlIGNhbmNlbGxlZCBieSB1c2VyIGludGVyYWN0aW9ucyAoZS5nLiBkcmFnZ2luZyB0aGUgbWFwKSBvciBieVxuICAgKiBjYWxsaW5nIGB2aWV3LnNldENlbnRlcigpYCwgYHZpZXcuc2V0UmVzb2x1dGlvbigpYCwgb3IgYHZpZXcuc2V0Um90YXRpb24oKWBcbiAgICogKG9yIGFub3RoZXIgbWV0aG9kIHRoYXQgY2FsbHMgb25lIG9mIHRoZXNlKS5cbiAgICpcbiAgICogQHBhcmFtIHsuLi4oQW5pbWF0aW9uT3B0aW9uc3xmdW5jdGlvbihib29sZWFuKSl9IHZhcl9hcmdzIEFuaW1hdGlvblxuICAgKiAgICAgb3B0aW9ucy4gIE11bHRpcGxlIGFuaW1hdGlvbnMgY2FuIGJlIHJ1biBpbiBzZXJpZXMgYnkgcGFzc2luZyBtdWx0aXBsZVxuICAgKiAgICAgb3B0aW9ucyBvYmplY3RzLiAgVG8gcnVuIG11bHRpcGxlIGFuaW1hdGlvbnMgaW4gcGFyYWxsZWwsIGNhbGwgdGhlIG1ldGhvZFxuICAgKiAgICAgbXVsdGlwbGUgdGltZXMuICBBbiBvcHRpb25hbCBjYWxsYmFjayBjYW4gYmUgcHJvdmlkZWQgYXMgYSBmaW5hbFxuICAgKiAgICAgYXJndW1lbnQuICBUaGUgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgd2l0aCBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyXG4gICAqICAgICB0aGUgYW5pbWF0aW9uIGNvbXBsZXRlZCB3aXRob3V0IGJlaW5nIGNhbmNlbGxlZC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uIGFuaW1hdGUgKHZhcl9hcmdzKSB7XG4gICAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzO1xuXG4gICAgdmFyIGFuaW1hdGlvbkNvdW50ID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB2YXIgY2FsbGJhY2s7XG4gICAgaWYgKGFuaW1hdGlvbkNvdW50ID4gMSAmJiB0eXBlb2YgYXJndW1lbnRzW2FuaW1hdGlvbkNvdW50IC0gMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNhbGxiYWNrID0gYXJndW1lbnRzW2FuaW1hdGlvbkNvdW50IC0gMV07XG4gICAgICAtLWFuaW1hdGlvbkNvdW50O1xuICAgIH1cbiAgICBpZiAoIXRoaXMuaXNEZWYoKSkge1xuICAgICAgLy8gaWYgdmlldyBwcm9wZXJ0aWVzIGFyZSBub3QgeWV0IHNldCwgc2hvcnRjdXQgdG8gdGhlIGZpbmFsIHN0YXRlXG4gICAgICB2YXIgc3RhdGUgPSBhcmd1bWVudHNbYW5pbWF0aW9uQ291bnQgLSAxXTtcbiAgICAgIGlmIChzdGF0ZS5jZW50ZXIpIHtcbiAgICAgICAgdGhpcy5zZXRDZW50ZXIoc3RhdGUuY2VudGVyKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS56b29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5zZXRab29tKHN0YXRlLnpvb20pO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLnJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5zZXRSb3RhdGlvbihzdGF0ZS5yb3RhdGlvbik7XG4gICAgICB9XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHRydWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIHZhciBjZW50ZXIgPSB0aGlzLmdldENlbnRlcigpLnNsaWNlKCk7XG4gICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICB2YXIgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgdmFyIHNlcmllcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWF0aW9uQ291bnQ7ICsraSkge1xuICAgICAgdmFyIG9wdGlvbnMgPSAvKiogQHR5cGUge0FuaW1hdGlvbk9wdGlvbnN9ICovIChhcmd1bWVudHMkMVtpXSk7XG5cbiAgICAgIHZhciBhbmltYXRpb24gPSAvKiogQHR5cGUge0FuaW1hdGlvbn0gKi8gKHtcbiAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgIGFuY2hvcjogb3B0aW9ucy5hbmNob3IsXG4gICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMTAwMCxcbiAgICAgICAgZWFzaW5nOiBvcHRpb25zLmVhc2luZyB8fCBpbkFuZE91dFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgICBhbmltYXRpb24uc291cmNlQ2VudGVyID0gY2VudGVyO1xuICAgICAgICBhbmltYXRpb24udGFyZ2V0Q2VudGVyID0gb3B0aW9ucy5jZW50ZXI7XG4gICAgICAgIGNlbnRlciA9IGFuaW1hdGlvbi50YXJnZXRDZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLnpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgICAgIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uID0gdGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uKFxuICAgICAgICAgIHRoaXMubWF4UmVzb2x1dGlvbl8sIG9wdGlvbnMuem9vbSAtIHRoaXMubWluWm9vbV8sIDApO1xuICAgICAgICByZXNvbHV0aW9uID0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb247XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVzb2x1dGlvbikge1xuICAgICAgICBhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgICAgIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uID0gb3B0aW9ucy5yZXNvbHV0aW9uO1xuICAgICAgICByZXNvbHV0aW9uID0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb247XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLnJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uID0gcm90YXRpb247XG4gICAgICAgIHZhciBkZWx0YSA9IG1vZHVsbyhvcHRpb25zLnJvdGF0aW9uIC0gcm90YXRpb24gKyBNYXRoLlBJLCAyICogTWF0aC5QSSkgLSBNYXRoLlBJO1xuICAgICAgICBhbmltYXRpb24udGFyZ2V0Um90YXRpb24gPSByb3RhdGlvbiArIGRlbHRhO1xuICAgICAgICByb3RhdGlvbiA9IGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbjtcbiAgICAgIH1cblxuICAgICAgYW5pbWF0aW9uLmNhbGxiYWNrID0gY2FsbGJhY2s7XG5cbiAgICAgIC8vIGNoZWNrIGlmIGFuaW1hdGlvbiBpcyBhIG5vLW9wXG4gICAgICBpZiAoaXNOb29wQW5pbWF0aW9uKGFuaW1hdGlvbikpIHtcbiAgICAgICAgYW5pbWF0aW9uLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgLy8gd2Ugc3RpbGwgcHVzaCBpdCBvbnRvIHRoZSBzZXJpZXMgZm9yIGNhbGxiYWNrIGhhbmRsaW5nXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFydCArPSBhbmltYXRpb24uZHVyYXRpb247XG4gICAgICB9XG4gICAgICBzZXJpZXMucHVzaChhbmltYXRpb24pO1xuICAgIH1cbiAgICB0aGlzLmFuaW1hdGlvbnNfLnB1c2goc2VyaWVzKTtcbiAgICB0aGlzLnNldEhpbnQoVmlld0hpbnQuQU5JTUFUSU5HLCAxKTtcbiAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbnNfKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBpZiB0aGUgdmlldyBpcyBiZWluZyBhbmltYXRlZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHZpZXcgaXMgYmVpbmcgYW5pbWF0ZWQuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldEFuaW1hdGluZyA9IGZ1bmN0aW9uIGdldEFuaW1hdGluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGludHNfW1ZpZXdIaW50LkFOSU1BVElOR10gPiAwO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgaWYgdGhlIHVzZXIgaXMgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgdmlldywgc3VjaCBhcyBwYW5uaW5nIG9yIHpvb21pbmcuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB2aWV3IGlzIGJlaW5nIGludGVyYWN0ZWQgd2l0aC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0SW50ZXJhY3RpbmcgPSBmdW5jdGlvbiBnZXRJbnRlcmFjdGluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGludHNfW1ZpZXdIaW50LklOVEVSQUNUSU5HXSA+IDA7XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbmNlbCBhbnkgb25nb2luZyBhbmltYXRpb25zLlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5jYW5jZWxBbmltYXRpb25zID0gZnVuY3Rpb24gY2FuY2VsQW5pbWF0aW9ucyAoKSB7XG4gICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgLXRoaXMuaGludHNfW1ZpZXdIaW50LkFOSU1BVElOR10pO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIHNlcmllcyA9IHRoaXMuYW5pbWF0aW9uc19baV07XG4gICAgICBpZiAoc2VyaWVzWzBdLmNhbGxiYWNrKSB7XG4gICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKHNlcmllc1swXS5jYWxsYmFjaywgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmFuaW1hdGlvbnNfLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhbGwgYW5pbWF0aW9ucy5cbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnVwZGF0ZUFuaW1hdGlvbnNfID0gZnVuY3Rpb24gdXBkYXRlQW5pbWF0aW9uc18gKCkge1xuICAgIGlmICh0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVBbmltYXRpb25LZXlfKTtcbiAgICAgIHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgIHZhciBtb3JlID0gZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIHZhciBzZXJpZXMgPSB0aGlzLmFuaW1hdGlvbnNfW2ldO1xuICAgICAgdmFyIHNlcmllc0NvbXBsZXRlID0gdHJ1ZTtcbiAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IHNlcmllcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIHZhciBhbmltYXRpb24gPSBzZXJpZXNbal07XG4gICAgICAgIGlmIChhbmltYXRpb24uY29tcGxldGUpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWxhcHNlZCA9IG5vdyAtIGFuaW1hdGlvbi5zdGFydDtcbiAgICAgICAgdmFyIGZyYWN0aW9uID0gYW5pbWF0aW9uLmR1cmF0aW9uID4gMCA/IGVsYXBzZWQgLyBhbmltYXRpb24uZHVyYXRpb24gOiAxO1xuICAgICAgICBpZiAoZnJhY3Rpb24gPj0gMSkge1xuICAgICAgICAgIGFuaW1hdGlvbi5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgZnJhY3Rpb24gPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlcmllc0NvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByb2dyZXNzID0gYW5pbWF0aW9uLmVhc2luZyhmcmFjdGlvbik7XG4gICAgICAgIGlmIChhbmltYXRpb24uc291cmNlQ2VudGVyKSB7XG4gICAgICAgICAgdmFyIHgwID0gYW5pbWF0aW9uLnNvdXJjZUNlbnRlclswXTtcbiAgICAgICAgICB2YXIgeTAgPSBhbmltYXRpb24uc291cmNlQ2VudGVyWzFdO1xuICAgICAgICAgIHZhciB4MSA9IGFuaW1hdGlvbi50YXJnZXRDZW50ZXJbMF07XG4gICAgICAgICAgdmFyIHkxID0gYW5pbWF0aW9uLnRhcmdldENlbnRlclsxXTtcbiAgICAgICAgICB2YXIgeCA9IHgwICsgcHJvZ3Jlc3MgKiAoeDEgLSB4MCk7XG4gICAgICAgICAgdmFyIHkgPSB5MCArIHByb2dyZXNzICogKHkxIC0geTApO1xuICAgICAgICAgIHRoaXMuc2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIsIFt4LCB5XSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uICYmIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgdmFyIHJlc29sdXRpb24gPSBwcm9ncmVzcyA9PT0gMSA/XG4gICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiA6XG4gICAgICAgICAgICBhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiArIHByb2dyZXNzICogKGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uIC0gYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24pO1xuICAgICAgICAgIGlmIChhbmltYXRpb24uYW5jaG9yKSB7XG4gICAgICAgICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuQ0VOVEVSLFxuICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUNlbnRlclpvb20ocmVzb2x1dGlvbiwgYW5pbWF0aW9uLmFuY2hvcikpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuUkVTT0xVVElPTiwgcmVzb2x1dGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbiAhPT0gdW5kZWZpbmVkICYmIGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdmFyIHJvdGF0aW9uID0gcHJvZ3Jlc3MgPT09IDEgP1xuICAgICAgICAgICAgbW9kdWxvKGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiArIE1hdGguUEksIDIgKiBNYXRoLlBJKSAtIE1hdGguUEkgOlxuICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uICsgcHJvZ3Jlc3MgKiAoYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uIC0gYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uKTtcbiAgICAgICAgICBpZiAoYW5pbWF0aW9uLmFuY2hvcikge1xuICAgICAgICAgICAgdGhpcy5zZXQoVmlld1Byb3BlcnR5LkNFTlRFUixcbiAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVDZW50ZXJSb3RhdGUocm90YXRpb24sIGFuaW1hdGlvbi5hbmNob3IpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5zZXQoVmlld1Byb3BlcnR5LlJPVEFUSU9OLCByb3RhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgbW9yZSA9IHRydWU7XG4gICAgICAgIGlmICghYW5pbWF0aW9uLmNvbXBsZXRlKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzZXJpZXNDb21wbGV0ZSkge1xuICAgICAgICB0aGlzLmFuaW1hdGlvbnNfW2ldID0gbnVsbDtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgLTEpO1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBzZXJpZXNbMF0uY2FsbGJhY2s7XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBwcnVuZSBjb21wbGV0ZWQgc2VyaWVzXG4gICAgdGhpcy5hbmltYXRpb25zXyA9IHRoaXMuYW5pbWF0aW9uc18uZmlsdGVyKEJvb2xlYW4pO1xuICAgIGlmIChtb3JlICYmIHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVBbmltYXRpb25zXyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gVGFyZ2V0IHJvdGF0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhbmNob3IgUm90YXRpb24gYW5jaG9yLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlciBmb3Igcm90YXRpb24gYW5kIGFuY2hvci5cbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmNhbGN1bGF0ZUNlbnRlclJvdGF0ZSA9IGZ1bmN0aW9uIGNhbGN1bGF0ZUNlbnRlclJvdGF0ZSAocm90YXRpb24sIGFuY2hvcikge1xuICAgIHZhciBjZW50ZXI7XG4gICAgdmFyIGN1cnJlbnRDZW50ZXIgPSB0aGlzLmdldENlbnRlcigpO1xuICAgIGlmIChjdXJyZW50Q2VudGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNlbnRlciA9IFtjdXJyZW50Q2VudGVyWzBdIC0gYW5jaG9yWzBdLCBjdXJyZW50Q2VudGVyWzFdIC0gYW5jaG9yWzFdXTtcbiAgICAgIHJvdGF0ZUNvb3JkaW5hdGUoY2VudGVyLCByb3RhdGlvbiAtIHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICBhZGRDb29yZGluYXRlKGNlbnRlciwgYW5jaG9yKTtcbiAgICB9XG4gICAgcmV0dXJuIGNlbnRlcjtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFuY2hvciBab29tIGFuY2hvci5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIgZm9yIHJlc29sdXRpb24gYW5kIGFuY2hvci5cbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmNhbGN1bGF0ZUNlbnRlclpvb20gPSBmdW5jdGlvbiBjYWxjdWxhdGVDZW50ZXJab29tIChyZXNvbHV0aW9uLCBhbmNob3IpIHtcbiAgICB2YXIgY2VudGVyO1xuICAgIHZhciBjdXJyZW50Q2VudGVyID0gdGhpcy5nZXRDZW50ZXIoKTtcbiAgICB2YXIgY3VycmVudFJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICBpZiAoY3VycmVudENlbnRlciAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciB4ID0gYW5jaG9yWzBdIC0gcmVzb2x1dGlvbiAqIChhbmNob3JbMF0gLSBjdXJyZW50Q2VudGVyWzBdKSAvIGN1cnJlbnRSZXNvbHV0aW9uO1xuICAgICAgdmFyIHkgPSBhbmNob3JbMV0gLSByZXNvbHV0aW9uICogKGFuY2hvclsxXSAtIGN1cnJlbnRDZW50ZXJbMV0pIC8gY3VycmVudFJlc29sdXRpb247XG4gICAgICBjZW50ZXIgPSBbeCwgeV07XG4gICAgfVxuICAgIHJldHVybiBjZW50ZXI7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBWaWV3cG9ydCBzaXplIG9yIGBbMTAwLCAxMDBdYCB3aGVuIG5vIHZpZXdwb3J0IGlzIGZvdW5kLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0U2l6ZUZyb21WaWV3cG9ydF8gPSBmdW5jdGlvbiBnZXRTaXplRnJvbVZpZXdwb3J0XyAoKSB7XG4gICAgdmFyIHNpemUgPSBbMTAwLCAxMDBdO1xuICAgIHZhciBzZWxlY3RvciA9ICcub2wtdmlld3BvcnRbZGF0YS12aWV3PVwiJyArIGdldFVpZCh0aGlzKSArICdcIl0nO1xuICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgIHZhciBtZXRyaWNzID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICAgIHNpemVbMF0gPSBwYXJzZUludChtZXRyaWNzLndpZHRoLCAxMCk7XG4gICAgICBzaXplWzFdID0gcGFyc2VJbnQobWV0cmljcy5oZWlnaHQsIDEwKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpemU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY29uc3RyYWluZWQgY2VudGVyIG9mIHRoaXMgdmlldy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IGNlbnRlciBDZW50ZXIuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gQ29uc3RyYWluZWQgY2VudGVyLlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5jb25zdHJhaW5DZW50ZXIgPSBmdW5jdGlvbiBjb25zdHJhaW5DZW50ZXIgKGNlbnRlcikge1xuICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXy5jZW50ZXIoY2VudGVyKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBjb25zdHJhaW5lZCByZXNvbHV0aW9uIG9mIHRoaXMgdmlldy5cbiAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2RlbHRhIERlbHRhLiBEZWZhdWx0IGlzIGAwYC5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGlyZWN0aW9uIERpcmVjdGlvbi4gRGVmYXVsdCBpcyBgMGAuXG4gICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IENvbnN0cmFpbmVkIHJlc29sdXRpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmNvbnN0cmFpblJlc29sdXRpb24gPSBmdW5jdGlvbiBjb25zdHJhaW5SZXNvbHV0aW9uIChyZXNvbHV0aW9uLCBvcHRfZGVsdGEsIG9wdF9kaXJlY3Rpb24pIHtcbiAgICB2YXIgZGVsdGEgPSBvcHRfZGVsdGEgfHwgMDtcbiAgICB2YXIgZGlyZWN0aW9uID0gb3B0X2RpcmVjdGlvbiB8fCAwO1xuICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHJlc29sdXRpb24sIGRlbHRhLCBkaXJlY3Rpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvbnN0cmFpbmVkIHJvdGF0aW9uIG9mIHRoaXMgdmlldy5cbiAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGVsdGEgRGVsdGEuIERlZmF1bHQgaXMgYDBgLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBDb25zdHJhaW5lZCByb3RhdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuY29uc3RyYWluUm90YXRpb24gPSBmdW5jdGlvbiBjb25zdHJhaW5Sb3RhdGlvbiAocm90YXRpb24sIG9wdF9kZWx0YSkge1xuICAgIHZhciBkZWx0YSA9IG9wdF9kZWx0YSB8fCAwO1xuICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXy5yb3RhdGlvbihyb3RhdGlvbiwgZGVsdGEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgY2VudGVyLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldENlbnRlciA9IGZ1bmN0aW9uIGdldENlbnRlciAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoVmlld1Byb3BlcnR5LkNFTlRFUikpXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7Q29uc3RyYWludHN9IENvbnN0cmFpbnRzLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0Q29uc3RyYWludHMgPSBmdW5jdGlvbiBnZXRDb25zdHJhaW50cyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3RyYWludHNfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfaGludHMgRGVzdGluYXRpb24gYXJyYXkuXG4gICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEhpbnQuXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5nZXRIaW50cyA9IGZ1bmN0aW9uIGdldEhpbnRzIChvcHRfaGludHMpIHtcbiAgICBpZiAob3B0X2hpbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9wdF9oaW50c1swXSA9IHRoaXMuaGludHNfWzBdO1xuICAgICAgb3B0X2hpbnRzWzFdID0gdGhpcy5oaW50c19bMV07XG4gICAgICByZXR1cm4gb3B0X2hpbnRzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5oaW50c18uc2xpY2UoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB0aGUgZXh0ZW50IGZvciB0aGUgY3VycmVudCB2aWV3IHN0YXRlIGFuZCB0aGUgcGFzc2VkIHNpemUuXG4gICAqIFRoZSBzaXplIGlzIHRoZSBwaXhlbCBkaW1lbnNpb25zIG9mIHRoZSBib3ggaW50byB3aGljaCB0aGUgY2FsY3VsYXRlZCBleHRlbnRcbiAgICogc2hvdWxkIGZpdC4gSW4gbW9zdCBjYXNlcyB5b3Ugd2FudCB0byBnZXQgdGhlIGV4dGVudCBvZiB0aGUgZW50aXJlIG1hcCxcbiAgICogdGhhdCBpcyBgbWFwLmdldFNpemUoKWAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemU9fSBvcHRfc2l6ZSBCb3ggcGl4ZWwgc2l6ZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgc2l6ZSBvZiB0aGVcbiAgICogZmlyc3QgbWFwIHRoYXQgdXNlcyB0aGlzIHZpZXcgd2lsbCBiZSB1c2VkLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuY2FsY3VsYXRlRXh0ZW50ID0gZnVuY3Rpb24gY2FsY3VsYXRlRXh0ZW50IChvcHRfc2l6ZSkge1xuICAgIHZhciBzaXplID0gb3B0X3NpemUgfHwgdGhpcy5nZXRTaXplRnJvbVZpZXdwb3J0XygpO1xuICAgIHZhciBjZW50ZXIgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gKi8gKHRoaXMuZ2V0Q2VudGVyKCkpO1xuICAgIGFzc2VydChjZW50ZXIsIDEpOyAvLyBUaGUgdmlldyBjZW50ZXIgaXMgbm90IGRlZmluZWRcbiAgICB2YXIgcmVzb2x1dGlvbiA9IC8qKiBAdHlwZSB7IW51bWJlcn0gKi8gKHRoaXMuZ2V0UmVzb2x1dGlvbigpKTtcbiAgICBhc3NlcnQocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkLCAyKTsgLy8gVGhlIHZpZXcgcmVzb2x1dGlvbiBpcyBub3QgZGVmaW5lZFxuICAgIHZhciByb3RhdGlvbiA9IC8qKiBAdHlwZSB7IW51bWJlcn0gKi8gKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgYXNzZXJ0KHJvdGF0aW9uICE9PSB1bmRlZmluZWQsIDMpOyAvLyBUaGUgdmlldyByb3RhdGlvbiBpcyBub3QgZGVmaW5lZFxuXG4gICAgcmV0dXJuIGdldEZvclZpZXdBbmRTaXplKGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIHNpemUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5nZXRNYXhSZXNvbHV0aW9uID0gZnVuY3Rpb24gZ2V0TWF4UmVzb2x1dGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWF4UmVzb2x1dGlvbl87XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldE1pblJlc29sdXRpb24gPSBmdW5jdGlvbiBnZXRNaW5SZXNvbHV0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5taW5SZXNvbHV0aW9uXztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSB2aWV3LlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldE1heFpvb20gPSBmdW5jdGlvbiBnZXRNYXhab29tICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHRoaXMubWluUmVzb2x1dGlvbl8pKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IGEgbmV3IG1heGltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnNldE1heFpvb20gPSBmdW5jdGlvbiBzZXRNYXhab29tICh6b29tKSB7XG4gICAgdGhpcy5hcHBseU9wdGlvbnNfKHRoaXMuZ2V0VXBkYXRlZE9wdGlvbnNfKHttYXhab29tOiB6b29tfSkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1pbmltdW0gem9vbSBsZXZlbC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0TWluWm9vbSA9IGZ1bmN0aW9uIGdldE1pblpvb20gKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24odGhpcy5tYXhSZXNvbHV0aW9uXykpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgYSBuZXcgbWluaW11bSB6b29tIGxldmVsIGZvciB0aGUgdmlldy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gVGhlIG1pbmltdW0gem9vbSBsZXZlbC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuc2V0TWluWm9vbSA9IGZ1bmN0aW9uIHNldE1pblpvb20gKHpvb20pIHtcbiAgICB0aGlzLmFwcGx5T3B0aW9uc18odGhpcy5nZXRVcGRhdGVkT3B0aW9uc18oe21pblpvb206IHpvb219KSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBUaGUgcHJvamVjdGlvbiBvZiB0aGUgdmlldy5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uIGdldFByb2plY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnByb2plY3Rpb25fO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgcmVzb2x1dGlvbi5cbiAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldFJlc29sdXRpb24gPSBmdW5jdGlvbiBnZXRSZXNvbHV0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoVmlld1Byb3BlcnR5LlJFU09MVVRJT04pKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSByZXNvbHV0aW9ucyBmb3IgdGhlIHZpZXcuIFRoaXMgcmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzb2x1dGlvbnNcbiAgICogcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgVmlldywgb3IgdW5kZWZpbmVkIGlmIG5vbmUgd2VyZSBnaXZlbi5cbiAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9IFRoZSByZXNvbHV0aW9ucyBvZiB0aGUgdmlldy5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiBnZXRSZXNvbHV0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIGEgcHJvdmlkZWQgZXh0ZW50IChpbiBtYXAgdW5pdHMpIGFuZCBzaXplIChpbiBwaXhlbHMpLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZT19IG9wdF9zaXplIEJveCBwaXhlbCBzaXplLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBwcm92aWRlZCBleHRlbnQgd2lsbCByZW5kZXIgYXRcbiAgICogICAgIHRoZSBnaXZlbiBzaXplLlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50ID0gZnVuY3Rpb24gZ2V0UmVzb2x1dGlvbkZvckV4dGVudCAoZXh0ZW50LCBvcHRfc2l6ZSkge1xuICAgIHZhciBzaXplID0gb3B0X3NpemUgfHwgdGhpcy5nZXRTaXplRnJvbVZpZXdwb3J0XygpO1xuICAgIHZhciB4UmVzb2x1dGlvbiA9IGdldFdpZHRoKGV4dGVudCkgLyBzaXplWzBdO1xuICAgIHZhciB5UmVzb2x1dGlvbiA9IGdldEhlaWdodChleHRlbnQpIC8gc2l6ZVsxXTtcbiAgICByZXR1cm4gTWF0aC5tYXgoeFJlc29sdXRpb24sIHlSZXNvbHV0aW9uKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxIGZvciBhXG4gICAqIHJlc29sdXRpb24uIEV4cG9uZW50aWFsIHNjYWxpbmcgaXMgYXNzdW1lZC5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfcG93ZXIgUG93ZXIuXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlcik6IG51bWJlcn0gUmVzb2x1dGlvbiBmb3IgdmFsdWUgZnVuY3Rpb24uXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yVmFsdWVGdW5jdGlvbiA9IGZ1bmN0aW9uIGdldFJlc29sdXRpb25Gb3JWYWx1ZUZ1bmN0aW9uIChvcHRfcG93ZXIpIHtcbiAgICB2YXIgcG93ZXIgPSBvcHRfcG93ZXIgfHwgMjtcbiAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IHRoaXMubWF4UmVzb2x1dGlvbl87XG4gICAgdmFyIG1pblJlc29sdXRpb24gPSB0aGlzLm1pblJlc29sdXRpb25fO1xuICAgIHZhciBtYXggPSBNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gbWluUmVzb2x1dGlvbikgLyBNYXRoLmxvZyhwb3dlcik7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlLlxuICAgICAgICogQHJldHVybiB7bnVtYmVyfSBSZXNvbHV0aW9uLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdyhwb3dlciwgdmFsdWUgKiBtYXgpO1xuICAgICAgICByZXR1cm4gcmVzb2x1dGlvbjtcbiAgICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgcm90YXRpb24uXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3IGluIHJhZGlhbnMuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldFJvdGF0aW9uID0gZnVuY3Rpb24gZ2V0Um90YXRpb24gKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5ST1RBVElPTikpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSByZXNvbHV0aW9uIGZvciBhIHZhbHVlIGJldHdlZW5cbiAgICogMCBhbmQgMS4gRXhwb25lbnRpYWwgc2NhbGluZyBpcyBhc3N1bWVkLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9wb3dlciBQb3dlci5cbiAgICogQHJldHVybiB7ZnVuY3Rpb24obnVtYmVyKTogbnVtYmVyfSBWYWx1ZSBmb3IgcmVzb2x1dGlvbiBmdW5jdGlvbi5cbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldFZhbHVlRm9yUmVzb2x1dGlvbkZ1bmN0aW9uID0gZnVuY3Rpb24gZ2V0VmFsdWVGb3JSZXNvbHV0aW9uRnVuY3Rpb24gKG9wdF9wb3dlcikge1xuICAgIHZhciBwb3dlciA9IG9wdF9wb3dlciB8fCAyO1xuICAgIHZhciBtYXhSZXNvbHV0aW9uID0gdGhpcy5tYXhSZXNvbHV0aW9uXztcbiAgICB2YXIgbWluUmVzb2x1dGlvbiA9IHRoaXMubWluUmVzb2x1dGlvbl87XG4gICAgdmFyIG1heCA9IE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBtaW5SZXNvbHV0aW9uKSAvIE1hdGgubG9nKHBvd2VyKTtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAgICogQHJldHVybiB7bnVtYmVyfSBWYWx1ZS5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24ocmVzb2x1dGlvbikge1xuICAgICAgICB2YXIgdmFsdWUgPSAoTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIHJlc29sdXRpb24pIC8gTWF0aC5sb2cocG93ZXIpKSAvIG1heDtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvIGZvciBjZW50ZXIgcm91bmRpbmcuXG4gICAqIEByZXR1cm4ge1N0YXRlfSBWaWV3IHN0YXRlLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiBnZXRTdGF0ZSAocGl4ZWxSYXRpbykge1xuICAgIHZhciBjZW50ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSAqLyAodGhpcy5nZXRDZW50ZXIoKSk7XG4gICAgdmFyIHByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICB2YXIgcmVzb2x1dGlvbiA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXRSZXNvbHV0aW9uKCkpO1xuICAgIHZhciBwaXhlbFJlc29sdXRpb24gPSByZXNvbHV0aW9uIC8gcGl4ZWxSYXRpbztcbiAgICB2YXIgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKiBAdHlwZSB7U3RhdGV9ICovICh7XG4gICAgICAgIGNlbnRlcjogW1xuICAgICAgICAgIE1hdGgucm91bmQoY2VudGVyWzBdIC8gcGl4ZWxSZXNvbHV0aW9uKSAqIHBpeGVsUmVzb2x1dGlvbixcbiAgICAgICAgICBNYXRoLnJvdW5kKGNlbnRlclsxXSAvIHBpeGVsUmVzb2x1dGlvbikgKiBwaXhlbFJlc29sdXRpb25cbiAgICAgICAgXSxcbiAgICAgICAgcHJvamVjdGlvbjogcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gcHJvamVjdGlvbiA6IG51bGwsXG4gICAgICAgIHJlc29sdXRpb246IHJlc29sdXRpb24sXG4gICAgICAgIHJvdGF0aW9uOiByb3RhdGlvbixcbiAgICAgICAgem9vbTogdGhpcy5nZXRab29tKClcbiAgICAgIH0pXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IHpvb20gbGV2ZWwuICBJZiB5b3UgY29uZmlndXJlZCB5b3VyIHZpZXcgd2l0aCBhIHJlc29sdXRpb25zXG4gICAqIGFycmF5ICh0aGlzIGlzIHJhcmUpLCB0aGlzIG1ldGhvZCBtYXkgcmV0dXJuIG5vbi1pbnRlZ2VyIHpvb20gbGV2ZWxzIChzb1xuICAgKiB0aGUgem9vbSBsZXZlbCBpcyBub3Qgc2FmZSB0byB1c2UgYXMgYW4gaW5kZXggaW50byBhIHJlc29sdXRpb25zIGFycmF5KS5cbiAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gWm9vbS5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0Wm9vbSA9IGZ1bmN0aW9uIGdldFpvb20gKCkge1xuICAgIHZhciB6b29tO1xuICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgem9vbSA9IHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24ocmVzb2x1dGlvbik7XG4gICAgfVxuICAgIHJldHVybiB6b29tO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHpvb20gbGV2ZWwgZm9yIGEgcmVzb2x1dGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gVGhlIHJlc29sdXRpb24uXG4gICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSB6b29tIGxldmVsIGZvciB0aGUgcHJvdmlkZWQgcmVzb2x1dGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0Wm9vbUZvclJlc29sdXRpb24gPSBmdW5jdGlvbiBnZXRab29tRm9yUmVzb2x1dGlvbiAocmVzb2x1dGlvbikge1xuICAgIHZhciBvZmZzZXQgPSB0aGlzLm1pblpvb21fIHx8IDA7XG4gICAgdmFyIG1heCwgem9vbUZhY3RvcjtcbiAgICBpZiAodGhpcy5yZXNvbHV0aW9uc18pIHtcbiAgICAgIHZhciBuZWFyZXN0ID0gbGluZWFyRmluZE5lYXJlc3QodGhpcy5yZXNvbHV0aW9uc18sIHJlc29sdXRpb24sIDEpO1xuICAgICAgb2Zmc2V0ID0gbmVhcmVzdDtcbiAgICAgIG1heCA9IHRoaXMucmVzb2x1dGlvbnNfW25lYXJlc3RdO1xuICAgICAgaWYgKG5lYXJlc3QgPT0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMSkge1xuICAgICAgICB6b29tRmFjdG9yID0gMjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHpvb21GYWN0b3IgPSBtYXggLyB0aGlzLnJlc29sdXRpb25zX1tuZWFyZXN0ICsgMV07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG1heCA9IHRoaXMubWF4UmVzb2x1dGlvbl87XG4gICAgICB6b29tRmFjdG9yID0gdGhpcy56b29tRmFjdG9yXztcbiAgICB9XG4gICAgcmV0dXJuIG9mZnNldCArIE1hdGgubG9nKG1heCAvIHJlc29sdXRpb24pIC8gTWF0aC5sb2coem9vbUZhY3Rvcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcmVzb2x1dGlvbiBmb3IgYSB6b29tIGxldmVsLlxuICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBab29tIGxldmVsLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSB2aWV3IHJlc29sdXRpb24gZm9yIHRoZSBwcm92aWRlZCB6b29tIGxldmVsLlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yWm9vbSA9IGZ1bmN0aW9uIGdldFJlc29sdXRpb25Gb3Jab29tICh6b29tKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uKFxuICAgICAgdGhpcy5tYXhSZXNvbHV0aW9uXywgem9vbSAtIHRoaXMubWluWm9vbV8sIDApKTtcbiAgfTtcblxuICAvKipcbiAgICogRml0IHRoZSBnaXZlbiBnZW9tZXRyeSBvciBleHRlbnQgYmFzZWQgb24gdGhlIGdpdmVuIG1hcCBzaXplIGFuZCBib3JkZXIuXG4gICAqIFRoZSBzaXplIGlzIHBpeGVsIGRpbWVuc2lvbnMgb2YgdGhlIGJveCB0byBmaXQgdGhlIGV4dGVudCBpbnRvLlxuICAgKiBJbiBtb3N0IGNhc2VzIHlvdSB3aWxsIHdhbnQgdG8gdXNlIHRoZSBtYXAgc2l6ZSwgdGhhdCBpcyBgbWFwLmdldFNpemUoKWAuXG4gICAqIFRha2VzIGNhcmUgb2YgdGhlIG1hcCBhbmdsZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGdlb21ldHJ5T3JFeHRlbnQgVGhlIGdlb21ldHJ5IG9yXG4gICAqICAgICBleHRlbnQgdG8gZml0IHRoZSB2aWV3IHRvLlxuICAgKiBAcGFyYW0ge0ZpdE9wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25zLlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5maXQgPSBmdW5jdGlvbiBmaXQgKGdlb21ldHJ5T3JFeHRlbnQsIG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgc2l6ZSA9IG9wdGlvbnMuc2l6ZTtcbiAgICBpZiAoIXNpemUpIHtcbiAgICAgIHNpemUgPSB0aGlzLmdldFNpemVGcm9tVmlld3BvcnRfKCk7XG4gICAgfVxuICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovXG4gICAgdmFyIGdlb21ldHJ5O1xuICAgIGFzc2VydChBcnJheS5pc0FycmF5KGdlb21ldHJ5T3JFeHRlbnQpIHx8IHR5cGVvZiAvKiogQHR5cGUgez99ICovIChnZW9tZXRyeU9yRXh0ZW50KS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkgPT09ICdmdW5jdGlvbicsXG4gICAgICAyNCk7IC8vIEludmFsaWQgZXh0ZW50IG9yIGdlb21ldHJ5IHByb3ZpZGVkIGFzIGBnZW9tZXRyeWBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShnZW9tZXRyeU9yRXh0ZW50KSkge1xuICAgICAgYXNzZXJ0KCFpc0VtcHR5KGdlb21ldHJ5T3JFeHRlbnQpLFxuICAgICAgICAyNSk7IC8vIENhbm5vdCBmaXQgZW1wdHkgZXh0ZW50IHByb3ZpZGVkIGFzIGBnZW9tZXRyeWBcbiAgICAgIGdlb21ldHJ5ID0gcG9seWdvbkZyb21FeHRlbnQoZ2VvbWV0cnlPckV4dGVudCk7XG4gICAgfSBlbHNlIGlmIChnZW9tZXRyeU9yRXh0ZW50LmdldFR5cGUoKSA9PT0gR2VvbWV0cnlUeXBlLkNJUkNMRSkge1xuICAgICAgZ2VvbWV0cnlPckV4dGVudCA9IGdlb21ldHJ5T3JFeHRlbnQuZ2V0RXh0ZW50KCk7XG4gICAgICBnZW9tZXRyeSA9IHBvbHlnb25Gcm9tRXh0ZW50KGdlb21ldHJ5T3JFeHRlbnQpO1xuICAgICAgZ2VvbWV0cnkucm90YXRlKHRoaXMuZ2V0Um90YXRpb24oKSwgZ2V0Q2VudGVyKGdlb21ldHJ5T3JFeHRlbnQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeU9yRXh0ZW50O1xuICAgIH1cblxuICAgIHZhciBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBhZGRpbmcgOiBbMCwgMCwgMCwgMF07XG4gICAgdmFyIGNvbnN0cmFpblJlc29sdXRpb24gPSBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24gIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24gOiB0cnVlO1xuICAgIHZhciBuZWFyZXN0ID0gb3B0aW9ucy5uZWFyZXN0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5lYXJlc3QgOiBmYWxzZTtcbiAgICB2YXIgbWluUmVzb2x1dGlvbjtcbiAgICBpZiAob3B0aW9ucy5taW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG1pblJlc29sdXRpb24gPSBvcHRpb25zLm1pblJlc29sdXRpb247XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgbWluUmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbihcbiAgICAgICAgdGhpcy5tYXhSZXNvbHV0aW9uXywgb3B0aW9ucy5tYXhab29tIC0gdGhpcy5taW5ab29tXywgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1pblJlc29sdXRpb24gPSAwO1xuICAgIH1cbiAgICB2YXIgY29vcmRzID0gZ2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG5cbiAgICAvLyBjYWxjdWxhdGUgcm90YXRlZCBleHRlbnRcbiAgICB2YXIgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgdmFyIGNvc0FuZ2xlID0gTWF0aC5jb3MoLXJvdGF0aW9uKTtcbiAgICB2YXIgc2luQW5nbGUgPSBNYXRoLnNpbigtcm90YXRpb24pO1xuICAgIHZhciBtaW5Sb3RYID0gK0luZmluaXR5O1xuICAgIHZhciBtaW5Sb3RZID0gK0luZmluaXR5O1xuICAgIHZhciBtYXhSb3RYID0gLUluZmluaXR5O1xuICAgIHZhciBtYXhSb3RZID0gLUluZmluaXR5O1xuICAgIHZhciBzdHJpZGUgPSBnZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZHMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gc3RyaWRlKSB7XG4gICAgICB2YXIgcm90WCA9IGNvb3Jkc1tpXSAqIGNvc0FuZ2xlIC0gY29vcmRzW2kgKyAxXSAqIHNpbkFuZ2xlO1xuICAgICAgdmFyIHJvdFkgPSBjb29yZHNbaV0gKiBzaW5BbmdsZSArIGNvb3Jkc1tpICsgMV0gKiBjb3NBbmdsZTtcbiAgICAgIG1pblJvdFggPSBNYXRoLm1pbihtaW5Sb3RYLCByb3RYKTtcbiAgICAgIG1pblJvdFkgPSBNYXRoLm1pbihtaW5Sb3RZLCByb3RZKTtcbiAgICAgIG1heFJvdFggPSBNYXRoLm1heChtYXhSb3RYLCByb3RYKTtcbiAgICAgIG1heFJvdFkgPSBNYXRoLm1heChtYXhSb3RZLCByb3RZKTtcbiAgICB9XG5cbiAgICAvLyBjYWxjdWxhdGUgcmVzb2x1dGlvblxuICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50KFxuICAgICAgW21pblJvdFgsIG1pblJvdFksIG1heFJvdFgsIG1heFJvdFldLFxuICAgICAgW3NpemVbMF0gLSBwYWRkaW5nWzFdIC0gcGFkZGluZ1szXSwgc2l6ZVsxXSAtIHBhZGRpbmdbMF0gLSBwYWRkaW5nWzJdXSk7XG4gICAgcmVzb2x1dGlvbiA9IGlzTmFOKHJlc29sdXRpb24pID8gbWluUmVzb2x1dGlvbiA6XG4gICAgICBNYXRoLm1heChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uKTtcbiAgICBpZiAoY29uc3RyYWluUmVzb2x1dGlvbikge1xuICAgICAgdmFyIGNvbnN0cmFpbmVkUmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbihyZXNvbHV0aW9uLCAwLCAwKTtcbiAgICAgIGlmICghbmVhcmVzdCAmJiBjb25zdHJhaW5lZFJlc29sdXRpb24gPCByZXNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0cmFpbmVkUmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbihcbiAgICAgICAgICBjb25zdHJhaW5lZFJlc29sdXRpb24sIC0xLCAwKTtcbiAgICAgIH1cbiAgICAgIHJlc29sdXRpb24gPSBjb25zdHJhaW5lZFJlc29sdXRpb247XG4gICAgfVxuXG4gICAgLy8gY2FsY3VsYXRlIGNlbnRlclxuICAgIHNpbkFuZ2xlID0gLXNpbkFuZ2xlOyAvLyBnbyBiYWNrIHRvIG9yaWdpbmFsIHJvdGF0aW9uXG4gICAgdmFyIGNlbnRlclJvdFggPSAobWluUm90WCArIG1heFJvdFgpIC8gMjtcbiAgICB2YXIgY2VudGVyUm90WSA9IChtaW5Sb3RZICsgbWF4Um90WSkgLyAyO1xuICAgIGNlbnRlclJvdFggKz0gKHBhZGRpbmdbMV0gLSBwYWRkaW5nWzNdKSAvIDIgKiByZXNvbHV0aW9uO1xuICAgIGNlbnRlclJvdFkgKz0gKHBhZGRpbmdbMF0gLSBwYWRkaW5nWzJdKSAvIDIgKiByZXNvbHV0aW9uO1xuICAgIHZhciBjZW50ZXJYID0gY2VudGVyUm90WCAqIGNvc0FuZ2xlIC0gY2VudGVyUm90WSAqIHNpbkFuZ2xlO1xuICAgIHZhciBjZW50ZXJZID0gY2VudGVyUm90WSAqIGNvc0FuZ2xlICsgY2VudGVyUm90WCAqIHNpbkFuZ2xlO1xuICAgIHZhciBjZW50ZXIgPSBbY2VudGVyWCwgY2VudGVyWV07XG4gICAgdmFyIGNhbGxiYWNrID0gb3B0aW9ucy5jYWxsYmFjayA/IG9wdGlvbnMuY2FsbGJhY2sgOiBWT0lEO1xuXG4gICAgaWYgKG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5hbmltYXRlKHtcbiAgICAgICAgcmVzb2x1dGlvbjogcmVzb2x1dGlvbixcbiAgICAgICAgY2VudGVyOiBjZW50ZXIsXG4gICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICBlYXNpbmc6IG9wdGlvbnMuZWFzaW5nXG4gICAgICB9LCBjYWxsYmFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0UmVzb2x1dGlvbihyZXNvbHV0aW9uKTtcbiAgICAgIHRoaXMuc2V0Q2VudGVyKGNlbnRlcik7XG4gICAgICBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgdHJ1ZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDZW50ZXIgb24gY29vcmRpbmF0ZSBhbmQgdmlldyBwb3NpdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIEJveCBwaXhlbCBzaXplLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBvc2l0aW9uIFBvc2l0aW9uIG9uIHRoZSB2aWV3IHRvIGNlbnRlciBvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuY2VudGVyT24gPSBmdW5jdGlvbiBjZW50ZXJPbiAoY29vcmRpbmF0ZSwgc2l6ZSwgcG9zaXRpb24pIHtcbiAgICAvLyBjYWxjdWxhdGUgcm90YXRlZCBwb3NpdGlvblxuICAgIHZhciByb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICB2YXIgY29zQW5nbGUgPSBNYXRoLmNvcygtcm90YXRpb24pO1xuICAgIHZhciBzaW5BbmdsZSA9IE1hdGguc2luKC1yb3RhdGlvbik7XG4gICAgdmFyIHJvdFggPSBjb29yZGluYXRlWzBdICogY29zQW5nbGUgLSBjb29yZGluYXRlWzFdICogc2luQW5nbGU7XG4gICAgdmFyIHJvdFkgPSBjb29yZGluYXRlWzFdICogY29zQW5nbGUgKyBjb29yZGluYXRlWzBdICogc2luQW5nbGU7XG4gICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICByb3RYICs9IChzaXplWzBdIC8gMiAtIHBvc2l0aW9uWzBdKSAqIHJlc29sdXRpb247XG4gICAgcm90WSArPSAocG9zaXRpb25bMV0gLSBzaXplWzFdIC8gMikgKiByZXNvbHV0aW9uO1xuXG4gICAgLy8gZ28gYmFjayB0byBvcmlnaW5hbCBhbmdsZVxuICAgIHNpbkFuZ2xlID0gLXNpbkFuZ2xlOyAvLyBnbyBiYWNrIHRvIG9yaWdpbmFsIHJvdGF0aW9uXG4gICAgdmFyIGNlbnRlclggPSByb3RYICogY29zQW5nbGUgLSByb3RZICogc2luQW5nbGU7XG4gICAgdmFyIGNlbnRlclkgPSByb3RZICogY29zQW5nbGUgKyByb3RYICogc2luQW5nbGU7XG5cbiAgICB0aGlzLnNldENlbnRlcihbY2VudGVyWCwgY2VudGVyWV0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBkZWZpbmVkLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuaXNEZWYgPSBmdW5jdGlvbiBpc0RlZiAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5nZXRDZW50ZXIoKSAmJiB0aGlzLmdldFJlc29sdXRpb24oKSAhPT0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSb3RhdGUgdGhlIHZpZXcgYXJvdW5kIGEgZ2l2ZW4gY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIE5ldyByb3RhdGlvbiB2YWx1ZSBmb3IgdGhlIHZpZXcuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU9fSBvcHRfYW5jaG9yIFRoZSByb3RhdGlvbiBjZW50ZXIuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uIHJvdGF0ZSAocm90YXRpb24sIG9wdF9hbmNob3IpIHtcbiAgICBpZiAob3B0X2FuY2hvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YXIgY2VudGVyID0gdGhpcy5jYWxjdWxhdGVDZW50ZXJSb3RhdGUocm90YXRpb24sIG9wdF9hbmNob3IpO1xuICAgICAgdGhpcy5zZXRDZW50ZXIoY2VudGVyKTtcbiAgICB9XG4gICAgdGhpcy5zZXRSb3RhdGlvbihyb3RhdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY2VudGVyIG9mIHRoZSBjdXJyZW50IHZpZXcuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBjZW50ZXIgVGhlIGNlbnRlciBvZiB0aGUgdmlldy5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuc2V0Q2VudGVyID0gZnVuY3Rpb24gc2V0Q2VudGVyIChjZW50ZXIpIHtcbiAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuQ0VOVEVSLCBjZW50ZXIpO1xuICAgIGlmICh0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICB0aGlzLmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Vmlld0hpbnR9IGhpbnQgSGludC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIERlbHRhLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE5ldyB2YWx1ZS5cbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnNldEhpbnQgPSBmdW5jdGlvbiBzZXRIaW50IChoaW50LCBkZWx0YSkge1xuICAgIHRoaXMuaGludHNfW2hpbnRdICs9IGRlbHRhO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIHJldHVybiB0aGlzLmhpbnRzX1toaW50XTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSByZXNvbHV0aW9uIGZvciB0aGlzIHZpZXcuXG4gICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBUaGUgcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuc2V0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uIHNldFJlc29sdXRpb24gKHJlc29sdXRpb24pIHtcbiAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuUkVTT0xVVElPTiwgcmVzb2x1dGlvbik7XG4gICAgaWYgKHRoaXMuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgIHRoaXMuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSByb3RhdGlvbiBmb3IgdGhpcyB2aWV3LlxuICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gVGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3IGluIHJhZGlhbnMuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnNldFJvdGF0aW9uID0gZnVuY3Rpb24gc2V0Um90YXRpb24gKHJvdGF0aW9uKSB7XG4gICAgdGhpcy5zZXQoVmlld1Byb3BlcnR5LlJPVEFUSU9OLCByb3RhdGlvbik7XG4gICAgaWYgKHRoaXMuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgIHRoaXMuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogWm9vbSB0byBhIHNwZWNpZmljIHpvb20gbGV2ZWwuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnNldFpvb20gPSBmdW5jdGlvbiBzZXRab29tICh6b29tKSB7XG4gICAgdGhpcy5zZXRSZXNvbHV0aW9uKHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20oem9vbSkpO1xuICB9O1xuXG4gIHJldHVybiBWaWV3O1xufShCYXNlT2JqZWN0KSk7XG5cblxuLyoqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjay5cbiAqIEBwYXJhbSB7Kn0gcmV0dXJuVmFsdWUgUmV0dXJuIHZhbHVlLlxuICovXG5mdW5jdGlvbiBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgcmV0dXJuVmFsdWUpIHtcbiAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBjYWxsYmFjayhyZXR1cm5WYWx1ZSk7XG4gIH0sIDApO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2NlbnRlcmNvbnN0cmFpbnQuanNcIikuVHlwZX0gVGhlIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDZW50ZXJDb25zdHJhaW50KG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gY3JlYXRlRXh0ZW50KG9wdGlvbnMuZXh0ZW50KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY2VudGVyTm9uZTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gKiBAcmV0dXJuIHt7Y29uc3RyYWludDogaW1wb3J0KFwiLi9yZXNvbHV0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlLCBtYXhSZXNvbHV0aW9uOiBudW1iZXIsXG4gKiAgICAgbWluUmVzb2x1dGlvbjogbnVtYmVyLCBtaW5ab29tOiBudW1iZXIsIHpvb21GYWN0b3I6IG51bWJlcn19IFRoZSBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVzb2x1dGlvbkNvbnN0cmFpbnQob3B0aW9ucykge1xuICB2YXIgcmVzb2x1dGlvbkNvbnN0cmFpbnQ7XG4gIHZhciBtYXhSZXNvbHV0aW9uO1xuICB2YXIgbWluUmVzb2x1dGlvbjtcblxuICAvLyBUT0RPOiBtb3ZlIHRoZXNlIHRvIGJlIG9sIGNvbnN0YW50c1xuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL29wZW5sYXllcnMvb3BlbmxheWVycy9pc3N1ZXMvMjA3NlxuICB2YXIgZGVmYXVsdE1heFpvb20gPSAyODtcbiAgdmFyIGRlZmF1bHRab29tRmFjdG9yID0gMjtcblxuICB2YXIgbWluWm9vbSA9IG9wdGlvbnMubWluWm9vbSAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRpb25zLm1pblpvb20gOiBERUZBVUxUX01JTl9aT09NO1xuXG4gIHZhciBtYXhab29tID0gb3B0aW9ucy5tYXhab29tICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdGlvbnMubWF4Wm9vbSA6IGRlZmF1bHRNYXhab29tO1xuXG4gIHZhciB6b29tRmFjdG9yID0gb3B0aW9ucy56b29tRmFjdG9yICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdGlvbnMuem9vbUZhY3RvciA6IGRlZmF1bHRab29tRmFjdG9yO1xuXG4gIGlmIChvcHRpb25zLnJlc29sdXRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgcmVzb2x1dGlvbnMgPSBvcHRpb25zLnJlc29sdXRpb25zO1xuICAgIG1heFJlc29sdXRpb24gPSByZXNvbHV0aW9uc1ttaW5ab29tXTtcbiAgICBtaW5SZXNvbHV0aW9uID0gcmVzb2x1dGlvbnNbbWF4Wm9vbV0gIT09IHVuZGVmaW5lZCA/XG4gICAgICByZXNvbHV0aW9uc1ttYXhab29tXSA6IHJlc29sdXRpb25zW3Jlc29sdXRpb25zLmxlbmd0aCAtIDFdO1xuICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMoXG4gICAgICByZXNvbHV0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgLy8gY2FsY3VsYXRlIHRoZSBkZWZhdWx0IG1pbiBhbmQgbWF4IHJlc29sdXRpb25cbiAgICB2YXIgcHJvamVjdGlvbiA9IGNyZWF0ZVByb2plY3Rpb24ob3B0aW9ucy5wcm9qZWN0aW9uLCAnRVBTRzozODU3Jyk7XG4gICAgdmFyIGV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgdmFyIHNpemUgPSAhZXh0ZW50ID9cbiAgICAgIC8vIHVzZSBhbiBleHRlbnQgdGhhdCBjYW4gZml0IHRoZSB3aG9sZSB3b3JsZCBpZiBuZWVkIGJlXG4gICAgICAzNjAgKiBNRVRFUlNfUEVSX1VOSVRbVW5pdHMuREVHUkVFU10gL1xuICAgICAgICAgICAgcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KCkgOlxuICAgICAgTWF0aC5tYXgoZ2V0V2lkdGgoZXh0ZW50KSwgZ2V0SGVpZ2h0KGV4dGVudCkpO1xuXG4gICAgdmFyIGRlZmF1bHRNYXhSZXNvbHV0aW9uID0gc2l6ZSAvIERFRkFVTFRfVElMRV9TSVpFIC8gTWF0aC5wb3coXG4gICAgICBkZWZhdWx0Wm9vbUZhY3RvciwgREVGQVVMVF9NSU5fWk9PTSk7XG5cbiAgICB2YXIgZGVmYXVsdE1pblJlc29sdXRpb24gPSBkZWZhdWx0TWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KFxuICAgICAgZGVmYXVsdFpvb21GYWN0b3IsIGRlZmF1bHRNYXhab29tIC0gREVGQVVMVF9NSU5fWk9PTSk7XG5cbiAgICAvLyB1c2VyIHByb3ZpZGVkIG1heFJlc29sdXRpb24gdGFrZXMgcHJlY2VkZW5jZVxuICAgIG1heFJlc29sdXRpb24gPSBvcHRpb25zLm1heFJlc29sdXRpb247XG4gICAgaWYgKG1heFJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgbWluWm9vbSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1heFJlc29sdXRpb24gPSBkZWZhdWx0TWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHpvb21GYWN0b3IsIG1pblpvb20pO1xuICAgIH1cblxuICAgIC8vIHVzZXIgcHJvdmlkZWQgbWluUmVzb2x1dGlvbiB0YWtlcyBwcmVjZWRlbmNlXG4gICAgbWluUmVzb2x1dGlvbiA9IG9wdGlvbnMubWluUmVzb2x1dGlvbjtcbiAgICBpZiAobWluUmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAob3B0aW9ucy5tYXhab29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMubWF4UmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbWluUmVzb2x1dGlvbiA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtYXhab29tKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gZGVmYXVsdE1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtYXhab29tKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWluUmVzb2x1dGlvbiA9IGRlZmF1bHRNaW5SZXNvbHV0aW9uO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGdpdmVuIGRpc2NyZXRlIHpvb20gbGV2ZWxzLCBtaW5SZXNvbHV0aW9uIG1heSBiZSBkaWZmZXJlbnQgdGhhbiBwcm92aWRlZFxuICAgIG1heFpvb20gPSBtaW5ab29tICsgTWF0aC5mbG9vcihcbiAgICAgIE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBtaW5SZXNvbHV0aW9uKSAvIE1hdGgubG9nKHpvb21GYWN0b3IpKTtcbiAgICBtaW5SZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHpvb21GYWN0b3IsIG1heFpvb20gLSBtaW5ab29tKTtcblxuICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlU25hcFRvUG93ZXIoXG4gICAgICB6b29tRmFjdG9yLCBtYXhSZXNvbHV0aW9uLCBtYXhab29tIC0gbWluWm9vbSk7XG4gIH1cbiAgcmV0dXJuIHtjb25zdHJhaW50OiByZXNvbHV0aW9uQ29uc3RyYWludCwgbWF4UmVzb2x1dGlvbjogbWF4UmVzb2x1dGlvbixcbiAgICBtaW5SZXNvbHV0aW9uOiBtaW5SZXNvbHV0aW9uLCBtaW5ab29tOiBtaW5ab29tLCB6b29tRmFjdG9yOiB6b29tRmFjdG9yfTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9yb3RhdGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZX0gUm90YXRpb24gY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludChvcHRpb25zKSB7XG4gIHZhciBlbmFibGVSb3RhdGlvbiA9IG9wdGlvbnMuZW5hYmxlUm90YXRpb24gIT09IHVuZGVmaW5lZCA/XG4gICAgb3B0aW9ucy5lbmFibGVSb3RhdGlvbiA6IHRydWU7XG4gIGlmIChlbmFibGVSb3RhdGlvbikge1xuICAgIHZhciBjb25zdHJhaW5Sb3RhdGlvbiA9IG9wdGlvbnMuY29uc3RyYWluUm90YXRpb247XG4gICAgaWYgKGNvbnN0cmFpblJvdGF0aW9uID09PSB1bmRlZmluZWQgfHwgY29uc3RyYWluUm90YXRpb24gPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBjcmVhdGVTbmFwVG9aZXJvKCk7XG4gICAgfSBlbHNlIGlmIChjb25zdHJhaW5Sb3RhdGlvbiA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiByb3RhdGlvbk5vbmU7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29uc3RyYWluUm90YXRpb24gPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gY3JlYXRlU25hcFRvTihjb25zdHJhaW5Sb3RhdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByb3RhdGlvbk5vbmU7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBkaXNhYmxlO1xuICB9XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYW4gYW5pbWF0aW9uIGludm9sdmVzIG5vIHZpZXcgY2hhbmdlLlxuICogQHBhcmFtIHtBbmltYXRpb259IGFuaW1hdGlvbiBUaGUgYW5pbWF0aW9uLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGFuaW1hdGlvbiBpbnZvbHZlcyBubyB2aWV3IGNoYW5nZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTm9vcEFuaW1hdGlvbihhbmltYXRpb24pIHtcbiAgaWYgKGFuaW1hdGlvbi5zb3VyY2VDZW50ZXIgJiYgYW5pbWF0aW9uLnRhcmdldENlbnRlcikge1xuICAgIGlmICghY29vcmRpbmF0ZXNFcXVhbChhbmltYXRpb24uc291cmNlQ2VudGVyLCBhbmltYXRpb24udGFyZ2V0Q2VudGVyKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICBpZiAoYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gIT09IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChhbmltYXRpb24uc291cmNlUm90YXRpb24gIT09IGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgVmlldztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Vmlldy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVGlsZVxuICovXG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7ZWFzZUlufSBmcm9tICcuL2Vhc2luZy5qcyc7XG5pbXBvcnQgRXZlbnRUYXJnZXQgZnJvbSAnLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcblxuXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL1RpbGV9IGZvciB0aGUgdGlsZSBhbmQgYVxuICogYHtzdHJpbmd9YCBmb3IgdGhlIHVybCBhcyBhcmd1bWVudHMuIFRoZSBkZWZhdWx0IGlzXG4gKiBgYGBqc1xuICogc291cmNlLnNldFRpbGVMb2FkRnVuY3Rpb24oZnVuY3Rpb24odGlsZSwgc3JjKSB7XG4gKiAgIHRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiB9KTtcbiAqIGBgYFxuICogRm9yIG1vcmUgZmluZSBncmFpbmVkIGNvbnRyb2wsIHRoZSBsb2FkIGZ1bmN0aW9uIGNhbiB1c2UgZmV0Y2ggb3IgWE1MSHR0cFJlcXVlc3QgYW5kIGludm9sdmVcbiAqIGVycm9yIGhhbmRsaW5nOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQgVGlsZVN0YXRlIGZyb20gJ29sL1RpbGVTdGF0ZSc7XG4gKlxuICogc291cmNlLnNldFRpbGVMb2FkRnVuY3Rpb24oZnVuY3Rpb24odGlsZSwgc3JjKSB7XG4gKiAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAqICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJztcbiAqICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlbmQnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gKiAgICAgdmFyIGRhdGEgPSB0aGlzLnJlc3BvbnNlO1xuICogICAgIGlmIChkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAqICAgICAgIHRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGRhdGEpO1xuICogICAgIH0gZWxzZSB7XG4gKiAgICAgICB0aWxlLnNldFN0YXRlKFRpbGVTdGF0ZS5FUlJPUik7XG4gKiAgICAgfVxuICogICB9KTtcbiAqICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24gKCkge1xuICogICAgIHRpbGUuc2V0U3RhdGUoVGlsZVN0YXRlLkVSUk9SKTtcbiAqICAgfSk7XG4gKiAgIHhoci5vcGVuKCdHRVQnLCBzcmMpO1xuICogICB4aHIuc2VuZCgpO1xuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oVGlsZSwgc3RyaW5nKX0gTG9hZEZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cblxuLyoqXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlflRpbGV9IHNvdXJjZXMgdXNlIGEgZnVuY3Rpb24gb2YgdGhpcyB0eXBlIHRvIGdldFxuICogdGhlIHVybCB0aGF0IHByb3ZpZGVzIGEgdGlsZSBmb3IgYSBnaXZlbiB0aWxlIGNvb3JkaW5hdGUuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL3RpbGVjb29yZH5UaWxlQ29vcmR9IGZvciB0aGUgdGlsZVxuICogY29vcmRpbmF0ZSwgYSBge251bWJlcn1gIHJlcHJlc2VudGluZyB0aGUgcGl4ZWwgcmF0aW8gYW5kIGFcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSBmb3IgdGhlIHByb2plY3Rpb24gIGFzIGFyZ3VtZW50c1xuICogYW5kIHJldHVybnMgYSBge3N0cmluZ31gIHJlcHJlc2VudGluZyB0aGUgdGlsZSBVUkwsIG9yIHVuZGVmaW5lZCBpZiBubyB0aWxlXG4gKiBzaG91bGQgYmUgcmVxdWVzdGVkIGZvciB0aGUgcGFzc2VkIHRpbGUgY29vcmRpbmF0ZS5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkLCBudW1iZXIsXG4gKiAgICAgICAgICAgaW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdCk6IChzdHJpbmd8dW5kZWZpbmVkKX0gVXJsRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2l0aW9uPTI1MF0gQSBkdXJhdGlvbiBmb3IgdGlsZSBvcGFjaXR5XG4gKiB0cmFuc2l0aW9ucyBpbiBtaWxsaXNlY29uZHMuIEEgZHVyYXRpb24gb2YgMCBkaXNhYmxlcyB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLlxuICogQGFwaVxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIGZvciB0aWxlcy5cbiAqXG4gKiBAYWJzdHJhY3RcbiAqL1xudmFyIFRpbGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudFRhcmdldCkge1xuICBmdW5jdGlvbiBUaWxlKHRpbGVDb29yZCwgc3RhdGUsIG9wdF9vcHRpb25zKSB7XG4gICAgRXZlbnRUYXJnZXQuY2FsbCh0aGlzKTtcblxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVDb29yZCA9IHRpbGVDb29yZDtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7VGlsZVN0YXRlfVxuICAgICAqL1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcblxuICAgIC8qKlxuICAgICAqIEFuIFwiaW50ZXJpbVwiIHRpbGUgZm9yIHRoaXMgdGlsZS4gVGhlIGludGVyaW0gdGlsZSBtYXkgYmUgdXNlZCB3aGlsZSB0aGlzXG4gICAgICogb25lIGlzIGxvYWRpbmcsIGZvciBcInNtb290aFwiIHRyYW5zaXRpb25zIHdoZW4gY2hhbmdpbmcgcGFyYW1zL2RpbWVuc2lvbnNcbiAgICAgKiBvbiB0aGUgc291cmNlLlxuICAgICAqIEB0eXBlIHtUaWxlfVxuICAgICAqL1xuICAgIHRoaXMuaW50ZXJpbVRpbGUgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQSBrZXkgYXNzaWduZWQgdG8gdGhlIHRpbGUuIFRoaXMgaXMgdXNlZCBieSB0aGUgdGlsZSBzb3VyY2UgdG8gZGV0ZXJtaW5lXG4gICAgICogaWYgdGhpcyB0aWxlIGNhbiBlZmZlY3RpdmVseSBiZSB1c2VkLCBvciBpZiBhIG5ldyB0aWxlIHNob3VsZCBiZSBjcmVhdGVkXG4gICAgICogYW5kIHRoaXMgb25lIGJlIHVzZWQgYXMgYW4gaW50ZXJpbSB0aWxlIGZvciB0aGlzIG5ldyB0aWxlLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5rZXkgPSAnJztcblxuICAgIC8qKlxuICAgICAqIFRoZSBkdXJhdGlvbiBmb3IgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbi5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMudHJhbnNpdGlvbl8gPSBvcHRpb25zLnRyYW5zaXRpb24gPT09IHVuZGVmaW5lZCA/IDI1MCA6IG9wdGlvbnMudHJhbnNpdGlvbjtcblxuICAgIC8qKlxuICAgICAqIExvb2t1cCBvZiBzdGFydCB0aW1lcyBmb3IgcmVuZGVyaW5nIHRyYW5zaXRpb25zLiAgSWYgdGhlIHN0YXJ0IHRpbWUgaXNcbiAgICAgKiBlcXVhbCB0byAtMSwgdGhlIHRyYW5zaXRpb24gaXMgY29tcGxldGUuXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy50cmFuc2l0aW9uU3RhcnRzXyA9IHt9O1xuXG4gIH1cblxuICBpZiAoIEV2ZW50VGFyZ2V0ICkgVGlsZS5fX3Byb3RvX18gPSBFdmVudFRhcmdldDtcbiAgVGlsZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBFdmVudFRhcmdldCAmJiBFdmVudFRhcmdldC5wcm90b3R5cGUgKTtcbiAgVGlsZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUaWxlO1xuXG4gIC8qKlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBUaWxlLnByb3RvdHlwZS5jaGFuZ2VkID0gZnVuY3Rpb24gY2hhbmdlZCAoKSB7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KEV2ZW50VHlwZS5DSEFOR0UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IEtleS5cbiAgICovXG4gIFRpbGUucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uIGdldEtleSAoKSB7XG4gICAgcmV0dXJuIHRoaXMua2V5ICsgJy8nICsgdGhpcy50aWxlQ29vcmQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgaW50ZXJpbSB0aWxlIG1vc3Qgc3VpdGFibGUgZm9yIHJlbmRlcmluZyB1c2luZyB0aGUgY2hhaW4gb2YgaW50ZXJpbVxuICAgKiB0aWxlcy4gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgIG1vc3QgcmVjZW50IHRpbGUgdGhhdCBoYXMgYmVlbiBsb2FkZWQsIGlmIG5vXG4gICAqIHN1Y2ggdGlsZSBleGlzdHMsIHRoZSBvcmlnaW5hbCB0aWxlIGlzIHJldHVybmVkLlxuICAgKiBAcmV0dXJuIHshVGlsZX0gQmVzdCB0aWxlIGZvciByZW5kZXJpbmcuXG4gICAqL1xuICBUaWxlLnByb3RvdHlwZS5nZXRJbnRlcmltVGlsZSA9IGZ1bmN0aW9uIGdldEludGVyaW1UaWxlICgpIHtcbiAgICBpZiAoIXRoaXMuaW50ZXJpbVRpbGUpIHtcbiAgICAgIC8vZW1wdHkgY2hhaW5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB2YXIgdGlsZSA9IHRoaXMuaW50ZXJpbVRpbGU7XG5cbiAgICAvLyBmaW5kIHRoZSBmaXJzdCBsb2FkZWQgdGlsZSBhbmQgcmV0dXJuIGl0LiBTaW5jZSB0aGUgY2hhaW4gaXMgc29ydGVkIGluXG4gICAgLy8gZGVjcmVhc2luZyBvcmRlciBvZiBjcmVhdGlvbiB0aW1lLCB0aGVyZSBpcyBubyBuZWVkIHRvIHNlYXJjaCB0aGUgcmVtYWluZGVyXG4gICAgLy8gb2YgdGhlIGxpc3QgKGFsbCB0aG9zZSB0aWxlcyBjb3JyZXNwb25kIHRvIG9sZGVyIHJlcXVlc3RzIGFuZCB3aWxsIGJlXG4gICAgLy8gY2xlYW5lZCB1cCBieSByZWZyZXNoSW50ZXJpbUNoYWluKVxuICAgIGRvIHtcbiAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURFRCkge1xuICAgICAgICByZXR1cm4gdGlsZTtcbiAgICAgIH1cbiAgICAgIHRpbGUgPSB0aWxlLmludGVyaW1UaWxlO1xuICAgIH0gd2hpbGUgKHRpbGUpO1xuXG4gICAgLy8gd2UgY2FuIG5vdCBmaW5kIGEgYmV0dGVyIHRpbGVcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogR29lcyB0aHJvdWdoIHRoZSBjaGFpbiBvZiBpbnRlcmltIHRpbGVzIGFuZCBkaXNjYXJkcyBzZWN0aW9ucyBvZiB0aGUgY2hhaW5cbiAgICogdGhhdCBhcmUgbm8gbG9uZ2VyIHJlbGV2YW50LlxuICAgKi9cbiAgVGlsZS5wcm90b3R5cGUucmVmcmVzaEludGVyaW1DaGFpbiA9IGZ1bmN0aW9uIHJlZnJlc2hJbnRlcmltQ2hhaW4gKCkge1xuICAgIGlmICghdGhpcy5pbnRlcmltVGlsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB0aWxlID0gdGhpcy5pbnRlcmltVGlsZTtcbiAgICB2YXIgcHJldiA9IC8qKiBAdHlwZSB7VGlsZX0gKi8gKHRoaXMpO1xuXG4gICAgZG8ge1xuICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgIC8vd2UgaGF2ZSBhIGxvYWRlZCB0aWxlLCB3ZSBjYW4gZGlzY2FyZCB0aGUgcmVzdCBvZiB0aGUgbGlzdFxuICAgICAgICAvL3dlIHdvdWxkIGNvdWxkIGFib3J0IGFueSBMT0FESU5HIHRpbGUgcmVxdWVzdFxuICAgICAgICAvL29sZGVyIHRoYW4gdGhpcyB0aWxlIChpLmUuIGFueSBMT0FESU5HIHRpbGUgZm9sbG93aW5nIHRoaXMgZW50cnkgaW4gdGhlIGNoYWluKVxuICAgICAgICB0aWxlLmludGVyaW1UaWxlID0gbnVsbDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2UgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BRElORykge1xuICAgICAgICAvL2tlZXAgdGhpcyBMT0FESU5HIHRpbGUgYW55IGxvYWRlZCB0aWxlcyBsYXRlciBpbiB0aGUgY2hhaW4gYXJlXG4gICAgICAgIC8vb2xkZXIgdGhhbiB0aGlzIHRpbGUsIHNvIHdlJ3JlIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhlIHJlcXVlc3RcbiAgICAgICAgcHJldiA9IHRpbGU7XG4gICAgICB9IGVsc2UgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAvL3RoZSBoZWFkIG9mIHRoZSBsaXN0IGlzIHRoZSBtb3N0IGN1cnJlbnQgdGlsZSwgd2UgZG9uJ3QgbmVlZFxuICAgICAgICAvL3RvIHN0YXJ0IGFueSBvdGhlciByZXF1ZXN0cyBmb3IgdGhpcyBjaGFpblxuICAgICAgICBwcmV2LmludGVyaW1UaWxlID0gdGlsZS5pbnRlcmltVGlsZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByZXYgPSB0aWxlO1xuICAgICAgfVxuICAgICAgdGlsZSA9IHByZXYuaW50ZXJpbVRpbGU7XG4gICAgfSB3aGlsZSAodGlsZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdGlsZSBjb29yZGluYXRlIGZvciB0aGlzIHRpbGUuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGhlIHRpbGUgY29vcmRpbmF0ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgVGlsZS5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkID0gZnVuY3Rpb24gZ2V0VGlsZUNvb3JkICgpIHtcbiAgICByZXR1cm4gdGhpcy50aWxlQ29vcmQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1RpbGVTdGF0ZX0gU3RhdGUuXG4gICAqL1xuICBUaWxlLnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uIGdldFN0YXRlICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgc3RhdGUgb2YgdGhpcyB0aWxlLiBJZiB5b3Ugd3JpdGUgeW91ciBvd24ge0BsaW5rIG1vZHVsZTpvbC9UaWxlfkxvYWRGdW5jdGlvbiB0aWxlTG9hZEZ1bmN0aW9ufSAsXG4gICAqIGl0IGlzIGltcG9ydGFudCB0byBzZXQgdGhlIHN0YXRlIGNvcnJlY3RseSB0byB7QGxpbmsgbW9kdWxlOm9sL1RpbGVTdGF0ZX5FUlJPUn1cbiAgICogd2hlbiB0aGUgdGlsZSBjYW5ub3QgYmUgbG9hZGVkLiBPdGhlcndpc2UgdGhlIHRpbGUgY2Fubm90IGJlIHJlbW92ZWQgZnJvbVxuICAgKiB0aGUgdGlsZSBxdWV1ZSBhbmQgd2lsbCBibG9jayBvdGhlciByZXF1ZXN0cy5cbiAgICogQHBhcmFtIHtUaWxlU3RhdGV9IHN0YXRlIFN0YXRlLlxuICAgKiBAYXBpXG4gICAqL1xuICBUaWxlLnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlIChzdGF0ZSkge1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogTG9hZCB0aGUgaW1hZ2Ugb3IgcmV0cnkgaWYgbG9hZGluZyBwcmV2aW91c2x5IGZhaWxlZC5cbiAgICogTG9hZGluZyBpcyB0YWtlbiBjYXJlIG9mIGJ5IHRoZSB0aWxlIHF1ZXVlLCBhbmQgY2FsbGluZyB0aGlzIG1ldGhvZCBpc1xuICAgKiBvbmx5IG5lZWRlZCBmb3IgcHJlbG9hZGluZyBvciBmb3IgcmVsb2FkaW5nIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAYXBpXG4gICAqL1xuICBUaWxlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gbG9hZCAoKSB7fTtcblxuICAvKipcbiAgICogR2V0IHRoZSBhbHBoYSB2YWx1ZSBmb3IgcmVuZGVyaW5nLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgQW4gaWQgZm9yIHRoZSByZW5kZXJlci5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWUgVGhlIHJlbmRlciBmcmFtZSB0aW1lLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IEEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMS5cbiAgICovXG4gIFRpbGUucHJvdG90eXBlLmdldEFscGhhID0gZnVuY3Rpb24gZ2V0QWxwaGEgKGlkLCB0aW1lKSB7XG4gICAgaWYgKCF0aGlzLnRyYW5zaXRpb25fKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG5cbiAgICB2YXIgc3RhcnQgPSB0aGlzLnRyYW5zaXRpb25TdGFydHNfW2lkXTtcbiAgICBpZiAoIXN0YXJ0KSB7XG4gICAgICBzdGFydCA9IHRpbWU7XG4gICAgICB0aGlzLnRyYW5zaXRpb25TdGFydHNfW2lkXSA9IHN0YXJ0O1xuICAgIH0gZWxzZSBpZiAoc3RhcnQgPT09IC0xKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG5cbiAgICB2YXIgZGVsdGEgPSB0aW1lIC0gc3RhcnQgKyAoMTAwMCAvIDYwKTsgLy8gYXZvaWQgcmVuZGVyaW5nIGF0IDBcbiAgICBpZiAoZGVsdGEgPj0gdGhpcy50cmFuc2l0aW9uXykge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIHJldHVybiBlYXNlSW4oZGVsdGEgLyB0aGlzLnRyYW5zaXRpb25fKTtcbiAgfTtcblxuICAvKipcbiAgICogRGV0ZXJtaW5lIGlmIGEgdGlsZSBpcyBpbiBhbiBhbHBoYSB0cmFuc2l0aW9uLiAgQSB0aWxlIGlzIGNvbnNpZGVyZWQgaW5cbiAgICogdHJhbnNpdGlvbiBpZiB0aWxlLmdldEFscGhhKCkgaGFzIG5vdCB5ZXQgYmVlbiBjYWxsZWQgb3IgaGFzIGJlZW4gY2FsbGVkXG4gICAqIGFuZCByZXR1cm5lZCAxLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgQW4gaWQgZm9yIHRoZSByZW5kZXJlci5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHRpbGUgaXMgaW4gdHJhbnNpdGlvbi5cbiAgICovXG4gIFRpbGUucHJvdG90eXBlLmluVHJhbnNpdGlvbiA9IGZ1bmN0aW9uIGluVHJhbnNpdGlvbiAoaWQpIHtcbiAgICBpZiAoIXRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdICE9PSAtMTtcbiAgfTtcblxuICAvKipcbiAgICogTWFyayBhIHRyYW5zaXRpb24gYXMgY29tcGxldGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBbiBpZCBmb3IgdGhlIHJlbmRlcmVyLlxuICAgKi9cbiAgVGlsZS5wcm90b3R5cGUuZW5kVHJhbnNpdGlvbiA9IGZ1bmN0aW9uIGVuZFRyYW5zaXRpb24gKGlkKSB7XG4gICAgaWYgKHRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgIHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdID0gLTE7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBUaWxlO1xufShFdmVudFRhcmdldCkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IFRpbGU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0ltYWdlVGlsZVxuICovXG5pbXBvcnQgVGlsZSBmcm9tICcuL1RpbGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQge2NyZWF0ZUNhbnZhc0NvbnRleHQyRH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHtsaXN0ZW5PbmNlLCB1bmxpc3RlbkJ5S2V5fSBmcm9tICcuL2V2ZW50cy5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5cblxudmFyIEltYWdlVGlsZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFRpbGUpIHtcbiAgZnVuY3Rpb24gSW1hZ2VUaWxlKHRpbGVDb29yZCwgc3RhdGUsIHNyYywgY3Jvc3NPcmlnaW4sIHRpbGVMb2FkRnVuY3Rpb24sIG9wdF9vcHRpb25zKSB7XG5cbiAgICBUaWxlLmNhbGwodGhpcywgdGlsZUNvb3JkLCBzdGF0ZSwgb3B0X29wdGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLmNyb3NzT3JpZ2luXyA9IGNyb3NzT3JpZ2luO1xuXG4gICAgLyoqXG4gICAgICogSW1hZ2UgVVJJXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5zcmNfID0gc3JjO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLmltYWdlXyA9IG5ldyBJbWFnZSgpO1xuICAgIGlmIChjcm9zc09yaWdpbiAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5pbWFnZV8uY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMuaW1hZ2VMaXN0ZW5lcktleXNfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259XG4gICAgICovXG4gICAgdGhpcy50aWxlTG9hZEZ1bmN0aW9uXyA9IHRpbGVMb2FkRnVuY3Rpb247XG5cbiAgfVxuXG4gIGlmICggVGlsZSApIEltYWdlVGlsZS5fX3Byb3RvX18gPSBUaWxlO1xuICBJbWFnZVRpbGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggVGlsZSAmJiBUaWxlLnByb3RvdHlwZSApO1xuICBJbWFnZVRpbGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSW1hZ2VUaWxlO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgSW1hZ2VUaWxlLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiBkaXNwb3NlSW50ZXJuYWwgKCkge1xuICAgIGlmICh0aGlzLnN0YXRlID09IFRpbGVTdGF0ZS5MT0FESU5HKSB7XG4gICAgICB0aGlzLnVubGlzdGVuSW1hZ2VfKCk7XG4gICAgICB0aGlzLmltYWdlXyA9IGdldEJsYW5rSW1hZ2UoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaW50ZXJpbVRpbGUpIHtcbiAgICAgIHRoaXMuaW50ZXJpbVRpbGUuZGlzcG9zZSgpO1xuICAgIH1cbiAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkFCT1JUO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIFRpbGUucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIEhUTUwgaW1hZ2UgZWxlbWVudCBmb3IgdGhpcyB0aWxlIChtYXkgYmUgYSBDYW52YXMsIEltYWdlLCBvciBWaWRlbykuXG4gICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gSW1hZ2UuXG4gICAqIEBhcGlcbiAgICovXG4gIEltYWdlVGlsZS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiBnZXRJbWFnZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW1hZ2VfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgSW1hZ2VUaWxlLnByb3RvdHlwZS5nZXRLZXkgPSBmdW5jdGlvbiBnZXRLZXkgKCkge1xuICAgIHJldHVybiB0aGlzLnNyY187XG4gIH07XG5cbiAgLyoqXG4gICAqIFRyYWNrcyBsb2FkaW5nIG9yIHJlYWQgZXJyb3JzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgSW1hZ2VUaWxlLnByb3RvdHlwZS5oYW5kbGVJbWFnZUVycm9yXyA9IGZ1bmN0aW9uIGhhbmRsZUltYWdlRXJyb3JfICgpIHtcbiAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVSUk9SO1xuICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICB0aGlzLmltYWdlXyA9IGdldEJsYW5rSW1hZ2UoKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogVHJhY2tzIHN1Y2Nlc3NmdWwgaW1hZ2UgbG9hZC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIEltYWdlVGlsZS5wcm90b3R5cGUuaGFuZGxlSW1hZ2VMb2FkXyA9IGZ1bmN0aW9uIGhhbmRsZUltYWdlTG9hZF8gKCkge1xuICAgIHZhciBpbWFnZSA9IC8qKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudH0gKi8gKHRoaXMuaW1hZ2VfKTtcbiAgICBpZiAoaW1hZ2UubmF0dXJhbFdpZHRoICYmIGltYWdlLm5hdHVyYWxIZWlnaHQpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BREVEO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgIH1cbiAgICB0aGlzLnVubGlzdGVuSW1hZ2VfKCk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIEltYWdlVGlsZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIGxvYWQgKCkge1xuICAgIGlmICh0aGlzLnN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUikge1xuICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5JRExFO1xuICAgICAgdGhpcy5pbWFnZV8gPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGlmICh0aGlzLmNyb3NzT3JpZ2luXyAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLmltYWdlXy5jcm9zc09yaWdpbiA9IHRoaXMuY3Jvc3NPcmlnaW5fO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5zdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5MT0FESU5HO1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICB0aGlzLmltYWdlTGlzdGVuZXJLZXlzXyA9IFtcbiAgICAgICAgbGlzdGVuT25jZSh0aGlzLmltYWdlXywgRXZlbnRUeXBlLkVSUk9SLFxuICAgICAgICAgIHRoaXMuaGFuZGxlSW1hZ2VFcnJvcl8sIHRoaXMpLFxuICAgICAgICBsaXN0ZW5PbmNlKHRoaXMuaW1hZ2VfLCBFdmVudFR5cGUuTE9BRCxcbiAgICAgICAgICB0aGlzLmhhbmRsZUltYWdlTG9hZF8sIHRoaXMpXG4gICAgICBdO1xuICAgICAgdGhpcy50aWxlTG9hZEZ1bmN0aW9uXyh0aGlzLCB0aGlzLnNyY18pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGlzY2FyZHMgZXZlbnQgaGFuZGxlcnMgd2hpY2ggbGlzdGVuIGZvciBsb2FkIGNvbXBsZXRpb24gb3IgZXJyb3JzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgSW1hZ2VUaWxlLnByb3RvdHlwZS51bmxpc3RlbkltYWdlXyA9IGZ1bmN0aW9uIHVubGlzdGVuSW1hZ2VfICgpIHtcbiAgICB0aGlzLmltYWdlTGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgIHRoaXMuaW1hZ2VMaXN0ZW5lcktleXNfID0gbnVsbDtcbiAgfTtcblxuICByZXR1cm4gSW1hZ2VUaWxlO1xufShUaWxlKSk7XG5cblxuLyoqXG4gKiBHZXQgYSAxLXBpeGVsIGJsYW5rIGltYWdlLlxuICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IEJsYW5rIGltYWdlLlxuICovXG5mdW5jdGlvbiBnZXRCbGFua0ltYWdlKCkge1xuICB2YXIgY3R4ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKDEsIDEpO1xuICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwwLDAsMCknO1xuICBjdHguZmlsbFJlY3QoMCwgMCwgMSwgMSk7XG4gIHJldHVybiBjdHguY2FudmFzO1xufVxuXG5leHBvcnQgZGVmYXVsdCBJbWFnZVRpbGU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlVGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZWNvb3JkXG4gKi9cblxuXG4vKipcbiAqIEFuIGFycmF5IG9mIHRocmVlIG51bWJlcnMgcmVwcmVzZW50aW5nIHRoZSBsb2NhdGlvbiBvZiBhIHRpbGUgaW4gYSB0aWxlXG4gKiBncmlkLiBUaGUgb3JkZXIgaXMgYHpgLCBgeGAsIGFuZCBgeWAuIGB6YCBpcyB0aGUgem9vbSBsZXZlbC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBUaWxlQ29vcmRcbiAqIEBhcGlcbiAqL1xuXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHogWi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtUaWxlQ29vcmQ9fSBvcHRfdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge1RpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGUoeiwgeCwgeSwgb3B0X3RpbGVDb29yZCkge1xuICBpZiAob3B0X3RpbGVDb29yZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgb3B0X3RpbGVDb29yZFswXSA9IHo7XG4gICAgb3B0X3RpbGVDb29yZFsxXSA9IHg7XG4gICAgb3B0X3RpbGVDb29yZFsyXSA9IHk7XG4gICAgcmV0dXJuIG9wdF90aWxlQ29vcmQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFt6LCB4LCB5XTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHogWi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7c3RyaW5nfSBLZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRLZXlaWFkoeiwgeCwgeSkge1xuICByZXR1cm4geiArICcvJyArIHggKyAnLycgKyB5O1xufVxuXG5cbi8qKlxuICogR2V0IHRoZSBrZXkgZm9yIGEgdGlsZSBjb29yZC5cbiAqIEBwYXJhbSB7VGlsZUNvb3JkfSB0aWxlQ29vcmQgVGhlIHRpbGUgY29vcmQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEtleSh0aWxlQ29vcmQpIHtcbiAgcmV0dXJuIGdldEtleVpYWSh0aWxlQ29vcmRbMF0sIHRpbGVDb29yZFsxXSwgdGlsZUNvb3JkWzJdKTtcbn1cblxuXG4vKipcbiAqIEdldCBhIHRpbGUgY29vcmQgZ2l2ZW4gYSBrZXkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSB0aWxlIGNvb3JkIGtleS5cbiAqIEByZXR1cm4ge1RpbGVDb29yZH0gVGhlIHRpbGUgY29vcmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tS2V5KGtleSkge1xuICByZXR1cm4ga2V5LnNwbGl0KCcvJykubWFwKE51bWJlcik7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge1RpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEhhc2guXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNoKHRpbGVDb29yZCkge1xuICByZXR1cm4gKHRpbGVDb29yZFsxXSA8PCB0aWxlQ29vcmRbMF0pICsgdGlsZUNvb3JkWzJdO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkLlxuICogQHJldHVybiB7c3RyaW5nfSBRdWFkIGtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1YWRLZXkodGlsZUNvb3JkKSB7XG4gIHZhciB6ID0gdGlsZUNvb3JkWzBdO1xuICB2YXIgZGlnaXRzID0gbmV3IEFycmF5KHopO1xuICB2YXIgbWFzayA9IDEgPDwgKHogLSAxKTtcbiAgdmFyIGksIGNoYXJDb2RlO1xuICBmb3IgKGkgPSAwOyBpIDwgejsgKytpKSB7XG4gICAgLy8gNDggaXMgY2hhckNvZGUgZm9yIDAgLSAnMCcuY2hhckNvZGVBdCgwKVxuICAgIGNoYXJDb2RlID0gNDg7XG4gICAgaWYgKHRpbGVDb29yZFsxXSAmIG1hc2spIHtcbiAgICAgIGNoYXJDb2RlICs9IDE7XG4gICAgfVxuICAgIGlmICh0aWxlQ29vcmRbMl0gJiBtYXNrKSB7XG4gICAgICBjaGFyQ29kZSArPSAyO1xuICAgIH1cbiAgICBkaWdpdHNbaV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlKTtcbiAgICBtYXNrID4+PSAxO1xuICB9XG4gIHJldHVybiBkaWdpdHMuam9pbignJyk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge1RpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7IWltcG9ydChcIi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGlsZSBjb29yZGluYXRlIGlzIHdpdGhpbiBleHRlbnQgYW5kIHpvb20gbGV2ZWwgcmFuZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoaW5FeHRlbnRBbmRaKHRpbGVDb29yZCwgdGlsZUdyaWQpIHtcbiAgdmFyIHogPSB0aWxlQ29vcmRbMF07XG4gIHZhciB4ID0gdGlsZUNvb3JkWzFdO1xuICB2YXIgeSA9IHRpbGVDb29yZFsyXTtcblxuICBpZiAodGlsZUdyaWQuZ2V0TWluWm9vbSgpID4geiB8fCB6ID4gdGlsZUdyaWQuZ2V0TWF4Wm9vbSgpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBleHRlbnQgPSB0aWxlR3JpZC5nZXRFeHRlbnQoKTtcbiAgdmFyIHRpbGVSYW5nZTtcbiAgaWYgKCFleHRlbnQpIHtcbiAgICB0aWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRGdWxsVGlsZVJhbmdlKHopO1xuICB9IGVsc2Uge1xuICAgIHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6KTtcbiAgfVxuICBpZiAoIXRpbGVSYW5nZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0aWxlUmFuZ2UuY29udGFpbnNYWSh4LCB5KTtcbiAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD10aWxlY29vcmQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVDYWNoZVxuICovXG5pbXBvcnQgTFJVQ2FjaGUgZnJvbSAnLi9zdHJ1Y3RzL0xSVUNhY2hlLmpzJztcbmltcG9ydCB7ZnJvbUtleSwgZ2V0S2V5fSBmcm9tICcuL3RpbGVjb29yZC5qcyc7XG5cbnZhciBUaWxlQ2FjaGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChMUlVDYWNoZSkge1xuICBmdW5jdGlvbiBUaWxlQ2FjaGUob3B0X2hpZ2hXYXRlck1hcmspIHtcblxuICAgIExSVUNhY2hlLmNhbGwodGhpcywgb3B0X2hpZ2hXYXRlck1hcmspO1xuXG4gIH1cblxuICBpZiAoIExSVUNhY2hlICkgVGlsZUNhY2hlLl9fcHJvdG9fXyA9IExSVUNhY2hlO1xuICBUaWxlQ2FjaGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTFJVQ2FjaGUgJiYgTFJVQ2FjaGUucHJvdG90eXBlICk7XG4gIFRpbGVDYWNoZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUaWxlQ2FjaGU7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQ+fSB1c2VkVGlsZXMgVXNlZCB0aWxlcy5cbiAgICovXG4gIFRpbGVDYWNoZS5wcm90b3R5cGUuZXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiBleHBpcmVDYWNoZSAodXNlZFRpbGVzKSB7XG4gICAgd2hpbGUgKHRoaXMuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgdmFyIHRpbGUgPSB0aGlzLnBlZWtMYXN0KCk7XG4gICAgICB2YXIgektleSA9IHRpbGUudGlsZUNvb3JkWzBdLnRvU3RyaW5nKCk7XG4gICAgICBpZiAoektleSBpbiB1c2VkVGlsZXMgJiYgdXNlZFRpbGVzW3pLZXldLmNvbnRhaW5zKHRpbGUudGlsZUNvb3JkKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucG9wKCkuZGlzcG9zZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUHJ1bmUgYWxsIHRpbGVzIGZyb20gdGhlIGNhY2hlIHRoYXQgZG9uJ3QgaGF2ZSB0aGUgc2FtZSB6IGFzIHRoZSBuZXdlc3QgdGlsZS5cbiAgICovXG4gIFRpbGVDYWNoZS5wcm90b3R5cGUucHJ1bmVFeGNlcHROZXdlc3RaID0gZnVuY3Rpb24gcHJ1bmVFeGNlcHROZXdlc3RaICgpIHtcbiAgICBpZiAodGhpcy5nZXRDb3VudCgpID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBrZXkgPSB0aGlzLnBlZWtGaXJzdEtleSgpO1xuICAgIHZhciB0aWxlQ29vcmQgPSBmcm9tS2V5KGtleSk7XG4gICAgdmFyIHogPSB0aWxlQ29vcmRbMF07XG4gICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHRpbGUpIHtcbiAgICAgIGlmICh0aWxlLnRpbGVDb29yZFswXSAhPT0geikge1xuICAgICAgICB0aGlzLnJlbW92ZShnZXRLZXkodGlsZS50aWxlQ29vcmQpKTtcbiAgICAgICAgdGlsZS5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG4gIH07XG5cbiAgcmV0dXJuIFRpbGVDYWNoZTtcbn0oTFJVQ2FjaGUpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBUaWxlQ2FjaGU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVDYWNoZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVwcm9qXG4gKi9cbmltcG9ydCB7Y3JlYXRlQ2FudmFzQ29udGV4dDJEfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQge2NvbnRhaW5zQ29vcmRpbmF0ZSwgY3JlYXRlRW1wdHksIGV4dGVuZCwgZ2V0SGVpZ2h0LCBnZXRUb3BMZWZ0LCBnZXRXaWR0aH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHtzb2x2ZUxpbmVhclN5c3RlbX0gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7Z2V0UG9pbnRSZXNvbHV0aW9uLCB0cmFuc2Zvcm19IGZyb20gJy4vcHJvai5qcyc7XG5cblxuLyoqXG4gKiBDYWxjdWxhdGVzIGlkZWFsIHJlc29sdXRpb24gdG8gdXNlIGZyb20gdGhlIHNvdXJjZSBpbiBvcmRlciB0byBhY2hpZXZlXG4gKiBwaXhlbCBtYXBwaW5nIGFzIGNsb3NlIGFzIHBvc3NpYmxlIHRvIDE6MSBkdXJpbmcgcmVwcm9qZWN0aW9uLlxuICogVGhlIHJlc29sdXRpb24gaXMgY2FsY3VsYXRlZCByZWdhcmRsZXNzIG9mIHdoYXQgcmVzb2x1dGlvbnNcbiAqIGFyZSBhY3R1YWxseSBhdmFpbGFibGUgaW4gdGhlIGRhdGFzZXQgKFRpbGVHcmlkLCBJbWFnZSwgLi4uKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHRhcmdldFByb2ogVGFyZ2V0IHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSB0YXJnZXRDZW50ZXIgVGFyZ2V0IGNlbnRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRSZXNvbHV0aW9uIFRhcmdldCByZXNvbHV0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgYmVzdCByZXNvbHV0aW9uIHRvIHVzZS4gQ2FuIGJlICstSW5maW5pdHksIE5hTiBvciAwLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLFxuICB0YXJnZXRDZW50ZXIsIHRhcmdldFJlc29sdXRpb24pIHtcblxuICB2YXIgc291cmNlQ2VudGVyID0gdHJhbnNmb3JtKHRhcmdldENlbnRlciwgdGFyZ2V0UHJvaiwgc291cmNlUHJvaik7XG5cbiAgLy8gY2FsY3VsYXRlIHRoZSBpZGVhbCByZXNvbHV0aW9uIG9mIHRoZSBzb3VyY2UgZGF0YVxuICB2YXIgc291cmNlUmVzb2x1dGlvbiA9IGdldFBvaW50UmVzb2x1dGlvbih0YXJnZXRQcm9qLCB0YXJnZXRSZXNvbHV0aW9uLCB0YXJnZXRDZW50ZXIpO1xuXG4gIHZhciB0YXJnZXRNZXRlcnNQZXJVbml0ID0gdGFyZ2V0UHJvai5nZXRNZXRlcnNQZXJVbml0KCk7XG4gIGlmICh0YXJnZXRNZXRlcnNQZXJVbml0ICE9PSB1bmRlZmluZWQpIHtcbiAgICBzb3VyY2VSZXNvbHV0aW9uICo9IHRhcmdldE1ldGVyc1BlclVuaXQ7XG4gIH1cbiAgdmFyIHNvdXJjZU1ldGVyc1BlclVuaXQgPSBzb3VyY2VQcm9qLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgaWYgKHNvdXJjZU1ldGVyc1BlclVuaXQgIT09IHVuZGVmaW5lZCkge1xuICAgIHNvdXJjZVJlc29sdXRpb24gLz0gc291cmNlTWV0ZXJzUGVyVW5pdDtcbiAgfVxuXG4gIC8vIEJhc2VkIG9uIHRoZSBwcm9qZWN0aW9uIHByb3BlcnRpZXMsIHRoZSBwb2ludCByZXNvbHV0aW9uIGF0IHRoZSBzcGVjaWZpZWRcbiAgLy8gY29vcmRpbmF0ZXMgbWF5IGJlIHNsaWdodGx5IGRpZmZlcmVudC4gV2UgbmVlZCB0byByZXZlcnNlLWNvbXBlbnNhdGUgdGhpc1xuICAvLyBpbiBvcmRlciB0byBhY2hpZXZlIG9wdGltYWwgcmVzdWx0cy5cblxuICB2YXIgc291cmNlRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgaWYgKCFzb3VyY2VFeHRlbnQgfHwgY29udGFpbnNDb29yZGluYXRlKHNvdXJjZUV4dGVudCwgc291cmNlQ2VudGVyKSkge1xuICAgIHZhciBjb21wZW5zYXRpb25GYWN0b3IgPSBnZXRQb2ludFJlc29sdXRpb24oc291cmNlUHJvaiwgc291cmNlUmVzb2x1dGlvbiwgc291cmNlQ2VudGVyKSAvXG4gICAgICAgIHNvdXJjZVJlc29sdXRpb247XG4gICAgaWYgKGlzRmluaXRlKGNvbXBlbnNhdGlvbkZhY3RvcikgJiYgY29tcGVuc2F0aW9uRmFjdG9yID4gMCkge1xuICAgICAgc291cmNlUmVzb2x1dGlvbiAvPSBjb21wZW5zYXRpb25GYWN0b3I7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHNvdXJjZVJlc29sdXRpb247XG59XG5cblxuLyoqXG4gKiBFbmxhcmdlIHRoZSBjbGlwcGluZyB0cmlhbmdsZSBwb2ludCBieSAxIHBpeGVsIHRvIGVuc3VyZSB0aGUgZWRnZXMgb3ZlcmxhcFxuICogaW4gb3JkZXIgdG8gbWFzayBnYXBzIGNhdXNlZCBieSBhbnRpYWxpYXNpbmcuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGNlbnRyb2lkWCBDZW50cm9pZCBvZiB0aGUgdHJpYW5nbGUgKHggY29vcmRpbmF0ZSBpbiBwaXhlbHMpLlxuICogQHBhcmFtIHtudW1iZXJ9IGNlbnRyb2lkWSBDZW50cm9pZCBvZiB0aGUgdHJpYW5nbGUgKHkgY29vcmRpbmF0ZSBpbiBwaXhlbHMpLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWCBjb29yZGluYXRlIG9mIHRoZSBwb2ludCAoaW4gcGl4ZWxzKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkgY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnQgKGluIHBpeGVscykuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gTmV3IHBvaW50IDEgcHggZmFydGhlciBmcm9tIHRoZSBjZW50cm9pZC5cbiAqL1xuZnVuY3Rpb24gZW5sYXJnZUNsaXBQb2ludChjZW50cm9pZFgsIGNlbnRyb2lkWSwgeCwgeSkge1xuICB2YXIgZFggPSB4IC0gY2VudHJvaWRYO1xuICB2YXIgZFkgPSB5IC0gY2VudHJvaWRZO1xuICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZFggKiBkWCArIGRZICogZFkpO1xuICByZXR1cm4gW01hdGgucm91bmQoeCArIGRYIC8gZGlzdGFuY2UpLCBNYXRoLnJvdW5kKHkgKyBkWSAvIGRpc3RhbmNlKV07XG59XG5cblxuLyoqXG4gKiBSZW5kZXJzIHRoZSBzb3VyY2UgZGF0YSBpbnRvIG5ldyBjYW52YXMgYmFzZWQgb24gdGhlIHRyaWFuZ3VsYXRpb24uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFdpZHRoIG9mIHRoZSBjYW52YXMuXG4gKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IEhlaWdodCBvZiB0aGUgY2FudmFzLlxuICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gKiBAcGFyYW0ge251bWJlcn0gc291cmNlUmVzb2x1dGlvbiBTb3VyY2UgcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBzb3VyY2VFeHRlbnQgRXh0ZW50IG9mIHRoZSBkYXRhIHNvdXJjZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRSZXNvbHV0aW9uIFRhcmdldCByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IHRhcmdldEV4dGVudCBUYXJnZXQgZXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3JlcHJvai9Ucmlhbmd1bGF0aW9uLmpzXCIpLmRlZmF1bHR9IHRyaWFuZ3VsYXRpb25cbiAqIENhbGN1bGF0ZWQgdHJpYW5ndWxhdGlvbi5cbiAqIEBwYXJhbSB7QXJyYXk8e2V4dGVudDogaW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50LFxuICogICAgICAgICAgICAgICAgIGltYWdlOiAoSFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50KX0+fSBzb3VyY2VzXG4gKiBBcnJheSBvZiBzb3VyY2VzLlxuICogQHBhcmFtIHtudW1iZXJ9IGd1dHRlciBHdXR0ZXIgb2YgdGhlIHNvdXJjZXMuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfcmVuZGVyRWRnZXMgUmVuZGVyIHJlcHJvamVjdGlvbiBlZGdlcy5cbiAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fSBDYW52YXMgd2l0aCByZXByb2plY3RlZCBkYXRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyKHdpZHRoLCBoZWlnaHQsIHBpeGVsUmF0aW8sXG4gIHNvdXJjZVJlc29sdXRpb24sIHNvdXJjZUV4dGVudCwgdGFyZ2V0UmVzb2x1dGlvbiwgdGFyZ2V0RXh0ZW50LFxuICB0cmlhbmd1bGF0aW9uLCBzb3VyY2VzLCBndXR0ZXIsIG9wdF9yZW5kZXJFZGdlcykge1xuXG4gIHZhciBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIHdpZHRoKSxcbiAgICBNYXRoLnJvdW5kKHBpeGVsUmF0aW8gKiBoZWlnaHQpKTtcblxuICBpZiAoc291cmNlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gY29udGV4dC5jYW52YXM7XG4gIH1cblxuICBjb250ZXh0LnNjYWxlKHBpeGVsUmF0aW8sIHBpeGVsUmF0aW8pO1xuXG4gIHZhciBzb3VyY2VEYXRhRXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKHNyYywgaSwgYXJyKSB7XG4gICAgZXh0ZW5kKHNvdXJjZURhdGFFeHRlbnQsIHNyYy5leHRlbnQpO1xuICB9KTtcblxuICB2YXIgY2FudmFzV2lkdGhJblVuaXRzID0gZ2V0V2lkdGgoc291cmNlRGF0YUV4dGVudCk7XG4gIHZhciBjYW52YXNIZWlnaHRJblVuaXRzID0gZ2V0SGVpZ2h0KHNvdXJjZURhdGFFeHRlbnQpO1xuICB2YXIgc3RpdGNoQ29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRChcbiAgICBNYXRoLnJvdW5kKHBpeGVsUmF0aW8gKiBjYW52YXNXaWR0aEluVW5pdHMgLyBzb3VyY2VSZXNvbHV0aW9uKSxcbiAgICBNYXRoLnJvdW5kKHBpeGVsUmF0aW8gKiBjYW52YXNIZWlnaHRJblVuaXRzIC8gc291cmNlUmVzb2x1dGlvbikpO1xuXG4gIHZhciBzdGl0Y2hTY2FsZSA9IHBpeGVsUmF0aW8gLyBzb3VyY2VSZXNvbHV0aW9uO1xuXG4gIHNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbihzcmMsIGksIGFycikge1xuICAgIHZhciB4UG9zID0gc3JjLmV4dGVudFswXSAtIHNvdXJjZURhdGFFeHRlbnRbMF07XG4gICAgdmFyIHlQb3MgPSAtKHNyYy5leHRlbnRbM10gLSBzb3VyY2VEYXRhRXh0ZW50WzNdKTtcbiAgICB2YXIgc3JjV2lkdGggPSBnZXRXaWR0aChzcmMuZXh0ZW50KTtcbiAgICB2YXIgc3JjSGVpZ2h0ID0gZ2V0SGVpZ2h0KHNyYy5leHRlbnQpO1xuXG4gICAgc3RpdGNoQ29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICBzcmMuaW1hZ2UsXG4gICAgICBndXR0ZXIsIGd1dHRlcixcbiAgICAgIHNyYy5pbWFnZS53aWR0aCAtIDIgKiBndXR0ZXIsIHNyYy5pbWFnZS5oZWlnaHQgLSAyICogZ3V0dGVyLFxuICAgICAgeFBvcyAqIHN0aXRjaFNjYWxlLCB5UG9zICogc3RpdGNoU2NhbGUsXG4gICAgICBzcmNXaWR0aCAqIHN0aXRjaFNjYWxlLCBzcmNIZWlnaHQgKiBzdGl0Y2hTY2FsZSk7XG4gIH0pO1xuXG4gIHZhciB0YXJnZXRUb3BMZWZ0ID0gZ2V0VG9wTGVmdCh0YXJnZXRFeHRlbnQpO1xuXG4gIHRyaWFuZ3VsYXRpb24uZ2V0VHJpYW5nbGVzKCkuZm9yRWFjaChmdW5jdGlvbih0cmlhbmdsZSwgaSwgYXJyKSB7XG4gICAgLyogQ2FsY3VsYXRlIGFmZmluZSB0cmFuc2Zvcm0gKHNyYyAtPiBkc3QpXG4gICAgICogUmVzdWx0aW5nIG1hdHJpeCBjYW4gYmUgdXNlZCB0byB0cmFuc2Zvcm0gY29vcmRpbmF0ZVxuICAgICAqIGZyb20gYHNvdXJjZVByb2plY3Rpb25gIHRvIGRlc3RpbmF0aW9uIHBpeGVscy5cbiAgICAgKlxuICAgICAqIFRvIG9wdGltaXplIG51bWJlciBvZiBjb250ZXh0IGNhbGxzIGFuZCBpbmNyZWFzZSBudW1lcmljYWwgc3RhYmlsaXR5LFxuICAgICAqIHdlIGFsc28gZG8gdGhlIGZvbGxvd2luZyBvcGVyYXRpb25zOlxuICAgICAqIHRyYW5zKC10b3BMZWZ0RXh0ZW50Q29ybmVyKSwgc2NhbGUoMSAvIHRhcmdldFJlc29sdXRpb24pLCBzY2FsZSgxLCAtMSlcbiAgICAgKiBoZXJlIGJlZm9yZSBzb2x2aW5nIHRoZSBsaW5lYXIgc3lzdGVtIHNvIFt1aSwgdmldIGFyZSBwaXhlbCBjb29yZGluYXRlcy5cbiAgICAgKlxuICAgICAqIFNyYyBwb2ludHM6IHhpLCB5aVxuICAgICAqIERzdCBwb2ludHM6IHVpLCB2aVxuICAgICAqIEFmZmluZSBjb2VmZmljaWVudHM6IGFpalxuICAgICAqXG4gICAgICogfCB4MCB5MCAxICAwICAwIDAgfCAgIHxhMDB8ICAgfHUwfFxuICAgICAqIHwgeDEgeTEgMSAgMCAgMCAwIHwgICB8YTAxfCAgIHx1MXxcbiAgICAgKiB8IHgyIHkyIDEgIDAgIDAgMCB8IHggfGEwMnwgPSB8dTJ8XG4gICAgICogfCAgMCAgMCAwIHgwIHkwIDEgfCAgIHxhMTB8ICAgfHYwfFxuICAgICAqIHwgIDAgIDAgMCB4MSB5MSAxIHwgICB8YTExfCAgIHx2MXxcbiAgICAgKiB8ICAwICAwIDAgeDIgeTIgMSB8ICAgfGExMnwgICB8djJ8XG4gICAgICovXG4gICAgdmFyIHNvdXJjZSA9IHRyaWFuZ2xlLnNvdXJjZTtcbiAgICB2YXIgdGFyZ2V0ID0gdHJpYW5nbGUudGFyZ2V0O1xuICAgIHZhciB4MCA9IHNvdXJjZVswXVswXSwgeTAgPSBzb3VyY2VbMF1bMV07XG4gICAgdmFyIHgxID0gc291cmNlWzFdWzBdLCB5MSA9IHNvdXJjZVsxXVsxXTtcbiAgICB2YXIgeDIgPSBzb3VyY2VbMl1bMF0sIHkyID0gc291cmNlWzJdWzFdO1xuICAgIHZhciB1MCA9ICh0YXJnZXRbMF1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgdmFyIHYwID0gLSh0YXJnZXRbMF1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgdmFyIHUxID0gKHRhcmdldFsxXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICB2YXIgdjEgPSAtKHRhcmdldFsxXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICB2YXIgdTIgPSAodGFyZ2V0WzJdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgIHZhciB2MiA9IC0odGFyZ2V0WzJdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuXG4gICAgLy8gU2hpZnQgYWxsIHRoZSBzb3VyY2UgcG9pbnRzIHRvIGltcHJvdmUgbnVtZXJpY2FsIHN0YWJpbGl0eVxuICAgIC8vIG9mIGFsbCB0aGUgc3Vic2VxdWVudCBjYWxjdWxhdGlvbnMuIFRoZSBbeDAsIHkwXSBpcyB1c2VkIGhlcmUuXG4gICAgLy8gVGhpcyBpcyBhbHNvIHVzZWQgdG8gc2ltcGxpZnkgdGhlIGxpbmVhciBzeXN0ZW0uXG4gICAgdmFyIHNvdXJjZU51bWVyaWNhbFNoaWZ0WCA9IHgwO1xuICAgIHZhciBzb3VyY2VOdW1lcmljYWxTaGlmdFkgPSB5MDtcbiAgICB4MCA9IDA7XG4gICAgeTAgPSAwO1xuICAgIHgxIC09IHNvdXJjZU51bWVyaWNhbFNoaWZ0WDtcbiAgICB5MSAtPSBzb3VyY2VOdW1lcmljYWxTaGlmdFk7XG4gICAgeDIgLT0gc291cmNlTnVtZXJpY2FsU2hpZnRYO1xuICAgIHkyIC09IHNvdXJjZU51bWVyaWNhbFNoaWZ0WTtcblxuICAgIHZhciBhdWdtZW50ZWRNYXRyaXggPSBbXG4gICAgICBbeDEsIHkxLCAwLCAwLCB1MSAtIHUwXSxcbiAgICAgIFt4MiwgeTIsIDAsIDAsIHUyIC0gdTBdLFxuICAgICAgWzAsIDAsIHgxLCB5MSwgdjEgLSB2MF0sXG4gICAgICBbMCwgMCwgeDIsIHkyLCB2MiAtIHYwXVxuICAgIF07XG4gICAgdmFyIGFmZmluZUNvZWZzID0gc29sdmVMaW5lYXJTeXN0ZW0oYXVnbWVudGVkTWF0cml4KTtcbiAgICBpZiAoIWFmZmluZUNvZWZzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29udGV4dC5zYXZlKCk7XG4gICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICB2YXIgY2VudHJvaWRYID0gKHUwICsgdTEgKyB1MikgLyAzO1xuICAgIHZhciBjZW50cm9pZFkgPSAodjAgKyB2MSArIHYyKSAvIDM7XG4gICAgdmFyIHAwID0gZW5sYXJnZUNsaXBQb2ludChjZW50cm9pZFgsIGNlbnRyb2lkWSwgdTAsIHYwKTtcbiAgICB2YXIgcDEgPSBlbmxhcmdlQ2xpcFBvaW50KGNlbnRyb2lkWCwgY2VudHJvaWRZLCB1MSwgdjEpO1xuICAgIHZhciBwMiA9IGVubGFyZ2VDbGlwUG9pbnQoY2VudHJvaWRYLCBjZW50cm9pZFksIHUyLCB2Mik7XG5cbiAgICBjb250ZXh0Lm1vdmVUbyhwMVswXSwgcDFbMV0pO1xuICAgIGNvbnRleHQubGluZVRvKHAwWzBdLCBwMFsxXSk7XG4gICAgY29udGV4dC5saW5lVG8ocDJbMF0sIHAyWzFdKTtcbiAgICBjb250ZXh0LmNsaXAoKTtcblxuICAgIGNvbnRleHQudHJhbnNmb3JtKFxuICAgICAgYWZmaW5lQ29lZnNbMF0sIGFmZmluZUNvZWZzWzJdLCBhZmZpbmVDb2Vmc1sxXSwgYWZmaW5lQ29lZnNbM10sIHUwLCB2MCk7XG5cbiAgICBjb250ZXh0LnRyYW5zbGF0ZShzb3VyY2VEYXRhRXh0ZW50WzBdIC0gc291cmNlTnVtZXJpY2FsU2hpZnRYLFxuICAgICAgc291cmNlRGF0YUV4dGVudFszXSAtIHNvdXJjZU51bWVyaWNhbFNoaWZ0WSk7XG5cbiAgICBjb250ZXh0LnNjYWxlKHNvdXJjZVJlc29sdXRpb24gLyBwaXhlbFJhdGlvLFxuICAgICAgLXNvdXJjZVJlc29sdXRpb24gLyBwaXhlbFJhdGlvKTtcblxuICAgIGNvbnRleHQuZHJhd0ltYWdlKHN0aXRjaENvbnRleHQuY2FudmFzLCAwLCAwKTtcbiAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgfSk7XG5cbiAgaWYgKG9wdF9yZW5kZXJFZGdlcykge1xuICAgIGNvbnRleHQuc2F2ZSgpO1xuXG4gICAgY29udGV4dC5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgY29udGV4dC5saW5lV2lkdGggPSAxO1xuXG4gICAgdHJpYW5ndWxhdGlvbi5nZXRUcmlhbmdsZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICAgIHZhciB0YXJnZXQgPSB0cmlhbmdsZS50YXJnZXQ7XG4gICAgICB2YXIgdTAgPSAodGFyZ2V0WzBdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgdmFyIHYwID0gLSh0YXJnZXRbMF1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICB2YXIgdTEgPSAodGFyZ2V0WzFdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgdmFyIHYxID0gLSh0YXJnZXRbMV1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICB2YXIgdTIgPSAodGFyZ2V0WzJdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgdmFyIHYyID0gLSh0YXJnZXRbMl1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb247XG5cbiAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICBjb250ZXh0Lm1vdmVUbyh1MSwgdjEpO1xuICAgICAgY29udGV4dC5saW5lVG8odTAsIHYwKTtcbiAgICAgIGNvbnRleHQubGluZVRvKHUyLCB2Mik7XG4gICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICB9KTtcblxuICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICB9XG4gIHJldHVybiBjb250ZXh0LmNhbnZhcztcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVwcm9qLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2ovVHJpYW5ndWxhdGlvblxuICovXG5pbXBvcnQge2JvdW5kaW5nRXh0ZW50LCBjcmVhdGVFbXB0eSwgZXh0ZW5kQ29vcmRpbmF0ZSwgZ2V0Qm90dG9tTGVmdCwgZ2V0Qm90dG9tUmlnaHQsXG4gIGdldFRvcExlZnQsIGdldFRvcFJpZ2h0LCBnZXRXaWR0aCwgaW50ZXJzZWN0c30gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7bW9kdWxvfSBmcm9tICcuLi9tYXRoLmpzJztcbmltcG9ydCB7Z2V0VHJhbnNmb3JtfSBmcm9tICcuLi9wcm9qLmpzJztcblxuXG4vKipcbiAqIFNpbmdsZSB0cmlhbmdsZTsgY29uc2lzdHMgb2YgMyBzb3VyY2UgcG9pbnRzIGFuZCAzIHRhcmdldCBwb2ludHMuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUcmlhbmdsZVxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBzb3VyY2VcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gdGFyZ2V0XG4gKi9cblxuXG4vKipcbiAqIE1heGltdW0gbnVtYmVyIG9mIHN1YmRpdmlzaW9uIHN0ZXBzIGR1cmluZyByYXN0ZXIgcmVwcm9qZWN0aW9uIHRyaWFuZ3VsYXRpb24uXG4gKiBQcmV2ZW50cyBoaWdoIG1lbW9yeSB1c2FnZSBhbmQgbGFyZ2UgbnVtYmVyIG9mIHByb2o0IGNhbGxzIChmb3IgY2VydGFpblxuICogdHJhbnNmb3JtYXRpb25zIGFuZCBhcmVhcykuIEF0IG1vc3QgYDIqKDJedGhpcylgIHRyaWFuZ2xlcyBhcmUgY3JlYXRlZCBmb3JcbiAqIGVhY2ggdHJpYW5ndWxhdGVkIGV4dGVudCAodGlsZS9pbWFnZSkuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG52YXIgTUFYX1NVQkRJVklTSU9OID0gMTA7XG5cblxuLyoqXG4gKiBNYXhpbXVtIGFsbG93ZWQgc2l6ZSBvZiB0cmlhbmdsZSByZWxhdGl2ZSB0byB3b3JsZCB3aWR0aC4gV2hlbiB0cmFuc2Zvcm1pbmdcbiAqIGNvcm5lcnMgb2Ygd29ybGQgZXh0ZW50IGJldHdlZW4gY2VydGFpbiBwcm9qZWN0aW9ucywgdGhlIHJlc3VsdGluZ1xuICogdHJpYW5ndWxhdGlvbiBzZWVtcyB0byBoYXZlIHplcm8gZXJyb3IgYW5kIG5vIHN1YmRpdmlzaW9uIGlzIHBlcmZvcm1lZC4gSWZcbiAqIHRoZSB0cmlhbmdsZSB3aWR0aCBpcyBtb3JlIHRoYW4gdGhpcyAocmVsYXRpdmUgdG8gd29ybGQgd2lkdGg7IDAtMSksXG4gKiBzdWJkaXZpc29uIGlzIGZvcmNlZCAodXAgdG8gYE1BWF9TVUJESVZJU0lPTmApLiBEZWZhdWx0IGlzIGAwLjI1YC5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBNQVhfVFJJQU5HTEVfV0lEVEggPSAwLjI1O1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ2xhc3MgY29udGFpbmluZyB0cmlhbmd1bGF0aW9uIG9mIHRoZSBnaXZlbiB0YXJnZXQgZXh0ZW50LlxuICogVXNlZCBmb3IgZGV0ZXJtaW5pbmcgc291cmNlIGRhdGEgYW5kIHRoZSByZXByb2plY3Rpb24gaXRzZWxmLlxuICovXG52YXIgVHJpYW5ndWxhdGlvbiA9IGZ1bmN0aW9uIFRyaWFuZ3VsYXRpb24oc291cmNlUHJvaiwgdGFyZ2V0UHJvaiwgdGFyZ2V0RXh0ZW50LCBtYXhTb3VyY2VFeHRlbnQsIGVycm9yVGhyZXNob2xkKSB7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuc291cmNlUHJval8gPSBzb3VyY2VQcm9qO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLnRhcmdldFByb2pfID0gdGFyZ2V0UHJvajtcblxuICAvKiogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSAqL1xuICB2YXIgdHJhbnNmb3JtSW52Q2FjaGUgPSB7fTtcbiAgdmFyIHRyYW5zZm9ybUludiA9IGdldFRyYW5zZm9ybSh0aGlzLnRhcmdldFByb2pfLCB0aGlzLnNvdXJjZVByb2pfKTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGMgQSBjb29yZGluYXRlLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLnRyYW5zZm9ybUludl8gPSBmdW5jdGlvbihjKSB7XG4gICAgdmFyIGtleSA9IGNbMF0gKyAnLycgKyBjWzFdO1xuICAgIGlmICghdHJhbnNmb3JtSW52Q2FjaGVba2V5XSkge1xuICAgICAgdHJhbnNmb3JtSW52Q2FjaGVba2V5XSA9IHRyYW5zZm9ybUludihjKTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybUludkNhY2hlW2tleV07XG4gIH07XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5tYXhTb3VyY2VFeHRlbnRfID0gbWF4U291cmNlRXh0ZW50O1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5lcnJvclRocmVzaG9sZFNxdWFyZWRfID0gZXJyb3JUaHJlc2hvbGQgKiBlcnJvclRocmVzaG9sZDtcblxuICAvKipcbiAgICogQHR5cGUge0FycmF5PFRyaWFuZ2xlPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMudHJpYW5nbGVzXyA9IFtdO1xuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgdGhhdCB0aGUgdHJpYW5ndWxhdGlvbiBjcm9zc2VzIGVkZ2Ugb2YgdGhlIHNvdXJjZSBwcm9qZWN0aW9uLlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMud3JhcHNYSW5Tb3VyY2VfID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5jYW5XcmFwWEluU291cmNlXyA9IHRoaXMuc291cmNlUHJval8uY2FuV3JhcFgoKSAmJlxuICAgICAgISFtYXhTb3VyY2VFeHRlbnQgJiZcbiAgICAgICEhdGhpcy5zb3VyY2VQcm9qXy5nZXRFeHRlbnQoKSAmJlxuICAgICAgKGdldFdpZHRoKG1heFNvdXJjZUV4dGVudCkgPT0gZ2V0V2lkdGgodGhpcy5zb3VyY2VQcm9qXy5nZXRFeHRlbnQoKSkpO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7P251bWJlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuc291cmNlV29ybGRXaWR0aF8gPSB0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpID9cbiAgICBnZXRXaWR0aCh0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpKSA6IG51bGw7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHs/bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy50YXJnZXRXb3JsZFdpZHRoXyA9IHRoaXMudGFyZ2V0UHJval8uZ2V0RXh0ZW50KCkgP1xuICAgIGdldFdpZHRoKHRoaXMudGFyZ2V0UHJval8uZ2V0RXh0ZW50KCkpIDogbnVsbDtcblxuICB2YXIgZGVzdGluYXRpb25Ub3BMZWZ0ID0gZ2V0VG9wTGVmdCh0YXJnZXRFeHRlbnQpO1xuICB2YXIgZGVzdGluYXRpb25Ub3BSaWdodCA9IGdldFRvcFJpZ2h0KHRhcmdldEV4dGVudCk7XG4gIHZhciBkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0ID0gZ2V0Qm90dG9tUmlnaHQodGFyZ2V0RXh0ZW50KTtcbiAgdmFyIGRlc3RpbmF0aW9uQm90dG9tTGVmdCA9IGdldEJvdHRvbUxlZnQodGFyZ2V0RXh0ZW50KTtcbiAgdmFyIHNvdXJjZVRvcExlZnQgPSB0aGlzLnRyYW5zZm9ybUludl8oZGVzdGluYXRpb25Ub3BMZWZ0KTtcbiAgdmFyIHNvdXJjZVRvcFJpZ2h0ID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRlc3RpbmF0aW9uVG9wUmlnaHQpO1xuICB2YXIgc291cmNlQm90dG9tUmlnaHQgPSB0aGlzLnRyYW5zZm9ybUludl8oZGVzdGluYXRpb25Cb3R0b21SaWdodCk7XG4gIHZhciBzb3VyY2VCb3R0b21MZWZ0ID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRlc3RpbmF0aW9uQm90dG9tTGVmdCk7XG5cbiAgdGhpcy5hZGRRdWFkXyhcbiAgICBkZXN0aW5hdGlvblRvcExlZnQsIGRlc3RpbmF0aW9uVG9wUmlnaHQsXG4gICAgZGVzdGluYXRpb25Cb3R0b21SaWdodCwgZGVzdGluYXRpb25Cb3R0b21MZWZ0LFxuICAgIHNvdXJjZVRvcExlZnQsIHNvdXJjZVRvcFJpZ2h0LCBzb3VyY2VCb3R0b21SaWdodCwgc291cmNlQm90dG9tTGVmdCxcbiAgICBNQVhfU1VCRElWSVNJT04pO1xuXG4gIGlmICh0aGlzLndyYXBzWEluU291cmNlXykge1xuICAgIHZhciBsZWZ0Qm91bmQgPSBJbmZpbml0eTtcbiAgICB0aGlzLnRyaWFuZ2xlc18uZm9yRWFjaChmdW5jdGlvbih0cmlhbmdsZSwgaSwgYXJyKSB7XG4gICAgICBsZWZ0Qm91bmQgPSBNYXRoLm1pbihsZWZ0Qm91bmQsXG4gICAgICAgIHRyaWFuZ2xlLnNvdXJjZVswXVswXSwgdHJpYW5nbGUuc291cmNlWzFdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMl1bMF0pO1xuICAgIH0pO1xuXG4gICAgLy8gU2hpZnQgdHJpYW5nbGVzIHRvIGJlIGFzIGNsb3NlIHRvIGBsZWZ0Qm91bmRgIGFzIHBvc3NpYmxlXG4gICAgLy8gKGlmIHRoZSBkaXN0YW5jZSBpcyBtb3JlIHRoYW4gYHdvcmxkV2lkdGggLyAyYCBpdCBjYW4gYmUgY2xvc2VyLlxuICAgIHRoaXMudHJpYW5nbGVzXy5mb3JFYWNoKGZ1bmN0aW9uKHRyaWFuZ2xlKSB7XG4gICAgICBpZiAoTWF0aC5tYXgodHJpYW5nbGUuc291cmNlWzBdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMV1bMF0sXG4gICAgICAgIHRyaWFuZ2xlLnNvdXJjZVsyXVswXSkgLSBsZWZ0Qm91bmQgPiB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfIC8gMikge1xuICAgICAgICB2YXIgbmV3VHJpYW5nbGUgPSBbW3RyaWFuZ2xlLnNvdXJjZVswXVswXSwgdHJpYW5nbGUuc291cmNlWzBdWzFdXSxcbiAgICAgICAgICBbdHJpYW5nbGUuc291cmNlWzFdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMV1bMV1dLFxuICAgICAgICAgIFt0cmlhbmdsZS5zb3VyY2VbMl1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsyXVsxXV1dO1xuICAgICAgICBpZiAoKG5ld1RyaWFuZ2xlWzBdWzBdIC0gbGVmdEJvdW5kKSA+IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgbmV3VHJpYW5nbGVbMF1bMF0gLT0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXztcbiAgICAgICAgfVxuICAgICAgICBpZiAoKG5ld1RyaWFuZ2xlWzFdWzBdIC0gbGVmdEJvdW5kKSA+IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgbmV3VHJpYW5nbGVbMV1bMF0gLT0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXztcbiAgICAgICAgfVxuICAgICAgICBpZiAoKG5ld1RyaWFuZ2xlWzJdWzBdIC0gbGVmdEJvdW5kKSA+IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgbmV3VHJpYW5nbGVbMl1bMF0gLT0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJhcmVseSAoaWYgdGhlIGV4dGVudCBjb250YWlucyBib3RoIHRoZSBkYXRlbGluZSBhbmQgcHJpbWUgbWVyaWRpYW4pXG4gICAgICAgIC8vIHRoZSBzaGlmdCBjYW4gaW4gdHVybiBicmVhayBzb21lIHRyaWFuZ2xlcy5cbiAgICAgICAgLy8gRGV0ZWN0IHRoaXMgaGVyZSBhbmQgZG9uJ3Qgc2hpZnQgaW4gc3VjaCBjYXNlcy5cbiAgICAgICAgdmFyIG1pblggPSBNYXRoLm1pbihcbiAgICAgICAgICBuZXdUcmlhbmdsZVswXVswXSwgbmV3VHJpYW5nbGVbMV1bMF0sIG5ld1RyaWFuZ2xlWzJdWzBdKTtcbiAgICAgICAgdmFyIG1heFggPSBNYXRoLm1heChcbiAgICAgICAgICBuZXdUcmlhbmdsZVswXVswXSwgbmV3VHJpYW5nbGVbMV1bMF0sIG5ld1RyaWFuZ2xlWzJdWzBdKTtcbiAgICAgICAgaWYgKChtYXhYIC0gbWluWCkgPCB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfIC8gMikge1xuICAgICAgICAgIHRyaWFuZ2xlLnNvdXJjZSA9IG5ld1RyaWFuZ2xlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfS5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIHRyYW5zZm9ybUludkNhY2hlID0ge307XG59O1xuXG4vKipcbiAqIEFkZHMgdHJpYW5nbGUgdG8gdGhlIHRyaWFuZ3VsYXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYSBUaGUgdGFyZ2V0IGEgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBiIFRoZSB0YXJnZXQgYiBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGMgVGhlIHRhcmdldCBjIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYVNyYyBUaGUgc291cmNlIGEgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBiU3JjIFRoZSBzb3VyY2UgYiBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNTcmMgVGhlIHNvdXJjZSBjIGNvb3JkaW5hdGUuXG4gKiBAcHJpdmF0ZVxuICovXG5Ucmlhbmd1bGF0aW9uLnByb3RvdHlwZS5hZGRUcmlhbmdsZV8gPSBmdW5jdGlvbiBhZGRUcmlhbmdsZV8gKGEsIGIsIGMsIGFTcmMsIGJTcmMsIGNTcmMpIHtcbiAgdGhpcy50cmlhbmdsZXNfLnB1c2goe1xuICAgIHNvdXJjZTogW2FTcmMsIGJTcmMsIGNTcmNdLFxuICAgIHRhcmdldDogW2EsIGIsIGNdXG4gIH0pO1xufTtcblxuLyoqXG4gKiBBZGRzIHF1YWQgKHBvaW50cyBpbiBjbG9jay13aXNlIG9yZGVyKSB0byB0aGUgdHJpYW5ndWxhdGlvblxuICogKGFuZCByZXByb2plY3RzIHRoZSB2ZXJ0aWNlcykgaWYgdmFsaWQuXG4gKiBQZXJmb3JtcyBxdWFkIHN1YmRpdmlzaW9uIGlmIG5lZWRlZCB0byBpbmNyZWFzZSBwcmVjaXNpb24uXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGEgVGhlIHRhcmdldCBhIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYiBUaGUgdGFyZ2V0IGIgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjIFRoZSB0YXJnZXQgYyBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGQgVGhlIHRhcmdldCBkIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYVNyYyBUaGUgc291cmNlIGEgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBiU3JjIFRoZSBzb3VyY2UgYiBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNTcmMgVGhlIHNvdXJjZSBjIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZFNyYyBUaGUgc291cmNlIGQgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhTdWJkaXZpc2lvbiBNYXhpbWFsIGFsbG93ZWQgc3ViZGl2aXNpb24gb2YgdGhlIHF1YWQuXG4gKiBAcHJpdmF0ZVxuICovXG5Ucmlhbmd1bGF0aW9uLnByb3RvdHlwZS5hZGRRdWFkXyA9IGZ1bmN0aW9uIGFkZFF1YWRfIChhLCBiLCBjLCBkLCBhU3JjLCBiU3JjLCBjU3JjLCBkU3JjLCBtYXhTdWJkaXZpc2lvbikge1xuXG4gIHZhciBzb3VyY2VRdWFkRXh0ZW50ID0gYm91bmRpbmdFeHRlbnQoW2FTcmMsIGJTcmMsIGNTcmMsIGRTcmNdKTtcbiAgdmFyIHNvdXJjZUNvdmVyYWdlWCA9IHRoaXMuc291cmNlV29ybGRXaWR0aF8gP1xuICAgIGdldFdpZHRoKHNvdXJjZVF1YWRFeHRlbnQpIC8gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyA6IG51bGw7XG4gIHZhciBzb3VyY2VXb3JsZFdpZHRoID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLnNvdXJjZVdvcmxkV2lkdGhfKTtcblxuICAvLyB3aGVuIHRoZSBxdWFkIGlzIHdyYXBwZWQgaW4gdGhlIHNvdXJjZSBwcm9qZWN0aW9uXG4gIC8vIGl0IGNvdmVycyBtb3N0IG9mIHRoZSBwcm9qZWN0aW9uIGV4dGVudCwgYnV0IG5vdCBmdWxseVxuICB2YXIgd3JhcHNYID0gdGhpcy5zb3VyY2VQcm9qXy5jYW5XcmFwWCgpICYmXG4gICAgICAgICAgICAgICBzb3VyY2VDb3ZlcmFnZVggPiAwLjUgJiYgc291cmNlQ292ZXJhZ2VYIDwgMTtcblxuICB2YXIgbmVlZHNTdWJkaXZpc2lvbiA9IGZhbHNlO1xuXG4gIGlmIChtYXhTdWJkaXZpc2lvbiA+IDApIHtcbiAgICBpZiAodGhpcy50YXJnZXRQcm9qXy5pc0dsb2JhbCgpICYmIHRoaXMudGFyZ2V0V29ybGRXaWR0aF8pIHtcbiAgICAgIHZhciB0YXJnZXRRdWFkRXh0ZW50ID0gYm91bmRpbmdFeHRlbnQoW2EsIGIsIGMsIGRdKTtcbiAgICAgIHZhciB0YXJnZXRDb3ZlcmFnZVggPSBnZXRXaWR0aCh0YXJnZXRRdWFkRXh0ZW50KSAvIHRoaXMudGFyZ2V0V29ybGRXaWR0aF87XG4gICAgICBuZWVkc1N1YmRpdmlzaW9uID0gdGFyZ2V0Q292ZXJhZ2VYID4gTUFYX1RSSUFOR0xFX1dJRFRIIHx8XG4gICAgICAgIG5lZWRzU3ViZGl2aXNpb247XG4gICAgfVxuICAgIGlmICghd3JhcHNYICYmIHRoaXMuc291cmNlUHJval8uaXNHbG9iYWwoKSAmJiBzb3VyY2VDb3ZlcmFnZVgpIHtcbiAgICAgIG5lZWRzU3ViZGl2aXNpb24gPSBzb3VyY2VDb3ZlcmFnZVggPiBNQVhfVFJJQU5HTEVfV0lEVEggfHxcbiAgICAgICAgICBuZWVkc1N1YmRpdmlzaW9uO1xuICAgIH1cbiAgfVxuXG4gIGlmICghbmVlZHNTdWJkaXZpc2lvbiAmJiB0aGlzLm1heFNvdXJjZUV4dGVudF8pIHtcbiAgICBpZiAoIWludGVyc2VjdHMoc291cmNlUXVhZEV4dGVudCwgdGhpcy5tYXhTb3VyY2VFeHRlbnRfKSkge1xuICAgICAgLy8gd2hvbGUgcXVhZCBvdXRzaWRlIHNvdXJjZSBwcm9qZWN0aW9uIGV4dGVudCAtPiBpZ25vcmVcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBpZiAoIW5lZWRzU3ViZGl2aXNpb24pIHtcbiAgICBpZiAoIWlzRmluaXRlKGFTcmNbMF0pIHx8ICFpc0Zpbml0ZShhU3JjWzFdKSB8fFxuICAgICAgICAhaXNGaW5pdGUoYlNyY1swXSkgfHwgIWlzRmluaXRlKGJTcmNbMV0pIHx8XG4gICAgICAgICFpc0Zpbml0ZShjU3JjWzBdKSB8fCAhaXNGaW5pdGUoY1NyY1sxXSkgfHxcbiAgICAgICAgIWlzRmluaXRlKGRTcmNbMF0pIHx8ICFpc0Zpbml0ZShkU3JjWzFdKSkge1xuICAgICAgaWYgKG1heFN1YmRpdmlzaW9uID4gMCkge1xuICAgICAgICBuZWVkc1N1YmRpdmlzaW9uID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAobWF4U3ViZGl2aXNpb24gPiAwKSB7XG4gICAgaWYgKCFuZWVkc1N1YmRpdmlzaW9uKSB7XG4gICAgICB2YXIgY2VudGVyID0gWyhhWzBdICsgY1swXSkgLyAyLCAoYVsxXSArIGNbMV0pIC8gMl07XG4gICAgICB2YXIgY2VudGVyU3JjID0gdGhpcy50cmFuc2Zvcm1JbnZfKGNlbnRlcik7XG5cbiAgICAgIHZhciBkeDtcbiAgICAgIGlmICh3cmFwc1gpIHtcbiAgICAgICAgdmFyIGNlbnRlclNyY0VzdGltWCA9XG4gICAgICAgICAgICAobW9kdWxvKGFTcmNbMF0sIHNvdXJjZVdvcmxkV2lkdGgpICtcbiAgICAgICAgICAgICBtb2R1bG8oY1NyY1swXSwgc291cmNlV29ybGRXaWR0aCkpIC8gMjtcbiAgICAgICAgZHggPSBjZW50ZXJTcmNFc3RpbVggLVxuICAgICAgICAgICAgbW9kdWxvKGNlbnRlclNyY1swXSwgc291cmNlV29ybGRXaWR0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkeCA9IChhU3JjWzBdICsgY1NyY1swXSkgLyAyIC0gY2VudGVyU3JjWzBdO1xuICAgICAgfVxuICAgICAgdmFyIGR5ID0gKGFTcmNbMV0gKyBjU3JjWzFdKSAvIDIgLSBjZW50ZXJTcmNbMV07XG4gICAgICB2YXIgY2VudGVyU3JjRXJyb3JTcXVhcmVkID0gZHggKiBkeCArIGR5ICogZHk7XG4gICAgICBuZWVkc1N1YmRpdmlzaW9uID0gY2VudGVyU3JjRXJyb3JTcXVhcmVkID4gdGhpcy5lcnJvclRocmVzaG9sZFNxdWFyZWRfO1xuICAgIH1cbiAgICBpZiAobmVlZHNTdWJkaXZpc2lvbikge1xuICAgICAgaWYgKE1hdGguYWJzKGFbMF0gLSBjWzBdKSA8PSBNYXRoLmFicyhhWzFdIC0gY1sxXSkpIHtcbiAgICAgICAgLy8gc3BsaXQgaG9yaXpvbnRhbGx5ICh0b3AgJiBib3R0b20pXG4gICAgICAgIHZhciBiYyA9IFsoYlswXSArIGNbMF0pIC8gMiwgKGJbMV0gKyBjWzFdKSAvIDJdO1xuICAgICAgICB2YXIgYmNTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oYmMpO1xuICAgICAgICB2YXIgZGEgPSBbKGRbMF0gKyBhWzBdKSAvIDIsIChkWzFdICsgYVsxXSkgLyAyXTtcbiAgICAgICAgdmFyIGRhU3JjID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRhKTtcblxuICAgICAgICB0aGlzLmFkZFF1YWRfKFxuICAgICAgICAgIGEsIGIsIGJjLCBkYSwgYVNyYywgYlNyYywgYmNTcmMsIGRhU3JjLCBtYXhTdWJkaXZpc2lvbiAtIDEpO1xuICAgICAgICB0aGlzLmFkZFF1YWRfKFxuICAgICAgICAgIGRhLCBiYywgYywgZCwgZGFTcmMsIGJjU3JjLCBjU3JjLCBkU3JjLCBtYXhTdWJkaXZpc2lvbiAtIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3BsaXQgdmVydGljYWxseSAobGVmdCAmIHJpZ2h0KVxuICAgICAgICB2YXIgYWIgPSBbKGFbMF0gKyBiWzBdKSAvIDIsIChhWzFdICsgYlsxXSkgLyAyXTtcbiAgICAgICAgdmFyIGFiU3JjID0gdGhpcy50cmFuc2Zvcm1JbnZfKGFiKTtcbiAgICAgICAgdmFyIGNkID0gWyhjWzBdICsgZFswXSkgLyAyLCAoY1sxXSArIGRbMV0pIC8gMl07XG4gICAgICAgIHZhciBjZFNyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhjZCk7XG5cbiAgICAgICAgdGhpcy5hZGRRdWFkXyhcbiAgICAgICAgICBhLCBhYiwgY2QsIGQsIGFTcmMsIGFiU3JjLCBjZFNyYywgZFNyYywgbWF4U3ViZGl2aXNpb24gLSAxKTtcbiAgICAgICAgdGhpcy5hZGRRdWFkXyhcbiAgICAgICAgICBhYiwgYiwgYywgY2QsIGFiU3JjLCBiU3JjLCBjU3JjLCBjZFNyYywgbWF4U3ViZGl2aXNpb24gLSAxKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBpZiAod3JhcHNYKSB7XG4gICAgaWYgKCF0aGlzLmNhbldyYXBYSW5Tb3VyY2VfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMud3JhcHNYSW5Tb3VyY2VfID0gdHJ1ZTtcbiAgfVxuXG4gIHRoaXMuYWRkVHJpYW5nbGVfKGEsIGMsIGQsIGFTcmMsIGNTcmMsIGRTcmMpO1xuICB0aGlzLmFkZFRyaWFuZ2xlXyhhLCBiLCBjLCBhU3JjLCBiU3JjLCBjU3JjKTtcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyBleHRlbnQgb2YgdGhlICdzb3VyY2UnIGNvb3JkaW5hdGVzIGZyb20gYWxsIHRoZSB0cmlhbmdsZXMuXG4gKlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gQ2FsY3VsYXRlZCBleHRlbnQuXG4gKi9cblRyaWFuZ3VsYXRpb24ucHJvdG90eXBlLmNhbGN1bGF0ZVNvdXJjZUV4dGVudCA9IGZ1bmN0aW9uIGNhbGN1bGF0ZVNvdXJjZUV4dGVudCAoKSB7XG4gIHZhciBleHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuXG4gIHRoaXMudHJpYW5nbGVzXy5mb3JFYWNoKGZ1bmN0aW9uKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICB2YXIgc3JjID0gdHJpYW5nbGUuc291cmNlO1xuICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBzcmNbMF0pO1xuICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBzcmNbMV0pO1xuICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBzcmNbMl0pO1xuICB9KTtcblxuICByZXR1cm4gZXh0ZW50O1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtBcnJheTxUcmlhbmdsZT59IEFycmF5IG9mIHRoZSBjYWxjdWxhdGVkIHRyaWFuZ2xlcy5cbiAqL1xuVHJpYW5ndWxhdGlvbi5wcm90b3R5cGUuZ2V0VHJpYW5nbGVzID0gZnVuY3Rpb24gZ2V0VHJpYW5nbGVzICgpIHtcbiAgcmV0dXJuIHRoaXMudHJpYW5nbGVzXztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRyaWFuZ3VsYXRpb247XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyaWFuZ3VsYXRpb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlcHJvai9UaWxlXG4gKi9cbmltcG9ydCB7RVJST1JfVEhSRVNIT0xEfSBmcm9tICcuL2NvbW1vbi5qcyc7XG5cbmltcG9ydCBUaWxlIGZyb20gJy4uL1RpbGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IHtsaXN0ZW4sIHVubGlzdGVuQnlLZXl9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHtnZXRBcmVhLCBnZXRDZW50ZXIsIGdldEludGVyc2VjdGlvbn0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7Y2xhbXB9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IHtjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uLCByZW5kZXIgYXMgcmVuZGVyUmVwcm9qZWN0ZWR9IGZyb20gJy4uL3JlcHJvai5qcyc7XG5pbXBvcnQgVHJpYW5ndWxhdGlvbiBmcm9tICcuL1RyaWFuZ3VsYXRpb24uanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcikgOiBpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IEZ1bmN0aW9uVHlwZVxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDbGFzcyBlbmNhcHN1bGF0aW5nIHNpbmdsZSByZXByb2plY3RlZCB0aWxlLlxuICogU2VlIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1RpbGVJbWFnZX5UaWxlSW1hZ2V9LlxuICpcbiAqL1xudmFyIFJlcHJvalRpbGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChUaWxlKSB7XG4gIGZ1bmN0aW9uIFJlcHJvalRpbGUoXG4gICAgc291cmNlUHJvaixcbiAgICBzb3VyY2VUaWxlR3JpZCxcbiAgICB0YXJnZXRQcm9qLFxuICAgIHRhcmdldFRpbGVHcmlkLFxuICAgIHRpbGVDb29yZCxcbiAgICB3cmFwcGVkVGlsZUNvb3JkLFxuICAgIHBpeGVsUmF0aW8sXG4gICAgZ3V0dGVyLFxuICAgIGdldFRpbGVGdW5jdGlvbixcbiAgICBvcHRfZXJyb3JUaHJlc2hvbGQsXG4gICAgb3B0X3JlbmRlckVkZ2VzXG4gICkge1xuICAgIFRpbGUuY2FsbCh0aGlzLCB0aWxlQ29vcmQsIFRpbGVTdGF0ZS5JRExFKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJFZGdlc18gPSBvcHRfcmVuZGVyRWRnZXMgIT09IHVuZGVmaW5lZCA/IG9wdF9yZW5kZXJFZGdlcyA6IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucGl4ZWxSYXRpb18gPSBwaXhlbFJhdGlvO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZ3V0dGVyXyA9IGd1dHRlcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMuY2FudmFzXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMuc291cmNlVGlsZUdyaWRfID0gc291cmNlVGlsZUdyaWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMudGFyZ2V0VGlsZUdyaWRfID0gdGFyZ2V0VGlsZUdyaWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfVxuICAgICAqL1xuICAgIHRoaXMud3JhcHBlZFRpbGVDb29yZF8gPSB3cmFwcGVkVGlsZUNvb3JkID8gd3JhcHBlZFRpbGVDb29yZCA6IHRpbGVDb29yZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqL1xuICAgIHRoaXMuc291cmNlVGlsZXNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnNvdXJjZVpfID0gMDtcblxuICAgIHZhciB0YXJnZXRFeHRlbnQgPSB0YXJnZXRUaWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQodGhpcy53cmFwcGVkVGlsZUNvb3JkXyk7XG4gICAgdmFyIG1heFRhcmdldEV4dGVudCA9IHRoaXMudGFyZ2V0VGlsZUdyaWRfLmdldEV4dGVudCgpO1xuICAgIHZhciBtYXhTb3VyY2VFeHRlbnQgPSB0aGlzLnNvdXJjZVRpbGVHcmlkXy5nZXRFeHRlbnQoKTtcblxuICAgIHZhciBsaW1pdGVkVGFyZ2V0RXh0ZW50ID0gbWF4VGFyZ2V0RXh0ZW50ID9cbiAgICAgIGdldEludGVyc2VjdGlvbih0YXJnZXRFeHRlbnQsIG1heFRhcmdldEV4dGVudCkgOiB0YXJnZXRFeHRlbnQ7XG5cbiAgICBpZiAoZ2V0QXJlYShsaW1pdGVkVGFyZ2V0RXh0ZW50KSA9PT0gMCkge1xuICAgICAgLy8gVGlsZSBpcyBjb21wbGV0ZWx5IG91dHNpZGUgcmFuZ2UgLT4gRU1QVFlcbiAgICAgIC8vIFRPRE86IGlzIGl0IGFjdHVhbGx5IGNvcnJlY3QgdGhhdCB0aGUgc291cmNlIGV2ZW4gY3JlYXRlcyB0aGUgdGlsZSA/XG4gICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBzb3VyY2VQcm9qRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgICBpZiAoc291cmNlUHJvakV4dGVudCkge1xuICAgICAgaWYgKCFtYXhTb3VyY2VFeHRlbnQpIHtcbiAgICAgICAgbWF4U291cmNlRXh0ZW50ID0gc291cmNlUHJvakV4dGVudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1heFNvdXJjZUV4dGVudCA9IGdldEludGVyc2VjdGlvbihtYXhTb3VyY2VFeHRlbnQsIHNvdXJjZVByb2pFeHRlbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciB0YXJnZXRSZXNvbHV0aW9uID0gdGFyZ2V0VGlsZUdyaWQuZ2V0UmVzb2x1dGlvbihcbiAgICAgIHRoaXMud3JhcHBlZFRpbGVDb29yZF9bMF0pO1xuXG4gICAgdmFyIHRhcmdldENlbnRlciA9IGdldENlbnRlcihsaW1pdGVkVGFyZ2V0RXh0ZW50KTtcbiAgICB2YXIgc291cmNlUmVzb2x1dGlvbiA9IGNhbGN1bGF0ZVNvdXJjZVJlc29sdXRpb24oXG4gICAgICBzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCB0YXJnZXRDZW50ZXIsIHRhcmdldFJlc29sdXRpb24pO1xuXG4gICAgaWYgKCFpc0Zpbml0ZShzb3VyY2VSZXNvbHV0aW9uKSB8fCBzb3VyY2VSZXNvbHV0aW9uIDw9IDApIHtcbiAgICAgIC8vIGludmFsaWQgc291cmNlUmVzb2x1dGlvbiAtPiBFTVBUWVxuICAgICAgLy8gcHJvYmFibHkgZWRnZXMgb2YgdGhlIHByb2plY3Rpb25zIHdoZW4gbm8gZXh0ZW50IGlzIGRlZmluZWRcbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGVycm9yVGhyZXNob2xkSW5QaXhlbHMgPSBvcHRfZXJyb3JUaHJlc2hvbGQgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRfZXJyb3JUaHJlc2hvbGQgOiBFUlJPUl9USFJFU0hPTEQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshaW1wb3J0KFwiLi9Ucmlhbmd1bGF0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy50cmlhbmd1bGF0aW9uXyA9IG5ldyBUcmlhbmd1bGF0aW9uKFxuICAgICAgc291cmNlUHJvaiwgdGFyZ2V0UHJvaiwgbGltaXRlZFRhcmdldEV4dGVudCwgbWF4U291cmNlRXh0ZW50LFxuICAgICAgc291cmNlUmVzb2x1dGlvbiAqIGVycm9yVGhyZXNob2xkSW5QaXhlbHMpO1xuXG4gICAgaWYgKHRoaXMudHJpYW5ndWxhdGlvbl8uZ2V0VHJpYW5nbGVzKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBubyB2YWxpZCB0cmlhbmdsZXMgLT4gRU1QVFlcbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zb3VyY2VaXyA9IHNvdXJjZVRpbGVHcmlkLmdldFpGb3JSZXNvbHV0aW9uKHNvdXJjZVJlc29sdXRpb24pO1xuICAgIHZhciBzb3VyY2VFeHRlbnQgPSB0aGlzLnRyaWFuZ3VsYXRpb25fLmNhbGN1bGF0ZVNvdXJjZUV4dGVudCgpO1xuXG4gICAgaWYgKG1heFNvdXJjZUV4dGVudCkge1xuICAgICAgaWYgKHNvdXJjZVByb2ouY2FuV3JhcFgoKSkge1xuICAgICAgICBzb3VyY2VFeHRlbnRbMV0gPSBjbGFtcChcbiAgICAgICAgICBzb3VyY2VFeHRlbnRbMV0sIG1heFNvdXJjZUV4dGVudFsxXSwgbWF4U291cmNlRXh0ZW50WzNdKTtcbiAgICAgICAgc291cmNlRXh0ZW50WzNdID0gY2xhbXAoXG4gICAgICAgICAgc291cmNlRXh0ZW50WzNdLCBtYXhTb3VyY2VFeHRlbnRbMV0sIG1heFNvdXJjZUV4dGVudFszXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VyY2VFeHRlbnQgPSBnZXRJbnRlcnNlY3Rpb24oc291cmNlRXh0ZW50LCBtYXhTb3VyY2VFeHRlbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZ2V0QXJlYShzb3VyY2VFeHRlbnQpKSB7XG4gICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgc291cmNlUmFuZ2UgPSBzb3VyY2VUaWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKFxuICAgICAgICBzb3VyY2VFeHRlbnQsIHRoaXMuc291cmNlWl8pO1xuXG4gICAgICBmb3IgKHZhciBzcmNYID0gc291cmNlUmFuZ2UubWluWDsgc3JjWCA8PSBzb3VyY2VSYW5nZS5tYXhYOyBzcmNYKyspIHtcbiAgICAgICAgZm9yICh2YXIgc3JjWSA9IHNvdXJjZVJhbmdlLm1pblk7IHNyY1kgPD0gc291cmNlUmFuZ2UubWF4WTsgc3JjWSsrKSB7XG4gICAgICAgICAgdmFyIHRpbGUgPSBnZXRUaWxlRnVuY3Rpb24odGhpcy5zb3VyY2VaXywgc3JjWCwgc3JjWSwgcGl4ZWxSYXRpbyk7XG4gICAgICAgICAgaWYgKHRpbGUpIHtcbiAgICAgICAgICAgIHRoaXMuc291cmNlVGlsZXNfLnB1c2godGlsZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnNvdXJjZVRpbGVzXy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoIFRpbGUgKSBSZXByb2pUaWxlLl9fcHJvdG9fXyA9IFRpbGU7XG4gIFJlcHJvalRpbGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggVGlsZSAmJiBUaWxlLnByb3RvdHlwZSApO1xuICBSZXByb2pUaWxlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJlcHJvalRpbGU7XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBSZXByb2pUaWxlLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiBkaXNwb3NlSW50ZXJuYWwgKCkge1xuICAgIGlmICh0aGlzLnN0YXRlID09IFRpbGVTdGF0ZS5MT0FESU5HKSB7XG4gICAgICB0aGlzLnVubGlzdGVuU291cmNlc18oKTtcbiAgICB9XG4gICAgVGlsZS5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgSFRNTCBDYW52YXMgZWxlbWVudCBmb3IgdGhpcyB0aWxlLlxuICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gQ2FudmFzLlxuICAgKi9cbiAgUmVwcm9qVGlsZS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiBnZXRJbWFnZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FudmFzXztcbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIFJlcHJvalRpbGUucHJvdG90eXBlLnJlcHJvamVjdF8gPSBmdW5jdGlvbiByZXByb2plY3RfICgpIHtcbiAgICB2YXIgc291cmNlcyA9IFtdO1xuICAgIHRoaXMuc291cmNlVGlsZXNfLmZvckVhY2goZnVuY3Rpb24odGlsZSwgaSwgYXJyKSB7XG4gICAgICBpZiAodGlsZSAmJiB0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURFRCkge1xuICAgICAgICBzb3VyY2VzLnB1c2goe1xuICAgICAgICAgIGV4dGVudDogdGhpcy5zb3VyY2VUaWxlR3JpZF8uZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGUudGlsZUNvb3JkKSxcbiAgICAgICAgICBpbWFnZTogdGlsZS5nZXRJbWFnZSgpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0uYmluZCh0aGlzKSk7XG4gICAgdGhpcy5zb3VyY2VUaWxlc18ubGVuZ3RoID0gMDtcblxuICAgIGlmIChzb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FUlJPUjtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHogPSB0aGlzLndyYXBwZWRUaWxlQ29vcmRfWzBdO1xuICAgICAgdmFyIHNpemUgPSB0aGlzLnRhcmdldFRpbGVHcmlkXy5nZXRUaWxlU2l6ZSh6KTtcbiAgICAgIHZhciB3aWR0aCA9IHR5cGVvZiBzaXplID09PSAnbnVtYmVyJyA/IHNpemUgOiBzaXplWzBdO1xuICAgICAgdmFyIGhlaWdodCA9IHR5cGVvZiBzaXplID09PSAnbnVtYmVyJyA/IHNpemUgOiBzaXplWzFdO1xuICAgICAgdmFyIHRhcmdldFJlc29sdXRpb24gPSB0aGlzLnRhcmdldFRpbGVHcmlkXy5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgdmFyIHNvdXJjZVJlc29sdXRpb24gPSB0aGlzLnNvdXJjZVRpbGVHcmlkXy5nZXRSZXNvbHV0aW9uKHRoaXMuc291cmNlWl8pO1xuXG4gICAgICB2YXIgdGFyZ2V0RXh0ZW50ID0gdGhpcy50YXJnZXRUaWxlR3JpZF8uZ2V0VGlsZUNvb3JkRXh0ZW50KFxuICAgICAgICB0aGlzLndyYXBwZWRUaWxlQ29vcmRfKTtcbiAgICAgIHRoaXMuY2FudmFzXyA9IHJlbmRlclJlcHJvamVjdGVkKHdpZHRoLCBoZWlnaHQsIHRoaXMucGl4ZWxSYXRpb18sXG4gICAgICAgIHNvdXJjZVJlc29sdXRpb24sIHRoaXMuc291cmNlVGlsZUdyaWRfLmdldEV4dGVudCgpLFxuICAgICAgICB0YXJnZXRSZXNvbHV0aW9uLCB0YXJnZXRFeHRlbnQsIHRoaXMudHJpYW5ndWxhdGlvbl8sIHNvdXJjZXMsXG4gICAgICAgIHRoaXMuZ3V0dGVyXywgdGhpcy5yZW5kZXJFZGdlc18pO1xuXG4gICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkxPQURFRDtcbiAgICB9XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBSZXByb2pUaWxlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gbG9hZCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BRElORztcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuXG4gICAgICB2YXIgbGVmdFRvTG9hZCA9IDA7XG5cbiAgICAgIHRoaXMuc291cmNlc0xpc3RlbmVyS2V5c18gPSBbXTtcbiAgICAgIHRoaXMuc291cmNlVGlsZXNfLmZvckVhY2goZnVuY3Rpb24odGlsZSwgaSwgYXJyKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgaWYgKHN0YXRlID09IFRpbGVTdGF0ZS5JRExFIHx8IHN0YXRlID09IFRpbGVTdGF0ZS5MT0FESU5HKSB7XG4gICAgICAgICAgbGVmdFRvTG9hZCsrO1xuXG4gICAgICAgICAgdmFyIHNvdXJjZUxpc3RlbktleSA9IGxpc3Rlbih0aWxlLCBFdmVudFR5cGUuQ0hBTkdFLFxuICAgICAgICAgICAgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICB2YXIgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICAgIGlmIChzdGF0ZSA9PSBUaWxlU3RhdGUuTE9BREVEIHx8XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUiB8fFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9PSBUaWxlU3RhdGUuRU1QVFkpIHtcbiAgICAgICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHNvdXJjZUxpc3RlbktleSk7XG4gICAgICAgICAgICAgICAgbGVmdFRvTG9hZC0tO1xuICAgICAgICAgICAgICAgIGlmIChsZWZ0VG9Mb2FkID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnVubGlzdGVuU291cmNlc18oKTtcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVwcm9qZWN0XygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXy5wdXNoKHNvdXJjZUxpc3RlbktleSk7XG4gICAgICAgIH1cbiAgICAgIH0uYmluZCh0aGlzKSk7XG5cbiAgICAgIHRoaXMuc291cmNlVGlsZXNfLmZvckVhY2goZnVuY3Rpb24odGlsZSwgaSwgYXJyKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgaWYgKHN0YXRlID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgdGlsZS5sb2FkKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAobGVmdFRvTG9hZCA9PT0gMCkge1xuICAgICAgICBzZXRUaW1lb3V0KHRoaXMucmVwcm9qZWN0Xy5iaW5kKHRoaXMpLCAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBSZXByb2pUaWxlLnByb3RvdHlwZS51bmxpc3RlblNvdXJjZXNfID0gZnVuY3Rpb24gdW5saXN0ZW5Tb3VyY2VzXyAoKSB7XG4gICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgIHRoaXMuc291cmNlc0xpc3RlbmVyS2V5c18gPSBudWxsO1xuICB9O1xuXG4gIHJldHVybiBSZXByb2pUaWxlO1xufShUaWxlKSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgUmVwcm9qVGlsZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZXVybGZ1bmN0aW9uXG4gKi9cbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IHttb2R1bG99IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQge2hhc2ggYXMgdGlsZUNvb3JkSGFzaH0gZnJvbSAnLi90aWxlY29vcmQuanMnO1xuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHRlbXBsYXRlIFRlbXBsYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVHcmlkIFRpbGUgZ3JpZC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gVGlsZSBVUkwgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcm9tVGVtcGxhdGUodGVtcGxhdGUsIHRpbGVHcmlkKSB7XG4gIHZhciB6UmVnRXggPSAvXFx7elxcfS9nO1xuICB2YXIgeFJlZ0V4ID0gL1xce3hcXH0vZztcbiAgdmFyIHlSZWdFeCA9IC9cXHt5XFx9L2c7XG4gIHZhciBkYXNoWVJlZ0V4ID0gL1xcey15XFx9L2c7XG4gIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gVGlsZSBVUkwuXG4gICAgICovXG4gICAgZnVuY3Rpb24odGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICBpZiAoIXRpbGVDb29yZCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoelJlZ0V4LCB0aWxlQ29vcmRbMF0udG9TdHJpbmcoKSlcbiAgICAgICAgICAucmVwbGFjZSh4UmVnRXgsIHRpbGVDb29yZFsxXS50b1N0cmluZygpKVxuICAgICAgICAgIC5yZXBsYWNlKHlSZWdFeCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgeSA9IC10aWxlQ29vcmRbMl0gLSAxO1xuICAgICAgICAgICAgcmV0dXJuIHkudG9TdHJpbmcoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5yZXBsYWNlKGRhc2hZUmVnRXgsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHogPSB0aWxlQ29vcmRbMF07XG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSB0aWxlR3JpZC5nZXRGdWxsVGlsZVJhbmdlKHopO1xuICAgICAgICAgICAgYXNzZXJ0KHJhbmdlLCA1NSk7IC8vIFRoZSB7LXl9IHBsYWNlaG9sZGVyIHJlcXVpcmVzIGEgdGlsZSBncmlkIHdpdGggZXh0ZW50XG4gICAgICAgICAgICB2YXIgeSA9IHJhbmdlLmdldEhlaWdodCgpICsgdGlsZUNvb3JkWzJdO1xuICAgICAgICAgICAgcmV0dXJuIHkudG9TdHJpbmcoKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHRlbXBsYXRlcyBUZW1wbGF0ZXMuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBUaWxlIFVSTCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZyb21UZW1wbGF0ZXModGVtcGxhdGVzLCB0aWxlR3JpZCkge1xuICB2YXIgbGVuID0gdGVtcGxhdGVzLmxlbmd0aDtcbiAgdmFyIHRpbGVVcmxGdW5jdGlvbnMgPSBuZXcgQXJyYXkobGVuKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIHRpbGVVcmxGdW5jdGlvbnNbaV0gPSBjcmVhdGVGcm9tVGVtcGxhdGUodGVtcGxhdGVzW2ldLCB0aWxlR3JpZCk7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUZyb21UaWxlVXJsRnVuY3Rpb25zKHRpbGVVcmxGdW5jdGlvbnMpO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL1RpbGUuanNcIikuVXJsRnVuY3Rpb24+fSB0aWxlVXJsRnVuY3Rpb25zIFRpbGUgVVJMIEZ1bmN0aW9ucy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gVGlsZSBVUkwgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcm9tVGlsZVVybEZ1bmN0aW9ucyh0aWxlVXJsRnVuY3Rpb25zKSB7XG4gIGlmICh0aWxlVXJsRnVuY3Rpb25zLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiB0aWxlVXJsRnVuY3Rpb25zWzBdO1xuICB9XG4gIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gVGlsZSBVUkwuXG4gICAgICovXG4gICAgZnVuY3Rpb24odGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICBpZiAoIXRpbGVDb29yZCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGggPSB0aWxlQ29vcmRIYXNoKHRpbGVDb29yZCk7XG4gICAgICAgIHZhciBpbmRleCA9IG1vZHVsbyhoLCB0aWxlVXJsRnVuY3Rpb25zLmxlbmd0aCk7XG4gICAgICAgIHJldHVybiB0aWxlVXJsRnVuY3Rpb25zW2luZGV4XSh0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRpbGUgVVJMLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbnVsbFRpbGVVcmxGdW5jdGlvbih0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVVJMLlxuICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gQXJyYXkgb2YgdXJscy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4cGFuZFVybCh1cmwpIHtcbiAgdmFyIHVybHMgPSBbXTtcbiAgdmFyIG1hdGNoID0gL1xceyhbYS16XSktKFthLXpdKVxcfS8uZXhlYyh1cmwpO1xuICBpZiAobWF0Y2gpIHtcbiAgICAvLyBjaGFyIHJhbmdlXG4gICAgdmFyIHN0YXJ0Q2hhckNvZGUgPSBtYXRjaFsxXS5jaGFyQ29kZUF0KDApO1xuICAgIHZhciBzdG9wQ2hhckNvZGUgPSBtYXRjaFsyXS5jaGFyQ29kZUF0KDApO1xuICAgIHZhciBjaGFyQ29kZTtcbiAgICBmb3IgKGNoYXJDb2RlID0gc3RhcnRDaGFyQ29kZTsgY2hhckNvZGUgPD0gc3RvcENoYXJDb2RlOyArK2NoYXJDb2RlKSB7XG4gICAgICB1cmxzLnB1c2godXJsLnJlcGxhY2UobWF0Y2hbMF0sIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpKSk7XG4gICAgfVxuICAgIHJldHVybiB1cmxzO1xuICB9XG4gIG1hdGNoID0gbWF0Y2ggPSAvXFx7KFxcZCspLShcXGQrKVxcfS8uZXhlYyh1cmwpO1xuICBpZiAobWF0Y2gpIHtcbiAgICAvLyBudW1iZXIgcmFuZ2VcbiAgICB2YXIgc3RvcCA9IHBhcnNlSW50KG1hdGNoWzJdLCAxMCk7XG4gICAgZm9yICh2YXIgaSA9IHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7IGkgPD0gc3RvcDsgaSsrKSB7XG4gICAgICB1cmxzLnB1c2godXJsLnJlcGxhY2UobWF0Y2hbMF0sIGkudG9TdHJpbmcoKSkpO1xuICAgIH1cbiAgICByZXR1cm4gdXJscztcbiAgfVxuICB1cmxzLnB1c2godXJsKTtcbiAgcmV0dXJuIHVybHM7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbGV1cmxmdW5jdGlvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1NvdXJjZVxuICovXG5pbXBvcnQge2Fic3RyYWN0fSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQge2dldCBhcyBnZXRQcm9qZWN0aW9ufSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCBTb3VyY2VTdGF0ZSBmcm9tICcuL1N0YXRlLmpzJztcblxuXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3RyaW5nIG9yIGFuIGFycmF5IG9mIHN0cmluZ3MgcmVwcmVzZW50aW5nIHNvdXJjZVxuICogYXR0cmlidXRpb25zLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZSk6IChzdHJpbmd8QXJyYXk8c3RyaW5nPil9IEF0dHJpYnV0aW9uXG4gKi9cblxuXG4vKipcbiAqIEEgdHlwZSB0aGF0IGNhbiBiZSB1c2VkIHRvIHByb3ZpZGUgYXR0cmlidXRpb24gaW5mb3JtYXRpb24gZm9yIGRhdGEgc291cmNlcy5cbiAqXG4gKiBJdCByZXByZXNlbnRzIGVpdGhlclxuICogKiBhIHNpbXBsZSBzdHJpbmcgKGUuZy4gYCfCqSBBY21lIEluYy4nYClcbiAqICogYW4gYXJyYXkgb2Ygc2ltcGxlIHN0cmluZ3MgKGUuZy4gYFsnwqkgQWNtZSBJbmMuJywgJ8KpIEJhY21lIEluYy4nXWApXG4gKiAqIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3RyaW5nIG9yIGFycmF5IG9mIHN0cmluZ3MgKGB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9Tb3VyY2V+QXR0cmlidXRpb259YClcbiAqXG4gKiBAdHlwZWRlZiB7c3RyaW5nfEFycmF5PHN0cmluZz58QXR0cmlidXRpb259IEF0dHJpYnV0aW9uTGlrZVxuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge0F0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc11cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb25cbiAqIEBwcm9wZXJ0eSB7U291cmNlU3RhdGV9IFtzdGF0ZT0ncmVhZHknXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9ZmFsc2VdXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEJhc2UgY2xhc3MgZm9yIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXJ9IHNvdXJjZXMuXG4gKlxuICogQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIHRyaWdnZXJlZCB3aGVuIHRoZSBzdGF0ZSBvZiB0aGUgc291cmNlIGNoYW5nZXMuXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xudmFyIFNvdXJjZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEJhc2VPYmplY3QpIHtcbiAgZnVuY3Rpb24gU291cmNlKG9wdGlvbnMpIHtcblxuICAgIEJhc2VPYmplY3QuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMucHJvamVjdGlvbl8gPSBnZXRQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbik7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/QXR0cmlidXRpb259XG4gICAgICovXG4gICAgdGhpcy5hdHRyaWJ1dGlvbnNfID0gYWRhcHRBdHRyaWJ1dGlvbnMob3B0aW9ucy5hdHRyaWJ1dGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlXyA9IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlIDogdHJ1ZTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgc291cmNlIGlzIGN1cnJlbnRseSBsb2FkaW5nIGRhdGEuIFNvdXJjZXMgdGhhdCBkZWZlciBsb2FkaW5nIHRvIHRoZVxuICAgICAqIG1hcCdzIHRpbGUgcXVldWUgbmV2ZXIgc2V0IHRoaXMgdG8gYHRydWVgLlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7U291cmNlU3RhdGV9XG4gICAgICovXG4gICAgdGhpcy5zdGF0ZV8gPSBvcHRpb25zLnN0YXRlICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0aW9ucy5zdGF0ZSA6IFNvdXJjZVN0YXRlLlJFQURZO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLndyYXBYXyA9IG9wdGlvbnMud3JhcFggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMud3JhcFggOiBmYWxzZTtcblxuICB9XG5cbiAgaWYgKCBCYXNlT2JqZWN0ICkgU291cmNlLl9fcHJvdG9fXyA9IEJhc2VPYmplY3Q7XG4gIFNvdXJjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBCYXNlT2JqZWN0ICYmIEJhc2VPYmplY3QucHJvdG90eXBlICk7XG4gIFNvdXJjZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTb3VyY2U7XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgYXR0cmlidXRpb24gZnVuY3Rpb24gZm9yIHRoZSBzb3VyY2UuXG4gICAqIEByZXR1cm4gez9BdHRyaWJ1dGlvbn0gQXR0cmlidXRpb24gZnVuY3Rpb24uXG4gICAqL1xuICBTb3VyY2UucHJvdG90eXBlLmdldEF0dHJpYnV0aW9ucyA9IGZ1bmN0aW9uIGdldEF0dHJpYnV0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXR0cmlidXRpb25zXztcbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gQWF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gICAqL1xuICBTb3VyY2UucHJvdG90eXBlLmdldEF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlID0gZnVuY3Rpb24gZ2V0QXR0cmlidXRpb25zQ29sbGFwc2libGUgKCkge1xuICAgIHJldHVybiB0aGlzLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlXztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBwcm9qZWN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBQcm9qZWN0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBTb3VyY2UucHJvdG90eXBlLmdldFByb2plY3Rpb24gPSBmdW5jdGlvbiBnZXRQcm9qZWN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9qZWN0aW9uXztcbiAgfTtcblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfSBSZXNvbHV0aW9ucy5cbiAgICovXG4gIFNvdXJjZS5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiBnZXRSZXNvbHV0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc3RhdGUgb2YgdGhlIHNvdXJjZSwgc2VlIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1N0YXRlflN0YXRlfSBmb3IgcG9zc2libGUgc3RhdGVzLlxuICAgKiBAcmV0dXJuIHtTb3VyY2VTdGF0ZX0gU3RhdGUuXG4gICAqIEBhcGlcbiAgICovXG4gIFNvdXJjZS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiBnZXRTdGF0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGVfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufHVuZGVmaW5lZH0gV3JhcCBYLlxuICAgKi9cbiAgU291cmNlLnByb3RvdHlwZS5nZXRXcmFwWCA9IGZ1bmN0aW9uIGdldFdyYXBYICgpIHtcbiAgICByZXR1cm4gdGhpcy53cmFwWF87XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlZnJlc2hlcyB0aGUgc291cmNlIGFuZCBmaW5hbGx5IGRpc3BhdGNoZXMgYSAnY2hhbmdlJyBldmVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgU291cmNlLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gcmVmcmVzaCAoKSB7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgYXR0cmlidXRpb25zIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSB7QXR0cmlidXRpb25MaWtlfHVuZGVmaW5lZH0gYXR0cmlidXRpb25zIEF0dHJpYnV0aW9ucy5cbiAgICogICAgIENhbiBiZSBwYXNzZWQgYXMgYHN0cmluZ2AsIGBBcnJheTxzdHJpbmc+YCwgYHtAbGluayBtb2R1bGU6b2wvc291cmNlL1NvdXJjZX5BdHRyaWJ1dGlvbn1gLFxuICAgKiAgICAgb3IgYHVuZGVmaW5lZGAuXG4gICAqIEBhcGlcbiAgICovXG4gIFNvdXJjZS5wcm90b3R5cGUuc2V0QXR0cmlidXRpb25zID0gZnVuY3Rpb24gc2V0QXR0cmlidXRpb25zIChhdHRyaWJ1dGlvbnMpIHtcbiAgICB0aGlzLmF0dHJpYnV0aW9uc18gPSBhZGFwdEF0dHJpYnV0aW9ucyhhdHRyaWJ1dGlvbnMpO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSB7U291cmNlU3RhdGV9IHN0YXRlIFN0YXRlLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBTb3VyY2UucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gc2V0U3RhdGUgKHN0YXRlKSB7XG4gICAgdGhpcy5zdGF0ZV8gPSBzdGF0ZTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICByZXR1cm4gU291cmNlO1xufShCYXNlT2JqZWN0KSk7XG5cblxuLyoqXG4gKiBUdXJucyB0aGUgYXR0cmlidXRpb25zIG9wdGlvbiBpbnRvIGFuIGF0dHJpYnV0aW9ucyBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7QXR0cmlidXRpb25MaWtlfHVuZGVmaW5lZH0gYXR0cmlidXRpb25MaWtlIFRoZSBhdHRyaWJ1dGlvbiBvcHRpb24uXG4gKiBAcmV0dXJuIHs/QXR0cmlidXRpb259IEFuIGF0dHJpYnV0aW9uIGZ1bmN0aW9uIChvciBudWxsKS5cbiAqL1xuZnVuY3Rpb24gYWRhcHRBdHRyaWJ1dGlvbnMoYXR0cmlidXRpb25MaWtlKSB7XG4gIGlmICghYXR0cmlidXRpb25MaWtlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkoYXR0cmlidXRpb25MaWtlKSkge1xuICAgIHJldHVybiBmdW5jdGlvbihmcmFtZVN0YXRlKSB7XG4gICAgICByZXR1cm4gYXR0cmlidXRpb25MaWtlO1xuICAgIH07XG4gIH1cblxuICBpZiAodHlwZW9mIGF0dHJpYnV0aW9uTGlrZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBhdHRyaWJ1dGlvbkxpa2U7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24oZnJhbWVTdGF0ZSkge1xuICAgIHJldHVybiBbYXR0cmlidXRpb25MaWtlXTtcbiAgfTtcbn1cblxuXG5leHBvcnQgZGVmYXVsdCBTb3VyY2U7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNvdXJjZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZWdyaWQvVGlsZUdyaWRcbiAqL1xuaW1wb3J0IHtERUZBVUxUX1RJTEVfU0laRX0gZnJvbSAnLi9jb21tb24uanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IFRpbGVSYW5nZSwge2NyZWF0ZU9yVXBkYXRlIGFzIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlfSBmcm9tICcuLi9UaWxlUmFuZ2UuanMnO1xuaW1wb3J0IHtpc1NvcnRlZCwgbGluZWFyRmluZE5lYXJlc3R9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7Y3JlYXRlT3JVcGRhdGUsIGdldFRvcExlZnR9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQge2NsYW1wfSBmcm9tICcuLi9tYXRoLmpzJztcbmltcG9ydCB7dG9TaXplfSBmcm9tICcuLi9zaXplLmpzJztcbmltcG9ydCB7Y3JlYXRlT3JVcGRhdGUgYXMgY3JlYXRlT3JVcGRhdGVUaWxlQ29vcmR9IGZyb20gJy4uL3RpbGVjb29yZC5qcyc7XG5cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9XG4gKi9cbnZhciB0bXBUaWxlQ29vcmQgPSBbMCwgMCwgMF07XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIEV4dGVudCBmb3IgdGhlIHRpbGUgZ3JpZC4gTm8gdGlsZXMgb3V0c2lkZSB0aGlzXG4gKiBleHRlbnQgd2lsbCBiZSByZXF1ZXN0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZX0gc291cmNlcy4gV2hlbiBubyBgb3JpZ2luYCBvclxuICogYG9yaWdpbnNgIGFyZSBjb25maWd1cmVkLCB0aGUgYG9yaWdpbmAgd2lsbCBiZSBzZXQgdG8gdGhlIHRvcC1sZWZ0IGNvcm5lciBvZiB0aGUgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIE1pbmltdW0gem9vbS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3JpZ2luXSBUaGUgdGlsZSBncmlkIG9yaWdpbiwgaS5lLiB3aGVyZSB0aGUgYHhgXG4gKiBhbmQgYHlgIGF4ZXMgbWVldCAoYFt6LCAwLCAwXWApLiBUaWxlIGNvb3JkaW5hdGVzIGluY3JlYXNlIGxlZnQgdG8gcmlnaHQgYW5kIHVwd2FyZHMuIElmIG5vdFxuICogc3BlY2lmaWVkLCBgZXh0ZW50YCBvciBgb3JpZ2luc2AgbXVzdCBiZSBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gW29yaWdpbnNdIFRpbGUgZ3JpZCBvcmlnaW5zLCBpLmUuIHdoZXJlXG4gKiB0aGUgYHhgIGFuZCBgeWAgYXhlcyBtZWV0IChgW3osIDAsIDBdYCksIGZvciBlYWNoIHpvb20gbGV2ZWwuIElmIGdpdmVuLCB0aGUgYXJyYXkgbGVuZ3RoXG4gKiBzaG91bGQgbWF0Y2ggdGhlIGxlbmd0aCBvZiB0aGUgYHJlc29sdXRpb25zYCBhcnJheSwgaS5lLiBlYWNoIHJlc29sdXRpb24gY2FuIGhhdmUgYSBkaWZmZXJlbnRcbiAqIG9yaWdpbi4gVGlsZSBjb29yZGluYXRlcyBpbmNyZWFzZSBsZWZ0IHRvIHJpZ2h0IGFuZCB1cHdhcmRzLiBJZiBub3Qgc3BlY2lmaWVkLCBgZXh0ZW50YCBvclxuICogYG9yaWdpbmAgbXVzdCBiZSBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7IUFycmF5PG51bWJlcj59IHJlc29sdXRpb25zIFJlc29sdXRpb25zLiBUaGUgYXJyYXkgaW5kZXggb2YgZWFjaCByZXNvbHV0aW9uIG5lZWRzXG4gKiB0byBtYXRjaCB0aGUgem9vbSBsZXZlbC4gVGhpcyBtZWFucyB0aGF0IGV2ZW4gaWYgYSBgbWluWm9vbWAgaXMgY29uZmlndXJlZCwgdGhlIHJlc29sdXRpb25zXG4gKiBhcnJheSB3aWxsIGhhdmUgYSBsZW5ndGggb2YgYG1heFpvb20gKyAxYC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplPn0gW3NpemVzXSBTaXplcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gW3RpbGVTaXplXSBUaWxlIHNpemUuXG4gKiBEZWZhdWx0IGlzIGBbMjU2LCAyNTZdYC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplPn0gW3RpbGVTaXplc10gVGlsZSBzaXplcy4gSWYgZ2l2ZW4sIHRoZSBhcnJheSBsZW5ndGhcbiAqIHNob3VsZCBtYXRjaCB0aGUgbGVuZ3RoIG9mIHRoZSBgcmVzb2x1dGlvbnNgIGFycmF5LCBpLmUuIGVhY2ggcmVzb2x1dGlvbiBjYW4gaGF2ZSBhIGRpZmZlcmVudFxuICogdGlsZSBzaXplLlxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIGZvciBzZXR0aW5nIHRoZSBncmlkIHBhdHRlcm4gZm9yIHNvdXJjZXMgYWNjZXNzaW5nIHRpbGVkLWltYWdlXG4gKiBzZXJ2ZXJzLlxuICogQGFwaVxuICovXG52YXIgVGlsZUdyaWQgPSBmdW5jdGlvbiBUaWxlR3JpZChvcHRpb25zKSB7XG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHRoaXMubWluWm9vbSA9IG9wdGlvbnMubWluWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5taW5ab29tIDogMDtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUgeyFBcnJheTxudW1iZXI+fVxuICAgKi9cbiAgdGhpcy5yZXNvbHV0aW9uc18gPSBvcHRpb25zLnJlc29sdXRpb25zO1xuICBhc3NlcnQoaXNTb3J0ZWQodGhpcy5yZXNvbHV0aW9uc18sIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gYiAtIGE7XG4gIH0sIHRydWUpLCAxNyk7IC8vIGByZXNvbHV0aW9uc2AgbXVzdCBiZSBzb3J0ZWQgaW4gZGVzY2VuZGluZyBvcmRlclxuXG5cbiAgLy8gY2hlY2sgaWYgd2UndmUgZ290IGEgY29uc2lzdGVudCB6b29tIGZhY3RvciBhbmQgb3JpZ2luXG4gIHZhciB6b29tRmFjdG9yO1xuICBpZiAoIW9wdGlvbnMub3JpZ2lucykge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCAtIDE7IGkgPCBpaTsgKytpKSB7XG4gICAgICBpZiAoIXpvb21GYWN0b3IpIHtcbiAgICAgICAgem9vbUZhY3RvciA9IHRoaXMucmVzb2x1dGlvbnNfW2ldIC8gdGhpcy5yZXNvbHV0aW9uc19baSArIDFdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMucmVzb2x1dGlvbnNfW2ldIC8gdGhpcy5yZXNvbHV0aW9uc19baSArIDFdICE9PSB6b29tRmFjdG9yKSB7XG4gICAgICAgICAgem9vbUZhY3RvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgKi9cbiAgdGhpcy56b29tRmFjdG9yXyA9IHpvb21GYWN0b3I7XG5cblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgdGhpcy5tYXhab29tID0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICovXG4gIHRoaXMub3JpZ2luXyA9IG9wdGlvbnMub3JpZ2luICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm9yaWdpbiA6IG51bGw7XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fVxuICAgKi9cbiAgdGhpcy5vcmlnaW5zXyA9IG51bGw7XG4gIGlmIChvcHRpb25zLm9yaWdpbnMgIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMub3JpZ2luc18gPSBvcHRpb25zLm9yaWdpbnM7XG4gICAgYXNzZXJ0KHRoaXMub3JpZ2luc18ubGVuZ3RoID09IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCxcbiAgICAgIDIwKTsgLy8gTnVtYmVyIG9mIGBvcmlnaW5zYCBhbmQgYHJlc29sdXRpb25zYCBtdXN0IGJlIGVxdWFsXG4gIH1cblxuICB2YXIgZXh0ZW50ID0gb3B0aW9ucy5leHRlbnQ7XG5cbiAgaWYgKGV4dGVudCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAhdGhpcy5vcmlnaW5fICYmICF0aGlzLm9yaWdpbnNfKSB7XG4gICAgdGhpcy5vcmlnaW5fID0gZ2V0VG9wTGVmdChleHRlbnQpO1xuICB9XG5cbiAgYXNzZXJ0KFxuICAgICghdGhpcy5vcmlnaW5fICYmIHRoaXMub3JpZ2luc18pIHx8ICh0aGlzLm9yaWdpbl8gJiYgIXRoaXMub3JpZ2luc18pLFxuICAgIDE4KTsgLy8gRWl0aGVyIGBvcmlnaW5gIG9yIGBvcmlnaW5zYCBtdXN0IGJlIGNvbmZpZ3VyZWQsIG5ldmVyIGJvdGhcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge0FycmF5PG51bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemU+fVxuICAgKi9cbiAgdGhpcy50aWxlU2l6ZXNfID0gbnVsbDtcbiAgaWYgKG9wdGlvbnMudGlsZVNpemVzICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnRpbGVTaXplc18gPSBvcHRpb25zLnRpbGVTaXplcztcbiAgICBhc3NlcnQodGhpcy50aWxlU2l6ZXNfLmxlbmd0aCA9PSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGgsXG4gICAgICAxOSk7IC8vIE51bWJlciBvZiBgdGlsZVNpemVzYCBhbmQgYHJlc29sdXRpb25zYCBtdXN0IGJlIGVxdWFsXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAqL1xuICB0aGlzLnRpbGVTaXplXyA9IG9wdGlvbnMudGlsZVNpemUgIT09IHVuZGVmaW5lZCA/XG4gICAgb3B0aW9ucy50aWxlU2l6ZSA6XG4gICAgIXRoaXMudGlsZVNpemVzXyA/IERFRkFVTFRfVElMRV9TSVpFIDogbnVsbDtcbiAgYXNzZXJ0KFxuICAgICghdGhpcy50aWxlU2l6ZV8gJiYgdGhpcy50aWxlU2l6ZXNfKSB8fFxuICAgICAgKHRoaXMudGlsZVNpemVfICYmICF0aGlzLnRpbGVTaXplc18pLFxuICAgIDIyKTsgLy8gRWl0aGVyIGB0aWxlU2l6ZWAgb3IgYHRpbGVTaXplc2AgbXVzdCBiZSBjb25maWd1cmVkLCBuZXZlciBib3RoXG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgKi9cbiAgdGhpcy5leHRlbnRfID0gZXh0ZW50ICE9PSB1bmRlZmluZWQgPyBleHRlbnQgOiBudWxsO1xuXG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdD59XG4gICAqL1xuICB0aGlzLmZ1bGxUaWxlUmFuZ2VzXyA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAqL1xuICB0aGlzLnRtcFNpemVfID0gWzAsIDBdO1xuXG4gIGlmIChvcHRpb25zLnNpemVzICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLmZ1bGxUaWxlUmFuZ2VzXyA9IG9wdGlvbnMuc2l6ZXMubWFwKGZ1bmN0aW9uKHNpemUsIHopIHtcbiAgICAgIHZhciB0aWxlUmFuZ2UgPSBuZXcgVGlsZVJhbmdlKFxuICAgICAgICBNYXRoLm1pbigwLCBzaXplWzBdKSwgTWF0aC5tYXgoc2l6ZVswXSAtIDEsIC0xKSxcbiAgICAgICAgTWF0aC5taW4oMCwgc2l6ZVsxXSksIE1hdGgubWF4KHNpemVbMV0gLSAxLCAtMSkpO1xuICAgICAgcmV0dXJuIHRpbGVSYW5nZTtcbiAgICB9LCB0aGlzKTtcbiAgfSBlbHNlIGlmIChleHRlbnQpIHtcbiAgICB0aGlzLmNhbGN1bGF0ZVRpbGVSYW5nZXNfKGV4dGVudCk7XG4gIH1cblxufTtcblxuLyoqXG4gKiBDYWxsIGEgZnVuY3Rpb24gd2l0aCBlYWNoIHRpbGUgY29vcmRpbmF0ZSBmb3IgYSBnaXZlbiBleHRlbnQgYW5kIHpvb20gbGV2ZWwuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHpvb20gSW50ZWdlciB6b29tIGxldmVsLlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkKX0gY2FsbGJhY2sgRnVuY3Rpb24gY2FsbGVkIHdpdGggZWFjaCB0aWxlIGNvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cblRpbGVHcmlkLnByb3RvdHlwZS5mb3JFYWNoVGlsZUNvb3JkID0gZnVuY3Rpb24gZm9yRWFjaFRpbGVDb29yZCAoZXh0ZW50LCB6b29tLCBjYWxsYmFjaykge1xuICB2YXIgdGlsZVJhbmdlID0gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgem9vbSk7XG4gIGZvciAodmFyIGkgPSB0aWxlUmFuZ2UubWluWCwgaWkgPSB0aWxlUmFuZ2UubWF4WDsgaSA8PSBpaTsgKytpKSB7XG4gICAgZm9yICh2YXIgaiA9IHRpbGVSYW5nZS5taW5ZLCBqaiA9IHRpbGVSYW5nZS5tYXhZOyBqIDw9IGpqOyArK2opIHtcbiAgICAgIGNhbGxiYWNrKFt6b29tLCBpLCBqXSk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogVCwgbnVtYmVyLCBpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGNhbGxiYWNrIENhbGxiYWNrLlxuICogQHBhcmFtIHtUPX0gb3B0X3RoaXMgVGhlIG9iamVjdCB0byB1c2UgYXMgYHRoaXNgIGluIGBjYWxsYmFja2AuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0PX0gb3B0X3RpbGVSYW5nZSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQgb2JqZWN0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50PX0gb3B0X2V4dGVudCBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudCBvYmplY3QuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDYWxsYmFjayBzdWNjZWVkZWQuXG4gKiBAdGVtcGxhdGUgVFxuICovXG5UaWxlR3JpZC5wcm90b3R5cGUuZm9yRWFjaFRpbGVDb29yZFBhcmVudFRpbGVSYW5nZSA9IGZ1bmN0aW9uIGZvckVhY2hUaWxlQ29vcmRQYXJlbnRUaWxlUmFuZ2UgKHRpbGVDb29yZCwgY2FsbGJhY2ssIG9wdF90aGlzLCBvcHRfdGlsZVJhbmdlLCBvcHRfZXh0ZW50KSB7XG4gIHZhciB0aWxlUmFuZ2UsIHgsIHk7XG4gIHZhciB0aWxlQ29vcmRFeHRlbnQgPSBudWxsO1xuICB2YXIgeiA9IHRpbGVDb29yZFswXSAtIDE7XG4gIGlmICh0aGlzLnpvb21GYWN0b3JfID09PSAyKSB7XG4gICAgeCA9IHRpbGVDb29yZFsxXTtcbiAgICB5ID0gdGlsZUNvb3JkWzJdO1xuICB9IGVsc2Uge1xuICAgIHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgb3B0X2V4dGVudCk7XG4gIH1cbiAgd2hpbGUgKHogPj0gdGhpcy5taW5ab29tKSB7XG4gICAgaWYgKHRoaXMuem9vbUZhY3Rvcl8gPT09IDIpIHtcbiAgICAgIHggPSBNYXRoLmZsb29yKHggLyAyKTtcbiAgICAgIHkgPSBNYXRoLmZsb29yKHkgLyAyKTtcbiAgICAgIHRpbGVSYW5nZSA9IGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKHgsIHgsIHksIHksIG9wdF90aWxlUmFuZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aWxlUmFuZ2UgPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFoodGlsZUNvb3JkRXh0ZW50LCB6LCBvcHRfdGlsZVJhbmdlKTtcbiAgICB9XG4gICAgaWYgKGNhbGxiYWNrLmNhbGwob3B0X3RoaXMsIHosIHRpbGVSYW5nZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAtLXo7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGV4dGVudCBmb3IgdGhpcyB0aWxlIGdyaWQsIGlmIGl0IHdhcyBjb25maWd1cmVkLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICovXG5UaWxlR3JpZC5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gZ2V0RXh0ZW50ICgpIHtcbiAgcmV0dXJuIHRoaXMuZXh0ZW50Xztcbn07XG5cbi8qKlxuICogR2V0IHRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSBncmlkLlxuICogQHJldHVybiB7bnVtYmVyfSBNYXggem9vbS5cbiAqIEBhcGlcbiAqL1xuVGlsZUdyaWQucHJvdG90eXBlLmdldE1heFpvb20gPSBmdW5jdGlvbiBnZXRNYXhab29tICgpIHtcbiAgcmV0dXJuIHRoaXMubWF4Wm9vbTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSBncmlkLlxuICogQHJldHVybiB7bnVtYmVyfSBNaW4gem9vbS5cbiAqIEBhcGlcbiAqL1xuVGlsZUdyaWQucHJvdG90eXBlLmdldE1pblpvb20gPSBmdW5jdGlvbiBnZXRNaW5ab29tICgpIHtcbiAgcmV0dXJuIHRoaXMubWluWm9vbTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBvcmlnaW4gZm9yIHRoZSBncmlkIGF0IHRoZSBnaXZlbiB6b29tIGxldmVsLlxuICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBPcmlnaW4uXG4gKiBAYXBpXG4gKi9cblRpbGVHcmlkLnByb3RvdHlwZS5nZXRPcmlnaW4gPSBmdW5jdGlvbiBnZXRPcmlnaW4gKHopIHtcbiAgaWYgKHRoaXMub3JpZ2luXykge1xuICAgIHJldHVybiB0aGlzLm9yaWdpbl87XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRoaXMub3JpZ2luc19bel07XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IHRoZSByZXNvbHV0aW9uIGZvciB0aGUgZ2l2ZW4gem9vbSBsZXZlbC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAqIEByZXR1cm4ge251bWJlcn0gUmVzb2x1dGlvbi5cbiAqIEBhcGlcbiAqL1xuVGlsZUdyaWQucHJvdG90eXBlLmdldFJlc29sdXRpb24gPSBmdW5jdGlvbiBnZXRSZXNvbHV0aW9uICh6KSB7XG4gIHJldHVybiB0aGlzLnJlc29sdXRpb25zX1t6XTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBsaXN0IG9mIHJlc29sdXRpb25zIGZvciB0aGUgdGlsZSBncmlkLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gUmVzb2x1dGlvbnMuXG4gKiBAYXBpXG4gKi9cblRpbGVHcmlkLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9ucyA9IGZ1bmN0aW9uIGdldFJlc29sdXRpb25zICgpIHtcbiAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0PX0gb3B0X3RpbGVSYW5nZSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQgb2JqZWN0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50PX0gb3B0X2V4dGVudCBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudCBvYmplY3QuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gVGlsZSByYW5nZS5cbiAqL1xuVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZENoaWxkVGlsZVJhbmdlID0gZnVuY3Rpb24gZ2V0VGlsZUNvb3JkQ2hpbGRUaWxlUmFuZ2UgKHRpbGVDb29yZCwgb3B0X3RpbGVSYW5nZSwgb3B0X2V4dGVudCkge1xuICBpZiAodGlsZUNvb3JkWzBdIDwgdGhpcy5tYXhab29tKSB7XG4gICAgaWYgKHRoaXMuem9vbUZhY3Rvcl8gPT09IDIpIHtcbiAgICAgIHZhciBtaW5YID0gdGlsZUNvb3JkWzFdICogMjtcbiAgICAgIHZhciBtaW5ZID0gdGlsZUNvb3JkWzJdICogMjtcbiAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZShtaW5YLCBtaW5YICsgMSwgbWluWSwgbWluWSArIDEsIG9wdF90aWxlUmFuZ2UpO1xuICAgIH1cbiAgICB2YXIgdGlsZUNvb3JkRXh0ZW50ID0gdGhpcy5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZUNvb3JkLCBvcHRfZXh0ZW50KTtcbiAgICByZXR1cm4gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKFxuICAgICAgdGlsZUNvb3JkRXh0ZW50LCB0aWxlQ29vcmRbMF0gKyAxLCBvcHRfdGlsZVJhbmdlKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBleHRlbnQgZm9yIGEgdGlsZSByYW5nZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50PX0gb3B0X2V4dGVudCBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudCBvYmplY3QuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gKi9cblRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlUmFuZ2VFeHRlbnQgPSBmdW5jdGlvbiBnZXRUaWxlUmFuZ2VFeHRlbnQgKHosIHRpbGVSYW5nZSwgb3B0X2V4dGVudCkge1xuICB2YXIgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4oeik7XG4gIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHopO1xuICB2YXIgdGlsZVNpemUgPSB0b1NpemUodGhpcy5nZXRUaWxlU2l6ZSh6KSwgdGhpcy50bXBTaXplXyk7XG4gIHZhciBtaW5YID0gb3JpZ2luWzBdICsgdGlsZVJhbmdlLm1pblggKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb247XG4gIHZhciBtYXhYID0gb3JpZ2luWzBdICsgKHRpbGVSYW5nZS5tYXhYICsgMSkgKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb247XG4gIHZhciBtaW5ZID0gb3JpZ2luWzFdICsgdGlsZVJhbmdlLm1pblkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gIHZhciBtYXhZID0gb3JpZ2luWzFdICsgKHRpbGVSYW5nZS5tYXhZICsgMSkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gIHJldHVybiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBvcHRfZXh0ZW50KTtcbn07XG5cbi8qKlxuICogR2V0IGEgdGlsZSByYW5nZSBmb3IgdGhlIGdpdmVuIGV4dGVudCBhbmQgaW50ZWdlciB6b29tIGxldmVsLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdD19IG9wdF90aWxlUmFuZ2UgVGVtcG9yYXJ5IHRpbGUgcmFuZ2Ugb2JqZWN0LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFRpbGUgcmFuZ2UuXG4gKi9cblRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaID0gZnVuY3Rpb24gZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWiAoZXh0ZW50LCB6LCBvcHRfdGlsZVJhbmdlKSB7XG4gIHZhciB0aWxlQ29vcmQgPSB0bXBUaWxlQ29vcmQ7XG4gIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyhleHRlbnRbMF0sIGV4dGVudFsxXSwgeiwgZmFsc2UsIHRpbGVDb29yZCk7XG4gIHZhciBtaW5YID0gdGlsZUNvb3JkWzFdO1xuICB2YXIgbWluWSA9IHRpbGVDb29yZFsyXTtcbiAgdGhpcy5nZXRUaWxlQ29vcmRGb3JYWUFuZFpfKGV4dGVudFsyXSwgZXh0ZW50WzNdLCB6LCB0cnVlLCB0aWxlQ29vcmQpO1xuICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UobWluWCwgdGlsZUNvb3JkWzFdLCBtaW5ZLCB0aWxlQ29vcmRbMl0sIG9wdF90aWxlUmFuZ2UpO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRpbGUgY2VudGVyLlxuICovXG5UaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkQ2VudGVyID0gZnVuY3Rpb24gZ2V0VGlsZUNvb3JkQ2VudGVyICh0aWxlQ29vcmQpIHtcbiAgdmFyIG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHRpbGVDb29yZFswXSk7XG4gIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHRpbGVDb29yZFswXSk7XG4gIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHRpbGVDb29yZFswXSksIHRoaXMudG1wU2l6ZV8pO1xuICByZXR1cm4gW1xuICAgIG9yaWdpblswXSArICh0aWxlQ29vcmRbMV0gKyAwLjUpICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uLFxuICAgIG9yaWdpblsxXSArICh0aWxlQ29vcmRbMl0gKyAwLjUpICogdGlsZVNpemVbMV0gKiByZXNvbHV0aW9uXG4gIF07XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZXh0ZW50IG9mIGEgdGlsZSBjb29yZGluYXRlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudD19IG9wdF9leHRlbnQgVGVtcG9yYXJ5IGV4dGVudCBvYmplY3QuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gKiBAYXBpXG4gKi9cblRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRFeHRlbnQgPSBmdW5jdGlvbiBnZXRUaWxlQ29vcmRFeHRlbnQgKHRpbGVDb29yZCwgb3B0X2V4dGVudCkge1xuICB2YXIgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4odGlsZUNvb3JkWzBdKTtcbiAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24odGlsZUNvb3JkWzBdKTtcbiAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUodGlsZUNvb3JkWzBdKSwgdGhpcy50bXBTaXplXyk7XG4gIHZhciBtaW5YID0gb3JpZ2luWzBdICsgdGlsZUNvb3JkWzFdICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uO1xuICB2YXIgbWluWSA9IG9yaWdpblsxXSArIHRpbGVDb29yZFsyXSAqIHRpbGVTaXplWzFdICogcmVzb2x1dGlvbjtcbiAgdmFyIG1heFggPSBtaW5YICsgdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uO1xuICB2YXIgbWF4WSA9IG1pblkgKyB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gIHJldHVybiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBvcHRfZXh0ZW50KTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSB0aWxlIGNvb3JkaW5hdGUgZm9yIHRoZSBnaXZlbiBtYXAgY29vcmRpbmF0ZSBhbmQgcmVzb2x1dGlvbi5UaGlzXG4gKiBtZXRob2QgY29uc2lkZXJzIHRoYXQgY29vcmRpbmF0ZXMgdGhhdCBpbnRlcnNlY3QgdGlsZSBib3VuZGFyaWVzIHNob3VsZCBiZVxuICogYXNzaWduZWQgdGhlIGhpZ2hlciB0aWxlIGNvb3JkaW5hdGUuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQ9fSBvcHRfdGlsZUNvb3JkIERlc3RpbmF0aW9uIGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5UaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRSZXNvbHV0aW9uID0gZnVuY3Rpb24gZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRSZXNvbHV0aW9uIChjb29yZGluYXRlLCByZXNvbHV0aW9uLCBvcHRfdGlsZUNvb3JkKSB7XG4gIHJldHVybiB0aGlzLmdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8oXG4gICAgY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSwgcmVzb2x1dGlvbiwgZmFsc2UsIG9wdF90aWxlQ29vcmQpO1xufTtcblxuLyoqXG4gKiBOb3RlIHRoYXQgdGhpcyBtZXRob2Qgc2hvdWxkIG5vdCBiZSBjYWxsZWQgZm9yIHJlc29sdXRpb25zIHRoYXQgY29ycmVzcG9uZFxuICogdG8gYW4gaW50ZWdlciB6b29tIGxldmVsLkluc3RlYWQgY2FsbCB0aGUgYGdldFRpbGVDb29yZEZvclhZQW5kWl9gIG1ldGhvZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbiAoZm9yIGEgbm9uLWludGVnZXIgem9vbSBsZXZlbCkuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgSW5zdGVhZCBvZiBsZXR0aW5nIGVkZ2VcbiAqICAgaW50ZXJzZWN0aW9ucyBnbyB0byB0aGUgaGlnaGVyIHRpbGUgY29vcmRpbmF0ZSwgbGV0IGVkZ2UgaW50ZXJzZWN0aW9uc1xuICogICBnbyB0byB0aGUgbG93ZXIgdGlsZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkPX0gb3B0X3RpbGVDb29yZCBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcHJpdmF0ZVxuICovXG5UaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRm9yWFlBbmRSZXNvbHV0aW9uXyA9IGZ1bmN0aW9uIGdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8gKHgsIHksIHJlc29sdXRpb24sIHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3ksIG9wdF90aWxlQ29vcmQpIHtcbiAgdmFyIHogPSB0aGlzLmdldFpGb3JSZXNvbHV0aW9uKHJlc29sdXRpb24pO1xuICB2YXIgc2NhbGUgPSByZXNvbHV0aW9uIC8gdGhpcy5nZXRSZXNvbHV0aW9uKHopO1xuICB2YXIgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4oeik7XG4gIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHopLCB0aGlzLnRtcFNpemVfKTtcblxuICB2YXIgYWRqdXN0WCA9IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgPyAwLjUgOiAwO1xuICB2YXIgYWRqdXN0WSA9IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgPyAwIDogMC41O1xuICB2YXIgeEZyb21PcmlnaW4gPSBNYXRoLmZsb29yKCh4IC0gb3JpZ2luWzBdKSAvIHJlc29sdXRpb24gKyBhZGp1c3RYKTtcbiAgdmFyIHlGcm9tT3JpZ2luID0gTWF0aC5mbG9vcigoeSAtIG9yaWdpblsxXSkgLyByZXNvbHV0aW9uICsgYWRqdXN0WSk7XG4gIHZhciB0aWxlQ29vcmRYID0gc2NhbGUgKiB4RnJvbU9yaWdpbiAvIHRpbGVTaXplWzBdO1xuICB2YXIgdGlsZUNvb3JkWSA9IHNjYWxlICogeUZyb21PcmlnaW4gLyB0aWxlU2l6ZVsxXTtcblxuICBpZiAocmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSkge1xuICAgIHRpbGVDb29yZFggPSBNYXRoLmNlaWwodGlsZUNvb3JkWCkgLSAxO1xuICAgIHRpbGVDb29yZFkgPSBNYXRoLmNlaWwodGlsZUNvb3JkWSkgLSAxO1xuICB9IGVsc2Uge1xuICAgIHRpbGVDb29yZFggPSBNYXRoLmZsb29yKHRpbGVDb29yZFgpO1xuICAgIHRpbGVDb29yZFkgPSBNYXRoLmZsb29yKHRpbGVDb29yZFkpO1xuICB9XG5cbiAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZUNvb3JkKHosIHRpbGVDb29yZFgsIHRpbGVDb29yZFksIG9wdF90aWxlQ29vcmQpO1xufTtcblxuLyoqXG4gKiBBbHRob3VnaCB0aGVyZSBpcyByZXBldGl0aW9uIGJldHdlZW4gdGhpcyBtZXRob2QgYW5kIGBnZXRUaWxlQ29vcmRGb3JYWUFuZFJlc29sdXRpb25fYCxcbiAqIHRoZXkgc2hvdWxkIGhhdmUgc2VwYXJhdGUgaW1wbGVtZW50YXRpb25zLlRoaXMgbWV0aG9kIGlzIGZvciBpbnRlZ2VyIHpvb21cbiAqIGxldmVscy5UaGUgb3RoZXIgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBmb3IgcmVzb2x1dGlvbnMgY29ycmVzcG9uZGluZ1xuICogdG8gbm9uLWludGVnZXIgem9vbSBsZXZlbHMuXG4gKiBAcGFyYW0ge251bWJlcn0geCBNYXAgeCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgTWFwIHkgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSBJbnN0ZWFkIG9mIGxldHRpbmcgZWRnZVxuICogICBpbnRlcnNlY3Rpb25zIGdvIHRvIHRoZSBoaWdoZXIgdGlsZSBjb29yZGluYXRlLCBsZXQgZWRnZSBpbnRlcnNlY3Rpb25zXG4gKiAgIGdvIHRvIHRoZSBsb3dlciB0aWxlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQ9fSBvcHRfdGlsZUNvb3JkIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkIG9iamVjdC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwcml2YXRlXG4gKi9cblRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRGb3JYWUFuZFpfID0gZnVuY3Rpb24gZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyAoeCwgeSwgeiwgcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSwgb3B0X3RpbGVDb29yZCkge1xuICB2YXIgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4oeik7XG4gIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHopO1xuICB2YXIgdGlsZVNpemUgPSB0b1NpemUodGhpcy5nZXRUaWxlU2l6ZSh6KSwgdGhpcy50bXBTaXplXyk7XG5cbiAgdmFyIGFkanVzdFggPSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5ID8gMC41IDogMDtcbiAgdmFyIGFkanVzdFkgPSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5ID8gMCA6IDAuNTtcbiAgdmFyIHhGcm9tT3JpZ2luID0gTWF0aC5mbG9vcigoeCAtIG9yaWdpblswXSkgLyByZXNvbHV0aW9uICsgYWRqdXN0WCk7XG4gIHZhciB5RnJvbU9yaWdpbiA9IE1hdGguZmxvb3IoKHkgLSBvcmlnaW5bMV0pIC8gcmVzb2x1dGlvbiArIGFkanVzdFkpO1xuICB2YXIgdGlsZUNvb3JkWCA9IHhGcm9tT3JpZ2luIC8gdGlsZVNpemVbMF07XG4gIHZhciB0aWxlQ29vcmRZID0geUZyb21PcmlnaW4gLyB0aWxlU2l6ZVsxXTtcblxuICBpZiAocmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSkge1xuICAgIHRpbGVDb29yZFggPSBNYXRoLmNlaWwodGlsZUNvb3JkWCkgLSAxO1xuICAgIHRpbGVDb29yZFkgPSBNYXRoLmNlaWwodGlsZUNvb3JkWSkgLSAxO1xuICB9IGVsc2Uge1xuICAgIHRpbGVDb29yZFggPSBNYXRoLmZsb29yKHRpbGVDb29yZFgpO1xuICAgIHRpbGVDb29yZFkgPSBNYXRoLmZsb29yKHRpbGVDb29yZFkpO1xuICB9XG5cbiAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZUNvb3JkKHosIHRpbGVDb29yZFgsIHRpbGVDb29yZFksIG9wdF90aWxlQ29vcmQpO1xufTtcblxuLyoqXG4gKiBHZXQgYSB0aWxlIGNvb3JkaW5hdGUgZ2l2ZW4gYSBtYXAgY29vcmRpbmF0ZSBhbmQgem9vbSBsZXZlbC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0geiBab29tIGxldmVsLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkPX0gb3B0X3RpbGVDb29yZCBEZXN0aW5hdGlvbiBpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkIG9iamVjdC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEZvckNvb3JkQW5kWiA9IGZ1bmN0aW9uIGdldFRpbGVDb29yZEZvckNvb3JkQW5kWiAoY29vcmRpbmF0ZSwgeiwgb3B0X3RpbGVDb29yZCkge1xuICByZXR1cm4gdGhpcy5nZXRUaWxlQ29vcmRGb3JYWUFuZFpfKFxuICAgIGNvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0sIHosIGZhbHNlLCBvcHRfdGlsZUNvb3JkKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICogQHJldHVybiB7bnVtYmVyfSBUaWxlIHJlc29sdXRpb24uXG4gKi9cblRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRSZXNvbHV0aW9uID0gZnVuY3Rpb24gZ2V0VGlsZUNvb3JkUmVzb2x1dGlvbiAodGlsZUNvb3JkKSB7XG4gIHJldHVybiB0aGlzLnJlc29sdXRpb25zX1t0aWxlQ29vcmRbMF1dO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIHRpbGUgc2l6ZSBmb3IgYSB6b29tIGxldmVsLiBUaGUgdHlwZSBvZiB0aGUgcmV0dXJuIHZhbHVlIG1hdGNoZXMgdGhlXG4gKiBgdGlsZVNpemVgIG9yIGB0aWxlU2l6ZXNgIHRoYXQgdGhlIHRpbGUgZ3JpZCB3YXMgY29uZmlndXJlZCB3aXRoLiBUbyBhbHdheXNcbiAqIGdldCBhbiBgaW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplYCwgcnVuIHRoZSByZXN1bHQgdGhyb3VnaCBgaW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplLnRvU2l6ZSgpYC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB6IFouXG4gKiBAcmV0dXJuIHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBUaWxlIHNpemUuXG4gKiBAYXBpXG4gKi9cblRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlU2l6ZSA9IGZ1bmN0aW9uIGdldFRpbGVTaXplICh6KSB7XG4gIGlmICh0aGlzLnRpbGVTaXplXykge1xuICAgIHJldHVybiB0aGlzLnRpbGVTaXplXztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGhpcy50aWxlU2l6ZXNfW3pdO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB6IFpvb20gbGV2ZWwuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gRXh0ZW50IHRpbGUgcmFuZ2UgZm9yIHRoZSBzcGVjaWZpZWQgem9vbSBsZXZlbC5cbiAqL1xuVGlsZUdyaWQucHJvdG90eXBlLmdldEZ1bGxUaWxlUmFuZ2UgPSBmdW5jdGlvbiBnZXRGdWxsVGlsZVJhbmdlICh6KSB7XG4gIGlmICghdGhpcy5mdWxsVGlsZVJhbmdlc18pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGhpcy5mdWxsVGlsZVJhbmdlc19bel07XG4gIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2RpcmVjdGlvbiBJZiAwLCB0aGUgbmVhcmVzdCByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC5cbiAqICAgSWYgMSwgdGhlIG5lYXJlc3QgbG93ZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGUgbmVhcmVzdFxuICogICBoaWdoZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuIERlZmF1bHQgaXMgMC5cbiAqIEByZXR1cm4ge251bWJlcn0gWi5cbiAqIEBhcGlcbiAqL1xuVGlsZUdyaWQucHJvdG90eXBlLmdldFpGb3JSZXNvbHV0aW9uID0gZnVuY3Rpb24gZ2V0WkZvclJlc29sdXRpb24gKHJlc29sdXRpb24sIG9wdF9kaXJlY3Rpb24pIHtcbiAgdmFyIHogPSBsaW5lYXJGaW5kTmVhcmVzdCh0aGlzLnJlc29sdXRpb25zXywgcmVzb2x1dGlvbiwgb3B0X2RpcmVjdGlvbiB8fCAwKTtcbiAgcmV0dXJuIGNsYW1wKHosIHRoaXMubWluWm9vbSwgdGhpcy5tYXhab29tKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHshaW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudCBmb3IgdGhpcyB0aWxlIGdyaWQuXG4gKiBAcHJpdmF0ZVxuICovXG5UaWxlR3JpZC5wcm90b3R5cGUuY2FsY3VsYXRlVGlsZVJhbmdlc18gPSBmdW5jdGlvbiBjYWxjdWxhdGVUaWxlUmFuZ2VzXyAoZXh0ZW50KSB7XG4gIHZhciBsZW5ndGggPSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGg7XG4gIHZhciBmdWxsVGlsZVJhbmdlcyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICBmb3IgKHZhciB6ID0gdGhpcy5taW5ab29tOyB6IDwgbGVuZ3RoOyArK3opIHtcbiAgICBmdWxsVGlsZVJhbmdlc1t6XSA9IHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihleHRlbnQsIHopO1xuICB9XG4gIHRoaXMuZnVsbFRpbGVSYW5nZXNfID0gZnVsbFRpbGVSYW5nZXM7XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IFRpbGVHcmlkO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlR3JpZC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZWdyaWRcbiAqL1xuaW1wb3J0IHtERUZBVUxUX01BWF9aT09NLCBERUZBVUxUX1RJTEVfU0laRX0gZnJvbSAnLi90aWxlZ3JpZC9jb21tb24uanMnO1xuaW1wb3J0IHt0b1NpemV9IGZyb20gJy4vc2l6ZS5qcyc7XG5pbXBvcnQge2NvbnRhaW5zQ29vcmRpbmF0ZSwgY3JlYXRlT3JVcGRhdGUsIGdldENvcm5lciwgZ2V0SGVpZ2h0LCBnZXRXaWR0aH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IENvcm5lciBmcm9tICcuL2V4dGVudC9Db3JuZXIuanMnO1xuaW1wb3J0IHtnZXQgYXMgZ2V0UHJvamVjdGlvbiwgTUVURVJTX1BFUl9VTklUfSBmcm9tICcuL3Byb2ouanMnO1xuaW1wb3J0IFVuaXRzIGZyb20gJy4vcHJvai9Vbml0cy5qcyc7XG5pbXBvcnQgVGlsZUdyaWQgZnJvbSAnLi90aWxlZ3JpZC9UaWxlR3JpZC5qcyc7XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gRGVmYXVsdCB0aWxlIGdyaWQgZm9yIHRoZVxuICogcGFzc2VkIHByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgdmFyIHRpbGVHcmlkID0gcHJvamVjdGlvbi5nZXREZWZhdWx0VGlsZUdyaWQoKTtcbiAgaWYgKCF0aWxlR3JpZCkge1xuICAgIHRpbGVHcmlkID0gY3JlYXRlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICBwcm9qZWN0aW9uLnNldERlZmF1bHRUaWxlR3JpZCh0aWxlR3JpZCk7XG4gIH1cbiAgcmV0dXJuIHRpbGVHcmlkO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtUaWxlR3JpZH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gd3JhcFgodGlsZUdyaWQsIHRpbGVDb29yZCwgcHJvamVjdGlvbikge1xuICB2YXIgeiA9IHRpbGVDb29yZFswXTtcbiAgdmFyIGNlbnRlciA9IHRpbGVHcmlkLmdldFRpbGVDb29yZENlbnRlcih0aWxlQ29vcmQpO1xuICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IGV4dGVudEZyb21Qcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICBpZiAoIWNvbnRhaW5zQ29vcmRpbmF0ZShwcm9qZWN0aW9uRXh0ZW50LCBjZW50ZXIpKSB7XG4gICAgdmFyIHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICB2YXIgd29ybGRzQXdheSA9IE1hdGguY2VpbCgocHJvamVjdGlvbkV4dGVudFswXSAtIGNlbnRlclswXSkgLyB3b3JsZFdpZHRoKTtcbiAgICBjZW50ZXJbMF0gKz0gd29ybGRXaWR0aCAqIHdvcmxkc0F3YXk7XG4gICAgcmV0dXJuIHRpbGVHcmlkLmdldFRpbGVDb29yZEZvckNvb3JkQW5kWihjZW50ZXIsIHopO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0aWxlQ29vcmQ7XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfbWF4Wm9vbSBNYXhpbXVtIHpvb20gbGV2ZWwgKGRlZmF1bHQgaXNcbiAqICAgICBERUZBVUxUX01BWF9aT09NKS5cbiAqIEBwYXJhbSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplPX0gb3B0X3RpbGVTaXplIFRpbGUgc2l6ZSAoZGVmYXVsdCB1c2VzXG4gKiAgICAgREVGQVVMVF9USUxFX1NJWkUpLlxuICogQHBhcmFtIHtDb3JuZXI9fSBvcHRfY29ybmVyIEV4dGVudCBjb3JuZXIgKGRlZmF1bHQgaXMgYCd0b3AtbGVmdCdgKS5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gVGlsZUdyaWQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGb3JFeHRlbnQoZXh0ZW50LCBvcHRfbWF4Wm9vbSwgb3B0X3RpbGVTaXplLCBvcHRfY29ybmVyKSB7XG4gIHZhciBjb3JuZXIgPSBvcHRfY29ybmVyICE9PSB1bmRlZmluZWQgPyBvcHRfY29ybmVyIDogQ29ybmVyLlRPUF9MRUZUO1xuXG4gIHZhciByZXNvbHV0aW9ucyA9IHJlc29sdXRpb25zRnJvbUV4dGVudChleHRlbnQsIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUpO1xuXG4gIHJldHVybiBuZXcgVGlsZUdyaWQoe1xuICAgIGV4dGVudDogZXh0ZW50LFxuICAgIG9yaWdpbjogZ2V0Q29ybmVyKGV4dGVudCwgY29ybmVyKSxcbiAgICByZXNvbHV0aW9uczogcmVzb2x1dGlvbnMsXG4gICAgdGlsZVNpemU6IG9wdF90aWxlU2l6ZVxuICB9KTtcbn1cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFhZWk9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBFeHRlbnQgZm9yIHRoZSB0aWxlIGdyaWQuIFRoZSBvcmlnaW4gZm9yIGFuIFhZWiB0aWxlIGdyaWQgaXMgdGhlXG4gKiB0b3AtbGVmdCBjb3JuZXIgb2YgdGhlIGV4dGVudC4gVGhlIHplcm8gbGV2ZWwgb2YgdGhlIGdyaWQgaXMgZGVmaW5lZCBieSB0aGUgcmVzb2x1dGlvbiBhdCB3aGljaCBvbmUgdGlsZSBmaXRzIGluIHRoZVxuICogcHJvdmlkZWQgZXh0ZW50LiBJZiBub3QgcHJvdmlkZWQsIHRoZSBleHRlbnQgb2YgdGhlIEVQU0c6Mzg1NyBwcm9qZWN0aW9uIGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIE1heGltdW0gem9vbS4gVGhlIGRlZmF1bHQgaXMgYDQyYC4gVGhpcyBkZXRlcm1pbmVzIHRoZSBudW1iZXIgb2YgbGV2ZWxzXG4gKiBpbiB0aGUgZ3JpZCBzZXQuIEZvciBleGFtcGxlLCBhIGBtYXhab29tYCBvZiAyMSBtZWFucyB0aGVyZSBhcmUgMjIgbGV2ZWxzIGluIHRoZSBncmlkIHNldC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbT0wXSBNaW5pbXVtIHpvb20uXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW3RpbGVTaXplPVsyNTYsIDI1Nl1dIFRpbGUgc2l6ZSBpbiBwaXhlbHMuXG4gKi9cblxuXG4vKipcbiAqIENyZWF0ZXMgYSB0aWxlIGdyaWQgd2l0aCBhIHN0YW5kYXJkIFhZWiB0aWxpbmcgc2NoZW1lLlxuICogQHBhcmFtIHtYWVpPcHRpb25zPX0gb3B0X29wdGlvbnMgVGlsZSBncmlkIG9wdGlvbnMuXG4gKiBAcmV0dXJuIHshVGlsZUdyaWR9IFRpbGUgZ3JpZCBpbnN0YW5jZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVhZWihvcHRfb3B0aW9ucykge1xuICAvKiogQHR5cGUge1hZWk9wdGlvbnN9ICovXG4gIHZhciB4eXpPcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG5cbiAgdmFyIGV4dGVudCA9IHh5ek9wdGlvbnMuZXh0ZW50IHx8IGdldFByb2plY3Rpb24oJ0VQU0c6Mzg1NycpLmdldEV4dGVudCgpO1xuXG4gIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5PcHRpb25zfSAqL1xuICB2YXIgZ3JpZE9wdGlvbnMgPSB7XG4gICAgZXh0ZW50OiBleHRlbnQsXG4gICAgbWluWm9vbTogeHl6T3B0aW9ucy5taW5ab29tLFxuICAgIHRpbGVTaXplOiB4eXpPcHRpb25zLnRpbGVTaXplLFxuICAgIHJlc29sdXRpb25zOiByZXNvbHV0aW9uc0Zyb21FeHRlbnQoXG4gICAgICBleHRlbnQsXG4gICAgICB4eXpPcHRpb25zLm1heFpvb20sXG4gICAgICB4eXpPcHRpb25zLnRpbGVTaXplXG4gICAgKVxuICB9O1xuICByZXR1cm4gbmV3IFRpbGVHcmlkKGdyaWRPcHRpb25zKTtcbn1cblxuXG4vKipcbiAqIENyZWF0ZSBhIHJlc29sdXRpb25zIGFycmF5IGZyb20gYW4gZXh0ZW50LiAgQSB6b29tIGZhY3RvciBvZiAyIGlzIGFzc3VtZWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X21heFpvb20gTWF4aW11bSB6b29tIGxldmVsIChkZWZhdWx0IGlzXG4gKiAgICAgREVGQVVMVF9NQVhfWk9PTSkuXG4gKiBAcGFyYW0ge251bWJlcnxpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZT19IG9wdF90aWxlU2l6ZSBUaWxlIHNpemUgKGRlZmF1bHQgdXNlc1xuICogICAgIERFRkFVTFRfVElMRV9TSVpFKS5cbiAqIEByZXR1cm4geyFBcnJheTxudW1iZXI+fSBSZXNvbHV0aW9ucyBhcnJheS5cbiAqL1xuZnVuY3Rpb24gcmVzb2x1dGlvbnNGcm9tRXh0ZW50KGV4dGVudCwgb3B0X21heFpvb20sIG9wdF90aWxlU2l6ZSkge1xuICB2YXIgbWF4Wm9vbSA9IG9wdF9tYXhab29tICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdF9tYXhab29tIDogREVGQVVMVF9NQVhfWk9PTTtcblxuICB2YXIgaGVpZ2h0ID0gZ2V0SGVpZ2h0KGV4dGVudCk7XG4gIHZhciB3aWR0aCA9IGdldFdpZHRoKGV4dGVudCk7XG5cbiAgdmFyIHRpbGVTaXplID0gdG9TaXplKG9wdF90aWxlU2l6ZSAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRfdGlsZVNpemUgOiBERUZBVUxUX1RJTEVfU0laRSk7XG4gIHZhciBtYXhSZXNvbHV0aW9uID0gTWF0aC5tYXgoXG4gICAgd2lkdGggLyB0aWxlU2l6ZVswXSwgaGVpZ2h0IC8gdGlsZVNpemVbMV0pO1xuXG4gIHZhciBsZW5ndGggPSBtYXhab29tICsgMTtcbiAgdmFyIHJlc29sdXRpb25zID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gIGZvciAodmFyIHogPSAwOyB6IDwgbGVuZ3RoOyArK3opIHtcbiAgICByZXNvbHV0aW9uc1t6XSA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdygyLCB6KTtcbiAgfVxuICByZXR1cm4gcmVzb2x1dGlvbnM7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfbWF4Wm9vbSBNYXhpbXVtIHpvb20gbGV2ZWwgKGRlZmF1bHQgaXNcbiAqICAgICBERUZBVUxUX01BWF9aT09NKS5cbiAqIEBwYXJhbSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplPX0gb3B0X3RpbGVTaXplIFRpbGUgc2l6ZSAoZGVmYXVsdCB1c2VzXG4gKiAgICAgREVGQVVMVF9USUxFX1NJWkUpLlxuICogQHBhcmFtIHtDb3JuZXI9fSBvcHRfY29ybmVyIEV4dGVudCBjb3JuZXIgKGRlZmF1bHQgaXMgYCd0b3AtbGVmdCdgKS5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gVGlsZUdyaWQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24sIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUsIG9wdF9jb3JuZXIpIHtcbiAgdmFyIGV4dGVudCA9IGV4dGVudEZyb21Qcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICByZXR1cm4gY3JlYXRlRm9yRXh0ZW50KGV4dGVudCwgb3B0X21heFpvb20sIG9wdF90aWxlU2l6ZSwgb3B0X2Nvcm5lcik7XG59XG5cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHRpbGUgZ3JpZCBleHRlbnQgZnJvbSBhIHByb2plY3Rpb24uICBJZiB0aGUgcHJvamVjdGlvbiBoYXMgYW5cbiAqIGV4dGVudCwgaXQgaXMgdXNlZC4gIElmIG5vdCwgYSBnbG9iYWwgZXh0ZW50IGlzIGFzc3VtZWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbnRGcm9tUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gIHByb2plY3Rpb24gPSBnZXRQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICB2YXIgZXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgaWYgKCFleHRlbnQpIHtcbiAgICB2YXIgaGFsZiA9IDE4MCAqIE1FVEVSU19QRVJfVU5JVFtVbml0cy5ERUdSRUVTXSAvIHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgIGV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlKC1oYWxmLCAtaGFsZiwgaGFsZiwgaGFsZik7XG4gIH1cbiAgcmV0dXJuIGV4dGVudDtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGlsZWdyaWQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9UaWxlXG4gKi9cbmltcG9ydCB7YWJzdHJhY3R9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IFRpbGVDYWNoZSBmcm9tICcuLi9UaWxlQ2FjaGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQge2VxdWl2YWxlbnR9IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IHt0b1NpemUsIHNjYWxlIGFzIHNjYWxlU2l6ZX0gZnJvbSAnLi4vc2l6ZS5qcyc7XG5pbXBvcnQgU291cmNlIGZyb20gJy4vU291cmNlLmpzJztcbmltcG9ydCB7Z2V0S2V5WlhZLCB3aXRoaW5FeHRlbnRBbmRafSBmcm9tICcuLi90aWxlY29vcmQuanMnO1xuaW1wb3J0IHt3cmFwWCwgZ2V0Rm9yUHJvamVjdGlvbiBhcyBnZXRUaWxlR3JpZEZvclByb2plY3Rpb259IGZyb20gJy4uL3RpbGVncmlkLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLkF0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc11cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NhY2hlU2l6ZV1cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29wYXF1ZV1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGlsZVBpeGVsUmF0aW9dXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFtzdGF0ZV1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gW3RpbGVHcmlkXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9dHJ1ZV1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbl1cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBba2V5XVxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBCYXNlIGNsYXNzIGZvciBzb3VyY2VzIHByb3ZpZGluZyBpbWFnZXMgZGl2aWRlZCBpbnRvIGEgdGlsZSBncmlkLlxuICogQGFic3RyYWN0XG4gKiBAYXBpXG4gKi9cbnZhciBUaWxlU291cmNlID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoU291cmNlKSB7XG4gIGZ1bmN0aW9uIFRpbGVTb3VyY2Uob3B0aW9ucykge1xuXG4gICAgU291cmNlLmNhbGwodGhpcywge1xuICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgIGF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlOiBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlLFxuICAgICAgcHJvamVjdGlvbjogb3B0aW9ucy5wcm9qZWN0aW9uLFxuICAgICAgc3RhdGU6IG9wdGlvbnMuc3RhdGUsXG4gICAgICB3cmFwWDogb3B0aW9ucy53cmFwWFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLm9wYXF1ZV8gPSBvcHRpb25zLm9wYXF1ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vcGFxdWUgOiBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVQaXhlbFJhdGlvXyA9IG9wdGlvbnMudGlsZVBpeGVsUmF0aW8gIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLnRpbGVQaXhlbFJhdGlvIDogMTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVHcmlkID0gb3B0aW9ucy50aWxlR3JpZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aWxlR3JpZCA6IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGVDYWNoZS5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMudGlsZUNhY2hlID0gbmV3IFRpbGVDYWNoZShvcHRpb25zLmNhY2hlU2l6ZSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX1cbiAgICAgKi9cbiAgICB0aGlzLnRtcFNpemUgPSBbMCwgMF07XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5rZXlfID0gb3B0aW9ucy5rZXkgfHwgJyc7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuT3B0aW9uc31cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVPcHRpb25zID0ge3RyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbn07XG5cbiAgfVxuXG4gIGlmICggU291cmNlICkgVGlsZVNvdXJjZS5fX3Byb3RvX18gPSBTb3VyY2U7XG4gIFRpbGVTb3VyY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggU291cmNlICYmIFNvdXJjZS5wcm90b3R5cGUgKTtcbiAgVGlsZVNvdXJjZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUaWxlU291cmNlO1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgKi9cbiAgVGlsZVNvdXJjZS5wcm90b3R5cGUuY2FuRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiBjYW5FeHBpcmVDYWNoZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGlsZUNhY2hlLmNhbkV4cGlyZUNhY2hlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQ+fSB1c2VkVGlsZXMgVXNlZCB0aWxlcy5cbiAgICovXG4gIFRpbGVTb3VyY2UucHJvdG90eXBlLmV4cGlyZUNhY2hlID0gZnVuY3Rpb24gZXhwaXJlQ2FjaGUgKHByb2plY3Rpb24sIHVzZWRUaWxlcykge1xuICAgIHZhciB0aWxlQ2FjaGUgPSB0aGlzLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgaWYgKHRpbGVDYWNoZSkge1xuICAgICAgdGlsZUNhY2hlLmV4cGlyZUNhY2hlKHVzZWRUaWxlcyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IFpvb20gbGV2ZWwuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdCk6KGJvb2xlYW58dm9pZCl9IGNhbGxiYWNrIENhbGxlZCB3aXRoIGVhY2hcbiAgICogICAgIGxvYWRlZCB0aWxlLiAgSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYGZhbHNlYCwgdGhlIHRpbGUgd2lsbCBub3QgYmVcbiAgICogICAgIGNvbnNpZGVyZWQgbG9hZGVkLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdGlsZSByYW5nZSBpcyBmdWxseSBjb3ZlcmVkIHdpdGggbG9hZGVkIHRpbGVzLlxuICAgKi9cbiAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZm9yRWFjaExvYWRlZFRpbGUgPSBmdW5jdGlvbiBmb3JFYWNoTG9hZGVkVGlsZSAocHJvamVjdGlvbiwgeiwgdGlsZVJhbmdlLCBjYWxsYmFjaykge1xuICAgIHZhciB0aWxlQ2FjaGUgPSB0aGlzLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgaWYgKCF0aWxlQ2FjaGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgY292ZXJlZCA9IHRydWU7XG4gICAgdmFyIHRpbGUsIHRpbGVDb29yZEtleSwgbG9hZGVkO1xuICAgIGZvciAodmFyIHggPSB0aWxlUmFuZ2UubWluWDsgeCA8PSB0aWxlUmFuZ2UubWF4WDsgKyt4KSB7XG4gICAgICBmb3IgKHZhciB5ID0gdGlsZVJhbmdlLm1pblk7IHkgPD0gdGlsZVJhbmdlLm1heFk7ICsreSkge1xuICAgICAgICB0aWxlQ29vcmRLZXkgPSBnZXRLZXlaWFkoeiwgeCwgeSk7XG4gICAgICAgIGxvYWRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodGlsZUNhY2hlLmNvbnRhaW5zS2V5KHRpbGVDb29yZEtleSkpIHtcbiAgICAgICAgICB0aWxlID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGlsZUNhY2hlLmdldCh0aWxlQ29vcmRLZXkpKTtcbiAgICAgICAgICBsb2FkZWQgPSB0aWxlLmdldFN0YXRlKCkgPT09IFRpbGVTdGF0ZS5MT0FERUQ7XG4gICAgICAgICAgaWYgKGxvYWRlZCkge1xuICAgICAgICAgICAgbG9hZGVkID0gKGNhbGxiYWNrKHRpbGUpICE9PSBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghbG9hZGVkKSB7XG4gICAgICAgICAgY292ZXJlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb3ZlcmVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4ge251bWJlcn0gR3V0dGVyLlxuICAgKi9cbiAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0R3V0dGVyRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIGdldEd1dHRlckZvclByb2plY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICByZXR1cm4gMDtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBrZXkgdG8gYmUgdXNlZCBmb3IgYWxsIHRpbGVzIGluIHRoZSBzb3VyY2UuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGtleSBmb3IgYWxsIHRpbGVzLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRLZXkgPSBmdW5jdGlvbiBnZXRLZXkgKCkge1xuICAgIHJldHVybiB0aGlzLmtleV87XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdmFsdWUgdG8gYmUgdXNlZCBhcyB0aGUga2V5IGZvciBhbGwgdGlsZXMgaW4gdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IGZvciB0aWxlcy5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgVGlsZVNvdXJjZS5wcm90b3R5cGUuc2V0S2V5ID0gZnVuY3Rpb24gc2V0S2V5IChrZXkpIHtcbiAgICBpZiAodGhpcy5rZXlfICE9PSBrZXkpIHtcbiAgICAgIHRoaXMua2V5XyA9IGtleTtcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBPcGFxdWUuXG4gICAqL1xuICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRPcGFxdWUgPSBmdW5jdGlvbiBnZXRPcGFxdWUgKHByb2plY3Rpb24pIHtcbiAgICByZXR1cm4gdGhpcy5vcGFxdWVfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiBnZXRSZXNvbHV0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGlsZUdyaWQuZ2V0UmVzb2x1dGlvbnMoKTtcbiAgfTtcblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGUuXG4gICAqL1xuICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlID0gZnVuY3Rpb24gZ2V0VGlsZSAoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHRpbGUgZ3JpZCBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFRpbGUgZ3JpZC5cbiAgICogQGFwaVxuICAgKi9cbiAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZUdyaWQgPSBmdW5jdGlvbiBnZXRUaWxlR3JpZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGlsZUdyaWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7IWltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFRpbGUgZ3JpZC5cbiAgICovXG4gIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIGdldFRpbGVHcmlkRm9yUHJvamVjdGlvbiQxIChwcm9qZWN0aW9uKSB7XG4gICAgaWYgKCF0aGlzLnRpbGVHcmlkKSB7XG4gICAgICByZXR1cm4gZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy50aWxlR3JpZDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZUNhY2hlLmpzXCIpLmRlZmF1bHR9IFRpbGUgY2FjaGUuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24gPSBmdW5jdGlvbiBnZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgdmFyIHRoaXNQcm9qID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgaWYgKHRoaXNQcm9qICYmICFlcXVpdmFsZW50KHRoaXNQcm9qLCBwcm9qZWN0aW9uKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnRpbGVDYWNoZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdGlsZSBwaXhlbCByYXRpbyBmb3IgdGhpcyBzb3VyY2UuIFN1YmNsYXNzZXMgbWF5IG92ZXJyaWRlIHRoaXNcbiAgICogbWV0aG9kLCB3aGljaCBpcyBtZWFudCB0byByZXR1cm4gYSBzdXBwb3J0ZWQgcGl4ZWwgcmF0aW8gdGhhdCBtYXRjaGVzIHRoZVxuICAgKiBwcm92aWRlZCBgcGl4ZWxSYXRpb2AgYXMgY2xvc2UgYXMgcG9zc2libGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcGl4ZWwgcmF0aW8uXG4gICAqL1xuICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlUGl4ZWxSYXRpbyA9IGZ1bmN0aW9uIGdldFRpbGVQaXhlbFJhdGlvIChwaXhlbFJhdGlvKSB7XG4gICAgcmV0dXJuIHRoaXMudGlsZVBpeGVsUmF0aW9fO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0geiBaLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFRpbGUgc2l6ZS5cbiAgICovXG4gIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFRpbGVQaXhlbFNpemUgPSBmdW5jdGlvbiBnZXRUaWxlUGl4ZWxTaXplICh6LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgdmFyIHRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgdmFyIHRpbGVQaXhlbFJhdGlvID0gdGhpcy5nZXRUaWxlUGl4ZWxSYXRpbyhwaXhlbFJhdGlvKTtcbiAgICB2YXIgdGlsZVNpemUgPSB0b1NpemUodGlsZUdyaWQuZ2V0VGlsZVNpemUoeiksIHRoaXMudG1wU2l6ZSk7XG4gICAgaWYgKHRpbGVQaXhlbFJhdGlvID09IDEpIHtcbiAgICAgIHJldHVybiB0aWxlU2l6ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHNjYWxlU2l6ZSh0aWxlU2l6ZSwgdGlsZVBpeGVsUmF0aW8sIHRoaXMudG1wU2l6ZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgdGlsZSBjb29yZGluYXRlIHdyYXBwZWQgYXJvdW5kIHRoZSB4LWF4aXMuIFdoZW4gdGhlIHRpbGUgY29vcmRpbmF0ZVxuICAgKiBpcyBvdXRzaWRlIHRoZSByZXNvbHV0aW9uIGFuZCBleHRlbnQgcmFuZ2Ugb2YgdGhlIHRpbGUgZ3JpZCwgYG51bGxgIHdpbGwgYmVcbiAgICogcmV0dXJuZWQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdD19IG9wdF9wcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZSB0byBiZSBwYXNzZWQgdG8gdGhlIHRpbGVVcmxGdW5jdGlvbiBvclxuICAgKiAgICAgbnVsbCBpZiBubyB0aWxlIFVSTCBzaG91bGQgYmUgY3JlYXRlZCBmb3IgdGhlIHBhc3NlZCBgdGlsZUNvb3JkYC5cbiAgICovXG4gIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbiA9IGZ1bmN0aW9uIGdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbiAodGlsZUNvb3JkLCBvcHRfcHJvamVjdGlvbikge1xuICAgIHZhciBwcm9qZWN0aW9uID0gb3B0X3Byb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRfcHJvamVjdGlvbiA6IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgIHZhciB0aWxlR3JpZCA9IHRoaXMuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIGlmICh0aGlzLmdldFdyYXBYKCkgJiYgcHJvamVjdGlvbi5pc0dsb2JhbCgpKSB7XG4gICAgICB0aWxlQ29vcmQgPSB3cmFwWCh0aWxlR3JpZCwgdGlsZUNvb3JkLCBwcm9qZWN0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHdpdGhpbkV4dGVudEFuZFoodGlsZUNvb3JkLCB0aWxlR3JpZCkgPyB0aWxlQ29vcmQgOiBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgVGlsZVNvdXJjZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uIHJlZnJlc2ggKCkge1xuICAgIHRoaXMudGlsZUNhY2hlLmNsZWFyKCk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1hcmtzIGEgdGlsZSBjb29yZCBhcyBiZWluZyB1c2VkLCB3aXRob3V0IHRyaWdnZXJpbmcgYSBsb2FkLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKi9cbiAgVGlsZVNvdXJjZS5wcm90b3R5cGUudXNlVGlsZSA9IGZ1bmN0aW9uIHVzZVRpbGUgKHosIHgsIHksIHByb2plY3Rpb24pIHt9O1xuXG4gIHJldHVybiBUaWxlU291cmNlO1xufShTb3VyY2UpKTtcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvc291cmNlL1RpbGV+VGlsZVNvdXJjZX0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2YgdGhpc1xuICogdHlwZS5cbiAqL1xuZXhwb3J0IHZhciBUaWxlU291cmNlRXZlbnQgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudCkge1xuICBmdW5jdGlvbiBUaWxlU291cmNlRXZlbnQodHlwZSwgdGlsZSkge1xuXG4gICAgRXZlbnQuY2FsbCh0aGlzLCB0eXBlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB0aWxlIHJlbGF0ZWQgdG8gdGhlIGV2ZW50LlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMudGlsZSA9IHRpbGU7XG5cbiAgfVxuXG4gIGlmICggRXZlbnQgKSBUaWxlU291cmNlRXZlbnQuX19wcm90b19fID0gRXZlbnQ7XG4gIFRpbGVTb3VyY2VFdmVudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBFdmVudCAmJiBFdmVudC5wcm90b3R5cGUgKTtcbiAgVGlsZVNvdXJjZUV2ZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRpbGVTb3VyY2VFdmVudDtcblxuICByZXR1cm4gVGlsZVNvdXJjZUV2ZW50O1xufShFdmVudCkpO1xuXG5leHBvcnQgZGVmYXVsdCBUaWxlU291cmNlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvVGlsZUV2ZW50VHlwZVxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHRpbGUgc3RhcnRzIGxvYWRpbmcuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvc291cmNlL1RpbGUuVGlsZVNvdXJjZUV2ZW50I3RpbGVsb2Fkc3RhcnRcbiAgICogQGFwaVxuICAgKi9cbiAgVElMRUxPQURTVEFSVDogJ3RpbGVsb2Fkc3RhcnQnLFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHRpbGUgZmluaXNoZXMgbG9hZGluZywgZWl0aGVyIHdoZW4gaXRzIGRhdGEgaXMgbG9hZGVkLFxuICAgKiBvciB3aGVuIGxvYWRpbmcgd2FzIGFib3J0ZWQgYmVjYXVzZSB0aGUgdGlsZSBpcyBubyBsb25nZXIgbmVlZGVkLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9UaWxlLlRpbGVTb3VyY2VFdmVudCN0aWxlbG9hZGVuZFxuICAgKiBAYXBpXG4gICAqL1xuICBUSUxFTE9BREVORDogJ3RpbGVsb2FkZW5kJyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIGlmIHRpbGUgbG9hZGluZyByZXN1bHRzIGluIGFuIGVycm9yLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9UaWxlLlRpbGVTb3VyY2VFdmVudCN0aWxlbG9hZGVycm9yXG4gICAqIEBhcGlcbiAgICovXG4gIFRJTEVMT0FERVJST1I6ICd0aWxlbG9hZGVycm9yJ1xuXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlRXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvVGlsZUltYWdlXG4gKi9cbmltcG9ydCB7RU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT059IGZyb20gJy4uL3JlcHJvai9jb21tb24uanMnO1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IEltYWdlVGlsZSBmcm9tICcuLi9JbWFnZVRpbGUuanMnO1xuaW1wb3J0IFRpbGVDYWNoZSBmcm9tICcuLi9UaWxlQ2FjaGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IHtsaXN0ZW59IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHtlcXVpdmFsZW50LCBnZXQgYXMgZ2V0UHJvamVjdGlvbn0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQgUmVwcm9qVGlsZSBmcm9tICcuLi9yZXByb2ovVGlsZS5qcyc7XG5pbXBvcnQgVXJsVGlsZSBmcm9tICcuL1VybFRpbGUuanMnO1xuaW1wb3J0IHtnZXRLZXksIGdldEtleVpYWX0gZnJvbSAnLi4vdGlsZWNvb3JkLmpzJztcbmltcG9ydCB7Z2V0Rm9yUHJvamVjdGlvbiBhcyBnZXRUaWxlR3JpZEZvclByb2plY3Rpb259IGZyb20gJy4uL3RpbGVncmlkLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLkF0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplPTIwNDhdIENhY2hlIHNpemUuXG4gKiBAcHJvcGVydHkge251bGx8c3RyaW5nfSBbY3Jvc3NPcmlnaW5dIFRoZSBgY3Jvc3NPcmlnaW5gIGF0dHJpYnV0ZSBmb3IgbG9hZGVkIGltYWdlcy4gIE5vdGUgdGhhdFxuICogeW91IG11c3QgcHJvdmlkZSBhIGBjcm9zc09yaWdpbmAgdmFsdWUgaWYgeW91IGFyZSB1c2luZyB0aGUgV2ViR0wgcmVuZGVyZXIgb3IgaWYgeW91IHdhbnQgdG9cbiAqIGFjY2VzcyBwaXhlbCBkYXRhIHdpdGggdGhlIENhbnZhcyByZW5kZXJlci4gIFNlZVxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9DT1JTX2VuYWJsZWRfaW1hZ2UgZm9yIG1vcmUgZGV0YWlsLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlPXRydWVdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZD0wLjVdIE1heGltdW0gYWxsb3dlZCByZXByb2plY3Rpb24gZXJyb3IgKGluIHBpeGVscykuXG4gKiBIaWdoZXIgdmFsdWVzIGNhbiBpbmNyZWFzZSByZXByb2plY3Rpb24gcGVyZm9ybWFuY2UsIGJ1dCBkZWNyZWFzZSBwcmVjaXNpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH0gW3N0YXRlXSBTb3VyY2Ugc3RhdGUuXG4gKiBAcHJvcGVydHkge3R5cGVvZiBpbXBvcnQoXCIuLi9JbWFnZVRpbGUuanNcIikuZGVmYXVsdH0gW3RpbGVDbGFzc10gQ2xhc3MgdXNlZCB0byBpbnN0YW50aWF0ZSBpbWFnZSB0aWxlcy5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9JbWFnZVRpbGV+SW1hZ2VUaWxlfS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gW3RpbGVHcmlkXSBUaWxlIGdyaWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSBbdGlsZUxvYWRGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gbG9hZCBhIHRpbGUgZ2l2ZW4gYSBVUkwuIFRoZSBkZWZhdWx0IGlzXG4gKiBgYGBqc1xuICogZnVuY3Rpb24oaW1hZ2VUaWxlLCBzcmMpIHtcbiAqICAgaW1hZ2VUaWxlLmdldEltYWdlKCkuc3JjID0gc3JjO1xuICogfTtcbiAqIGBgYFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aWxlUGl4ZWxSYXRpbz0xXSBUaGUgcGl4ZWwgcmF0aW8gdXNlZCBieSB0aGUgdGlsZSBzZXJ2aWNlLiBGb3IgZXhhbXBsZSwgaWYgdGhlIHRpbGVcbiAqIHNlcnZpY2UgYWR2ZXJ0aXplcyAyNTZweCBieSAyNTZweCB0aWxlcyBidXQgYWN0dWFsbHkgc2VuZHMgNTEycHhcbiAqIGJ5IDUxMnB4IGltYWdlcyAoZm9yIHJldGluYS9oaWRwaSBkZXZpY2VzKSB0aGVuIGB0aWxlUGl4ZWxSYXRpb2BcbiAqIHNob3VsZCBiZSBzZXQgdG8gYDJgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBbdGlsZVVybEZ1bmN0aW9uXSBPcHRpb25hbCBmdW5jdGlvbiB0byBnZXQgdGlsZSBVUkwgZ2l2ZW4gYSB0aWxlIGNvb3JkaW5hdGUgYW5kIHRoZSBwcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt1cmxdIFVSTCB0ZW1wbGF0ZS4gTXVzdCBpbmNsdWRlIGB7eH1gLCBge3l9YCBvciBgey15fWAsIGFuZCBge3p9YCBwbGFjZWhvbGRlcnMuXG4gKiBBIGB7Py0/fWAgdGVtcGxhdGUgcGF0dGVybiwgZm9yIGV4YW1wbGUgYHN1YmRvbWFpbnthLWZ9LmRvbWFpbi5jb21gLCBtYXkgYmVcbiAqIHVzZWQgaW5zdGVhZCBvZiBkZWZpbmluZyBlYWNoIG9uZSBzZXBhcmF0ZWx5IGluIHRoZSBgdXJsc2Agb3B0aW9uLlxuICogQHByb3BlcnR5IHtBcnJheTxzdHJpbmc+fSBbdXJsc10gQW4gYXJyYXkgb2YgVVJMIHRlbXBsYXRlcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYXSBXaGV0aGVyIHRvIHdyYXAgdGhlIHdvcmxkIGhvcml6b250YWxseS4gVGhlIGRlZmF1bHQsIGlzIHRvXG4gKiByZXF1ZXN0IG91dC1vZi1ib3VuZHMgdGlsZXMgZnJvbSB0aGUgc2VydmVyLiBXaGVuIHNldCB0byBgZmFsc2VgLCBvbmx5IG9uZVxuICogd29ybGQgd2lsbCBiZSByZW5kZXJlZC4gV2hlbiBzZXQgdG8gYHRydWVgLCB0aWxlcyB3aWxsIGJlIHJlcXVlc3RlZCBmb3Igb25lXG4gKiB3b3JsZCBvbmx5LCBidXQgdGhleSB3aWxsIGJlIHdyYXBwZWQgaG9yaXpvbnRhbGx5IHRvIHJlbmRlciBtdWx0aXBsZSB3b3JsZHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb25dIER1cmF0aW9uIG9mIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24gZm9yIHJlbmRlcmluZy5cbiAqIFRvIGRpc2FibGUgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiwgcGFzcyBgdHJhbnNpdGlvbjogMGAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2tleV0gT3B0aW9uYWwgdGlsZSBrZXkgZm9yIHByb3BlciBjYWNoZSBmZXRjaGluZ1xuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIGZvciBzb3VyY2VzIHByb3ZpZGluZyBpbWFnZXMgZGl2aWRlZCBpbnRvIGEgdGlsZSBncmlkLlxuICpcbiAqIEBmaXJlcyBpbXBvcnQoXCIuL1RpbGUuanNcIikuVGlsZVNvdXJjZUV2ZW50XG4gKiBAYXBpXG4gKi9cbnZhciBUaWxlSW1hZ2UgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChVcmxUaWxlKSB7XG4gIGZ1bmN0aW9uIFRpbGVJbWFnZShvcHRpb25zKSB7XG5cbiAgICBVcmxUaWxlLmNhbGwodGhpcywge1xuICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgIGNhY2hlU2l6ZTogb3B0aW9ucy5jYWNoZVNpemUsXG4gICAgICBvcGFxdWU6IG9wdGlvbnMub3BhcXVlLFxuICAgICAgcHJvamVjdGlvbjogb3B0aW9ucy5wcm9qZWN0aW9uLFxuICAgICAgc3RhdGU6IG9wdGlvbnMuc3RhdGUsXG4gICAgICB0aWxlR3JpZDogb3B0aW9ucy50aWxlR3JpZCxcbiAgICAgIHRpbGVMb2FkRnVuY3Rpb246IG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvbiA/XG4gICAgICAgIG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvbiA6IGRlZmF1bHRUaWxlTG9hZEZ1bmN0aW9uLFxuICAgICAgdGlsZVBpeGVsUmF0aW86IG9wdGlvbnMudGlsZVBpeGVsUmF0aW8sXG4gICAgICB0aWxlVXJsRnVuY3Rpb246IG9wdGlvbnMudGlsZVVybEZ1bmN0aW9uLFxuICAgICAgdXJsOiBvcHRpb25zLnVybCxcbiAgICAgIHVybHM6IG9wdGlvbnMudXJscyxcbiAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYLFxuICAgICAgdHJhbnNpdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLFxuICAgICAga2V5OiBvcHRpb25zLmtleSxcbiAgICAgIGF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlOiBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUgez9zdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5jcm9zc09yaWdpbiA9XG4gICAgICAgIG9wdGlvbnMuY3Jvc3NPcmlnaW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY3Jvc3NPcmlnaW4gOiBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHt0eXBlb2YgSW1hZ2VUaWxlfVxuICAgICAqL1xuICAgIHRoaXMudGlsZUNsYXNzID0gb3B0aW9ucy50aWxlQ2xhc3MgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLnRpbGVDbGFzcyA6IEltYWdlVGlsZTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIFRpbGVDYWNoZT59XG4gICAgICovXG4gICAgdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbiA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkXyA9IG9wdGlvbnMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfID0gZmFsc2U7XG4gIH1cblxuICBpZiAoIFVybFRpbGUgKSBUaWxlSW1hZ2UuX19wcm90b19fID0gVXJsVGlsZTtcbiAgVGlsZUltYWdlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFVybFRpbGUgJiYgVXJsVGlsZS5wcm90b3R5cGUgKTtcbiAgVGlsZUltYWdlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRpbGVJbWFnZTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFRpbGVJbWFnZS5wcm90b3R5cGUuY2FuRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiBjYW5FeHBpcmVDYWNoZSAoKSB7XG4gICAgaWYgKCFFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTikge1xuICAgICAgcmV0dXJuIFVybFRpbGUucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIGlmICh0aGlzLnRpbGVDYWNoZS5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbikge1xuICAgICAgICBpZiAodGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW2tleV0uY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFRpbGVJbWFnZS5wcm90b3R5cGUuZXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiBleHBpcmVDYWNoZSAocHJvamVjdGlvbiwgdXNlZFRpbGVzKSB7XG4gICAgaWYgKCFFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTikge1xuICAgICAgVXJsVGlsZS5wcm90b3R5cGUuZXhwaXJlQ2FjaGUuY2FsbCh0aGlzLCBwcm9qZWN0aW9uLCB1c2VkVGlsZXMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdXNlZFRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcblxuICAgIHRoaXMudGlsZUNhY2hlLmV4cGlyZUNhY2hlKHRoaXMudGlsZUNhY2hlID09IHVzZWRUaWxlQ2FjaGUgPyB1c2VkVGlsZXMgOiB7fSk7XG4gICAgZm9yICh2YXIgaWQgaW4gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uKSB7XG4gICAgICB2YXIgdGlsZUNhY2hlID0gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW2lkXTtcbiAgICAgIHRpbGVDYWNoZS5leHBpcmVDYWNoZSh0aWxlQ2FjaGUgPT0gdXNlZFRpbGVDYWNoZSA/IHVzZWRUaWxlcyA6IHt9KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldEd1dHRlckZvclByb2plY3Rpb24gPSBmdW5jdGlvbiBnZXRHdXR0ZXJGb3JQcm9qZWN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgaWYgKEVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OICYmXG4gICAgICAgIHRoaXMuZ2V0UHJvamVjdGlvbigpICYmIHByb2plY3Rpb24gJiYgIWVxdWl2YWxlbnQodGhpcy5nZXRQcm9qZWN0aW9uKCksIHByb2plY3Rpb24pKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0R3V0dGVyKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IEd1dHRlci5cbiAgICovXG4gIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0R3V0dGVyID0gZnVuY3Rpb24gZ2V0R3V0dGVyICgpIHtcbiAgICByZXR1cm4gMDtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0T3BhcXVlID0gZnVuY3Rpb24gZ2V0T3BhcXVlIChwcm9qZWN0aW9uKSB7XG4gICAgaWYgKEVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OICYmXG4gICAgICAgIHRoaXMuZ2V0UHJvamVjdGlvbigpICYmIHByb2plY3Rpb24gJiYgIWVxdWl2YWxlbnQodGhpcy5nZXRQcm9qZWN0aW9uKCksIHByb2plY3Rpb24pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBVcmxUaWxlLnByb3RvdHlwZS5nZXRPcGFxdWUuY2FsbCh0aGlzLCBwcm9qZWN0aW9uKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIGdldFRpbGVHcmlkRm9yUHJvamVjdGlvbiQxIChwcm9qZWN0aW9uKSB7XG4gICAgaWYgKCFFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTikge1xuICAgICAgcmV0dXJuIFVybFRpbGUucHJvdG90eXBlLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbi5jYWxsKHRoaXMsIHByb2plY3Rpb24pO1xuICAgIH1cbiAgICB2YXIgdGhpc1Byb2ogPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICBpZiAodGhpcy50aWxlR3JpZCAmJiAoIXRoaXNQcm9qIHx8IGVxdWl2YWxlbnQodGhpc1Byb2osIHByb2plY3Rpb24pKSkge1xuICAgICAgcmV0dXJuIHRoaXMudGlsZUdyaWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBwcm9qS2V5ID0gZ2V0VWlkKHByb2plY3Rpb24pO1xuICAgICAgaWYgKCEocHJvaktleSBpbiB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbikpIHtcbiAgICAgICAgdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb25bcHJvaktleV0gPSBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gKFxuICAgICAgICAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy50aWxlR3JpZEZvclByb2plY3Rpb25bcHJvaktleV0pXG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIGdldFRpbGVDYWNoZUZvclByb2plY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICByZXR1cm4gVXJsVGlsZS5wcm90b3R5cGUuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbi5jYWxsKHRoaXMsIHByb2plY3Rpb24pO1xuICAgIH1cbiAgICB2YXIgdGhpc1Byb2ogPSB0aGlzLmdldFByb2plY3Rpb24oKTsgaWYgKCF0aGlzUHJvaiB8fCBlcXVpdmFsZW50KHRoaXNQcm9qLCBwcm9qZWN0aW9uKSkge1xuICAgICAgcmV0dXJuIHRoaXMudGlsZUNhY2hlO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgcHJvaktleSA9IGdldFVpZChwcm9qZWN0aW9uKTtcbiAgICAgIGlmICghKHByb2pLZXkgaW4gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uKSkge1xuICAgICAgICB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25bcHJvaktleV0gPSBuZXcgVGlsZUNhY2hlKHRoaXMudGlsZUNhY2hlLmhpZ2hXYXRlck1hcmspO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbltwcm9qS2V5XTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBzZXQgb24gdGhlIHRpbGUuXG4gICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBUaWxlSW1hZ2UucHJvdG90eXBlLmNyZWF0ZVRpbGVfID0gZnVuY3Rpb24gY3JlYXRlVGlsZV8gKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIGtleSkge1xuICAgIHZhciB0aWxlQ29vcmQgPSBbeiwgeCwgeV07XG4gICAgdmFyIHVybFRpbGVDb29yZCA9IHRoaXMuZ2V0VGlsZUNvb3JkRm9yVGlsZVVybEZ1bmN0aW9uKFxuICAgICAgdGlsZUNvb3JkLCBwcm9qZWN0aW9uKTtcbiAgICB2YXIgdGlsZVVybCA9IHVybFRpbGVDb29yZCA/XG4gICAgICB0aGlzLnRpbGVVcmxGdW5jdGlvbih1cmxUaWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIDogdW5kZWZpbmVkO1xuICAgIHZhciB0aWxlID0gbmV3IHRoaXMudGlsZUNsYXNzKFxuICAgICAgdGlsZUNvb3JkLFxuICAgICAgdGlsZVVybCAhPT0gdW5kZWZpbmVkID8gVGlsZVN0YXRlLklETEUgOiBUaWxlU3RhdGUuRU1QVFksXG4gICAgICB0aWxlVXJsICE9PSB1bmRlZmluZWQgPyB0aWxlVXJsIDogJycsXG4gICAgICB0aGlzLmNyb3NzT3JpZ2luLFxuICAgICAgdGhpcy50aWxlTG9hZEZ1bmN0aW9uLFxuICAgICAgdGhpcy50aWxlT3B0aW9ucyk7XG4gICAgdGlsZS5rZXkgPSBrZXk7XG4gICAgbGlzdGVuKHRpbGUsIEV2ZW50VHlwZS5DSEFOR0UsXG4gICAgICB0aGlzLmhhbmRsZVRpbGVDaGFuZ2UsIHRoaXMpO1xuICAgIHJldHVybiB0aWxlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRUaWxlID0gZnVuY3Rpb24gZ2V0VGlsZSAoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgIHZhciBzb3VyY2VQcm9qZWN0aW9uID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovICh0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgaWYgKCFFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiB8fFxuICAgICAgICAhc291cmNlUHJvamVjdGlvbiB8fCAhcHJvamVjdGlvbiB8fCBlcXVpdmFsZW50KHNvdXJjZVByb2plY3Rpb24sIHByb2plY3Rpb24pKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRUaWxlSW50ZXJuYWwoeiwgeCwgeSwgcGl4ZWxSYXRpbywgc291cmNlUHJvamVjdGlvbiB8fCBwcm9qZWN0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgdmFyIHRpbGVDb29yZCA9IFt6LCB4LCB5XTtcbiAgICAgIHZhciB0aWxlO1xuICAgICAgdmFyIHRpbGVDb29yZEtleSA9IGdldEtleSh0aWxlQ29vcmQpO1xuICAgICAgaWYgKGNhY2hlLmNvbnRhaW5zS2V5KHRpbGVDb29yZEtleSkpIHtcbiAgICAgICAgdGlsZSA9IC8qKiBAdHlwZSB7IWltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKGNhY2hlLmdldCh0aWxlQ29vcmRLZXkpKTtcbiAgICAgIH1cbiAgICAgIHZhciBrZXkgPSB0aGlzLmdldEtleSgpO1xuICAgICAgaWYgKHRpbGUgJiYgdGlsZS5rZXkgPT0ga2V5KSB7XG4gICAgICAgIHJldHVybiB0aWxlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHNvdXJjZVRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24oc291cmNlUHJvamVjdGlvbik7XG4gICAgICAgIHZhciB0YXJnZXRUaWxlR3JpZCA9IHRoaXMuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICB2YXIgd3JhcHBlZFRpbGVDb29yZCA9XG4gICAgICAgICAgICB0aGlzLmdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbih0aWxlQ29vcmQsIHByb2plY3Rpb24pO1xuICAgICAgICB2YXIgbmV3VGlsZSA9IG5ldyBSZXByb2pUaWxlKFxuICAgICAgICAgIHNvdXJjZVByb2plY3Rpb24sIHNvdXJjZVRpbGVHcmlkLFxuICAgICAgICAgIHByb2plY3Rpb24sIHRhcmdldFRpbGVHcmlkLFxuICAgICAgICAgIHRpbGVDb29yZCwgd3JhcHBlZFRpbGVDb29yZCwgdGhpcy5nZXRUaWxlUGl4ZWxSYXRpbyhwaXhlbFJhdGlvKSxcbiAgICAgICAgICB0aGlzLmdldEd1dHRlcigpLFxuICAgICAgICAgIGZ1bmN0aW9uKHosIHgsIHksIHBpeGVsUmF0aW8pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVJbnRlcm5hbCh6LCB4LCB5LCBwaXhlbFJhdGlvLCBzb3VyY2VQcm9qZWN0aW9uKTtcbiAgICAgICAgICB9LmJpbmQodGhpcyksIHRoaXMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfLFxuICAgICAgICAgIHRoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfKTtcbiAgICAgICAgbmV3VGlsZS5rZXkgPSBrZXk7XG5cbiAgICAgICAgaWYgKHRpbGUpIHtcbiAgICAgICAgICBuZXdUaWxlLmludGVyaW1UaWxlID0gdGlsZTtcbiAgICAgICAgICBuZXdUaWxlLnJlZnJlc2hJbnRlcmltQ2hhaW4oKTtcbiAgICAgICAgICBjYWNoZS5yZXBsYWNlKHRpbGVDb29yZEtleSwgbmV3VGlsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FjaGUuc2V0KHRpbGVDb29yZEtleSwgbmV3VGlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld1RpbGU7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICogQHBhcmFtIHshaW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7IWltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRUaWxlSW50ZXJuYWwgPSBmdW5jdGlvbiBnZXRUaWxlSW50ZXJuYWwgKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICB2YXIgdGlsZSA9IG51bGw7XG4gICAgdmFyIHRpbGVDb29yZEtleSA9IGdldEtleVpYWSh6LCB4LCB5KTtcbiAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXkoKTtcbiAgICBpZiAoIXRoaXMudGlsZUNhY2hlLmNvbnRhaW5zS2V5KHRpbGVDb29yZEtleSkpIHtcbiAgICAgIHRpbGUgPSB0aGlzLmNyZWF0ZVRpbGVfKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIGtleSk7XG4gICAgICB0aGlzLnRpbGVDYWNoZS5zZXQodGlsZUNvb3JkS2V5LCB0aWxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGlsZSA9IHRoaXMudGlsZUNhY2hlLmdldCh0aWxlQ29vcmRLZXkpO1xuICAgICAgaWYgKHRpbGUua2V5ICE9IGtleSkge1xuICAgICAgICAvLyBUaGUgc291cmNlJ3MgcGFyYW1zIGNoYW5nZWQuIElmIHRoZSB0aWxlIGhhcyBhbiBpbnRlcmltIHRpbGUgYW5kIGlmIHdlXG4gICAgICAgIC8vIGNhbiB1c2UgaXQgdGhlbiB3ZSB1c2UgaXQuIE90aGVyd2lzZSB3ZSBjcmVhdGUgYSBuZXcgdGlsZS4gIEluIGJvdGhcbiAgICAgICAgLy8gY2FzZXMgd2UgYXR0ZW1wdCB0byBhc3NpZ24gYW4gaW50ZXJpbSB0aWxlIHRvIHRoZSBuZXcgdGlsZS5cbiAgICAgICAgdmFyIGludGVyaW1UaWxlID0gdGlsZTtcbiAgICAgICAgdGlsZSA9IHRoaXMuY3JlYXRlVGlsZV8oeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwga2V5KTtcblxuICAgICAgICAvL21ha2UgdGhlIG5ldyB0aWxlIHRoZSBoZWFkIG9mIHRoZSBsaXN0LFxuICAgICAgICBpZiAoaW50ZXJpbVRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgIC8vdGhlIG9sZCB0aWxlIGhhc24ndCBiZWd1biBsb2FkaW5nIHlldCwgYW5kIGlzIG5vdyBvdXRkYXRlZCwgc28gd2UgY2FuIHNpbXBseSBkaXNjYXJkIGl0XG4gICAgICAgICAgdGlsZS5pbnRlcmltVGlsZSA9IGludGVyaW1UaWxlLmludGVyaW1UaWxlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRpbGUuaW50ZXJpbVRpbGUgPSBpbnRlcmltVGlsZTtcbiAgICAgICAgfVxuICAgICAgICB0aWxlLnJlZnJlc2hJbnRlcmltQ2hhaW4oKTtcbiAgICAgICAgdGhpcy50aWxlQ2FjaGUucmVwbGFjZSh0aWxlQ29vcmRLZXksIHRpbGUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGlsZTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB3aGV0aGVyIHRvIHJlbmRlciByZXByb2plY3Rpb24gZWRnZXMgb3Igbm90ICh1c3VhbGx5IGZvciBkZWJ1Z2dpbmcpLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlbmRlciBSZW5kZXIgdGhlIGVkZ2VzLlxuICAgKiBAYXBpXG4gICAqL1xuICBUaWxlSW1hZ2UucHJvdG90eXBlLnNldFJlbmRlclJlcHJvamVjdGlvbkVkZ2VzID0gZnVuY3Rpb24gc2V0UmVuZGVyUmVwcm9qZWN0aW9uRWRnZXMgKHJlbmRlcikge1xuICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04gfHxcbiAgICAgICAgdGhpcy5yZW5kZXJSZXByb2plY3Rpb25FZGdlc18gPT0gcmVuZGVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfID0gcmVuZGVyO1xuICAgIGZvciAodmFyIGlkIGluIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbikge1xuICAgICAgdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW2lkXS5jbGVhcigpO1xuICAgIH1cbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgdGlsZSBncmlkIHRvIHVzZSB3aGVuIHJlcHJvamVjdGluZyB0aGUgdGlsZXMgdG8gdGhlIGdpdmVuXG4gICAqIHByb2plY3Rpb24gaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCB0aWxlIGdyaWQgZm9yIHRoZSBwcm9qZWN0aW9uLlxuICAgKlxuICAgKiBUaGlzIGNhbiBiZSB1c2VmdWwgd2hlbiB0aGUgZGVmYXVsdCB0aWxlIGdyaWQgY2Fubm90IGJlIGNyZWF0ZWRcbiAgICogKGUuZy4gcHJvamVjdGlvbiBoYXMgbm8gZXh0ZW50IGRlZmluZWQpIG9yXG4gICAqIGZvciBvcHRpbWl6YXRpb24gcmVhc29ucyAoY3VzdG9tIHRpbGUgc2l6ZSwgcmVzb2x1dGlvbnMsIC4uLikuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVncmlkIFRpbGUgZ3JpZCB0byB1c2UgZm9yIHRoZSBwcm9qZWN0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBUaWxlSW1hZ2UucHJvdG90eXBlLnNldFRpbGVHcmlkRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIHNldFRpbGVHcmlkRm9yUHJvamVjdGlvbiAocHJvamVjdGlvbiwgdGlsZWdyaWQpIHtcbiAgICBpZiAoRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgIHZhciBwcm9qID0gZ2V0UHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgIGlmIChwcm9qKSB7XG4gICAgICAgIHZhciBwcm9qS2V5ID0gZ2V0VWlkKHByb2opO1xuICAgICAgICBpZiAoIShwcm9qS2V5IGluIHRoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uKSkge1xuICAgICAgICAgIHRoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uW3Byb2pLZXldID0gdGlsZWdyaWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFRpbGVJbWFnZTtcbn0oVXJsVGlsZSkpO1xuXG5cbi8qKlxuICogQHBhcmFtIHtJbWFnZVRpbGV9IGltYWdlVGlsZSBJbWFnZSB0aWxlLlxuICogQHBhcmFtIHtzdHJpbmd9IHNyYyBTb3VyY2UuXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHRUaWxlTG9hZEZ1bmN0aW9uKGltYWdlVGlsZSwgc3JjKSB7XG4gIC8qKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSAqLyAoaW1hZ2VUaWxlLmdldEltYWdlKCkpLnNyYyA9IHNyYztcbn1cblxuZXhwb3J0IGRlZmF1bHQgVGlsZUltYWdlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlSW1hZ2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9PU01cbiAqL1xuXG5pbXBvcnQgWFlaIGZyb20gJy4vWFlaLmpzJztcblxuXG4vKipcbiAqIFRoZSBhdHRyaWJ1dGlvbiBjb250YWluaW5nIGEgbGluayB0byB0aGUgT3BlblN0cmVldE1hcCBDb3B5cmlnaHQgYW5kIExpY2Vuc2VcbiAqIHBhZ2UuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgQVRUUklCVVRJT04gPSAnJiMxNjk7ICcgK1xuICAgICAgJzxhIGhyZWY9XCJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiAnICtcbiAgICAgICdjb250cmlidXRvcnMuJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NhY2hlU2l6ZT0yMDQ4XSBDYWNoZSBzaXplLlxuICogQHByb3BlcnR5IHtudWxsfHN0cmluZ30gW2Nyb3NzT3JpZ2luXSBUaGUgYGNyb3NzT3JpZ2luYCBhdHRyaWJ1dGUgZm9yIGxvYWRlZCBpbWFnZXMuICBOb3RlIHRoYXRcbiAqIHlvdSBtdXN0IHByb3ZpZGUgYSBgY3Jvc3NPcmlnaW5gIHZhbHVlIGlmIHlvdSBhcmUgdXNpbmcgdGhlIFdlYkdMIHJlbmRlcmVyIG9yIGlmIHlvdSB3YW50IHRvXG4gKiBhY2Nlc3MgcGl4ZWwgZGF0YSB3aXRoIHRoZSBDYW52YXMgcmVuZGVyZXIuICBTZWVcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvQ09SU19lbmFibGVkX2ltYWdlIGZvciBtb3JlIGRldGFpbC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbT0xOV0gTWF4IHpvb20uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9dHJ1ZV0gV2hldGhlciB0aGUgbGF5ZXIgaXMgb3BhcXVlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZD0xLjVdIE1heGltdW0gYWxsb3dlZCByZXByb2plY3Rpb24gZXJyb3IgKGluIHBpeGVscykuXG4gKiBIaWdoZXIgdmFsdWVzIGNhbiBpbmNyZWFzZSByZXByb2plY3Rpb24gcGVyZm9ybWFuY2UsIGJ1dCBkZWNyZWFzZSBwcmVjaXNpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSBbdGlsZUxvYWRGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gbG9hZCBhIHRpbGUgZ2l2ZW4gYSBVUkwuIFRoZSBkZWZhdWx0IGlzXG4gKiBgYGBqc1xuICogZnVuY3Rpb24oaW1hZ2VUaWxlLCBzcmMpIHtcbiAqICAgaW1hZ2VUaWxlLmdldEltYWdlKCkuc3JjID0gc3JjO1xuICogfTtcbiAqIGBgYFxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt1cmw9J2h0dHBzOi8ve2EtY30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnXSBVUkwgdGVtcGxhdGUuXG4gKiBNdXN0IGluY2x1ZGUgYHt4fWAsIGB7eX1gIG9yIGB7LXl9YCwgYW5kIGB7en1gIHBsYWNlaG9sZGVycy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYPXRydWVdIFdoZXRoZXIgdG8gd3JhcCB0aGUgd29ybGQgaG9yaXpvbnRhbGx5LlxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBMYXllciBzb3VyY2UgZm9yIHRoZSBPcGVuU3RyZWV0TWFwIHRpbGUgc2VydmVyLlxuICogQGFwaVxuICovXG52YXIgT1NNID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoWFlaKSB7XG4gIGZ1bmN0aW9uIE9TTShvcHRfb3B0aW9ucykge1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcblxuICAgIHZhciBhdHRyaWJ1dGlvbnM7XG4gICAgaWYgKG9wdGlvbnMuYXR0cmlidXRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGF0dHJpYnV0aW9ucyA9IG9wdGlvbnMuYXR0cmlidXRpb25zO1xuICAgIH0gZWxzZSB7XG4gICAgICBhdHRyaWJ1dGlvbnMgPSBbQVRUUklCVVRJT05dO1xuICAgIH1cblxuICAgIHZhciBjcm9zc09yaWdpbiA9IG9wdGlvbnMuY3Jvc3NPcmlnaW4gIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLmNyb3NzT3JpZ2luIDogJ2Fub255bW91cyc7XG5cbiAgICB2YXIgdXJsID0gb3B0aW9ucy51cmwgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLnVybCA6ICdodHRwczovL3thLWN9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nJztcblxuICAgIFhZWi5jYWxsKHRoaXMsIHtcbiAgICAgIGF0dHJpYnV0aW9uczogYXR0cmlidXRpb25zLFxuICAgICAgY2FjaGVTaXplOiBvcHRpb25zLmNhY2hlU2l6ZSxcbiAgICAgIGNyb3NzT3JpZ2luOiBjcm9zc09yaWdpbixcbiAgICAgIG9wYXF1ZTogb3B0aW9ucy5vcGFxdWUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub3BhcXVlIDogdHJ1ZSxcbiAgICAgIG1heFpvb206IG9wdGlvbnMubWF4Wm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tYXhab29tIDogMTksXG4gICAgICByZXByb2plY3Rpb25FcnJvclRocmVzaG9sZDogb3B0aW9ucy5yZXByb2plY3Rpb25FcnJvclRocmVzaG9sZCxcbiAgICAgIHRpbGVMb2FkRnVuY3Rpb246IG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvbixcbiAgICAgIHVybDogdXJsLFxuICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFgsXG4gICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogZmFsc2VcbiAgICB9KTtcblxuICB9XG5cbiAgaWYgKCBYWVogKSBPU00uX19wcm90b19fID0gWFlaO1xuICBPU00ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggWFlaICYmIFhZWi5wcm90b3R5cGUgKTtcbiAgT1NNLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE9TTTtcblxuICByZXR1cm4gT1NNO1xufShYWVopKTtcblxuZXhwb3J0IGRlZmF1bHQgT1NNO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1PU00uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9YWVpcbiAqL1xuXG5pbXBvcnQgVGlsZUltYWdlIGZyb20gJy4vVGlsZUltYWdlLmpzJztcbmltcG9ydCB7Y3JlYXRlWFlaLCBleHRlbnRGcm9tUHJvamVjdGlvbn0gZnJvbSAnLi4vdGlsZWdyaWQuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZT10cnVlXSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjYWNoZVNpemU9MjA0OF0gQ2FjaGUgc2l6ZS5cbiAqIEBwcm9wZXJ0eSB7bnVsbHxzdHJpbmd9IFtjcm9zc09yaWdpbl0gVGhlIGBjcm9zc09yaWdpbmAgYXR0cmlidXRlIGZvciBsb2FkZWQgaW1hZ2VzLiAgTm90ZSB0aGF0XG4gKiB5b3UgbXVzdCBwcm92aWRlIGEgYGNyb3NzT3JpZ2luYCB2YWx1ZSBpZiB5b3UgYXJlIHVzaW5nIHRoZSBXZWJHTCByZW5kZXJlciBvciBpZiB5b3Ugd2FudCB0b1xuICogYWNjZXNzIHBpeGVsIGRhdGEgd2l0aCB0aGUgQ2FudmFzIHJlbmRlcmVyLiAgU2VlXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0NPUlNfZW5hYmxlZF9pbWFnZSBmb3IgbW9yZSBkZXRhaWwuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9dHJ1ZV0gV2hldGhlciB0aGUgbGF5ZXIgaXMgb3BhcXVlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbj0nRVBTRzozODU3J10gUHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ9MC41XSBNYXhpbXVtIGFsbG93ZWQgcmVwcm9qZWN0aW9uIGVycm9yIChpbiBwaXhlbHMpLlxuICogSGlnaGVyIHZhbHVlcyBjYW4gaW5jcmVhc2UgcmVwcm9qZWN0aW9uIHBlcmZvcm1hbmNlLCBidXQgZGVjcmVhc2UgcHJlY2lzaW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tPTE4XSBPcHRpb25hbCBtYXggem9vbSBsZXZlbC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbT0wXSBPcHRpb25hbCBtaW4gem9vbSBsZXZlbC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gW3RpbGVHcmlkXSBUaWxlIGdyaWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSBbdGlsZUxvYWRGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gbG9hZCBhIHRpbGUgZ2l2ZW4gYSBVUkwuIFRoZSBkZWZhdWx0IGlzXG4gKiBgYGBqc1xuICogZnVuY3Rpb24oaW1hZ2VUaWxlLCBzcmMpIHtcbiAqICAgaW1hZ2VUaWxlLmdldEltYWdlKCkuc3JjID0gc3JjO1xuICogfTtcbiAqIGBgYFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aWxlUGl4ZWxSYXRpbz0xXSBUaGUgcGl4ZWwgcmF0aW8gdXNlZCBieSB0aGUgdGlsZSBzZXJ2aWNlLlxuICogRm9yIGV4YW1wbGUsIGlmIHRoZSB0aWxlIHNlcnZpY2UgYWR2ZXJ0aXplcyAyNTZweCBieSAyNTZweCB0aWxlcyBidXQgYWN0dWFsbHkgc2VuZHMgNTEycHhcbiAqIGJ5IDUxMnB4IGltYWdlcyAoZm9yIHJldGluYS9oaWRwaSBkZXZpY2VzKSB0aGVuIGB0aWxlUGl4ZWxSYXRpb2BcbiAqIHNob3VsZCBiZSBzZXQgdG8gYDJgLlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBbdGlsZVNpemU9WzI1NiwgMjU2XV0gVGhlIHRpbGUgc2l6ZSB1c2VkIGJ5IHRoZSB0aWxlIHNlcnZpY2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFt0aWxlVXJsRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGdldFxuICogdGlsZSBVUkwgZ2l2ZW4gYSB0aWxlIGNvb3JkaW5hdGUgYW5kIHRoZSBwcm9qZWN0aW9uLlxuICogUmVxdWlyZWQgaWYgdXJsIG9yIHVybHMgYXJlIG5vdCBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXSBVUkwgdGVtcGxhdGUuIE11c3QgaW5jbHVkZSBge3h9YCwgYHt5fWAgb3IgYHsteX1gLFxuICogYW5kIGB7en1gIHBsYWNlaG9sZGVycy4gQSBgez8tP31gIHRlbXBsYXRlIHBhdHRlcm4sIGZvciBleGFtcGxlIGBzdWJkb21haW57YS1mfS5kb21haW4uY29tYCxcbiAqIG1heSBiZSB1c2VkIGluc3RlYWQgb2YgZGVmaW5pbmcgZWFjaCBvbmUgc2VwYXJhdGVseSBpbiB0aGUgYHVybHNgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gW3VybHNdIEFuIGFycmF5IG9mIFVSTCB0ZW1wbGF0ZXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD10cnVlXSBXaGV0aGVyIHRvIHdyYXAgdGhlIHdvcmxkIGhvcml6b250YWxseS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbl0gRHVyYXRpb24gb2YgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiBmb3IgcmVuZGVyaW5nLlxuICogVG8gZGlzYWJsZSB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLCBwYXNzIGB0cmFuc2l0aW9uOiAwYC5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogTGF5ZXIgc291cmNlIGZvciB0aWxlIGRhdGEgd2l0aCBVUkxzIGluIGEgc2V0IFhZWiBmb3JtYXQgdGhhdCBhcmVcbiAqIGRlZmluZWQgaW4gYSBVUkwgdGVtcGxhdGUuIEJ5IGRlZmF1bHQsIHRoaXMgZm9sbG93cyB0aGUgd2lkZWx5LXVzZWRcbiAqIEdvb2dsZSBncmlkIHdoZXJlIGB4YCAwIGFuZCBgeWAgMCBhcmUgaW4gdGhlIHRvcCBsZWZ0LiBHcmlkcyBsaWtlXG4gKiBUTVMgd2hlcmUgYHhgIDAgYW5kIGB5YCAwIGFyZSBpbiB0aGUgYm90dG9tIGxlZnQgY2FuIGJlIHVzZWQgYnlcbiAqIHVzaW5nIHRoZSBgey15fWAgcGxhY2Vob2xkZXIgaW4gdGhlIFVSTCB0ZW1wbGF0ZSwgc28gbG9uZyBhcyB0aGVcbiAqIHNvdXJjZSBkb2VzIG5vdCBoYXZlIGEgY3VzdG9tIHRpbGUgZ3JpZC4gSW4gdGhpcyBjYXNlLFxuICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZUltYWdlfSBjYW4gYmUgdXNlZCB3aXRoIGEgYHRpbGVVcmxGdW5jdGlvbmBcbiAqIHN1Y2ggYXM6XG4gKlxuICogIHRpbGVVcmxGdW5jdGlvbjogZnVuY3Rpb24oY29vcmRpbmF0ZSkge1xuICogICAgcmV0dXJuICdodHRwOi8vbWFwc2VydmVyLmNvbS8nICsgY29vcmRpbmF0ZVswXSArICcvJyArXG4gKiAgICAgICAgY29vcmRpbmF0ZVsxXSArICcvJyArIGNvb3JkaW5hdGVbMl0gKyAnLnBuZyc7XG4gKiAgICB9XG4gKlxuICogQGFwaVxuICovXG52YXIgWFlaID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoVGlsZUltYWdlKSB7XG4gIGZ1bmN0aW9uIFhZWihvcHRfb3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgdmFyIHByb2plY3Rpb24gPSBvcHRpb25zLnByb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLnByb2plY3Rpb24gOiAnRVBTRzozODU3JztcblxuICAgIHZhciB0aWxlR3JpZCA9IG9wdGlvbnMudGlsZUdyaWQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGlsZUdyaWQgOlxuICAgICAgY3JlYXRlWFlaKHtcbiAgICAgICAgZXh0ZW50OiBleHRlbnRGcm9tUHJvamVjdGlvbihwcm9qZWN0aW9uKSxcbiAgICAgICAgbWF4Wm9vbTogb3B0aW9ucy5tYXhab29tLFxuICAgICAgICBtaW5ab29tOiBvcHRpb25zLm1pblpvb20sXG4gICAgICAgIHRpbGVTaXplOiBvcHRpb25zLnRpbGVTaXplXG4gICAgICB9KTtcblxuICAgIFRpbGVJbWFnZS5jYWxsKHRoaXMsIHtcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICBjYWNoZVNpemU6IG9wdGlvbnMuY2FjaGVTaXplLFxuICAgICAgY3Jvc3NPcmlnaW46IG9wdGlvbnMuY3Jvc3NPcmlnaW4sXG4gICAgICBvcGFxdWU6IG9wdGlvbnMub3BhcXVlLFxuICAgICAgcHJvamVjdGlvbjogcHJvamVjdGlvbixcbiAgICAgIHJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkOiBvcHRpb25zLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkLFxuICAgICAgdGlsZUdyaWQ6IHRpbGVHcmlkLFxuICAgICAgdGlsZUxvYWRGdW5jdGlvbjogb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uLFxuICAgICAgdGlsZVBpeGVsUmF0aW86IG9wdGlvbnMudGlsZVBpeGVsUmF0aW8sXG4gICAgICB0aWxlVXJsRnVuY3Rpb246IG9wdGlvbnMudGlsZVVybEZ1bmN0aW9uLFxuICAgICAgdXJsOiBvcHRpb25zLnVybCxcbiAgICAgIHVybHM6IG9wdGlvbnMudXJscyxcbiAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLndyYXBYIDogdHJ1ZSxcbiAgICAgIHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbixcbiAgICAgIGF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlOiBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlXG4gICAgfSk7XG5cbiAgfVxuXG4gIGlmICggVGlsZUltYWdlICkgWFlaLl9fcHJvdG9fXyA9IFRpbGVJbWFnZTtcbiAgWFlaLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFRpbGVJbWFnZSAmJiBUaWxlSW1hZ2UucHJvdG90eXBlICk7XG4gIFhZWi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBYWVo7XG5cbiAgcmV0dXJuIFhZWjtcbn0oVGlsZUltYWdlKSk7XG5cbmV4cG9ydCBkZWZhdWx0IFhZWjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9WFlaLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvVXJsVGlsZVxuICovXG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQge2V4cGFuZFVybCwgY3JlYXRlRnJvbVRlbXBsYXRlcywgbnVsbFRpbGVVcmxGdW5jdGlvbn0gZnJvbSAnLi4vdGlsZXVybGZ1bmN0aW9uLmpzJztcbmltcG9ydCBUaWxlU291cmNlLCB7VGlsZVNvdXJjZUV2ZW50fSBmcm9tICcuL1RpbGUuanMnO1xuaW1wb3J0IFRpbGVFdmVudFR5cGUgZnJvbSAnLi9UaWxlRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7Z2V0S2V5WlhZfSBmcm9tICcuLi90aWxlY29vcmQuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGVdXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFt0aWxlR3JpZF1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IHRpbGVMb2FkRnVuY3Rpb25cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGlsZVBpeGVsUmF0aW9dXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFt0aWxlVXJsRnVuY3Rpb25dXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3VybF1cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gW3VybHNdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD10cnVlXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2l0aW9uXVxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtrZXldXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHNvdXJjZXMgcHJvdmlkaW5nIHRpbGVzIGRpdmlkZWQgaW50byBhIHRpbGUgZ3JpZCBvdmVyIGh0dHAuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4vVGlsZS5qc1wiKS5UaWxlU291cmNlRXZlbnRcbiAqL1xudmFyIFVybFRpbGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChUaWxlU291cmNlKSB7XG4gIGZ1bmN0aW9uIFVybFRpbGUob3B0aW9ucykge1xuXG4gICAgVGlsZVNvdXJjZS5jYWxsKHRoaXMsIHtcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICBjYWNoZVNpemU6IG9wdGlvbnMuY2FjaGVTaXplLFxuICAgICAgb3BhcXVlOiBvcHRpb25zLm9wYXF1ZSxcbiAgICAgIHByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbixcbiAgICAgIHN0YXRlOiBvcHRpb25zLnN0YXRlLFxuICAgICAgdGlsZUdyaWQ6IG9wdGlvbnMudGlsZUdyaWQsXG4gICAgICB0aWxlUGl4ZWxSYXRpbzogb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyxcbiAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYLFxuICAgICAgdHJhbnNpdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLFxuICAgICAga2V5OiBvcHRpb25zLmtleSxcbiAgICAgIGF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlOiBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuZ2VuZXJhdGVUaWxlVXJsRnVuY3Rpb25fID0gIW9wdGlvbnMudGlsZVVybEZ1bmN0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVMb2FkRnVuY3Rpb24gPSBvcHRpb25zLnRpbGVMb2FkRnVuY3Rpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259XG4gICAgICovXG4gICAgdGhpcy50aWxlVXJsRnVuY3Rpb24gPSBvcHRpb25zLnRpbGVVcmxGdW5jdGlvbiA/IG9wdGlvbnMudGlsZVVybEZ1bmN0aW9uLmJpbmQodGhpcykgOiBudWxsVGlsZVVybEZ1bmN0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHshQXJyYXk8c3RyaW5nPnxudWxsfVxuICAgICAqL1xuICAgIHRoaXMudXJscyA9IG51bGw7XG5cbiAgICBpZiAob3B0aW9ucy51cmxzKSB7XG4gICAgICB0aGlzLnNldFVybHMob3B0aW9ucy51cmxzKTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMudXJsKSB7XG4gICAgICB0aGlzLnNldFVybChvcHRpb25zLnVybCk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMudGlsZVVybEZ1bmN0aW9uKSB7XG4gICAgICB0aGlzLnNldFRpbGVVcmxGdW5jdGlvbihvcHRpb25zLnRpbGVVcmxGdW5jdGlvbiwgdGhpcy5rZXlfKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gICAgICovXG4gICAgdGhpcy50aWxlTG9hZGluZ0tleXNfID0ge307XG5cbiAgfVxuXG4gIGlmICggVGlsZVNvdXJjZSApIFVybFRpbGUuX19wcm90b19fID0gVGlsZVNvdXJjZTtcbiAgVXJsVGlsZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBUaWxlU291cmNlICYmIFRpbGVTb3VyY2UucHJvdG90eXBlICk7XG4gIFVybFRpbGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVXJsVGlsZTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSB0aWxlIGxvYWQgZnVuY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IFRpbGVMb2FkRnVuY3Rpb25cbiAgICogQGFwaVxuICAgKi9cbiAgVXJsVGlsZS5wcm90b3R5cGUuZ2V0VGlsZUxvYWRGdW5jdGlvbiA9IGZ1bmN0aW9uIGdldFRpbGVMb2FkRnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnRpbGVMb2FkRnVuY3Rpb247XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgdGlsZSBVUkwgZnVuY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gVGlsZVVybEZ1bmN0aW9uXG4gICAqIEBhcGlcbiAgICovXG4gIFVybFRpbGUucHJvdG90eXBlLmdldFRpbGVVcmxGdW5jdGlvbiA9IGZ1bmN0aW9uIGdldFRpbGVVcmxGdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGlsZVVybEZ1bmN0aW9uO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIFVSTHMgdXNlZCBmb3IgdGhpcyBzb3VyY2UuXG4gICAqIFdoZW4gYSB0aWxlVXJsRnVuY3Rpb24gaXMgdXNlZCBpbnN0ZWFkIG9mIHVybCBvciB1cmxzLFxuICAgKiBudWxsIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAqIEByZXR1cm4geyFBcnJheTxzdHJpbmc+fG51bGx9IFVSTHMuXG4gICAqIEBhcGlcbiAgICovXG4gIFVybFRpbGUucHJvdG90eXBlLmdldFVybHMgPSBmdW5jdGlvbiBnZXRVcmxzICgpIHtcbiAgICByZXR1cm4gdGhpcy51cmxzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgdGlsZSBjaGFuZ2UgZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgVXJsVGlsZS5wcm90b3R5cGUuaGFuZGxlVGlsZUNoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZVRpbGVDaGFuZ2UgKGV2ZW50KSB7XG4gICAgdmFyIHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKGV2ZW50LnRhcmdldCk7XG4gICAgdmFyIHVpZCA9IGdldFVpZCh0aWxlKTtcbiAgICB2YXIgdGlsZVN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgIHZhciB0eXBlO1xuICAgIGlmICh0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkxPQURJTkcpIHtcbiAgICAgIHRoaXMudGlsZUxvYWRpbmdLZXlzX1t1aWRdID0gdHJ1ZTtcbiAgICAgIHR5cGUgPSBUaWxlRXZlbnRUeXBlLlRJTEVMT0FEU1RBUlQ7XG4gICAgfSBlbHNlIGlmICh1aWQgaW4gdGhpcy50aWxlTG9hZGluZ0tleXNfKSB7XG4gICAgICBkZWxldGUgdGhpcy50aWxlTG9hZGluZ0tleXNfW3VpZF07XG4gICAgICB0eXBlID0gdGlsZVN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUiA/IFRpbGVFdmVudFR5cGUuVElMRUxPQURFUlJPUiA6XG4gICAgICAgICh0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkxPQURFRCB8fCB0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkFCT1JUKSA/XG4gICAgICAgICAgVGlsZUV2ZW50VHlwZS5USUxFTE9BREVORCA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHR5cGUgIT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFRpbGVTb3VyY2VFdmVudCh0eXBlLCB0aWxlKSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHRpbGUgbG9hZCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSB0aWxlTG9hZEZ1bmN0aW9uIFRpbGUgbG9hZCBmdW5jdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgVXJsVGlsZS5wcm90b3R5cGUuc2V0VGlsZUxvYWRGdW5jdGlvbiA9IGZ1bmN0aW9uIHNldFRpbGVMb2FkRnVuY3Rpb24gKHRpbGVMb2FkRnVuY3Rpb24pIHtcbiAgICB0aGlzLnRpbGVDYWNoZS5jbGVhcigpO1xuICAgIHRoaXMudGlsZUxvYWRGdW5jdGlvbiA9IHRpbGVMb2FkRnVuY3Rpb247XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdGlsZSBVUkwgZnVuY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSB0aWxlVXJsRnVuY3Rpb24gVGlsZSBVUkwgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0ga2V5IE9wdGlvbmFsIG5ldyB0aWxlIGtleSBmb3IgdGhlIHNvdXJjZS5cbiAgICogQGFwaVxuICAgKi9cbiAgVXJsVGlsZS5wcm90b3R5cGUuc2V0VGlsZVVybEZ1bmN0aW9uID0gZnVuY3Rpb24gc2V0VGlsZVVybEZ1bmN0aW9uICh0aWxlVXJsRnVuY3Rpb24sIGtleSkge1xuICAgIHRoaXMudGlsZVVybEZ1bmN0aW9uID0gdGlsZVVybEZ1bmN0aW9uO1xuICAgIHRoaXMudGlsZUNhY2hlLnBydW5lRXhjZXB0TmV3ZXN0WigpO1xuICAgIGlmICh0eXBlb2Yga2V5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5zZXRLZXkoa2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIFVSTCB0byB1c2UgZm9yIHJlcXVlc3RzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFVSTC5cbiAgICogQGFwaVxuICAgKi9cbiAgVXJsVGlsZS5wcm90b3R5cGUuc2V0VXJsID0gZnVuY3Rpb24gc2V0VXJsICh1cmwpIHtcbiAgICB2YXIgdXJscyA9IHRoaXMudXJscyA9IGV4cGFuZFVybCh1cmwpO1xuICAgIHRoaXMuc2V0VXJscyh1cmxzKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBVUkxzIHRvIHVzZSBmb3IgcmVxdWVzdHMuXG4gICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gdXJscyBVUkxzLlxuICAgKiBAYXBpXG4gICAqL1xuICBVcmxUaWxlLnByb3RvdHlwZS5zZXRVcmxzID0gZnVuY3Rpb24gc2V0VXJscyAodXJscykge1xuICAgIHRoaXMudXJscyA9IHVybHM7XG4gICAgdmFyIGtleSA9IHVybHMuam9pbignXFxuJyk7XG4gICAgaWYgKHRoaXMuZ2VuZXJhdGVUaWxlVXJsRnVuY3Rpb25fKSB7XG4gICAgICB0aGlzLnNldFRpbGVVcmxGdW5jdGlvbihjcmVhdGVGcm9tVGVtcGxhdGVzKHVybHMsIHRoaXMudGlsZUdyaWQpLCBrZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldEtleShrZXkpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFVybFRpbGUucHJvdG90eXBlLnVzZVRpbGUgPSBmdW5jdGlvbiB1c2VUaWxlICh6LCB4LCB5KSB7XG4gICAgdmFyIHRpbGVDb29yZEtleSA9IGdldEtleVpYWSh6LCB4LCB5KTtcbiAgICBpZiAodGhpcy50aWxlQ2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgdGhpcy50aWxlQ2FjaGUuZ2V0KHRpbGVDb29yZEtleSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBVcmxUaWxlO1xufShUaWxlU291cmNlKSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgVXJsVGlsZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VXJsVGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvVGlsZVByb3BlcnR5XG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIFBSRUxPQUQ6ICdwcmVsb2FkJyxcbiAgVVNFX0lOVEVSSU1fVElMRVNfT05fRVJST1I6ICd1c2VJbnRlcmltVGlsZXNPbkVycm9yJ1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZVByb3BlcnR5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9UaWxlXG4gKi9cbmltcG9ydCBMYXllclR5cGUgZnJvbSAnLi4vTGF5ZXJUeXBlLmpzJztcbmltcG9ydCBMYXllciBmcm9tICcuL0xheWVyLmpzJztcbmltcG9ydCBUaWxlUHJvcGVydHkgZnJvbSAnLi9UaWxlUHJvcGVydHkuanMnO1xuaW1wb3J0IHthc3NpZ259IGZyb20gJy4uL29iai5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcHJlbG9hZD0wXSBQcmVsb2FkLiBMb2FkIGxvdy1yZXNvbHV0aW9uIHRpbGVzIHVwIHRvIGBwcmVsb2FkYCBsZXZlbHMuIGAwYFxuICogbWVhbnMgbm8gcHJlbG9hZGluZy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gW3NvdXJjZV0gU291cmNlIGZvciB0aGlzIGxheWVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gW21hcF0gU2V0cyB0aGUgbGF5ZXIgYXMgb3ZlcmxheSBvbiBhIG1hcC4gVGhlIG1hcCB3aWxsIG5vdCBtYW5hZ2VcbiAqIHRoaXMgbGF5ZXIgaW4gaXRzIGxheWVycyBjb2xsZWN0aW9uLCBhbmQgdGhlIGxheWVyIHdpbGwgYmUgcmVuZGVyZWQgb24gdG9wLiBUaGlzIGlzIHVzZWZ1bCBmb3JcbiAqIHRlbXBvcmFyeSBsYXllcnMuIFRoZSBzdGFuZGFyZCB3YXkgdG8gYWRkIGEgbGF5ZXIgdG8gYSBtYXAgYW5kIGhhdmUgaXQgbWFuYWdlZCBieSB0aGUgbWFwIGlzIHRvXG4gKiB1c2Uge0BsaW5rIG1vZHVsZTpvbC9NYXAjYWRkTGF5ZXJ9LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXNlSW50ZXJpbVRpbGVzT25FcnJvcj10cnVlXSBVc2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEZvciBsYXllciBzb3VyY2VzIHRoYXQgcHJvdmlkZSBwcmUtcmVuZGVyZWQsIHRpbGVkIGltYWdlcyBpbiBncmlkcyB0aGF0IGFyZVxuICogb3JnYW5pemVkIGJ5IHpvb20gbGV2ZWxzIGZvciBzcGVjaWZpYyByZXNvbHV0aW9ucy5cbiAqIE5vdGUgdGhhdCBhbnkgcHJvcGVydHkgc2V0IGluIHRoZSBvcHRpb25zIGlzIHNldCBhcyBhIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3R9XG4gKiBwcm9wZXJ0eSBvbiB0aGUgbGF5ZXIgb2JqZWN0OyBmb3IgZXhhbXBsZSwgc2V0dGluZyBgdGl0bGU6ICdNeSBUaXRsZSdgIGluIHRoZVxuICogb3B0aW9ucyBtZWFucyB0aGF0IGB0aXRsZWAgaXMgb2JzZXJ2YWJsZSwgYW5kIGhhcyBnZXQvc2V0IGFjY2Vzc29ycy5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBUaWxlTGF5ZXIgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChMYXllcikge1xuICBmdW5jdGlvbiBUaWxlTGF5ZXIob3B0X29wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcblxuICAgIHZhciBiYXNlT3B0aW9ucyA9IGFzc2lnbih7fSwgb3B0aW9ucyk7XG5cbiAgICBkZWxldGUgYmFzZU9wdGlvbnMucHJlbG9hZDtcbiAgICBkZWxldGUgYmFzZU9wdGlvbnMudXNlSW50ZXJpbVRpbGVzT25FcnJvcjtcbiAgICBMYXllci5jYWxsKHRoaXMsIGJhc2VPcHRpb25zKTtcblxuICAgIHRoaXMuc2V0UHJlbG9hZChvcHRpb25zLnByZWxvYWQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucHJlbG9hZCA6IDApO1xuICAgIHRoaXMuc2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvcihvcHRpb25zLnVzZUludGVyaW1UaWxlc09uRXJyb3IgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLnVzZUludGVyaW1UaWxlc09uRXJyb3IgOiB0cnVlKTtcblxuICAgIC8qKlxuICAgICogVGhlIGxheWVyIHR5cGUuXG4gICAgKiBAcHJvdGVjdGVkXG4gICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vTGF5ZXJUeXBlLmpzXCIpLmRlZmF1bHR9XG4gICAgKi9cbiAgICB0aGlzLnR5cGUgPSBMYXllclR5cGUuVElMRTtcblxuICB9XG5cbiAgaWYgKCBMYXllciApIFRpbGVMYXllci5fX3Byb3RvX18gPSBMYXllcjtcbiAgVGlsZUxheWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIExheWVyICYmIExheWVyLnByb3RvdHlwZSApO1xuICBUaWxlTGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVGlsZUxheWVyO1xuXG4gIC8qKlxuICAqIFJldHVybiB0aGUgbGV2ZWwgYXMgbnVtYmVyIHRvIHdoaWNoIHdlIHdpbGwgcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBsZXZlbCB0byBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAqIEBvYnNlcnZhYmxlXG4gICogQGFwaVxuICAqL1xuICBUaWxlTGF5ZXIucHJvdG90eXBlLmdldFByZWxvYWQgPSBmdW5jdGlvbiBnZXRQcmVsb2FkICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChUaWxlUHJvcGVydHkuUFJFTE9BRCkpO1xuICB9O1xuXG4gIC8qKlxuICAqIFNldCB0aGUgbGV2ZWwgYXMgbnVtYmVyIHRvIHdoaWNoIHdlIHdpbGwgcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgKiBAcGFyYW0ge251bWJlcn0gcHJlbG9hZCBUaGUgbGV2ZWwgdG8gcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgKiBAb2JzZXJ2YWJsZVxuICAqIEBhcGlcbiAgKi9cbiAgVGlsZUxheWVyLnByb3RvdHlwZS5zZXRQcmVsb2FkID0gZnVuY3Rpb24gc2V0UHJlbG9hZCAocHJlbG9hZCkge1xuICAgIHRoaXMuc2V0KFRpbGVQcm9wZXJ0eS5QUkVMT0FELCBwcmVsb2FkKTtcbiAgfTtcblxuICAvKipcbiAgKiBXaGV0aGVyIHdlIHVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICAqIEByZXR1cm4ge2Jvb2xlYW59IFVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICAqIEBvYnNlcnZhYmxlXG4gICogQGFwaVxuICAqL1xuICBUaWxlTGF5ZXIucHJvdG90eXBlLmdldFVzZUludGVyaW1UaWxlc09uRXJyb3IgPSBmdW5jdGlvbiBnZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtib29sZWFufSAqLyAodGhpcy5nZXQoVGlsZVByb3BlcnR5LlVTRV9JTlRFUklNX1RJTEVTX09OX0VSUk9SKSk7XG4gIH07XG5cbiAgLyoqXG4gICogU2V0IHdoZXRoZXIgd2UgdXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICogQHBhcmFtIHtib29sZWFufSB1c2VJbnRlcmltVGlsZXNPbkVycm9yIFVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICAqIEBvYnNlcnZhYmxlXG4gICogQGFwaVxuICAqL1xuICBUaWxlTGF5ZXIucHJvdG90eXBlLnNldFVzZUludGVyaW1UaWxlc09uRXJyb3IgPSBmdW5jdGlvbiBzZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yICh1c2VJbnRlcmltVGlsZXNPbkVycm9yKSB7XG4gICAgdGhpcy5zZXQoVGlsZVByb3BlcnR5LlVTRV9JTlRFUklNX1RJTEVTX09OX0VSUk9SLCB1c2VJbnRlcmltVGlsZXNPbkVycm9yKTtcbiAgfTtcblxuICByZXR1cm4gVGlsZUxheWVyO1xufShMYXllcikpO1xuXG5cbi8qKlxuICogUmV0dXJuIHRoZSBhc3NvY2lhdGVkIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1RpbGUgdGlsZXNvdXJjZX0gb2YgdGhlIGxheWVyLlxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSBTb3VyY2UuXG4gKiBAYXBpXG4gKi9cblRpbGVMYXllci5wcm90b3R5cGUuZ2V0U291cmNlO1xuXG5cbmV4cG9ydCBkZWZhdWx0IFRpbGVMYXllcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZS5qcy5tYXAiLCIgaW1wb3J0IE1hcCBmcm9tICdvbC9tYXAnO1xyXG4gLy9pbXBvcnQgbGF5ZXIgZnJvbSAnb2wvbGF5ZXIvbGF5ZXInO1xyXG4gLy9pbXBvcnQgdGlsZSBmcm9tICdvbC9sYXllci90aWxlJztcclxuIGltcG9ydCBWaWV3IGZyb20gJ29sL3ZpZXcnO1xyXG4gaW1wb3J0IE9TTSBmcm9tICdvbC9zb3VyY2UvT1NNJztcclxuIGltcG9ydCBUaWxlTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvVGlsZSc7XHJcblxyXG4gY29uc3QgbWFwOiBNYXAgPSBuZXcgTWFwKHtcclxuICAgIHRhcmdldDogJ21hcCcsXHJcbiAgICBsYXllcnM6IFtcclxuICAgICAgbmV3IFRpbGVMYXllcih7XHJcbiAgICAgICAgc291cmNlOiBuZXcgT1NNKClcclxuICAgICAgfSlcclxuICAgIF0sXHJcbiAgICB2aWV3OiBuZXcgVmlldyh7XHJcbiAgICAgIGNlbnRlcjogWzAsIDBdLFxyXG4gICAgICB6b29tOiA0XHJcbiAgICB9KVxyXG5cclxuICB9KTsgXHJcblxyXG4vKipcclxuICog0YDQsNCx0L7RgtCw0LXRgiBjIG9wZW5sYXllcnMg0LggQHR5cGVzL29wZW5sYXllcnNcclxuICogXHJcbiAgaW1wb3J0ICogYXMgb2wgZnJvbSAnb3BlbmxheWVycyc7XHJcblxyXG4gY29uc3QgbWFwOiBvbC5NYXAgPSBuZXcgb2wuTWFwKHtcclxuICAgIHRhcmdldDogJ21hcCcsXHJcbiAgICBsYXllcnM6IFtcclxuICAgICAgbmV3IG9sLmxheWVyLlRpbGUoe1xyXG4gICAgICAgIHNvdXJjZTogbmV3IG9sLnNvdXJjZS5PU00oKVxyXG4gICAgICB9KVxyXG4gICAgXSxcclxuICAgIHZpZXc6IG5ldyBvbC5WaWV3KHtcclxuICAgICAgY2VudGVyOiBvbC5wcm9qLmZyb21Mb25MYXQoWzM3LjQxLCA4LjgyXSksXHJcbiAgICAgIHpvb206IDRcclxuICAgIH0pXHJcbiAgfSk7IFxyXG4gKi8iXSwic291cmNlUm9vdCI6IiJ9